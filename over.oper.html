<!DOCTYPE html><html lang='en'><head><title>[over.oper]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>16</a> Overloading <a class='abbr_ref' href='./#over'>[over]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>16.5</a> Overloaded operators <a class='abbr_ref'>[over.oper]</a></h2><span class='indexparent'><a class='index' id=':overloading,operator'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3045'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator,overloaded'></a></span>A function declaration having one of the following
<i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i><span class='textit'>s</span>
as its name declares an
<a class='hidden_link' href='#def:function,operator' id='def:function,operator'><i >operator function</i></a><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A function template declaration having one of the
following <i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i><span class='textit'>s</span> as its name
declares an <a class='hidden_link' href='#def:function,operator,template' id='def:function,operator,template'><i >operator function template</i></a><a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>A specialization
of an operator function template is also an operator function<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>An operator function is said to
<a class='hidden_link' href='#def:operator,implementation' id='def:operator,implementation'><i >implement</i></a>
the operator named in its
<i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i><a class='hidden_link' href='#1.sentence-4'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:operator-function-id' id='nt:operator-function-id'>operator-function-id:</a>
&#9;<span class='terminal'><i ><a href='over.oper#nt:operator'>operator</a></i></span> <i ><a href='over.oper#nt:operator'>operator</a></i>
</pre><pre class='bnfkeywordtab'><a class='nontermdef' href='#nt:operator' id='nt:operator'>operator:</a> <span class='textnormal'>one of</span>
&#9;new&#9;delete&#9;new[]&#9;delete[]&#9;(<span style='white-space:nowrap'>&thinsp;</span>)&#9;[<span style='white-space:nowrap'>&thinsp;</span>]&#9;-&gt;&#9;-&gt;*&#9;~
&#9;!&#9;+&#9;-&#9;*&#9;/&#9;%&#9;^&#9;&amp;&#9;|
&#9;=&#9;+=&#9;-=&#9;*=&#9;/=&#9;%=&#9;^=&#9;&amp;=&#9;|=
&#9;==&#9;!=&#9;&lt;&#9;&gt;&#9;&lt;=&#9;&gt;=&#9;&lt;=&gt;&#9;&amp;&amp;&#9;||
&#9;&lt;&lt;&#9;&gt;&gt;&#9;&lt;&lt;=&#9;&gt;&gt;=&#9;++&#9;--&#9;,
</pre>
<div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-5' class='sentence'>The last two operators are <a href='expr.call'>function call</a>
and <a href='expr.sub'>subscripting</a><a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>The operators
<span class='texttt'>new[]</span>,
<span class='texttt'>delete[]</span>,
<span class='texttt'>()</span>,
and
<span class='texttt'>[]</span>
are formed from more than one token<a class='hidden_link' href='#1.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> 
<span class='indexparent'><a class='index' id=':operator,subscripting'></a></span><span class='indexparent'><a class='index' id=':operator,function_call'></a></span></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3087'>#</a></div><div id='2.sentence-1' class='sentence'>Both the unary and binary forms of
<pre class='codeblock'>
+    -    *     &amp;</pre>
can be overloaded<a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3094'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':restriction,operator_overloading'></a></span>The following operators cannot be overloaded:
<pre class='codeblock'>
.    .*   ::    ?:</pre>
nor can the preprocessing symbols
<span class='texttt'>#</span>
and
<span class='texttt'>##</span> (<a href='cpp'>[cpp]</a>)<a class='hidden_link' href='#3.sentence-1'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3105'>#</a></div><div id='4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':call,operator_function'></a></span>Operator functions are usually not called directly; instead they are invoked
to evaluate the operators they implement (<a href='over.unary'>[over.unary]</a> – <a href='over.inc'>[over.inc]</a>)<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>They can be explicitly called, however, using the
<i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i>
as the name of the function in the function call syntax (<a href='expr.call'>[expr.call]</a>)<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
complex z = a.operator+(b);     <span class='comment'>// <span class='tcode_in_codeblock'>complex z = a+b;</span>
</span>void* p = operator new(sizeof(int)*n);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3120'>#</a></div><div id='5.sentence-1' class='sentence'>The allocation and deallocation functions,
<span class='texttt'>operator</span>
<span class='texttt'>new</span>,
<span class='texttt'>operator</span>
<span class='texttt'>new[]</span>,
<span class='texttt'>operator</span>
<span class='texttt'>delete</span>
and
<span class='texttt'>operator</span>
<span class='texttt'>delete&#x200b;[]</span>,
are described completely in <a href='basic.stc.dynamic'>[basic.stc.dynamic]</a><a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>The attributes and restrictions
found in the rest of this subclause do not apply to them unless explicitly
stated in <a href='basic.stc.dynamic'>[basic.stc.dynamic]</a><a class='hidden_link' href='#5.sentence-2'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3136'>#</a></div><div id='6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':restriction,overloading'></a></span>An operator function
shall either be a non-static member function or be a non-member function that
has at least one parameter whose type is a class, a reference to a class, an
enumeration, or a reference to an enumeration<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>It is not possible to change the precedence, grouping, or number of operands
of operators<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>The meaning of the operators
<span class='texttt'>=</span>,
(unary)
<span class='texttt'>&amp;</span>,
and
<span class='texttt'>,</span>
(comma), predefined for each type, can be changed for specific
class and enumeration types by
defining operator functions that implement these operators<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':overloaded_operator,inheritance_of'></a></span>Operator functions are inherited in the same manner as other base class
functions<a class='hidden_link' href='#6.sentence-4'>.</a></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3157'>#</a></div><div id='7.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator'></a></span>The identities among certain predefined operators applied to basic types
(for example,
<span class='texttt'>++a</span> <span class='math'>&equiv;</span>
<span class='texttt'>a+=1</span>)
need not hold for operator functions<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>Some predefined operators, such as
<span class='texttt'>+=</span>,
require an operand to be an lvalue when applied to basic types;
this is not required by operator functions<a class='hidden_link' href='#7.sentence-2'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3169'>#</a></div><div id='8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':argument,overloaded_operator_and_default'></a></span>An operator function cannot have <a href='dcl.fct.default'>default arguments</a>,
except where explicitly stated below<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>Operator
functions cannot have more or fewer parameters than the
number required for the corresponding operator, as
described in the rest of this subclause<a class='hidden_link' href='#8.sentence-2'>.</a></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3178'>#</a></div><div id='9.sentence-1' class='sentence'>Operators not mentioned explicitly in subclauses <a href='over.ass'>[over.ass]</a> through <a href='over.inc'>[over.inc]</a>
act as ordinary unary and binary
operators obeying the rules of <a href='over.unary'>[over.unary]</a> or <a href='over.binary'>[over.binary]</a><a class='hidden_link' href='#9.sentence-1'>.</a></div> </div><div id='over.unary' class='section'><h3 ><a class='secnum' href='#over.unary' style='min-width:103pt'>16.5.1</a> Unary operators <a class='abbr_ref' href='over.unary'>[over.unary]</a></h3><span class='indexparent'><a class='index' id=':unary_operator,overloaded'></a></span><span class='indexparent'><a class='index' id=':overloading,unary_operator'></a></span><div class='para' id='over.unary-1'><div class='marginalizedparent'><a class='marginalized' href='#over.unary-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3189'>#</a></div><div id='over.unary-1.sentence-1' class='sentence'>A prefix unary operator shall be implemented by a
non-static member function (<a href='class.mfct'>[class.mfct]</a>) with no parameters or a
non-member function with one parameter<a class='hidden_link' href='#over.unary-1.sentence-1'>.</a></div> <div id='over.unary-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':unary_operator,interpretation_of'></a></span>Thus, for any prefix unary operator
<span class='texttt'>@</span>,
<span class='texttt'>@x</span>
can be interpreted as either
<span class='texttt'>x.operator@()</span>
or
<span class='texttt'>operator@(x)</span><a class='hidden_link' href='#over.unary-1.sentence-2'>.</a></div> <div id='over.unary-1.sentence-3' class='sentence'>If both forms of the operator function have been declared,
the rules in <a href='over.match.oper'>[over.match.oper]</a> determine which, if any, interpretation is
used<a class='hidden_link' href='#over.unary-1.sentence-3'>.</a></div> <div id='over.unary-1.sentence-4' class='sentence'>See <a href='over.inc'>[over.inc]</a> for an explanation of the postfix unary operators
<span class='texttt'>++</span>
and
<span class='texttt'>--</span><a class='hidden_link' href='#over.unary-1.sentence-4'>.</a></div></div><div class='para' id='over.unary-2'><div class='marginalizedparent'><a class='marginalized' href='#over.unary-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3209'>#</a></div><div id='over.unary-2.sentence-1' class='sentence'>The unary and binary forms of the same operator are considered to have
the same name<a class='hidden_link' href='#over.unary-2.sentence-1'>.</a></div> <div id='over.unary-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#over.unary-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.unary-2.sentence-2' class='sentence'>Consequently, a unary operator can hide a binary
operator from an enclosing scope, and vice versa<a class='hidden_link' href='#over.unary-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='over.binary' class='section'><h3 ><a class='secnum' href='#over.binary' style='min-width:103pt'>16.5.2</a> Binary operators <a class='abbr_ref' href='over.binary'>[over.binary]</a></h3><span class='indexparent'><a class='index' id=':binary_operator,overloaded'></a></span><span class='indexparent'><a class='index' id=':overloading,binary_operator'></a></span><div class='para' id='over.binary-1'><div class='marginalizedparent'><a class='marginalized' href='#over.binary-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3221'>#</a></div><div id='over.binary-1.sentence-1' class='sentence'>A binary operator shall be implemented either by a non-static member
function (<a href='class.mfct'>[class.mfct]</a>)
with one parameter or by a non-member function with two parameters<a class='hidden_link' href='#over.binary-1.sentence-1'>.</a></div> <div id='over.binary-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':binary_operator,interpretation_of'></a></span>Thus, for any binary operator
<span class='texttt'>@</span>,
<span class='texttt'>x@y</span>
can be interpreted as either
<span class='texttt'>x.operator@(y)</span>
or
<span class='texttt'>operator@(x,y)</span><a class='hidden_link' href='#over.binary-1.sentence-2'>.</a></div> <div id='over.binary-1.sentence-3' class='sentence'>If both forms of the operator function have been declared,
the rules in <a href='over.match.oper'>[over.match.oper]</a> determine which, if any, interpretation is
used<a class='hidden_link' href='#over.binary-1.sentence-3'>.</a></div></div></div><div id='over.ass' class='section'><h3 ><a class='secnum' href='#over.ass' style='min-width:103pt'>16.5.3</a> Assignment <a class='abbr_ref' href='over.ass'>[over.ass]</a></h3><span class='indexparent'><a class='index' id=':assignment_operator,overloaded'></a></span><span class='indexparent'><a class='index' id=':overloading,assignment_operator'></a></span><div class='para' id='over.ass-1'><div class='marginalizedparent'><a class='marginalized' href='#over.ass-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3241'>#</a></div><div id='over.ass-1.sentence-1' class='sentence'>An assignment operator shall be implemented by a
non-static member function with
exactly one parameter<a class='hidden_link' href='#over.ass-1.sentence-1'>.</a></div> <div id='over.ass-1.sentence-2' class='sentence'>Because a copy assignment operator
<span class='texttt'>operator=</span>
is implicitly declared for a class if not declared by the user (<a href='class.copy'>[class.copy]</a>),
a base class assignment operator is always hidden by the copy assignment
operator of the derived class<a class='hidden_link' href='#over.ass-1.sentence-2'>.</a></div></div><div class='para' id='over.ass-2'><div class='marginalizedparent'><a class='marginalized' href='#over.ass-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3251'>#</a></div><div id='over.ass-2.sentence-1' class='sentence'>Any assignment operator, even the copy and move assignment operators, can be virtual<a class='hidden_link' href='#over.ass-2.sentence-1'>.</a></div> <div id='over.ass-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#over.ass-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.ass-2.sentence-2' class='sentence'>For a derived class
<span class='texttt'>D</span>
with a base class
<span class='texttt'>B</span>
for which a virtual copy/move assignment has been declared,
the copy/move assignment operator in
<span class='texttt'>D</span>
does not override
<span class='texttt'>B</span>'s
virtual copy/move assignment operator<a class='hidden_link' href='#over.ass-2.sentence-2'>.</a></div> <div id='over.ass-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over.ass-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B {
  virtual int operator= (int);
  virtual B&amp; operator= (const B&amp;);
};
struct D : B {
  virtual int operator= (int);
  virtual D&amp; operator= (const B&amp;);
};

D dobj1;
D dobj2;
B* bptr = &amp;dobj1;
void f() {
  bptr-&gt;operator=(99);          <span class='comment'>// calls <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;operator=(int)</span>
</span>  *bptr = 99;                   <span class='comment'>// ditto
</span>  bptr-&gt;operator=(dobj2);       <span class='comment'>// calls <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;operator=(const B&amp;)</span>
</span>  *bptr = dobj2;                <span class='comment'>// ditto
</span>  dobj1 = dobj2;                <span class='comment'>// calls implicitly-declared <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;operator=(const D&amp;)</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='over.call' class='section'><h3 ><a class='secnum' href='#over.call' style='min-width:103pt'>16.5.4</a> Function call <a class='abbr_ref' href='over.call'>[over.call]</a></h3><span class='indexparent'><a class='index' id=':function_call_operator,overloaded'></a></span><span class='indexparent'><a class='index' id=':overloading,function_call_operator'></a></span><div class='para' id='over.call-1'><div class='marginalizedparent'><a class='marginalized' href='#over.call-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3294'>#</a></div><div id='over.call-1.sentence-1' class='sentence'><span class='texttt'>operator()</span>
shall be a non-static member function with an arbitrary number of
parameters<a class='hidden_link' href='#over.call-1.sentence-1'>.</a></div> <div id='over.call-1.sentence-2' class='sentence'>It can have default arguments<a class='hidden_link' href='#over.call-1.sentence-2'>.</a></div> <div id='over.call-1.sentence-3' class='sentence'>It implements the function call syntax
<pre class='ncsimplebnf'><i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
</pre>
where the
<i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i>
evaluates to a class object and the possibly empty
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
matches the parameter list of an
<span class='texttt'>operator()</span>
member function of the class<a class='hidden_link' href='#over.call-1.sentence-3'>.</a></div> <div id='over.call-1.sentence-4' class='sentence'>Thus, a call
<span class='texttt'>x(arg1,...)</span>
is interpreted as
<span class='texttt'>x.operator()(arg1, ...)</span>
for a class object
<span class='texttt'>x</span>
of type
<span class='texttt'>T</span>
if
<span class='texttt'>T&#x200b;::&#x200b;operator()(T1,</span>
<span class='texttt'>T2,</span>
<span class='texttt'>T3)</span>
exists and if the operator is selected as the best match function by
the overload resolution mechanism (<a href='over.match.best'>[over.match.best]</a>)<a class='hidden_link' href='#over.call-1.sentence-4'>.</a></div></div></div><div id='over.sub' class='section'><h3 ><a class='secnum' href='#over.sub' style='min-width:103pt'>16.5.5</a> Subscripting <a class='abbr_ref' href='over.sub'>[over.sub]</a></h3><span class='indexparent'><a class='index' id=':subscripting_operator,overloaded'></a></span><span class='indexparent'><a class='index' id=':overloading,subscripting_operator'></a></span><div class='para' id='over.sub-1'><div class='marginalizedparent'><a class='marginalized' href='#over.sub-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3329'>#</a></div><div id='over.sub-1.sentence-1' class='sentence'><span class='texttt'>operator[]</span>
shall be a non-static member function with exactly one parameter<a class='hidden_link' href='#over.sub-1.sentence-1'>.</a></div> <div id='over.sub-1.sentence-2' class='sentence'>It implements the subscripting syntax</div><pre class='ncsimplebnf'><i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>[</span> <i ><a href='dcl.init#nt:expr-or-braced-init-list'>expr-or-braced-init-list</a></i> <span class='terminal'>]</span>
</pre><div id='over.sub-1.sentence-3' class='sentence'>Thus, a subscripting expression
<span class='texttt'>x[y]</span>
is interpreted as
<span class='texttt'>x.operator[](y)</span>
for a class object
<span class='texttt'>x</span>
of type
<span class='texttt'>T</span>
if
<span class='texttt'>T&#x200b;::&#x200b;operator[](T1)</span>
exists and if the operator is selected as the best match function by
the overload resolution mechanism (<a href='over.match.best'>[over.match.best]</a>)<a class='hidden_link' href='#over.sub-1.sentence-3'>.</a></div> <div id='over.sub-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over.sub-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  Z operator[](std::initializer_list&lt;int&gt;);
};
X x;
x[{1,2,3}] = 7;                 <span class='comment'>// OK: meaning <span class='tcode_in_codeblock'>x.operator[]({1,2,3})</span>
</span>int a[10];
a[{1,2,3}] = 7;                 <span class='comment'>// error: built-in subscript operator
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='over.ref' class='section'><h3 ><a class='secnum' href='#over.ref' style='min-width:103pt'>16.5.6</a> Class member access <a class='abbr_ref' href='over.ref'>[over.ref]</a></h3><span class='indexparent'><a class='index' id=':member_access_operator,overloaded'></a></span><span class='indexparent'><a class='index' id=':overloading,member_access_operator'></a></span><div class='para' id='over.ref-1'><div class='marginalizedparent'><a class='marginalized' href='#over.ref-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3366'>#</a></div><div id='over.ref-1.sentence-1' class='sentence'><span class='texttt'>operator-&gt;</span>
shall be a non-static member function taking no parameters<a class='hidden_link' href='#over.ref-1.sentence-1'>.</a></div> <div id='over.ref-1.sentence-2' class='sentence'>It implements the class member access syntax that
uses <span class='texttt'>-&gt;</span><a class='hidden_link' href='#over.ref-1.sentence-2'>.</a></div><pre class='ncsimplebnf'><i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>-&gt;</span> <span class='terminal'>template<span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
<i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>-&gt;</span> <i ><a href='expr.post#nt:pseudo-destructor-name'>pseudo-destructor-name</a></i>
</pre><div id='over.ref-1.sentence-3' class='sentence'>An expression
<span class='texttt'>x-&gt;m</span>
is interpreted as
<span class='texttt'>(x.operator-&gt;())-&gt;m</span>
for a class object
<span class='texttt'>x</span>
of type
<span class='texttt'>T</span>
if
<span class='texttt'>T&#x200b;::&#x200b;operator-&gt;()</span>
exists and if the operator is selected as the best match function by
the overload resolution mechanism (<a href='over.match'>[over.match]</a>)<a class='hidden_link' href='#over.ref-1.sentence-3'>.</a></div></div></div><div id='over.inc' class='section'><h3 ><a class='secnum' href='#over.inc' style='min-width:103pt'>16.5.7</a> Increment and decrement <a class='abbr_ref' href='over.inc'>[over.inc]</a></h3><span class='indexparent'><a class='index' id=':prefix_++_and_--,overloading'></a></span><span class='indexparent'><a class='index' id=':postfix_++_and_--,overloading'></a></span><div class='para' id='over.inc-1'><div class='marginalizedparent'><a class='marginalized' href='#over.inc-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3396'>#</a></div><div id='over.inc-1.sentence-1' class='sentence'>The user-defined function called
<span class='texttt'>operator++</span>
implements the prefix and postfix
<span class='texttt'>++</span>
operator<a class='hidden_link' href='#over.inc-1.sentence-1'>.</a></div> <div id='over.inc-1.sentence-2' class='sentence'>If this function is a non-static member function with no parameters, or a non-member
function with one parameter,
it defines the prefix increment operator
<span class='texttt'>++</span>
for objects of that type<a class='hidden_link' href='#over.inc-1.sentence-2'>.</a></div> <div id='over.inc-1.sentence-3' class='sentence'>If the function is a non-static member function with one parameter (which shall be of type
<span class='texttt'>int</span>)
or a non-member function with two parameters (the second of which shall be of type
<span class='texttt'>int</span>),
it defines the postfix increment operator
<span class='texttt'>++</span>
for objects of that type<a class='hidden_link' href='#over.inc-1.sentence-3'>.</a></div> <div id='over.inc-1.sentence-4' class='sentence'>When the postfix increment is called as a result of using the
<span class='texttt'>++</span>
operator, the
<span class='texttt'>int</span>
argument will have value zero<a class='hidden_link' href='#over.inc-1.sentence-4'>.</a><a class='footnotenum' href='#footnote-134'>134</a></div> <div id='over.inc-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over.inc-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  X&amp;   operator++();            <span class='comment'>// prefix <span class='tcode_in_codeblock'>++a</span>
</span>  X    operator++(int);         <span class='comment'>// postfix <span class='tcode_in_codeblock'>a++</span>
</span>};

struct Y { };
Y&amp;   operator++(Y&amp;);            <span class='comment'>// prefix <span class='tcode_in_codeblock'>++b</span>
</span>Y    operator++(Y&amp;, int);       <span class='comment'>// postfix <span class='tcode_in_codeblock'>b++</span>
</span>
void f(X a, Y b) {
  ++a;                          <span class='comment'>// <span class='tcode_in_codeblock'>a.operator++();</span>
</span>  a++;                          <span class='comment'>// <span class='tcode_in_codeblock'>a.operator++(0);</span>
</span>  ++b;                          <span class='comment'>// <span class='tcode_in_codeblock'>operator++(b);</span>
</span>  b++;                          <span class='comment'>// <span class='tcode_in_codeblock'>operator++(b, 0);</span>
</span>
  a.operator++();               <span class='comment'>// explicit call: like <span class='tcode_in_codeblock'>++a;</span>
</span>  a.operator++(0);              <span class='comment'>// explicit call: like <span class='tcode_in_codeblock'>a++;</span>
</span>  operator++(b);                <span class='comment'>// explicit call: like <span class='tcode_in_codeblock'>++b;</span>
</span>  operator++(b, 0);             <span class='comment'>// explicit call: like <span class='tcode_in_codeblock'>b++;</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='over.inc-2'><div class='marginalizedparent'><a class='marginalized' href='#over.inc-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3453'>#</a></div><div id='over.inc-2.sentence-1' class='sentence'>The prefix and postfix decrement operators
<span class='texttt'>--</span>
are handled analogously<a class='hidden_link' href='#over.inc-2.sentence-1'>.</a></div></div><div class='footnote' id='footnote-134'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-134'>134)</a></div><div id='footnote-134.sentence-1' class='sentence'>Calling
<span class='texttt'>operator++</span>
explicitly, as in expressions like
<span class='texttt'>a.operator++(2)</span>,
has no special properties:
The argument to
<span class='texttt'>operator++</span>
is
<span class='texttt'>2</span><a class='hidden_link' href='#footnote-134.sentence-1'>.</a></div></div></div><div id='over.literal' class='section'><h3 ><a class='secnum' href='#over.literal' style='min-width:103pt'>16.5.8</a> User-defined literals <a class='abbr_ref' href='over.literal'>[over.literal]</a></h3><span class='indexparent'><a class='index' id=':user-defined_literal,overloaded'></a></span><span class='indexparent'><a class='index' id=':overloading,user-defined_literal'></a></span><pre class='bnf'><a class='nontermdef' href='#nt:literal-operator-id' id='nt:literal-operator-id'>literal-operator-id:</a>
&#9;<span class='terminal'><i ><a href='over.oper#nt:operator'>operator</a></i></span> <i ><a href='lex.string#nt:string-literal'>string-literal</a></i> <i ><a href='lex.name#nt:identifier'>identifier</a></i>
&#9;<span class='terminal'><i ><a href='over.oper#nt:operator'>operator</a></i></span> <i ><a href='lex.ext#nt:user-defined-string-literal'>user-defined-string-literal</a></i>
</pre><div class='para' id='over.literal-1'><div class='marginalizedparent'><a class='marginalized' href='#over.literal-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3468'>#</a></div><div id='over.literal-1.sentence-1' class='sentence'>The <i ><a href='lex.string#nt:string-literal'>string-literal</a></i> or <i ><a href='lex.ext#nt:user-defined-string-literal'>user-defined-string-literal</a></i>
in a <i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i> shall have no
<i ><a href='lex.ccon#nt:encoding-prefix'>encoding-prefix</a></i> and shall contain no characters other than the
implicit terminating <span class='texttt'>'\0'</span><a class='hidden_link' href='#over.literal-1.sentence-1'>.</a></div> <div id='over.literal-1.sentence-2' class='sentence'>The <i ><a href='lex.ext#nt:ud-suffix'>ud-suffix</a></i> of the <i ><a href='lex.ext#nt:user-defined-string-literal'>user-defined-string-literal</a></i> or
the <i ><a href='lex.name#nt:identifier'>identifier</a></i> in a <i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i> is called a
<a class='hidden_link' href='#def:literal,suffix_identifier' id='def:literal,suffix_identifier'><i >literal suffix identifier</i></a><a class='hidden_link' href='#over.literal-1.sentence-2'>.</a></div> <div id='over.literal-1.sentence-3' class='sentence'>Some literal suffix identifiers are reserved for future standardization;
see <a href='usrlit.suffix'>[usrlit.suffix]</a><a class='hidden_link' href='#over.literal-1.sentence-3'>.</a></div> <div id='over.literal-1.sentence-4' class='sentence'>A declaration whose <i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i> uses
such a literal suffix identifier is ill-formed, no diagnostic required<a class='hidden_link' href='#over.literal-1.sentence-4'>.</a></div></div><div class='para' id='over.literal-2'><div class='marginalizedparent'><a class='marginalized' href='#over.literal-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3480'>#</a></div><div id='over.literal-2.sentence-1' class='sentence'>A declaration whose <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> is a
<i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i> shall be a declaration of a namespace-scope
function or function template (it could be a <a href='class.friend'>friend
function</a>), an explicit instantiation or specialization of a
function template, or a <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i><a class='hidden_link' href='#over.literal-2.sentence-1'>.</a></div> <div id='over.literal-2.sentence-2' class='sentence'>A function declared with a <i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i> is a <a class='hidden_link' href='#def:literal,operator' id='def:literal,operator'><i >literal
operator</i></a><a class='hidden_link' href='#over.literal-2.sentence-2'>.</a></div> <div id='over.literal-2.sentence-3' class='sentence'>A function template declared with a <i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i>
is a <a class='hidden_link' href='#def:literal,operator,template' id='def:literal,operator,template'><i >literal operator template</i></a><a class='hidden_link' href='#over.literal-2.sentence-3'>.</a></div></div><div class='para' id='over.literal-3'><div class='marginalizedparent'><a class='marginalized' href='#over.literal-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3490'>#</a></div><div id='over.literal-3.sentence-1' class='sentence'>The declaration of a literal operator shall have a
<i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> equivalent to one of the following:</div><pre class='codeblock'>
const char*
unsigned long long int
long double
char
wchar_t
char16_t
char32_t
const char*, std::size_t
const wchar_t*, std::size_t
const char16_t*, std::size_t
const char32_t*, std::size_t</pre><div id='over.literal-3.sentence-2' class='sentence'>If a parameter has a <a href='dcl.fct.default'>default argument</a>, the program is
ill-formed<a class='hidden_link' href='#over.literal-3.sentence-2'>.</a></div></div><div class='para' id='over.literal-4'><div class='marginalizedparent'><a class='marginalized' href='#over.literal-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3511'>#</a></div><div id='over.literal-4.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:literal,operator,raw' id='def:literal,operator,raw'><i >raw literal operator</i></a> is a literal operator with a single parameter
whose type is <span class='texttt'>const char*</span><a class='hidden_link' href='#over.literal-4.sentence-1'>.</a></div></div><div class='para' id='over.literal-5'><div class='marginalizedparent'><a class='marginalized' href='#over.literal-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3515'>#</a></div><div id='over.literal-5.sentence-1' class='sentence'>The declaration of a literal operator template shall have an empty
<i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> and its
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i> shall have a single
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> that is a non-type template
<a href='temp.variadic#def:parameter_pack'>parameter pack</a> with element type <span class='texttt'>char</span><a class='hidden_link' href='#over.literal-5.sentence-1'>.</a></div></div><div class='para' id='over.literal-6'><div class='marginalizedparent'><a class='marginalized' href='#over.literal-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3522'>#</a></div><div id='over.literal-6.sentence-1' class='sentence'>Literal operators and literal operator templates shall not have C language linkage<a class='hidden_link' href='#over.literal-6.sentence-1'>.</a></div></div><div class='para' id='over.literal-7'><div class='marginalizedparent'><a class='marginalized' href='#over.literal-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3525'>#</a></div><div id='over.literal-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#over.literal-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.literal-7.sentence-1' class='sentence'>Literal operators and literal operator templates are usually invoked
implicitly through <a href='lex.ext'>user-defined literals</a><a class='hidden_link' href='#over.literal-7.sentence-1'>.</a></div> <div id='over.literal-7.sentence-2' class='sentence'>However, except for
the constraints described above, they are ordinary namespace-scope functions and
function templates<a class='hidden_link' href='#over.literal-7.sentence-2'>.</a></div> <div id='over.literal-7.sentence-3' class='sentence'>In particular, they are looked up like ordinary functions
and function templates and they follow the same overload resolution rules<a class='hidden_link' href='#over.literal-7.sentence-3'>.</a></div> <div id='over.literal-7.sentence-4' class='sentence'>Also,
they can be declared <span class='texttt'>inline</span> or <span class='texttt'>constexpr</span>, they may have internal
or external linkage, they can be called explicitly, their addresses can be
taken, etc<a class='hidden_link' href='#over.literal-7.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='over.literal-8'><div class='marginalizedparent'><a class='marginalized' href='#over.literal-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/31d6168980ef064112d1ad5498635fa9ca07bc65/source/overloading.tex#L3535'>#</a></div><div id='over.literal-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over.literal-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
void operator "" _km(long double);                  <span class='comment'>// OK
</span>string operator "" _i18n(const char*, std::size_t); <span class='comment'>// OK
</span>template &lt;char...&gt; double operator "" _\u03C0();    <span class='comment'>// OK: UCN for lowercase pi
</span>float operator ""_e(const char*);                   <span class='comment'>// OK
</span>float operator ""E(const char*);                    <span class='comment'>// error: reserved literal suffix (<a href='usrlit.suffix'>[usrlit.suffix]</a>, <a href='lex.ext'>[lex.ext]</a>)
</span>double operator""_Bq(long double);                  <span class='comment'>// OK: does not use the reserved identifier <span class='tcode_in_codeblock'>_&shy;Bq</span> (<a href='lex.name'>[lex.name]</a>)
</span>double operator"" _Bq(long double);                 <span class='comment'>// uses the reserved identifier <span class='tcode_in_codeblock'>_&shy;Bq</span> (<a href='lex.name'>[lex.name]</a>)
</span>float operator " " B(const char*);                  <span class='comment'>// error: non-empty <span class='grammarterm'>string-literal</span>
</span>string operator "" 5X(const char*, std::size_t);    <span class='comment'>// error: invalid literal suffix identifier
</span>double operator "" _miles(double);                  <span class='comment'>// error: invalid <span class='grammarterm'>parameter-declaration-clause</span>
</span>template &lt;char...&gt; int operator "" _j(const char*); <span class='comment'>// error: invalid <span class='grammarterm'>parameter-declaration-clause</span>
</span>extern "C" void operator "" _m(long double);        <span class='comment'>// error: C language linkage
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  </div></div></div></body></html>