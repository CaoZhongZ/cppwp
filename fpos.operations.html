<!DOCTYPE html><html lang='en'><head><title>[fpos.operations]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>27</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>27.5</a> Iostreams base classes <a class='abbr_ref' href='iostreams.base#fpos.operations'>[iostreams.base]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>27.5.4</a> Class template <span class='texttt'>fpos</span> <a class='abbr_ref' href='fpos#operations'>[fpos]</a></h3><div id='fpos.operations'><h4 ><a class='secnum' style='min-width:118pt'>27.5.4.2</a> <span class='texttt'>fpos</span> requirements <a class='abbr_ref'>[fpos.operations]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p ><span class='indexparent'><a class='index' id='fpos'></a></span><span class='indexparent'><a class='index' id='streamoff'></a></span>Operations specified in Table <a href='#tab:iostreams.position.requirements'>[tab:iostreams.position.requirements]</a> are permitted.
In that table,
</p><ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div><p ><span class='texttt'>P</span> refers to an instance of <span class='texttt'>fpos</span>,
</p></li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div><p ><span class='texttt'>p</span> and <span class='texttt'>q</span> refer to values of type <span class='texttt'>P</span>,
</p></li><li id='1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.3'>(1.3)</a></div><p ><span class='texttt'>O</span> refers to type <span class='texttt'>streamoff</span>,
</p></li><li id='1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.4'>(1.4)</a></div><p ><span class='texttt'>o</span> refers to a value of type <span class='texttt'>streamoff</span>,
</p></li><li id='1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.5'>(1.5)</a></div><p ><span class='texttt'>sz</span> refers to a value of type <span class='texttt'>streamsize</span> and
</p></li><li id='1.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.6'>(1.6)</a></div><p ><span class='texttt'>i</span> refers to a value of type <span class='texttt'>int</span>.
</p></li></ul><div class='numberedTable' id='tab:iostreams.position.requirements'>Table <a href='#tab:iostreams.position.requirements'>107</a> — Position type requirements<br><table ><tr class='rowsep'><td colspan='1' class='center'><b>Expression</b></td><td colspan='1' class='center'><b>Return type</b></td><td colspan='1' class='center'><b>Operational</b></td><td colspan='1' class='center'><b>Assertion/note</b></td></tr><tr ><td class='left'>
            </td><td class='left'>           </td><td colspan='1' class='center'><b>semantics</b></td><td colspan='1' class='center'><b>pre-/post-condition</b></td></tr><tr class='capsep'><td class='left'> 
<span class='endhead'></span>
<span class='texttt'>P(i)</span>      </td><td class='left'>
            </td><td class='left'>
            </td><td class='left'>
 <span class='texttt'>p == P(i)</span><span class='hfill'></span><br/>
 note: a destructor is assumed. </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>P p(i);</span><span class='hfill'></span><br/>
<span class='texttt'>P p = i;</span>    </td><td class='left'>
            </td><td class='left'>
            </td><td class='left'>
 post: <span class='texttt'>p == P(i)</span>. </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>P(o)</span>      </td><td class='left'>
 <span class='texttt'>fpos</span>     </td><td class='left'>
 converts from <span class='texttt'>offset</span> </td><td class='left'> </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>O(p)</span>      </td><td class='left'>
 streamoff      </td><td class='left'>
 converts to <span class='texttt'>offset</span> </td><td class='left'>
 <span class='texttt'>P(O(p)) == p</span> </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>p == q</span>      </td><td class='left'>
 convertible to <span class='texttt'>bool</span>  </td><td class='left'>
            </td><td class='left'>
 <span class='texttt'>==</span> is an equivalence relation  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>p != q</span>      </td><td class='left'>
 convertible to <span class='texttt'>bool</span>  </td><td class='left'>
 <span class='texttt'>!(p == q)</span>    </td><td class='left'> </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>q = p + o</span><span class='hfill'></span><br/>
<span class='texttt'>p += o</span>      </td><td class='left'>
 <span class='texttt'>fpos</span>     </td><td class='left'>
 <span class='texttt'>+</span> offset   </td><td class='left'>
 <span class='texttt'>q - o == p</span>   </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>q = p - o</span><span class='hfill'></span><br/>
<span class='texttt'>p -= o</span>      </td><td class='left'>
 <span class='texttt'>fpos</span>     </td><td class='left'>
 <span class='texttt'>-</span> offset   </td><td class='left'>
 <span class='texttt'>q + o == p</span>   </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>o = p - q</span>   </td><td class='left'>
 streamoff      </td><td class='left'>
 distance       </td><td class='left'>
 <span class='texttt'>q + o == p</span>   </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>streamsize(o)</span><span class='hfill'></span><br/>
<span class='texttt'>O(sz)</span>     </td><td class='left'>
 <span class='texttt'>streamsize</span><span class='hfill'></span><br/>
 streamoff      </td><td class='left'>
 converts<span class='hfill'></span><br/>
 converts       </td><td class='left'>
 <span class='texttt'>streamsize(O(sz)) == sz</span><span class='hfill'></span><br/>
 <span class='texttt'>streamsize(O(sz)) == sz</span>  </td></tr></table></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >[&nbsp;<i>Note:</i><span class='space'></span>
Every implementation is required to supply overloaded operators on
<span class='texttt'>fpos</span>
objects to satisfy the requirements of <a href='fpos.operations'>[fpos.operations]</a>.
It is unspecified whether these operators are members of
<span class='texttt'>fpos</span>,
global operators,
or provided in some other way.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p >Stream operations that return a value of type
<span class='texttt'>traits::pos_type</span>
return
<span class='texttt'>P(O(-1))</span>
as an invalid value to signal an error.
If this value is used as an argument to any
<span class='texttt'>istream</span>,
<span class='texttt'>ostream</span>,
or
<span class='texttt'>streambuf</span> member
that accepts a value of type
<span class='texttt'>traits::pos_type</span>
then the behavior of that function is undefined.
<span class='indexparent'><a class='index' id='undefined'></a></span>
</p></div></div></div></body></html>