<!DOCTYPE html><html lang='en'><head><title>[temp]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><span class='indexparent'><a class='index' id=':template'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L10'>#</a></div><div id='1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:template' id='def:template'><i >template</i></a> defines a family of classes, functions, or variables,
an alias for a family of types, or a concept<a class='hidden_link' href='#1.sentence-1'>.</a></div><span class='indexparent'><a class='index' id=':template'></a></span><pre class='bnf'><a class='nontermdef' href='#nt:template-declaration' id='nt:template-declaration'>template-declaration:</a>
&#9;<i ><a href='temp#nt:template-head'>template-head</a></i> <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
&#9;<i ><a href='temp#nt:template-head'>template-head</a></i> <i ><a href='temp#nt:concept-definition'>concept-definition</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-head' id='nt:template-head'>template-head:</a>
&#9;<span class='terminal'>template</span> <span class='terminal'>&lt;</span> <i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i> <span class='terminal'>&gt;</span> <i ><a href='temp#nt:requires-clause'>requires-clause</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-parameter-list' id='nt:template-parameter-list'>template-parameter-list:</a>
&#9;<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
&#9;<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i> <span class='terminal'>,</span> <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requires-clause' id='nt:requires-clause'>requires-clause:</a>
&#9;<span class='terminal'>requires</span> <i ><a href='temp#nt:constraint-logical-or-expression'>constraint-logical-or-expression</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:constraint-logical-or-expression' id='nt:constraint-logical-or-expression'>constraint-logical-or-expression:</a>
&#9;<i ><a href='temp#nt:constraint-logical-and-expression'>constraint-logical-and-expression</a></i>
&#9;<i ><a href='temp#nt:constraint-logical-or-expression'>constraint-logical-or-expression</a></i> <span class='terminal'>||</span> <i ><a href='temp#nt:constraint-logical-and-expression'>constraint-logical-and-expression</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:constraint-logical-and-expression' id='nt:constraint-logical-and-expression'>constraint-logical-and-expression:</a>
&#9;<i ><a href='expr.prim#nt:primary-expression'>primary-expression</a></i>
&#9;<i ><a href='temp#nt:constraint-logical-and-expression'>constraint-logical-and-expression</a></i> <span class='terminal'>&amp;&amp;</span> <i ><a href='expr.prim#nt:primary-expression'>primary-expression</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:concept-definition' id='nt:concept-definition'>concept-definition:</a>
&#9;<span class='terminal'>concept</span> <i ><a href='temp#nt:concept-name'>concept-name</a></i> <span class='terminal'>=</span> <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> <span class='terminal'>;</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:concept-name' id='nt:concept-name'>concept-name:</a>
&#9;<i ><a href='lex.name#nt:identifier'>identifier</a></i>
</pre><div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-2' class='sentence'>The <span class='texttt'>&gt;</span> token following the
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i> of a
<i ><a href='temp#nt:template-declaration'>template-declaration</a></i>
may be the product of replacing a
<span class='texttt'>&gt;&gt;</span> token by two consecutive <span class='texttt'>&gt;</span>
tokens (<a href='temp.names'>[temp.names]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L67'>#</a></div><div id='2.sentence-1' class='sentence'>The
<i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
in a
<i ><a href='temp#nt:template-declaration'>template-declaration</a></i>
(if any)
shall</div><div id='2.sentence-2' class='sentence'><ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><div id='2.1.sentence-1' class='sentence'>declare or define a function, a class, or a variable, or</div></li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><div id='2.2.sentence-1' class='sentence'>define a member function, a member class, a member enumeration, or a static data member of a
class template or of a class nested within a class template, or</div></li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div><div id='2.3.sentence-1' class='sentence'>define a member template of a class or class template, or</div></li><li id='2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.4'>(2.4)</a></div><div id='2.4.sentence-1' class='sentence'>be a <i ><a href='temp.deduct.guide#nt:deduction-guide'>deduction-guide</a></i>, or</div></li><li id='2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.5'>(2.5)</a></div><div id='2.5.sentence-1' class='sentence'>be an <i ><a href='dcl.dcl#nt:alias-declaration'>alias-declaration</a></i><a class='hidden_link' href='#2.5.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L88'>#</a></div><div id='3.sentence-1' class='sentence'>A <i ><a href='temp#nt:template-declaration'>template-declaration</a></i> is a <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':template,definition_of'></a></span>A <i ><a href='temp#nt:template-declaration'>template-declaration</a></i> is also a definition
if its
<i ><a href='temp#nt:template-head'>template-head</a></i> is followed by
either a <i ><a href='temp#nt:concept-definition'>concept-definition</a></i> or
a <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> that
defines a function, a class, a variable, or a
static data member<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>A declaration introduced by a template declaration of a
<span class='indexparent'><a class='index' id=':variable_template,definition_of'></a></span>variable is a <a class='hidden_link' href='#def:template,variable' id='def:template,variable'><i >variable template</i></a><a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>A variable template at class scope is a
<a class='hidden_link' href='#def:template,static_data_member' id='def:template,static_data_member'><i >static data member template</i></a><a class='hidden_link' href='#3.sentence-4'>.</a></div><div style='height:0.6em;display:block'></div><div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt;
  constexpr T pi = T(3.1415926535897932385L);
template&lt;class T&gt;
  T circular_area(T r) {
    return pi&lt;T&gt; * r * r;
  }
struct matrix_constants {
  template&lt;class T&gt;
    using pauli = hermitian_matrix&lt;T, 2&gt;;
  template&lt;class T&gt;
    constexpr pauli&lt;T&gt; sigma1 = { { 0, 1 }, { 1, 0 } };
  template&lt;class T&gt;
    constexpr pauli&lt;T&gt; sigma2 = { { 0, -1i }, { 1i, 0 } };
  template&lt;class T&gt;
    constexpr pauli&lt;T&gt; sigma3 = { { 1, 0 }, { 0, -1 } };
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L123'>#</a></div><div id='4.sentence-1' class='sentence'>A
<i ><a href='temp#nt:template-declaration'>template-declaration</a></i>
can appear only as a namespace scope or class scope declaration<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>In a function template declaration, the last component of the
<i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i>
shall not be a
<i ><a href='temp.names#nt:template-id'>template-id</a></i><a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-3' class='sentence'>That last component may be an <i ><a href='lex.name#nt:identifier'>identifier</a></i>, an <i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i>,
a <i ><a href='class.conv.fct#nt:conversion-function-id'>conversion-function-id</a></i>, or a <i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i><a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'>In
a class template declaration, if the
class name
is a
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>,
the declaration declares a <a href='temp.class.spec'>class template partial specialization</a><a class='hidden_link' href='#4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L141'>#</a></div><div id='5.sentence-1' class='sentence'>In a
<i ><a href='temp#nt:template-declaration'>template-declaration</a></i>,
explicit specialization, or explicit instantiation the
<i ><a href='dcl.decl#nt:init-declarator-list'>init-declarator-list</a></i>
in the declaration shall contain at most one declarator<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>When such a declaration is used to declare a class template,
no declarator is permitted<a class='hidden_link' href='#5.sentence-2'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L150'>#</a></div><div id='6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':template_name,linkage_of'></a></span>A template name has <a href='basic.link'>linkage</a><a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>Specializations (explicit or implicit) of
a template that has internal linkage are
distinct from all specializations in other translation
units<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>A template, a template <a href='temp.expl.spec'>explicit specialization</a>, and a class
template partial specialization shall not have C linkage<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>Use of a linkage specification
other than <span class='texttt'>"C"</span> or <span class='texttt'>"C++"</span> with any of these constructs is
conditionally-supported, with
<span class='indexparent'><a class='index' id=':semantics_of_linkage_specification_on_templates'></a></span>implementation-defined semantics<a class='hidden_link' href='#6.sentence-4'>.</a></div> <div id='6.sentence-5' class='sentence'>Template definitions shall obey the <a href='basic.def.odr'>one-definition rule</a><a class='hidden_link' href='#6.sentence-5'>.</a></div> <div id='6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-6' class='sentence'>Default arguments for function templates and for member functions of
class templates are considered definitions for the purpose of template
instantiation (<a href='temp.decls'>[temp.decls]</a>) and must also obey the one-definition rule<a class='hidden_link' href='#6.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L169'>#</a></div><div id='7.sentence-1' class='sentence'>A class template shall not have the same name as any other
template, class, function, variable, enumeration, enumerator, namespace, or
type in the same scope (<a href='basic.scope'>[basic.scope]</a>), except as specified in <a href='temp.class.spec'>[temp.class.spec]</a><a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>Except that a function template can be overloaded either by non-template
functions (<a href='dcl.fct'>[dcl.fct]</a>) with the same name or by other function templates
with the same name (<a href='temp.over'>[temp.over]</a>),
a template name declared in namespace scope or in class scope shall be unique
in that scope<a class='hidden_link' href='#7.sentence-2'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L179'>#</a></div><div id='8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':entity,templated'></a></span>A <a class='hidden_link' href='#def:templated_entity' id='def:templated_entity'><i >templated entity</i></a> is</div><div id='8.sentence-2' class='sentence'><ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.1'>(8.1)</a></div><div id='8.1.sentence-1' class='sentence'>a template,</div></li><li id='8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.2'>(8.2)</a></div><div id='8.2.sentence-1' class='sentence'>an entity defined (<a href='basic.def'>[basic.def]</a>) or created (<a href='class.temporary'>[class.temporary]</a>)
      in a templated entity,</div></li><li id='8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.3'>(8.3)</a></div><div id='8.3.sentence-1' class='sentence'>a member of a templated entity,</div></li><li id='8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.4'>(8.4)</a></div><div id='8.4.sentence-1' class='sentence'>an enumerator for an enumeration that is a templated entity, or</div></li><li id='8.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.5'>(8.5)</a></div><div id='8.5.sentence-1' class='sentence'>the closure type of a <i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i> (<a href='expr.prim.lambda.closure'>[expr.prim.lambda.closure]</a>)
      appearing in the declaration of a templated entity<a class='hidden_link' href='#8.5.sentence-1'>.</a></div></li></ul></div><div id='8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='8.sentence-3' class='sentence'>A local class, a local variable, or a friend function defined in a
templated entity is a templated entity<a class='hidden_link' href='#8.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L198'>#</a></div><div id='9.sentence-1' class='sentence'>A <i ><a href='temp#nt:template-declaration'>template-declaration</a></i> is written
in terms of its template parameters<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'>The optional <i ><a href='temp#nt:requires-clause'>requires-clause</a></i> following a
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i> allows the specification of
constraints (<a href='temp.constr.decl'>[temp.constr.decl]</a>) on template arguments (<a href='temp.arg'>[temp.arg]</a>)<a class='hidden_link' href='#9.sentence-2'>.</a></div> <div id='9.sentence-3' class='sentence'>The <i ><a href='temp#nt:requires-clause'>requires-clause</a></i> introduces the
<i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> that results from interpreting
the <i ><a href='temp#nt:constraint-logical-or-expression'>constraint-logical-or-expression</a></i> as a
<i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><a class='hidden_link' href='#9.sentence-3'>.</a></div> <div id='9.sentence-4' class='sentence'>The <i ><a href='temp#nt:constraint-logical-or-expression'>constraint-logical-or-expression</a></i> of a
<i ><a href='temp#nt:requires-clause'>requires-clause</a></i> is an unevaluated operand (<a href='expr'>[expr]</a>)<a class='hidden_link' href='#9.sentence-4'>.</a></div> <div id='9.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='9.sentence-5' class='sentence'>The expression in a <i ><a href='temp#nt:requires-clause'>requires-clause</a></i>
uses a restricted grammar to avoid ambiguities<a class='hidden_link' href='#9.sentence-5'>.</a></div> <div id='9.sentence-6' class='sentence'>Parentheses can be used to specify arbitrary expressions
in a <i ><a href='temp#nt:requires-clause'>requires-clause</a></i><a class='hidden_link' href='#9.sentence-6'>.</a></div> <div id='9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;int N&gt; requires N == sizeof new unsigned short
int f();            <span class='comment'>// error: parentheses required around <span class='tcode_in_codeblock'>==</span> expression
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L223'>#</a></div><div id='10.sentence-1' class='sentence'>A function template, member function of a class template, variable template,
or static data
member of a class template shall be defined in every translation unit in
which it is <a href='temp.inst'>implicitly instantiated</a> unless the
corresponding specialization is <a href='temp.explicit'>explicitly instantiated</a>
in some translation unit; no diagnostic is required<a class='hidden_link' href='#10.sentence-1'>.</a></div></div><div id='param' class='section'><h2 ><a class='secnum' href='#param' style='min-width:88pt'>17.1</a> Template parameters <a class='abbr_ref' href='temp.param'>[temp.param]</a></h2><div class='para' id='param-1'><div class='marginalizedparent'><a class='marginalized' href='#param-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L233'>#</a></div><div id='param-1.sentence-1' class='sentence'>The syntax for
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>
is:</div><pre class='bnf'><a class='nontermdef' href='#nt:template-parameter' id='nt:template-parameter'>template-parameter:</a>
&#9;<i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i>
&#9;<i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i>
&#9;<i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:type-parameter' id='nt:type-parameter'>type-parameter:</a>
&#9;<i ><a href='temp.param#nt:type-parameter-key'>type-parameter-key</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='lex.name#nt:identifier'>identifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='temp.param#nt:type-parameter-key'>type-parameter-key</a></i> <i ><a href='lex.name#nt:identifier'>identifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>=</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i>
&#9;<i ><a href='temp#nt:template-head'>template-head</a></i> <i ><a href='temp.param#nt:type-parameter-key'>type-parameter-key</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='lex.name#nt:identifier'>identifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='temp#nt:template-head'>template-head</a></i> <i ><a href='temp.param#nt:type-parameter-key'>type-parameter-key</a></i> <i ><a href='lex.name#nt:identifier'>identifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>=</span> <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:type-parameter-key' id='nt:type-parameter-key'>type-parameter-key:</a>
&#9;<span class='terminal'>class</span>
&#9;<span class='terminal'>typename</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:constrained-parameter' id='nt:constrained-parameter'>constrained-parameter:</a>
&#9;<i ><a href='temp.param#nt:qualified-concept-name'>qualified-concept-name</a></i> <span class='terminal'>...</span> <i ><a href='lex.name#nt:identifier'>identifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='temp.param#nt:qualified-concept-name'>qualified-concept-name</a></i> <i ><a href='lex.name#nt:identifier'>identifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='temp.param#nt:default-template-argument'>default-template-argument</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:qualified-concept-name' id='nt:qualified-concept-name'>qualified-concept-name:</a>
&#9;<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='temp#nt:concept-name'>concept-name</a></i>
&#9;<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:partial-concept-id' id='nt:partial-concept-id'>partial-concept-id:</a>
&#9;<i ><a href='temp#nt:concept-name'>concept-name</a></i> <span class='terminal'>&lt;</span> <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>&gt;</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:default-template-argument' id='nt:default-template-argument'>default-template-argument:</a>
&#9;<span class='terminal'>=</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i>
&#9;<span class='terminal'>=</span> <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
&#9;<span class='terminal'>=</span> <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i>
</pre><div id='param-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#param-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='param-1.sentence-2' class='sentence'>The <span class='texttt'>&gt;</span> token following the
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i> of a
<i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i>
may be the product of replacing a
<span class='texttt'>&gt;&gt;</span> token by two consecutive <span class='texttt'>&gt;</span>
tokens (<a href='temp.names'>[temp.names]</a>)<a class='hidden_link' href='#param-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-2'><div class='marginalizedparent'><a class='marginalized' href='#param-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L290'>#</a></div><div id='param-2.sentence-1' class='sentence'>There is no semantic difference between
<span class='texttt'>class</span>
and
<span class='texttt'>typename</span>
in a
<i ><a href='temp.param#nt:type-parameter-key'>type-parameter-key</a></i><a class='hidden_link' href='#param-2.sentence-1'>.</a></div> <div id='param-2.sentence-2' class='sentence'><span class='texttt'>typename</span>
followed by an
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
names a template type parameter<a class='hidden_link' href='#param-2.sentence-2'>.</a></div> <div id='param-2.sentence-3' class='sentence'><span class='texttt'>typename</span>
followed by a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
denotes the type in a non-type<a class='footnotenum' href='#footnote-136'>136</a>
<i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i><a class='hidden_link' href='#param-2.sentence-3'>.</a></div> <div id='param-2.sentence-4' class='sentence'>A <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> of the form
<span class='texttt'>class</span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> is a <i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i><a class='hidden_link' href='#param-2.sentence-4'>.</a></div> <div id='param-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class T { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
int i;

template&lt;class T, T i&gt; void f(T t) {
  T t1 = i;         <span class='comment'>// template-parameters <span class='tcode_in_codeblock'>T</span> and <span class='tcode_in_codeblock'>i</span>
</span>  ::T t2 = ::i;     <span class='comment'>// global namespace members <span class='tcode_in_codeblock'>T</span> and <span class='tcode_in_codeblock'>i</span>
</span>}</pre> <div id='param-2.sentence-7' class='sentence'>
Here, the template <span class='texttt'>f</span> has a <i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i>
called <span class='texttt'>T</span>, rather than an unnamed non-type
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> of class <span class='texttt'>T</span><a class='hidden_link' href='#param-2.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='param-2.sentence-5' class='sentence'>
A storage class shall not be specified in a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
declaration<a class='hidden_link' href='#param-2.sentence-5'>.</a></div> <div id='param-2.sentence-6' class='sentence'>Types shall not be defined in a <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
declaration<a class='hidden_link' href='#param-2.sentence-6'>.</a></div></div><div class='para' id='param-3'><div class='marginalizedparent'><a class='marginalized' href='#param-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L337'>#</a></div><div id='param-3.sentence-1' class='sentence'>A
<i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i>
whose identifier does not follow an ellipsis
defines its
<i ><a href='lex.name#nt:identifier'>identifier</a></i>
to be a
<i ><a href='dcl.typedef#nt:typedef-name'>typedef-name</a></i>
(if declared without
<span class='texttt'>template</span>)
or
<i ><a href='temp.names#nt:template-name'>template-name</a></i>
(if declared with
<span class='texttt'>template</span>)
in the scope of the template declaration<a class='hidden_link' href='#param-3.sentence-1'>.</a></div> <div id='param-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#param-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='param-3.sentence-2' class='sentence'>A template argument may be a class template or alias template<a class='hidden_link' href='#param-3.sentence-2'>.</a></div> <div id='param-3.sentence-3' class='sentence'>For example,</div><pre class='codeblock'>
template&lt;class T&gt; class myarray { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

template&lt;class K, class V, template&lt;class T&gt; class C = myarray&gt;
class Map {
  C&lt;K&gt; key;
  C&lt;V&gt; value;
};</pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-4'><div class='marginalizedparent'><a class='marginalized' href='#param-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L367'>#</a></div><div id='param-4.sentence-1' class='sentence'>A non-type
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall have one of the following (optionally
cv-qualified)
types:</div><div id='param-4.sentence-2' class='sentence'><ul class='itemize'><li id='param-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-4.1'>(4.1)</a></div><div id='param-4.1.sentence-1' class='sentence'>integral or enumeration type,</div></li><li id='param-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-4.2'>(4.2)</a></div><div id='param-4.2.sentence-1' class='sentence'>pointer to object or pointer to function,</div></li><li id='param-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-4.3'>(4.3)</a></div><div id='param-4.3.sentence-1' class='sentence'>lvalue reference to object or lvalue reference to function,</div></li><li id='param-4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-4.4'>(4.4)</a></div><div id='param-4.4.sentence-1' class='sentence'>pointer to member,</div></li><li id='param-4.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-4.5'>(4.5)</a></div><div id='param-4.5.sentence-1' class='sentence'><span class='texttt'>std&#x200b;::&#x200b;nullptr_&shy;t</span>, or</div></li><li id='param-4.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-4.6'>(4.6)</a></div><div id='param-4.6.sentence-1' class='sentence'>a type that contains a <a href='dcl.spec.auto#def:placeholder_type'>placeholder type</a><a class='hidden_link' href='#param-4.6.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='param-5'><div class='marginalizedparent'><a class='marginalized' href='#param-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L388'>#</a></div><div id='param-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#param-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='param-5.sentence-2' class='sentence'>Other types are disallowed either explicitly below or implicitly by
the rules governing the form of
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span> (<a href='temp.arg'>[temp.arg]</a>)<a class='hidden_link' href='#param-5.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='param-5.sentence-1' class='sentence'>
The top-level
<i ><a href='dcl.decl#nt:cv-qualifier'>cv-qualifier</a></i><span class='textit'>s</span>
on the
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
are ignored when determining its type<a class='hidden_link' href='#param-5.sentence-1'>.</a></div></div><div class='para' id='param-6'><div class='marginalizedparent'><a class='marginalized' href='#param-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L400'>#</a></div><div id='param-6.sentence-1' class='sentence'>A non-type non-reference
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is a prvalue<a class='hidden_link' href='#param-6.sentence-1'>.</a></div> <div id='param-6.sentence-2' class='sentence'>It shall not be assigned to or in any other way have its value changed<a class='hidden_link' href='#param-6.sentence-2'>.</a></div> <div id='param-6.sentence-3' class='sentence'>A non-type non-reference
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
cannot have its address taken<a class='hidden_link' href='#param-6.sentence-3'>.</a></div> <div id='param-6.sentence-4' class='sentence'>When a non-type non-reference
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is used as an initializer for a reference, a temporary is always used<a class='hidden_link' href='#param-6.sentence-4'>.</a></div> <div id='param-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;const X&amp; x, int i&gt; void f() {
  i++;                          <span class='comment'>// error: change of template-parameter value
</span>
  &amp;x;                           <span class='comment'>// OK
</span>  &amp;i;                           <span class='comment'>// error: address of non-reference template-parameter
</span>
  int&amp; ri = i;                  <span class='comment'>// error: non-const reference bound to temporary
</span>  const int&amp; cri = i;           <span class='comment'>// OK: const reference bound to temporary
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-7'><div class='marginalizedparent'><a class='marginalized' href='#param-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L426'>#</a></div><div id='param-7.sentence-1' class='sentence'>A non-type
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall not be declared to have floating-point, class, or void type<a class='hidden_link' href='#param-7.sentence-1'>.</a></div> <div id='param-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;double d&gt; class X;     <span class='comment'>// error
</span>template&lt;double* pd&gt; class Y;   <span class='comment'>// OK
</span>template&lt;double&amp; rd&gt; class Z;   <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-8'><div class='marginalizedparent'><a class='marginalized' href='#param-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L439'>#</a></div><div id='param-8.sentence-1' class='sentence'>A non-type
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
<span class='indexparent'><a class='index' id=':array,template_parameter_of_type'></a></span>of type “array of <span class='texttt'>T</span>” or
<span class='indexparent'><a class='index' id=':function,template_parameter_of_type'></a></span>of function type <span class='texttt'>T</span>
is adjusted to be of type “pointer to <span class='texttt'>T</span>”<a class='hidden_link' href='#param-8.sentence-1'>.</a></div> <div id='param-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;int* a&gt;   struct R { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;int b[5]&gt; struct S { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
int p;
R&lt;&amp;p&gt; w;                        <span class='comment'>// OK
</span>S&lt;&amp;p&gt; x;                        <span class='comment'>// OK due to parameter adjustment
</span>int v[5];
R&lt;v&gt; y;                         <span class='comment'>// OK due to implicit argument conversion
</span>S&lt;v&gt; z;                         <span class='comment'>// OK due to both adjustment and conversion
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-9'><div class='marginalizedparent'><a class='marginalized' href='#param-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L461'>#</a></div><div id='param-9.sentence-1' class='sentence'>A <i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i> is
a <i ><a href='temp#nt:concept-name'>concept-name</a></i> followed by
a sequence of <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span><a class='hidden_link' href='#param-9.sentence-1'>.</a></div> <div id='param-9.sentence-2' class='sentence'>These template arguments
are used to form a <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i>
as described below<a class='hidden_link' href='#param-9.sentence-2'>.</a></div></div><div class='para' id='param-10'><div class='marginalizedparent'><a class='marginalized' href='#param-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L469'>#</a></div><div id='param-10.sentence-1' class='sentence'>A <i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i> declares
a template parameter
whose kind (type, non-type, template) and type
match that of the prototype parameter (<a href='temp.concept'>[temp.concept]</a>)
of the concept designated by
the <i ><a href='temp.param#nt:qualified-concept-name'>qualified-concept-name</a></i> in
the <i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i><a class='hidden_link' href='#param-10.sentence-1'>.</a></div> <div id='param-10.sentence-2' class='sentence'>Let <span class='texttt'>X</span> be the prototype parameter of the designated concept<a class='hidden_link' href='#param-10.sentence-2'>.</a></div> <div id='param-10.sentence-3' class='sentence'>The declared template parameter is determined by
the kind of <span class='texttt'>X</span> (type, non-type, template)
and the optional ellipsis in the <i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i>
as follows<a class='hidden_link' href='#param-10.sentence-3'>.</a></div><div id='param-10.sentence-4' class='sentence'><ul class='itemize'><li id='param-10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-10.1'>(10.1)</a></div><div id='param-10.1.sentence-1' class='sentence'>If <span class='texttt'>X</span> is a type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>,
the declared parameter is a type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><a class='hidden_link' href='#param-10.1.sentence-1'>.</a></div></li><li id='param-10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-10.2'>(10.2)</a></div><div id='param-10.2.sentence-1' class='sentence'>If <span class='texttt'>X</span> is a non-type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>,
the declared parameter is a non-type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
having the same type as <span class='texttt'>X</span><a class='hidden_link' href='#param-10.2.sentence-1'>.</a></div></li><li id='param-10.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-10.3'>(10.3)</a></div><div id='param-10.3.sentence-1' class='sentence'>If <span class='texttt'>X</span> is a template <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>,
the declared parameter is a template <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
having the same <i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i> as <span class='texttt'>X</span>,
excluding default template arguments<a class='hidden_link' href='#param-10.3.sentence-1'>.</a></div></li><li id='param-10.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-10.4'>(10.4)</a></div><div id='param-10.4.sentence-1' class='sentence'>If the <i ><a href='temp.param#nt:qualified-concept-name'>qualified-concept-name</a></i> is followed by an ellipsis,
then the declared parameter is a template parameter pack (<a href='temp.variadic'>[temp.variadic]</a>)<a class='hidden_link' href='#param-10.4.sentence-1'>.</a></div></li></ul></div><div id='param-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C1 = true;
template&lt;template&lt;typename&gt; class X&gt; concept C2 = true;
template&lt;int N&gt; concept C3 = true;
template&lt;typename... Ts&gt; concept C4 = true;
template&lt;char... Cs&gt; concept C5 = true;

template&lt;C1 T&gt; void f1();       <span class='comment'>// OK, <span class='tcode_in_codeblock'>T</span> is a type <span class='grammarterm'>template-parameter</span>
</span>template&lt;C2 X&gt; void f2();       <span class='comment'>// OK, <span class='tcode_in_codeblock'>X</span> is a template with one <span class='grammarterm'>type-parameter</span>
</span>template&lt;C3 N&gt; void f3();       <span class='comment'>// OK, <span class='tcode_in_codeblock'>N</span> has type <span class='tcode_in_codeblock'>int</span>
</span>template&lt;C4... Ts&gt; void f4();   <span class='comment'>// OK, <span class='tcode_in_codeblock'>Ts</span> is a template parameter pack of types
</span>template&lt;C4 T&gt; void f5();       <span class='comment'>// OK, <span class='tcode_in_codeblock'>T</span> is a type <span class='grammarterm'>template-parameter</span>
</span>template&lt;C5... Cs&gt; void f6();   <span class='comment'>// OK, <span class='tcode_in_codeblock'>Cs</span> is a template parameter pack of <span class='tcode_in_codeblock'>char</span>s
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-11'><div class='marginalizedparent'><a class='marginalized' href='#param-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L517'>#</a></div><div id='param-11.sentence-1' class='sentence'>A <i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i> introduces
a <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><a class='hidden_link' href='#param-11.sentence-1'>.</a></div> <div id='param-11.sentence-2' class='sentence'>The expression is derived from
the <i ><a href='temp.param#nt:qualified-concept-name'>qualified-concept-name</a></i> <span class='texttt'>Q</span> in
the <i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i>,
its designated concept <span class='texttt'>C</span>, and
the declared template parameter <span class='texttt'>P</span><a class='hidden_link' href='#param-11.sentence-2'>.</a></div><div id='param-11.sentence-3' class='sentence'><ul class='itemize'><li id='param-11.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-11.1'>(11.1)</a></div><div id='param-11.1.sentence-1' class='sentence'>First, a template argument <span class='texttt'>A</span> is formed from <span class='texttt'>P</span><a class='hidden_link' href='#param-11.1.sentence-1'>.</a></div> <div id='param-11.1.sentence-2' class='sentence'>If <span class='texttt'>P</span> declares a template parameter pack (<a href='temp.variadic'>[temp.variadic]</a>)
and <span class='texttt'>C</span> is a variadic concept (<a href='temp.concept'>[temp.concept]</a>),
then <span class='texttt'>A</span> is the pack expansion <span class='texttt'>P...</span><a class='hidden_link' href='#param-11.1.sentence-2'>.</a></div> <div id='param-11.1.sentence-3' class='sentence'>Otherwise,
<span class='texttt'>A</span> is the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> <span class='texttt'>P</span><a class='hidden_link' href='#param-11.1.sentence-3'>.</a></div></li><li id='param-11.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-11.2'>(11.2)</a></div><div id='param-11.2.sentence-1' class='sentence'>Then, an <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> <span class='texttt'>E</span> is formed as follows<a class='hidden_link' href='#param-11.2.sentence-1'>.</a></div> <div id='param-11.2.sentence-2' class='sentence'>If <span class='texttt'>Q</span> is a <i ><a href='temp#nt:concept-name'>concept-name</a></i>,
then <span class='texttt'>E</span> is <span class='texttt'>C&lt;A&gt;</span><a class='hidden_link' href='#param-11.2.sentence-2'>.</a></div> <div id='param-11.2.sentence-3' class='sentence'>Otherwise,
<span class='texttt'>Q</span> is a <i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i>
of the form <span class='texttt'>C&lt;A<span class="mjx-chtml"><span class="mjx-math" aria-label="_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, A<span class="mjx-chtml"><span class="mjx-math" aria-label="_2"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>, ..., A<span class="mjx-chtml"><span class="mjx-math" aria-label="_n"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span>&gt;</span>,
and <span class='texttt'>E</span> is <span class='texttt'>C&lt;A, A<span class="mjx-chtml"><span class="mjx-math" aria-label="_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, A<span class="mjx-chtml"><span class="mjx-math" aria-label="_2"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>, ..., A<span class="mjx-chtml"><span class="mjx-math" aria-label="_n"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span>&gt;</span><a class='hidden_link' href='#param-11.2.sentence-3'>.</a></div></li><li id='param-11.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-11.3'>(11.3)</a></div><div id='param-11.3.sentence-1' class='sentence'>Finally, if <span class='texttt'>P</span> declares a template parameter pack
and <span class='texttt'>C</span> is not a variadic concept,
<span class='texttt'>E</span> is adjusted to be the <i ><a href='expr.prim.fold#nt:fold-expression'>fold-expression</a></i>
<span class='texttt'>(E &amp;&amp; ...)</span> (<a href='expr.prim.fold'>[expr.prim.fold]</a>)<a class='hidden_link' href='#param-11.3.sentence-1'>.</a></div></li></ul></div><div id='param-11.sentence-4' class='sentence'><span class='texttt'>E</span> is the introduced <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><a class='hidden_link' href='#param-11.sentence-4'>.</a></div> <div id='param-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C1 = true;
template&lt;typename... Ts&gt; concept C2 = true;
template&lt;typename T, typename U&gt; concept C3 = true;

template&lt;C1 T&gt; struct s1;       <span class='comment'>// associates <span class='tcode_in_codeblock'>C1&lt;T&gt;</span>
</span>template&lt;C1... T&gt; struct s2;    <span class='comment'>// associates <span class='tcode_in_codeblock'>(C1&lt;T&gt; &amp;&amp; ...)</span>
</span>template&lt;C2... T&gt; struct s3;    <span class='comment'>// associates <span class='tcode_in_codeblock'>C2&lt;T...&gt;</span>
</span>template&lt;C3&lt;int&gt; T&gt; struct s4;  <span class='comment'>// associates <span class='tcode_in_codeblock'>C3&lt;T, int&gt;</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-12'><div class='marginalizedparent'><a class='marginalized' href='#param-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L564'>#</a></div><div id='param-12.sentence-1' class='sentence'>A
<a class='hidden_link' href='#def:template-argument,default' id='def:template-argument,default'><i >default template-argument</i></a>
is a
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i> (<a href='temp.arg'>[temp.arg]</a>) specified after
<span class='texttt'>=</span>
in a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><a class='hidden_link' href='#param-12.sentence-1'>.</a></div> <div id='param-12.sentence-2' class='sentence'>A default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
may be specified for any kind of
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
(type, non-type, template)
that is not a <a href='temp.variadic#def:template_parameter_pack'>template parameter pack</a><a class='hidden_link' href='#param-12.sentence-2'>.</a></div> <div id='param-12.sentence-3' class='sentence'>A default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
may be specified in a template declaration<a class='hidden_link' href='#param-12.sentence-3'>.</a></div> <div id='param-12.sentence-4' class='sentence'>A default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
shall not be specified in the
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i><span class='textit'>s</span>
of the definition of a member of a class template that appears outside
of the member's class<a class='hidden_link' href='#param-12.sentence-4'>.</a></div> <div id='param-12.sentence-5' class='sentence'>A default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
shall not be specified in a friend class template declaration<a class='hidden_link' href='#param-12.sentence-5'>.</a></div> <div id='param-12.sentence-6' class='sentence'>If a friend function template declaration
specifies a default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>,
that declaration shall be a definition and shall be the only declaration of
the function template in the translation unit<a class='hidden_link' href='#param-12.sentence-6'>.</a></div></div><div class='para' id='param-13'><div class='marginalizedparent'><a class='marginalized' href='#param-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L596'>#</a></div><div id='param-13.sentence-1' class='sentence'>The default <i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
of a <i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i>
shall match the kind (type, non-type, template)
of the declared template parameter<a class='hidden_link' href='#param-13.sentence-1'>.</a></div> <div id='param-13.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C1 = true;
template&lt;int N&gt; concept C2 = true;
template&lt;template&lt;typename&gt; class X&gt; concept C3 = true;

template&lt;typename T&gt; struct S0;

template&lt;C1 T = int&gt; struct S1; <span class='comment'>// OK
</span>template&lt;C2 N = 0&gt; struct S2;   <span class='comment'>// OK
</span>template&lt;C3 X = S0&gt; struct S3;  <span class='comment'>// OK
</span>template&lt;C1 T = 0&gt; struct S4;   <span class='comment'>// error: default argument is not a type
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-14'><div class='marginalizedparent'><a class='marginalized' href='#param-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L616'>#</a></div><div id='param-14.sentence-1' class='sentence'>The set of default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
available for use is obtained by merging the default arguments
from all prior declarations of the template in the
same way default function arguments are (<a href='dcl.fct.default'>[dcl.fct.default]</a>)<a class='hidden_link' href='#param-14.sentence-1'>.</a></div> <div id='param-14.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T1, class T2 = int&gt; class A;
template&lt;class T1 = int, class T2&gt; class A;</pre><div id='param-14.sentence-2' class='sentence'>is equivalent to</div><pre class='codeblock'>
template&lt;class T1 = int, class T2 = int&gt; class A;</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-15'><div class='marginalizedparent'><a class='marginalized' href='#param-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L636'>#</a></div><div id='param-15.sentence-1' class='sentence'>If a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
of a class template, variable template, or alias template has a default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>,
each subsequent
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall either have a default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
supplied
or be a template parameter pack<a class='hidden_link' href='#param-15.sentence-1'>.</a></div> <div id='param-15.sentence-2' class='sentence'>If a <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
of a primary class template, primary variable template, or alias template
is a template parameter pack, it shall be the last
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><a class='hidden_link' href='#param-15.sentence-2'>.</a></div> <div id='param-15.sentence-3' class='sentence'>A template parameter pack of a function template shall not be followed by
another
template parameter unless that template parameter can be deduced from the
parameter-type-list (<a href='dcl.fct'>[dcl.fct]</a>) of the function template or has a
default argument (<a href='temp.deduct'>[temp.deduct]</a>)<a class='hidden_link' href='#param-15.sentence-3'>.</a></div> <div id='param-15.sentence-4' class='sentence'>A template parameter of a deduction guide template (<a href='temp.deduct.guide'>[temp.deduct.guide]</a>)
that does not have a default argument
shall be deducible
from the parameter-type-list
of the deduction guide template<a class='hidden_link' href='#param-15.sentence-4'>.</a></div> <div id='param-15.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T1 = int, class T2&gt; class B;     <span class='comment'>// error
</span>
<span class='comment'>// <span class='tcode_in_codeblock'>U</span> can be neither deduced from the parameter-type-list nor specified
</span>template&lt;class... T, class... U&gt; void f() { }   <span class='comment'>// error
</span>template&lt;class... T, class U&gt; void g() { }      <span class='comment'>// error
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-16'><div class='marginalizedparent'><a class='marginalized' href='#param-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L671'>#</a></div><div id='param-16.sentence-1' class='sentence'>A
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall
not be given default arguments by two different declarations in the same scope<a class='hidden_link' href='#param-16.sentence-1'>.</a></div> <div id='param-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T = int&gt; class X;
template&lt;class T = int&gt; class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };  <span class='comment'>// error
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <span class='indexparent'><a class='index' id=':<,template_and'></a></span></div><div class='para' id='param-17'><div class='marginalizedparent'><a class='marginalized' href='#param-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L685'>#</a></div><div id='param-17.sentence-1' class='sentence'>When parsing a
default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
for a non-type
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>,
the first non-nested
<span class='texttt'>&gt;</span>
is taken as the end of the
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i>
rather than a greater-than operator<a class='hidden_link' href='#param-17.sentence-1'>.</a></div> <div id='param-17.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-17.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;int i = 3 &gt; 4 &gt;        <span class='comment'>// syntax error
</span>class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

template&lt;int i = (3 &gt; 4) &gt;      <span class='comment'>// OK
</span>class Y { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-18'><div class='marginalizedparent'><a class='marginalized' href='#param-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L707'>#</a></div><div id='param-18.sentence-1' class='sentence'>A
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
of a template
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is permitted to have a default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><a class='hidden_link' href='#param-18.sentence-1'>.</a></div> <div id='param-18.sentence-2' class='sentence'>When such default arguments are specified, they apply to the template
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
in the scope of the template
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><a class='hidden_link' href='#param-18.sentence-2'>.</a></div> <div id='param-18.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T = float&gt; struct B {};
template &lt;template &lt;class TT = float&gt; class T&gt; struct A {
  inline void f();
  inline void g();
};
template &lt;template &lt;class TT&gt; class T&gt; void A&lt;T&gt;::f() {
  T&lt;&gt; t;            <span class='comment'>// error: <span class='tcode_in_codeblock'>TT</span> has no default template argument
</span>}
template &lt;template &lt;class TT = char&gt; class T&gt; void A&lt;T&gt;::g() {
  T&lt;&gt; t;            <span class='comment'>// OK, <span class='tcode_in_codeblock'>T&lt;char&gt;</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='param-19'><div class='marginalizedparent'><a class='marginalized' href='#param-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L734'>#</a></div><div id='param-19.sentence-1' class='sentence'>If a <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> is a
<i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i> with an ellipsis prior to its
optional <i ><a href='lex.name#nt:identifier'>identifier</a></i> or is a
<i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i> that declares a parameter
pack (<a href='dcl.fct'>[dcl.fct]</a>), then the <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is a <a href='temp.variadic#def:template_parameter_pack'>template parameter pack</a><a class='hidden_link' href='#param-19.sentence-1'>.</a></div> <div id='param-19.sentence-2' class='sentence'>A template parameter pack that is a <i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i> whose type
contains one or more unexpanded parameter packs is a pack expansion<a class='hidden_link' href='#param-19.sentence-2'>.</a></div> <div id='param-19.sentence-3' class='sentence'>Similarly,
a template parameter pack that is a <i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i> with a
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i> containing one or more unexpanded
parameter packs is a pack expansion<a class='hidden_link' href='#param-19.sentence-3'>.</a></div> <div id='param-19.sentence-4' class='sentence'>A template parameter pack that is a pack
expansion shall not expand a parameter pack declared in the same
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i><a class='hidden_link' href='#param-19.sentence-4'>.</a></div> <div id='param-19.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#param-19.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class... Types&gt;                       <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> is a template type parameter pack
</span>   class Tuple;                                 <span class='comment'>// but not a pack expansion
</span>
template &lt;class T, int... Dims&gt;                 <span class='comment'>// <span class='tcode_in_codeblock'>Dims</span> is a non-type template parameter pack
</span>   struct multi_array;                          <span class='comment'>// but not a pack expansion
</span>
template &lt;class... T&gt;
  struct value_holder {
    template &lt;T... Values&gt; struct apply { };    <span class='comment'>// <span class='tcode_in_codeblock'>Values</span> is a non-type template parameter pack
</span>  };                                            <span class='comment'>// and a pack expansion
</span>
template &lt;class... T, T... Values&gt;              <span class='comment'>// error: <span class='tcode_in_codeblock'>Values</span> expands template type parameter
</span>  struct static_array;                          <span class='comment'>// pack <span class='tcode_in_codeblock'>T</span> within the same template parameter list
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-136'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-136'>136)</a></div><div id='footnote-136.sentence-1' class='sentence'>Since template
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>
and template
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
are treated as types for descriptive purposes, the terms
<a class='hidden_link' href='#def:non-type_parameter' id='def:non-type_parameter'><i>non-type parameter</i></a>
and
<a class='hidden_link' href='#def:non-type_argument' id='def:non-type_argument'><i>non-type argument</i></a>
are used to refer to non-type, non-template parameters and arguments<a class='hidden_link' href='#footnote-136.sentence-1'>.</a></div></div></div><div id='names' class='section'><h2 ><a class='secnum' href='#names' style='min-width:88pt'>17.2</a> Names of template specializations <a class='abbr_ref' href='temp.names'>[temp.names]</a></h2><div class='para' id='names-1'><div class='marginalizedparent'><a class='marginalized' href='#names-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L768'>#</a></div><div id='names-1.sentence-1' class='sentence'>A <a href='temp.spec'>template specialization</a> can be referred to by a
<i ><a href='temp.names#nt:template-id'>template-id</a></i>:</div><pre class='bnf'><a class='nontermdef' href='#nt:simple-template-id' id='nt:simple-template-id'>simple-template-id:</a>
&#9;<i ><a href='temp.names#nt:template-name'>template-name</a></i> <span class='terminal'>&lt;</span> <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>&gt;</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-id' id='nt:template-id'>template-id:</a>
&#9;<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
&#9;<i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i> <span class='terminal'>&lt;</span> <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>&gt;</span>
&#9;<i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i> <span class='terminal'>&lt;</span> <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>&gt;</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-name' id='nt:template-name'>template-name:</a>
&#9;<i ><a href='lex.name#nt:identifier'>identifier</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-argument-list' id='nt:template-argument-list'>template-argument-list:</a>
&#9;<i ><a href='temp.names#nt:template-argument'>template-argument</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i> <span class='terminal'>,</span> <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-argument' id='nt:template-argument'>template-argument:</a>
&#9;<i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i>
&#9;<i ><a href='dcl.name#nt:type-id'>type-id</a></i>
&#9;<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
</pre><div id='names-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#names-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-1.sentence-2' class='sentence'>The <a href='basic.lookup'>name lookup</a> rules are used to associate the use of
a name with a template declaration;
that is, to identify a name as a
<i ><a href='temp.names#nt:template-name'>template-name</a></i><a class='hidden_link' href='#names-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='names-2'><div class='marginalizedparent'><a class='marginalized' href='#names-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L809'>#</a></div><div id='names-2.sentence-1' class='sentence'>For a
<i ><a href='temp.names#nt:template-name'>template-name</a></i>
to be explicitly qualified by the template arguments,
the name must be considered to refer to a template<a class='hidden_link' href='#names-2.sentence-1'>.</a></div> <div id='names-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#names-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-2.sentence-4' class='sentence'>Whether a name actually refers to a template
cannot be known in some cases
until after argument dependent lookup is done (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)<a class='hidden_link' href='#names-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='names-2.sentence-2' class='sentence'>
A name is considered to refer to a template if
name lookup finds
a <i ><a href='temp.names#nt:template-name'>template-name</a></i>
or an overload set that contains a function template<a class='hidden_link' href='#names-2.sentence-2'>.</a></div> <div id='names-2.sentence-3' class='sentence'>A name is also considered to refer to a template if
it is an <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
followed by a <span class='texttt'>&lt;</span>
and name lookup finds either one or more functions or finds nothing<a class='hidden_link' href='#names-2.sentence-3'>.</a></div></div><div class='para' id='names-3'><div class='marginalizedparent'><a class='marginalized' href='#names-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L828'>#</a></div><div id='names-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':<,template_and_'></a></span>When a name is considered to be a
<i ><a href='temp.names#nt:template-name'>template-name</a></i>,
and it is followed by a <span class='texttt'>&lt;</span>,
the <span class='texttt'>&lt;</span>
is always taken as the delimiter of a
<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>
and never as the less-than operator<a class='hidden_link' href='#names-3.sentence-1'>.</a></div> <div id='names-3.sentence-2' class='sentence'>When parsing a <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>,
the first non-nested
<span class='texttt'>&gt;</span><a class='footnotenum' href='#footnote-137'>137</a>
is taken as the ending delimiter
rather than a greater-than operator<a class='hidden_link' href='#names-3.sentence-2'>.</a></div> <div id='names-3.sentence-3' class='sentence'>Similarly, the first non-nested <span class='texttt'>&gt;&gt;</span> is treated as two
consecutive but distinct <span class='texttt'>&gt;</span> tokens, the first of which is taken
as the end of the <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i> and completes
the <i ><a href='temp.names#nt:template-id'>template-id</a></i><a class='hidden_link' href='#names-3.sentence-3'>.</a></div> <div id='names-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#names-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-3.sentence-4' class='sentence'>The second <span class='texttt'>&gt;</span>
token produced by this replacement rule may terminate an enclosing
<i ><a href='temp.names#nt:template-id'>template-id</a></i> construct or it may be part of a different
construct (e.g., a cast)<a class='hidden_link' href='#names-3.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='names-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#names-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;int i&gt; class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

X&lt; 1&gt;2 &gt; x1;                            <span class='comment'>// syntax error
</span>X&lt;(1&gt;2)&gt; x2;                            <span class='comment'>// OK
</span>
template&lt;class T&gt; class Y { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
Y&lt;X&lt;1&gt;&gt; x3;                             <span class='comment'>// OK, same as <span class='tcode_in_codeblock'>Y&lt;X&lt;1&gt; &gt; x3;</span>
</span>Y&lt;X&lt;6&gt;&gt;1&gt;&gt; x4;                          <span class='comment'>// syntax error
</span>Y&lt;X&lt;(6&gt;&gt;1)&gt;&gt; x5;                        <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='names-4'><div class='marginalizedparent'><a class='marginalized' href='#names-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L869'>#</a></div><div id='names-4.sentence-1' class='sentence'>The keyword <span class='texttt'>template</span> is said to appear at the top level in
a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
if it appears outside of a <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i> or
<i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i><a class='hidden_link' href='#names-4.sentence-1'>.</a></div> <div id='names-4.sentence-2' class='sentence'>In a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> of a <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> or
in a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> formed by a <i ><a href='class#nt:class-head-name'>class-head-name</a></i> or
<i ><a href='dcl.enum#nt:enum-head-name'>enum-head-name</a></i>,
the keyword <span class='texttt'>template</span> shall not appear at the top level<a class='hidden_link' href='#names-4.sentence-2'>.</a></div> <div id='names-4.sentence-3' class='sentence'>In a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> used as the name in a
<i ><a href='temp.res#nt:typename-specifier'>typename-specifier</a></i>,
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>,
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>, or
<i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>,
an optional keyword <span class='texttt'>template</span> appearing at the top level is ignored<a class='hidden_link' href='#names-4.sentence-3'>.</a></div> <div id='names-4.sentence-4' class='sentence'>In these contexts, a <span class='texttt'>&lt;</span> token is always assumed to introduce a
<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><a class='hidden_link' href='#names-4.sentence-4'>.</a></div> <div id='names-4.sentence-5' class='sentence'>In all other contexts, when naming a template specialization of
a member of an unknown specialization (<a href='temp.dep.type'>[temp.dep.type]</a>),
the member template name shall be prefixed by the keyword <span class='texttt'>template</span><a class='hidden_link' href='#names-4.sentence-5'>.</a></div> <div id='names-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#names-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  template&lt;std::size_t&gt; X* alloc();
  template&lt;std::size_t&gt; static X* adjust();
};
template&lt;class T&gt; void f(T* p) {
  T* p1 = p-&gt;alloc&lt;200&gt;();              <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>&lt;</span> means less than
</span>  T* p2 = p-&gt;template alloc&lt;200&gt;();     <span class='comment'>// OK: <span class='tcode_in_codeblock'>&lt;</span> starts template argument list
</span>  T::adjust&lt;100&gt;();                     <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>&lt;</span> means less than
</span>  T::template adjust&lt;100&gt;();            <span class='comment'>// OK: <span class='tcode_in_codeblock'>&lt;</span> starts template argument list
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='names-5'><div class='marginalizedparent'><a class='marginalized' href='#names-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L905'>#</a></div><div id='names-5.sentence-1' class='sentence'>A name prefixed by the keyword
<span class='texttt'>template</span>
shall be a <i ><a href='temp.names#nt:template-id'>template-id</a></i> or
the name shall refer to a class template or an alias template<a class='hidden_link' href='#names-5.sentence-1'>.</a></div> <div id='names-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#names-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-5.sentence-2' class='sentence'>The keyword
<span class='texttt'>template</span>
may not be applied to non-template members of class templates<a class='hidden_link' href='#names-5.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='names-5.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#names-5.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-5.sentence-3' class='sentence'>As is the case with the
<span class='texttt'>typename</span>
prefix, the
<span class='texttt'>template</span>
prefix is allowed in cases where it is not strictly
necessary; i.e., when the <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> or
the expression on the left of
the
<span class='texttt'>-&gt;</span>
or
<span class='texttt'>.</span>
is not dependent on a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>, or the use does not appear in the
scope of a template<a class='hidden_link' href='#names-5.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='names-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#names-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct A {
  void f(int);
  template &lt;class U&gt; void f(U);
};

template &lt;class T&gt; void f(T t) {
  A&lt;T&gt; a;
  a.template f&lt;&gt;(t);                    <span class='comment'>// OK: calls template
</span>  a.template f(t);                      <span class='comment'>// error: not a <span class='grammarterm'>template-id</span>
</span>}

template &lt;class T&gt; struct B {
  template &lt;class T2&gt; struct C { };
};

<span class='comment'>// OK: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;template C</span> names a class template:
</span>template &lt;class T, template &lt;class X&gt; class TT = T::template C&gt; struct D { };
D&lt;B&lt;int&gt; &gt; db;</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='names-6'><div class='marginalizedparent'><a class='marginalized' href='#names-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L954'>#</a></div><div id='names-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':specialization,class_template'></a></span>A
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
that names a class template specialization is a
<i ><a href='class#nt:class-name'>class-name</a></i><a class='hidden_link' href='#names-6.sentence-1'>.</a></div></div><div class='para' id='names-7'><div class='marginalizedparent'><a class='marginalized' href='#names-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L961'>#</a></div><div id='names-7.sentence-1' class='sentence'>A <i ><a href='temp.names#nt:template-id'>template-id</a></i> that names an alias template
specialization is a <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i><a class='hidden_link' href='#names-7.sentence-1'>.</a></div></div><div class='para' id='names-8'><div class='marginalizedparent'><a class='marginalized' href='#names-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L965'>#</a></div><div id='names-8.sentence-1' class='sentence'>When the <i ><a href='temp.names#nt:template-name'>template-name</a></i>
of a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
names a constrained non-function template
or
a constrained template <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>,
but not a member template
that is a member of an unknown specialization (<a href='temp.res'>[temp.res]</a>),
and
all <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
in the <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
are non-dependent (<a href='temp.dep.temp'>[temp.dep.temp]</a>),
the associated constraints (<a href='temp.constr.decl'>[temp.constr.decl]</a>)
of the constrained template
shall be satisfied (<a href='temp.constr.constr'>[temp.constr.constr]</a>)<a class='hidden_link' href='#names-8.sentence-1'>.</a></div> <div id='names-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#names-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C1 = sizeof(T) != sizeof(int);

template&lt;C1 T&gt; struct S1 { };
template&lt;C1 T&gt; using Ptr = T*;

S1&lt;int&gt;* p;                         <span class='comment'>// error: constraints not satisfied
</span>Ptr&lt;int&gt; p;                         <span class='comment'>// error: constraints not satisfied
</span>
template&lt;typename T&gt;
struct S2 { Ptr&lt;int&gt; x; };          <span class='comment'>// error, no diagnostic required
</span>
template&lt;typename T&gt;
struct S3 { Ptr&lt;T&gt; x; };            <span class='comment'>// OK, satisfaction is not required
</span>
S3&lt;int&gt; x;                          <span class='comment'>// error: constraints not satisfied
</span>
template&lt;template&lt;C1 T&gt; class X&gt;
struct S4 {
  X&lt;int&gt; x;                         <span class='comment'>// error, no diagnostic required
</span>};

template&lt;typename T&gt; concept C2 = sizeof(T) == 1;

template&lt;C2 T&gt; struct S { };

template struct S&lt;char[2]&gt;;         <span class='comment'>// error: constraints not satisfied
</span>template&lt;&gt; struct S&lt;char[2]&gt; { };   <span class='comment'>// error: constraints not satisfied
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-137'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-137'>137)</a></div><div id='footnote-137.sentence-1' class='sentence'>A <span class='texttt'>&gt;</span> that encloses the <i ><a href='dcl.name#nt:type-id'>type-id</a></i>
of a <span class='texttt'>dynamic_&shy;cast</span>, <span class='texttt'>static_&shy;cast</span>, <span class='texttt'>reinterpret_&shy;cast</span>
or <span class='texttt'>const_&shy;cast</span>, or which encloses the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
of a subsequent <i ><a href='temp.names#nt:template-id'>template-id</a></i>, is considered nested for the purpose
of this description<a class='hidden_link' href='#footnote-137.sentence-1'>.</a></div></div></div><div id='arg' class='section'><h2 ><a class='secnum' href='#arg' style='min-width:88pt'>17.3</a> Template arguments <a class='abbr_ref' href='temp.arg'>[temp.arg]</a></h2><div class='para' id='arg-1'><div class='marginalizedparent'><a class='marginalized' href='#arg-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1015'>#</a></div><div id='arg-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':argument,template'></a></span>There are three forms of
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>,
corresponding to the three forms of
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>:
type, non-type and template<a class='hidden_link' href='#arg-1.sentence-1'>.</a></div> <div id='arg-1.sentence-2' class='sentence'>The type and form of each
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
specified in a
<i ><a href='temp.names#nt:template-id'>template-id</a></i>
shall match the type and form specified for the corresponding
parameter declared by the template in its
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i><a class='hidden_link' href='#arg-1.sentence-2'>.</a></div> <div id='arg-1.sentence-3' class='sentence'>When the parameter declared by the template is a
<a href='temp.variadic#def:template_parameter_pack'>template parameter pack</a>, it will correspond to zero or more
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span><a class='hidden_link' href='#arg-1.sentence-3'>.</a></div> <div id='arg-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class Array {
  T* v;
  int sz;
public:
  explicit Array(int);
  T&amp; operator[](int);
  T&amp; elem(int i) { return v[i]; }
};

Array&lt;int&gt; v1(20);
typedef std::complex&lt;double&gt; dcomplex;  <span class='comment'>// <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;complex</span> is a standard library template
</span>Array&lt;dcomplex&gt; v2(30);
Array&lt;dcomplex&gt; v3(40);

void bar() {
  v1[3] = 7;
  v2[3] = v3.elem(4) = dcomplex(7,8);
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg-2'><div class='marginalizedparent'><a class='marginalized' href='#arg-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1055'>#</a></div><div id='arg-2.sentence-1' class='sentence'>In a
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>,
an ambiguity between a
<i ><a href='dcl.name#nt:type-id'>type-id</a></i>
and an expression is resolved to a
<i ><a href='dcl.name#nt:type-id'>type-id</a></i>,
regardless of the form of the corresponding
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><a class='hidden_link' href='#arg-2.sentence-1'>.</a><a class='footnotenum' href='#footnote-138'>138</a></div> <div id='arg-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void f();
template&lt;int I&gt; void f();

void g() {
  f&lt;int()&gt;();       <span class='comment'>// <span class='tcode_in_codeblock'>int()</span> is a type-id: call the first <span class='tcode_in_codeblock'>f()</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg-3'><div class='marginalizedparent'><a class='marginalized' href='#arg-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1080'>#</a></div><div id='arg-3.sentence-1' class='sentence'>The name of a
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
shall be accessible at the point where it is used as a
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><a class='hidden_link' href='#arg-3.sentence-1'>.</a></div> <div id='arg-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#arg-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg-3.sentence-3' class='sentence'>If the name of the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
is accessible at the point where it is used as a
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>,
there is no further access restriction in the resulting instantiation where the
corresponding
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
name is used<a class='hidden_link' href='#arg-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='arg-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class X {
  static T t;
};

class Y {
private:
  struct S { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  X&lt;S&gt; x;           <span class='comment'>// OK: <span class='tcode_in_codeblock'>S</span> is accessible
</span>                    <span class='comment'>// <span class='tcode_in_codeblock'>X&lt;Y&#x200b;::&#x200b;S&gt;</span> has a static member of type <span class='tcode_in_codeblock'>Y&#x200b;::&#x200b;S</span>
</span>                    <span class='comment'>// OK: even though <span class='tcode_in_codeblock'>Y&#x200b;::&#x200b;S</span> is private
</span>};

X&lt;Y::S&gt; y;          <span class='comment'>// error: <span class='tcode_in_codeblock'>S</span> not accessible
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='arg-3.sentence-2' class='sentence'>
For a
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
that is a class type or a class template, the template
definition has no special access rights to the
members of the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><a class='hidden_link' href='#arg-3.sentence-2'>.</a></div> <div id='arg-3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;template &lt;class TT&gt; class T&gt; class A {
  typename T&lt;int&gt;::S s;
};

template &lt;class U&gt; class B {
private:
  struct S { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
};

A&lt;B&gt; b;             <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>A</span> has no access to <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;S</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg-4'><div class='marginalizedparent'><a class='marginalized' href='#arg-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1133'>#</a></div><div id='arg-4.sentence-1' class='sentence'>When template argument packs or default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
are used, a
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
list can be empty<a class='hidden_link' href='#arg-4.sentence-1'>.</a></div> <div id='arg-4.sentence-2' class='sentence'>In that case the empty
<span class='texttt'>&lt;&gt;</span>
brackets shall still be used as the
<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><a class='hidden_link' href='#arg-4.sentence-2'>.</a></div> <div id='arg-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T = char&gt; class String;
String&lt;&gt;* p;                    <span class='comment'>// OK: <span class='tcode_in_codeblock'>String&lt;char&gt;</span>
</span>String* q;                      <span class='comment'>// syntax error
</span>template&lt;class ... Elements&gt; class Tuple;
Tuple&lt;&gt;* t;                     <span class='comment'>// OK: <span class='tcode_in_codeblock'>Elements</span> is empty
</span>Tuple* u;                       <span class='comment'>// syntax error
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg-5'><div class='marginalizedparent'><a class='marginalized' href='#arg-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1155'>#</a></div><div id='arg-5.sentence-1' class='sentence'>An explicit destructor call (<a href='class.dtor'>[class.dtor]</a>) for an object that has a type
that is a class template specialization may explicitly specify the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span><a class='hidden_link' href='#arg-5.sentence-1'>.</a></div> <div id='arg-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  ~A();
};
void f(A&lt;int&gt;* p, A&lt;int&gt;* q) {
  p-&gt;A&lt;int&gt;::~A();              <span class='comment'>// OK: destructor call
</span>  q-&gt;A&lt;int&gt;::~A&lt;int&gt;();         <span class='comment'>// OK: destructor call
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg-6'><div class='marginalizedparent'><a class='marginalized' href='#arg-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1172'>#</a></div><div id='arg-6.sentence-1' class='sentence'>If the use of a
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
gives rise to an ill-formed construct in the instantiation of a
template specialization, the program is ill-formed<a class='hidden_link' href='#arg-6.sentence-1'>.</a></div></div><div class='para' id='arg-7'><div class='marginalizedparent'><a class='marginalized' href='#arg-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1178'>#</a></div><div id='arg-7.sentence-1' class='sentence'>When name lookup for the name in a
<i ><a href='temp.names#nt:template-id'>template-id</a></i>
finds an overload set, both non-template functions in the overload
set and function templates in the overload set for
which the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
do not match the
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>
are ignored<a class='hidden_link' href='#arg-7.sentence-1'>.</a></div> <div id='arg-7.sentence-2' class='sentence'>If none of the function templates have matching
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>,
the program is ill-formed<a class='hidden_link' href='#arg-7.sentence-2'>.</a></div></div><div class='para' id='arg-8'><div class='marginalizedparent'><a class='marginalized' href='#arg-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1192'>#</a></div><div id='arg-8.sentence-1' class='sentence'>When a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i> does not name a function,
a default <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> is
<a href='temp.inst'>implicitly instantiated</a>
when the value of that default argument is needed<a class='hidden_link' href='#arg-8.sentence-1'>.</a></div> <div id='arg-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T, typename U = int&gt; struct S { };
S&lt;bool&gt;* p;         <span class='comment'>// the type of <span class='tcode_in_codeblock'>p</span> is <span class='tcode_in_codeblock'>S&lt;bool, int&gt;*</span>
</span></pre> <div id='arg-8.sentence-2' class='sentence'>
The default argument for <span class='texttt'>U</span> is instantiated to form the type <span class='texttt'>S&lt;bool, int&gt;*</span><a class='hidden_link' href='#arg-8.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg-9'><div class='marginalizedparent'><a class='marginalized' href='#arg-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1205'>#</a></div><div id='arg-9.sentence-1' class='sentence'>A <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> followed by an ellipsis is
a <a href='temp.variadic#def:pack_expansion'>pack expansion</a><a class='hidden_link' href='#arg-9.sentence-1'>.</a></div></div><div class='footnote' id='footnote-138'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-138'>138)</a></div><div id='footnote-138.sentence-1' class='sentence'>There is no such ambiguity in a default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
because the form of the
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
determines the allowable forms of the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><a class='hidden_link' href='#footnote-138.sentence-1'>.</a></div></div><div id='arg.type' class='section'><h3 ><a class='secnum' href='#arg.type' style='min-width:103pt'>17.3.1</a> Template type arguments <a class='abbr_ref' href='temp.arg.type'>[temp.arg.type]</a></h3><div class='para' id='arg.type-1'><div class='marginalizedparent'><a class='marginalized' href='#arg.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1211'>#</a></div><div id='arg.type-1.sentence-1' class='sentence'>A
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
for a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
which is a type
shall be a
<i ><a href='dcl.name#nt:type-id'>type-id</a></i><a class='hidden_link' href='#arg.type-1.sentence-1'>.</a></div></div><div class='para' id='arg.type-2'><div class='marginalizedparent'><a class='marginalized' href='#arg.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1220'>#</a></div><div id='arg.type-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.type-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; class X { };
template &lt;class T&gt; void f(T t) { }
struct { } unnamed_obj;

void f() {
  struct A { };
  enum { e1 };
  typedef struct { } B;
  B b;
  X&lt;A&gt; x1;          <span class='comment'>// OK
</span>  X&lt;A*&gt; x2;         <span class='comment'>// OK
</span>  X&lt;B&gt; x3;          <span class='comment'>// OK
</span>  f(e1);            <span class='comment'>// OK
</span>  f(unnamed_obj);   <span class='comment'>// OK
</span>  f(b);             <span class='comment'>// OK
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='arg.type-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#arg.type-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.type-2.sentence-1' class='sentence'>A template type argument may be an <a href='basic.types#def:type,incomplete'>incomplete type</a><a class='hidden_link' href='#arg.type-2.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='arg.nontype' class='section'><h3 ><a class='secnum' href='#arg.nontype' style='min-width:103pt'>17.3.2</a> Template non-type arguments <a class='abbr_ref' href='temp.arg.nontype'>[temp.arg.nontype]</a></h3><div class='para' id='arg.nontype-1'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1247'>#</a></div><div id='arg.nontype-1.sentence-1' class='sentence'>If the type of a <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
contains a <a href='dcl.spec.auto#def:placeholder_type'>placeholder type</a>,
the deduced parameter type is determined
from the type of the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
by <a href='dcl.type.auto.deduct'>placeholder type deduction</a><a class='hidden_link' href='#arg.nontype-1.sentence-1'>.</a></div> <div id='arg.nontype-1.sentence-2' class='sentence'>If a deduced parameter type is not permitted
for a <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> declaration (<a href='temp.param'>[temp.param]</a>),
the program is ill-formed<a class='hidden_link' href='#arg.nontype-1.sentence-2'>.</a></div></div><div class='para' id='arg.nontype-2'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1257'>#</a></div><div id='arg.nontype-2.sentence-1' class='sentence'>A
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
for a non-type
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall be a
<a href='expr.const#def:expression,converted_constant'>converted constant expression</a>
of the type of the <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><a class='hidden_link' href='#arg.nontype-2.sentence-1'>.</a></div> <div id='arg.nontype-2.sentence-2' class='sentence'>For a non-type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> of reference or pointer type,
the value of the constant expression shall not refer to
(or for a pointer type, shall not be the address of):</div><div id='arg.nontype-2.sentence-3' class='sentence'><ul class='itemize'><li id='arg.nontype-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-2.1'>(2.1)</a></div><div id='arg.nontype-2.1.sentence-1' class='sentence'>a <a href='intro.object#def:subobject'>subobject</a>,</div></li><li id='arg.nontype-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-2.2'>(2.2)</a></div><div id='arg.nontype-2.2.sentence-1' class='sentence'>a <a href='class.temporary'>temporary object</a>,</div></li><li id='arg.nontype-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-2.3'>(2.3)</a></div><div id='arg.nontype-2.3.sentence-1' class='sentence'>a <a href='lex.string'>string literal</a>,</div></li><li id='arg.nontype-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-2.4'>(2.4)</a></div><div id='arg.nontype-2.4.sentence-1' class='sentence'>the result of a <a href='expr.typeid'><span class='texttt'>typeid</span> expression</a>, or</div></li><li id='arg.nontype-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-2.5'>(2.5)</a></div><div id='arg.nontype-2.5.sentence-1' class='sentence'>a predefined <a href='dcl.fct.def.general#:__func__'><span class='texttt'>_&shy;_&shy;func_&shy;_&shy;</span></a> variable<a class='hidden_link' href='#arg.nontype-2.5.sentence-1'>.</a></div></li></ul></div><div id='arg.nontype-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#arg.nontype-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.nontype-2.sentence-4' class='sentence'>If the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
represents a set of overloaded functions
(or a pointer or member pointer to such),
the matching function is selected from the set (<a href='over.over'>[over.over]</a>)<a class='hidden_link' href='#arg.nontype-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.nontype-3'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1284'>#</a></div><div id='arg.nontype-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.nontype-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;const int* pci&gt; struct X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
int ai[10];
X&lt;ai&gt; xi;                       <span class='comment'>// array to pointer and qualification conversions
</span>
struct Y { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;const Y&amp; b&gt; struct Z { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
Y y;
Z&lt;y&gt; z;                         <span class='comment'>// no conversion, but note extra cv-qualification
</span>
template&lt;int (&amp;pa)[5]&gt; struct W { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
int b[5];
W&lt;b&gt; w;                         <span class='comment'>// no conversion
</span>
void f(char);
void f(int);

template&lt;void (*pf)(int)&gt; struct A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

A&lt;&amp;f&gt; a;                        <span class='comment'>// selects <span class='tcode_in_codeblock'>f(int)</span>
</span>
template&lt;auto n&gt; struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
B&lt;5&gt; b1;                        <span class='comment'>// OK: template parameter type is <span class='tcode_in_codeblock'>int</span>
</span>B&lt;'a'&gt; b2;                      <span class='comment'>// OK: template parameter type is <span class='tcode_in_codeblock'>char</span>
</span>B&lt;2.5&gt; b3;                      <span class='comment'>// error: template parameter type cannot be <span class='tcode_in_codeblock'>double</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.nontype-4'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1314'>#</a></div><div id='arg.nontype-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#arg.nontype-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.nontype-4.sentence-1' class='sentence'>A <a href='lex.string'>string literal</a>
is not an acceptable
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><a class='hidden_link' href='#arg.nontype-4.sentence-1'>.</a></div> <div id='arg.nontype-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.nontype-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T, const char* p&gt; class X {
  <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span>
};

X&lt;int, "Studebaker"&gt; x1;        <span class='comment'>// error: string literal as template-argument
</span>
const char p[] = "Vivisectionist";
X&lt;int,p&gt; x2;                    <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.nontype-5'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1334'>#</a></div><div id='arg.nontype-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#arg.nontype-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.nontype-5.sentence-1' class='sentence'>The address of an array element or non-static data member is not an acceptable
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><a class='hidden_link' href='#arg.nontype-5.sentence-1'>.</a></div> <div id='arg.nontype-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.nontype-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;int* p&gt; class X { };

int a[10];
struct S { int m; static int s; } s;

X&lt;&amp;a[2]&gt; x3;                    <span class='comment'>// error: address of array element
</span>X&lt;&amp;s.m&gt; x4;                     <span class='comment'>// error: address of non-static member
</span>X&lt;&amp;s.s&gt; x5;                     <span class='comment'>// OK: address of static member
</span>X&lt;&amp;S::s&gt; x6;                    <span class='comment'>// OK: address of static member
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.nontype-6'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1354'>#</a></div><div id='arg.nontype-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#arg.nontype-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.nontype-6.sentence-1' class='sentence'>A temporary object
is not an acceptable
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
when the corresponding
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
has reference type<a class='hidden_link' href='#arg.nontype-6.sentence-1'>.</a></div> <div id='arg.nontype-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.nontype-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;const int&amp; CRI&gt; struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

B&lt;1&gt; b2;                        <span class='comment'>// error: temporary would be required for template argument
</span>
int c = 1;
B&lt;c&gt; b1;                        <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='arg.template' class='section'><h3 ><a class='secnum' href='#arg.template' style='min-width:103pt'>17.3.3</a> Template template arguments <a class='abbr_ref' href='temp.arg.template'>[temp.arg.template]</a></h3><div class='para' id='arg.template-1'><div class='marginalizedparent'><a class='marginalized' href='#arg.template-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1377'>#</a></div><div id='arg.template-1.sentence-1' class='sentence'>A
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
for a template
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall be the name of a class template or an alias template, expressed as
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i><a class='hidden_link' href='#arg.template-1.sentence-1'>.</a></div> <div id='arg.template-1.sentence-2' class='sentence'>When the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> names a class
template, only primary class templates are considered when matching the template template
argument with the corresponding parameter; partial specializations are not
considered even if their parameter lists match that of the template template
parameter<a class='hidden_link' href='#arg.template-1.sentence-2'>.</a></div></div><div class='para' id='arg.template-2'><div class='marginalizedparent'><a class='marginalized' href='#arg.template-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1390'>#</a></div><div id='arg.template-2.sentence-1' class='sentence'>Any <a href='temp.class.spec'>partial specializations</a> associated with the
primary class template or primary variable template are considered when a
specialization based on the template
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is instantiated<a class='hidden_link' href='#arg.template-2.sentence-1'>.</a></div> <div id='arg.template-2.sentence-2' class='sentence'>If a specialization is not visible at the point of instantiation,
and it would have been selected had it been visible, the program is ill-formed,
no diagnostic required<a class='hidden_link' href='#arg.template-2.sentence-2'>.</a></div> <div id='arg.template-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.template-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class A {     <span class='comment'>// primary template
</span>  int x;
};
template&lt;class T&gt; class A&lt;T*&gt; { <span class='comment'>// partial specialization
</span>  long x;
};
template&lt;template&lt;class U&gt; class V&gt; class C {
  V&lt;int&gt;  y;
  V&lt;int*&gt; z;
};
C&lt;A&gt; c;             <span class='comment'>// <span class='tcode_in_codeblock'>V&lt;int&gt;</span> within <span class='tcode_in_codeblock'>C&lt;A&gt;</span> uses the primary template, so <span class='tcode_in_codeblock'>c.y.x</span> has type <span class='tcode_in_codeblock'>int</span>
</span>                    <span class='comment'>// <span class='tcode_in_codeblock'>V&lt;int*&gt;</span> within <span class='tcode_in_codeblock'>C&lt;A&gt;</span> uses the partial specialization, so <span class='tcode_in_codeblock'>c.z.x</span> has type <span class='tcode_in_codeblock'>long</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.template-3'><div class='marginalizedparent'><a class='marginalized' href='#arg.template-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1417'>#</a></div><div id='arg.template-3.sentence-1' class='sentence'>A <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> matches a template
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> <span class='texttt'>P</span> when
<span class='texttt'>P</span> is at least as specialized as the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> <span class='texttt'>A</span><a class='hidden_link' href='#arg.template-3.sentence-1'>.</a></div> <div id='arg.template-3.sentence-2' class='sentence'>If <span class='texttt'>P</span> contains a parameter pack, then <span class='texttt'>A</span> also matches <span class='texttt'>P</span>
if each of <span class='texttt'>A</span>'s template parameters
matches the corresponding template parameter in the
<i ><a href='temp#nt:template-head'>template-head</a></i> of <span class='texttt'>P</span><a class='hidden_link' href='#arg.template-3.sentence-2'>.</a></div> <div id='arg.template-3.sentence-3' class='sentence'>Two template parameters match if they are of the same kind (type, non-type, template),
for non-type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>, their types are
equivalent (<a href='temp.over.link'>[temp.over.link]</a>), and for template <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>,
each of their corresponding <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> matches, recursively<a class='hidden_link' href='#arg.template-3.sentence-3'>.</a></div> <div id='arg.template-3.sentence-4' class='sentence'>When <span class='texttt'>P</span>'s <i ><a href='temp#nt:template-head'>template-head</a></i> contains a template parameter
pack (<a href='temp.variadic'>[temp.variadic]</a>), the template parameter pack will match zero or more template
parameters or template parameter packs in the <i ><a href='temp#nt:template-head'>template-head</a></i> of
<span class='texttt'>A</span> with the same type and form as the template parameter pack in <span class='texttt'>P</span>
(ignoring whether those template parameters are template parameter packs)<a class='hidden_link' href='#arg.template-3.sentence-4'>.</a></div><div style='height:0.6em;display:block'></div><div id='arg.template-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.template-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T, class U = T&gt; class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class ... Types&gt; class C { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;auto n&gt; class D { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;template&lt;class&gt; class P&gt; class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;template&lt;class ...&gt; class Q&gt; class Y { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;template&lt;int&gt; class R&gt; class Z { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

X&lt;A&gt; xa;            <span class='comment'>// OK
</span>X&lt;B&gt; xb;            <span class='comment'>// OK
</span>X&lt;C&gt; xc;            <span class='comment'>// OK
</span>Y&lt;A&gt; ya;            <span class='comment'>// OK
</span>Y&lt;B&gt; yb;            <span class='comment'>// OK
</span>Y&lt;C&gt; yc;            <span class='comment'>// OK
</span>Z&lt;D&gt; zd;            <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='arg.template-3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.template-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct eval;

template &lt;template &lt;class, class...&gt; class TT, class T1, class... Rest&gt;
struct eval&lt;TT&lt;T1, Rest...&gt;&gt; { };

template &lt;class T1&gt; struct A;
template &lt;class T1, class T2&gt; struct B;
template &lt;int N&gt; struct C;
template &lt;class T1, int N&gt; struct D;
template &lt;class T1, class T2, int N = 17&gt; struct E;

eval&lt;A&lt;int&gt;&gt; eA;            <span class='comment'>// OK: matches partial specialization of <span class='tcode_in_codeblock'>eval</span>
</span>eval&lt;B&lt;int, float&gt;&gt; eB;     <span class='comment'>// OK: matches partial specialization of <span class='tcode_in_codeblock'>eval</span>
</span>eval&lt;C&lt;17&gt;&gt; eC;             <span class='comment'>// error: <span class='tcode_in_codeblock'>C</span> does not match <span class='tcode_in_codeblock'>TT</span> in partial specialization
</span>eval&lt;D&lt;int, 17&gt;&gt; eD;        <span class='comment'>// error: <span class='tcode_in_codeblock'>D</span> does not match <span class='tcode_in_codeblock'>TT</span> in partial specialization
</span>eval&lt;E&lt;int, float&gt;&gt; eE;     <span class='comment'>// error: <span class='tcode_in_codeblock'>E</span> does not match <span class='tcode_in_codeblock'>TT</span> in partial specialization
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='arg.template-3.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.template-3.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C = requires (T t) { t.f(); };
template&lt;typename T&gt; concept D = C&lt;T&gt; &amp;&amp; requires (T t) { t.g(); };

template&lt;template&lt;C&gt; class P&gt; struct S { };

template&lt;C&gt; struct X { };
template&lt;D&gt; struct Y { };
template&lt;typename T&gt; struct Z { };

S&lt;X&gt; s1;            <span class='comment'>// OK, <span class='tcode_in_codeblock'>X</span> and <span class='tcode_in_codeblock'>P</span> have equivalent constraints
</span>S&lt;Y&gt; s2;            <span class='comment'>// error: <span class='tcode_in_codeblock'>P</span> is not at least as specialized as <span class='tcode_in_codeblock'>Y</span>
</span>S&lt;Z&gt; s3;            <span class='comment'>// OK, <span class='tcode_in_codeblock'>P</span> is at least as specialized as <span class='tcode_in_codeblock'>Z</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.template-4'><div class='marginalizedparent'><a class='marginalized' href='#arg.template-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1490'>#</a></div><div id='arg.template-4.sentence-1' class='sentence'>A template <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> <span class='texttt'>P</span> is
at least as specialized as a template <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> <span class='texttt'>A</span>
if, given the following rewrite to two function templates,
the function template corresponding to <span class='texttt'>P</span>
is at least as specialized as
the function template corresponding to <span class='texttt'>A</span>
according to the <a href='temp.func.order'>partial ordering rules
for function templates</a><a class='hidden_link' href='#arg.template-4.sentence-1'>.</a></div> <div id='arg.template-4.sentence-2' class='sentence'>Given an invented class template <span class='texttt'>X</span>
with the <i ><a href='temp#nt:template-head'>template-head</a></i> of <span class='texttt'>A</span> (including default arguments
and <i ><a href='temp#nt:requires-clause'>requires-clause</a></i>, if any):</div><div id='arg.template-4.sentence-3' class='sentence'><ul class='itemize'><li id='arg.template-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.template-4.1'>(4.1)</a></div><div id='arg.template-4.1.sentence-1' class='sentence'>Each of the two function templates has the same template parameters
and <i ><a href='temp#nt:requires-clause'>requires-clause</a></i> (if any),
respectively, as <span class='texttt'>P</span> or <span class='texttt'>A</span><a class='hidden_link' href='#arg.template-4.1.sentence-1'>.</a></div></li><li id='arg.template-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.template-4.2'>(4.2)</a></div><div id='arg.template-4.2.sentence-1' class='sentence'>Each function template has a single function parameter
whose type is a specialization of <span class='texttt'>X</span>
with template arguments corresponding to the template parameters
from the respective function template where,
for each template parameter <span class='texttt'>PP</span>
in the <i ><a href='temp#nt:template-head'>template-head</a></i> of the function template,
a corresponding template argument <span class='texttt'>AA</span> is formed<a class='hidden_link' href='#arg.template-4.2.sentence-1'>.</a></div> <div id='arg.template-4.2.sentence-2' class='sentence'>If <span class='texttt'>PP</span> declares a parameter pack,
then <span class='texttt'>AA</span> is the pack expansion <span class='texttt'>PP...</span> (<a href='temp.variadic'>[temp.variadic]</a>);
otherwise, <span class='texttt'>AA</span> is the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> <span class='texttt'>PP</span><a class='hidden_link' href='#arg.template-4.2.sentence-2'>.</a></div></li></ul></div> <div id='arg.template-4.sentence-4' class='sentence'>
If the rewrite produces an invalid type,
then <span class='texttt'>P</span> is not at least as specialized as <span class='texttt'>A</span><a class='hidden_link' href='#arg.template-4.sentence-4'>.</a></div></div></div></div><div id='constr' class='section'><h2 ><a class='secnum' href='#constr' style='min-width:88pt'>17.4</a> Template constraints <a class='abbr_ref' href='temp.constr'>[temp.constr]</a></h2><div class='para' id='constr-1'><div class='marginalizedparent'><a class='marginalized' href='#constr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1525'>#</a></div><div id='constr-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#constr-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr-1.sentence-1' class='sentence'>This subclause defines the meaning of constraints on template arguments<a class='hidden_link' href='#constr-1.sentence-1'>.</a></div> <div id='constr-1.sentence-2' class='sentence'>The abstract syntax and satisfaction rules are defined
in <a href='temp.constr.constr'>[temp.constr.constr]</a><a class='hidden_link' href='#constr-1.sentence-2'>.</a></div> <div id='constr-1.sentence-3' class='sentence'>Constraints are associated with declarations in <a href='temp.constr.decl'>[temp.constr.decl]</a><a class='hidden_link' href='#constr-1.sentence-3'>.</a></div> <div id='constr-1.sentence-4' class='sentence'>Declarations are partially ordered by their associated constraints (<a href='temp.constr.order'>[temp.constr.order]</a>)<a class='hidden_link' href='#constr-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='constr.constr' class='section'><h3 ><a class='secnum' href='#constr.constr' style='min-width:103pt'>17.4.1</a> Constraints <a class='abbr_ref' href='temp.constr.constr'>[temp.constr.constr]</a></h3><div class='para' id='constr.constr-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.constr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1536'>#</a></div><div id='constr.constr-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:constraint' id='def:constraint'><i >constraint</i></a> is a sequence of logical operations and
operands that specifies requirements on template arguments<a class='hidden_link' href='#constr.constr-1.sentence-1'>.</a></div> <div id='constr.constr-1.sentence-2' class='sentence'>The operands of a logical operation are constraints<a class='hidden_link' href='#constr.constr-1.sentence-2'>.</a></div> <div id='constr.constr-1.sentence-3' class='sentence'>There are three different kinds of constraints:
<ul class='itemize'><li id='constr.constr-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.constr-1.1'>(1.1)</a></div><div id='constr.constr-1.1.sentence-1' class='sentence'><a href='temp.constr.op#def:conjunction'>conjunctions</a>,</div></li><li id='constr.constr-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.constr-1.2'>(1.2)</a></div><div id='constr.constr-1.2.sentence-1' class='sentence'><a href='temp.constr.op#def:disjunction'>disjunctions</a>, and</div></li><li id='constr.constr-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.constr-1.3'>(1.3)</a></div><div id='constr.constr-1.3.sentence-1' class='sentence'><a href='temp.constr.atomic#def:atomic_constraint'>atomic constraints</a></div></li></ul></div></div><div class='para' id='constr.constr-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.constr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1547'>#</a></div><div id='constr.constr-2.sentence-1' class='sentence'>In order for a constrained template to be instantiated (<a href='temp.spec'>[temp.spec]</a>),
its <a href='temp.constr.decl#def:associated_constraints'>associated constraints</a>
shall be satisfied as described in the following subsections<a class='hidden_link' href='#constr.constr-2.sentence-1'>.</a></div> <div id='constr.constr-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#constr.constr-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.constr-2.sentence-2' class='sentence'>Forming the name of a specialization of
a class template,
a variable template, or
an alias template (<a href='temp.names'>[temp.names]</a>)
requires the satisfaction of its constraints<a class='hidden_link' href='#constr.constr-2.sentence-2'>.</a></div> <div id='constr.constr-2.sentence-3' class='sentence'><a href='over.match.viable'>Overload resolution</a>
requires the satisfaction of constraints
on functions and function templates<a class='hidden_link' href='#constr.constr-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='constr.op' class='section'><h4 ><a class='secnum' href='#constr.op' style='min-width:118pt'>17.4.1.1</a> Logical operations <a class='abbr_ref' href='temp.constr.op'>[temp.constr.op]</a></h4><div class='para' id='constr.op-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.op-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1564'>#</a></div><div id='constr.op-1.sentence-1' class='sentence'>There are two binary logical operations on constraints: conjunction
and disjunction<a class='hidden_link' href='#constr.op-1.sentence-1'>.</a></div> <div id='constr.op-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#constr.op-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.op-1.sentence-2' class='sentence'>These logical operations have no corresponding C++ syntax<a class='hidden_link' href='#constr.op-1.sentence-2'>.</a></div> <div id='constr.op-1.sentence-3' class='sentence'>For the purpose of exposition, conjunction is spelled
using the symbol <span class='math'>∧</span> and disjunction is spelled using the
symbol <span class='math'>∨</span><a class='hidden_link' href='#constr.op-1.sentence-3'>.</a></div> <div id='constr.op-1.sentence-4' class='sentence'>The operands of these operations are called the left
and right operands<a class='hidden_link' href='#constr.op-1.sentence-4'>.</a></div> <div id='constr.op-1.sentence-5' class='sentence'>In the constraint <span class="mjx-chtml"><span class="mjx-math" aria-label="A \land {}B"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span>,
<span class='math'><span class='mathalpha'>A</span></span> is the left operand, and <span class='math'><span class='mathalpha'>B</span></span> is the right operand<a class='hidden_link' href='#constr.op-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='constr.op-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.op-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1577'>#</a></div><div id='constr.op-2.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:conjunction' id='def:conjunction'><i >conjunction</i></a> is a constraint taking two
operands<a class='hidden_link' href='#constr.op-2.sentence-1'>.</a></div> <div id='constr.op-2.sentence-2' class='sentence'>To determine if a conjunction is
<a class='hidden_link' href='#def:constraint,satisfaction,conjunction' id='def:constraint,satisfaction,conjunction'><i >satisfied</i></a>,
the satisfaction of
the first operand is checked<a class='hidden_link' href='#constr.op-2.sentence-2'>.</a></div> <div id='constr.op-2.sentence-3' class='sentence'>If that is not satisfied, the conjunction is not satisfied<a class='hidden_link' href='#constr.op-2.sentence-3'>.</a></div> <div id='constr.op-2.sentence-4' class='sentence'>Otherwise, the conjunction is satisfied if and only if the second
operand is satisfied<a class='hidden_link' href='#constr.op-2.sentence-4'>.</a></div></div><div class='para' id='constr.op-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.op-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1588'>#</a></div><div id='constr.op-3.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:disjunction' id='def:disjunction'><i >disjunction</i></a> is a constraint taking two
operands<a class='hidden_link' href='#constr.op-3.sentence-1'>.</a></div> <div id='constr.op-3.sentence-2' class='sentence'>To determine if a disjunction is
<a class='hidden_link' href='#def:constraint,satisfaction,disjunction' id='def:constraint,satisfaction,disjunction'><i >satisfied</i></a>,
the satisfaction of
the first operand is checked<a class='hidden_link' href='#constr.op-3.sentence-2'>.</a></div> <div id='constr.op-3.sentence-3' class='sentence'>If that is satisfied, the disjunction is satisfied<a class='hidden_link' href='#constr.op-3.sentence-3'>.</a></div> <div id='constr.op-3.sentence-4' class='sentence'>Otherwise, the disjunction is satisfied if and only if the second
operand is satisfied<a class='hidden_link' href='#constr.op-3.sentence-4'>.</a></div></div><div class='para' id='constr.op-4'><div class='marginalizedparent'><a class='marginalized' href='#constr.op-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1600'>#</a></div><div id='constr.op-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#constr.op-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt;
  constexpr bool get_value() { return T::value; }

template&lt;typename T&gt;
  requires (sizeof(T) &gt; 1) &amp;&amp; get_value&lt;T&gt;()
    void f(T);      <span class='comment'>// has associated constraint <span class='tcode_in_codeblock'>sizeof(T) &gt; 1 <span class='math'>∧</span> get_&shy;value&lt;T&gt;()</span>
</span>
void f(int);

f('a'); <span class='comment'>// OK: calls <span class='tcode_in_codeblock'>f(int)</span>
</span></pre> <div id='constr.op-4.sentence-1' class='sentence'>
In the satisfaction of the <a href='temp.constr.decl#def:associated_constraints'>associated constraints</a>
of <span class='texttt'>f</span>, the constraint <span class='texttt'>sizeof(char) &gt; 1</span> is not satisfied;
the second operand is not checked for satisfaction<a class='hidden_link' href='#constr.op-4.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='constr.atomic' class='section'><h4 ><a class='secnum' href='#constr.atomic' style='min-width:118pt'>17.4.1.2</a> Atomic constraints <a class='abbr_ref' href='temp.constr.atomic'>[temp.constr.atomic]</a></h4><div class='para' id='constr.atomic-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.atomic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1621'>#</a></div><div id='constr.atomic-1.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:atomic_constraint' id='def:atomic_constraint'><i >atomic constraint</i></a> is formed from
an expression <span class='texttt'>E</span>
and a mapping from the template parameters
that appear within <span class='texttt'>E</span> to
template arguments involving the
template parameters of the constrained entity,
called the <a class='hidden_link' href='#def:parameter_mapping' id='def:parameter_mapping'><i >parameter mapping</i></a> (<a href='temp.constr.decl'>[temp.constr.decl]</a>)<a class='hidden_link' href='#constr.atomic-1.sentence-1'>.</a></div> <div id='constr.atomic-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#constr.atomic-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.atomic-1.sentence-2' class='sentence'>Atomic constraints are formed by <a href='temp.constr.normal#def:constraint,normalization'>constraint normalization</a><a class='hidden_link' href='#constr.atomic-1.sentence-2'>.</a></div> <div id='constr.atomic-1.sentence-3' class='sentence'><span class='texttt'>E</span> is never a <a href='expr.log.and'>logical AND expression</a>
nor a <a href='expr.log.or'>logical OR expression</a><a class='hidden_link' href='#constr.atomic-1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='constr.atomic-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.atomic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1635'>#</a></div><div id='constr.atomic-2.sentence-1' class='sentence'>Two atomic constraints are
<a class='hidden_link' href='#def:atomic_constraint,identical' id='def:atomic_constraint,identical'><i >identical</i></a>
if they are formed from the same
<i ><a href='expr.comma#nt:expression'>expression</a></i>
and the targets of the parameter mappings are equivalent
according to the rules for expressions described in <a href='temp.over.link'>[temp.over.link]</a><a class='hidden_link' href='#constr.atomic-2.sentence-1'>.</a></div></div><div class='para' id='constr.atomic-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.atomic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1644'>#</a></div><div id='constr.atomic-3.sentence-1' class='sentence'>To determine if an atomic constraint is
<a class='hidden_link' href='#def:constraint,satisfaction,atomic' id='def:constraint,satisfaction,atomic'><i >satisfied</i></a>,
the parameter mapping and template arguments are
first substituted into its expression<a class='hidden_link' href='#constr.atomic-3.sentence-1'>.</a></div> <div id='constr.atomic-3.sentence-2' class='sentence'>If substitution results in an invalid type or expression,
the constraint is not satisfied<a class='hidden_link' href='#constr.atomic-3.sentence-2'>.</a></div> <div id='constr.atomic-3.sentence-3' class='sentence'>Otherwise, the <a href='conv.lval'>lvalue-to-rvalue conversion</a>
is performed if necessary,
and <span class='texttt'>E</span> shall be a constant expression of type <span class='texttt'>bool</span><a class='hidden_link' href='#constr.atomic-3.sentence-3'>.</a></div> <div id='constr.atomic-3.sentence-4' class='sentence'>The constraint is satisfied if and only if evaluation of <span class='texttt'>E</span>
results in <span class='texttt'>true</span><a class='hidden_link' href='#constr.atomic-3.sentence-4'>.</a></div> <div id='constr.atomic-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#constr.atomic-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C =
  sizeof(T) == 4 &amp;&amp; !true;      <span class='comment'>// requires atomic constraints <span class='tcode_in_codeblock'>sizeof(T) == 4</span> and <span class='tcode_in_codeblock'>!true</span>
</span>
template&lt;typename T&gt; struct S {
  constexpr operator bool() const { return true; }
};

template&lt;typename T&gt; requires (S&lt;T&gt;{})
void f(T);                      <span class='comment'>// #1
</span>void f(int);                    <span class='comment'>// #2
</span>
void g() {
  f(0);                         <span class='comment'>// error: expression <span class='tcode_in_codeblock'>S&lt;int&gt;{}</span> does not have type <span class='tcode_in_codeblock'>bool</span>
</span>}                               <span class='comment'>// while checking satisfaction of deduced arguments of #1;
</span>                                <span class='comment'>// call is ill-formed even though #2 is a better match
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='constr.decl' class='section'><h3 ><a class='secnum' href='#constr.decl' style='min-width:103pt'>17.4.2</a> Constrained declarations <a class='abbr_ref' href='temp.constr.decl'>[temp.constr.decl]</a></h3><div class='para' id='constr.decl-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.decl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1678'>#</a></div><div id='constr.decl-1.sentence-1' class='sentence'>A <a href='temp'>template declaration</a>
or <a href='dcl.fct'>function declaration</a>
can be constrained by the use of a <i ><a href='temp#nt:requires-clause'>requires-clause</a></i><a class='hidden_link' href='#constr.decl-1.sentence-1'>.</a></div> <div id='constr.decl-1.sentence-2' class='sentence'>This allows the specification of constraints for that declaration as
an expression:</div><pre class='bnf'><a class='nontermdef' href='#nt:constraint-expression' id='nt:constraint-expression'>constraint-expression:</a>
&#9;<i ><a href='expr.log.or#nt:logical-or-expression'>logical-or-expression</a></i>
</pre></div><div class='para' id='constr.decl-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.decl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1690'>#</a></div><div id='constr.decl-2.sentence-1' class='sentence'>Constraints can also be associated with a declaration through the use of
<i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i><span class='textit'>s</span> in a
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i><a class='hidden_link' href='#constr.decl-2.sentence-1'>.</a></div> <div id='constr.decl-2.sentence-2' class='sentence'>Each of these forms introduces additional <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><span class='textit'>s</span>
that are used to constrain the declaration<a class='hidden_link' href='#constr.decl-2.sentence-2'>.</a></div></div><div class='para' id='constr.decl-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.decl-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1697'>#</a></div><div id='constr.decl-3.sentence-1' class='sentence'>A template's <a class='hidden_link' href='#def:associated_constraints' id='def:associated_constraints'><i >associated constraints</i></a> are defined as follows:</div><div id='constr.decl-3.sentence-2' class='sentence'><ul class='itemize'><li id='constr.decl-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.decl-3.1'>(3.1)</a></div><div id='constr.decl-3.1.sentence-1' class='sentence'>If there are no introduced <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><span class='textit'>s</span>,
the declaration has no associated constraints<a class='hidden_link' href='#constr.decl-3.1.sentence-1'>.</a></div></li><li id='constr.decl-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.decl-3.2'>(3.2)</a></div><div id='constr.decl-3.2.sentence-1' class='sentence'>Otherwise, if there is a single introduced <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i>,
the associated constraints are the <a href='temp.constr.normal#def:normal_form'>normal form</a>
of that expression<a class='hidden_link' href='#constr.decl-3.2.sentence-1'>.</a></div></li><li id='constr.decl-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.decl-3.3'>(3.3)</a></div><div id='constr.decl-3.3.sentence-1' class='sentence'>Otherwise, the associated constraints are the normal form of a <a href='expr.log.and'>logical
AND expression</a> whose operands are in the
following order:</div><div id='constr.decl-3.3.sentence-2' class='sentence'><ul class='itemize'><li id='constr.decl-3.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#constr.decl-3.3.1'>(3.3.1)</a></div><div id='constr.decl-3.3.1.sentence-1' class='sentence'>the <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> introduced by each
<i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i> in the
declaration's <i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i>, in
order of appearance, and</div></li><li id='constr.decl-3.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#constr.decl-3.3.2'>(3.3.2)</a></div><div id='constr.decl-3.3.2.sentence-1' class='sentence'>the <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> introduced
by a <i ><a href='temp#nt:requires-clause'>requires-clause</a></i> following a
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i>, and</div></li><li id='constr.decl-3.3.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#constr.decl-3.3.3'>(3.3.3)</a></div><div id='constr.decl-3.3.3.sentence-1' class='sentence'>the <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> introduced by a trailing
<i ><a href='temp#nt:requires-clause'>requires-clause</a></i> (<a href='dcl.decl'>[dcl.decl]</a>)
of a <a href='dcl.fct'>function declaration</a><a class='hidden_link' href='#constr.decl-3.3.3.sentence-1'>.</a></div></li></ul></div></li></ul></div><div id='constr.decl-3.sentence-3' class='sentence'>The formation of the associated constraints
establishes the order in which constraints are instantiated when checking
for satisfaction (<a href='temp.constr.constr'>[temp.constr.constr]</a>)<a class='hidden_link' href='#constr.decl-3.sentence-3'>.</a></div> <div id='constr.decl-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#constr.decl-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C = true;

template&lt;C T&gt; void f1(T);
template&lt;typename T&gt; requires C&lt;T&gt; void f2(T);
template&lt;typename T&gt; void f3(T) requires C&lt;T&gt;;</pre> <div id='constr.decl-3.sentence-4' class='sentence'>
The functions <span class='texttt'>f1</span>, <span class='texttt'>f2</span>, and <span class='texttt'>f3</span> have the associated
constraint <span class='texttt'>C&lt;T&gt;</span><a class='hidden_link' href='#constr.decl-3.sentence-4'>.</a></div><pre class='codeblock'>
template&lt;typename T&gt; concept C1 = true;
template&lt;typename T&gt; concept C2 = sizeof(T) &gt; 0;

template&lt;C1 T&gt; void f4(T) requires C2&lt;T&gt;;
template&lt;typename T&gt; requires C1&lt;T&gt; &amp;&amp; C2&lt;T&gt; void f5(T);</pre> <div id='constr.decl-3.sentence-5' class='sentence'>
The associated constraints of <span class='texttt'>f4</span> and <span class='texttt'>f5</span>
are <span class='texttt'>C1&lt;T&gt; <span class='math'>∧</span> C2&lt;T&gt;</span><a class='hidden_link' href='#constr.decl-3.sentence-5'>.</a></div><pre class='codeblock'>
template&lt;C1 T&gt; requires C2&lt;T&gt; void f6();
template&lt;C2 T&gt; requires C1&lt;T&gt; void f7();</pre> <div id='constr.decl-3.sentence-6' class='sentence'>
The associated constraints of
<span class='texttt'>f6</span> are <span class='texttt'>C1&lt;T&gt; <span class='math'>∧</span> C2&lt;T&gt;</span>,
and those of
<span class='texttt'>f7</span> are <span class='texttt'>C2&lt;T&gt; <span class='math'>∧</span> C1&lt;T&gt;</span><a class='hidden_link' href='#constr.decl-3.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='constr.normal' class='section'><h3 ><a class='secnum' href='#constr.normal' style='min-width:103pt'>17.4.3</a> Constraint normalization <a class='abbr_ref' href='temp.constr.normal'>[temp.constr.normal]</a></h3><div class='para' id='constr.normal-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.normal-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1768'>#</a></div><div id='constr.normal-1.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:normal_form,constraint' id='def:normal_form,constraint'><i >normal form</i></a> of an <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='texttt'>E</span> is
a <a href='temp.constr.constr#def:constraint'>constraint</a> that is defined as follows:
<ul class='itemize'><li id='constr.normal-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.1'>(1.1)</a></div><div id='constr.normal-1.1.sentence-1' class='sentence'>The normal form of an expression <span class='texttt'>( E )</span> is
the normal form of <span class='texttt'>E</span><a class='hidden_link' href='#constr.normal-1.1.sentence-1'>.</a></div></li><li id='constr.normal-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.2'>(1.2)</a></div><div id='constr.normal-1.2.sentence-1' class='sentence'>The normal form of an expression <span class='texttt'>E1 || E2</span> is
the <a href='temp.constr.op#def:disjunction'>disjunction</a> of
the normal forms of <span class='texttt'>E1</span> and <span class='texttt'>E2</span><a class='hidden_link' href='#constr.normal-1.2.sentence-1'>.</a></div></li><li id='constr.normal-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.3'>(1.3)</a></div><div id='constr.normal-1.3.sentence-1' class='sentence'>The normal form of an expression <span class='texttt'>E1 &amp;&amp; E2</span>
is the conjunction of
the normal forms of <span class='texttt'>E1</span> and <span class='texttt'>E2</span><a class='hidden_link' href='#constr.normal-1.3.sentence-1'>.</a></div></li><li id='constr.normal-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.4'>(1.4)</a></div><div id='constr.normal-1.4.sentence-1' class='sentence'>The normal form of an <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> of the form
<span class='texttt'>C&lt;A<span class="mjx-chtml"><span class="mjx-math" aria-label="_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, A<span class="mjx-chtml"><span class="mjx-math" aria-label="_2"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>, ..., A<span class="mjx-chtml"><span class="mjx-math" aria-label="_n"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span>&gt;</span>, where <span class='texttt'>C</span> names a concept,
is the normal form of the <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> of <span class='texttt'>C</span>,
after substituting <span class='texttt'>A<span class="mjx-chtml"><span class="mjx-math" aria-label="_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, A<span class="mjx-chtml"><span class="mjx-math" aria-label="_2"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>, ..., A<span class="mjx-chtml"><span class="mjx-math" aria-label="_n"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span> for
<span class='texttt'>C</span>'s respective template parameters in the
parameter mappings in each atomic constraint<a class='hidden_link' href='#constr.normal-1.4.sentence-1'>.</a></div> <div id='constr.normal-1.4.sentence-2' class='sentence'>If any such substitution results in an invalid type or expression,
the program is ill-formed; no diagnostic is required<a class='hidden_link' href='#constr.normal-1.4.sentence-2'>.</a></div> <div id='constr.normal-1.4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#constr.normal-1.4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept A = T::value || true;
template&lt;typename U&gt; concept B = A&lt;U*&gt;;
template&lt;typename V&gt; concept C = B&lt;V&amp;&gt;;</pre> <div id='constr.normal-1.4.sentence-3' class='sentence'>
Normalization of <span class='texttt'>B</span>'s <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i>
is valid and results in
<span class='texttt'>T&#x200b;::&#x200b;value</span> (with the mapping <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label=" \mapsto {}\texttt{U*}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">↦</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.298em;">U*</span></span></span></span></span></span></span>)
<span class='math'>∨</span>
<span class='texttt'>true</span> (with an empty mapping),
despite the expression <span class='texttt'>T&#x200b;::&#x200b;value</span> being ill-formed
for a pointer type <span class='texttt'>T</span><a class='hidden_link' href='#constr.normal-1.4.sentence-3'>.</a></div> <div id='constr.normal-1.4.sentence-4' class='sentence'>Normalization of <span class='texttt'>C</span>'s <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i>
results in the program being ill-formed,
because it would form the invalid type <span class='texttt'>T&amp;*</span>
in the parameter mapping<a class='hidden_link' href='#constr.normal-1.4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='constr.normal-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.5'>(1.5)</a></div><div id='constr.normal-1.5.sentence-1' class='sentence'>The normal form of any other expression <span class='texttt'>E</span> is
the atomic constraint
whose expression is <span class='texttt'>E</span> and
whose parameter mapping is the identity mapping<a class='hidden_link' href='#constr.normal-1.5.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='constr.normal-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.normal-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1822'>#</a></div><div id='constr.normal-2.sentence-1' class='sentence'>The process of obtaining the normal form of a
<i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i>
is called
<a class='hidden_link' href='#def:constraint,normalization' id='def:constraint,normalization'><i >normalization</i></a><a class='hidden_link' href='#constr.normal-2.sentence-1'>.</a></div> <div id='constr.normal-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#constr.normal-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.normal-2.sentence-2' class='sentence'>Normalization of <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><span class='textit'>s</span>
is performed
when determining the associated constraints (<a href='temp.constr.constr'>[temp.constr.constr]</a>)
of a declaration
and
when evaluating the value of an <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
that names a concept specialization (<a href='expr.prim.id'>[expr.prim.id]</a>)<a class='hidden_link' href='#constr.normal-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='constr.normal-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.normal-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1838'>#</a></div><div id='constr.normal-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#constr.normal-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C1 = sizeof(T) == 1;
template&lt;typename T&gt; concept C2 = C1&lt;T&gt;() &amp;&amp; 1 == 2;
template&lt;typename T&gt; concept C3 = requires { typename T::type; };
template&lt;typename T&gt; concept C4 = requires (T x) { ++x; }

template&lt;C2 U&gt; void f1(U);      <span class='comment'>// #1
</span>template&lt;C3 U&gt; void f2(U);      <span class='comment'>// #2
</span>template&lt;C4 U&gt; void f3(U);      <span class='comment'>// #3
</span></pre> <div id='constr.normal-3.sentence-1' class='sentence'>
The associated constraints of #1 are
<span class='texttt'>sizeof(T) == 1</span> (with mapping <span class='texttt'>T</span><span class='math'>↦<span class='texttt'>U</span></span>) <span class='math'>∧</span> <span class='texttt'>1 == 2</span><a class='hidden_link' href='#constr.normal-3.sentence-1'>.</a></div> <div id='constr.normal-3.sentence-2' class='sentence'><br/>
The associated constraints of #2 are
<span class='texttt'>requires { typename T&#x200b;::&#x200b;type; }</span> (with mapping <span class='texttt'>T</span><span class='math'>↦<span class='texttt'>U</span></span>)<a class='hidden_link' href='#constr.normal-3.sentence-2'>.</a></div> <div id='constr.normal-3.sentence-3' class='sentence'><br/>
The associated constraints of #3 are
<span class='texttt'>requires (T x) { ++x; }</span> (with mapping <span class='texttt'>T</span><span class='math'>↦<span class='texttt'>U</span></span>)<a class='hidden_link' href='#constr.normal-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='constr.order' class='section'><h3 ><a class='secnum' href='#constr.order' style='min-width:103pt'>17.4.4</a> Partial ordering by constraints <a class='abbr_ref' href='temp.constr.order'>[temp.constr.order]</a></h3><div class='para' id='constr.order-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.order-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1861'>#</a></div><div id='constr.order-1.sentence-1' class='sentence'>A constraint <span class='math'><span class='mathalpha'>P</span></span> <a class='hidden_link' href='#def:constraint,subsumption' id='def:constraint,subsumption'><i >subsumes</i></a> a constraint <span class='math'><span class='mathalpha'>Q</span></span>
if and only if,
for every disjunctive clause <span class="mjx-chtml"><span class="mjx-math" aria-label="P_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
in the disjunctive normal form<a class='footnotenum' href='#footnote-139'>139</a>
of <span class='math'><span class='mathalpha'>P</span></span>, <span class="mjx-chtml"><span class="mjx-math" aria-label="P_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> subsumes every conjunctive clause <span class="mjx-chtml"><span class="mjx-math" aria-label="Q_j"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span>
in the conjuctive normal form<a class='footnotenum' href='#footnote-140'>140</a>
of <span class='math'><span class='mathalpha'>Q</span></span>, where</div><div id='constr.order-1.sentence-2' class='sentence'><ul class='itemize'><li id='constr.order-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-1.1'>(1.1)</a></div><div id='constr.order-1.1.sentence-1' class='sentence'>a disjunctive clause <span class="mjx-chtml"><span class="mjx-math" aria-label="P_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> subsumes a conjunctive clause <span class="mjx-chtml"><span class="mjx-math" aria-label="Q_j"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span> if and only
if there exists an atomic constraint <span class="mjx-chtml"><span class="mjx-math" aria-label="P_{ia}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">a</span></span></span></span></span></span></span></span></span> in <span class="mjx-chtml"><span class="mjx-math" aria-label="P_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> for which there exists
an atomic constraint <span class="mjx-chtml"><span class="mjx-math" aria-label="Q_{jb}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">b</span></span></span></span></span></span></span></span></span> in <span class="mjx-chtml"><span class="mjx-math" aria-label="Q_j"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span> such that <span class="mjx-chtml"><span class="mjx-math" aria-label="P_{ia}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">a</span></span></span></span></span></span></span></span></span> subsumes <span class="mjx-chtml"><span class="mjx-math" aria-label="Q_{jb}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">b</span></span></span></span></span></span></span></span></span>, and</div></li><li id='constr.order-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-1.2'>(1.2)</a></div><div id='constr.order-1.2.sentence-1' class='sentence'>an atomic constraint <span class='math'><span class='mathalpha'>A</span></span> subsumes another atomic constraint
<span class='math'><span class='mathalpha'>B</span></span> if and only if the <span class='math'><span class='mathalpha'>A</span></span> and <span class='math'><span class='mathalpha'>B</span></span> are identical using the
rules described in <a href='temp.constr.atomic'>[temp.constr.atomic]</a><a class='hidden_link' href='#constr.order-1.2.sentence-1'>.</a></div></li></ul></div> <div id='constr.order-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#constr.order-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='constr.order-1.sentence-3' class='sentence'>Let <span class='math'><span class='mathalpha'>A</span></span> and <span class='math'><span class='mathalpha'>B</span></span> be <a href='temp.constr.atomic#def:atomic_constraint'>atomic constraints</a><a class='hidden_link' href='#constr.order-1.sentence-3'>.</a></div> <div id='constr.order-1.sentence-4' class='sentence'>The constraint <span class="mjx-chtml"><span class="mjx-math" aria-label="A \land {}B"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span> subsumes <span class='math'><span class='mathalpha'>A</span></span>, but <span class='math'><span class='mathalpha'>A</span></span> does not subsume <span class="mjx-chtml"><span class="mjx-math" aria-label="A \land {}B"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span><a class='hidden_link' href='#constr.order-1.sentence-4'>.</a></div> <div id='constr.order-1.sentence-5' class='sentence'>The constraint <span class='math'><span class='mathalpha'>A</span></span> subsumes <span class="mjx-chtml"><span class="mjx-math" aria-label="A \lor {}B"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span>, but <span class="mjx-chtml"><span class="mjx-math" aria-label="A \lor {}B"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span> does not subsume <span class='math'><span class='mathalpha'>A</span></span><a class='hidden_link' href='#constr.order-1.sentence-5'>.</a></div> <div id='constr.order-1.sentence-6' class='sentence'>Also note that every constraint subsumes itself<a class='hidden_link' href='#constr.order-1.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='constr.order-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.order-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1912'>#</a></div><div id='constr.order-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#constr.order-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.order-2.sentence-1' class='sentence'>The subsumption relation defines a partial ordering on constraints<a class='hidden_link' href='#constr.order-2.sentence-1'>.</a></div> <div id='constr.order-2.sentence-2' class='sentence'>This partial ordering is used to determine</div><div id='constr.order-2.sentence-3' class='sentence'><ul class='itemize'><li id='constr.order-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.1'>(2.1)</a></div><div id='constr.order-2.1.sentence-1' class='sentence'>the best viable candidate of non-template functions (<a href='over.match.best'>[over.match.best]</a>),</div></li><li id='constr.order-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.2'>(2.2)</a></div><div id='constr.order-2.2.sentence-1' class='sentence'>the address of a non-template function (<a href='over.over'>[over.over]</a>),</div></li><li id='constr.order-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.3'>(2.3)</a></div><div id='constr.order-2.3.sentence-1' class='sentence'>the matching of <a href='temp.arg.template'>template template arguments</a>,</div></li><li id='constr.order-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.4'>(2.4)</a></div><div id='constr.order-2.4.sentence-1' class='sentence'>the <a href='temp.class.order'>partial ordering of class template specializations</a>, and</div></li><li id='constr.order-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.5'>(2.5)</a></div><div id='constr.order-2.5.sentence-1' class='sentence'>the <a href='temp.func.order'>partial ordering of function templates</a><a class='hidden_link' href='#constr.order-2.5.sentence-1'>.</a></div></li></ul></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='constr.order-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.order-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1929'>#</a></div><div id='constr.order-3.sentence-1' class='sentence'>A declaration <span class='texttt'>D1</span> is
<a class='hidden_link' href='#def:at_least_as_constrained' id='def:at_least_as_constrained'><i >at least as constrained</i></a> as
a declaration <span class='texttt'>D2</span> if</div><div id='constr.order-3.sentence-2' class='sentence'><ul class='itemize'><li id='constr.order-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-3.1'>(3.1)</a></div><div id='constr.order-3.1.sentence-1' class='sentence'><span class='texttt'>D1</span> and <span class='texttt'>D2</span> are both constrained declarations and
<span class='texttt'>D1</span>'s associated constraints subsume those of <span class='texttt'>D2</span>; or</div></li><li id='constr.order-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-3.2'>(3.2)</a></div><div id='constr.order-3.2.sentence-1' class='sentence'><span class='texttt'>D2</span> has no associated constraints<a class='hidden_link' href='#constr.order-3.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='constr.order-4'><div class='marginalizedparent'><a class='marginalized' href='#constr.order-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1941'>#</a></div><div id='constr.order-4.sentence-1' class='sentence'>A declaration <span class='texttt'>D1</span> is <a class='hidden_link' href='#def:more_constrained' id='def:more_constrained'><i >more constrained</i></a>
than another declaration <span class='texttt'>D2</span> when <span class='texttt'>D1</span> is at least as
constrained as <span class='texttt'>D2</span>, and <span class='texttt'>D2</span> is not at least as
constrained as <span class='texttt'>D1</span><a class='hidden_link' href='#constr.order-4.sentence-1'>.</a></div> <div id='constr.order-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#constr.order-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C1 = requires(T t) { --t; };
template&lt;typename T&gt; concept C2 = C1&lt;T&gt; &amp;&amp; requires(T t) { *t; };

template&lt;C1 T&gt; void f(T);       <span class='comment'>// #1
</span>template&lt;C2 T&gt; void f(T);       <span class='comment'>// #2
</span>template&lt;typename T&gt; void g(T); <span class='comment'>// #3
</span>template&lt;C1 T&gt; void g(T);       <span class='comment'>// #4
</span>
f(0);                           <span class='comment'>// selects #1
</span>f((int*)0);                     <span class='comment'>// selects #2
</span>g(true);                        <span class='comment'>// selects #3 because <span class='tcode_in_codeblock'>C1&lt;bool&gt;</span> is not satisfied
</span>g(0);                           <span class='comment'>// selects #4
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-139'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-139'>139)</a></div><div id='footnote-139.sentence-1' class='sentence'>A constraint is in disjunctive normal form when it is a disjunction of
clauses where each clause is a conjunction of atomic constraints<a class='hidden_link' href='#footnote-139.sentence-1'>.</a></div> <div id='footnote-139.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#footnote-139.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='footnote-139.sentence-2' class='sentence'>For atomic constraints <span class='math'><span class='mathalpha'>A</span></span>, <span class='math'><span class='mathalpha'>B</span></span>, and <span class='math'><span class='mathalpha'>C</span></span>, the disjunctive normal form
of the constraint
<span class="mjx-chtml"><span class="mjx-math" aria-label="A \land {}(B \lor {}C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>
is
<span class="mjx-chtml"><span class="mjx-math" aria-label="(A \land {}B) \lor {}(A \land {}C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#footnote-139.sentence-2'>.</a></div> <div id='footnote-139.sentence-3' class='sentence'>Its disjunctive clauses are <span class="mjx-chtml"><span class="mjx-math" aria-label="(A \land {}B)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math" aria-label="(A \land {}C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#footnote-139.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-140'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-140'>140)</a></div><div id='footnote-140.sentence-1' class='sentence'>A constraint is in conjunctive normal form when it is a conjunction
of clauses where each clause is a disjunction of atomic constraints<a class='hidden_link' href='#footnote-140.sentence-1'>.</a></div> <div id='footnote-140.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#footnote-140.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='footnote-140.sentence-2' class='sentence'>For atomic constraints <span class='math'><span class='mathalpha'>A</span></span>, <span class='math'><span class='mathalpha'>B</span></span>, and <span class='math'><span class='mathalpha'>C</span></span>, the constraint
<span class="mjx-chtml"><span class="mjx-math" aria-label="A \land {}(B \lor {}C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is in conjunctive normal form<a class='hidden_link' href='#footnote-140.sentence-2'>.</a></div> <div id='footnote-140.sentence-3' class='sentence'>Its conjunctive clauses are <span class='math'><span class='mathalpha'>A</span></span> and <span class="mjx-chtml"><span class="mjx-math" aria-label="(B \lor {}C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#footnote-140.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='type' class='section'><h2 ><a class='secnum' href='#type' style='min-width:88pt'>17.5</a> Type equivalence <a class='abbr_ref' href='temp.type'>[temp.type]</a></h2><div class='para' id='type-1'><div class='marginalizedparent'><a class='marginalized' href='#type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L1965'>#</a></div><div id='type-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':equivalence,template_type'></a></span>Two <i ><a href='temp.names#nt:template-id'>template-id</a></i><span class='textit'>s</span> refer to the same
class, function, or variable if
<ul class='itemize'><li id='type-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.1'>(1.1)</a></div><div id='type-1.1.sentence-1' class='sentence'>their <i ><a href='temp.names#nt:template-name'>template-name</a></i><span class='textit'>s</span>,
<i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i><span class='textit'>s</span>, or <i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i><span class='textit'>s</span>
refer to the same template and</div></li><li id='type-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.2'>(1.2)</a></div><div id='type-1.2.sentence-1' class='sentence'>their corresponding type <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span> are the
same type and</div></li><li id='type-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.3'>(1.3)</a></div><div id='type-1.3.sentence-1' class='sentence'>their corresponding non-type
template arguments of
integral or enumeration type have identical values and</div></li><li id='type-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.4'>(1.4)</a></div><div id='type-1.4.sentence-1' class='sentence'>their corresponding non-type <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span> of
pointer type refer to the same object or function or are both the null
pointer value and</div></li><li id='type-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.5'>(1.5)</a></div><div id='type-1.5.sentence-1' class='sentence'>their corresponding non-type <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span> of
pointer-to-member type refer to the same class member or are both the null member
pointer value and</div></li><li id='type-1.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.6'>(1.6)</a></div><div id='type-1.6.sentence-1' class='sentence'>their corresponding non-type <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span> of
reference type refer to the same object or function and</div></li><li id='type-1.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.7'>(1.7)</a></div><div id='type-1.7.sentence-1' class='sentence'>their corresponding template <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span> refer
to the same template.</div></li></ul>
<div id='type-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#type-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class E, int size&gt; class buffer { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
buffer&lt;char,2*512&gt; x;
buffer&lt;char,1024&gt; y;</pre><div id='type-1.sentence-2' class='sentence'>declares
<span class='texttt'>x</span>
and
<span class='texttt'>y</span>
to be of the same type, and</div><pre class='codeblock'>
template&lt;class T, void(*err_fct)()&gt; class list { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
list&lt;int,&amp;error_handler1&gt; x1;
list&lt;int,&amp;error_handler2&gt; x2;
list&lt;int,&amp;error_handler2&gt; x3;
list&lt;char,&amp;error_handler2&gt; x4;</pre><div id='type-1.sentence-3' class='sentence'>declares
<span class='texttt'>x2</span>
and
<span class='texttt'>x3</span>
to be of the same type<a class='hidden_link' href='#type-1.sentence-3'>.</a></div> <div id='type-1.sentence-4' class='sentence'>Their type differs from the types of
<span class='texttt'>x1</span>
and
<span class='texttt'>x4</span><a class='hidden_link' href='#type-1.sentence-4'>.</a></div><pre class='codeblock'>
template&lt;class T&gt; struct X { };
template&lt;class&gt; struct Y { };
template&lt;class T&gt; using Z = Y&lt;T&gt;;
X&lt;Y&lt;int&gt; &gt; y;
X&lt;Z&lt;int&gt; &gt; z;</pre><div id='type-1.sentence-5' class='sentence'>declares <span class='texttt'>y</span> and <span class='texttt'>z</span> to be of the same type<a class='hidden_link' href='#type-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='type-2'><div class='marginalizedparent'><a class='marginalized' href='#type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2032'>#</a></div><div id='type-2.sentence-1' class='sentence'>If an expression <span class='math'><span class='mathalpha'>e</span></span> is <a href='temp.dep.expr'>type-dependent</a>,
<span class='texttt'>decltype(<span class='math'><span class='mathalpha'>e</span></span>)</span>
denotes a unique dependent type<a class='hidden_link' href='#type-2.sentence-1'>.</a></div> <div id='type-2.sentence-2' class='sentence'>Two such <i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i><span class='textit'>s</span>
refer to the same type only if their <i ><a href='expr.comma#nt:expression'>expression</a></i><span class='textit'>s</span> are
equivalent (<a href='temp.over.link'>[temp.over.link]</a>)<a class='hidden_link' href='#type-2.sentence-2'>.</a></div> <div id='type-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#type-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='type-2.sentence-3' class='sentence'>However, such a type may be aliased,
e.g., by a <i ><a href='dcl.typedef#nt:typedef-name'>typedef-name</a></i><a class='hidden_link' href='#type-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='decls' class='section'><h2 ><a class='secnum' href='#decls' style='min-width:88pt'>17.6</a> Template declarations <a class='abbr_ref' href='temp.decls'>[temp.decls]</a></h2><div class='para' id='decls-1'><div class='marginalizedparent'><a class='marginalized' href='#decls-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2043'>#</a></div><div id='decls-1.sentence-1' class='sentence'>A
<i ><a href='temp.names#nt:template-id'>template-id</a></i>,
that is, the
<i ><a href='temp.names#nt:template-name'>template-name</a></i>
followed by a
<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>
shall not be specified in the declaration of a primary template declaration<a class='hidden_link' href='#decls-1.sentence-1'>.</a></div> <div id='decls-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#decls-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T1, class T2, int I&gt; class A&lt;T1, T2, I&gt; { };     <span class='comment'>// error
</span>template&lt;class T1, int I&gt; void sort&lt;T1, I&gt;(T1 data[I]);         <span class='comment'>// error
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='decls-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#decls-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='decls-1.sentence-2' class='sentence'>However, this syntax is allowed in <a href='temp.class.spec'>class template partial specializations</a><a class='hidden_link' href='#decls-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='decls-2'><div class='marginalizedparent'><a class='marginalized' href='#decls-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2062'>#</a></div><div id='decls-2.sentence-1' class='sentence'>For purposes of name lookup and instantiation,
default arguments,
<i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i><span class='textit'>s</span>,
<i ><a href='temp#nt:requires-clause'>requires-clause</a></i><span class='textit'>s</span>,
and
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><span class='textit'>s</span>
of function templates
and
of member functions of class templates
are considered definitions;
each
default argument,
<i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i><span class='textit'>s</span>,
<i ><a href='temp#nt:requires-clause'>requires-clause</a></i>,
or
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i>
is a separate definition
which is unrelated
to the templated function definition or
to any other
default arguments
<i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i><span class='textit'>s</span>,
<i ><a href='temp#nt:requires-clause'>requires-clause</a></i><span class='textit'>s</span>,
or
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><span class='textit'>s</span><a class='hidden_link' href='#decls-2.sentence-1'>.</a></div> <div id='decls-2.sentence-2' class='sentence'>For the purpose of instantiation, the substatements of a
<a href='stmt.if#def:constexpr_if'>constexpr if</a> statement are considered definitions<a class='hidden_link' href='#decls-2.sentence-2'>.</a></div></div><div class='para' id='decls-3'><div class='marginalizedparent'><a class='marginalized' href='#decls-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2091'>#</a></div><div id='decls-3.sentence-1' class='sentence'>Because an <i ><a href='dcl.dcl#nt:alias-declaration'>alias-declaration</a></i> cannot declare a
<i ><a href='temp.names#nt:template-id'>template-id</a></i>, it is not possible to partially or
explicitly specialize an alias template<a class='hidden_link' href='#decls-3.sentence-1'>.</a></div></div><div id='class' class='section'><h3 ><a class='secnum' href='#class' style='min-width:103pt'>17.6.1</a> Class templates <a class='abbr_ref' href='temp.class'>[temp.class]</a></h3><div class='para' id='class-1'><div class='marginalizedparent'><a class='marginalized' href='#class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2098'>#</a></div><div id='class-1.sentence-1' class='sentence'>A
<a class='hidden_link' href='#def:template,class' id='def:template,class'><i >class template</i></a>
defines the layout and operations
for an unbounded set of related types<a class='hidden_link' href='#class-1.sentence-1'>.</a></div></div><div class='para' id='class-2'><div class='marginalizedparent'><a class='marginalized' href='#class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2104'>#</a></div><div id='class-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class-2.sentence-1' class='sentence'>A single class template
<span class='texttt'>List</span>
might provide an unbounded set of class definitions:
one class <span class='texttt'>List&lt;T&gt;</span> for every type <span class='texttt'>T</span>,
each describing a linked list of elements of type <span class='texttt'>T</span><a class='hidden_link' href='#class-2.sentence-1'>.</a></div> <div id='class-2.sentence-2' class='sentence'>Similarly, a class template <span class='texttt'>Array</span> describing a contiguous,
dynamic array might be defined like this:
<pre class='codeblock'>
template&lt;class T&gt; class Array {
  T* v;
  int sz;
public:
  explicit Array(int);
  T&amp; operator[](int);
  T&amp; elem(int i) { return v[i]; }
};</pre>
The prefix <span class='texttt'>template&lt;class T&gt;</span>
specifies that a template is being declared and that a
<i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>
<span class='texttt'>T</span>
may be used in the declaration<a class='hidden_link' href='#class-2.sentence-2'>.</a></div> <div id='class-2.sentence-3' class='sentence'>In other words,
<span class='texttt'>Array</span>
is a parameterized type with
<span class='texttt'>T</span>
as its parameter<a class='hidden_link' href='#class-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class-3'><div class='marginalizedparent'><a class='marginalized' href='#class-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2135'>#</a></div><div id='class-3.sentence-1' class='sentence'>When a member function, a member class, a member enumeration, a static data member or
a member template of a class
template is defined outside of the class template definition,
the member definition is defined as a template definition in which the
<i ><a href='temp#nt:template-head'>template-head</a></i> is equivalent to that
of the class template (<a href='temp.over.link'>[temp.over.link]</a>)<a class='hidden_link' href='#class-3.sentence-1'>.</a></div> <div id='class-3.sentence-2' class='sentence'>The names of the template parameters used in the definition of the member may
be different from the template parameter names used in the class
template definition<a class='hidden_link' href='#class-3.sentence-2'>.</a></div> <div id='class-3.sentence-3' class='sentence'>The template argument list following the class template name in the member
definition shall name the parameters in the same order as the one used in
the template parameter list of the member<a class='hidden_link' href='#class-3.sentence-3'>.</a></div> <div id='class-3.sentence-4' class='sentence'>Each template
parameter pack shall be expanded with an ellipsis in the template
argument list<a class='hidden_link' href='#class-3.sentence-4'>.</a></div> <div id='class-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T1, class T2&gt; struct A {
  void f1();
  void f2();
};

template&lt;class T2, class T1&gt; void A&lt;T2,T1&gt;::f1() { }    <span class='comment'>// OK
</span>template&lt;class T2, class T1&gt; void A&lt;T1,T2&gt;::f2() { }    <span class='comment'>// error
</span></pre><pre class='codeblock'>
template&lt;class ... Types&gt; struct B {
  void f3();
  void f4();
};

template&lt;class ... Types&gt; void B&lt;Types ...&gt;::f3() { }   <span class='comment'>// OK
</span>template&lt;class ... Types&gt; void B&lt;Types&gt;::f4() { }       <span class='comment'>// error
</span></pre><pre class='codeblock'>
template&lt;typename T&gt; concept C = true;
template&lt;typename T&gt; concept D = true;

template&lt;C T&gt; struct S {
  void f();
  void g();
  void h();
  template&lt;D U&gt; struct Inner;
};

template&lt;C A&gt; void S&lt;A&gt;::f() { }        <span class='comment'>// OK: <span class='grammarterm'>template-head</span><span class='textit'>s</span> match
</span>template&lt;typename T&gt; void S&lt;T&gt;::g() { } <span class='comment'>// error: no matching declaration for <span class='tcode_in_codeblock'>S&lt;T&gt;</span>
</span>
template&lt;typename T&gt; requires C&lt;T&gt;      <span class='comment'>// error (no diagnostic required): <span class='grammarterm'>template-head</span><span class='textit'>s</span> are
</span>void S&lt;T&gt;::h() { }                      <span class='comment'>// functionally equivalent but not equivalent
</span>
template&lt;C X&gt; template&lt;D Y&gt;
struct S&lt;X&gt;::Inner { };                 <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class-4'><div class='marginalizedparent'><a class='marginalized' href='#class-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2193'>#</a></div><div id='class-4.sentence-1' class='sentence'>In a redeclaration, partial
specialization,
explicit specialization or explicit
instantiation of a class template, the
<i ><a href='class#nt:class-key'>class-key</a></i>
shall agree in kind with the original class template declaration (<a href='dcl.type.elab'>[dcl.type.elab]</a>)<a class='hidden_link' href='#class-4.sentence-1'>.</a></div></div><div id='mem.func' class='section'><h4 ><a class='secnum' href='#mem.func' style='min-width:118pt'>17.6.1.1</a> Member functions of class templates <a class='abbr_ref' href='temp.mem.func'>[temp.mem.func]</a></h4><div class='para' id='mem.func-1'><div class='marginalizedparent'><a class='marginalized' href='#mem.func-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2203'>#</a></div><div id='mem.func-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':template,member_function'></a></span>A member function
of a class template
may be defined outside of the class
template definition in which it is declared<a class='hidden_link' href='#mem.func-1.sentence-1'>.</a></div> <div id='mem.func-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem.func-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class Array {
  T* v;
  int sz;
public:
  explicit Array(int);
  T&amp; operator[](int);
  T&amp; elem(int i) { return v[i]; }
};</pre><div id='mem.func-1.sentence-2' class='sentence'>declares three function templates<a class='hidden_link' href='#mem.func-1.sentence-2'>.</a></div> <div id='mem.func-1.sentence-3' class='sentence'>The subscript function might be defined like this:</div><pre class='codeblock'>
template&lt;class T&gt; T&amp; Array&lt;T&gt;::operator[](int i) {
  if (i&lt;0 || sz&lt;=i) error("Array: range error");
  return v[i];
}</pre><div id='mem.func-1.sentence-4' class='sentence'>A constrained member function can be defined out of line:
<pre class='codeblock'>
template&lt;typename T&gt; concept C = requires {
  typename T::type;
};

template&lt;typename T&gt; struct S {
  void f() requires C&lt;T&gt;;
  void g() requires C&lt;T&gt;;
};

template&lt;typename T&gt;
  void S&lt;T&gt;::f() requires C&lt;T&gt; { }      <span class='comment'>// OK
</span>template&lt;typename T&gt;
  void S&lt;T&gt;::g() { }                    <span class='comment'>// error: no matching function in <span class='tcode_in_codeblock'>S&lt;T&gt;</span>
</span></pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem.func-2'><div class='marginalizedparent'><a class='marginalized' href='#mem.func-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2250'>#</a></div><div id='mem.func-2.sentence-1' class='sentence'>The
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
for a member function of a class template are determined by the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
of the type of the object for which the member function is called<a class='hidden_link' href='#mem.func-2.sentence-1'>.</a></div> <div id='mem.func-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem.func-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='mem.func-2.sentence-2' class='sentence'>The
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
for
<span class='texttt'>Array&lt;T&gt;&#x200b;::&#x200b;operator[]()</span>
will be determined by the
<span class='texttt'>Array</span>
to which the subscripting operation is applied<a class='hidden_link' href='#mem.func-2.sentence-2'>.</a></div><pre class='codeblock'>
Array&lt;int&gt; v1(20);
Array&lt;dcomplex&gt; v2(30);

v1[3] = 7;                              <span class='comment'>// <span class='tcode_in_codeblock'>Array&lt;int&gt;&#x200b;::&#x200b;operator[]()</span>
</span>v2[3] = dcomplex(7,8);                  <span class='comment'>// <span class='tcode_in_codeblock'>Array&lt;dcomplex&gt;&#x200b;::&#x200b;operator[]()</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='mem.class' class='section'><h4 ><a class='secnum' href='#mem.class' style='min-width:118pt'>17.6.1.2</a> Member classes of class templates <a class='abbr_ref' href='temp.mem.class'>[temp.mem.class]</a></h4><div class='para' id='mem.class-1'><div class='marginalizedparent'><a class='marginalized' href='#mem.class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2276'>#</a></div><div id='mem.class-1.sentence-1' class='sentence'>A member class of a class template may be defined outside the class template
definition in which it is declared<a class='hidden_link' href='#mem.class-1.sentence-1'>.</a></div> <div id='mem.class-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem.class-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem.class-1.sentence-2' class='sentence'>The member class must be defined before its first use that requires
an instantiation (<a href='temp.inst'>[temp.inst]</a>)<a class='hidden_link' href='#mem.class-1.sentence-2'>.</a></div> <div id='mem.class-1.sentence-3' class='sentence'>For example,</div><pre class='codeblock'>
template&lt;class T&gt; struct A {
  class B;
};
A&lt;int&gt;::B* b1;                          <span class='comment'>// OK: requires <span class='tcode_in_codeblock'>A</span> to be defined but not <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span>
</span>template&lt;class T&gt; class A&lt;T&gt;::B { };
A&lt;int&gt;::B  b2;                          <span class='comment'>// OK: requires <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> to be defined
</span></pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='static' class='section'><h4 ><a class='secnum' href='#static' style='min-width:118pt'>17.6.1.3</a> Static data members of class templates <a class='abbr_ref' href='temp.static'>[temp.static]</a></h4><div class='para' id='static-1'><div class='marginalizedparent'><a class='marginalized' href='#static-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2296'>#</a></div><div id='static-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member,template_and_static'></a></span>A definition for a static data member or static data member template may be
provided in a namespace scope enclosing the definition of the static member's
class template<a class='hidden_link' href='#static-1.sentence-1'>.</a></div> <div id='static-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#static-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class X {
  static T s;
};
template&lt;class T&gt; T X&lt;T&gt;::s = 0;

struct limits {
  template&lt;class T&gt;
    static const T min;                 <span class='comment'>// declaration
</span>};

template&lt;class T&gt;
  const T limits::min = { };            <span class='comment'>// definition
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='static-2'><div class='marginalizedparent'><a class='marginalized' href='#static-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2319'>#</a></div><div id='static-2.sentence-1' class='sentence'>An explicit specialization of a static data member declared as an array of unknown
bound can have a different bound from its definition, if any<a class='hidden_link' href='#static-2.sentence-1'>.</a></div> <div id='static-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#static-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct A {
  static int i[];
};
template &lt;class T&gt; int A&lt;T&gt;::i[4];      <span class='comment'>// 4 elements
</span>template &lt;&gt; int A&lt;int&gt;::i[] = { 1 };    <span class='comment'>// OK: 1 element
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='mem.enum' class='section'><h4 ><a class='secnum' href='#mem.enum' style='min-width:118pt'>17.6.1.4</a> Enumeration members of class templates <a class='abbr_ref' href='temp.mem.enum'>[temp.mem.enum]</a></h4><div class='para' id='mem.enum-1'><div class='marginalizedparent'><a class='marginalized' href='#mem.enum-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2334'>#</a></div><div id='mem.enum-1.sentence-1' class='sentence'>An enumeration member of a class template may be defined outside the class
template definition<a class='hidden_link' href='#mem.enum-1.sentence-1'>.</a></div> <div id='mem.enum-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem.enum-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  enum E : T;
};
A&lt;int&gt; a;
template&lt;class T&gt; enum A&lt;T&gt;::E : T { e1, e2 };
A&lt;int&gt;::E e = A&lt;int&gt;::e1;</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='mem' class='section'><h3 ><a class='secnum' href='#mem' style='min-width:103pt'>17.6.2</a> Member templates <a class='abbr_ref' href='temp.mem'>[temp.mem]</a></h3><div class='para' id='mem-1'><div class='marginalizedparent'><a class='marginalized' href='#mem-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2350'>#</a></div><div id='mem-1.sentence-1' class='sentence'>A template can be declared within a class or class template; such a template
is called a member template<a class='hidden_link' href='#mem-1.sentence-1'>.</a></div> <div id='mem-1.sentence-2' class='sentence'>A member template can be defined within or outside its class definition or
class template definition<a class='hidden_link' href='#mem-1.sentence-2'>.</a></div> <div id='mem-1.sentence-3' class='sentence'>A member template of a class template that is defined outside of its class
template definition shall be specified with
a <i ><a href='temp#nt:template-head'>template-head</a></i> equivalent to that
of the class template followed by
a <i ><a href='temp#nt:template-head'>template-head</a></i> equivalent to that
of the member template (<a href='temp.over.link'>[temp.over.link]</a>)<a class='hidden_link' href='#mem-1.sentence-3'>.</a></div> <div id='mem-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct string {
  template&lt;class T2&gt; int compare(const T2&amp;);
  template&lt;class T2&gt; string(const string&lt;T2&gt;&amp; s) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
};

template&lt;class T&gt; template&lt;class T2&gt; int string&lt;T&gt;::compare(const T2&amp; s) {
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='mem-1.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-1.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C1 = true;
template&lt;typename T&gt; concept C2 = sizeof(T) &lt;= 4;

template&lt;C1 T&gt; struct S {
  template&lt;C2 U&gt; void f(U);
  template&lt;C2 U&gt; void g(U);
};

template&lt;C1 T&gt; template&lt;C2 U&gt;
void S&lt;T&gt;::f(U) { }             <span class='comment'>// OK
</span>template&lt;C1 T&gt; template&lt;typename U&gt;
void S&lt;T&gt;::g(U) { }             <span class='comment'>// error: no matching function in <span class='tcode_in_codeblock'>S&lt;T&gt;</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-2'><div class='marginalizedparent'><a class='marginalized' href='#mem-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2389'>#</a></div><div id='mem-2.sentence-1' class='sentence'>A local class of non-closure type shall not have member templates<a class='hidden_link' href='#mem-2.sentence-1'>.</a></div> <div id='mem-2.sentence-2' class='sentence'><a href='class.access'>Access control rules</a>
apply to member template names<a class='hidden_link' href='#mem-2.sentence-2'>.</a></div> <div id='mem-2.sentence-3' class='sentence'>A destructor shall not be a member
template<a class='hidden_link' href='#mem-2.sentence-3'>.</a></div> <div id='mem-2.sentence-4' class='sentence'>A non-template member function (<a href='dcl.fct'>[dcl.fct]</a>) with a given name
and type and a member function template of the same name, which could be
used to generate a specialization of the same type, can both be
declared in a class<a class='hidden_link' href='#mem-2.sentence-4'>.</a></div> <div id='mem-2.sentence-5' class='sentence'>When both exist, a use of that name and type refers to the
non-template member unless an explicit template argument list is supplied<a class='hidden_link' href='#mem-2.sentence-5'>.</a></div> <div id='mem-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct A {
  void f(int);
  template &lt;class T2&gt; void f(T2);
};

template &lt;&gt; void A&lt;int&gt;::f(int) { }                 <span class='comment'>// non-template member function
</span>template &lt;&gt; template &lt;&gt; void A&lt;int&gt;::f&lt;&gt;(int) { }   <span class='comment'>// member function template specialization
</span>
int main() {
  A&lt;char&gt; ac;
  ac.f(1);                                          <span class='comment'>// non-template
</span>  ac.f('c');                                        <span class='comment'>// template
</span>  ac.f&lt;&gt;(1);                                        <span class='comment'>// template
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-3'><div class='marginalizedparent'><a class='marginalized' href='#mem-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2420'>#</a></div><div id='mem-3.sentence-1' class='sentence'>A member function template shall not be virtual<a class='hidden_link' href='#mem-3.sentence-1'>.</a></div> <div id='mem-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct AA {
  template &lt;class C&gt; virtual void g(C);             <span class='comment'>// error
</span>  virtual void f();                                 <span class='comment'>// OK
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-4'><div class='marginalizedparent'><a class='marginalized' href='#mem-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2432'>#</a></div><div id='mem-4.sentence-1' class='sentence'>A specialization of
a member function template does not override a virtual function from a
base class<a class='hidden_link' href='#mem-4.sentence-1'>.</a></div> <div id='mem-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B {
  virtual void f(int);
};

class D : public B {
  template &lt;class T&gt; void f(T); <span class='comment'>// does not override <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f(int)</span>
</span>  void f(int i) { f&lt;&gt;(i); }     <span class='comment'>// overriding function that calls the template instantiation
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-5'><div class='marginalizedparent'><a class='marginalized' href='#mem-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2449'>#</a></div><div id='mem-5.sentence-1' class='sentence'>A specialization of a
conversion function template
is referenced in
the same way as a non-template conversion function that converts to
the same type<a class='hidden_link' href='#mem-5.sentence-1'>.</a></div> <div id='mem-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  template &lt;class T&gt; operator T*();
};
template &lt;class T&gt; A::operator T*(){ return 0; }
template &lt;&gt; A::operator char*(){ return 0; }        <span class='comment'>// specialization
</span>template A::operator void*();                       <span class='comment'>// explicit instantiation
</span>
int main() {
  A a;
  int* ip;
  ip = a.operator int*();       <span class='comment'>// explicit call to template operator <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;operator int*()</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='mem-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-5.sentence-2' class='sentence'>Because the explicit template argument list follows the function template
name, and because conversion member function templates and constructor
member function templates are called without using a function name,
there is no way to provide an explicit template argument list for these
function templates<a class='hidden_link' href='#mem-5.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-6'><div class='marginalizedparent'><a class='marginalized' href='#mem-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2480'>#</a></div><div id='mem-6.sentence-1' class='sentence'>A specialization of a
conversion function template
is not found by name
lookup<a class='hidden_link' href='#mem-6.sentence-1'>.</a></div> <div id='mem-6.sentence-2' class='sentence'>Instead, any
conversion function templates
visible in the
context of the use are considered<a class='hidden_link' href='#mem-6.sentence-2'>.</a></div> <div id='mem-6.sentence-3' class='sentence'>For each such operator, if argument
deduction succeeds (<a href='temp.deduct.conv'>[temp.deduct.conv]</a>), the resulting specialization is
used as if found by name lookup<a class='hidden_link' href='#mem-6.sentence-3'>.</a></div></div><div class='para' id='mem-7'><div class='marginalizedparent'><a class='marginalized' href='#mem-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2493'>#</a></div><div id='mem-7.sentence-1' class='sentence'>A <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i> in a derived class cannot refer to a specialization
of a
conversion function template
in a base class<a class='hidden_link' href='#mem-7.sentence-1'>.</a></div></div><div class='para' id='mem-8'><div class='marginalizedparent'><a class='marginalized' href='#mem-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2499'>#</a></div><div id='mem-8.sentence-1' class='sentence'><a href='over.ics.rank'>Overload resolution</a> and <a href='temp.func.order'>partial
ordering</a> are used to select the best conversion function
among multiple
specializations of conversion function templates
and/or non-template
conversion functions<a class='hidden_link' href='#mem-8.sentence-1'>.</a></div></div></div><div id='variadic' class='section'><h3 ><a class='secnum' href='#variadic' style='min-width:103pt'>17.6.3</a> Variadic templates <a class='abbr_ref' href='temp.variadic'>[temp.variadic]</a></h3><div class='para' id='variadic-1'><div class='marginalizedparent'><a class='marginalized' href='#variadic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2509'>#</a></div><div id='variadic-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:template_parameter_pack' id='def:template_parameter_pack'><i >template parameter pack</i></a> is a template parameter
that accepts zero or more template arguments<a class='hidden_link' href='#variadic-1.sentence-1'>.</a></div> <div id='variadic-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#variadic-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class ... Types&gt; struct Tuple { };

Tuple&lt;&gt; t0;                     <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> contains no arguments
</span>Tuple&lt;int&gt; t1;                  <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> contains one argument: <span class='tcode_in_codeblock'>int</span>
</span>Tuple&lt;int, float&gt; t2;           <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> contains two arguments: <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>float</span>
</span>Tuple&lt;0&gt; error;                 <span class='comment'>// error: <span class='tcode_in_codeblock'>0</span> is not a type
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='variadic-2'><div class='marginalizedparent'><a class='marginalized' href='#variadic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2524'>#</a></div><div id='variadic-2.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:function_parameter_pack' id='def:function_parameter_pack'><i >function parameter pack</i></a> is a function parameter
that accepts zero or more function arguments<a class='hidden_link' href='#variadic-2.sentence-1'>.</a></div> <div id='variadic-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#variadic-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class ... Types&gt; void f(Types ... args);

f();                            <span class='comment'>// OK: <span class='tcode_in_codeblock'>args</span> contains no arguments
</span>f(1);                           <span class='comment'>// OK: <span class='tcode_in_codeblock'>args</span> contains one argument: <span class='tcode_in_codeblock'>int</span>
</span>f(2, 1.0);                      <span class='comment'>// OK: <span class='tcode_in_codeblock'>args</span> contains two arguments: <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>double</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='variadic-3'><div class='marginalizedparent'><a class='marginalized' href='#variadic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2538'>#</a></div><div id='variadic-3.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:parameter_pack' id='def:parameter_pack'><i >parameter pack</i></a> is either a template parameter
pack or a function parameter pack<a class='hidden_link' href='#variadic-3.sentence-1'>.</a></div></div><div class='para' id='variadic-4'><div class='marginalizedparent'><a class='marginalized' href='#variadic-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2542'>#</a></div><div id='variadic-4.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:pack_expansion' id='def:pack_expansion'><i >pack expansion</i></a>
consists of a <a class='hidden_link' href='#def:pack_expansion,pattern' id='def:pack_expansion,pattern'><i >pattern</i></a> and an ellipsis, the instantiation of which
produces zero or more instantiations of the pattern in a list (described below)<a class='hidden_link' href='#variadic-4.sentence-1'>.</a></div> <div id='variadic-4.sentence-2' class='sentence'>The form of the pattern
depends on the context in which the expansion occurs<a class='hidden_link' href='#variadic-4.sentence-2'>.</a></div> <div id='variadic-4.sentence-3' class='sentence'>Pack
expansions can occur in the following contexts:</div><div id='variadic-4.sentence-4' class='sentence'><ul class='itemize'><li id='variadic-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.1'>(4.1)</a></div><div id='variadic-4.1.sentence-1' class='sentence'>In a function parameter pack (<a href='dcl.fct'>[dcl.fct]</a>); the pattern is the
<i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i> without the ellipsis<a class='hidden_link' href='#variadic-4.1.sentence-1'>.</a></div></li><li id='variadic-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.2'>(4.2)</a></div><div id='variadic-4.2.sentence-1' class='sentence'>In a <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>;
the pattern is a <i ><a href='namespace.udecl#nt:using-declarator'>using-declarator</a></i><a class='hidden_link' href='#variadic-4.2.sentence-1'>.</a></div></li><li id='variadic-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.3'>(4.3)</a></div><div id='variadic-4.3.sentence-1' class='sentence'>In a template parameter pack that is a pack expansion (<a href='temp.param'>[temp.param]</a>):</div><div id='variadic-4.3.sentence-2' class='sentence'><ul class='itemize'><li id='variadic-4.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#variadic-4.3.1'>(4.3.1)</a></div><div id='variadic-4.3.1.sentence-1' class='sentence'>if the template parameter pack is a <i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i>;
the pattern is the <i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i> without the ellipsis;</div></li><li id='variadic-4.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#variadic-4.3.2'>(4.3.2)</a></div><div id='variadic-4.3.2.sentence-1' class='sentence'>if the template parameter pack is a <i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i> with a
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i>; the pattern is the corresponding
<i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i> without the ellipsis<a class='hidden_link' href='#variadic-4.3.2.sentence-1'>.</a></div></li></ul></div></li><li id='variadic-4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.4'>(4.4)</a></div><div id='variadic-4.4.sentence-1' class='sentence'>In an <i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>;
the pattern is an <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><a class='hidden_link' href='#variadic-4.4.sentence-1'>.</a></div></li><li id='variadic-4.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.5'>(4.5)</a></div><div id='variadic-4.5.sentence-1' class='sentence'>In a <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>;
the pattern is a <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i><a class='hidden_link' href='#variadic-4.5.sentence-1'>.</a></div></li><li id='variadic-4.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.6'>(4.6)</a></div><div id='variadic-4.6.sentence-1' class='sentence'>In a <i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i> for a
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> whose <i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> denotes a
base class; the pattern is the <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i><a class='hidden_link' href='#variadic-4.6.sentence-1'>.</a></div></li><li id='variadic-4.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.7'>(4.7)</a></div><div id='variadic-4.7.sentence-1' class='sentence'>In a <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i> (<a href='temp.arg'>[temp.arg]</a>);
the pattern is a <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><a class='hidden_link' href='#variadic-4.7.sentence-1'>.</a></div></li><li id='variadic-4.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.8'>(4.8)</a></div><div id='variadic-4.8.sentence-1' class='sentence'>In an <i ><a href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a></i>; the pattern is
an <i ><a href='dcl.attr.grammar#nt:attribute'>attribute</a></i><a class='hidden_link' href='#variadic-4.8.sentence-1'>.</a></div></li><li id='variadic-4.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.9'>(4.9)</a></div><div id='variadic-4.9.sentence-1' class='sentence'>In an <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i> (<a href='dcl.align'>[dcl.align]</a>); the pattern is
the <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i> without the ellipsis<a class='hidden_link' href='#variadic-4.9.sentence-1'>.</a></div></li><li id='variadic-4.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.10'>(4.10)</a></div><div id='variadic-4.10.sentence-1' class='sentence'>In a <i ><a href='expr.prim.lambda.capture#nt:capture-list'>capture-list</a></i> (<a href='expr.prim.lambda'>[expr.prim.lambda]</a>); the pattern is
a <i ><a href='expr.prim.lambda.capture#nt:capture'>capture</a></i><a class='hidden_link' href='#variadic-4.10.sentence-1'>.</a></div></li><li id='variadic-4.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.11'>(4.11)</a></div><div id='variadic-4.11.sentence-1' class='sentence'>In a <a href='expr.sizeof'><span class='texttt'>sizeof...</span> expression</a>; the pattern is an
<i ><a href='lex.name#nt:identifier'>identifier</a></i><a class='hidden_link' href='#variadic-4.11.sentence-1'>.</a></div></li><li id='variadic-4.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-4.12'>(4.12)</a></div><div id='variadic-4.12.sentence-1' class='sentence'>In a <i ><a href='expr.prim.fold#nt:fold-expression'>fold-expression</a></i>;
the pattern is the <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
that contains an unexpanded parameter pack<a class='hidden_link' href='#variadic-4.12.sentence-1'>.</a></div></li></ul></div><div id='variadic-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#variadic-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class ... Types&gt; void f(Types ... rest);
template&lt;class ... Types&gt; void g(Types ... rest) {
  f(&amp;rest ...);     <span class='comment'>// “<span class='tcode_in_codeblock'>&amp;rest ...</span>” is a pack expansion; “<span class='tcode_in_codeblock'>&amp;rest</span>” is its pattern
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='variadic-5'><div class='marginalizedparent'><a class='marginalized' href='#variadic-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2608'>#</a></div><div id='variadic-5.sentence-1' class='sentence'>For the purpose of determining whether a parameter pack satisfies a rule
regarding entities other than parameter packs, the parameter pack is
considered to be the entity that would result from an instantiation of
the pattern in which it appears<a class='hidden_link' href='#variadic-5.sentence-1'>.</a></div></div><div class='para' id='variadic-6'><div class='marginalizedparent'><a class='marginalized' href='#variadic-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2614'>#</a></div><div id='variadic-6.sentence-1' class='sentence'>A parameter pack whose name appears within the pattern of a pack
expansion is expanded by that pack expansion<a class='hidden_link' href='#variadic-6.sentence-1'>.</a></div> <div id='variadic-6.sentence-2' class='sentence'>An appearance of the name of
a parameter pack is only expanded by the innermost enclosing pack expansion<a class='hidden_link' href='#variadic-6.sentence-2'>.</a></div> <div id='variadic-6.sentence-3' class='sentence'>The pattern of a pack expansion shall name one or more parameter packs that
are not expanded by a nested pack expansion; such parameter packs are called
<a class='hidden_link' href='#def:parameter_pack,unexpanded' id='def:parameter_pack,unexpanded'><i >unexpanded parameter packs</i></a> in the pattern<a class='hidden_link' href='#variadic-6.sentence-3'>.</a></div> <div id='variadic-6.sentence-4' class='sentence'>All of the parameter packs expanded
by a pack expansion shall have the same number of arguments specified<a class='hidden_link' href='#variadic-6.sentence-4'>.</a></div> <div id='variadic-6.sentence-5' class='sentence'>An
appearance of a name of a parameter pack that is not expanded is
ill-formed<a class='hidden_link' href='#variadic-6.sentence-5'>.</a></div> <div id='variadic-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#variadic-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename...&gt; struct Tuple {};
template&lt;typename T1, typename T2&gt; struct Pair {};

template&lt;class ... Args1&gt; struct zip {
  template&lt;class ... Args2&gt; struct with {
    typedef Tuple&lt;Pair&lt;Args1, Args2&gt; ... &gt; type;
  };
};

typedef zip&lt;short, int&gt;::with&lt;unsigned short, unsigned&gt;::type T1;
    <span class='comment'>// <span class='tcode_in_codeblock'>T1</span> is <span class='tcode_in_codeblock'>Tuple&lt;Pair&lt;short, unsigned short&gt;, Pair&lt;int, unsigned&gt;&gt;</span>
</span>typedef zip&lt;short&gt;::with&lt;unsigned short, unsigned&gt;::type T2;
    <span class='comment'>// error: different number of arguments specified for <span class='tcode_in_codeblock'>Args1</span> and <span class='tcode_in_codeblock'>Args2</span>
</span>
template&lt;class ... Args&gt;
  void g(Args ... args) {                   <span class='comment'>// OK: <span class='tcode_in_codeblock'>Args</span> is expanded by the function parameter pack <span class='tcode_in_codeblock'>args</span>
</span>    f(const_cast&lt;const Args*&gt;(&amp;args)...);   <span class='comment'>// OK: “<span class='tcode_in_codeblock'>Args</span>” and “<span class='tcode_in_codeblock'>args</span>” are expanded
</span>    f(5 ...);                               <span class='comment'>// error: pattern does not contain any parameter packs
</span>    f(args);                                <span class='comment'>// error: parameter pack “<span class='tcode_in_codeblock'>args</span>” is not expanded
</span>    f(h(args ...) + args ...);              <span class='comment'>// OK: first “<span class='tcode_in_codeblock'>args</span>” expanded within <span class='tcode_in_codeblock'>h</span>,
</span>                                            <span class='comment'>// second “<span class='tcode_in_codeblock'>args</span>” expanded within <span class='tcode_in_codeblock'>f</span>
</span>  }</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='variadic-7'><div class='marginalizedparent'><a class='marginalized' href='#variadic-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2652'>#</a></div><div id='variadic-7.sentence-1' class='sentence'>The instantiation of a pack expansion
that is neither a <span class='texttt'>sizeof...</span> expression
nor a <i ><a href='expr.prim.fold#nt:fold-expression'>fold-expression</a></i>
produces a
list
<span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_1, \mathtt{E}_2, \dotsc{}, \mathtt{E}_N"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.372em;">…</span></span><span class="mjx-texatom MJXc-space1"><span class="mjx-mrow"></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span>,
where
<span class='math'><span class='mathalpha'>N</span></span> is the number of elements in the pack expansion parameters<a class='hidden_link' href='#variadic-7.sentence-1'>.</a></div> <div id='variadic-7.sentence-2' class='sentence'>Each
<span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is generated by instantiating the pattern and
replacing each pack expansion parameter with its <span class='math'><span class='mathalpha'>i</span></span>th element<a class='hidden_link' href='#variadic-7.sentence-2'>.</a></div> <div id='variadic-7.sentence-3' class='sentence'>Such an element, in the context of the instantiation, is interpreted as
follows:</div><div id='variadic-7.sentence-4' class='sentence'><ul class='itemize'><li id='variadic-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-7.1'>(7.1)</a></div><div id='variadic-7.1.sentence-1' class='sentence'>if the pack is a template parameter pack, the element is a <a href='temp.param'>template
parameter</a> of the corresponding kind (type or
non-type) designating the type or value from the template
argument; otherwise,</div></li><li id='variadic-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-7.2'>(7.2)</a></div><div id='variadic-7.2.sentence-1' class='sentence'>if the pack is a function parameter pack, the element is an
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
designating the function parameter that resulted from
the instantiation of the pattern where the pack is declared<a class='hidden_link' href='#variadic-7.2.sentence-1'>.</a></div></li></ul></div><div id='variadic-7.sentence-5' class='sentence'>All of the <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> become elements in the enclosing list<a class='hidden_link' href='#variadic-7.sentence-5'>.</a></div> <div id='variadic-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#variadic-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='variadic-7.sentence-8' class='sentence'>The variety of list varies with the context:
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>,
<i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>,
<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>, etc<a class='hidden_link' href='#variadic-7.sentence-8'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='variadic-7.sentence-6' class='sentence'>
When <span class='math'><span class='mathalpha'>N</span></span> is zero, the instantiation of the expansion produces an empty list<a class='hidden_link' href='#variadic-7.sentence-6'>.</a></div> <div id='variadic-7.sentence-7' class='sentence'>Such an instantiation does not alter the syntactic interpretation of the
enclosing construct, even in cases where omitting the list entirely would
otherwise be ill-formed or would result in an ambiguity in the grammar<a class='hidden_link' href='#variadic-7.sentence-7'>.</a></div> <div id='variadic-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#variadic-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class... T&gt; struct X : T... { };
template&lt;class... T&gt; void f(T... values) {
  X&lt;T...&gt; x(values...);
}

template void f&lt;&gt;();    <span class='comment'>// OK: <span class='tcode_in_codeblock'>X&lt;&gt;</span> has no base classes
</span>                        <span class='comment'>// <span class='tcode_in_codeblock'>x</span> is a variable of type <span class='tcode_in_codeblock'>X&lt;&gt;</span> that is value-initialized
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='variadic-8'><div class='marginalizedparent'><a class='marginalized' href='#variadic-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2701'>#</a></div><div id='variadic-8.sentence-1' class='sentence'>The instantiation of a <a href='expr.sizeof'><span class='texttt'>sizeof...</span> expression</a> produces
an integral constant containing the number of elements in the parameter pack
it expands<a class='hidden_link' href='#variadic-8.sentence-1'>.</a></div></div><div class='para' id='variadic-9'><div class='marginalizedparent'><a class='marginalized' href='#variadic-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2706'>#</a></div><div id='variadic-9.sentence-1' class='sentence'>The instantiation of a <i ><a href='expr.prim.fold#nt:fold-expression'>fold-expression</a></i> produces:</div><div id='variadic-9.sentence-2' class='sentence'><ul class='itemize'><li id='variadic-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-9.1'>(9.1)</a></div><div id='variadic-9.1.sentence-1' class='sentence'><span class='texttt'>((</span><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>
           <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_2"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span><span class='texttt'>)</span>
           <span class='textit'>op</span> <span class='math'>⋯</span><span class='texttt'>)</span>
           <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_N"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span>
for a unary left fold,</div></li><li id='variadic-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-9.2'>(9.2)</a></div><div id='variadic-9.2.sentence-1' class='sentence'><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>     <span class='textit'>op</span>
<span class='texttt'>(</span><span class='math'>⋯</span>           <span class='textit'>op</span>
<span class='texttt'>(</span><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_{N-1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span> <span class='textit'>op</span>
         <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_N"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span><span class='texttt'>))</span>
for a unary right fold,</div></li><li id='variadic-9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-9.3'>(9.3)</a></div><div id='variadic-9.3.sentence-1' class='sentence'><span class='texttt'>(((</span><span class='math'><span class='mathtt'>E</span></span>
            <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span><span class='texttt'>)</span>
            <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_2"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span><span class='texttt'>)</span>
            <span class='textit'>op</span> <span class='math'>⋯</span><span class='texttt'>)</span>
            <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_N"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span>
for a binary left fold, and</div></li><li id='variadic-9.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-9.4'>(9.4)</a></div><div id='variadic-9.4.sentence-1' class='sentence'><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>     <span class='textit'>op</span>
<span class='texttt'>(</span><span class='math'>⋯</span>           <span class='textit'>op</span>
<span class='texttt'>(</span><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_{N-1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span> <span class='textit'>op</span>
<span class='texttt'>(</span><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_{N}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span></span></span>   <span class='textit'>op</span>
         <span class='math'><span class='mathtt'>E</span></span><span class='texttt'>)))</span>
for a binary right fold<a class='hidden_link' href='#variadic-9.4.sentence-1'>.</a></div></li></ul></div><div id='variadic-9.sentence-3' class='sentence'>In each case,
<span class='textit'>op</span> is the <i ><a href='expr.prim.fold#nt:fold-operator'>fold-operator</a></i>,
<span class='math'><span class='mathalpha'>N</span></span> is the number of elements in the pack expansion parameters,
and each <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{E}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is generated by instantiating the pattern
and replacing each pack expansion parameter with its <span class='math'><span class='mathalpha'>i</span></span>th element<a class='hidden_link' href='#variadic-9.sentence-3'>.</a></div> <div id='variadic-9.sentence-4' class='sentence'>For a binary fold-expression,
<span class='math'><span class='mathtt'>E</span></span> is generated
by instantiating the <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
that did not contain an unexpanded parameter pack<a class='hidden_link' href='#variadic-9.sentence-4'>.</a></div> <div id='variadic-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#variadic-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename ...Args&gt;
  bool all(Args ...args) { return (... &amp;&amp; args); }

bool b = all(true, true, true, false);</pre> <div id='variadic-9.sentence-6' class='sentence'>
Within the instantiation of <span class='texttt'>all</span>,
the returned expression expands to
<span class='texttt'>((true &amp;&amp; true) &amp;&amp; true) &amp;&amp; false</span>,
which evaluates to <span class='texttt'>false</span><a class='hidden_link' href='#variadic-9.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='variadic-9.sentence-5' class='sentence'>
If <span class='math'><span class='mathalpha'>N</span></span> is zero for a unary fold-expression,
the value of the expression is shown in Table <a href='#tab:fold.empty'>14</a>;
if the operator is not listed in Table <a href='#tab:fold.empty'>14</a>,
the instantiation is ill-formed<a class='hidden_link' href='#variadic-9.sentence-5'>.</a></div><div class='numberedTable' id='tab:fold.empty'>Table <a href='#tab:fold.empty'>14</a> — Value of folding empty sequences<br><table ><tr class='rowsep'><td colspan='1' class='center'><div id='variadic-9.sentence-7' class='sentence'><b>Operator</b></div></td><td colspan='1' class='center'><div id='variadic-9.sentence-8' class='sentence'><b>Value when parameter pack is empty</b></div></td></tr><tr class='capsep'><td class='left'><div id='variadic-9.sentence-9' class='sentence'><span class='texttt'>&amp;&amp;</span></div></td><td class='left'><div id='variadic-9.sentence-10' class='sentence'><span class='texttt'>true</span></div></td></tr><tr ><td class='left'><div id='variadic-9.sentence-11' class='sentence'><span class='texttt'>||</span></div></td><td class='left'><div id='variadic-9.sentence-12' class='sentence'><span class='texttt'>false</span></div></td></tr><tr ><td class='left'><div id='variadic-9.sentence-13' class='sentence'><span class='texttt'>,</span></div></td><td class='left'><div id='variadic-9.sentence-14' class='sentence'><span class='texttt'>void()</span></div></td></tr></table></div></div></div><div id='friend' class='section'><h3 ><a class='secnum' href='#friend' style='min-width:103pt'>17.6.4</a> Friends <a class='abbr_ref' href='temp.friend'>[temp.friend]</a></h3><div class='para' id='friend-1'><div class='marginalizedparent'><a class='marginalized' href='#friend-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2776'>#</a></div><div id='friend-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend,template_and'></a></span>A friend of a class or class template can be a function template or
class template, a specialization of a function template or class
template, or a non-template function or class<a class='hidden_link' href='#friend-1.sentence-1'>.</a></div> <div id='friend-1.sentence-2' class='sentence'>For a friend function declaration that is not a template declaration:</div><div id='friend-1.sentence-3' class='sentence'><ul class='itemize'><li id='friend-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#friend-1.1'>(1.1)</a></div><div id='friend-1.1.sentence-1' class='sentence'>if the name of the friend is a qualified or unqualified <i ><a href='temp.names#nt:template-id'>template-id</a></i>,
the friend declaration refers to a specialization of a function
template, otherwise,</div></li><li id='friend-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#friend-1.2'>(1.2)</a></div><div id='friend-1.2.sentence-1' class='sentence'>if the name of the friend is a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> and a matching non-template
function is found in the specified class or namespace, the friend
declaration refers to that function, otherwise,</div></li><li id='friend-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#friend-1.3'>(1.3)</a></div><div id='friend-1.3.sentence-1' class='sentence'>if the name of the friend is a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> and a matching
function template
is found in the specified class
or namespace, the friend declaration refers to
the deduced specialization of that function template (<a href='temp.deduct.decl'>[temp.deduct.decl]</a>), otherwise,</div></li><li id='friend-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#friend-1.4'>(1.4)</a></div><div id='friend-1.4.sentence-1' class='sentence'>the name shall be an <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> that declares (or redeclares) a
non-template function<a class='hidden_link' href='#friend-1.4.sentence-1'>.</a></div></li></ul></div><div id='friend-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class task;
template&lt;class T&gt; task&lt;T&gt;* preempt(task&lt;T&gt;*);

template&lt;class T&gt; class task {
  friend void next_time();
  friend void process(task&lt;T&gt;*);
  friend task&lt;T&gt;* preempt&lt;T&gt;(task&lt;T&gt;*);
  template&lt;class C&gt; friend int func(C);

  friend class task&lt;int&gt;;
  template&lt;class P&gt; friend class frd;
};</pre><div id='friend-1.sentence-4' class='sentence'>Here,
each specialization of the
<span class='texttt'>task</span>
class template has the function
<span class='texttt'>next_&shy;time</span>
as a friend;
because
<span class='texttt'>process</span>
does not have explicit
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>,
each specialization of the
<span class='texttt'>task</span>
class template has an appropriately typed function
<span class='texttt'>process</span>
as a friend, and this friend is not a function template specialization;
because the friend
<span class='texttt'>preempt</span>
has an explicit
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
<span class='texttt'>T</span>,
each specialization of the
<span class='texttt'>task</span>
class template has the appropriate specialization of the function
template
<span class='texttt'>preempt</span>
as a friend;
and each specialization of the
<span class='texttt'>task</span>
class template has all specializations of the function template
<span class='texttt'>func</span>
as friends<a class='hidden_link' href='#friend-1.sentence-4'>.</a></div> <div id='friend-1.sentence-5' class='sentence'>Similarly,
each specialization of the
<span class='texttt'>task</span>
class template has the class template specialization
<span class='texttt'>task&lt;int&gt;</span>
as a friend, and has all specializations of the class template
<span class='texttt'>frd</span>
as friends<a class='hidden_link' href='#friend-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-2'><div class='marginalizedparent'><a class='marginalized' href='#friend-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2860'>#</a></div><div id='friend-2.sentence-1' class='sentence'>A friend template may be declared within a class or class template<a class='hidden_link' href='#friend-2.sentence-1'>.</a></div> <div id='friend-2.sentence-2' class='sentence'>A friend function template may be defined within a class or class
template, but a friend class template may not be defined in a class
or class template<a class='hidden_link' href='#friend-2.sentence-2'>.</a></div> <div id='friend-2.sentence-3' class='sentence'>In these cases, all specializations of the friend class or friend function
template are friends of the class or class template granting friendship<a class='hidden_link' href='#friend-2.sentence-3'>.</a></div> <div id='friend-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A {
  template&lt;class T&gt; friend class B;                 <span class='comment'>// OK
</span>  template&lt;class T&gt; friend void f(T){ <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }   <span class='comment'>// OK
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-3'><div class='marginalizedparent'><a class='marginalized' href='#friend-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2876'>#</a></div><div id='friend-3.sentence-1' class='sentence'>A template friend declaration specifies that all specializations of that
template, whether they are <a href='temp.inst'>implicitly instantiated</a>, <a href='temp.class.spec'>partially
specialized</a> or <a href='temp.expl.spec'>explicitly specialized</a>,
are friends of the class containing the template friend declaration<a class='hidden_link' href='#friend-3.sentence-1'>.</a></div> <div id='friend-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X {
  template&lt;class T&gt; friend struct A;
  class Y { };
};

template&lt;class T&gt; struct A { X::Y ab; };            <span class='comment'>// OK
</span>template&lt;class T&gt; struct A&lt;T*&gt; { X::Y ab; };        <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-4'><div class='marginalizedparent'><a class='marginalized' href='#friend-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2893'>#</a></div><div id='friend-4.sentence-1' class='sentence'>A template friend declaration may declare
a member of a dependent type to be a friend<a class='hidden_link' href='#friend-4.sentence-1'>.</a></div> <div id='friend-4.sentence-2' class='sentence'>The friend declaration shall declare a function or
specify a type with an <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>,
in either case with a <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
ending with a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>, <span class='textit'>C</span>,
whose <i ><a href='temp.names#nt:template-name'>template-name</a></i> names a class template<a class='hidden_link' href='#friend-4.sentence-2'>.</a></div> <div id='friend-4.sentence-3' class='sentence'>The template parameters of the template friend declaration
shall be deducible from <span class='textit'>C</span> (<a href='temp.deduct.type'>[temp.deduct.type]</a>)<a class='hidden_link' href='#friend-4.sentence-3'>.</a></div> <div id='friend-4.sentence-4' class='sentence'>In this case,
a member of a specialization <span class='textit'>S</span> of the class template
is a friend of the class granting friendship
if deduction of the template parameters
of <span class='textit'>C</span> from <span class='textit'>S</span> succeeds, and
substituting the deduced template arguments into the friend declaration
produces a declaration that would be a valid redeclaration
of the member of the specialization<a class='hidden_link' href='#friend-4.sentence-4'>.</a></div> <div id='friend-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  struct B { };
  void f();
  struct D {
    void g();
  };
  T h();
  template&lt;T U&gt; T i();
};
template&lt;&gt; struct A&lt;int&gt; {
  struct B { };
  int f();
  struct D {
    void g();
  };
  template&lt;int U&gt; int i();
};
template&lt;&gt; struct A&lt;float*&gt; {
  int *h();
};

class C {
  template&lt;class T&gt; friend struct A&lt;T&gt;::B;      <span class='comment'>// grants friendship to <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;B</span> even though
</span>                                                <span class='comment'>// it is not a specialization of <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;B</span>
</span>  template&lt;class T&gt; friend void A&lt;T&gt;::f();      <span class='comment'>// does not grant friendship to <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;f()</span>
</span>                                                <span class='comment'>// because its return type does not match
</span>  template&lt;class T&gt; friend void A&lt;T&gt;::D::g();   <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;D</span> does not end with
</span>                                                <span class='comment'>// a <span class='grammarterm'>simple-template-id</span>
</span>  template&lt;class T&gt; friend int *A&lt;T*&gt;::h();     <span class='comment'>// grants friendship to <span class='tcode_in_codeblock'>A&lt;int*&gt;&#x200b;::&#x200b;h()</span> and <span class='tcode_in_codeblock'>A&lt;float*&gt;&#x200b;::&#x200b;h()</span>
</span>  template&lt;class T&gt; template&lt;T U&gt;               <span class='comment'>// grants friendship to instantiations of <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;i()</span> and
</span>    friend T A&lt;T&gt;::i();                         <span class='comment'>// to <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;i()</span>, and thereby to all specializations
</span>};                                              <span class='comment'>// of those function templates
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-5'><div class='marginalizedparent'><a class='marginalized' href='#friend-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2949'>#</a></div><div id='friend-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#friend-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='friend-5.sentence-1' class='sentence'>A friend declaration may first declare a member of an enclosing namespace scope (<a href='temp.inject'>[temp.inject]</a>)<a class='hidden_link' href='#friend-5.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-6'><div class='marginalizedparent'><a class='marginalized' href='#friend-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2954'>#</a></div><div id='friend-6.sentence-1' class='sentence'>A friend template shall not be declared in a local class<a class='hidden_link' href='#friend-6.sentence-1'>.</a></div></div><div class='para' id='friend-7'><div class='marginalizedparent'><a class='marginalized' href='#friend-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2957'>#</a></div><div id='friend-7.sentence-1' class='sentence'>Friend declarations shall not declare partial specializations<a class='hidden_link' href='#friend-7.sentence-1'>.</a></div> <div id='friend-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class A { };
class X {
  template&lt;class T&gt; friend class A&lt;T*&gt;;         <span class='comment'>// error
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-8'><div class='marginalizedparent'><a class='marginalized' href='#friend-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2969'>#</a></div><div id='friend-8.sentence-1' class='sentence'>When a friend declaration refers to a specialization of a function
template, the function parameter declarations shall not include
default arguments, nor shall the inline specifier be used in such a
declaration<a class='hidden_link' href='#friend-8.sentence-1'>.</a></div></div><div class='para' id='friend-9'><div class='marginalizedparent'><a class='marginalized' href='#friend-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2975'>#</a></div><div id='friend-9.sentence-1' class='sentence'>A non-template friend declaration shall not have a <i ><a href='temp#nt:requires-clause'>requires-clause</a></i><a class='hidden_link' href='#friend-9.sentence-1'>.</a></div></div></div><div id='class.spec' class='section'><h3 ><a class='secnum' href='#class.spec' style='min-width:103pt'>17.6.5</a> Class template partial specializations <a class='abbr_ref' href='temp.class.spec'>[temp.class.spec]</a></h3><div class='para' id='class.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L2980'>#</a></div><div id='class.spec-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':specialization,class_template_partial'></a></span>A
<a class='hidden_link' href='#def:template,primary' id='def:template,primary'><i >primary class template</i></a>
declaration is one in which the class template name is an
identifier<a class='hidden_link' href='#class.spec-1.sentence-1'>.</a></div> <div id='class.spec-1.sentence-2' class='sentence'>A template declaration in which the class template name is a
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
is a
<a class='hidden_link' href='#def:specialization,class_template_partial' id='def:specialization,class_template_partial'><i >partial specialization</i></a>
of the class template named in the
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i><a class='hidden_link' href='#class.spec-1.sentence-2'>.</a></div> <div id='class.spec-1.sentence-3' class='sentence'>A partial specialization of a class template provides an alternative definition
of the template that is used instead of the primary definition when the
arguments in a specialization match those given in the partial
specialization (<a href='temp.class.spec.match'>[temp.class.spec.match]</a>)<a class='hidden_link' href='#class.spec-1.sentence-3'>.</a></div> <div id='class.spec-1.sentence-4' class='sentence'>The primary template shall be declared before any specializations of
that template<a class='hidden_link' href='#class.spec-1.sentence-4'>.</a></div> <div id='class.spec-1.sentence-5' class='sentence'>A partial specialization shall be declared before the first use of a class template
specialization that would make use of the partial specialization as the result of
an implicit or explicit instantiation in every translation unit in which such a use
occurs; no diagnostic is required<a class='hidden_link' href='#class.spec-1.sentence-5'>.</a></div></div><div class='para' id='class.spec-2'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3004'>#</a></div><div id='class.spec-2.sentence-1' class='sentence'>Each class template partial specialization is a distinct template and
definitions shall be provided for the members of a template partial
specialization (<a href='temp.class.spec.mfunc'>[temp.class.spec.mfunc]</a>)<a class='hidden_link' href='#class.spec-2.sentence-1'>.</a></div></div><div class='para' id='class.spec-3'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3009'>#</a></div><div id='class.spec-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T1, class T2, int I&gt; class A             { };
template&lt;class T, int I&gt;            class A&lt;T, T*, I&gt;   { };
template&lt;class T1, class T2, int I&gt; class A&lt;T1*, T2, I&gt; { };
template&lt;class T&gt;                   class A&lt;int, T*, 5&gt; { };
template&lt;class T1, class T2, int I&gt; class A&lt;T1, T2*, I&gt; { };</pre><div id='class.spec-3.sentence-1' class='sentence'>The first declaration declares the primary (unspecialized) class template<a class='hidden_link' href='#class.spec-3.sentence-1'>.</a></div> <div id='class.spec-3.sentence-2' class='sentence'>The second and subsequent declarations declare partial specializations of
the primary template<a class='hidden_link' href='#class.spec-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.spec-4'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3024'>#</a></div><div id='class.spec-4.sentence-1' class='sentence'>A class template partial specialization may be constrained (<a href='temp'>[temp]</a>)<a class='hidden_link' href='#class.spec-4.sentence-1'>.</a></div> <div id='class.spec-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C = true;

template&lt;typename T&gt; struct X { };
template&lt;typename T&gt; struct X&lt;T*&gt; { };          <span class='comment'>// #1
</span>template&lt;C T&gt; struct X&lt;T&gt; { };                  <span class='comment'>// #2
</span></pre> <div id='class.spec-4.sentence-2' class='sentence'>
Both partial specializations are more specialized than the primary template<a class='hidden_link' href='#class.spec-4.sentence-2'>.</a></div> <div id='class.spec-4.sentence-3' class='sentence'>#1 is more specialized because the deduction of its template arguments
from the template argument list of the class template specialization succeeds,
while the reverse does not<a class='hidden_link' href='#class.spec-4.sentence-3'>.</a></div> <div id='class.spec-4.sentence-4' class='sentence'>#2 is more specialized because the template arguments are equivalent,
but the partial specialization is more constrained (<a href='temp.constr.order'>[temp.constr.order]</a>)<a class='hidden_link' href='#class.spec-4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.spec-5'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3042'>#</a></div><div id='class.spec-5.sentence-1' class='sentence'>The template parameters are specified in the angle bracket enclosed list
that immediately follows the keyword
<span class='texttt'>template</span><a class='hidden_link' href='#class.spec-5.sentence-1'>.</a></div> <div id='class.spec-5.sentence-2' class='sentence'>For partial specializations, the template argument list is explicitly
written immediately following the class template name<a class='hidden_link' href='#class.spec-5.sentence-2'>.</a></div> <div id='class.spec-5.sentence-3' class='sentence'>For primary templates, this list is implicitly described by the
template parameter list<a class='hidden_link' href='#class.spec-5.sentence-3'>.</a></div> <div id='class.spec-5.sentence-4' class='sentence'>Specifically, the order of the template arguments is the sequence in
which they appear in the template parameter list<a class='hidden_link' href='#class.spec-5.sentence-4'>.</a></div> <div id='class.spec-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.spec-5.sentence-5' class='sentence'>The template argument list for the primary template in the example
above is
<span class='texttt'>&lt;T1,</span>
<span class='texttt'>T2,</span>
<span class='texttt'>I&gt;</span><a class='hidden_link' href='#class.spec-5.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.spec-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.spec-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.spec-5.sentence-6' class='sentence'>The template argument list shall not be specified in the primary template
declaration<a class='hidden_link' href='#class.spec-5.sentence-6'>.</a></div> <div id='class.spec-5.sentence-7' class='sentence'>For example,</div><pre class='codeblock'>
template&lt;class T1, class T2, int I&gt;
class A&lt;T1, T2, I&gt; { };                         <span class='comment'>// error
</span></pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.spec-6'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3070'>#</a></div><div id='class.spec-6.sentence-1' class='sentence'>A class template partial specialization may be declared in any
scope in which the corresponding primary template
may be defined (<a href='namespace.memdef'>[namespace.memdef]</a>, <a href='class.mem'>[class.mem]</a>, <a href='temp.mem'>[temp.mem]</a>)<a class='hidden_link' href='#class.spec-6.sentence-1'>.</a></div> <div id='class.spec-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  struct C {
    template&lt;class T2&gt; struct B { };
    template&lt;class T2&gt; struct B&lt;T2**&gt; { };      <span class='comment'>// partial specialization #1
</span>  };
};

<span class='comment'>// partial specialization of <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;C&#x200b;::&#x200b;B&lt;T2&gt;</span>
</span>template&lt;class T&gt; template&lt;class T2&gt;
  struct A&lt;T&gt;::C::B&lt;T2*&gt; { };                   <span class='comment'>// #2
</span>
A&lt;short&gt;::C::B&lt;int*&gt; absip;                     <span class='comment'>// uses partial specialization #2
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.spec-7'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3092'>#</a></div><div id='class.spec-7.sentence-1' class='sentence'>Partial specialization declarations themselves are not found by name lookup<a class='hidden_link' href='#class.spec-7.sentence-1'>.</a></div> <div id='class.spec-7.sentence-2' class='sentence'>Rather, when the primary template name is used, any previously-declared partial
specializations of the primary template are also considered<a class='hidden_link' href='#class.spec-7.sentence-2'>.</a></div> <div id='class.spec-7.sentence-3' class='sentence'>One consequence is
that a
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>
which refers to a class template does not restrict the set of partial specializations
which may be found through the
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i><a class='hidden_link' href='#class.spec-7.sentence-3'>.</a></div> <div id='class.spec-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace N {
  template&lt;class T1, class T2&gt; class A { };     <span class='comment'>// primary template
</span>}

using N::A;                                     <span class='comment'>// refers to the primary template
</span>
namespace N {
  template&lt;class T&gt; class A&lt;T, T*&gt; { };         <span class='comment'>// partial specialization
</span>}

A&lt;int,int*&gt; a;      <span class='comment'>// uses the partial specialization, which is found through the using-declaration
</span>                    <span class='comment'>// which refers to the primary template
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.spec-8'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3120'>#</a></div><div id='class.spec-8.sentence-1' class='sentence'>A non-type argument is non-specialized if it is the name of a non-type
parameter<a class='hidden_link' href='#class.spec-8.sentence-1'>.</a></div> <div id='class.spec-8.sentence-2' class='sentence'>All other non-type arguments are specialized<a class='hidden_link' href='#class.spec-8.sentence-2'>.</a></div></div><div class='para' id='class.spec-9'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3125'>#</a></div><div id='class.spec-9.sentence-1' class='sentence'>Within the argument list of a class template partial specialization,
the following restrictions apply:</div><div id='class.spec-9.sentence-2' class='sentence'><ul class='itemize'><li id='class.spec-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec-9.1'>(9.1)</a></div><div id='class.spec-9.1.sentence-1' class='sentence'>The type of a template parameter corresponding to a specialized non-type argument
shall not be dependent on a parameter of the specialization<a class='hidden_link' href='#class.spec-9.1.sentence-1'>.</a></div> <div id='class.spec-9.1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec-9.1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T, T t&gt; struct C {};
template &lt;class T&gt; struct C&lt;T, 1&gt;;              <span class='comment'>// error
</span>
template&lt; int X, int (*array_ptr)[X] &gt; class A {};
int array[5];
template&lt; int X &gt; class A&lt;X,&amp;array&gt; { };        <span class='comment'>// error
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='class.spec-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec-9.2'>(9.2)</a></div><div id='class.spec-9.2.sentence-1' class='sentence'>The specialization shall be <a href='temp.class.order#def:more_specialized'>more specialized</a>
than the primary template<a class='hidden_link' href='#class.spec-9.2.sentence-1'>.</a></div></li><li id='class.spec-9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec-9.3'>(9.3)</a></div><div id='class.spec-9.3.sentence-1' class='sentence'>The template parameter list of a specialization shall not contain default
template argument values<a class='hidden_link' href='#class.spec-9.3.sentence-1'>.</a><a class='footnotenum' href='#footnote-141'>141</a></div></li><li id='class.spec-9.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec-9.4'>(9.4)</a></div><div id='class.spec-9.4.sentence-1' class='sentence'>An argument shall not contain an unexpanded parameter pack<a class='hidden_link' href='#class.spec-9.4.sentence-1'>.</a></div> <div id='class.spec-9.4.sentence-2' class='sentence'>If
an argument is a <a href='temp.variadic#def:pack_expansion'>pack expansion</a>, it shall be
the last argument in the template argument list<a class='hidden_link' href='#class.spec-9.4.sentence-2'>.</a></div></li></ul></div></div><div class='para' id='class.spec-10'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3158'>#</a></div><div id='class.spec-10.sentence-1' class='sentence'>The usual access checking rules do not apply to non-dependent names
used to specify template arguments of the <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
of the partial specialization<a class='hidden_link' href='#class.spec-10.sentence-1'>.</a></div> <div id='class.spec-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.spec-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.spec-10.sentence-2' class='sentence'>The template arguments may be private types or
objects that would normally not be accessible<a class='hidden_link' href='#class.spec-10.sentence-2'>.</a></div> <div id='class.spec-10.sentence-3' class='sentence'>Dependent names cannot be checked when declaring the partial specialization,
but will be checked when substituting into the partial specialization<a class='hidden_link' href='#class.spec-10.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-141'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-141'>141)</a></div><div id='footnote-141.sentence-1' class='sentence'>There is no way in which they could be used<a class='hidden_link' href='#footnote-141.sentence-1'>.</a></div></div><div id='class.spec.match' class='section'><h4 ><a class='secnum' href='#class.spec.match' style='min-width:118pt'>17.6.5.1</a> Matching of class template partial specializations <a class='abbr_ref' href='temp.class.spec.match'>[temp.class.spec.match]</a></h4><div class='para' id='class.spec.match-1'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.match-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3171'>#</a></div><div id='class.spec.match-1.sentence-1' class='sentence'>When a class template is used in a context that requires an instantiation of
the class,
it is necessary to determine whether the instantiation is to be generated
using the primary template or one of the partial specializations<a class='hidden_link' href='#class.spec.match-1.sentence-1'>.</a></div> <div id='class.spec.match-1.sentence-2' class='sentence'>This is done by matching the template arguments of the class template
specialization with the template argument lists of the partial
specializations<a class='hidden_link' href='#class.spec.match-1.sentence-2'>.</a></div><div id='class.spec.match-1.sentence-3' class='sentence'><ul class='itemize'><li id='class.spec.match-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec.match-1.1'>(1.1)</a></div><div id='class.spec.match-1.1.sentence-1' class='sentence'>If exactly one matching specialization is found, the instantiation is
generated from that specialization<a class='hidden_link' href='#class.spec.match-1.1.sentence-1'>.</a></div></li><li id='class.spec.match-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec.match-1.2'>(1.2)</a></div><div id='class.spec.match-1.2.sentence-1' class='sentence'>If more than one matching specialization is found,
the <a href='temp.class.order'>partial order rules</a> are used to determine
whether one of the specializations is more specialized than the
others<a class='hidden_link' href='#class.spec.match-1.2.sentence-1'>.</a></div> <div id='class.spec.match-1.2.sentence-2' class='sentence'>If none of the specializations is more specialized than all of the
other matching specializations, then the use of the class template
is ambiguous and the program is ill-formed<a class='hidden_link' href='#class.spec.match-1.2.sentence-2'>.</a></div></li><li id='class.spec.match-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec.match-1.3'>(1.3)</a></div><div id='class.spec.match-1.3.sentence-1' class='sentence'>If no matches are found, the instantiation is generated from the
primary template<a class='hidden_link' href='#class.spec.match-1.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='class.spec.match-2'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.match-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3197'>#</a></div><div id='class.spec.match-2.sentence-1' class='sentence'>A partial specialization matches a given actual template argument
list if the template arguments of the partial specialization can be
<a href='temp.deduct'>deduced</a> from the actual template argument list,
and the deduced template arguments satisfy the <a href='temp.constr.decl#def:associated_constraints'>associated constraints</a>
of the partial specialization, if any<a class='hidden_link' href='#class.spec.match-2.sentence-1'>.</a></div> <div id='class.spec.match-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec.match-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T1, class T2, int I&gt; class A             { };    <span class='comment'>// #1
</span>template&lt;class T, int I&gt;            class A&lt;T, T*, I&gt;   { };    <span class='comment'>// #2
</span>template&lt;class T1, class T2, int I&gt; class A&lt;T1*, T2, I&gt; { };    <span class='comment'>// #3
</span>template&lt;class T&gt;                   class A&lt;int, T*, 5&gt; { };    <span class='comment'>// #4
</span>template&lt;class T1, class T2, int I&gt; class A&lt;T1, T2*, I&gt; { };    <span class='comment'>// #5
</span>
A&lt;int, int, 1&gt;   a1;                    <span class='comment'>// uses #1
</span>A&lt;int, int*, 1&gt;  a2;                    <span class='comment'>// uses #2, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>I</span> is <span class='tcode_in_codeblock'>1</span>
</span>A&lt;int, char*, 5&gt; a3;                    <span class='comment'>// uses #4, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>char</span>
</span>A&lt;int, char*, 1&gt; a4;                    <span class='comment'>// uses #5, <span class='tcode_in_codeblock'>T1</span> is <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>T2</span> is <span class='tcode_in_codeblock'>char</span>, <span class='tcode_in_codeblock'>I</span> is <span class='tcode_in_codeblock'>1</span>
</span>A&lt;int*, int*, 2&gt; a5;                    <span class='comment'>// ambiguous: matches #3 and #5
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.spec.match-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec.match-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C = requires (T t) { t.f(); };

template&lt;typename T&gt; struct S { };      <span class='comment'>// #1
</span>template&lt;C T&gt; struct S&lt;T&gt; { };          <span class='comment'>// #2
</span>
struct Arg { void f(); };

S&lt;int&gt; s1;                              <span class='comment'>// uses #1; the constraints of #2 are not satisfied
</span>S&lt;Arg&gt; s2;                              <span class='comment'>// uses #2; both constraints are satisfied but #2 is more specialized
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.spec.match-3'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.match-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3232'>#</a></div><div id='class.spec.match-3.sentence-1' class='sentence'>If the template arguments of a partial specialization cannot be deduced
because of the structure of its <i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i>
and the <i ><a href='temp.names#nt:template-id'>template-id</a></i>,
the program is ill-formed<a class='hidden_link' href='#class.spec.match-3.sentence-1'>.</a></div> <div id='class.spec.match-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec.match-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;int I, int J&gt; struct A {};
template &lt;int I&gt; struct A&lt;I+5, I*2&gt; {};     <span class='comment'>// error
</span>
template &lt;int I&gt; struct A&lt;I, I&gt; {};         <span class='comment'>// OK
</span>
template &lt;int I, int J, int K&gt; struct B {};
template &lt;int I&gt; struct B&lt;I, I*2, 2&gt; {};    <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.spec.match-4'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.match-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3249'>#</a></div><div id='class.spec.match-4.sentence-1' class='sentence'>In a type name that refers to a class template specialization, (e.g.,
<span class='texttt'>A&lt;int, int, 1&gt;</span>)
the argument list shall match the template parameter list of the primary
template<a class='hidden_link' href='#class.spec.match-4.sentence-1'>.</a></div> <div id='class.spec.match-4.sentence-2' class='sentence'>The template arguments of a specialization are deduced from the arguments
of the primary template<a class='hidden_link' href='#class.spec.match-4.sentence-2'>.</a></div></div></div><div id='class.order' class='section'><h4 ><a class='secnum' href='#class.order' style='min-width:118pt'>17.6.5.2</a> Partial ordering of class template specializations <a class='abbr_ref' href='temp.class.order'>[temp.class.order]</a></h4><div class='para' id='class.order-1'><div class='marginalizedparent'><a class='marginalized' href='#class.order-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3259'>#</a></div><div id='class.order-1.sentence-1' class='sentence'>For two class template partial specializations,
the first is <a class='hidden_link' href='#def:more_specialized,class_template' id='def:more_specialized,class_template'><i >more specialized</i></a> than the second if, given the following
rewrite to two function templates, the first function template is more
specialized than the second according to the <a href='temp.func.order'>ordering rules for function
templates</a>:</div><div id='class.order-1.sentence-2' class='sentence'><ul class='itemize'><li id='class.order-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.order-1.1'>(1.1)</a></div><div id='class.order-1.1.sentence-1' class='sentence'>Each of the two
function templates has the same template parameters
and <a href='temp.constr.decl#def:associated_constraints'>associated constraints</a>
as the corresponding partial specialization<a class='hidden_link' href='#class.order-1.1.sentence-1'>.</a></div></li><li id='class.order-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.order-1.2'>(1.2)</a></div><div id='class.order-1.2.sentence-1' class='sentence'>Each function template
has a single function parameter
whose type is a class template specialization where the template arguments
are the corresponding template parameters from the function template
for each template argument
in the <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>
of the <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
of the partial specialization<a class='hidden_link' href='#class.order-1.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='class.order-2'><div class='marginalizedparent'><a class='marginalized' href='#class.order-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3283'>#</a></div><div id='class.order-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.order-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;int I, int J, class T&gt; class X { };
template&lt;int I, int J&gt;          class X&lt;I, J, int&gt; { };         <span class='comment'>// #1
</span>template&lt;int I&gt;                 class X&lt;I, I, int&gt; { };         <span class='comment'>// #2
</span>
template&lt;int I0, int J0&gt; void f(X&lt;I0, J0, int&gt;);                <span class='comment'>// A
</span>template&lt;int I0&gt;         void f(X&lt;I0, I0, int&gt;);                <span class='comment'>// B
</span>
template &lt;auto v&gt;    class Y { };
template &lt;auto* p&gt;   class Y&lt;p&gt; { };                            <span class='comment'>// #3
</span>template &lt;auto** pp&gt; class Y&lt;pp&gt; { };                           <span class='comment'>// #4
</span>
template &lt;auto* p0&gt;   void g(Y&lt;p0&gt;);                            <span class='comment'>// C
</span>template &lt;auto** pp0&gt; void g(Y&lt;pp0&gt;);                           <span class='comment'>// D
</span></pre><div id='class.order-2.sentence-1' class='sentence'>According to the ordering rules for function templates,
the function template
<span class='textit'>B</span>
is more specialized than the function template
<span class='textit'>A</span>
and
the function template
<span class='textit'>D</span>
is more specialized than the function template
<span class='textit'>C</span><a class='hidden_link' href='#class.order-2.sentence-1'>.</a></div> <div id='class.order-2.sentence-2' class='sentence'>Therefore, the partial specialization #2
is more specialized than the partial specialization #1
and the partial specialization #4
is more specialized than the partial specialization #3<a class='hidden_link' href='#class.order-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.order-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.order-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C = requires (T t) { t.f(); };
template&lt;typename T&gt; concept D = C&lt;T&gt; &amp;&amp; requires (T t) { t.f(); };

template&lt;typename T&gt; class S { };
template&lt;C T&gt; class S&lt;T&gt; { };   <span class='comment'>// #1
</span>template&lt;D T&gt; class S&lt;T&gt; { };   <span class='comment'>// #2
</span>
template&lt;C T&gt; void f(S&lt;T&gt;);     <span class='comment'>// A
</span>template&lt;D T&gt; void f(S&lt;T&gt;);     <span class='comment'>// B
</span></pre> <div id='class.order-2.sentence-3' class='sentence'>
The partial specialization #2 is more specialized than #1
because <span class='texttt'>B</span> is more specialized than <span class='texttt'>A</span><a class='hidden_link' href='#class.order-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='class.spec.mfunc' class='section'><h4 ><a class='secnum' href='#class.spec.mfunc' style='min-width:118pt'>17.6.5.3</a> Members of class template specializations <a class='abbr_ref' href='temp.class.spec.mfunc'>[temp.class.spec.mfunc]</a></h4><div class='para' id='class.spec.mfunc-1'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.mfunc-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3334'>#</a></div><div id='class.spec.mfunc-1.sentence-1' class='sentence'>The template parameter list of a member of a class template partial
specialization shall match the template parameter list of the class template
partial specialization<a class='hidden_link' href='#class.spec.mfunc-1.sentence-1'>.</a></div> <div id='class.spec.mfunc-1.sentence-2' class='sentence'>The template argument list of a member of a class template partial
specialization shall match the template argument list of the class template
partial specialization<a class='hidden_link' href='#class.spec.mfunc-1.sentence-2'>.</a></div> <div id='class.spec.mfunc-1.sentence-3' class='sentence'>A class template specialization is a distinct template<a class='hidden_link' href='#class.spec.mfunc-1.sentence-3'>.</a></div> <div id='class.spec.mfunc-1.sentence-4' class='sentence'>The members of the class template partial specialization are
unrelated to the members of the primary template<a class='hidden_link' href='#class.spec.mfunc-1.sentence-4'>.</a></div> <div id='class.spec.mfunc-1.sentence-5' class='sentence'>Class template partial specialization members that are used in a way that
requires a definition shall be defined; the definitions of members of the
primary template are never used as definitions for members of a class
template partial specialization<a class='hidden_link' href='#class.spec.mfunc-1.sentence-5'>.</a></div> <div id='class.spec.mfunc-1.sentence-6' class='sentence'>An explicit specialization of a member of a class template partial
specialization is declared in the same way as an explicit specialization of
the primary template<a class='hidden_link' href='#class.spec.mfunc-1.sentence-6'>.</a></div> <div id='class.spec.mfunc-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec.mfunc-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// primary class template
</span>template&lt;class T, int I&gt; struct A {
  void f();
};

<span class='comment'>// member of primary class template
</span>template&lt;class T, int I&gt; void A&lt;T,I&gt;::f() { }

<span class='comment'>// class template partial specialization
</span>template&lt;class T&gt; struct A&lt;T,2&gt; {
  void f();
  void g();
  void h();
};

<span class='comment'>// member of class template partial specialization
</span>template&lt;class T&gt; void A&lt;T,2&gt;::g() { }

<span class='comment'>// explicit specialization
</span>template&lt;&gt; void A&lt;char,2&gt;::h() { }

int main() {
  A&lt;char,0&gt; a0;
  A&lt;char,2&gt; a2;
  a0.f();           <span class='comment'>// OK, uses definition of primary template's member
</span>  a2.g();           <span class='comment'>// OK, uses definition of partial specialization's member
</span>  a2.h();           <span class='comment'>// OK, uses definition of explicit specialization's member
</span>  a2.f();           <span class='comment'>// ill-formed, no definition of <span class='tcode_in_codeblock'>f</span> for <span class='tcode_in_codeblock'>A&lt;T,2&gt;</span>; the primary template is not used here
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.spec.mfunc-2'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.mfunc-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3386'>#</a></div><div id='class.spec.mfunc-2.sentence-1' class='sentence'>If a member template of a class template is partially specialized,
the member template partial specializations are member templates of
the enclosing class template;
if the enclosing class template is instantiated (<a href='temp.inst'>[temp.inst]</a>, <a href='temp.explicit'>[temp.explicit]</a>),
a declaration for every member template partial specialization is also
instantiated as part of creating the members of the class template
specialization<a class='hidden_link' href='#class.spec.mfunc-2.sentence-1'>.</a></div> <div id='class.spec.mfunc-2.sentence-2' class='sentence'>If the primary member template is explicitly specialized for a given
(implicit) specialization of the enclosing class template,
the partial specializations of the member template are ignored for this
specialization of the enclosing class template<a class='hidden_link' href='#class.spec.mfunc-2.sentence-2'>.</a></div> <div id='class.spec.mfunc-2.sentence-3' class='sentence'>If a partial specialization of the member template is explicitly specialized
for a given (implicit) specialization of the enclosing class template,
the primary member template and its other partial specializations are
still considered for this specialization of the enclosing class template<a class='hidden_link' href='#class.spec.mfunc-2.sentence-3'>.</a></div> <div id='class.spec.mfunc-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.spec.mfunc-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  template&lt;class T2&gt; struct B {};                     <span class='comment'>// #1
</span>  template&lt;class T2&gt; struct B&lt;T2*&gt; {};                <span class='comment'>// #2
</span>};

template&lt;&gt; template&lt;class T2&gt; struct A&lt;short&gt;::B {};  <span class='comment'>// #3
</span>
A&lt;char&gt;::B&lt;int*&gt;  abcip;                              <span class='comment'>// uses #2
</span>A&lt;short&gt;::B&lt;int*&gt; absip;                              <span class='comment'>// uses #3
</span>A&lt;char&gt;::B&lt;int&gt;  abci;                                <span class='comment'>// uses #1
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='fct' class='section'><h3 ><a class='secnum' href='#fct' style='min-width:103pt'>17.6.6</a> Function templates <a class='abbr_ref' href='temp.fct'>[temp.fct]</a></h3><div class='para' id='fct-1'><div class='marginalizedparent'><a class='marginalized' href='#fct-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3420'>#</a></div><div id='fct-1.sentence-1' class='sentence'>A function template defines an unbounded set of related functions<a class='hidden_link' href='#fct-1.sentence-1'>.</a></div> <div id='fct-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#fct-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='fct-1.sentence-2' class='sentence'>A family of sort functions might be declared like this:</div><pre class='codeblock'>
template&lt;class T&gt; class Array { };
template&lt;class T&gt; void sort(Array&lt;T&gt;&amp;);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='fct-2'><div class='marginalizedparent'><a class='marginalized' href='#fct-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3431'>#</a></div><div id='fct-2.sentence-1' class='sentence'>A function template can be overloaded with other function templates
and with non-template functions (<a href='dcl.fct'>[dcl.fct]</a>)<a class='hidden_link' href='#fct-2.sentence-1'>.</a></div> <div id='fct-2.sentence-2' class='sentence'>A non-template function is not
related to a function template
(i.e., it is never considered to be a specialization),
even if it has the same name and type
as a potentially generated function template specialization<a class='hidden_link' href='#fct-2.sentence-2'>.</a><a class='footnotenum' href='#footnote-142'>142</a></div></div><div class='footnote' id='footnote-142'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-142'>142)</a></div><div id='footnote-142.sentence-1' class='sentence'>That is,
declarations of non-template functions do not merely guide
overload resolution of
function template specializations
with the same name<a class='hidden_link' href='#footnote-142.sentence-1'>.</a></div> <div id='footnote-142.sentence-2' class='sentence'>If such a non-template function is <a href='basic.def.odr'>odr-used</a> in a program, it must be defined;
it will not be implicitly instantiated using the function template definition<a class='hidden_link' href='#footnote-142.sentence-2'>.</a></div></div><div id='over.link' class='section'><h4 ><a class='secnum' href='#over.link' style='min-width:118pt'>17.6.6.1</a> Function template overloading <a class='abbr_ref' href='temp.over.link'>[temp.over.link]</a></h4><div class='para' id='over.link-1'><div class='marginalizedparent'><a class='marginalized' href='#over.link-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3448'>#</a></div><div id='over.link-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloading'></a></span>It is possible to overload function templates so that two different
function template specializations have the same type<a class='hidden_link' href='#over.link-1.sentence-1'>.</a></div> <div id='over.link-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over.link-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div class='minipage'><pre class='codeblock'>
<span class='comment'>// translation unit 1:
</span>template&lt;class T&gt;
  void f(T*);
void g(int* p) {
  f(p); <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int*)</span>
</span>}</pre></div>
<div class='minipage'><pre class='codeblock'>
<span class='comment'>// translation unit 2:
</span>template&lt;class T&gt;
  void f(T);
void h(int* p) {
  f(p); <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int*&gt;(int*)</span>
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='over.link-2'><div class='marginalizedparent'><a class='marginalized' href='#over.link-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3477'>#</a></div><div id='over.link-2.sentence-1' class='sentence'>Such specializations are distinct functions and do not violate the
<a href='basic.def.odr'>one-definition rule</a><a class='hidden_link' href='#over.link-2.sentence-1'>.</a></div></div><div class='para' id='over.link-3'><div class='marginalizedparent'><a class='marginalized' href='#over.link-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3481'>#</a></div><div id='over.link-3.sentence-1' class='sentence'>The signature of a function template
is defined in <a href='intro.defs'>[intro.defs]</a><a class='hidden_link' href='#over.link-3.sentence-1'>.</a></div> <div id='over.link-3.sentence-2' class='sentence'>The names of the template parameters are significant only for establishing
the relationship between the template parameters and the rest of the
signature<a class='hidden_link' href='#over.link-3.sentence-2'>.</a></div> <div id='over.link-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#over.link-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-3.sentence-3' class='sentence'>Two distinct function templates may have identical function return types and
function parameter lists, even if overload resolution alone cannot distinguish
them<a class='hidden_link' href='#over.link-3.sentence-3'>.</a></div><pre class='codeblock'>
template&lt;class T&gt; void f();
template&lt;int I&gt; void f();       <span class='comment'>// OK: overloads the first template
</span>                                <span class='comment'>// distinguishable with an explicit template argument list
</span></pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='over.link-4'><div class='marginalizedparent'><a class='marginalized' href='#over.link-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3499'>#</a></div><div id='over.link-4.sentence-1' class='sentence'>When an expression that references a template parameter is used in the
function parameter list or the return type in the declaration of a
function template, the expression that references the template
parameter is part of the signature of the function template<a class='hidden_link' href='#over.link-4.sentence-1'>.</a></div> <div id='over.link-4.sentence-2' class='sentence'>This is
necessary to permit a declaration of a function template in one
translation unit to be linked with another declaration of the function
template in another translation unit and, conversely, to ensure that
function templates that are intended to be distinct are not linked
with one another<a class='hidden_link' href='#over.link-4.sentence-2'>.</a></div> <div id='over.link-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over.link-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;int I, int J&gt; A&lt;I+J&gt; f(A&lt;I&gt;, A&lt;J&gt;);   <span class='comment'>// #1
</span>template &lt;int K, int L&gt; A&lt;K+L&gt; f(A&lt;K&gt;, A&lt;L&gt;);   <span class='comment'>// same as #1
</span>template &lt;int I, int J&gt; A&lt;I-J&gt; f(A&lt;I&gt;, A&lt;J&gt;);   <span class='comment'>// different from #1
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='over.link-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#over.link-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-4.sentence-3' class='sentence'>Most expressions that use template parameters use non-type template
parameters, but it is possible for an expression to reference a type
parameter<a class='hidden_link' href='#over.link-4.sentence-3'>.</a></div> <div id='over.link-4.sentence-4' class='sentence'>For example, a template type parameter can be used in the
<span class='texttt'>sizeof</span> operator<a class='hidden_link' href='#over.link-4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='over.link-5'><div class='marginalizedparent'><a class='marginalized' href='#over.link-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3526'>#</a></div><div id='over.link-5.sentence-1' class='sentence'>Two expressions involving template parameters are considered
<a class='hidden_link' href='#def:equivalent,expressions' id='def:equivalent,expressions'><i >equivalent</i></a>
if two function definitions containing the expressions would satisfy
the <a href='basic.def.odr'>one-definition rule</a>, except that the tokens used
to name the template parameters may differ as long as a token used to
name a template parameter in one expression is replaced by another token
that names the same template parameter in the other expression<a class='hidden_link' href='#over.link-5.sentence-1'>.</a></div> <div id='over.link-5.sentence-2' class='sentence'>Two <i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i><span class='textit'>s</span> are never considered equivalent<a class='hidden_link' href='#over.link-5.sentence-2'>.</a></div> <div id='over.link-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#over.link-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-5.sentence-6' class='sentence'>The intent is to avoid <i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i><span class='textit'>s</span> appearing in the
signature of a function template with external linkage<a class='hidden_link' href='#over.link-5.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='over.link-5.sentence-3' class='sentence'>
For determining whether two dependent names (<a href='temp.dep'>[temp.dep]</a>) are
equivalent, only the name itself is considered, not the result of name
lookup in the context of the template<a class='hidden_link' href='#over.link-5.sentence-3'>.</a></div> <div id='over.link-5.sentence-4' class='sentence'>If multiple declarations of the
same function template differ in the result of this name lookup, the
result for the first declaration is used<a class='hidden_link' href='#over.link-5.sentence-4'>.</a></div> <div id='over.link-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over.link-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;int I, int J&gt; void f(A&lt;I+J&gt;);         <span class='comment'>// #1
</span>template &lt;int K, int L&gt; void f(A&lt;K+L&gt;);         <span class='comment'>// same as #1
</span>
template &lt;class T&gt; decltype(g(T())) h();
int g(int);
template &lt;class T&gt; decltype(g(T())) h()         <span class='comment'>// redeclaration of <span class='tcode_in_codeblock'>h()</span> uses the earlier lookup&hellip;
</span>  { return g(T()); }                            <span class='comment'>// &hellip; although the lookup here does find <span class='tcode_in_codeblock'>g(int)</span>
</span>int i = h&lt;int&gt;();                               <span class='comment'>// template argument substitution fails; <span class='tcode_in_codeblock'>g(int)</span>
</span>                                                <span class='comment'>// was not in scope at the first declaration of <span class='tcode_in_codeblock'>h()</span>
</span>
<span class='comment'>// ill-formed, no diagnostic required: the two expressions are functionally equivalent but not equivalent
</span>template &lt;int N&gt; void foo(const char (*s)[([]{}, N)]);
template &lt;int N&gt; void foo(const char (*s)[([]{}, N)]);

<span class='comment'>// two different declarations because the non-dependent portions are not considered equivalent
</span>template &lt;class T&gt; void spam(decltype([]{}) (*s)[sizeof(T)]);
template &lt;class T&gt; void spam(decltype([]{}) (*s)[sizeof(T)]);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='over.link-5.sentence-5' class='sentence'>Two expressions involving template parameters that are not equivalent are
<a class='hidden_link' href='#def:functionally_equivalent,expressions' id='def:functionally_equivalent,expressions'><i >functionally equivalent</i></a>
if, for any given set of template arguments, the evaluation of the
expression results in the same value<a class='hidden_link' href='#over.link-5.sentence-5'>.</a></div></div><div class='para' id='over.link-6'><div class='marginalizedparent'><a class='marginalized' href='#over.link-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3572'>#</a></div><div id='over.link-6.sentence-1' class='sentence'>Two <i ><a href='temp#nt:template-head'>template-head</a></i><span class='textit'>s</span> are
<a class='hidden_link' href='#def:equivalent,template-heads' id='def:equivalent,template-heads'><i >equivalent</i></a> if
their <i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i><span class='textit'>s</span> have the same length,
corresponding <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> are equivalent,
and if either has a <i ><a href='temp#nt:requires-clause'>requires-clause</a></i>, they both have
<i ><a href='temp#nt:requires-clause'>requires-clause</a></i><span class='textit'>s</span> and the corresponding
<i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><span class='textit'>s</span> are equivalent<a class='hidden_link' href='#over.link-6.sentence-1'>.</a></div> <div id='over.link-6.sentence-2' class='sentence'>Two <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> are
<a class='hidden_link' href='#def:equivalent,template-parameters' id='def:equivalent,template-parameters'><i >equivalent</i></a>
under the following conditions:
<ul class='itemize'><li id='over.link-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#over.link-6.1'>(6.1)</a></div><div id='over.link-6.1.sentence-1' class='sentence'>they declare template parameters of the same kind,</div></li><li id='over.link-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#over.link-6.2'>(6.2)</a></div><div id='over.link-6.2.sentence-1' class='sentence'>if either declares a template parameter pack, they both do,</div></li><li id='over.link-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#over.link-6.3'>(6.3)</a></div><div id='over.link-6.3.sentence-1' class='sentence'>if they declare non-type template parameters, they have
equivalent types,</div></li><li id='over.link-6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#over.link-6.4'>(6.4)</a></div><div id='over.link-6.4.sentence-1' class='sentence'>if they declare template template parameters, their template
parameters are equivalent, and</div></li><li id='over.link-6.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#over.link-6.5'>(6.5)</a></div><div id='over.link-6.5.sentence-1' class='sentence'>if either is declared with a <i ><a href='temp.param#nt:qualified-concept-name'>qualified-concept-name</a></i>,
they both are, and the <i ><a href='temp.param#nt:qualified-concept-name'>qualified-concept-name</a></i><span class='textit'>s</span> are
equivalent<a class='hidden_link' href='#over.link-6.5.sentence-1'>.</a></div></li></ul></div> <div id='over.link-6.sentence-3' class='sentence'>
When determining whether types or <i ><a href='temp.param#nt:qualified-concept-name'>qualified-concept-name</a></i><span class='textit'>s</span>
are equivalent, the rules above are used to compare expressions
involving template parameters<a class='hidden_link' href='#over.link-6.sentence-3'>.</a></div> <div id='over.link-6.sentence-4' class='sentence'>Two <i ><a href='temp#nt:template-head'>template-head</a></i><span class='textit'>s</span> are
<a class='hidden_link' href='#def:functionally_equivalent,template-heads' id='def:functionally_equivalent,template-heads'><i >functionally equivalent</i></a>
if they accept and are satisfied by (<a href='temp.constr.constr'>[temp.constr.constr]</a>)
the same set of template argument lists<a class='hidden_link' href='#over.link-6.sentence-4'>.</a></div></div><div class='para' id='over.link-7'><div class='marginalizedparent'><a class='marginalized' href='#over.link-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3602'>#</a></div><div id='over.link-7.sentence-1' class='sentence'>Two function templates are
<a class='hidden_link' href='#def:equivalent,function_templates' id='def:equivalent,function_templates'><i >equivalent</i></a>
if they
are declared in the same scope,
have the same name,
have equivalent <i ><a href='temp#nt:template-head'>template-head</a></i><span class='textit'>s</span>,
and
have return types, parameter lists,
and trailing <i ><a href='temp#nt:requires-clause'>requires-clause</a></i><span class='textit'>s</span> (if any)
that are equivalent using the rules described above to compare
expressions involving
template parameters<a class='hidden_link' href='#over.link-7.sentence-1'>.</a></div> <div id='over.link-7.sentence-2' class='sentence'>Two function templates are
<a class='hidden_link' href='#def:functionally_equivalent,function_templates' id='def:functionally_equivalent,function_templates'><i >functionally equivalent</i></a>
if they
are declared in the same scope,
have the same name,
accept and are satisfied by the same set of template argument lists,
and
have return types and parameter lists that
are functionally equivalent using the rules described above to
compare expressions involving
template parameters<a class='hidden_link' href='#over.link-7.sentence-2'>.</a></div> <div id='over.link-7.sentence-3' class='sentence'>If the validity or meaning of the program depends on
whether two constructs are equivalent, and they are
functionally equivalent but not equivalent, the program is ill-formed,
no diagnostic required<a class='hidden_link' href='#over.link-7.sentence-3'>.</a></div></div><div class='para' id='over.link-8'><div class='marginalizedparent'><a class='marginalized' href='#over.link-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3634'>#</a></div><div id='over.link-8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#over.link-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-8.sentence-1' class='sentence'>This rule guarantees that equivalent declarations will be linked with
one another, while not requiring implementations to use heroic efforts
to guarantee that functionally equivalent declarations will be treated
as distinct<a class='hidden_link' href='#over.link-8.sentence-1'>.</a></div> <div id='over.link-8.sentence-2' class='sentence'>For example, the last two declarations are functionally
equivalent and would cause a program to be ill-formed:</div><pre class='codeblock'>
<span class='comment'>// guaranteed to be the same
</span>template &lt;int I&gt; void f(A&lt;I&gt;, A&lt;I+10&gt;);
template &lt;int I&gt; void f(A&lt;I&gt;, A&lt;I+10&gt;);

<span class='comment'>// guaranteed to be different
</span>template &lt;int I&gt; void f(A&lt;I&gt;, A&lt;I+10&gt;);
template &lt;int I&gt; void f(A&lt;I&gt;, A&lt;I+11&gt;);

<span class='comment'>// ill-formed, no diagnostic required
</span>template &lt;int I&gt; void f(A&lt;I&gt;, A&lt;I+10&gt;);
template &lt;int I&gt; void f(A&lt;I&gt;, A&lt;I+1+2+3+4&gt;);</pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='func.order' class='section'><h4 ><a class='secnum' href='#func.order' style='min-width:118pt'>17.6.6.2</a> Partial ordering of function templates <a class='abbr_ref' href='temp.func.order'>[temp.func.order]</a></h4><div class='para' id='func.order-1'><div class='marginalizedparent'><a class='marginalized' href='#func.order-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3660'>#</a></div><div id='func.order-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloading,resolution,template'></a></span>If a function template is overloaded,
the use of a function template specialization might be ambiguous because
<a href='temp.deduct'>template argument deduction</a> may associate the function
template specialization with more than one function template declaration<a class='hidden_link' href='#func.order-1.sentence-1'>.</a></div> <div id='func.order-1.sentence-2' class='sentence'><a class='hidden_link' href='#def:template,function,partial_ordering' id='def:template,function,partial_ordering'><i >Partial ordering</i></a>
of overloaded function template declarations is used in the following contexts
to select the function template to which a function template specialization
refers:</div><div id='func.order-1.sentence-3' class='sentence'><ul class='itemize'><li id='func.order-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-1.1'>(1.1)</a></div><div id='func.order-1.1.sentence-1' class='sentence'>during overload resolution for a call to a function template specialization (<a href='over.match.best'>[over.match.best]</a>);</div></li><li id='func.order-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-1.2'>(1.2)</a></div><div id='func.order-1.2.sentence-1' class='sentence'>when the address of a function template specialization is taken;</div></li><li id='func.order-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-1.3'>(1.3)</a></div><div id='func.order-1.3.sentence-1' class='sentence'>when a placement operator delete that is a
function template
specialization
is selected to match a placement operator new (<a href='basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a>, <a href='expr.new'>[expr.new]</a>);</div></li><li id='func.order-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-1.4'>(1.4)</a></div><div id='func.order-1.4.sentence-1' class='sentence'>when a <a href='temp.friend'>friend function declaration</a>, an
<a href='temp.explicit'>explicit instantiation</a> or an <a href='temp.expl.spec'>explicit specialization</a> refers to
a function template specialization<a class='hidden_link' href='#func.order-1.4.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='func.order-2'><div class='marginalizedparent'><a class='marginalized' href='#func.order-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3688'>#</a></div><div id='func.order-2.sentence-1' class='sentence'>Partial ordering selects which of two function templates is more
specialized than the other by transforming each template in turn
(see next paragraph) and performing template argument deduction
using the function type<a class='hidden_link' href='#func.order-2.sentence-1'>.</a></div> <div id='func.order-2.sentence-2' class='sentence'>The deduction process determines whether
one of the templates is more specialized than the other<a class='hidden_link' href='#func.order-2.sentence-2'>.</a></div> <div id='func.order-2.sentence-3' class='sentence'>If so, the
more specialized template is the one chosen by the partial ordering
process<a class='hidden_link' href='#func.order-2.sentence-3'>.</a></div> <div id='func.order-2.sentence-4' class='sentence'>If both deductions succeed, the partial ordering selects
the more constrained template as described by the rules in
<a href='temp.constr.order'>[temp.constr.order]</a><a class='hidden_link' href='#func.order-2.sentence-4'>.</a></div></div><div class='para' id='func.order-3'><div class='marginalizedparent'><a class='marginalized' href='#func.order-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3701'>#</a></div><div id='func.order-3.sentence-1' class='sentence'>To produce the transformed template, for each type, non-type, or template
template parameter (including
<a href='temp.variadic#def:template_parameter_pack'>template parameter packs</a>
thereof) synthesize a unique type, value, or class template
respectively and substitute it for each occurrence of that parameter
in the function type of the template<a class='hidden_link' href='#func.order-3.sentence-1'>.</a></div> <div id='func.order-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#func.order-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='func.order-3.sentence-5' class='sentence'>The type replacing the placeholder
in the type of the value synthesized for a non-type template parameter
is also a unique synthesized type<a class='hidden_link' href='#func.order-3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='func.order-3.sentence-2' class='sentence'>
If only one of the function templates <span class='textit'>M</span> is a non-static
member of some class <span class='textit'>A</span>, <span class='textit'>M</span> is considered to have
a new first parameter inserted in its function
parameter list<a class='hidden_link' href='#func.order-3.sentence-2'>.</a></div> <div id='func.order-3.sentence-3' class='sentence'>Given <span class='textit'>cv</span> as the cv-qualifiers of <span class='textit'>M</span>
(if any), the new parameter is of type “rvalue reference to
<span class='textit'>cv</span> <span class='textit'>A</span>” if the optional <i ><a href='dcl.decl#nt:ref-qualifier'>ref-qualifier</a></i> of
<span class='textit'>M</span> is <span class='texttt'>&amp;&amp;</span> or if <span class='textit'>M</span> has no
<i ><a href='dcl.decl#nt:ref-qualifier'>ref-qualifier</a></i> and the first parameter of the other
template has rvalue reference type<a class='hidden_link' href='#func.order-3.sentence-3'>.</a></div> <div id='func.order-3.sentence-4' class='sentence'>Otherwise, the new parameter is
of type “lvalue reference to <span class='textit'>cv</span> <span class='textit'>A</span>”<a class='hidden_link' href='#func.order-3.sentence-4'>.</a></div> <div id='func.order-3.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#func.order-3.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='func.order-3.sentence-6' class='sentence'>This allows a non-static
member to be ordered with respect to a non-member function and for the results
to be equivalent to the ordering of two equivalent non-members<a class='hidden_link' href='#func.order-3.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='func.order-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#func.order-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { };
template&lt;class T&gt; struct B {
  template&lt;class R&gt; int operator*(R&amp;);              <span class='comment'>// #1
</span>};

template&lt;class T, class R&gt; int operator*(T&amp;, R&amp;);   <span class='comment'>// #2
</span>
<span class='comment'>// The declaration of <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;operator*</span> is transformed into the equivalent of
</span><span class='comment'>// <span class='tcode_in_codeblock'>template&lt;class R&gt; int operator*(B&lt;A&gt;&amp;, R&amp;);</span>&emsp;&ensp;&emsp;&ensp;&emsp;&ensp;// #1a
</span>
int main() {
  A a;
  B&lt;A&gt; b;
  b * a;                                            <span class='comment'>// calls #1a
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='func.order-4'><div class='marginalizedparent'><a class='marginalized' href='#func.order-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3746'>#</a></div><div id='func.order-4.sentence-1' class='sentence'>Using the transformed function template's function type,
perform type deduction against the other template as described in <a href='temp.deduct.partial'>[temp.deduct.partial]</a><a class='hidden_link' href='#func.order-4.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='func.order-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#func.order-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A { A(); };

template&lt;class T&gt; void f(T);
template&lt;class T&gt; void f(T*);
template&lt;class T&gt; void f(const T*);

template&lt;class T&gt; void g(T);
template&lt;class T&gt; void g(T&amp;);

template&lt;class T&gt; void h(const T&amp;);
template&lt;class T&gt; void h(A&lt;T&gt;&amp;);

void m() {
  const int* p;
  f(p);             <span class='comment'>// <span class='tcode_in_codeblock'>f(const T*)</span> is more specialized than <span class='tcode_in_codeblock'>f(T)</span> or <span class='tcode_in_codeblock'>f(T*)</span>
</span>  float x;
  g(x);             <span class='comment'>// ambiguous: <span class='tcode_in_codeblock'>g(T)</span> or <span class='tcode_in_codeblock'>g(T&amp;)</span>
</span>  A&lt;int&gt; z;
  h(z);             <span class='comment'>// overload resolution selects <span class='tcode_in_codeblock'>h(A&lt;T&gt;&amp;)</span>
</span>  const A&lt;int&gt; z2;
  h(z2);            <span class='comment'>// <span class='tcode_in_codeblock'>h(const T&amp;)</span> is called because <span class='tcode_in_codeblock'>h(A&lt;T&gt;&amp;)</span> is not callable
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='func.order-5'><div class='marginalizedparent'><a class='marginalized' href='#func.order-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3778'>#</a></div><div id='func.order-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#func.order-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='func.order-5.sentence-1' class='sentence'>Since partial ordering in a call context considers only parameters
for which there are explicit call arguments, some parameters are ignored (namely,
function parameter packs, parameters with default arguments, and ellipsis
parameters)<a class='hidden_link' href='#func.order-5.sentence-1'>.</a></div> <div id='func.order-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#func.order-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void f(T);                            <span class='comment'>// #1
</span>template&lt;class T&gt; void f(T*, int=1);                    <span class='comment'>// #2
</span>template&lt;class T&gt; void g(T);                            <span class='comment'>// #3
</span>template&lt;class T&gt; void g(T*, ...);                      <span class='comment'>// #4
</span></pre> <pre class='codeblock'>
int main() {
  int* ip;
  f(ip);                                                <span class='comment'>// calls #2
</span>  g(ip);                                                <span class='comment'>// calls #4
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='func.order-5.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#func.order-5.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T, class U&gt; struct A { };

template&lt;class T, class U&gt; void f(U, A&lt;U, T&gt;* p = 0);   <span class='comment'>// #1
</span>template&lt;         class U&gt; void f(U, A&lt;U, U&gt;* p = 0);   <span class='comment'>// #2
</span>template&lt;class T         &gt; void g(T, T = T());          <span class='comment'>// #3
</span>template&lt;class T, class... U&gt; void g(T, U ...);         <span class='comment'>// #4
</span>
void h() {
  f&lt;int&gt;(42, (A&lt;int, int&gt;*)0);                          <span class='comment'>// calls #2
</span>  f&lt;int&gt;(42);                                           <span class='comment'>// error: ambiguous
</span>  g(42);                                                <span class='comment'>// error: ambiguous
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='func.order-5.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#func.order-5.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T, class... U&gt; void f(T, U...);          <span class='comment'>// #1
</span>template&lt;class T            &gt; void f(T);                <span class='comment'>// #2
</span>template&lt;class T, class... U&gt; void g(T*, U...);         <span class='comment'>// #3
</span>template&lt;class T            &gt; void g(T);                <span class='comment'>// #4
</span>
void h(int i) {
  f(&amp;i);                                                <span class='comment'>// error: ambiguous
</span>  g(&amp;i);                                                <span class='comment'>// OK: calls #3
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='alias' class='section'><h3 ><a class='secnum' href='#alias' style='min-width:103pt'>17.6.7</a> Alias templates <a class='abbr_ref' href='temp.alias'>[temp.alias]</a></h3><div class='para' id='alias-1'><div class='marginalizedparent'><a class='marginalized' href='#alias-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3830'>#</a></div><div id='alias-1.sentence-1' class='sentence'>A <i ><a href='temp#nt:template-declaration'>template-declaration</a></i> in which the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> is an
<i ><a href='dcl.dcl#nt:alias-declaration'>alias-declaration</a></i> declares the
<i ><a href='lex.name#nt:identifier'>identifier</a></i> to be an <a class='hidden_link' href='#def:alias_template' id='def:alias_template'><i >alias template</i></a><a class='hidden_link' href='#alias-1.sentence-1'>.</a></div> <div id='alias-1.sentence-2' class='sentence'>An alias template is a name for a family of
types<a class='hidden_link' href='#alias-1.sentence-2'>.</a></div> <div id='alias-1.sentence-3' class='sentence'>The name of the alias template is a <i ><a href='temp.names#nt:template-name'>template-name</a></i><a class='hidden_link' href='#alias-1.sentence-3'>.</a></div></div><div class='para' id='alias-2'><div class='marginalizedparent'><a class='marginalized' href='#alias-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3837'>#</a></div><div id='alias-2.sentence-1' class='sentence'>When a <i ><a href='temp.names#nt:template-id'>template-id</a></i> refers to the specialization of
an alias template, it is equivalent to the associated type obtained by
substitution of its <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span> for the
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> in the <i ><a href='dcl.name#nt:type-id'>type-id</a></i> of
the alias template<a class='hidden_link' href='#alias-2.sentence-1'>.</a></div> <div id='alias-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#alias-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='alias-2.sentence-2' class='sentence'>An alias template name is never deduced<a class='hidden_link' href='#alias-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='alias-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#alias-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct Alloc { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T&gt; using Vec = vector&lt;T, Alloc&lt;T&gt;&gt;;
Vec&lt;int&gt; v;         <span class='comment'>// same as <span class='tcode_in_codeblock'>vector&lt;int, Alloc&lt;int&gt;&gt; v;</span>
</span>
template&lt;class T&gt;
  void process(Vec&lt;T&gt;&amp; v)
  { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

template&lt;class T&gt;
  void process(vector&lt;T, Alloc&lt;T&gt;&gt;&amp; w)
  { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }     <span class='comment'>// error: redefinition
</span>
template&lt;template&lt;class&gt; class TT&gt;
  void f(TT&lt;int&gt;);

f(v);               <span class='comment'>// error: <span class='tcode_in_codeblock'>Vec</span> not deduced
</span>
template&lt;template&lt;class,class&gt; class TT&gt;
  void g(TT&lt;int, Alloc&lt;int&gt;&gt;);
g(v);               <span class='comment'>// OK: <span class='tcode_in_codeblock'>TT</span> = <span class='tcode_in_codeblock'>vector</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='alias-3'><div class='marginalizedparent'><a class='marginalized' href='#alias-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3871'>#</a></div><div id='alias-3.sentence-1' class='sentence'>However, if the <i ><a href='temp.names#nt:template-id'>template-id</a></i> is dependent, subsequent template
argument substitution still applies to the <i ><a href='temp.names#nt:template-id'>template-id</a></i><a class='hidden_link' href='#alias-3.sentence-1'>.</a></div> <div id='alias-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#alias-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename...&gt; using void_t = void;
template&lt;typename T&gt; void_t&lt;typename T::foo&gt; f();
f&lt;int&gt;();           <span class='comment'>// error, <span class='tcode_in_codeblock'>int</span> does not have a nested type <span class='tcode_in_codeblock'>foo</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='alias-4'><div class='marginalizedparent'><a class='marginalized' href='#alias-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3882'>#</a></div><div id='alias-4.sentence-1' class='sentence'>The <i ><a href='dcl.name#nt:type-id'>type-id</a></i> in an alias template declaration shall not refer to
the alias template being declared<a class='hidden_link' href='#alias-4.sentence-1'>.</a></div> <div id='alias-4.sentence-2' class='sentence'>The type produced by an alias template
specialization shall not directly or indirectly make use of that specialization<a class='hidden_link' href='#alias-4.sentence-2'>.</a></div> <div id='alias-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#alias-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct A;
template &lt;class T&gt; using B = typename A&lt;T&gt;::U;
template &lt;class T&gt; struct A {
  typedef B&lt;T&gt; U;
};
B&lt;short&gt; b;         <span class='comment'>// error: instantiation of <span class='tcode_in_codeblock'>B&lt;short&gt;</span> uses own type via <span class='tcode_in_codeblock'>A&lt;short&gt;&#x200b;::&#x200b;U</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='alias-5'><div class='marginalizedparent'><a class='marginalized' href='#alias-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3898'>#</a></div><div id='alias-5.sentence-1' class='sentence'>The type of a lambda expression appearing in an alias template declaration
is different between instantiations of that template, even when the lambda
expression is not dependent<a class='hidden_link' href='#alias-5.sentence-1'>.</a></div> <div id='alias-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#alias-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt;
  using A = decltype([] { });   <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;int&gt;</span> and <span class='tcode_in_codeblock'>A&lt;char&gt;</span> refer to different closure types
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='concept' class='section'><h3 ><a class='secnum' href='#concept' style='min-width:103pt'>17.6.8</a> Concept definitions <a class='abbr_ref' href='temp.concept'>[temp.concept]</a></h3><div class='para' id='concept-1'><div class='marginalizedparent'><a class='marginalized' href='#concept-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3911'>#</a></div><div id='concept-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:concept' id='def:concept'><i >concept</i></a> is a template
that defines constraints on its template arguments<a class='hidden_link' href='#concept-1.sentence-1'>.</a></div></div><div class='para' id='concept-2'><div class='marginalizedparent'><a class='marginalized' href='#concept-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3915'>#</a></div><div id='concept-2.sentence-1' class='sentence'>A <i ><a href='temp#nt:concept-definition'>concept-definition</a></i>
declares a concept<a class='hidden_link' href='#concept-2.sentence-1'>.</a></div> <div id='concept-2.sentence-2' class='sentence'>Its <i ><a href='lex.name#nt:identifier'>identifier</a></i> becomes a <i ><a href='temp#nt:concept-name'>concept-name</a></i>
referring to that concept
within its scope<a class='hidden_link' href='#concept-2.sentence-2'>.</a></div> <div id='concept-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#concept-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt;
concept C = requires(T x) {
  { x == x } -&gt; bool;
};

template&lt;typename T&gt;
  requires C&lt;T&gt;     <span class='comment'>// <span class='tcode_in_codeblock'>C</span> constrains <span class='tcode_in_codeblock'>f1(T)</span> in <span class='grammarterm'>constraint-expression</span>
</span>T f1(T x) { return x; }

template&lt;C T&gt;       <span class='comment'>// <span class='tcode_in_codeblock'>C</span> constrains <span class='tcode_in_codeblock'>f2(T)</span> as a <span class='grammarterm'>constrained-parameter</span>
</span>T f2(T x) { return x; }</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='concept-3'><div class='marginalizedparent'><a class='marginalized' href='#concept-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3937'>#</a></div><div id='concept-3.sentence-1' class='sentence'>A <i ><a href='temp#nt:concept-definition'>concept-definition</a></i>
shall appear at namespace scope (<a href='basic.scope.namespace'>[basic.scope.namespace]</a>)<a class='hidden_link' href='#concept-3.sentence-1'>.</a></div></div><div class='para' id='concept-4'><div class='marginalizedparent'><a class='marginalized' href='#concept-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3941'>#</a></div><div id='concept-4.sentence-1' class='sentence'>A concept shall not have <a href='temp.constr.decl#def:associated_constraints'>associated constraints</a><a class='hidden_link' href='#concept-4.sentence-1'>.</a></div></div><div class='para' id='concept-5'><div class='marginalizedparent'><a class='marginalized' href='#concept-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3944'>#</a></div><div id='concept-5.sentence-1' class='sentence'>A concept is not instantiated (<a href='temp.spec'>[temp.spec]</a>)<a class='hidden_link' href='#concept-5.sentence-1'>.</a></div> <div id='concept-5.sentence-2' class='sentence'>A program that
<a href='temp.explicit'>explicitly instantiates</a>,
<a href='temp.expl.spec'>explicitly specializes</a>,
or partially specializes a concept is ill-formed<a class='hidden_link' href='#concept-5.sentence-2'>.</a></div> <div id='concept-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#concept-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='concept-5.sentence-3' class='sentence'>An <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> that denotes a concept specialization
is evaluated as an expression (<a href='expr.prim.id'>[expr.prim.id]</a>)<a class='hidden_link' href='#concept-5.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='concept-6'><div class='marginalizedparent'><a class='marginalized' href='#concept-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3955'>#</a></div><div id='concept-6.sentence-1' class='sentence'>The first declared template parameter of a concept definition is its
<a class='hidden_link' href='#def:prototype_parameter,concept' id='def:prototype_parameter,concept'><i >prototype parameter</i></a><a class='hidden_link' href='#concept-6.sentence-1'>.</a></div> <div id='concept-6.sentence-2' class='sentence'>A <a class='hidden_link' href='#def:concept,variadic' id='def:concept,variadic'><i >variadic concept</i></a>
is a concept whose prototype parameter
is a template parameter pack<a class='hidden_link' href='#concept-6.sentence-2'>.</a></div></div></div></div><div id='res' class='section'><h2 ><a class='secnum' href='#res' style='min-width:88pt'>17.7</a> Name resolution <a class='abbr_ref' href='temp.res'>[temp.res]</a></h2><div class='para' id='res-1'><div class='marginalizedparent'><a class='marginalized' href='#res-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3965'>#</a></div><div id='res-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloading,resolution,template_name'></a></span><span class='indexparent'><a class='index' id=':lookup,template_name'></a></span>Three kinds of names can be used within a template definition:</div><div id='res-1.sentence-2' class='sentence'><ul class='itemize'><li id='res-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-1.1'>(1.1)</a></div><div id='res-1.1.sentence-1' class='sentence'>The name of the template itself,
and names declared within the template itself<a class='hidden_link' href='#res-1.1.sentence-1'>.</a></div></li><li id='res-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-1.2'>(1.2)</a></div><div id='res-1.2.sentence-1' class='sentence'>Names dependent on a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> (<a href='temp.dep'>[temp.dep]</a>)<a class='hidden_link' href='#res-1.2.sentence-1'>.</a></div></li><li id='res-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-1.3'>(1.3)</a></div><div id='res-1.3.sentence-1' class='sentence'>Names from scopes which are visible within the template definition<a class='hidden_link' href='#res-1.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='res-2'><div class='marginalizedparent'><a class='marginalized' href='#res-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L3981'>#</a></div><div id='res-2.sentence-1' class='sentence'>A name used in a template declaration or definition and that is
dependent on a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is assumed not to name a type unless
the applicable name lookup finds a type name or the name
is qualified by the keyword
<span class='texttt'>typename</span><a class='hidden_link' href='#res-2.sentence-1'>.</a></div> <div id='res-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#res-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// no <span class='tcode_in_codeblock'>B</span> declared here
</span>
class X;

template&lt;class T&gt; class Y {
  class Z;                      <span class='comment'>// forward declaration of member class
</span>
  void f() {
    X* a1;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>X</span>
</span>    T* a2;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>
</span>    Y* a3;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>Y&lt;T&gt;</span>
</span>    Z* a4;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>Z</span>
</span>    typedef typename T::A TA;
    TA* a5;                     <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>'s <span class='tcode_in_codeblock'>A</span>
</span>    typename T::A* a6;          <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>'s <span class='tcode_in_codeblock'>A</span>
</span>    T::A* a7;                   <span class='comment'>// <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;A</span> is not a type name:
</span>                                <span class='comment'>// multiplication of <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;A</span> by <span class='tcode_in_codeblock'>a7</span>; ill-formed, no visible declaration of <span class='tcode_in_codeblock'>a7</span>
</span>    B* a8;                      <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is not a type name:
</span>                                <span class='comment'>// multiplication of <span class='tcode_in_codeblock'>B</span> by <span class='tcode_in_codeblock'>a8</span>; ill-formed, no visible declarations of <span class='tcode_in_codeblock'>B</span> and <span class='tcode_in_codeblock'>a8</span>
</span>  }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='res-3'><div class='marginalizedparent'><a class='marginalized' href='#res-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4016'>#</a></div><div id='res-3.sentence-1' class='sentence'>When a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> is intended to refer to a type
that is not a member of the current instantiation (<a href='temp.dep.type'>[temp.dep.type]</a>)
and its <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
refers to a dependent type,
it shall be
prefixed by the keyword <span class='texttt'>typename</span>, forming a
<i ><a href='temp.res#nt:typename-specifier'>typename-specifier</a></i><a class='hidden_link' href='#res-3.sentence-1'>.</a></div> <div id='res-3.sentence-2' class='sentence'>If the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> in a <i ><a href='temp.res#nt:typename-specifier'>typename-specifier</a></i>
does not denote a type
or a class template,
the program is ill-formed<a class='hidden_link' href='#res-3.sentence-2'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:typename-specifier' id='nt:typename-specifier'>typename-specifier:</a>
&#9;<span class='terminal'>typename</span> <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> <i ><a href='lex.name#nt:identifier'>identifier</a></i>
&#9;<span class='terminal'>typename</span> <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> <span class='terminal'>template<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
</pre></div><div class='para' id='res-4'><div class='marginalizedparent'><a class='marginalized' href='#res-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4035'>#</a></div><div id='res-4.sentence-1' class='sentence'>If a specialization of a template is instantiated for a set of
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
such that the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
prefixed by
<span class='texttt'>typename</span>
does not denote a type
or a class template,
the specialization is ill-formed<a class='hidden_link' href='#res-4.sentence-1'>.</a></div> <div id='res-4.sentence-2' class='sentence'>The usual <a href='basic.lookup.qual'>qualified name lookup</a> is used to find the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
even in the presence of
<span class='texttt'>typename</span><a class='hidden_link' href='#res-4.sentence-2'>.</a></div> <div id='res-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#res-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  struct X { };
  int X;
};
struct B {
  struct X { };
};
template&lt;class T&gt; void f(T t) {
  typename T::X x;
}
void foo() {
  A a;
  B b;
  f(b);             <span class='comment'>// OK: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> refers to <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;X</span>
</span>  f(a);             <span class='comment'>// error: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> refers to the data member <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span> not the struct <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='res-5'><div class='marginalizedparent'><a class='marginalized' href='#res-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4071'>#</a></div><div id='res-5.sentence-1' class='sentence'>A qualified name used as the name in a
<i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
or an
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>
is implicitly assumed to name a type, without the use of the
<span class='texttt'>typename</span>
keyword<a class='hidden_link' href='#res-5.sentence-1'>.</a></div> <div id='res-5.sentence-2' class='sentence'>In a <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> that immediately contains a <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
that depends on a template parameter, the <i ><a href='lex.name#nt:identifier'>identifier</a></i> or <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
is implicitly assumed to name a type, without the use of the <span class='texttt'>typename</span> keyword<a class='hidden_link' href='#res-5.sentence-2'>.</a></div> <div id='res-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#res-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='res-5.sentence-3' class='sentence'>The
<span class='texttt'>typename</span>
keyword is not permitted by the syntax of these constructs<a class='hidden_link' href='#res-5.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='res-6'><div class='marginalizedparent'><a class='marginalized' href='#res-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4088'>#</a></div><div id='res-6.sentence-1' class='sentence'>If, for a given set of template arguments, a specialization of a template is
instantiated
that refers to a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
that denotes a type
or a class template,
and the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> refers to a member of an unknown specialization,
the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> shall either be
prefixed by <span class='texttt'>typename</span> or shall be used in a context in which it
implicitly names a type as described above<a class='hidden_link' href='#res-6.sentence-1'>.</a></div> <div id='res-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#res-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; void f(int i) {
  T::x * i;         <span class='comment'>// <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;x</span> must not be a type
</span>}

struct Foo {
  typedef int x;
};

struct Bar {
  static int const x = 5;
};

int main() {
  f&lt;Bar&gt;(1);        <span class='comment'>// OK
</span>  f&lt;Foo&gt;(1);        <span class='comment'>// error: <span class='tcode_in_codeblock'>Foo&#x200b;::&#x200b;x</span> is a type
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='res-7'><div class='marginalizedparent'><a class='marginalized' href='#res-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4120'>#</a></div><div id='res-7.sentence-1' class='sentence'>Within the definition of a class template or within the definition of a
member of a class template following the <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i>, the keyword
<span class='texttt'>typename</span>
is not required when referring to the name of a previously
declared member of the class template that declares a type
or a class template<a class='hidden_link' href='#res-7.sentence-1'>.</a></div> <div id='res-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#res-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='res-7.sentence-2' class='sentence'>Such names can be found using <a href='basic.lookup.unqual'>unqualified name lookup</a>,
class member lookup (<a href='class.qual'>[class.qual]</a>) into the <a href='temp.dep.type#def:current_instantiation'>current instantiation</a>,
or class member access expression lookup (<a href='basic.lookup.classref'>[basic.lookup.classref]</a>) when the
type of the object expression is the current instantiation (<a href='temp.dep.expr'>[temp.dep.expr]</a>)<a class='hidden_link' href='#res-7.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='res-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#res-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  typedef int B;
  B b;              <span class='comment'>// OK, no typename required
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='res-8'><div class='marginalizedparent'><a class='marginalized' href='#res-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4142'>#</a></div><div id='res-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':checking,syntax'></a></span><span class='indexparent'><a class='index' id=':checking,point_of_error'></a></span>Knowing which names are type names allows the syntax of every template
to be checked<a class='hidden_link' href='#res-8.sentence-1'>.</a></div> <div id='res-8.sentence-2' class='sentence'>The program is ill-formed, no diagnostic required, if:</div><div id='res-8.sentence-3' class='sentence'><ul class='itemize'><li id='res-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.1'>(8.1)</a></div><div id='res-8.1.sentence-1' class='sentence'>no valid specialization can be generated for a template
or a substatement of a <a href='stmt.if#def:constexpr_if'>constexpr if</a> statement within a template
and the template is not instantiated, or</div></li><li id='res-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.2'>(8.2)</a></div><div id='res-8.2.sentence-1' class='sentence'>no substitution of template arguments
into a <i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i> or <i ><a href='temp#nt:requires-clause'>requires-clause</a></i>
would result in a valid expression, or</div></li><li id='res-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.3'>(8.3)</a></div><div id='res-8.3.sentence-1' class='sentence'>every valid specialization of a variadic template requires an empty template
parameter pack, or</div></li><li id='res-8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.4'>(8.4)</a></div><div id='res-8.4.sentence-1' class='sentence'>a hypothetical instantiation of a template
immediately following its definition
would be ill-formed
due to a construct that does not depend on a template parameter, or</div></li><li id='res-8.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.5'>(8.5)</a></div><div id='res-8.5.sentence-1' class='sentence'>the interpretation of such a construct
in the hypothetical instantiation
is different from
the interpretation of the corresponding construct
in any actual instantiation of the template<a class='hidden_link' href='#res-8.5.sentence-1'>.</a></div> <div id='res-8.5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#res-8.5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='res-8.5.sentence-2' class='sentence'>This can happen in situations including the following:
<ul class='itemize'><li id='res-8.5.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.1'>(8.5.1)</a></div><div id='res-8.5.1.sentence-1' class='sentence'>a type used in a non-dependent name is incomplete at the point at which a
template is defined but is complete at the point at which an instantiation is
performed, or</div></li><li id='res-8.5.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.2'>(8.5.2)</a></div><div id='res-8.5.2.sentence-1' class='sentence'>lookup for a name in the template definition found a <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>,
but the lookup in the corresponding scope in the instantiation
does not find any declarations because the <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>
was a pack expansion and the corresponding pack is empty, or</div></li><li id='res-8.5.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.3'>(8.5.3)</a></div><div id='res-8.5.3.sentence-1' class='sentence'>an instantiation uses a default argument or default template argument
that had not been defined at the point at which the template was defined, or</div></li><li id='res-8.5.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.4'>(8.5.4)</a></div><div id='res-8.5.4.sentence-1' class='sentence'><a href='expr.const'>constant expression evaluation</a> within the template
instantiation uses
  <ul class='itemize'><li id='res-8.5.4.1'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#res-8.5.4.1'>(8.5.4.1)</a></div><div id='res-8.5.4.1.sentence-1' class='sentence'>
  the value of a const object of integral or unscoped enumeration type or</div></li><li id='res-8.5.4.2'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#res-8.5.4.2'>(8.5.4.2)</a></div><div id='res-8.5.4.2.sentence-1' class='sentence'>the value of a <span class='texttt'>constexpr</span> object or</div></li><li id='res-8.5.4.3'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#res-8.5.4.3'>(8.5.4.3)</a></div><div id='res-8.5.4.3.sentence-1' class='sentence'>the value of a reference or</div></li><li id='res-8.5.4.4'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#res-8.5.4.4'>(8.5.4.4)</a></div><div id='res-8.5.4.4.sentence-1' class='sentence'>the definition of a constexpr function,</div></li></ul>
and that entity was not defined when the template was defined, or</div></li><li id='res-8.5.5'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.5'>(8.5.5)</a></div><div id='res-8.5.5.sentence-1' class='sentence'>a class template specialization or variable template specialization that
is specified by a non-dependent <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i> is used by
the template, and either it is instantiated from a partial specialization that
was not defined when the template was defined or it names an explicit
specialization that was not declared when the template was defined<a class='hidden_link' href='#res-8.5.5.sentence-1'>.</a></div></li></ul></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div><div id='res-8.sentence-4' class='sentence'>Otherwise, no diagnostic shall be issued for a template
for which a valid specialization can be generated<a class='hidden_link' href='#res-8.sentence-4'>.</a></div> <div id='res-8.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#res-8.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='res-8.sentence-5' class='sentence'>If a template is instantiated, errors will be diagnosed according
to the other rules in this document<a class='hidden_link' href='#res-8.sentence-5'>.</a></div> <div id='res-8.sentence-6' class='sentence'>Exactly when these errors are diagnosed is a quality of implementation issue<a class='hidden_link' href='#res-8.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='res-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#res-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int j;
template&lt;class T&gt; class X {
  void f(T t, int i, char* p) {
    t = i;          <span class='comment'>// diagnosed if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is instantiated, and the assignment to <span class='tcode_in_codeblock'>t</span> is an error
</span>    p = i;          <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is not instantiated
</span>    p = j;          <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is not instantiated
</span>  }
  void g(T t) {
    +;              <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;g</span> is not instantiated
</span>  }
};

template&lt;class... T&gt; struct A {
  void operator++(int, T... t);                     <span class='comment'>// error: too many parameters
</span>};
template&lt;class... T&gt; union X : T... { };            <span class='comment'>// error: union with base class
</span>template&lt;class... T&gt; struct A : T...,  T... { };    <span class='comment'>// error: duplicate base class
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='res-9'><div class='marginalizedparent'><a class='marginalized' href='#res-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4236'>#</a></div><div id='res-9.sentence-1' class='sentence'>When looking for the declaration of a name used in a template definition,
the usual lookup rules (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>, <a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)
are used for non-dependent names<a class='hidden_link' href='#res-9.sentence-1'>.</a></div> <div id='res-9.sentence-2' class='sentence'>The lookup of names dependent on the template parameters
is postponed until the actual template argument is known (<a href='temp.dep'>[temp.dep]</a>)<a class='hidden_link' href='#res-9.sentence-2'>.</a></div> <div id='res-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#res-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
#include &lt;iostream&gt;
using namespace std;

template&lt;class T&gt; class Set {
  T* p;
  int cnt;
public:
  Set();
  Set&lt;T&gt;(const Set&lt;T&gt;&amp;);
  void printall() {
    for (int i = 0; i&lt;cnt; i++)
      cout &lt;&lt; p[i] &lt;&lt; '\n';
  }
};</pre><div id='res-9.sentence-3' class='sentence'>In the example,
<span class='texttt'>i</span>
is the local variable
<span class='texttt'>i</span>
declared in
<span class='texttt'>printall</span>,
<span class='texttt'>cnt</span>
is the member
<span class='texttt'>cnt</span>
declared in
<span class='texttt'>Set</span>,
and
<span class='texttt'>cout</span>
is the standard output stream declared in
<span class='texttt'>iostream</span><a class='hidden_link' href='#res-9.sentence-3'>.</a></div> <div id='res-9.sentence-4' class='sentence'>However, not every declaration can be found this way; the resolution of
some names must be postponed
until the actual
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
are known<a class='hidden_link' href='#res-9.sentence-4'>.</a></div> <div id='res-9.sentence-5' class='sentence'>For example, even though the name
<span class='texttt'>operator&lt;&lt;</span>
is known within the definition of
<span class='texttt'>printall()</span>
and a declaration of it can be found in
<span class='texttt'>&lt;iostream&gt;</span>,
the actual declaration of
<span class='texttt'>operator&lt;&lt;</span>
needed to print
<span class='texttt'>p[i]</span>
cannot be known until it is known what type
<span class='texttt'>T</span>
is (<a href='temp.dep'>[temp.dep]</a>)<a class='hidden_link' href='#res-9.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='res-10'><div class='marginalizedparent'><a class='marginalized' href='#res-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4296'>#</a></div><div id='res-10.sentence-1' class='sentence'>If a name does not depend on a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
(as defined in <a href='temp.dep'>[temp.dep]</a>), a declaration (or set of declarations) for that
name shall be in scope at the point where the name appears in the template
definition; the name is bound to the declaration (or declarations) found
at that point and this binding is not affected by declarations that are
visible at the point of instantiation<a class='hidden_link' href='#res-10.sentence-1'>.</a></div> <div id='res-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#res-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
void f(char);

template&lt;class T&gt; void g(T t) {
  f(1);             <span class='comment'>// <span class='tcode_in_codeblock'>f(char)</span>
</span>  f(T(1));          <span class='comment'>// dependent
</span>  f(t);             <span class='comment'>// dependent
</span>  dd++;             <span class='comment'>// not dependent; error: declaration for <span class='tcode_in_codeblock'>dd</span> not found
</span>}

enum E { e };
void f(E);

double dd;
void h() {
  g(e);             <span class='comment'>// will cause one call of <span class='tcode_in_codeblock'>f(char)</span> followed by two calls of <span class='tcode_in_codeblock'>f(E)</span>
</span>  g('a');           <span class='comment'>// will cause three calls of <span class='tcode_in_codeblock'>f(char)</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='res-11'><div class='marginalizedparent'><a class='marginalized' href='#res-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4327'>#</a></div><div id='res-11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#res-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='res-11.sentence-1' class='sentence'>For purposes of name lookup, default arguments and
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><span class='textit'>s</span> of function templates and default
arguments and <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><span class='textit'>s</span> of
member functions of class templates are considered definitions (<a href='temp.decls'>[temp.decls]</a>)<a class='hidden_link' href='#res-11.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='local' class='section'><h3 ><a class='secnum' href='#local' style='min-width:103pt'>17.7.1</a> Locally declared names <a class='abbr_ref' href='temp.local'>[temp.local]</a></h3><div class='para' id='local-1'><div class='marginalizedparent'><a class='marginalized' href='#local-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4337'>#</a></div><div id='local-1.sentence-1' class='sentence'>Like normal (non-template) classes, class templates have an
<a href='class#def:injected-class-name'>injected-class-name</a><a class='hidden_link' href='#local-1.sentence-1'>.</a></div> <div id='local-1.sentence-2' class='sentence'>The
injected-class-name can be used
as a <i ><a href='temp.names#nt:template-name'>template-name</a></i> or a <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i><a class='hidden_link' href='#local-1.sentence-2'>.</a></div> <div id='local-1.sentence-3' class='sentence'>When it is used with a
<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>,
as a <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> for a template <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>,
or as the final identifier in the <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> of
a friend class template declaration,
it refers to the
class template itself<a class='hidden_link' href='#local-1.sentence-3'>.</a></div> <div id='local-1.sentence-4' class='sentence'>Otherwise, it is equivalent to the <i ><a href='temp.names#nt:template-name'>template-name</a></i>
followed by the <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> of the class template
enclosed in <span class='texttt'>&lt;&gt;</span><a class='hidden_link' href='#local-1.sentence-4'>.</a></div></div><div class='para' id='local-2'><div class='marginalizedparent'><a class='marginalized' href='#local-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4353'>#</a></div><div id='local-2.sentence-1' class='sentence'>Within the scope of a class template specialization or
partial specialization, when the injected-class-name is
used as a <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>,
it is equivalent to the <i ><a href='temp.names#nt:template-name'>template-name</a></i> followed by the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
of the class template specialization or partial
specialization enclosed in
<span class='texttt'>&lt;&gt;</span><a class='hidden_link' href='#local-2.sentence-1'>.</a></div> <div id='local-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#local-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;template&lt;class&gt; class T&gt; class A { };
template&lt;class T&gt; class Y;
template&lt;&gt; class Y&lt;int&gt; {
  Y* p;                                 <span class='comment'>// meaning <span class='tcode_in_codeblock'>Y&lt;int&gt;</span>
</span>  Y&lt;char&gt;* q;                           <span class='comment'>// meaning <span class='tcode_in_codeblock'>Y&lt;char&gt;</span>
</span>  A&lt;Y&gt;* a;                              <span class='comment'>// meaning <span class='tcode_in_codeblock'>A&lt;&#x200b;::&#x200b;Y&gt;</span>
</span>  class B {
    template&lt;class&gt; friend class Y;     <span class='comment'>// meaning <span class='tcode_in_codeblock'>&#x200b;::&#x200b;Y</span>
</span>  };
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='local-3'><div class='marginalizedparent'><a class='marginalized' href='#local-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4377'>#</a></div><div id='local-3.sentence-1' class='sentence'>The injected-class-name of a class template or class
template specialization can be used either
as a <i ><a href='temp.names#nt:template-name'>template-name</a></i> or a <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>
wherever it is in scope<a class='hidden_link' href='#local-3.sentence-1'>.</a></div> <div id='local-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#local-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct Base {
  Base* p;
};

template &lt;class T&gt; struct Derived: public Base&lt;T&gt; {
  typename Derived::Base* p;            <span class='comment'>// meaning <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;Base&lt;T&gt;</span>
</span>};

template&lt;class T, template&lt;class&gt; class U = T::template Base&gt; struct Third { };
Third&lt;Base&lt;int&gt; &gt; t;                    <span class='comment'>// OK: default argument uses injected-class-name as a template
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='local-4'><div class='marginalizedparent'><a class='marginalized' href='#local-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4397'>#</a></div><div id='local-4.sentence-1' class='sentence'>A lookup that finds an injected-class-name (<a href='class.member.lookup'>[class.member.lookup]</a>) can result in an ambiguity in
certain cases (for example, if it is found in more than one
base class)<a class='hidden_link' href='#local-4.sentence-1'>.</a></div> <div id='local-4.sentence-2' class='sentence'>If all of the injected-class-names that are
found refer to specializations of the same class template,
and if the name
is used as a <i ><a href='temp.names#nt:template-name'>template-name</a></i>,
the reference refers to the class template itself and not a
specialization thereof, and is not ambiguous<a class='hidden_link' href='#local-4.sentence-2'>.</a></div> <div id='local-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#local-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct Base { };
template &lt;class T&gt; struct Derived: Base&lt;int&gt;, Base&lt;char&gt; {
  typename Derived::Base b;             <span class='comment'>// error: ambiguous
</span>  typename Derived::Base&lt;double&gt; d;     <span class='comment'>// OK
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='local-5'><div class='marginalizedparent'><a class='marginalized' href='#local-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4417'>#</a></div><div id='local-5.sentence-1' class='sentence'>When the normal name of the template (i.e., the name from
the enclosing scope, not the injected-class-name) is
used,
it always refers to the class template itself and not a
specialization of the template.
<div id='local-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#local-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class X {
  X* p;                                 <span class='comment'>// meaning <span class='tcode_in_codeblock'>X&lt;T&gt;</span>
</span>  X&lt;T&gt;* p2;
  X&lt;int&gt;* p3;
  ::X* p4;                              <span class='comment'>// error: missing template argument list
</span>                                        <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span> does not refer to the injected-class-name
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='local-6'><div class='marginalizedparent'><a class='marginalized' href='#local-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4435'>#</a></div><div id='local-6.sentence-1' class='sentence'>A
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall not be redeclared within its scope (including nested scopes)<a class='hidden_link' href='#local-6.sentence-1'>.</a></div> <div id='local-6.sentence-2' class='sentence'>A
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall not have the same name as the template name<a class='hidden_link' href='#local-6.sentence-2'>.</a></div> <div id='local-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#local-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T, int i&gt; class Y {
  int T;                                <span class='comment'>// error: template-parameter redeclared
</span>  void f() {
    char T;                             <span class='comment'>// error: template-parameter redeclared
</span>  }
};

template&lt;class X&gt; class X;              <span class='comment'>// error: template-parameter redeclared
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='local-7'><div class='marginalizedparent'><a class='marginalized' href='#local-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4455'>#</a></div><div id='local-7.sentence-1' class='sentence'>In the definition of a member of
a class template that appears outside of the class template definition,
the name of a member of the class template hides the name of a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
of any enclosing class templates (but not a <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> of the
member if the member is a class or function template)<a class='hidden_link' href='#local-7.sentence-1'>.</a></div> <div id='local-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#local-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  typedef void C;
  void f();
  template&lt;class U&gt; void g(U);
};

template&lt;class B&gt; void A&lt;B&gt;::f() {
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>, not the template parameter
</span>}

template&lt;class B&gt; template&lt;class C&gt; void A&lt;B&gt;::g(C) {
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>, not the template parameter
</span>  C c;              <span class='comment'>// the template parameter <span class='tcode_in_codeblock'>C</span>, not <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>C</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='local-8'><div class='marginalizedparent'><a class='marginalized' href='#local-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4483'>#</a></div><div id='local-8.sentence-1' class='sentence'>In the definition of a member of a class template that appears outside of the
namespace containing the class template definition,
the name of a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
hides the name of a member of this namespace<a class='hidden_link' href='#local-8.sentence-1'>.</a></div> <div id='local-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#local-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace N {
  class C { };
  template&lt;class T&gt; class B {
    void f(T);
  };
}
template&lt;class C&gt; void N::B&lt;C&gt;::f(C) {
  C b;              <span class='comment'>// <span class='tcode_in_codeblock'>C</span> is the template parameter, not <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;C</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='local-9'><div class='marginalizedparent'><a class='marginalized' href='#local-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4504'>#</a></div><div id='local-9.sentence-1' class='sentence'>In the definition of a class template or in the definition of a member of such
a template that appears outside of the template definition,
for each non-dependent base class (<a href='temp.dep.type'>[temp.dep.type]</a>),
if the name of the base class
or the name of a member of the
base class is the same as the name of a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>,
the base class name or member name <a href='basic.scope.hiding'>hides</a> the
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
name<a class='hidden_link' href='#local-9.sentence-1'>.</a></div> <div id='local-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#local-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  int a;
  int Y;
};

template&lt;class B, class a&gt; struct X : A {
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>
</span>  a b;              <span class='comment'>// error: <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>a</span> isn't a type name
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='dep' class='section'><h3 ><a class='secnum' href='#dep' style='min-width:103pt'>17.7.2</a> Dependent names <a class='abbr_ref' href='temp.dep'>[temp.dep]</a></h3><div class='para' id='dep-1'><div class='marginalizedparent'><a class='marginalized' href='#dep-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4533'>#</a></div><div id='dep-1.sentence-1' class='sentence'>Inside a template, some constructs have semantics which may differ from one
instantiation to another<a class='hidden_link' href='#dep-1.sentence-1'>.</a></div> <div id='dep-1.sentence-2' class='sentence'>Such a construct
depends
on the template parameters<a class='hidden_link' href='#dep-1.sentence-2'>.</a></div> <div id='dep-1.sentence-3' class='sentence'>In particular, types and expressions may depend on the type
and/or
value of
template parameters (as determined by the template arguments) and this determines
the context for name lookup for certain names<a class='hidden_link' href='#dep-1.sentence-3'>.</a></div> <div id='dep-1.sentence-4' class='sentence'>An expressions may be
<a class='hidden_link' href='#def:expression,type-dependent' id='def:expression,type-dependent'><i >type-dependent</i></a>
(that is, its type may depend on a template parameter) or
<a class='hidden_link' href='#def:expression,value-dependent' id='def:expression,value-dependent'><i >value-dependent</i></a>
(that is, its value when evaluated as a constant expression (<a href='expr.const'>[expr.const]</a>)
may depend on a template parameter)
as described in this subclause<a class='hidden_link' href='#dep-1.sentence-4'>.</a></div> <div id='dep-1.sentence-5' class='sentence'>In an expression of the form:</div><pre class='ncbnftab'><i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
</pre><div id='dep-1.sentence-6' class='sentence'>where the
<i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i>
is an
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>,
the
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
denotes a
<a class='hidden_link' href='#def:name,dependent' id='def:name,dependent'><i >dependent name</i></a>
if</div><div id='dep-1.sentence-7' class='sentence'><ul class='itemize'><li id='dep-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep-1.1'>(1.1)</a></div><div id='dep-1.1.sentence-1' class='sentence'>any of the expressions in the <i ><a href='expr.post#nt:expression-list'>expression-list</a></i> is a
<a href='temp.variadic#def:pack_expansion'>pack expansion</a>,</div></li><li id='dep-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep-1.2'>(1.2)</a></div><div id='dep-1.2.sentence-1' class='sentence'>any of the expressions
or <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i><span class='textit'>s</span>
in the
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
is <a href='temp.dep.expr'>type-dependent</a>, or</div></li><li id='dep-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep-1.3'>(1.3)</a></div><div id='dep-1.3.sentence-1' class='sentence'>the <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
is a <i ><a href='temp.names#nt:template-id'>template-id</a></i> in which any of the template arguments depends
on a template parameter<a class='hidden_link' href='#dep-1.3.sentence-1'>.</a></div></li></ul></div><div id='dep-1.sentence-8' class='sentence'>If an operand of an operator is a type-dependent expression, the operator
also denotes a dependent name<a class='hidden_link' href='#dep-1.sentence-8'>.</a></div> <div id='dep-1.sentence-9' class='sentence'>Such names are unbound and
are looked up at the point of the template instantiation (<a href='temp.point'>[temp.point]</a>) in
both the context of the template definition and the
context of the point of instantiation<a class='hidden_link' href='#dep-1.sentence-9'>.</a></div></div><div class='para' id='dep-2'><div class='marginalizedparent'><a class='marginalized' href='#dep-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4594'>#</a></div><div id='dep-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dep-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct X : B&lt;T&gt; {
  typename T::A* pa;
  void f(B&lt;T&gt;* pb) {
    static int i = B&lt;T&gt;::i;
    pb-&gt;j++;
  }
};</pre><div id='dep-2.sentence-1' class='sentence'>The base class name
<span class='texttt'>B&lt;T&gt;</span>,
the type name
<span class='texttt'>T&#x200b;::&#x200b;A</span>,
the names
<span class='texttt'>B&lt;T&gt;&#x200b;::&#x200b;i</span>
and
<span class='texttt'>pb-&gt;j</span>
explicitly depend on the
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><a class='hidden_link' href='#dep-2.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dep-3'><div class='marginalizedparent'><a class='marginalized' href='#dep-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4618'>#</a></div><div id='dep-3.sentence-1' class='sentence'>In the definition of a class or class template,
the scope of a <a href='temp.dep.type#def:base_class,dependent'>dependent base class</a>
is not examined during unqualified
name lookup either at the point of definition of the
class template or member or during an instantiation of
the class template or member<a class='hidden_link' href='#dep-3.sentence-1'>.</a></div> <div id='dep-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dep-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
typedef double A;
template&lt;class T&gt; class B {
  typedef int A;
};
template&lt;class T&gt; struct X : B&lt;T&gt; {
  A a;              <span class='comment'>// <span class='tcode_in_codeblock'>a</span> has type <span class='tcode_in_codeblock'>double</span>
</span>};</pre><div id='dep-3.sentence-2' class='sentence'>The type name
<span class='texttt'>A</span>
in the definition of
<span class='texttt'>X&lt;T&gt;</span>
binds to the typedef name defined in the global
namespace scope, not to the typedef name
defined in the base class
<span class='texttt'>B&lt;T&gt;</span><a class='hidden_link' href='#dep-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='dep-3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dep-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  int a;
  int Y;
};

int a;

template&lt;class T&gt; struct Y : T {
  struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  B b;                          <span class='comment'>// The <span class='tcode_in_codeblock'>B</span> defined in <span class='tcode_in_codeblock'>Y</span>
</span>  void f(int i) { a = i; }      <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;a</span>
</span>  Y* p;                         <span class='comment'>// <span class='tcode_in_codeblock'>Y&lt;T&gt;</span>
</span>};

Y&lt;A&gt; ya;</pre><div id='dep-3.sentence-3' class='sentence'>The members
<span class='texttt'>A&#x200b;::&#x200b;B</span>,
<span class='texttt'>A&#x200b;::&#x200b;a</span>,
and
<span class='texttt'>A&#x200b;::&#x200b;Y</span>
of the template argument
<span class='texttt'>A</span>
do not affect the binding of names in
<span class='texttt'>Y&lt;A&gt;</span><a class='hidden_link' href='#dep-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='dep.type' class='section'><h4 ><a class='secnum' href='#dep.type' style='min-width:118pt'>17.7.2.1</a> Dependent types <a class='abbr_ref' href='temp.dep.type'>[temp.dep.type]</a></h4><div class='para' id='dep.type-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4680'>#</a></div><div id='dep.type-1.sentence-1' class='sentence'>A name refers to the
<a class='hidden_link' href='#def:current_instantiation' id='def:current_instantiation'><i >current instantiation</i></a>
if it is</div><div id='dep.type-1.sentence-2' class='sentence'><ul class='itemize'><li id='dep.type-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-1.1'>(1.1)</a></div><div id='dep.type-1.1.sentence-1' class='sentence'>in the definition of a class template, a nested class of a class template,
a member of a class template, or a member of a nested class of a class template,
the <a href='class#def:injected-class-name'>injected-class-name</a> of the class template or nested class,</div></li><li id='dep.type-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-1.2'>(1.2)</a></div><div id='dep.type-1.2.sentence-1' class='sentence'>in the definition of a primary class template
or a member of a primary class template, the name of the
class template followed by the template argument list of the
primary template (as described below) enclosed in
<span class='texttt'>&lt;&gt;</span> (or an equivalent template alias specialization),</div></li><li id='dep.type-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-1.3'>(1.3)</a></div><div id='dep.type-1.3.sentence-1' class='sentence'>in the definition of a nested class of a class template,
the name of the nested class referenced as a member of the
current instantiation, or</div></li><li id='dep.type-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-1.4'>(1.4)</a></div><div id='dep.type-1.4.sentence-1' class='sentence'>in the definition of a partial specialization
or a member of a partial specialization, the name of
the class template followed by the template argument list of
the partial specialization enclosed in
<span class='texttt'>&lt;&gt;</span> (or an equivalent template alias specialization)<a class='hidden_link' href='#dep.type-1.4.sentence-1'>.</a></div> <div id='dep.type-1.4.sentence-2' class='sentence'>If the <span class='textit'>n</span>th template parameter is
a parameter pack, the <span class='textit'>n</span>th template argument is a
<a href='temp.variadic#def:pack_expansion'>pack expansion</a> whose pattern is the name of
the parameter pack<a class='hidden_link' href='#dep.type-1.4.sentence-2'>.</a></div></li></ul></div></div><div class='para' id='dep.type-2'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4712'>#</a></div><div id='dep.type-2.sentence-1' class='sentence'>The template argument list of a primary template is a
template argument list in which the
<span class='textit'>n</span>th
template argument has the value of the
<span class='textit'>n</span>th
template parameter of the class template<a class='hidden_link' href='#dep.type-2.sentence-1'>.</a></div> <div id='dep.type-2.sentence-2' class='sentence'>If the <span class='textit'>n</span>th template parameter is a
<a href='temp.variadic#def:template_parameter_pack'>template parameter pack</a>, the <span class='textit'>n</span>th template argument is a
<a href='temp.variadic#def:pack_expansion'>pack expansion</a> whose pattern is the name of
the template parameter pack<a class='hidden_link' href='#dep.type-2.sentence-2'>.</a></div></div><div class='para' id='dep.type-3'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4724'>#</a></div><div id='dep.type-3.sentence-1' class='sentence'>A template argument that is equivalent to a template
parameter can be used in place of that
template parameter in a reference to the current instantiation<a class='hidden_link' href='#dep.type-3.sentence-1'>.</a></div> <div id='dep.type-3.sentence-2' class='sentence'>For a template <i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i>,
a template argument is equivalent to a template parameter
if it denotes the same type<a class='hidden_link' href='#dep.type-3.sentence-2'>.</a></div> <div id='dep.type-3.sentence-3' class='sentence'>For a non-type template parameter,
a template argument is equivalent to a template parameter
if it is an <i ><a href='lex.name#nt:identifier'>identifier</a></i> that names a variable
that is equivalent to the template parameter<a class='hidden_link' href='#dep.type-3.sentence-3'>.</a></div> <div id='dep.type-3.sentence-4' class='sentence'>A variable is equivalent to a template parameter if
<ul class='itemize'><li id='dep.type-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-3.1'>(3.1)</a></div><div id='dep.type-3.1.sentence-1' class='sentence'>it has the same type as the template parameter
  (ignoring cv-qualification) and</div></li><li id='dep.type-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-3.2'>(3.2)</a></div><div id='dep.type-3.2.sentence-1' class='sentence'>its initializer consists of a single <i ><a href='lex.name#nt:identifier'>identifier</a></i>
  that names the template parameter or, recursively, such a variable<a class='hidden_link' href='#dep.type-3.2.sentence-1'>.</a></div></li></ul></div> <div id='dep.type-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.type-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-3.sentence-5' class='sentence'>Using a parenthesized variable name breaks the equivalence<a class='hidden_link' href='#dep.type-3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='dep.type-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dep.type-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; class A {
  A* p1;                        <span class='comment'>// <span class='tcode_in_codeblock'>A</span> is the current instantiation
</span>  A&lt;T&gt;* p2;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;</span> is the current instantiation
</span>  A&lt;T*&gt; p3;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;</span> is not the current instantiation
</span>  ::A&lt;T&gt;* p4;                   <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;A&lt;T&gt;</span> is the current instantiation
</span>  class B {
    B* p1;                      <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is the current instantiation
</span>    A&lt;T&gt;::B* p2;                <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;B</span> is the current instantiation
</span>    typename A&lt;T*&gt;::B* p3;      <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;&#x200b;::&#x200b;B</span> is not the current instantiation
</span>  };
};

template &lt;class T&gt; class A&lt;T*&gt; {
  A&lt;T*&gt;* p1;                    <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;</span> is the current instantiation
</span>  A&lt;T&gt;* p2;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;</span> is not the current instantiation
</span>};

template &lt;class T1, class T2, int I&gt; struct B {
  B&lt;T1, T2, I&gt;* b1;             <span class='comment'>// refers to the current instantiation
</span>  B&lt;T2, T1, I&gt;* b2;             <span class='comment'>// not the current instantiation
</span>  typedef T1 my_T1;
  static const int my_I = I;
  static const int my_I2 = I+0;
  static const int my_I3 = my_I;
  static const long my_I4 = I;
  static const int my_I5 = (I);
  B&lt;my_T1, T2, my_I&gt;* b3;       <span class='comment'>// refers to the current instantiation
</span>  B&lt;my_T1, T2, my_I2&gt;* b4;      <span class='comment'>// not the current instantiation
</span>  B&lt;my_T1, T2, my_I3&gt;* b5;      <span class='comment'>// refers to the current instantiation
</span>  B&lt;my_T1, T2, my_I4&gt;* b6;      <span class='comment'>// not the current instantiation
</span>  B&lt;my_T1, T2, my_I5&gt;* b7;      <span class='comment'>// not the current instantiation
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dep.type-4'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4784'>#</a></div><div id='dep.type-4.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:base_class,dependent' id='def:base_class,dependent'><i >dependent base class</i></a> is a base class that is a dependent type and is
not the current instantiation<a class='hidden_link' href='#dep.type-4.sentence-1'>.</a></div> <div id='dep.type-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.type-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-4.sentence-2' class='sentence'>A base class can be the current instantiation in the case of a nested class
naming an enclosing class as a base<a class='hidden_link' href='#dep.type-4.sentence-2'>.</a></div> <div id='dep.type-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dep.type-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  typedef int M;
  struct B {
    typedef void M;
    struct C;
  };
};

template&lt;class T&gt; struct A&lt;T&gt;::B::C : A&lt;T&gt; {
  M m;                          <span class='comment'>// OK, <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;M</span>
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dep.type-5'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4808'>#</a></div><div id='dep.type-5.sentence-1' class='sentence'>A name is a
<a class='hidden_link' href='#def:current_instantiation,member_of_the' id='def:current_instantiation,member_of_the'><i >member of the current instantiation</i></a>
if it is</div><div id='dep.type-5.sentence-2' class='sentence'><ul class='itemize'><li id='dep.type-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-5.1'>(5.1)</a></div><div id='dep.type-5.1.sentence-1' class='sentence'>An unqualified name that, when looked up, refers to
at least one member of a class that is
the current instantiation or a non-dependent base class thereof<a class='hidden_link' href='#dep.type-5.1.sentence-1'>.</a></div> <div id='dep.type-5.1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.type-5.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-5.1.sentence-2' class='sentence'>This can only occur when looking up a name in a scope enclosed by the
definition of a class template<a class='hidden_link' href='#dep.type-5.1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='dep.type-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-5.2'>(5.2)</a></div><div id='dep.type-5.2.sentence-1' class='sentence'>A
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
in which the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
refers to the current instantiation
and that, when looked up, refers to at least one member of a class that is
the current
instantiation or a non-dependent base class thereof<a class='hidden_link' href='#dep.type-5.2.sentence-1'>.</a></div> <div id='dep.type-5.2.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.type-5.2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-5.2.sentence-2' class='sentence'>If no such
member is found, and the current instantiation has any dependent base classes,
then the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> is a member of an unknown specialization;
see below<a class='hidden_link' href='#dep.type-5.2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='dep.type-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-5.3'>(5.3)</a></div><div id='dep.type-5.3.sentence-1' class='sentence'>An <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> denoting the member in a <a href='expr.ref'>class member access</a>
expression for which the type of the object expression is the
current instantiation, and the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>, when <a href='basic.lookup.classref'>looked
up</a>, refers to at least one member of a class
that is the current
instantiation or a non-dependent base class thereof<a class='hidden_link' href='#dep.type-5.3.sentence-1'>.</a></div> <div id='dep.type-5.3.note-3' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.type-5.3.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-5.3.sentence-2' class='sentence'>If no such
member is found, and the current instantiation has any dependent base classes,
then the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is a member of an unknown specialization;
see below<a class='hidden_link' href='#dep.type-5.3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div><div id='dep.type-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dep.type-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; class A {
  static const int i = 5;
  int n1[i];                    <span class='comment'>// <span class='tcode_in_codeblock'>i</span> refers to a member of the current instantiation
</span>  int n2[A::i];                 <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i</span> refers to a member of the current instantiation
</span>  int n3[A&lt;T&gt;::i];              <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;i</span> refers to a member of the current instantiation
</span>  int f();
};

template &lt;class T&gt; int A&lt;T&gt;::f() {
  return i;                     <span class='comment'>// <span class='tcode_in_codeblock'>i</span> refers to a member of the current instantiation
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='dep.type-5.sentence-3' class='sentence'>A name is a <a class='hidden_link' href='#def:current_instantiation,dependent_member_of_the' id='def:current_instantiation,dependent_member_of_the'><i >dependent member of the current instantiation</i></a> if it is a
member of the current instantiation that, when looked up, refers to at least
one member of a class that is the current instantiation<a class='hidden_link' href='#dep.type-5.sentence-3'>.</a></div></div><div class='para' id='dep.type-6'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4869'>#</a></div><div id='dep.type-6.sentence-1' class='sentence'>A name is a
<a class='hidden_link' href='#def:member_of_an_unknown_specialization' id='def:member_of_an_unknown_specialization'><i >member of an unknown specialization</i></a>
if it is</div><div id='dep.type-6.sentence-2' class='sentence'><ul class='itemize'><li id='dep.type-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-6.1'>(6.1)</a></div><div id='dep.type-6.1.sentence-1' class='sentence'>A
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
in which the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
names a dependent type that is not the current instantiation<a class='hidden_link' href='#dep.type-6.1.sentence-1'>.</a></div></li><li id='dep.type-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-6.2'>(6.2)</a></div><div id='dep.type-6.2.sentence-1' class='sentence'>A <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> in which the <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
refers to the current instantiation, the current instantiation has at least one
dependent base class, and name lookup of the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> does not
find any member of a class that is the current instantiation or a non-dependent
base class thereof<a class='hidden_link' href='#dep.type-6.2.sentence-1'>.</a></div></li><li id='dep.type-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-6.3'>(6.3)</a></div><div id='dep.type-6.3.sentence-1' class='sentence'>An <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> denoting the member in a
<a href='expr.ref'>class member access</a> expression in which either
<ul class='itemize'><li id='dep.type-6.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#dep.type-6.3.1'>(6.3.1)</a></div><div id='dep.type-6.3.1.sentence-1' class='sentence'>the type of the object expression is the current instantiation, the
current instantiation has at least one dependent base class, and name lookup
of the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> does not find a member of a class that is
the current instantiation or a non-dependent base class thereof; or</div></li><li id='dep.type-6.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#dep.type-6.3.2'>(6.3.2)</a></div><div id='dep.type-6.3.2.sentence-1' class='sentence'>the type of the object expression is dependent and is not the current
instantiation<a class='hidden_link' href='#dep.type-6.3.2.sentence-1'>.</a></div></li></ul></div></li></ul></div></div><div class='para' id='dep.type-7'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4901'>#</a></div><div id='dep.type-7.sentence-1' class='sentence'>If a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> in which the <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
refers to the current instantiation is not a member of the current instantiation
or a member of an unknown specialization, the program is ill-formed even if the
template containing the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> is not instantiated; no
diagnostic required<a class='hidden_link' href='#dep.type-7.sentence-1'>.</a></div> <div id='dep.type-7.sentence-2' class='sentence'>Similarly, if the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> in a class
member access expression for which the type of the object expression is the
current instantiation does not refer to a member of the current instantiation
or a member of an unknown specialization, the program is ill-formed even if the
template containing the member access expression is not instantiated; no diagnostic
required<a class='hidden_link' href='#dep.type-7.sentence-2'>.</a></div> <div id='dep.type-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dep.type-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class A {
  typedef int type;
  void f() {
    A&lt;T&gt;::type i;               <span class='comment'>// OK: refers to a member of the current instantiation
</span>    typename A&lt;T&gt;::other j;     <span class='comment'>// error: neither a member of the current instantiation nor
</span>                                <span class='comment'>// a member of an unknown specialization
</span>  }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dep.type-8'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4924'>#</a></div><div id='dep.type-8.sentence-1' class='sentence'>If, for a given set of template arguments, a specialization of a template is
instantiated that refers to a member of the current instantiation with a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> or class member access expression, the name in the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> or class member access expression is looked up in the
template instantiation context<a class='hidden_link' href='#dep.type-8.sentence-1'>.</a></div> <div id='dep.type-8.sentence-2' class='sentence'>If the result of this lookup differs from the
result of name lookup in the template definition context, name lookup is
ambiguous<a class='hidden_link' href='#dep.type-8.sentence-2'>.</a></div> <div id='dep.type-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dep.type-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  int m;
};

struct B {
  int m;
};

template&lt;typename T&gt;
struct C : A, T {
  int f() { return this-&gt;m; }   <span class='comment'>// finds <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> in the template definition context
</span>  int g() { return m; }         <span class='comment'>// finds <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> in the template definition context
</span>};

template int C&lt;B&gt;::f();     <span class='comment'>// error: finds both <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> and <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;m</span>
</span>template int C&lt;B&gt;::g();     <span class='comment'>// OK: transformation to class member access syntax
</span>                            <span class='comment'>// does not occur in the template definition context; see <a href='class.mfct.non-static'>[class.mfct.non-static]</a>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dep.type-9'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4954'>#</a></div><div id='dep.type-9.sentence-1' class='sentence'>A type is dependent if it is
<ul class='itemize'><li id='dep.type-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.1'>(9.1)</a></div><div id='dep.type-9.1.sentence-1' class='sentence'>a template parameter,</div></li><li id='dep.type-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.2'>(9.2)</a></div><div id='dep.type-9.2.sentence-1' class='sentence'>a member of an unknown specialization,</div></li><li id='dep.type-9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.3'>(9.3)</a></div><div id='dep.type-9.3.sentence-1' class='sentence'>a nested class or enumeration that is a dependent member of the current
instantiation,</div></li><li id='dep.type-9.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.4'>(9.4)</a></div><div id='dep.type-9.4.sentence-1' class='sentence'>a cv-qualified type where the cv-unqualified type is dependent,</div></li><li id='dep.type-9.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.5'>(9.5)</a></div><div id='dep.type-9.5.sentence-1' class='sentence'>a compound type constructed from any dependent type,</div></li><li id='dep.type-9.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.6'>(9.6)</a></div><div id='dep.type-9.6.sentence-1' class='sentence'>an array type whose element type is dependent or whose
bound (if any) is value-dependent,</div></li><li id='dep.type-9.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.7'>(9.7)</a></div><div id='dep.type-9.7.sentence-1' class='sentence'>a function type whose exception specification is value-dependent,</div></li><li id='dep.type-9.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.8'>(9.8)</a></div><div id='dep.type-9.8.sentence-1' class='sentence'>a
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
in which either the template name is a template parameter or any of the
template arguments is a dependent type or an expression that is type-dependent
or value-dependent or is a pack expansion
<div id='dep.type-9.8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.type-9.8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-9.8.sentence-2' class='sentence'>This includes an <a href='class#def:injected-class-name'>injected-class-name</a> of a class template
used without a <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><a class='hidden_link' href='#dep.type-9.8.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> , or</div></li><li id='dep.type-9.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.9'>(9.9)</a></div><div id='dep.type-9.9.sentence-1' class='sentence'>denoted by <span class='texttt'>decltype(</span><i ><a href='expr.comma#nt:expression'>expression</a></i><span class='texttt'>)</span>,
where <i ><a href='expr.comma#nt:expression'>expression</a></i> is <a href='temp.dep.expr'>type-dependent</a><a class='hidden_link' href='#dep.type-9.9.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='dep.type-10'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4987'>#</a></div><div id='dep.type-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.type-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-10.sentence-1' class='sentence'>Because typedefs do not introduce new types, but
instead simply refer to other types, a name that refers to a
typedef that is a member of the current instantiation is dependent
only if the type referred to is dependent<a class='hidden_link' href='#dep.type-10.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='dep.expr' class='section'><h4 ><a class='secnum' href='#dep.expr' style='min-width:118pt'>17.7.2.2</a> Type-dependent expressions <a class='abbr_ref' href='temp.dep.expr'>[temp.dep.expr]</a></h4><div class='para' id='dep.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L4997'>#</a></div><div id='dep.expr-1.sentence-1' class='sentence'>Except as described below, an expression is type-dependent if any
subexpression is type-dependent<a class='hidden_link' href='#dep.expr-1.sentence-1'>.</a></div></div><div class='para' id='dep.expr-2'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5001'>#</a></div><div id='dep.expr-2.sentence-1' class='sentence'><span class='texttt'>this</span>
is type-dependent if the class type of the enclosing member function is
dependent (<a href='temp.dep.type'>[temp.dep.type]</a>)<a class='hidden_link' href='#dep.expr-2.sentence-1'>.</a></div></div><div class='para' id='dep.expr-3'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5006'>#</a></div><div id='dep.expr-3.sentence-1' class='sentence'>An
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
is type-dependent if it contains</div><div id='dep.expr-3.sentence-2' class='sentence'><ul class='itemize'><li id='dep.expr-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.1'>(3.1)</a></div><div id='dep.expr-3.1.sentence-1' class='sentence'>an
<i ><a href='lex.name#nt:identifier'>identifier</a></i>
associated by name lookup with one or more declarations
declared with a dependent type,</div></li><li id='dep.expr-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.2'>(3.2)</a></div><div id='dep.expr-3.2.sentence-1' class='sentence'>an
<i ><a href='lex.name#nt:identifier'>identifier</a></i>
associated by name lookup with
a non-type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
declared with a type
that contains a <a href='dcl.spec.auto#def:placeholder_type'>placeholder type</a>,</div></li><li id='dep.expr-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.3'>(3.3)</a></div><div id='dep.expr-3.3.sentence-1' class='sentence'>an <i ><a href='lex.name#nt:identifier'>identifier</a></i> associated by name lookup with one or more
declarations of member functions of the current instantiation declared
with a return type that contains a placeholder type,</div></li><li id='dep.expr-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.4'>(3.4)</a></div><div id='dep.expr-3.4.sentence-1' class='sentence'>an <i ><a href='lex.name#nt:identifier'>identifier</a></i> associated by name lookup with
a <a href='dcl.struct.bind'>structured binding declaration</a> whose
<i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i> is type-dependent,</div></li><li id='dep.expr-3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.5'>(3.5)</a></div><div id='dep.expr-3.5.sentence-1' class='sentence'>the
<i ><a href='lex.name#nt:identifier'>identifier</a></i>
<a href='dcl.fct.def.general#:__func__'><span class='texttt'>_&shy;_&shy;func_&shy;_&shy;</span></a>, where any enclosing function is a
template, a member of a class template, or a generic lambda,</div></li><li id='dep.expr-3.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.6'>(3.6)</a></div><div id='dep.expr-3.6.sentence-1' class='sentence'>a
<i ><a href='temp.names#nt:template-id'>template-id</a></i>
that is dependent,</div></li><li id='dep.expr-3.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.7'>(3.7)</a></div><div id='dep.expr-3.7.sentence-1' class='sentence'>a
<i ><a href='class.conv.fct#nt:conversion-function-id'>conversion-function-id</a></i>
that specifies a dependent type, or</div></li><li id='dep.expr-3.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.8'>(3.8)</a></div><div id='dep.expr-3.8.sentence-1' class='sentence'>a
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
or a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
that names a member of an unknown specialization;</div></li></ul></div><div id='dep.expr-3.sentence-3' class='sentence'>or if it names a dependent member of the current instantiation that is a static
data member of type
“array of unknown bound of <span class='texttt'>T</span>” for some <span class='texttt'>T</span> (<a href='temp.static'>[temp.static]</a>)<a class='hidden_link' href='#dep.expr-3.sentence-3'>.</a></div> <div id='dep.expr-3.sentence-4' class='sentence'>Expressions of the following forms are type-dependent only if the type
specified by the
<i ><a href='dcl.name#nt:type-id'>type-id</a></i>,
<i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i>
or
<i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i>
is dependent, even if any subexpression is type-dependent:</div><pre class='ncbnftab'><i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i> <span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
<span class='terminal'>::<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> new</span> <i ><a href='expr.new#nt:new-placement'>new-placement</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i> <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
<span class='terminal'>::<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> new</span> <i ><a href='expr.new#nt:new-placement'>new-placement</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>(</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span> <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
<span class='terminal'>dynamic_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>static_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>const_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>reinterpret_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>(</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
</pre></div><div class='para' id='dep.expr-4'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5082'>#</a></div><div id='dep.expr-4.sentence-1' class='sentence'>Expressions of the following forms are never type-dependent (because the type
of the expression cannot be dependent):</div><pre class='ncbnftab'><i ><a href='lex.literal.kinds#nt:literal'>literal</a></i>
<i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>.</span> <i ><a href='expr.post#nt:pseudo-destructor-name'>pseudo-destructor-name</a></i>
<i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>-&gt;</span> <i ><a href='expr.post#nt:pseudo-destructor-name'>pseudo-destructor-name</a></i>
<span class='terminal'>sizeof</span> <i ><a href='expr.unary#nt:unary-expression'>unary-expression</a></i>
<span class='terminal'>sizeof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>sizeof</span> <span class='terminal'>...</span> <span class='terminal'>(</span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> <span class='terminal'>)</span>
<span class='terminal'>alignof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>typeid (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>typeid (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>::<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> delete</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
<span class='terminal'>::<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> delete [ ]</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
<span class='terminal'>throw</span> <i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
<span class='terminal'>noexcept</span> <span class='terminal'>(</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
</pre><div id='dep.expr-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.expr-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.expr-4.sentence-2' class='sentence'>For the standard library macro <span class='texttt'>offsetof</span>,
see <a href='support.types'>[support.types]</a><a class='hidden_link' href='#dep.expr-4.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dep.expr-5'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5105'>#</a></div><div id='dep.expr-5.sentence-1' class='sentence'>A <a href='expr.ref'>class member access expression</a> is
type-dependent if
the expression refers to a member of the current instantiation and
the type of the referenced member is dependent, or the class member access
expression refers to a member of an unknown specialization<a class='hidden_link' href='#dep.expr-5.sentence-1'>.</a></div> <div id='dep.expr-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.expr-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.expr-5.sentence-2' class='sentence'>In an expression of the form
<span class='texttt'>x.y</span>
or
<span class='texttt'>xp-&gt;y</span>
the type of the expression is usually the type of the member
<span class='texttt'>y</span>
of the class of
<span class='texttt'>x</span>
(or the class pointed to by
<span class='texttt'>xp</span>)<a class='hidden_link' href='#dep.expr-5.sentence-2'>.</a></div> <div id='dep.expr-5.sentence-3' class='sentence'>However, if
<span class='texttt'>x</span>
or
<span class='texttt'>xp</span>
refers to a dependent type that is not the current instantiation,
the type of
<span class='texttt'>y</span>
is always dependent<a class='hidden_link' href='#dep.expr-5.sentence-3'>.</a></div> <div id='dep.expr-5.sentence-4' class='sentence'>If
<span class='texttt'>x</span>
or <span class='texttt'>xp</span>
refers to a non-dependent type or refers to the current instantiation, the
type of
<span class='texttt'>y</span>
is the type of the class member access expression<a class='hidden_link' href='#dep.expr-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dep.expr-6'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5138'>#</a></div><div id='dep.expr-6.sentence-1' class='sentence'>A <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i> is type-dependent if any element is
type-dependent or is a pack expansion<a class='hidden_link' href='#dep.expr-6.sentence-1'>.</a></div></div><div class='para' id='dep.expr-7'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5142'>#</a></div><div id='dep.expr-7.sentence-1' class='sentence'>A <i ><a href='expr.prim.fold#nt:fold-expression'>fold-expression</a></i> is type-dependent<a class='hidden_link' href='#dep.expr-7.sentence-1'>.</a></div></div></div><div id='dep.constexpr' class='section'><h4 ><a class='secnum' href='#dep.constexpr' style='min-width:118pt'>17.7.2.3</a> Value-dependent expressions <a class='abbr_ref' href='temp.dep.constexpr'>[temp.dep.constexpr]</a></h4><div class='para' id='dep.constexpr-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5147'>#</a></div><div id='dep.constexpr-1.sentence-1' class='sentence'>Except as described below, an expression used in a context where a
constant expression is required is value-dependent if any
subexpression is value-dependent<a class='hidden_link' href='#dep.constexpr-1.sentence-1'>.</a></div></div><div class='para' id='dep.constexpr-2'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5152'>#</a></div><div id='dep.constexpr-2.sentence-1' class='sentence'>An
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
is value-dependent if:</div><div id='dep.constexpr-2.sentence-2' class='sentence'><ul class='itemize'><li id='dep.constexpr-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.1'>(2.1)</a></div><div id='dep.constexpr-2.1.sentence-1' class='sentence'>it is type-dependent,</div></li><li id='dep.constexpr-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.2'>(2.2)</a></div><div id='dep.constexpr-2.2.sentence-1' class='sentence'>it is the name of a non-type template parameter,</div></li><li id='dep.constexpr-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.3'>(2.3)</a></div><div id='dep.constexpr-2.3.sentence-1' class='sentence'>it names a static data member that is a dependent member of the current
instantiation and is not initialized in a <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i>,</div></li><li id='dep.constexpr-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.4'>(2.4)</a></div><div id='dep.constexpr-2.4.sentence-1' class='sentence'>it names a static member function that is a dependent member of the current
instantiation, or</div></li><li id='dep.constexpr-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.5'>(2.5)</a></div><div id='dep.constexpr-2.5.sentence-1' class='sentence'>it is a constant with literal type and is initialized with an
expression that is value-dependent<a class='hidden_link' href='#dep.constexpr-2.5.sentence-1'>.</a></div></li></ul></div><div id='dep.constexpr-2.sentence-3' class='sentence'>Expressions of the following form are value-dependent if the
<i ><a href='expr.unary#nt:unary-expression'>unary-expression</a></i> or <i ><a href='expr.comma#nt:expression'>expression</a></i>
is type-dependent or the
<i ><a href='dcl.name#nt:type-id'>type-id</a></i>
is dependent:</div><pre class='ncbnftab'><span class='terminal'>sizeof</span> <i ><a href='expr.unary#nt:unary-expression'>unary-expression</a></i>
<span class='terminal'>sizeof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>typeid (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>typeid (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>alignof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>noexcept</span> <span class='terminal'>(</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
</pre><div id='dep.constexpr-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dep.constexpr-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.constexpr-2.sentence-4' class='sentence'>For the standard library macro <span class='texttt'>offsetof</span>,
see <a href='support.types'>[support.types]</a><a class='hidden_link' href='#dep.constexpr-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dep.constexpr-3'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5191'>#</a></div><div id='dep.constexpr-3.sentence-1' class='sentence'>Expressions of the following form are value-dependent if either the
<i ><a href='dcl.name#nt:type-id'>type-id</a></i>
or
<i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i>
is dependent or the
<i ><a href='expr.comma#nt:expression'>expression</a></i>
or
<i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
is value-dependent:</div><pre class='ncbnftab'><i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i> <span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
<span class='terminal'>static_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>const_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>reinterpret_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>(</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
</pre></div><div class='para' id='dep.constexpr-4'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5210'>#</a></div><div id='dep.constexpr-4.sentence-1' class='sentence'>Expressions of the following form are value-dependent:</div><pre class='ncbnftab'><span class='terminal'>sizeof</span> <span class='terminal'>...</span> <span class='terminal'>(</span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> <span class='terminal'>)</span>
<i ><a href='expr.prim.fold#nt:fold-expression'>fold-expression</a></i>
</pre></div><div class='para' id='dep.constexpr-5'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5218'>#</a></div><div id='dep.constexpr-5.sentence-1' class='sentence'>An expression of the form <span class='texttt'>&amp;</span><i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> where the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> names a dependent member of the current
instantiation is value-dependent<a class='hidden_link' href='#dep.constexpr-5.sentence-1'>.</a></div> <div id='dep.constexpr-5.sentence-2' class='sentence'>An expression of the form <span class='texttt'>&amp;</span><i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
is also value-dependent if evaluating <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
as a <a href='expr.const#def:expression,core_constant'>core constant expression</a> succeeds and
the result of the evaluation refers to a templated entity
that is an object with static or thread storage duration or a member function<a class='hidden_link' href='#dep.constexpr-5.sentence-2'>.</a></div></div></div><div id='dep.temp' class='section'><h4 ><a class='secnum' href='#dep.temp' style='min-width:118pt'>17.7.2.4</a> Dependent template arguments <a class='abbr_ref' href='temp.dep.temp'>[temp.dep.temp]</a></h4><div class='para' id='dep.temp-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5230'>#</a></div><div id='dep.temp-1.sentence-1' class='sentence'>A type
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
is dependent if the type it specifies is dependent<a class='hidden_link' href='#dep.temp-1.sentence-1'>.</a></div></div><div class='para' id='dep.temp-2'><div class='marginalizedparent'><a class='marginalized' href='#dep.temp-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5235'>#</a></div><div id='dep.temp-2.sentence-1' class='sentence'>A non-type
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
is dependent if its type is dependent or the constant
expression it specifies is value-dependent<a class='hidden_link' href='#dep.temp-2.sentence-1'>.</a></div></div><div class='para' id='dep.temp-3'><div class='marginalizedparent'><a class='marginalized' href='#dep.temp-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5241'>#</a></div><div id='dep.temp-3.sentence-1' class='sentence'>Furthermore, a non-type
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
is dependent if the corresponding non-type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is of reference or pointer type and the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
designates or points to a member of the current instantiation or a member of
a dependent type<a class='hidden_link' href='#dep.temp-3.sentence-1'>.</a></div></div><div class='para' id='dep.temp-4'><div class='marginalizedparent'><a class='marginalized' href='#dep.temp-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5249'>#</a></div><div id='dep.temp-4.sentence-1' class='sentence'>A template
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
is dependent if it names a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
or is a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
that refers to a member of an unknown specialization<a class='hidden_link' href='#dep.temp-4.sentence-1'>.</a></div></div></div></div><div id='nondep' class='section'><h3 ><a class='secnum' href='#nondep' style='min-width:103pt'>17.7.3</a> Non-dependent names <a class='abbr_ref' href='temp.nondep'>[temp.nondep]</a></h3><div class='para' id='nondep-1'><div class='marginalizedparent'><a class='marginalized' href='#nondep-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5260'>#</a></div><div id='nondep-1.sentence-1' class='sentence'>Non-dependent names used in a template definition are found using the
usual name lookup and bound at the point they are used<a class='hidden_link' href='#nondep-1.sentence-1'>.</a></div> <div id='nondep-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#nondep-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
void g(double);
void h();

template&lt;class T&gt; class Z {
public:
  void f() {
    g(1);           <span class='comment'>// calls <span class='tcode_in_codeblock'>g(double)</span>
</span>    h++;            <span class='comment'>// ill-formed: cannot increment function; this could be diagnosed
</span>                    <span class='comment'>// either here or at the point of instantiation
</span>  }
};

void g(int);        <span class='comment'>// not in scope at the point of the template definition, not considered for the call <span class='tcode_in_codeblock'>g(1)</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='dep.res' class='section'><h3 ><a class='secnum' href='#dep.res' style='min-width:103pt'>17.7.4</a> Dependent name resolution <a class='abbr_ref' href='temp.dep.res'>[temp.dep.res]</a></h3><div class='para' id='dep.res-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.res-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5284'>#</a></div><div id='dep.res-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':name,dependent'></a></span>In resolving dependent names, names from the following sources are considered:</div><div id='dep.res-1.sentence-2' class='sentence'><ul class='itemize'><li id='dep.res-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.res-1.1'>(1.1)</a></div><div id='dep.res-1.1.sentence-1' class='sentence'>Declarations that are visible at the point of definition of the
template<a class='hidden_link' href='#dep.res-1.1.sentence-1'>.</a></div></li><li id='dep.res-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.res-1.2'>(1.2)</a></div><div id='dep.res-1.2.sentence-1' class='sentence'>Declarations from namespaces associated with the types of the
function arguments both from the instantiation context (<a href='temp.point'>[temp.point]</a>)
and from the definition context<a class='hidden_link' href='#dep.res-1.2.sentence-1'>.</a></div></li></ul></div></div><div id='point' class='section'><h4 ><a class='secnum' href='#point' style='min-width:118pt'>17.7.4.1</a> Point of instantiation <a class='abbr_ref' href='temp.point'>[temp.point]</a></h4><div class='para' id='point-1'><div class='marginalizedparent'><a class='marginalized' href='#point-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5300'>#</a></div><div id='point-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':instantiation,point_of'></a></span>For a function template specialization, a member function template
specialization, or a specialization for a member function or static data member
of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization and
the context from which it is referenced depends on a template parameter,
the point of instantiation of the specialization is the point of instantiation
of the enclosing specialization<a class='hidden_link' href='#point-1.sentence-1'>.</a></div> <div id='point-1.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
follows the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#point-1.sentence-2'>.</a></div></div><div class='para' id='point-2'><div class='marginalizedparent'><a class='marginalized' href='#point-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5314'>#</a></div><div id='point-2.sentence-1' class='sentence'>If a function template or member function of a class template is called
in a way which uses the definition of a default argument of that function
template or member function,
the point of instantiation of the default argument is the point of
instantiation of the function template or member function specialization<a class='hidden_link' href='#point-2.sentence-1'>.</a></div></div><div class='para' id='point-3'><div class='marginalizedparent'><a class='marginalized' href='#point-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5321'>#</a></div><div id='point-3.sentence-1' class='sentence'>For a <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> of a function template
specialization or specialization of a member function of a class template, if
the <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> is implicitly instantiated because
it is needed by another template specialization and the context that requires
it depends on a template parameter, the point of instantiation of the
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> is the point of instantiation of the
specialization that requires it<a class='hidden_link' href='#point-3.sentence-1'>.</a></div> <div id='point-3.sentence-2' class='sentence'>Otherwise, the point of instantiation for such
a <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> immediately follows the namespace
scope declaration or definition that requires the
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><a class='hidden_link' href='#point-3.sentence-2'>.</a></div></div><div class='para' id='point-4'><div class='marginalizedparent'><a class='marginalized' href='#point-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5335'>#</a></div><div id='point-4.sentence-1' class='sentence'>For a class template specialization, a class member template specialization,
or a specialization for a class member of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization,
if the context from which the specialization is referenced depends on a
template parameter,
and if the specialization is not instantiated previous to the instantiation of
the enclosing template,
the point of instantiation is immediately before the point of instantiation of
the enclosing template<a class='hidden_link' href='#point-4.sentence-1'>.</a></div> <div id='point-4.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
precedes the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#point-4.sentence-2'>.</a></div></div><div class='para' id='point-5'><div class='marginalizedparent'><a class='marginalized' href='#point-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5350'>#</a></div><div id='point-5.sentence-1' class='sentence'>If a virtual function is implicitly instantiated, its point of instantiation
is immediately following the point of instantiation of its enclosing class
template specialization<a class='hidden_link' href='#point-5.sentence-1'>.</a></div></div><div class='para' id='point-6'><div class='marginalizedparent'><a class='marginalized' href='#point-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5355'>#</a></div><div id='point-6.sentence-1' class='sentence'>An explicit instantiation definition is an instantiation
point for the specialization or specializations specified by the explicit
instantiation<a class='hidden_link' href='#point-6.sentence-1'>.</a></div></div><div class='para' id='point-7'><div class='marginalizedparent'><a class='marginalized' href='#point-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5360'>#</a></div><div id='point-7.sentence-1' class='sentence'>The instantiation context of an expression that depends on the template
arguments is the set of declarations with external linkage declared prior to the
point of instantiation of the template specialization in the same translation
unit<a class='hidden_link' href='#point-7.sentence-1'>.</a></div></div><div class='para' id='point-8'><div class='marginalizedparent'><a class='marginalized' href='#point-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5366'>#</a></div><div id='point-8.sentence-1' class='sentence'>A specialization for a function template, a member function template,
or of a member function or static data member of a class template may have
multiple points of instantiations within a translation unit, and in addition
to the points of instantiation described above, for any such specialization
that has a point of instantiation within the translation unit, the end of the
translation unit is also considered a point of instantiation<a class='hidden_link' href='#point-8.sentence-1'>.</a></div> <div id='point-8.sentence-2' class='sentence'>A specialization for a class template has at most one point of instantiation
within a translation unit<a class='hidden_link' href='#point-8.sentence-2'>.</a></div> <div id='point-8.sentence-3' class='sentence'>A specialization for any template may have points of instantiation in multiple
translation units<a class='hidden_link' href='#point-8.sentence-3'>.</a></div> <div id='point-8.sentence-4' class='sentence'>If two different points of instantiation give a template specialization
different meanings according to the <a href='basic.def.odr'>one-definition rule</a>,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#point-8.sentence-4'>.</a></div></div></div><div id='dep.candidate' class='section'><h4 ><a class='secnum' href='#dep.candidate' style='min-width:118pt'>17.7.4.2</a> Candidate functions <a class='abbr_ref' href='temp.dep.candidate'>[temp.dep.candidate]</a></h4><div class='para' id='dep.candidate-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.candidate-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5383'>#</a></div><div id='dep.candidate-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':functions,candidate'></a></span>For a function call where the <i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> is a
dependent name,
the candidate functions are found using the usual lookup
rules (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>, <a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>) except that:</div><div id='dep.candidate-1.sentence-2' class='sentence'><ul class='itemize'><li id='dep.candidate-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.candidate-1.1'>(1.1)</a></div><div id='dep.candidate-1.1.sentence-1' class='sentence'>For the part of the lookup using <a href='basic.lookup.unqual'>unqualified name lookup</a>,
only function declarations
from the template definition context are found<a class='hidden_link' href='#dep.candidate-1.1.sentence-1'>.</a></div></li><li id='dep.candidate-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.candidate-1.2'>(1.2)</a></div><div id='dep.candidate-1.2.sentence-1' class='sentence'>For the part of the lookup using associated namespaces (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>),
only function declarations found in either the template
definition context or the template instantiation context are found<a class='hidden_link' href='#dep.candidate-1.2.sentence-1'>.</a></div></li></ul></div><div id='dep.candidate-1.sentence-3' class='sentence'>If
the call would be ill-formed or would find a better match had the lookup
within the associated namespaces considered all the function declarations with
external linkage introduced in those namespaces in all translation units,
not just considering those declarations found in the template definition and
template instantiation contexts, then the program has undefined behavior<a class='hidden_link' href='#dep.candidate-1.sentence-3'>.</a></div></div></div></div><div id='inject' class='section'><h3 ><a class='secnum' href='#inject' style='min-width:103pt'>17.7.5</a> Friend names declared within a class template <a class='abbr_ref' href='temp.inject'>[temp.inject]</a></h3><div class='para' id='inject-1'><div class='marginalizedparent'><a class='marginalized' href='#inject-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5410'>#</a></div><div id='inject-1.sentence-1' class='sentence'>Friend classes or functions can be declared within a class template<a class='hidden_link' href='#inject-1.sentence-1'>.</a></div> <div id='inject-1.sentence-2' class='sentence'>When a template is instantiated, the names of its friends are treated
as if the specialization had been explicitly declared at its point of
instantiation<a class='hidden_link' href='#inject-1.sentence-2'>.</a></div></div><div class='para' id='inject-2'><div class='marginalizedparent'><a class='marginalized' href='#inject-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5416'>#</a></div><div id='inject-2.sentence-1' class='sentence'>As with non-template classes, the names of namespace-scope friend
functions of a class template specialization are not visible during
an ordinary lookup unless explicitly declared at namespace scope (<a href='class.friend'>[class.friend]</a>)<a class='hidden_link' href='#inject-2.sentence-1'>.</a></div> <div id='inject-2.sentence-2' class='sentence'>Such names may be found under the rules for associated
classes (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)<a class='hidden_link' href='#inject-2.sentence-2'>.</a><a class='footnotenum' href='#footnote-143'>143</a></div> <div id='inject-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inject-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; struct number {
  number(int);
  friend number gcd(number x, number y) { return 0; };
};

void g() {
  number&lt;double&gt; a(3), b(4);
  a = gcd(a,b);     <span class='comment'>// finds <span class='tcode_in_codeblock'>gcd</span> because <span class='tcode_in_codeblock'>number&lt;double&gt;</span> is an associated class,
</span>                    <span class='comment'>// making <span class='tcode_in_codeblock'>gcd</span> visible in its namespace (global scope)
</span>  b = gcd(3,4);     <span class='comment'>// ill-formed; <span class='tcode_in_codeblock'>gcd</span> is not visible
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-143'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-143'>143)</a></div><div id='footnote-143.sentence-1' class='sentence'>Friend declarations do not
introduce new names into any scope, either
when the template is declared or when it is instantiated<a class='hidden_link' href='#footnote-143.sentence-1'>.</a></div></div></div></div><div id='spec' class='section'><h2 ><a class='secnum' href='#spec' style='min-width:88pt'>17.8</a> Template instantiation and specialization <a class='abbr_ref' href='temp.spec'>[temp.spec]</a></h2><div class='para' id='spec-1'><div class='marginalizedparent'><a class='marginalized' href='#spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5442'>#</a></div><div id='spec-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':specialization,template'></a></span>The act of instantiating a function, a class, a member of a class template or
a member template is referred to as
<a class='hidden_link' href='#def:template_instantiation' id='def:template_instantiation'><i >template instantiation</i></a><a class='hidden_link' href='#spec-1.sentence-1'>.</a></div></div><div class='para' id='spec-2'><div class='marginalizedparent'><a class='marginalized' href='#spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5448'>#</a></div><div id='spec-2.sentence-1' class='sentence'>A function instantiated from a function template is called an instantiated
function<a class='hidden_link' href='#spec-2.sentence-1'>.</a></div> <div id='spec-2.sentence-2' class='sentence'>A class instantiated from a class template is called an instantiated class<a class='hidden_link' href='#spec-2.sentence-2'>.</a></div> <div id='spec-2.sentence-3' class='sentence'>A member function, a member class, a member enumeration, or a static data member of a class template
instantiated from the member definition of the class template is called,
respectively, an instantiated member function, member class, member enumeration, or static data
member<a class='hidden_link' href='#spec-2.sentence-3'>.</a></div> <div id='spec-2.sentence-4' class='sentence'>A member function instantiated from a member function template is called an
instantiated member function<a class='hidden_link' href='#spec-2.sentence-4'>.</a></div> <div id='spec-2.sentence-5' class='sentence'>A member class instantiated from a member class template is called an
instantiated member class<a class='hidden_link' href='#spec-2.sentence-5'>.</a></div></div><div class='para' id='spec-3'><div class='marginalizedparent'><a class='marginalized' href='#spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5461'>#</a></div><div id='spec-3.sentence-1' class='sentence'>An explicit specialization may be declared for a function template,
a class template, a member of a class template or a member template<a class='hidden_link' href='#spec-3.sentence-1'>.</a></div> <div id='spec-3.sentence-2' class='sentence'>An explicit specialization declaration is introduced by
<span class='texttt'>template&lt;&gt;</span><a class='hidden_link' href='#spec-3.sentence-2'>.</a></div> <div id='spec-3.sentence-3' class='sentence'>In an explicit specialization declaration for a class template,
a member of a class template or a class member template,
the name of the class that is explicitly specialized shall be a
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i><a class='hidden_link' href='#spec-3.sentence-3'>.</a></div> <div id='spec-3.sentence-4' class='sentence'>In the explicit specialization declaration for a function template or
a member function template,
the name of the function or member function explicitly specialized may be a
<i ><a href='temp.names#nt:template-id'>template-id</a></i><a class='hidden_link' href='#spec-3.sentence-4'>.</a></div> <div id='spec-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#spec-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T = int&gt; struct A {
  static int x;
};
template&lt;class U&gt; void g(U) { }

template&lt;&gt; struct A&lt;double&gt; { };        <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == double</span>
</span>template&lt;&gt; struct A&lt;&gt; { };              <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == int</span>
</span>template&lt;&gt; void g(char) { }             <span class='comment'>// specialize for <span class='tcode_in_codeblock'>U == char</span>
</span>                                        <span class='comment'>// <span class='tcode_in_codeblock'>U</span> is deduced from the parameter type
</span>template&lt;&gt; void g&lt;int&gt;(int) { }         <span class='comment'>// specialize for <span class='tcode_in_codeblock'>U == int</span>
</span>template&lt;&gt; int A&lt;char&gt;::x = 0;          <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == char</span>
</span>
template&lt;class T = int&gt; struct B {
  static int x;
};
template&lt;&gt; int B&lt;&gt;::x = 1;              <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == int</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='spec-4'><div class='marginalizedparent'><a class='marginalized' href='#spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5496'>#</a></div><div id='spec-4.sentence-1' class='sentence'>An instantiated template specialization can be either <a href='temp.inst'>implicitly
instantiated</a> for a given argument list or be <a href='temp.explicit'>explicitly
instantiated</a><a class='hidden_link' href='#spec-4.sentence-1'>.</a></div> <div id='spec-4.sentence-2' class='sentence'>A specialization is a class, function, or class member that is either
instantiated or <a href='temp.expl.spec'>explicitly specialized</a><a class='hidden_link' href='#spec-4.sentence-2'>.</a></div></div><div class='para' id='spec-5'><div class='marginalizedparent'><a class='marginalized' href='#spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5503'>#</a></div><div id='spec-5.sentence-1' class='sentence'>For a given template and a given set of
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>,
<ul class='itemize'><li id='spec-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spec-5.1'>(5.1)</a></div><div id='spec-5.1.sentence-1' class='sentence'>an explicit instantiation definition shall appear at most once in a program,</div></li><li id='spec-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spec-5.2'>(5.2)</a></div><div id='spec-5.2.sentence-1' class='sentence'>an explicit specialization shall be defined at most once
in a program (according to <a href='basic.def.odr'>[basic.def.odr]</a>), and</div></li><li id='spec-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spec-5.3'>(5.3)</a></div><div id='spec-5.3.sentence-1' class='sentence'>both an explicit instantiation and a declaration of an
explicit specialization shall not appear in a program unless
the explicit instantiation follows a declaration of the explicit
specialization<a class='hidden_link' href='#spec-5.3.sentence-1'>.</a></div></li></ul></div> <div id='spec-5.sentence-2' class='sentence'>
An implementation is not required to diagnose a violation of this rule<a class='hidden_link' href='#spec-5.sentence-2'>.</a></div></div><div class='para' id='spec-6'><div class='marginalizedparent'><a class='marginalized' href='#spec-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5520'>#</a></div><div id='spec-6.sentence-1' class='sentence'>The usual access checking rules do not apply to names
in a declaration of an explicit instantiation or explicit specialization,
with the exception of names appearing in a function body,
default argument, base-clause, member-specification, enumerator-list,
or static data member or variable template initializer<a class='hidden_link' href='#spec-6.sentence-1'>.</a></div> <div id='spec-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#spec-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='spec-6.sentence-2' class='sentence'>In particular, the template arguments and names
used in the function declarator
(including parameter types, return types and exception specifications)
may be private types or objects that would normally not be accessible<a class='hidden_link' href='#spec-6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='spec-7'><div class='marginalizedparent'><a class='marginalized' href='#spec-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5533'>#</a></div><div id='spec-7.sentence-1' class='sentence'>Each class template specialization instantiated from a template has its own
copy of any static members<a class='hidden_link' href='#spec-7.sentence-1'>.</a></div> <div id='spec-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#spec-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class X {
  static T s;
};
template&lt;class T&gt; T X&lt;T&gt;::s = 0;
X&lt;int&gt; aa;
X&lt;char*&gt; bb;</pre><div id='spec-7.sentence-2' class='sentence'><span class='texttt'>X&lt;int&gt;</span>
has a static member
<span class='texttt'>s</span>
of type
<span class='texttt'>int</span>
and
<span class='texttt'>X&lt;char*&gt;</span>
has a static member
<span class='texttt'>s</span>
of type
<span class='texttt'>char*</span><a class='hidden_link' href='#spec-7.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='spec-8'><div class='marginalizedparent'><a class='marginalized' href='#spec-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5560'>#</a></div><div id='spec-8.sentence-1' class='sentence'>If a function declaration acquired its function type through
a <a href='temp.dep.type'>dependent type</a> without using the syntactic form of
a function declarator, the program is ill-formed<a class='hidden_link' href='#spec-8.sentence-1'>.</a></div> <div id='spec-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#spec-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  static T t;
};
typedef int function();
A&lt;function&gt; a;      <span class='comment'>// ill-formed: would declare <span class='tcode_in_codeblock'>A&lt;function&gt;&#x200b;::&#x200b;t</span> as a static member function
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='inst' class='section'><h3 ><a class='secnum' href='#inst' style='min-width:103pt'>17.8.1</a> Implicit instantiation <a class='abbr_ref' href='temp.inst'>[temp.inst]</a></h3><div class='para' id='inst-1'><div class='marginalizedparent'><a class='marginalized' href='#inst-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5577'>#</a></div><div id='inst-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':instantiation,template_implicit'></a></span>Unless a class template specialization has been <a href='temp.explicit'>explicitly
instantiated</a> or <a href='temp.expl.spec'>explicitly
specialized</a>,
the class template specialization is implicitly instantiated when the
specialization is referenced in a context that requires a completely-defined
object type or when the completeness of the class type affects the semantics
of the program<a class='hidden_link' href='#inst-1.sentence-1'>.</a></div> <div id='inst-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#inst-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-1.sentence-3' class='sentence'>In particular, if the semantics of an expression depend on the member or
base class lists of a class template specialization, the class template
specialization is implicitly generated<a class='hidden_link' href='#inst-1.sentence-3'>.</a></div> <div id='inst-1.sentence-4' class='sentence'>For instance, deleting a pointer
to class type depends on whether or not the class declares a destructor,
and a conversion between pointers to class type depends on the
inheritance relationship between the two classes involved<a class='hidden_link' href='#inst-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='inst-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T&gt; class D : public B&lt;T&gt; { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

void f(void*);
void f(B&lt;int&gt;*);

void g(D&lt;int&gt;* p, D&lt;char&gt;* pp, D&lt;double&gt;* ppp) {
  f(p);             <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>D&lt;int&gt;</span> required: call <span class='tcode_in_codeblock'>f(B&lt;int&gt;*)</span>
</span>  B&lt;char&gt;* q = pp;  <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>D&lt;char&gt;</span> required: convert <span class='tcode_in_codeblock'>D&lt;char&gt;*</span> to <span class='tcode_in_codeblock'>B&lt;char&gt;*</span>
</span>  delete ppp;       <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>D&lt;double&gt;</span> required
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='inst-1.sentence-2' class='sentence'>
If a class template has been declared, but not defined,
at the <a href='temp.point'>point of instantiation</a>,
the instantiation yields an incomplete class type (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#inst-1.sentence-2'>.</a></div> <div id='inst-1.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-1.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class X;
X&lt;char&gt; ch;         <span class='comment'>// error: incomplete type <span class='tcode_in_codeblock'>X&lt;char&gt;</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='inst-1.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#inst-1.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-1.sentence-5' class='sentence'>Within a template declaration,
a <a href='class.local'>local class</a> or enumeration and the members of
a local class are never considered to be entities that can be separately
instantiated (this includes their default arguments,
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><span class='textit'>s</span>, and non-static data member
initializers, if any,
but not their <i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i><span class='textit'>s</span> or <i ><a href='temp#nt:requires-clause'>requires-clause</a></i><span class='textit'>s</span>)<a class='hidden_link' href='#inst-1.sentence-5'>.</a></div> <div id='inst-1.sentence-6' class='sentence'>As a result, the dependent names are looked up, the
semantic constraints are checked, and any templates used are instantiated as
part of the instantiation of the entity within which the local class or
enumeration is declared<a class='hidden_link' href='#inst-1.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inst-2'><div class='marginalizedparent'><a class='marginalized' href='#inst-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5632'>#</a></div><div id='inst-2.sentence-1' class='sentence'>The implicit instantiation of a class template specialization causes
the implicit instantiation of the declarations, but not of the definitions,
default arguments, or <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><span class='textit'>s</span> of the
class member functions,
member classes,
scoped member enumerations,
static data members,
member templates, and
friends; and
it causes the implicit instantiation of the definitions of
unscoped member enumerations and member anonymous unions<a class='hidden_link' href='#inst-2.sentence-1'>.</a></div> <div id='inst-2.sentence-2' class='sentence'>However, for the purpose of determining whether an instantiated redeclaration
is valid according to <a href='basic.def.odr'>[basic.def.odr]</a> and <a href='class.mem'>[class.mem]</a>,
a declaration that corresponds to a definition in the template
is considered to be a definition<a class='hidden_link' href='#inst-2.sentence-2'>.</a></div> <div id='inst-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T, class U&gt;
struct Outer {
  template&lt;class X, class Y&gt; struct Inner;
  template&lt;class Y&gt; struct Inner&lt;T, Y&gt;;         <span class='comment'>// #1a
</span>  template&lt;class Y&gt; struct Inner&lt;T, Y&gt; { };     <span class='comment'>// #1b; OK: valid redeclaration of #1a
</span>  template&lt;class Y&gt; struct Inner&lt;U, Y&gt; { };     <span class='comment'>// #2
</span>};

Outer&lt;int, int&gt; outer;                          <span class='comment'>// error at #2
</span></pre><div id='inst-2.sentence-3' class='sentence'><span class='texttt'>Outer&lt;int, int&gt;&#x200b;::&#x200b;Inner&lt;int, Y&gt;</span> is redeclared at #1b<a class='hidden_link' href='#inst-2.sentence-3'>.</a></div> <div id='inst-2.sentence-4' class='sentence'>(It is not defined
but noted as being associated with a definition in <span class='texttt'>Outer&lt;T, U&gt;</span><a class='hidden_link' href='#inst-2.sentence-4'>.</a>)</div> <div id='inst-2.sentence-5' class='sentence'>#2
is also a redeclaration of #1a<a class='hidden_link' href='#inst-2.sentence-5'>.</a></div> <div id='inst-2.sentence-6' class='sentence'>It is noted as associated with a definition,
so it is an invalid redeclaration of the same partial specialization<a class='hidden_link' href='#inst-2.sentence-6'>.</a></div><pre class='codeblock'>
template&lt;typename T&gt; struct Friendly {
  template&lt;typename U&gt; friend int f(U) { return sizeof(T); }
};
Friendly&lt;char&gt; fc;
Friendly&lt;float&gt; ff;                             <span class='comment'>// ill-formed: produces second definition of <span class='tcode_in_codeblock'>f(U)</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inst-3'><div class='marginalizedparent'><a class='marginalized' href='#inst-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5675'>#</a></div><div id='inst-3.sentence-1' class='sentence'>Unless a member of a class template or a member template has been explicitly
instantiated or explicitly specialized,
the specialization of the member is implicitly instantiated when the
specialization is referenced in a context that requires the member definition
to exist or
if the existence of the definition of the member
affects the semantics of the program;
in particular, the initialization (and any associated side effects) of a
static data member does not occur unless the static data member is itself used
in a way that requires the definition of the static data member to exist<a class='hidden_link' href='#inst-3.sentence-1'>.</a></div></div><div class='para' id='inst-4'><div class='marginalizedparent'><a class='marginalized' href='#inst-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5687'>#</a></div><div id='inst-4.sentence-1' class='sentence'>Unless a function template specialization has been explicitly instantiated or
explicitly specialized,
the function template specialization is implicitly instantiated when the
specialization is referenced in a context that requires a function definition
to exist or
if the existence of the definition affects the semantics of the program<a class='hidden_link' href='#inst-4.sentence-1'>.</a></div> <div id='inst-4.sentence-2' class='sentence'>A function whose declaration was instantiated from a friend function definition is
implicitly instantiated when it is referenced in a context that
requires a function definition to exist or
if the existence of the definition affects the semantics of the program<a class='hidden_link' href='#inst-4.sentence-2'>.</a></div> <div id='inst-4.sentence-3' class='sentence'>Unless a call is to a function template explicit specialization or
to a member function of an explicitly specialized class template,
a default argument for a function template or a member function of a
class template is implicitly instantiated when the function is
called in a context that requires the value of the default argument<a class='hidden_link' href='#inst-4.sentence-3'>.</a></div></div><div class='para' id='inst-5'><div class='marginalizedparent'><a class='marginalized' href='#inst-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5704'>#</a></div><div id='inst-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct Z {
  void f();
  void g();
};

void h() {
  Z&lt;int&gt; a;         <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;int&gt;</span> required
</span>  Z&lt;char&gt;* p;       <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;char&gt;</span> not required
</span>  Z&lt;double&gt;* q;     <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;double&gt;</span> not required
</span>
  a.f();            <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>Z&lt;int&gt;&#x200b;::&#x200b;f()</span> required
</span>  p-&gt;g();           <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;char&gt;</span> required, and
</span>                    <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>Z&lt;char&gt;&#x200b;::&#x200b;g()</span> required
</span>}</pre><div id='inst-5.sentence-1' class='sentence'>Nothing in this example requires
<span class='texttt'>class</span>
<span class='texttt'>Z&lt;double&gt;</span>,
<span class='texttt'>Z&lt;int&gt;&#x200b;::&#x200b;g()</span>,
or
<span class='texttt'>Z&lt;char&gt;&#x200b;::&#x200b;f()</span>
to be implicitly instantiated<a class='hidden_link' href='#inst-5.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inst-6'><div class='marginalizedparent'><a class='marginalized' href='#inst-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5732'>#</a></div><div id='inst-6.sentence-1' class='sentence'>Unless a variable template specialization has been explicitly instantiated or
explicitly specialized,
the variable template specialization is implicitly instantiated
when it is referenced in a context
that requires a variable definition to exist or
if the existence of the definition affects the semantics of the program<a class='hidden_link' href='#inst-6.sentence-1'>.</a></div> <div id='inst-6.sentence-2' class='sentence'>A default template argument for a variable template is implicitly instantiated
when the variable template is referenced in a context
that requires the value of the default argument<a class='hidden_link' href='#inst-6.sentence-2'>.</a></div></div><div class='para' id='inst-7'><div class='marginalizedparent'><a class='marginalized' href='#inst-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5743'>#</a></div><div id='inst-7.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':definition,program_semantics_affected_by'></a></span><span class='indexparent'><a class='index' id=':variable,program_semantics_affected_by_the_existence_of_a_variable_definition'></a></span><span class='indexparent'><a class='index' id=':function,program_semantics_affected_by_the_existence_of_a_function_definition'></a></span><span class='indexparent'><a class='index' id=':program_semantics,affected_by_the_existence_of_a_variable_or_function_definition'></a></span>The existence of a definition of a variable or function
is considered to affect the semantics of the program
if the variable or function
is needed for constant evaluation by an expression (<a href='expr.const'>[expr.const]</a>),
even if constant evaluation of the expression is not required or
if constant expression evaluation does not use the definition<a class='hidden_link' href='#inst-7.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='inst-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; constexpr int f() { return T::value; }
template&lt;bool B, typename T&gt; void g(decltype(B ? f&lt;T&gt;() : 0));
template&lt;bool B, typename T&gt; void g(...);
template&lt;bool B, typename T&gt; void h(decltype(int{B ? f&lt;T&gt;() : 0}));
template&lt;bool B, typename T&gt; void h(...);
void x() {
  g&lt;false, int&gt;(0); <span class='comment'>// OK, <span class='tcode_in_codeblock'>B ? f&lt;T&gt;() : 0</span> is not potentially constant evaluated
</span>  h&lt;false, int&gt;(0); <span class='comment'>// error, instantiates <span class='tcode_in_codeblock'>f&lt;int&gt;</span> even though <span class='tcode_in_codeblock'>B</span> evaluates to <span class='tcode_in_codeblock'>false</span> and
</span>                    <span class='comment'>// list-initialization of <span class='tcode_in_codeblock'>int</span> from <span class='tcode_in_codeblock'>int</span> cannot be narrowing
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inst-8'><div class='marginalizedparent'><a class='marginalized' href='#inst-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5770'>#</a></div><div id='inst-8.sentence-1' class='sentence'>If the function selected by <a href='over.match'>overload resolution</a>
can be determined without instantiating a class template definition,
it is unspecified whether that instantiation actually takes place<a class='hidden_link' href='#inst-8.sentence-1'>.</a></div> <div id='inst-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct S {
  operator int();
};

void f(int);
void f(S&lt;int&gt;&amp;);
void f(S&lt;float&gt;);

void g(S&lt;int&gt;&amp; sr) {
  f(sr);            <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>S&lt;int&gt;</span> allowed but not required
</span>                    <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>S&lt;float&gt;</span> allowed but not required
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inst-9'><div class='marginalizedparent'><a class='marginalized' href='#inst-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5792'>#</a></div><div id='inst-9.sentence-1' class='sentence'>If a function template or a member function template specialization is used in
a way that involves overload resolution,
a declaration of the specialization is implicitly instantiated (<a href='temp.over'>[temp.over]</a>)<a class='hidden_link' href='#inst-9.sentence-1'>.</a></div></div><div class='para' id='inst-10'><div class='marginalizedparent'><a class='marginalized' href='#inst-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5797'>#</a></div><div id='inst-10.sentence-1' class='sentence'>An implementation shall not implicitly instantiate a function template,
a variable template,
a member template, a non-virtual member function, a member class, a
static data member of a class template, or a substatement of a constexpr if
statement (<a href='stmt.if'>[stmt.if]</a>), unless such instantiation is required<a class='hidden_link' href='#inst-10.sentence-1'>.</a></div> <div id='inst-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#inst-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-10.sentence-5' class='sentence'>The instantiation of a generic lambda
does not require instantiation of
substatements of a constexpr if statement
within its <i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i>
unless the call operator template is instantiated<a class='hidden_link' href='#inst-10.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='inst-10.sentence-2' class='sentence'>
It is unspecified whether or not an implementation implicitly instantiates a
virtual member function of a class template if the virtual member function would
not otherwise be instantiated<a class='hidden_link' href='#inst-10.sentence-2'>.</a></div> <div id='inst-10.sentence-3' class='sentence'>The use of a template specialization in a default argument
shall not cause the template to be implicitly instantiated except that a
class template may be instantiated where its complete type is needed to determine
the correctness of the default argument<a class='hidden_link' href='#inst-10.sentence-3'>.</a></div> <div id='inst-10.sentence-4' class='sentence'>The use of a default argument in a
function call causes specializations in the default argument to be implicitly
instantiated<a class='hidden_link' href='#inst-10.sentence-4'>.</a></div></div><div class='para' id='inst-11'><div class='marginalizedparent'><a class='marginalized' href='#inst-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5821'>#</a></div><div id='inst-11.sentence-1' class='sentence'>Implicitly instantiated class, function, and variable template specializations
are placed in the namespace where the template is defined<a class='hidden_link' href='#inst-11.sentence-1'>.</a></div> <div id='inst-11.sentence-2' class='sentence'>Implicitly instantiated specializations for members of a class template are
placed in the namespace where the enclosing class template is defined<a class='hidden_link' href='#inst-11.sentence-2'>.</a></div> <div id='inst-11.sentence-3' class='sentence'>Implicitly instantiated member templates are placed in the namespace where the
enclosing class or class template is defined<a class='hidden_link' href='#inst-11.sentence-3'>.</a></div> <div id='inst-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace N {
  template&lt;class T&gt; class List {
  public:
    T* get();
  };
}

template&lt;class K, class V&gt; class Map {
public:
  N::List&lt;V&gt; lt;
  V get(K);
};

void g(Map&lt;const char*,int&gt;&amp; m) {
  int i = m.get("Nicholas");
}</pre><div id='inst-11.sentence-4' class='sentence'>A call of
<span class='texttt'>lt.get()</span>
from
<span class='texttt'>Map&lt;const char*,int&gt;&#x200b;::&#x200b;get()</span>
would place
<span class='texttt'>List&lt;int&gt;&#x200b;::&#x200b;get()</span>
in the namespace
<span class='texttt'>N</span>
rather than in the global namespace<a class='hidden_link' href='#inst-11.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inst-12'><div class='marginalizedparent'><a class='marginalized' href='#inst-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5860'>#</a></div><div id='inst-12.sentence-1' class='sentence'>If a function template
<span class='texttt'>f</span>
is called in a way that requires a default argument to be used,
the dependent names are looked up, the semantics constraints are checked,
and the instantiation of any template used in the default argument
is done as if the default argument had been
an initializer used in a function template specialization with the same scope,
the same template parameters and the same access as that of the function template
<span class='texttt'>f</span>
used at that point, except that the scope in which a closure type is
declared (<a href='expr.prim.lambda.closure'>[expr.prim.lambda.closure]</a>) – and therefore its associated namespaces –
remain as determined from the context of the definition for the default
argument<a class='hidden_link' href='#inst-12.sentence-1'>.</a></div> <div id='inst-12.sentence-2' class='sentence'>This analysis is called
<a class='hidden_link' href='#def:default_argument_instantiation' id='def:default_argument_instantiation'><i >default argument instantiation</i></a><a class='hidden_link' href='#inst-12.sentence-2'>.</a></div> <div id='inst-12.sentence-3' class='sentence'>The instantiated default argument is then used as the argument of
<span class='texttt'>f</span><a class='hidden_link' href='#inst-12.sentence-3'>.</a></div></div><div class='para' id='inst-13'><div class='marginalizedparent'><a class='marginalized' href='#inst-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5879'>#</a></div><div id='inst-13.sentence-1' class='sentence'>Each default argument is instantiated independently<a class='hidden_link' href='#inst-13.sentence-1'>.</a></div> <div id='inst-13.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void f(T x, T y = ydef(T()), T z = zdef(T()));

class  A { };

A zdef(A);

void g(A a, A b, A c) {
  f(a, b, c);       <span class='comment'>// no default argument instantiation
</span>  f(a, b);          <span class='comment'>// default argument <span class='tcode_in_codeblock'>z = zdef(T())</span> instantiated
</span>  f(a);             <span class='comment'>// ill-formed; <span class='tcode_in_codeblock'>ydef</span> is not declared
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inst-14'><div class='marginalizedparent'><a class='marginalized' href='#inst-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5898'>#</a></div><div id='inst-14.sentence-1' class='sentence'>The <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> of a function template specialization
is not instantiated along with the function declaration; it is instantiated
when needed (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#inst-14.sentence-1'>.</a></div> <div id='inst-14.sentence-2' class='sentence'>If such an
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> is needed but has not yet been
instantiated, the dependent names are looked up, the semantics constraints are
checked, and the instantiation of any template used in the
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> is done as if it were being done as part
of instantiating the declaration of the specialization at that point<a class='hidden_link' href='#inst-14.sentence-2'>.</a></div></div><div class='para' id='inst-15'><div class='marginalizedparent'><a class='marginalized' href='#inst-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5908'>#</a></div><div id='inst-15.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#inst-15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-15.sentence-1' class='sentence'><a href='temp.point'>[temp.point]</a> defines the point of instantiation of a template specialization<a class='hidden_link' href='#inst-15.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inst-16'><div class='marginalizedparent'><a class='marginalized' href='#inst-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5913'>#</a></div><div id='inst-16.sentence-1' class='sentence'>There is an <span class='indexparent'><a class='index' id=':maximum_depth_of_recursive_template_instantiations'></a></span>implementation-defined quantity
that specifies the limit on the total depth of recursive instantiations (<a href='implimits'>[implimits]</a>),
which could involve more than one template<a class='hidden_link' href='#inst-16.sentence-1'>.</a></div> <div id='inst-16.sentence-2' class='sentence'>The result of an infinite recursion in instantiation is undefined<a class='hidden_link' href='#inst-16.sentence-2'>.</a></div> <div id='inst-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class X {
  X&lt;T&gt;* p;          <span class='comment'>// OK
</span>  X&lt;T*&gt; a;          <span class='comment'>// implicit generation of <span class='tcode_in_codeblock'>X&lt;T&gt;</span> requires
</span>                    <span class='comment'>// the implicit instantiation of <span class='tcode_in_codeblock'>X&lt;T*&gt;</span> which requires
</span>                    <span class='comment'>// the implicit instantiation of <span class='tcode_in_codeblock'>X&lt;T**&gt;</span> which &hellip;
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inst-17'><div class='marginalizedparent'><a class='marginalized' href='#inst-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5930'>#</a></div><div id='inst-17.sentence-1' class='sentence'>The <i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i><span class='textit'>s</span> and <i ><a href='temp#nt:requires-clause'>requires-clause</a></i>
of a template specialization or member function
are not instantiated along with the specialization or function itself,
even for a member function of a local class;
substitution into the atomic constraints formed from them is instead performed
as specified in <a href='temp.constr.decl'>[temp.constr.decl]</a> and <a href='temp.constr.atomic'>[temp.constr.atomic]</a>
when determining whether the constraints are satisfied<a class='hidden_link' href='#inst-17.sentence-1'>.</a></div> <div id='inst-17.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#inst-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-17.sentence-2' class='sentence'>The satisfaction of constraints is determined during name lookup or overload
resolution (<a href='over.match'>[over.match]</a>)<a class='hidden_link' href='#inst-17.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='inst-17.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-17.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C = sizeof(T) &gt; 2;
template&lt;typename T&gt; concept D = C&lt;T&gt; &amp;&amp; sizeof(T) &gt; 4;

template&lt;typename T&gt; struct S {
  S() requires C&lt;T&gt; { }         <span class='comment'>// #1
</span>  S() requires D&lt;T&gt; { }         <span class='comment'>// #2
</span>};

S&lt;char&gt; s1;                     <span class='comment'>// error: no matching constructor
</span>S&lt;char[8]&gt; s2;                  <span class='comment'>// OK, calls #2
</span></pre> <div id='inst-17.sentence-3' class='sentence'>
When <span class='texttt'>S&lt;char&gt;</span> is instantiated, both constructors are part of the
specialization<a class='hidden_link' href='#inst-17.sentence-3'>.</a></div> <div id='inst-17.sentence-4' class='sentence'>Their constraints are not satisfied, and
they suppress the implicit declaration of a default constructor for
<span class='texttt'>S&lt;char&gt;</span> (<a href='class.ctor'>[class.ctor]</a>), so there is no viable constructor
for <span class='texttt'>s1</span><a class='hidden_link' href='#inst-17.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='inst-17.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inst-17.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; struct S1 {
  template&lt;typename U&gt;
    requires false
  struct Inner1;                <span class='comment'>// ill-formed, no diagnostic required
</span>};

template&lt;typename T&gt; struct S2 {
  template&lt;typename U&gt;
    requires (sizeof(T[-(int)sizeof(T)]) &gt; 1)
  struct Inner2;                <span class='comment'>// ill-formed, no diagnostic required
</span>};</pre> <div id='inst-17.sentence-5' class='sentence'>
The class <span class='texttt'>S1&lt;T&gt;&#x200b;::&#x200b;Inner1</span> is ill-formed, no diagnostic required, because
it has no valid specializations<a class='hidden_link' href='#inst-17.sentence-5'>.</a></div> <div id='inst-17.sentence-6' class='sentence'><span class='texttt'>S2</span> is ill-formed, no diagnostic required, since no substitution into
the constraints of its <span class='texttt'>Inner2</span> template would result in a valid
expression<a class='hidden_link' href='#inst-17.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='explicit' class='section'><h3 ><a class='secnum' href='#explicit' style='min-width:103pt'>17.8.2</a> Explicit instantiation <a class='abbr_ref' href='temp.explicit'>[temp.explicit]</a></h3><div class='para' id='explicit-1'><div class='marginalizedparent'><a class='marginalized' href='#explicit-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5984'>#</a></div><div id='explicit-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':instantiation,explicit'></a></span>A class, function, variable, or member template specialization can be explicitly
instantiated from its template<a class='hidden_link' href='#explicit-1.sentence-1'>.</a></div> <div id='explicit-1.sentence-2' class='sentence'>A member function, member class or static data member of a class template can
be explicitly instantiated from the member definition associated with its class
template<a class='hidden_link' href='#explicit-1.sentence-2'>.</a></div> <div id='explicit-1.sentence-3' class='sentence'>An explicit instantiation of a
function template,
member function of a class template, or
variable template
shall not
use the <span class='texttt'>inline</span> or <span class='texttt'>constexpr</span> specifiers<a class='hidden_link' href='#explicit-1.sentence-3'>.</a></div></div><div class='para' id='explicit-2'><div class='marginalizedparent'><a class='marginalized' href='#explicit-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L5998'>#</a></div><div id='explicit-2.sentence-1' class='sentence'>The syntax for explicit instantiation is:</div><pre class='bnf'><a class='nontermdef' href='#nt:explicit-instantiation' id='nt:explicit-instantiation'>explicit-instantiation:</a>
&#9;<span class='terminal'>extern<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'>template</span> <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
</pre><div id='explicit-2.sentence-2' class='sentence'>There are two forms of explicit instantiation: an explicit instantiation
definition and an explicit instantiation declaration<a class='hidden_link' href='#explicit-2.sentence-2'>.</a></div> <div id='explicit-2.sentence-3' class='sentence'>An explicit instantiation
declaration begins with the <span class='texttt'>extern</span> keyword<a class='hidden_link' href='#explicit-2.sentence-3'>.</a></div></div><div class='para' id='explicit-3'><div class='marginalizedparent'><a class='marginalized' href='#explicit-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6010'>#</a></div><div id='explicit-3.sentence-1' class='sentence'>If the explicit instantiation is for a class or member class, the
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> in the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
shall include a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>;
otherwise, the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
shall be a <i ><a href='dcl.dcl#nt:simple-declaration'>simple-declaration</a></i> whose <i ><a href='dcl.decl#nt:init-declarator-list'>init-declarator-list</a></i>
comprises a single <i ><a href='dcl.decl#nt:init-declarator'>init-declarator</a></i>
that does not have an <i ><a href='dcl.init#nt:initializer'>initializer</a></i><a class='hidden_link' href='#explicit-3.sentence-1'>.</a></div> <div id='explicit-3.sentence-2' class='sentence'>If the explicit instantiation is for
a function or member function,
the
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
in the
<i ><a href='dcl.decl#nt:declarator'>declarator</a></i>
shall be either a
<i ><a href='temp.names#nt:template-id'>template-id</a></i>
or, where all template arguments can be deduced, a
<i ><a href='temp.names#nt:template-name'>template-name</a></i> or <i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i><a class='hidden_link' href='#explicit-3.sentence-2'>.</a></div> <div id='explicit-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#explicit-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-3.sentence-7' class='sentence'>The declaration may declare a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>,
in which case the
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
of the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
must be a
<i ><a href='temp.names#nt:template-id'>template-id</a></i><a class='hidden_link' href='#explicit-3.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='explicit-3.sentence-3' class='sentence'>
If the explicit instantiation is for a member function, a member class or
a static data member of a class template specialization,
the name of the class template specialization in the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
for the member name shall be a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i><a class='hidden_link' href='#explicit-3.sentence-3'>.</a></div> <div id='explicit-3.sentence-4' class='sentence'>If the explicit instantiation is for a variable template specialization,
the <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> in the <i ><a href='dcl.decl#nt:declarator'>declarator</a></i>
shall be a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i><a class='hidden_link' href='#explicit-3.sentence-4'>.</a></div> <div id='explicit-3.sentence-5' class='sentence'>An explicit instantiation shall appear in an enclosing namespace
of its template<a class='hidden_link' href='#explicit-3.sentence-5'>.</a></div> <div id='explicit-3.sentence-6' class='sentence'>If the name declared in the explicit
instantiation is an unqualified name, the explicit instantiation
shall appear in the namespace where its template is declared or, if that
namespace is inline (<a href='namespace.def'>[namespace.def]</a>), any namespace from its enclosing
namespace set<a class='hidden_link' href='#explicit-3.sentence-6'>.</a></div> <div id='explicit-3.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#explicit-3.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-3.sentence-8' class='sentence'>Regarding qualified names in declarators, see <a href='dcl.meaning'>[dcl.meaning]</a><a class='hidden_link' href='#explicit-3.sentence-8'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='explicit-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#explicit-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class Array { void mf(); };
template class Array&lt;char&gt;;
template void Array&lt;int&gt;::mf();

template&lt;class T&gt; void sort(Array&lt;T&gt;&amp; v) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
template void sort(Array&lt;char&gt;&amp;);       <span class='comment'>// argument is deduced here
</span>
namespace N {
  template&lt;class T&gt; void f(T&amp;) { }
}
template void N::f&lt;int&gt;(int&amp;);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='explicit-4'><div class='marginalizedparent'><a class='marginalized' href='#explicit-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6072'>#</a></div><div id='explicit-4.sentence-1' class='sentence'>A declaration of a function template, a variable template, a member function
or static data member
of a class template, or a member function template of a class or class
template shall precede an explicit instantiation of that entity<a class='hidden_link' href='#explicit-4.sentence-1'>.</a></div> <div id='explicit-4.sentence-2' class='sentence'>A definition
of a class template, a member class of a class template, or a member class
template of a class or class template shall precede an explicit instantiation
of that entity unless the explicit instantiation is preceded by an explicit
specialization of the entity with the same template arguments<a class='hidden_link' href='#explicit-4.sentence-2'>.</a></div> <div id='explicit-4.sentence-3' class='sentence'>If the
<i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
of the explicit instantiation names an implicitly-declared <a href='special'>special member
function</a>, the program is ill-formed<a class='hidden_link' href='#explicit-4.sentence-3'>.</a></div></div><div class='para' id='explicit-5'><div class='marginalizedparent'><a class='marginalized' href='#explicit-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6086'>#</a></div><div id='explicit-5.sentence-1' class='sentence'>The <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> in an <i ><a href='temp.explicit#nt:explicit-instantiation'>explicit-instantiation</a></i> and the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> produced by the corresponding substitution into the templated function, variable, or class are two declarations of the same entity<a class='hidden_link' href='#explicit-5.sentence-1'>.</a></div> <div id='explicit-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#explicit-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-5.sentence-3' class='sentence'>These declarations are required to have matching types as specified in <a href='basic.link'>[basic.link]</a>, except as specified in <a href='except.spec'>[except.spec]</a><a class='hidden_link' href='#explicit-5.sentence-3'>.</a></div> <div id='explicit-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#explicit-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; T var = {};
template float var&lt;float&gt;;      <span class='comment'>// OK, instantiated variable has type <span class='tcode_in_codeblock'>float</span>
</span>template int var&lt;int[16]&gt;[];    <span class='comment'>// OK, absence of major array bound is permitted
</span>template int *var&lt;int&gt;;         <span class='comment'>// error: instantiated variable has type <span class='tcode_in_codeblock'>int</span>
</span>
template&lt;typename T&gt; auto av = T();
template int av&lt;int&gt;;           <span class='comment'>// OK, variable with type <span class='tcode_in_codeblock'>int</span> can be redeclared with type <span class='tcode_in_codeblock'>auto</span>
</span>
template&lt;typename T&gt; auto f() {}
template void f&lt;int&gt;();         <span class='comment'>// error: function with deduced return type
</span>                                <span class='comment'>// redeclared with non-deduced return type (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>)
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='explicit-5.sentence-2' class='sentence'>
Despite its syntactic form, the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> in an <i ><a href='temp.explicit#nt:explicit-instantiation'>explicit-instantiation</a></i> for a variable is not itself a definition and does not conflict with the definition instantiated by an explicit instantiation definition for that variable<a class='hidden_link' href='#explicit-5.sentence-2'>.</a></div></div><div class='para' id='explicit-6'><div class='marginalizedparent'><a class='marginalized' href='#explicit-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6108'>#</a></div><div id='explicit-6.sentence-1' class='sentence'>For a given set of template arguments, if an explicit
instantiation of a template appears after a declaration of
an explicit specialization for that template, the explicit
instantiation has no effect<a class='hidden_link' href='#explicit-6.sentence-1'>.</a></div> <div id='explicit-6.sentence-2' class='sentence'>Otherwise, for an explicit instantiation
definition the definition of a
function template, a variable template, a member
function template, or a member function or static
data member of a class template shall be present in every
translation unit in which it is explicitly instantiated<a class='hidden_link' href='#explicit-6.sentence-2'>.</a></div></div><div class='para' id='explicit-7'><div class='marginalizedparent'><a class='marginalized' href='#explicit-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6119'>#</a></div><div id='explicit-7.sentence-1' class='sentence'>An explicit instantiation of a class, function template, or variable template
specialization is
placed in the namespace in which the template is defined<a class='hidden_link' href='#explicit-7.sentence-1'>.</a></div> <div id='explicit-7.sentence-2' class='sentence'>An explicit instantiation for a member of a class template is placed in
the namespace where the enclosing class template is defined<a class='hidden_link' href='#explicit-7.sentence-2'>.</a></div> <div id='explicit-7.sentence-3' class='sentence'>An explicit instantiation for a member template is placed in the namespace
where the enclosing class or class template is defined<a class='hidden_link' href='#explicit-7.sentence-3'>.</a></div> <div id='explicit-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#explicit-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace N {
  template&lt;class T&gt; class Y { void mf() { } };
}

template class Y&lt;int&gt;;          <span class='comment'>// error: class template <span class='tcode_in_codeblock'>Y</span> not visible in the global namespace
</span>
using N::Y;
template class Y&lt;int&gt;;          <span class='comment'>// error: explicit instantiation outside of the namespace of the template
</span>
template class N::Y&lt;char*&gt;;             <span class='comment'>// OK: explicit instantiation in namespace <span class='tcode_in_codeblock'>N</span>
</span>template void N::Y&lt;double&gt;::mf();       <span class='comment'>// OK: explicit instantiation in namespace <span class='tcode_in_codeblock'>N</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='explicit-8'><div class='marginalizedparent'><a class='marginalized' href='#explicit-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6144'>#</a></div><div id='explicit-8.sentence-1' class='sentence'>A trailing
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
can be left unspecified in an explicit instantiation of a function template
specialization or of a member function template specialization provided
it can be deduced from the type of a function parameter (<a href='temp.deduct'>[temp.deduct]</a>)<a class='hidden_link' href='#explicit-8.sentence-1'>.</a></div> <div id='explicit-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#explicit-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class Array { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T&gt; void sort(Array&lt;T&gt;&amp; v) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

<span class='comment'>// instantiate <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span> – template-argument deduced
</span>template void sort&lt;&gt;(Array&lt;int&gt;&amp;);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='explicit-9'><div class='marginalizedparent'><a class='marginalized' href='#explicit-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6160'>#</a></div><div id='explicit-9.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#explicit-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-9.sentence-1' class='sentence'>An explicit instantiation of a constrained template
shall satisfy that template's <a href='temp.constr.decl#def:associated_constraints'>associated constraints</a><a class='hidden_link' href='#explicit-9.sentence-1'>.</a></div> <div id='explicit-9.sentence-2' class='sentence'>The satisfaction of constraints is determined
when forming the template name of an explicit instantiation
in which all template arguments are specified (<a href='temp.names'>[temp.names]</a>),
or, for explicit instantiations of function templates,
during template argument deduction (<a href='temp.deduct.decl'>[temp.deduct.decl]</a>)
when one or more trailing template arguments are left unspecified<a class='hidden_link' href='#explicit-9.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='explicit-10'><div class='marginalizedparent'><a class='marginalized' href='#explicit-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6173'>#</a></div><div id='explicit-10.sentence-1' class='sentence'>An explicit instantiation that names a class
template specialization is also an explicit
instantiation of the same kind (declaration or definition) of each
of its members (not including members inherited from base classes and members
that are templates) that has not been previously explicitly specialized in
the translation unit containing the explicit instantiation,
provided that the associated constraints, if any,
of that member are satisfied by the template arguments of the explicit
instantiation (<a href='temp.constr.decl'>[temp.constr.decl]</a>, <a href='temp.constr.constr'>[temp.constr.constr]</a>),
except as described below<a class='hidden_link' href='#explicit-10.sentence-1'>.</a></div> <div id='explicit-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#explicit-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-10.sentence-2' class='sentence'>In addition, it will typically be an explicit instantiation of certain
implementation-dependent data about the class<a class='hidden_link' href='#explicit-10.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='explicit-11'><div class='marginalizedparent'><a class='marginalized' href='#explicit-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6187'>#</a></div><div id='explicit-11.sentence-1' class='sentence'>An explicit instantiation definition that names a class template
specialization explicitly instantiates the class template specialization
and is an explicit instantiation definition of only those
members that have been defined at the point of instantiation<a class='hidden_link' href='#explicit-11.sentence-1'>.</a></div></div><div class='para' id='explicit-12'><div class='marginalizedparent'><a class='marginalized' href='#explicit-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6193'>#</a></div><div id='explicit-12.sentence-1' class='sentence'>Except for inline functions and variables, declarations with types deduced from their
initializer or return value (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>), <span class='texttt'>const</span> variables of
literal types,
variables of reference types, and class template specializations,
explicit instantiation declarations have the
effect of suppressing the implicit instantiation
of the definition of the entity to which they refer<a class='hidden_link' href='#explicit-12.sentence-1'>.</a></div> <div id='explicit-12.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#explicit-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-12.sentence-2' class='sentence'>The intent is that an inline function that is the
subject of an explicit instantiation declaration will still be implicitly
instantiated when <a href='basic.def.odr'>odr-used</a> so that the body can be considered for inlining, but
that no out-of-line copy of the inline function would be generated in the
translation unit<a class='hidden_link' href='#explicit-12.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='explicit-13'><div class='marginalizedparent'><a class='marginalized' href='#explicit-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6207'>#</a></div><div id='explicit-13.sentence-1' class='sentence'>If an entity is the subject of both an explicit instantiation declaration
and an explicit instantiation definition in the same translation unit, the
definition shall follow the declaration<a class='hidden_link' href='#explicit-13.sentence-1'>.</a></div> <div id='explicit-13.sentence-2' class='sentence'>An entity that is the subject of an
explicit instantiation declaration and that is also used
in a way that would otherwise cause an <a href='temp.inst'>implicit instantiation</a>
in the translation unit
shall be the subject of an explicit instantiation definition somewhere in the
program; otherwise the program is ill-formed, no diagnostic required<a class='hidden_link' href='#explicit-13.sentence-2'>.</a></div> <div id='explicit-13.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#explicit-13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-13.sentence-4' class='sentence'>This rule does apply to inline functions even though an
explicit instantiation declaration of such an entity has no other normative
effect<a class='hidden_link' href='#explicit-13.sentence-4'>.</a></div> <div id='explicit-13.sentence-5' class='sentence'>This is needed to ensure that if the address of an inline function is
taken in a translation unit in which the implementation chose to suppress the
out-of-line body, another translation unit will supply the body<a class='hidden_link' href='#explicit-13.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='explicit-13.sentence-3' class='sentence'>
An explicit instantiation declaration shall not name a specialization of a
template with internal linkage<a class='hidden_link' href='#explicit-13.sentence-3'>.</a></div></div><div class='para' id='explicit-14'><div class='marginalizedparent'><a class='marginalized' href='#explicit-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6224'>#</a></div><div id='explicit-14.sentence-1' class='sentence'>An explicit instantiation does not constitute a use of a default argument,
so default argument instantiation is not done<a class='hidden_link' href='#explicit-14.sentence-1'>.</a></div> <div id='explicit-14.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#explicit-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
char* p = 0;
template&lt;class T&gt; T g(T x = &amp;p) { return x; }
template int g&lt;int&gt;(int);       <span class='comment'>// OK even though <span class='tcode_in_codeblock'>&amp;p</span> isn't an <span class='tcode_in_codeblock'>int</span>.
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='expl.spec' class='section'><h3 ><a class='secnum' href='#expl.spec' style='min-width:103pt'>17.8.3</a> Explicit specialization <a class='abbr_ref' href='temp.expl.spec'>[temp.expl.spec]</a></h3><div class='para' id='expl.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6238'>#</a></div><div id='expl.spec-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':specialization,template_explicit'></a></span>An explicit specialization of any of the following:</div><div id='expl.spec-1.sentence-2' class='sentence'><ul class='itemize'><li id='expl.spec-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.1'>(1.1)</a></div><div id='expl.spec-1.1.sentence-1' class='sentence'>function template</div></li><li id='expl.spec-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.2'>(1.2)</a></div><div id='expl.spec-1.2.sentence-1' class='sentence'>class template</div></li><li id='expl.spec-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.3'>(1.3)</a></div><div id='expl.spec-1.3.sentence-1' class='sentence'>variable template</div></li><li id='expl.spec-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.4'>(1.4)</a></div><div id='expl.spec-1.4.sentence-1' class='sentence'>member function of a class template</div></li><li id='expl.spec-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.5'>(1.5)</a></div><div id='expl.spec-1.5.sentence-1' class='sentence'>static data member of a class template</div></li><li id='expl.spec-1.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.6'>(1.6)</a></div><div id='expl.spec-1.6.sentence-1' class='sentence'>member class of a class template</div></li><li id='expl.spec-1.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.7'>(1.7)</a></div><div id='expl.spec-1.7.sentence-1' class='sentence'>member enumeration of a class template</div></li><li id='expl.spec-1.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.8'>(1.8)</a></div><div id='expl.spec-1.8.sentence-1' class='sentence'>member class template of a class or class template</div></li><li id='expl.spec-1.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.9'>(1.9)</a></div><div id='expl.spec-1.9.sentence-1' class='sentence'>member function template of a class or class template</div></li></ul></div><div id='expl.spec-1.sentence-3' class='sentence'>can be declared by a declaration introduced by
<span class='texttt'>template&lt;&gt;</span>;
that is:
<span class='indexparent'><a class='index' id=':explicit-specialization'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:explicit-specialization' id='nt:explicit-specialization'>explicit-specialization:</a>
&#9;<span class='terminal'>template &lt; &gt;</span> <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
</pre></div><div id='expl.spec-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class stream;

template&lt;&gt; class stream&lt;char&gt; { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

template&lt;class T&gt; class Array { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T&gt; void sort(Array&lt;T&gt;&amp; v) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

template&lt;&gt; void sort&lt;char*&gt;(Array&lt;char*&gt;&amp;);</pre><div id='expl.spec-1.sentence-4' class='sentence'>Given these declarations,
<span class='texttt'>stream&lt;char&gt;</span>
will be used as the definition of streams of
<span class='texttt'>char</span>s;
other streams will be handled by class template specializations instantiated
from the class template<a class='hidden_link' href='#expl.spec-1.sentence-4'>.</a></div> <div id='expl.spec-1.sentence-5' class='sentence'>Similarly,
<span class='texttt'>sort&lt;char*&gt;</span>
will be used as the sort function for arguments
of type
<span class='texttt'>Array&lt;char*&gt;</span>;
other
<span class='texttt'>Array</span>
types will be sorted by functions generated from the template<a class='hidden_link' href='#expl.spec-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-2'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6301'>#</a></div><div id='expl.spec-2.sentence-1' class='sentence'>An explicit specialization
may be declared in any scope in which the corresponding primary template
may be defined (<a href='namespace.memdef'>[namespace.memdef]</a>, <a href='class.mem'>[class.mem]</a>, <a href='temp.mem'>[temp.mem]</a>)<a class='hidden_link' href='#expl.spec-2.sentence-1'>.</a></div></div><div class='para' id='expl.spec-3'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6306'>#</a></div><div id='expl.spec-3.sentence-1' class='sentence'>A declaration of a function template, class template, or variable template being explicitly
specialized shall precede the declaration of
the explicit
specialization<a class='hidden_link' href='#expl.spec-3.sentence-1'>.</a></div> <div id='expl.spec-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expl.spec-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.spec-3.sentence-3' class='sentence'>A declaration, but not a definition of the template is required<a class='hidden_link' href='#expl.spec-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expl.spec-3.sentence-2' class='sentence'>
The definition of a class or class template shall precede the
declaration of an explicit specialization for a member template of the class
or class template<a class='hidden_link' href='#expl.spec-3.sentence-2'>.</a></div> <div id='expl.spec-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;&gt; class X&lt;int&gt; { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };          <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> not a template
</span>
template&lt;class T&gt; class X;

template&lt;&gt; class X&lt;char*&gt; { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };        <span class='comment'>// OK: <span class='tcode_in_codeblock'>X</span> is a template
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-4'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6328'>#</a></div><div id='expl.spec-4.sentence-1' class='sentence'>A member function, a member function template, a member class,
a member enumeration, a
member class template,
a static data member, or a static data member template of a class template
may be explicitly specialized for a class specialization that is implicitly
instantiated;
in this case, the definition of the class template shall
precede the explicit specialization for the member of the class
template<a class='hidden_link' href='#expl.spec-4.sentence-1'>.</a></div> <div id='expl.spec-4.sentence-2' class='sentence'>If such an explicit specialization for the member of a class template names an
implicitly-declared special member function (<a href='special'>[special]</a>),
the program is ill-formed<a class='hidden_link' href='#expl.spec-4.sentence-2'>.</a></div></div><div class='para' id='expl.spec-5'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6342'>#</a></div><div id='expl.spec-5.sentence-1' class='sentence'>A member of an explicitly specialized class is not implicitly
instantiated from the member declaration of the class template;
instead, the member of the class template specialization shall itself be
explicitly defined if its definition is required<a class='hidden_link' href='#expl.spec-5.sentence-1'>.</a></div> <div id='expl.spec-5.sentence-2' class='sentence'>In this case, the definition of the class template explicit specialization
shall be in scope at the point at which the member is defined<a class='hidden_link' href='#expl.spec-5.sentence-2'>.</a></div> <div id='expl.spec-5.sentence-3' class='sentence'>The definition of an explicitly specialized class is unrelated to the
definition of a generated specialization<a class='hidden_link' href='#expl.spec-5.sentence-3'>.</a></div> <div id='expl.spec-5.sentence-4' class='sentence'>That is, its members need
not have the same names, types, etc<a class='hidden_link' href='#expl.spec-5.sentence-4'>.</a></div> <div id='expl.spec-5.sentence-5' class='sentence'>as the members of a generated
specialization<a class='hidden_link' href='#expl.spec-5.sentence-5'>.</a></div> <div id='expl.spec-5.sentence-6' class='sentence'>Members of an explicitly specialized
class template are defined in the same manner as members of normal classes, and
not using the <span class='texttt'>template&lt;&gt;</span> syntax<a class='hidden_link' href='#expl.spec-5.sentence-6'>.</a></div> <div id='expl.spec-5.sentence-7' class='sentence'>The same is true when defining a member of an explicitly specialized member
class<a class='hidden_link' href='#expl.spec-5.sentence-7'>.</a></div> <div id='expl.spec-5.sentence-8' class='sentence'>However, <span class='texttt'>template&lt;&gt;</span> is used in defining a member of an explicitly
specialized member class template that is specialized as a class template<a class='hidden_link' href='#expl.spec-5.sentence-8'>.</a></div> <div id='expl.spec-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  struct B { };
  template&lt;class U&gt; struct C { };
};

template&lt;&gt; struct A&lt;int&gt; {
  void f(int);
};

void h() {
  A&lt;int&gt; a;
  a.f(16);          <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;f</span> must be defined somewhere
</span>}

<span class='comment'>// <span class='tcode_in_codeblock'>template&lt;&gt;</span> not used for a member of an explicitly specialized class template
</span>void A&lt;int&gt;::f(int) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

template&lt;&gt; struct A&lt;char&gt;::B {
  void f();
};
<span class='comment'>// <span class='tcode_in_codeblock'>template&lt;&gt;</span> also not used when defining a member of an explicitly specialized member class
</span>void A&lt;char&gt;::B::f() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

template&lt;&gt; template&lt;class U&gt; struct A&lt;char&gt;::C {
  void f();
};
<span class='comment'>// <span class='tcode_in_codeblock'>template&lt;&gt;</span> is used when defining a member of an explicitly specialized member class template
</span><span class='comment'>// specialized as a class template
</span>template&lt;&gt;
template&lt;class U&gt; void A&lt;char&gt;::C&lt;U&gt;::f() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

template&lt;&gt; struct A&lt;short&gt;::B {
  void f();
};
template&lt;&gt; void A&lt;short&gt;::B::f() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }              <span class='comment'>// error: <span class='tcode_in_codeblock'>template&lt;&gt;</span> not permitted
</span>
template&lt;&gt; template&lt;class U&gt; struct A&lt;short&gt;::C {
  void f();
};
template&lt;class U&gt; void A&lt;short&gt;::C&lt;U&gt;::f() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }    <span class='comment'>// error: <span class='tcode_in_codeblock'>template&lt;&gt;</span> required
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-6'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6406'>#</a></div><div id='expl.spec-6.sentence-1' class='sentence'>If a template, a member template or a member of a class template is explicitly
specialized then that specialization shall be declared before the first use of
that specialization that would cause an implicit instantiation to take place,
in every translation unit in which such a use occurs;
no diagnostic is required<a class='hidden_link' href='#expl.spec-6.sentence-1'>.</a></div> <div id='expl.spec-6.sentence-2' class='sentence'>If the program does not provide a definition for an explicit specialization and
either the specialization is used in a way that would cause an implicit
instantiation to take place or the member is a virtual member function,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#expl.spec-6.sentence-2'>.</a></div> <div id='expl.spec-6.sentence-3' class='sentence'>An implicit instantiation is never generated for an explicit specialization
that is declared but not defined<a class='hidden_link' href='#expl.spec-6.sentence-3'>.</a></div> <div id='expl.spec-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class String { };
template&lt;class T&gt; class Array { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T&gt; void sort(Array&lt;T&gt;&amp; v) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

void f(Array&lt;String&gt;&amp; v) {
  sort(v);          <span class='comment'>// use primary template <span class='tcode_in_codeblock'>sort(Array&lt;T&gt;&amp;)</span>, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>String</span>
</span>}

template&lt;&gt; void sort&lt;String&gt;(Array&lt;String&gt;&amp; v);     <span class='comment'>// error: specialization after use of primary template
</span>template&lt;&gt; void sort&lt;&gt;(Array&lt;char*&gt;&amp; v);            <span class='comment'>// OK: <span class='tcode_in_codeblock'>sort&lt;char*&gt;</span> not yet used
</span>template&lt;class T&gt; struct A {
  enum E : T;
  enum class S : T;
};
template&lt;&gt; enum A&lt;int&gt;::E : int { eint };           <span class='comment'>// OK
</span>template&lt;&gt; enum class A&lt;int&gt;::S : int { sint };     <span class='comment'>// OK
</span>template&lt;class T&gt; enum A&lt;T&gt;::E : T { eT };
template&lt;class T&gt; enum class A&lt;T&gt;::S : T { sT };
template&lt;&gt; enum A&lt;char&gt;::E : char { echar };        <span class='comment'>// ill-formed, <span class='tcode_in_codeblock'>A&lt;char&gt;&#x200b;::&#x200b;E</span> was instantiated
</span>                                                    <span class='comment'>// when <span class='tcode_in_codeblock'>A&lt;char&gt;</span> was instantiated
</span>template&lt;&gt; enum class A&lt;char&gt;::S : char { schar };  <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-7'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6445'>#</a></div><div id='expl.spec-7.sentence-1' class='sentence'>The placement of explicit specialization declarations for function templates, class
templates, variable templates,
member functions of class templates, static data members of class
templates, member classes of class templates, member enumerations of class
templates, member class templates of class
templates, member function templates of class templates,
static data member templates of class templates,
member functions of
member templates of class templates, member functions of member templates of
non-template classes,
static data member templates of non-template classes,
member function templates of member classes of class
templates, etc<a class='hidden_link' href='#expl.spec-7.sentence-1'>.</a></div> <div id='expl.spec-7.sentence-2' class='sentence'>, and the placement of partial specialization declarations
of class templates, variable templates,
member class templates of non-template classes,
static data member templates of non-template classes, member
class templates of class templates, etc<a class='hidden_link' href='#expl.spec-7.sentence-2'>.</a></div> <div id='expl.spec-7.sentence-3' class='sentence'>, can affect whether a program is
well-formed according to the relative positioning of the explicit specialization
declarations and their points of instantiation in the translation unit as
specified above and below<a class='hidden_link' href='#expl.spec-7.sentence-3'>.</a></div> <div id='expl.spec-7.sentence-4' class='sentence'>When writing a specialization, be careful about its location;
or to make it compile will be such a trial as to kindle its self-immolation<a class='hidden_link' href='#expl.spec-7.sentence-4'>.</a></div></div><div class='para' id='expl.spec-8'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6469'>#</a></div><div id='expl.spec-8.sentence-1' class='sentence'>A template explicit specialization is in the scope of the namespace in which
the template was defined<a class='hidden_link' href='#expl.spec-8.sentence-1'>.</a></div> <div id='expl.spec-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace N {
  template&lt;class T&gt; class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  template&lt;class T&gt; class Y { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

  template&lt;&gt; class X&lt;int&gt; { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };        <span class='comment'>// OK: specialization in same namespace
</span>  template&lt;&gt; class Y&lt;double&gt;;                   <span class='comment'>// forward-declare intent to specialize for <span class='tcode_in_codeblock'>double</span>
</span>}

template&lt;&gt; class N::Y&lt;double&gt; { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };    <span class='comment'>// OK: specialization in enclosing namespace
</span>template&lt;&gt; class N::Y&lt;short&gt; { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };     <span class='comment'>// OK: specialization in enclosing namespace
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-9'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6488'>#</a></div><div id='expl.spec-9.sentence-1' class='sentence'>A
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
that names a class template explicit specialization that has been declared but
not defined can be used exactly like the names of other incompletely-defined
classes (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#expl.spec-9.sentence-1'>.</a></div> <div id='expl.spec-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class X;                      <span class='comment'>// <span class='tcode_in_codeblock'>X</span> is a class template
</span>template&lt;&gt; class X&lt;int&gt;;

X&lt;int&gt;* p;                                      <span class='comment'>// OK: pointer to declared class <span class='tcode_in_codeblock'>X&lt;int&gt;</span>
</span>X&lt;int&gt; x;                                       <span class='comment'>// error: object of incomplete class <span class='tcode_in_codeblock'>X&lt;int&gt;</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-10'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6505'>#</a></div><div id='expl.spec-10.sentence-1' class='sentence'>A trailing
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
can be left unspecified in the
<i ><a href='temp.names#nt:template-id'>template-id</a></i>
naming an explicit function template specialization
provided it can be deduced from the function argument type<a class='hidden_link' href='#expl.spec-10.sentence-1'>.</a></div> <div id='expl.spec-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class Array { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T&gt; void sort(Array&lt;T&gt;&amp; v);

<span class='comment'>// explicit specialization for <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span>
</span><span class='comment'>// with deduced template-argument of type <span class='tcode_in_codeblock'>int</span>
</span>template&lt;&gt; void sort(Array&lt;int&gt;&amp;);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-11'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6524'>#</a></div><div id='expl.spec-11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expl.spec-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.spec-11.sentence-1' class='sentence'>An explicit specialization of a constrained template
shall satisfy that template's associated constraints (<a href='temp.constr.decl'>[temp.constr.decl]</a>)<a class='hidden_link' href='#expl.spec-11.sentence-1'>.</a></div> <div id='expl.spec-11.sentence-2' class='sentence'>The satisfaction of constraints is determined
when forming the template name of an explicit specialization
in which all template arguments are specified (<a href='temp.names'>[temp.names]</a>),
or, for explicit specializations of function templates,
during template argument deduction (<a href='temp.deduct.decl'>[temp.deduct.decl]</a>)
when one or more trailing template arguments are left unspecified<a class='hidden_link' href='#expl.spec-11.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-12'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6536'>#</a></div><div id='expl.spec-12.sentence-1' class='sentence'>A function with the same name as a template and a type that exactly matches that
of a template specialization is not an explicit specialization (<a href='temp.fct'>[temp.fct]</a>)<a class='hidden_link' href='#expl.spec-12.sentence-1'>.</a></div></div><div class='para' id='expl.spec-13'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6540'>#</a></div><div id='expl.spec-13.sentence-1' class='sentence'>An explicit specialization of a function or variable template is inline
only if it is declared with the <span class='texttt'>inline</span>
specifier or defined as deleted, and independently of whether its
function or variable template is inline<a class='hidden_link' href='#expl.spec-13.sentence-1'>.</a></div> <div id='expl.spec-13.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void f(T) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
template&lt;class T&gt; inline T g(T) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

template&lt;&gt; inline void f&lt;&gt;(int) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }   <span class='comment'>// OK: inline
</span>template&lt;&gt; int g&lt;&gt;(int) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }           <span class='comment'>// OK: not inline
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-14'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6556'>#</a></div><div id='expl.spec-14.sentence-1' class='sentence'>An explicit specialization of a static data member of a template
or an explicit specialization of a static data member template is a
definition if the declaration includes an initializer;
otherwise, it is a declaration<a class='hidden_link' href='#expl.spec-14.sentence-1'>.</a></div> <div id='expl.spec-14.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expl.spec-14.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.spec-14.sentence-2' class='sentence'>The definition of a static data member of a template
that requires default-initialization must use a <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>:</div><pre class='codeblock'>
template&lt;&gt; X Q&lt;int&gt;::x;                         <span class='comment'>// declaration
</span>template&lt;&gt; X Q&lt;int&gt;::x ();                      <span class='comment'>// error: declares a function
</span>template&lt;&gt; X Q&lt;int&gt;::x { };                     <span class='comment'>// definition
</span></pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-15'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6572'>#</a></div><div id='expl.spec-15.sentence-1' class='sentence'>A member or a member template of a class template may be explicitly specialized
for a given implicit instantiation of the class template, even if the member
or member template is defined in the class template definition<a class='hidden_link' href='#expl.spec-15.sentence-1'>.</a></div> <div id='expl.spec-15.sentence-2' class='sentence'>An explicit specialization of a member or member template is specified using the
syntax for explicit specialization<a class='hidden_link' href='#expl.spec-15.sentence-2'>.</a></div> <div id='expl.spec-15.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  void f(T);
  template&lt;class X1&gt; void g1(T, X1);
  template&lt;class X2&gt; void g2(T, X2);
  void h(T) { }
};

<span class='comment'>// specialization
</span>template&lt;&gt; void A&lt;int&gt;::f(int);

<span class='comment'>// out of class member template definition
</span>template&lt;class T&gt; template&lt;class X1&gt; void A&lt;T&gt;::g1(T, X1) { }

<span class='comment'>// member template specialization
</span>template&lt;&gt; template&lt;class X1&gt; void A&lt;int&gt;::g1(int, X1);

<span class='comment'>// member template specialization
</span>template&lt;&gt; template&lt;&gt;
  void A&lt;int&gt;::g1(int, char);           <span class='comment'>// <span class='tcode_in_codeblock'>X1</span> deduced as <span class='tcode_in_codeblock'>char</span>
</span>template&lt;&gt; template&lt;&gt;
  void A&lt;int&gt;::g2&lt;char&gt;(int, char);     <span class='comment'>// <span class='tcode_in_codeblock'>X2</span> specified as <span class='tcode_in_codeblock'>char</span>
</span>
<span class='comment'>// member specialization even if defined in class definition
</span>template&lt;&gt; void A&lt;int&gt;::h(int) { }</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-16'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6608'>#</a></div><div id='expl.spec-16.sentence-1' class='sentence'>A member or a member template may be nested within many enclosing class
templates<a class='hidden_link' href='#expl.spec-16.sentence-1'>.</a></div> <div id='expl.spec-16.sentence-2' class='sentence'>In an explicit specialization for such a member,
the member declaration shall be preceded by a
<span class='texttt'>template&lt;&gt;</span>
for each enclosing class template that is explicitly specialized<a class='hidden_link' href='#expl.spec-16.sentence-2'>.</a></div> <div id='expl.spec-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T1&gt; class A {
  template&lt;class T2&gt; class B {
    void mf();
  };
};
template&lt;&gt; template&lt;&gt; class A&lt;int&gt;::B&lt;double&gt;;
template&lt;&gt; template&lt;&gt; void A&lt;char&gt;::B&lt;char&gt;::mf();</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-17'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6628'>#</a></div><div id='expl.spec-17.sentence-1' class='sentence'>In an explicit specialization declaration for a member of a class template or
a member template that appears in namespace scope,
the member template and some of its enclosing class templates may remain
unspecialized,
except that the declaration shall not explicitly specialize a class member
template if its enclosing class templates are not explicitly specialized
as well<a class='hidden_link' href='#expl.spec-17.sentence-1'>.</a></div> <div id='expl.spec-17.sentence-2' class='sentence'>In such explicit specialization declaration, the keyword
<span class='texttt'>template</span>
followed by a
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i>
shall be provided instead of the
<span class='texttt'>template&lt;&gt;</span>
preceding the explicit specialization declaration of the member<a class='hidden_link' href='#expl.spec-17.sentence-2'>.</a></div> <div id='expl.spec-17.sentence-3' class='sentence'>The types of the
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>
in the
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i>
shall be the same as those specified in the primary template definition<a class='hidden_link' href='#expl.spec-17.sentence-3'>.</a></div> <div id='expl.spec-17.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.spec-17.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T1&gt; class A {
  template&lt;class T2&gt; class B {
    template&lt;class T3&gt; void mf1(T3);
    void mf2();
  };
};
template &lt;&gt; template &lt;class X&gt;
  class A&lt;int&gt;::B {
      template &lt;class T&gt; void mf1(T);
  };
template &lt;&gt; template &lt;&gt; template&lt;class T&gt;
  void A&lt;int&gt;::B&lt;double&gt;::mf1(T t) { }
template &lt;class Y&gt; template &lt;&gt;
  void A&lt;Y&gt;::B&lt;double&gt;::mf2() { }       <span class='comment'>// ill-formed; <span class='tcode_in_codeblock'>B&lt;double&gt;</span> is specialized but
</span>                                        <span class='comment'>// its enclosing class template <span class='tcode_in_codeblock'>A</span> is not
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.spec-18'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6669'>#</a></div><div id='expl.spec-18.sentence-1' class='sentence'>A specialization of a member function template, member class template,
or static data member template of
a non-specialized class template is itself a template<a class='hidden_link' href='#expl.spec-18.sentence-1'>.</a></div></div><div class='para' id='expl.spec-19'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6674'>#</a></div><div id='expl.spec-19.sentence-1' class='sentence'>An explicit specialization declaration shall not be a friend declaration<a class='hidden_link' href='#expl.spec-19.sentence-1'>.</a></div></div><div class='para' id='expl.spec-20'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6677'>#</a></div><div id='expl.spec-20.sentence-1' class='sentence'>Default function arguments shall not be specified in a declaration or
a definition for one of the following explicit specializations:</div><div id='expl.spec-20.sentence-2' class='sentence'><ul class='itemize'><li id='expl.spec-20.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-20.1'>(20.1)</a></div><div id='expl.spec-20.1.sentence-1' class='sentence'>the explicit specialization of a function template;</div></li><li id='expl.spec-20.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-20.2'>(20.2)</a></div><div id='expl.spec-20.2.sentence-1' class='sentence'>the explicit specialization of a member function template;</div></li><li id='expl.spec-20.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-20.3'>(20.3)</a></div><div id='expl.spec-20.3.sentence-1' class='sentence'>the explicit specialization of a member function of a class template where
the class template specialization to which the member function specialization
belongs is implicitly instantiated<a class='hidden_link' href='#expl.spec-20.3.sentence-1'>.</a></div> <div id='expl.spec-20.3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expl.spec-20.3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.spec-20.3.sentence-2' class='sentence'>Default function arguments may be specified in the declaration or
definition of a member function of a class template specialization that is
explicitly specialized<a class='hidden_link' href='#expl.spec-20.3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div></div></div></div><div id='fct.spec' class='section'><h2 ><a class='secnum' href='#fct.spec' style='min-width:88pt'>17.9</a> Function template specializations <a class='abbr_ref' href='temp.fct.spec'>[temp.fct.spec]</a></h2><div class='para' id='fct.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#fct.spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6699'>#</a></div><div id='fct.spec-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':template,function'></a></span>A function instantiated from a function template is called a function template
specialization; so is an explicit specialization of a function template<a class='hidden_link' href='#fct.spec-1.sentence-1'>.</a></div> <div id='fct.spec-1.sentence-2' class='sentence'>Template arguments can be explicitly specified when naming the function
template specialization, deduced from the context (e.g.,
deduced from the function arguments in a call to the function template
specialization, see <a href='temp.deduct'>[temp.deduct]</a>), or obtained from default template arguments<a class='hidden_link' href='#fct.spec-1.sentence-2'>.</a></div></div><div class='para' id='fct.spec-2'><div class='marginalizedparent'><a class='marginalized' href='#fct.spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6708'>#</a></div><div id='fct.spec-2.sentence-1' class='sentence'>Each function template specialization instantiated from a template
has its own copy of any static variable<a class='hidden_link' href='#fct.spec-2.sentence-1'>.</a></div> <div id='fct.spec-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#fct.spec-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void f(T* p) {
  static T s;
};

void g(int a, char* b) {
  f(&amp;a);            <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int*)</span>
</span>  f(&amp;b);            <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;char*&gt;(char**)</span>
</span>}</pre><div id='fct.spec-2.sentence-2' class='sentence'>Here
<span class='texttt'>f&lt;int&gt;(int*)</span>
has a static variable
<span class='texttt'>s</span>
of type
<span class='texttt'>int</span>
and
<span class='texttt'>f&lt;char*&gt;(char**)</span>
has a static variable
<span class='texttt'>s</span>
of type
<span class='texttt'>char*</span><a class='hidden_link' href='#fct.spec-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='arg.explicit' class='section'><h3 ><a class='secnum' href='#arg.explicit' style='min-width:103pt'>17.9.1</a> Explicit template argument specification <a class='abbr_ref' href='temp.arg.explicit'>[temp.arg.explicit]</a></h3><div class='para' id='arg.explicit-1'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6740'>#</a></div><div id='arg.explicit-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':specification,template_argument'></a></span>Template arguments can be specified when referring to a function
template specialization by qualifying the function template
name with the list of
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
in the same way as
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
are specified in uses of a class template specialization<a class='hidden_link' href='#arg.explicit-1.sentence-1'>.</a></div> <div id='arg.explicit-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.explicit-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void sort(Array&lt;T&gt;&amp; v);
void f(Array&lt;dcomplex&gt;&amp; cv, Array&lt;int&gt;&amp; ci) {
  sort&lt;dcomplex&gt;(cv);                   <span class='comment'>// <span class='tcode_in_codeblock'>sort(Array&lt;dcomplex&gt;&amp;)</span>
</span>  sort&lt;int&gt;(ci);                        <span class='comment'>// <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span>
</span>}</pre> <div id='arg.explicit-1.sentence-2' class='sentence'>
and
<pre class='codeblock'>
template&lt;class U, class V&gt; U convert(V v);

void g(double d) {
  int i = convert&lt;int,double&gt;(d);       <span class='comment'>// <span class='tcode_in_codeblock'>int convert(double)</span>
</span>  char c = convert&lt;char,double&gt;(d);     <span class='comment'>// <span class='tcode_in_codeblock'>char convert(double)</span>
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.explicit-2'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6768'>#</a></div><div id='arg.explicit-2.sentence-1' class='sentence'>A template argument list may be specified when referring to a specialization
of a function template
<ul class='itemize'><li id='arg.explicit-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-2.1'>(2.1)</a></div><div id='arg.explicit-2.1.sentence-1' class='sentence'>when a function is called,</div></li><li id='arg.explicit-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-2.2'>(2.2)</a></div><div id='arg.explicit-2.2.sentence-1' class='sentence'>when the address of a function is taken, when a function initializes a
reference to function, or when a pointer to member function is formed,</div></li><li id='arg.explicit-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-2.3'>(2.3)</a></div><div id='arg.explicit-2.3.sentence-1' class='sentence'>in an explicit specialization,</div></li><li id='arg.explicit-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-2.4'>(2.4)</a></div><div id='arg.explicit-2.4.sentence-1' class='sentence'>in an explicit instantiation, or</div></li><li id='arg.explicit-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-2.5'>(2.5)</a></div><div id='arg.explicit-2.5.sentence-1' class='sentence'>in a friend declaration<a class='hidden_link' href='#arg.explicit-2.5.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='arg.explicit-3'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6785'>#</a></div><div id='arg.explicit-3.sentence-1' class='sentence'>Trailing template arguments that can be <a href='temp.deduct'>deduced</a> or
obtained from default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
may be omitted from the list of explicit
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span><a class='hidden_link' href='#arg.explicit-3.sentence-1'>.</a></div> <div id='arg.explicit-3.sentence-2' class='sentence'>A trailing <a href='temp.variadic#def:template_parameter_pack'>template parameter pack</a> not otherwise deduced will be
deduced to an empty sequence of template arguments<a class='hidden_link' href='#arg.explicit-3.sentence-2'>.</a></div> <div id='arg.explicit-3.sentence-3' class='sentence'>If all of the template arguments can be deduced, they may all be omitted;
in this case, the empty template argument list
<span class='texttt'>&lt;&gt;</span>
itself may also be omitted<a class='hidden_link' href='#arg.explicit-3.sentence-3'>.</a></div> <div id='arg.explicit-3.sentence-4' class='sentence'>In contexts where deduction is done and fails, or in contexts where
deduction is not done, if a template argument list is specified and it,
along with any default template arguments, identifies a single function
template specialization, then the
<i ><a href='temp.names#nt:template-id'>template-id</a></i>
is an lvalue for the function template specialization<a class='hidden_link' href='#arg.explicit-3.sentence-4'>.</a></div> <div id='arg.explicit-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.explicit-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class X, class Y&gt; X f(Y);
template&lt;class X, class Y, class ... Z&gt; X g(Y);
void h() {
  int i = f&lt;int&gt;(5.6);          <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> is deduced to be <span class='tcode_in_codeblock'>double</span>
</span>  int j = f(5.6);               <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>X</span> cannot be deduced
</span>  f&lt;void&gt;(f&lt;int, bool&gt;);        <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> for outer <span class='tcode_in_codeblock'>f</span> deduced to be <span class='tcode_in_codeblock'>int (*)(bool)</span>
</span>  f&lt;void&gt;(f&lt;int&gt;);              <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>f&lt;int&gt;</span> does not denote a single function template specialization
</span>  int k = g&lt;int&gt;(5.6);          <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> is deduced to be double, <span class='tcode_in_codeblock'>Z</span> is deduced to an empty sequence
</span>  f&lt;void&gt;(g&lt;int, bool&gt;);        <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> for outer <span class='tcode_in_codeblock'>f</span> is deduced to be <span class='tcode_in_codeblock'>int (*)(bool)</span>,
</span>                                <span class='comment'>// <span class='tcode_in_codeblock'>Z</span> is deduced to an empty sequence
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.explicit-4'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6819'>#</a></div><div id='arg.explicit-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#arg.explicit-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.explicit-4.sentence-1' class='sentence'>An empty template argument list can be used to indicate that a given
use refers to a specialization of a function template even when a
non-template function (<a href='dcl.fct'>[dcl.fct]</a>) is visible that would otherwise be used<a class='hidden_link' href='#arg.explicit-4.sentence-1'>.</a></div> <div id='arg.explicit-4.sentence-2' class='sentence'>For example:</div><pre class='codeblock'>
template &lt;class T&gt; int f(T);    <span class='comment'>// #1
</span>int f(int);                     <span class='comment'>// #2
</span>int k = f(1);                   <span class='comment'>// uses #2
</span>int l = f&lt;&gt;(1);                 <span class='comment'>// uses #1
</span></pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.explicit-5'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6834'>#</a></div><div id='arg.explicit-5.sentence-1' class='sentence'>Template arguments that are present shall be specified in the declaration
order of their corresponding
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span><a class='hidden_link' href='#arg.explicit-5.sentence-1'>.</a></div> <div id='arg.explicit-5.sentence-2' class='sentence'>The template argument list shall not specify more
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
than there are corresponding
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>
unless one of the <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> is a template
parameter pack<a class='hidden_link' href='#arg.explicit-5.sentence-2'>.</a></div> <div id='arg.explicit-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.explicit-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class X, class Y, class Z&gt; X f(Y,Z);
template&lt;class ... Args&gt; void f2();
void g() {
  f&lt;int,const char*,double&gt;("aa",3.0);
  f&lt;int,const char*&gt;("aa",3.0); <span class='comment'>// <span class='tcode_in_codeblock'>Z</span> is deduced to be <span class='tcode_in_codeblock'>double</span>
</span>  f&lt;int&gt;("aa",3.0);             <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> is deduced to be <span class='tcode_in_codeblock'>const char*</span>, and <span class='tcode_in_codeblock'>Z</span> is deduced to be <span class='tcode_in_codeblock'>double</span>
</span>  f("aa",3.0);                  <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> cannot be deduced
</span>  f2&lt;char, short, int, long&gt;(); <span class='comment'>// OK
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.explicit-6'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6859'>#</a></div><div id='arg.explicit-6.sentence-1' class='sentence'>Implicit conversions (<a href='conv'>[conv]</a>) will be performed on a function argument
to convert it to the type of the corresponding function parameter if
the parameter type contains no
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>
that participate in template argument deduction<a class='hidden_link' href='#arg.explicit-6.sentence-1'>.</a></div> <div id='arg.explicit-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#arg.explicit-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.explicit-6.sentence-2' class='sentence'>Template parameters do not participate in template argument deduction if
they are explicitly specified<a class='hidden_link' href='#arg.explicit-6.sentence-2'>.</a></div> <div id='arg.explicit-6.sentence-3' class='sentence'>For example,</div><pre class='codeblock'>
template&lt;class T&gt; void f(T);

class Complex {
  Complex(double);
};

void g() {
  f&lt;Complex&gt;(1);    <span class='comment'>// OK, means <span class='tcode_in_codeblock'>f&lt;Complex&gt;(Complex(1))</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.explicit-7'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6883'>#</a></div><div id='arg.explicit-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#arg.explicit-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.explicit-7.sentence-1' class='sentence'>Because the explicit template argument list follows the function
template name, and because conversion member function templates and
constructor member function templates are called without using a
function name, there is no way to provide an explicit template
argument list for these function templates<a class='hidden_link' href='#arg.explicit-7.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='arg.explicit-8'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6892'>#</a></div><div id='arg.explicit-8.sentence-1' class='sentence'>Template argument deduction can extend the sequence of template
arguments corresponding to a template parameter pack, even when the
sequence contains explicitly specified template arguments<a class='hidden_link' href='#arg.explicit-8.sentence-1'>.</a></div> <div id='arg.explicit-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#arg.explicit-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class ... Types&gt; void f(Types ... values);

void g() {
  f&lt;int*, float*&gt;(0, 0, 0);     <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> is deduced to the sequence <span class='tcode_in_codeblock'>int*</span>, <span class='tcode_in_codeblock'>float*</span>, <span class='tcode_in_codeblock'>int</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='deduct' class='section'><h3 ><a class='secnum' href='#deduct' style='min-width:103pt'>17.9.2</a> Template argument deduction <a class='abbr_ref' href='temp.deduct'>[temp.deduct]</a></h3><div class='para' id='deduct-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6908'>#</a></div><div id='deduct-1.sentence-1' class='sentence'>When a
function template
specialization is referenced, all of the
template arguments shall have values<a class='hidden_link' href='#deduct-1.sentence-1'>.</a></div> <div id='deduct-1.sentence-2' class='sentence'>The values can be
explicitly specified or, in some cases, be deduced from the use
or obtained from default
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span><a class='hidden_link' href='#deduct-1.sentence-2'>.</a></div> <div id='deduct-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
void f(Array&lt;dcomplex&gt;&amp; cv, Array&lt;int&gt;&amp; ci) {
  sort(cv);                     <span class='comment'>// calls <span class='tcode_in_codeblock'>sort(Array&lt;dcomplex&gt;&amp;)</span>
</span>  sort(ci);                     <span class='comment'>// calls <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span>
</span>}</pre> <div id='deduct-1.sentence-3' class='sentence'>
and
<pre class='codeblock'>
void g(double d) {
  int i = convert&lt;int&gt;(d);      <span class='comment'>// calls <span class='tcode_in_codeblock'>convert&lt;int,double&gt;(double)</span>
</span>  int c = convert&lt;char&gt;(d);     <span class='comment'>// calls <span class='tcode_in_codeblock'>convert&lt;char,double&gt;(double)</span>
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6933'>#</a></div><div id='deduct-2.sentence-1' class='sentence'>When an explicit template argument list is specified, if the template
arguments are not compatible with the template parameter list or do
not result in a valid function type as described below, type
deduction fails<a class='hidden_link' href='#deduct-2.sentence-1'>.</a></div> <div id='deduct-2.sentence-2' class='sentence'>Specifically, the following steps are performed when
evaluating an explicitly specified template argument list with respect
to a given function template:
<ul class='itemize'><li id='deduct-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-2.1'>(2.1)</a></div><div id='deduct-2.1.sentence-1' class='sentence'>If the specified template arguments do not match the template
parameters in
kind (i.e., type, non-type, template), or if there
are more arguments than there are parameters
and no parameter is a template parameter pack, or if there is not
an argument for each non-pack parameter,
type deduction fails<a class='hidden_link' href='#deduct-2.1.sentence-1'>.</a></div></li><li id='deduct-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-2.2'>(2.2)</a></div><div id='deduct-2.2.sentence-1' class='sentence'>If any non-type argument does not match the type of the
corresponding non-type
template parameter, and is not convertible to the type of the
corresponding non-type parameter as specified in <a href='temp.arg.nontype'>[temp.arg.nontype]</a>,
type deduction fails<a class='hidden_link' href='#deduct-2.2.sentence-1'>.</a></div></li><li id='deduct-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-2.3'>(2.3)</a></div><div id='deduct-2.3.sentence-1' class='sentence'>The specified template argument values are substituted for the
corresponding template parameters as specified below<a class='hidden_link' href='#deduct-2.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6959'>#</a></div><div id='deduct-3.sentence-1' class='sentence'>After this substitution is performed, the function parameter type
adjustments described in <a href='dcl.fct'>[dcl.fct]</a> are performed<a class='hidden_link' href='#deduct-3.sentence-1'>.</a></div> <div id='deduct-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct-3.sentence-2' class='sentence'>A parameter type of “<span class='texttt'>void (const int, int[5])</span>” becomes
“<span class='texttt'>void(*)(int,int*)</span>”<a class='hidden_link' href='#deduct-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-3.sentence-3' class='sentence'>A top-level qualifier in a function parameter declaration does not affect
the function type but still affects the type of the function parameter
variable within the function<a class='hidden_link' href='#deduct-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct-3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; void f(T t);
template &lt;class X&gt; void g(const X x);
template &lt;class Z&gt; void h(Z, Z*);

int main() {
  <span class='comment'>// #1: function type is <span class='tcode_in_codeblock'>f(int)</span>, <span class='tcode_in_codeblock'>t</span> is non <span class='tcode_in_codeblock'>const</span>
</span>  f&lt;int&gt;(1);

  <span class='comment'>// #2: function type is <span class='tcode_in_codeblock'>f(int)</span>, <span class='tcode_in_codeblock'>t</span> is <span class='tcode_in_codeblock'>const</span>
</span>  f&lt;const int&gt;(1);

  <span class='comment'>// #3: function type is <span class='tcode_in_codeblock'>g(int)</span>, <span class='tcode_in_codeblock'>x</span> is <span class='tcode_in_codeblock'>const</span>
</span>  g&lt;int&gt;(1);

  <span class='comment'>// #4: function type is <span class='tcode_in_codeblock'>g(int)</span>, <span class='tcode_in_codeblock'>x</span> is <span class='tcode_in_codeblock'>const</span>
</span>  g&lt;const int&gt;(1);

  <span class='comment'>// #5: function type is <span class='tcode_in_codeblock'>h(int, const int*)</span>
</span>  h&lt;const int&gt;(1,0);
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L6997'>#</a></div><div id='deduct-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-4.sentence-1' class='sentence'><span class='texttt'>f&lt;int&gt;(1)</span> and <span class='texttt'>f&lt;const int&gt;(1)</span> call distinct functions
even though both of the functions called have the same function type<a class='hidden_link' href='#deduct-4.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7003'>#</a></div><div id='deduct-5.sentence-1' class='sentence'>The resulting substituted and adjusted function type is used as
the type of the function template for template argument
deduction<a class='hidden_link' href='#deduct-5.sentence-1'>.</a></div> <div id='deduct-5.sentence-2' class='sentence'>If a template argument has not been deduced and its
corresponding template parameter has a default argument, the
template argument is determined by substituting the template
arguments determined for preceding template parameters into the
default argument<a class='hidden_link' href='#deduct-5.sentence-2'>.</a></div> <div id='deduct-5.sentence-3' class='sentence'>If the substitution results in an invalid type,
as described above, type deduction fails<a class='hidden_link' href='#deduct-5.sentence-3'>.</a></div> <div id='deduct-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T, class U = double&gt;
void f(T t = 0, U u = 0);

void g() {
  f(1, 'c');        <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,char&gt;(1,'c')</span>
</span>  f(1);             <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,double&gt;(1,0)</span>
</span>  f();              <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> cannot be deduced
</span>  f&lt;int&gt;();         <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,double&gt;(0,0)</span>
</span>  f&lt;int,char&gt;();    <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,char&gt;(0,0)</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='deduct-5.sentence-4' class='sentence'>When all template arguments have been deduced or obtained from
default template arguments, all uses of template parameters in
the template parameter list of the template and the function type
are replaced with the corresponding deduced
or default argument values<a class='hidden_link' href='#deduct-5.sentence-4'>.</a></div> <div id='deduct-5.sentence-5' class='sentence'>If the substitution results in an
invalid type, as described above, type deduction fails<a class='hidden_link' href='#deduct-5.sentence-5'>.</a></div> <div id='deduct-5.sentence-6' class='sentence'>If the function template has associated constraints (<a href='temp.constr.decl'>[temp.constr.decl]</a>),
those constraints are checked for satisfaction (<a href='temp.constr.constr'>[temp.constr.constr]</a>)<a class='hidden_link' href='#deduct-5.sentence-6'>.</a></div> <div id='deduct-5.sentence-7' class='sentence'>If the constraints are not satisfied, type deduction fails<a class='hidden_link' href='#deduct-5.sentence-7'>.</a></div></div><div class='para' id='deduct-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7037'>#</a></div><div id='deduct-6.sentence-1' class='sentence'>At certain points in the template argument deduction process it is necessary
to take a function type that makes use of template parameters and replace those
template parameters with the corresponding template arguments<a class='hidden_link' href='#deduct-6.sentence-1'>.</a></div> <div id='deduct-6.sentence-2' class='sentence'>This is done at
the beginning of template argument deduction when any explicitly specified
template arguments are substituted into the function type, and again at the end
of template argument deduction when any template arguments that were deduced or
obtained from default arguments are substituted<a class='hidden_link' href='#deduct-6.sentence-2'>.</a></div></div><div class='para' id='deduct-7'><div class='marginalizedparent'><a class='marginalized' href='#deduct-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7046'>#</a></div><div id='deduct-7.sentence-1' class='sentence'>The substitution occurs in all types and expressions that are used in the function
type and in template parameter declarations<a class='hidden_link' href='#deduct-7.sentence-1'>.</a></div> <div id='deduct-7.sentence-2' class='sentence'>The expressions include not only
constant expressions such as those that appear in array bounds or as nontype
template arguments but also general expressions (i.e., non-constant expressions)
inside <span class='texttt'>sizeof</span>, <span class='texttt'>decltype</span>, and other contexts that allow non-constant
expressions<a class='hidden_link' href='#deduct-7.sentence-2'>.</a></div> <div id='deduct-7.sentence-3' class='sentence'>The substitution proceeds in lexical order and stops when
a condition that causes deduction to fail is encountered<a class='hidden_link' href='#deduct-7.sentence-3'>.</a></div> <div id='deduct-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-7.sentence-4' class='sentence'>The equivalent substitution in exception specifications is
done only when the <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> is instantiated,
at which point a program is ill-formed
if the substitution results in an invalid type or expression<a class='hidden_link' href='#deduct-7.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct A { using X = typename T::X; };
template &lt;class T&gt; typename T::X f(typename A&lt;T&gt;::X);
template &lt;class T&gt; void f(...) { }
template &lt;class T&gt; auto g(typename A&lt;T&gt;::X) -&gt; typename T::X;
template &lt;class T&gt; void g(...) { }

void h() {
  f&lt;int&gt;(0);        <span class='comment'>// OK, substituting return type causes deduction to fail
</span>  g&lt;int&gt;(0);        <span class='comment'>// error, substituting parameter type instantiates <span class='tcode_in_codeblock'>A&lt;int&gt;</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct-8'><div class='marginalizedparent'><a class='marginalized' href='#deduct-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7075'>#</a></div><div id='deduct-8.sentence-1' class='sentence'>If a substitution results in an invalid type or expression, type deduction fails<a class='hidden_link' href='#deduct-8.sentence-1'>.</a></div> <div id='deduct-8.sentence-2' class='sentence'>An
invalid type or expression is one that would be ill-formed, with a diagnostic
required, if written using the substituted arguments<a class='hidden_link' href='#deduct-8.sentence-2'>.</a></div> <div id='deduct-8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-8.sentence-4' class='sentence'>If no
diagnostic is required, the program is still ill-formed<a class='hidden_link' href='#deduct-8.sentence-4'>.</a></div> <div id='deduct-8.sentence-5' class='sentence'>Access checking is done
as part of the substitution
process<a class='hidden_link' href='#deduct-8.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct-8.sentence-3' class='sentence'>
Only invalid types and expressions in the immediate
context of the function type and its template parameter types can result in a deduction
failure<a class='hidden_link' href='#deduct-8.sentence-3'>.</a></div> <div id='deduct-8.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct-8.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-8.sentence-6' class='sentence'>The substitution into types and expressions can result
in effects such as the instantiation of class template specializations and/or
function template specializations, the generation of implicitly-defined functions,
etc<a class='hidden_link' href='#deduct-8.sentence-6'>.</a></div> <div id='deduct-8.sentence-7' class='sentence'>Such effects are not in the “immediate context” and can result in the
program being ill-formed<a class='hidden_link' href='#deduct-8.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct-9'><div class='marginalizedparent'><a class='marginalized' href='#deduct-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7096'>#</a></div><div id='deduct-9.sentence-1' class='sentence'>A <i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i> appearing in a function type
or a template parameter is not considered part of the immediate context
for the purposes of template argument deduction<a class='hidden_link' href='#deduct-9.sentence-1'>.</a></div> <div id='deduct-9.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-9.sentence-2' class='sentence'>The intent is to avoid requiring implementations to deal with
substitution failure involving arbitrary statements<a class='hidden_link' href='#deduct-9.sentence-2'>.</a></div> <div id='deduct-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt;
  auto f(T) -&gt; decltype([]() { T::invalid; } ());
void f(...);
f(0);               <span class='comment'>// error: invalid expression not part of the immediate context
</span>
template &lt;class T, std::size_t = sizeof([]() { T::invalid; })&gt;
  void g(T);
void g(...);
g(0);               <span class='comment'>// error: invalid expression not part of the immediate context
</span>
template &lt;class T&gt;
  auto h(T) -&gt; decltype([x = T::invalid]() { });
void h(...);
h(0);               <span class='comment'>// error: invalid expression not part of the immediate context
</span>
template &lt;class T&gt;
  auto i(T) -&gt; decltype([]() -&gt; typename T::invalid { });
void i(...);
i(0);               <span class='comment'>// error: invalid expression not part of the immediate context
</span>
template &lt;class T&gt;
  auto j(T t) -&gt; decltype([](auto x) -&gt; decltype(x.invalid) { } (t));   <span class='comment'>// #1
</span>void j(...);                                                            <span class='comment'>// #2
</span>j(0);               <span class='comment'>// deduction fails on #1, calls #2
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct-10'><div class='marginalizedparent'><a class='marginalized' href='#deduct-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7133'>#</a></div><div id='deduct-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X { };
struct Y {
  Y(X){}
};

template &lt;class T&gt; auto f(T t1, T t2) -&gt; decltype(t1 + t2);     <span class='comment'>// #1
</span>X f(Y, Y);                                                      <span class='comment'>// #2
</span>
X x1, x2;
X x3 = f(x1, x2);   <span class='comment'>// deduction fails on #1 (cannot add <span class='tcode_in_codeblock'>X+X</span>), calls #2
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct-11'><div class='marginalizedparent'><a class='marginalized' href='#deduct-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7149'>#</a></div><div id='deduct-11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-11.sentence-1' class='sentence'>Type deduction may fail for the following reasons:
<ul class='itemize'><li id='deduct-11.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.1'>(11.1)</a></div><div id='deduct-11.1.sentence-1' class='sentence'>Attempting to instantiate a pack expansion containing multiple parameter packs of differing lengths<a class='hidden_link' href='#deduct-11.1.sentence-1'>.</a></div></li><li id='deduct-11.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.2'>(11.2)</a></div><div id='deduct-11.2.sentence-1' class='sentence'>Attempting to create an array with an element type that is <span class='texttt'>void</span>, a
function type, a reference type, or an abstract class type, or attempting
to create an array with a size that is zero or negative<a class='hidden_link' href='#deduct-11.2.sentence-1'>.</a></div> <div id='deduct-11.2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-11.2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; int f(T[5]);
int I = f&lt;int&gt;(0);
int j = f&lt;void&gt;(0);             <span class='comment'>// invalid array
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='deduct-11.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.3'>(11.3)</a></div><div id='deduct-11.3.sentence-1' class='sentence'>Attempting to use a type that is not a class or enumeration type in a qualified name<a class='hidden_link' href='#deduct-11.3.sentence-1'>.</a></div> <div id='deduct-11.3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-11.3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; int f(typename T::B*);
int i = f&lt;int&gt;(0);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='deduct-11.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.4'>(11.4)</a></div><div id='deduct-11.4.sentence-1' class='sentence'>Attempting to use a type in a <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> of a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> when
that type does not contain the specified member, or
<ul class='itemize'><li id='deduct-11.4.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct-11.4.1'>(11.4.1)</a></div><div id='deduct-11.4.1.sentence-1' class='sentence'>the specified member is not a type where a type is required, or</div></li><li id='deduct-11.4.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct-11.4.2'>(11.4.2)</a></div><div id='deduct-11.4.2.sentence-1' class='sentence'>the specified member is not a template where a template is required, or</div></li><li id='deduct-11.4.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct-11.4.3'>(11.4.3)</a></div><div id='deduct-11.4.3.sentence-1' class='sentence'>the specified member is not a non-type where a non-type is required<a class='hidden_link' href='#deduct-11.4.3.sentence-1'>.</a></div></li></ul></div> <div id='deduct-11.4.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-11.4.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;int I&gt; struct X { };
template &lt;template &lt;class T&gt; class&gt; struct Z { };
template &lt;class T&gt; void f(typename T::Y*){}
template &lt;class T&gt; void g(X&lt;T::N&gt;*){}
template &lt;class T&gt; void h(Z&lt;T::template TT&gt;*){}
struct A {};
struct B { int Y; };
struct C {
  typedef int N;
};
struct D {
  typedef int TT;
};

int main() {
  <span class='comment'>// Deduction fails in each of these cases:
</span>  f&lt;A&gt;(0);          <span class='comment'>// <span class='tcode_in_codeblock'>A</span> does not contain a member <span class='tcode_in_codeblock'>Y</span>
</span>  f&lt;B&gt;(0);          <span class='comment'>// The <span class='tcode_in_codeblock'>Y</span> member of <span class='tcode_in_codeblock'>B</span> is not a type
</span>  g&lt;C&gt;(0);          <span class='comment'>// The <span class='tcode_in_codeblock'>N</span> member of <span class='tcode_in_codeblock'>C</span> is not a non-type
</span>  h&lt;D&gt;(0);          <span class='comment'>// The <span class='tcode_in_codeblock'>TT</span> member of <span class='tcode_in_codeblock'>D</span> is not a template
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='deduct-11.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.5'>(11.5)</a></div><div id='deduct-11.5.sentence-1' class='sentence'>Attempting to create a pointer to reference type<a class='hidden_link' href='#deduct-11.5.sentence-1'>.</a></div></li><li id='deduct-11.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.6'>(11.6)</a></div><div id='deduct-11.6.sentence-1' class='sentence'>Attempting to create a reference to <span class='texttt'>void</span><a class='hidden_link' href='#deduct-11.6.sentence-1'>.</a></div></li><li id='deduct-11.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.7'>(11.7)</a></div><div id='deduct-11.7.sentence-1' class='sentence'>Attempting to create “pointer to member of <span class='texttt'>T</span>” when <span class='texttt'>T</span> is not a
class type<a class='hidden_link' href='#deduct-11.7.sentence-1'>.</a></div> <div id='deduct-11.7.example-4' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-11.7.example-4'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; int f(int T::*);
int i = f&lt;int&gt;(0);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='deduct-11.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.8'>(11.8)</a></div><div id='deduct-11.8.sentence-1' class='sentence'>Attempting to give an invalid type to a non-type template parameter<a class='hidden_link' href='#deduct-11.8.sentence-1'>.</a></div> <div id='deduct-11.8.example-5' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-11.8.example-5'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T, T&gt; struct S {};
template &lt;class T&gt; int f(S&lt;T, T()&gt;*);
struct X {};
int i0 = f&lt;X&gt;(0);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='deduct-11.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.9'>(11.9)</a></div><div id='deduct-11.9.sentence-1' class='sentence'>Attempting to perform an invalid conversion in either a template
argument expression, or an expression used in the function
declaration<a class='hidden_link' href='#deduct-11.9.sentence-1'>.</a></div> <div id='deduct-11.9.example-6' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-11.9.example-6'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T, T*&gt; int f(int);
int i2 = f&lt;int,1&gt;(0);           <span class='comment'>// can't conv <span class='tcode_in_codeblock'>1</span> to <span class='tcode_in_codeblock'>int*</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='deduct-11.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.10'>(11.10)</a></div><div id='deduct-11.10.sentence-1' class='sentence'>Attempting to create a function type in which a parameter has a type
of <span class='texttt'>void</span>, or in which the return type is a function type
or array type<a class='hidden_link' href='#deduct-11.10.sentence-1'>.</a></div></li><li id='deduct-11.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.11'>(11.11)</a></div><div id='deduct-11.11.sentence-1' class='sentence'>Attempting to create a function type in which a parameter type or the return type is an
<a href='class.abstract'>abstract class type</a><a class='hidden_link' href='#deduct-11.11.sentence-1'>.</a></div></li></ul></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct-12'><div class='marginalizedparent'><a class='marginalized' href='#deduct-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7257'>#</a></div><div id='deduct-12.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct-12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct-12.sentence-1' class='sentence'>In the following example,
assuming a <span class='texttt'>signed char</span>
cannot represent the value 1000,
a <a href='dcl.init.list#def:narrowing_conversion'>narrowing conversion</a>
would be required
to convert the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
of type <span class='texttt'>int</span> to <span class='texttt'>signed char</span>,
therefore substitution fails for the
second template (<a href='temp.arg.nontype'>[temp.arg.nontype]</a>)<a class='hidden_link' href='#deduct-12.sentence-1'>.</a></div><pre class='codeblock'>
template &lt;int&gt; int f(int);
template &lt;signed char&gt; int f(int);
int i1 = f&lt;1000&gt;(0);            <span class='comment'>// OK
</span>int i2 = f&lt;1&gt;(0);               <span class='comment'>// ambiguous; not narrowing
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='deduct.call' class='section'><h4 ><a class='secnum' href='#deduct.call' style='min-width:118pt'>17.9.2.1</a> Deducing template arguments from a function call <a class='abbr_ref' href='temp.deduct.call'>[temp.deduct.call]</a></h4><div class='para' id='deduct.call-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7279'>#</a></div><div id='deduct.call-1.sentence-1' class='sentence'>Template argument deduction is done by comparing each function
template parameter type (call it
<span class='texttt'>P</span>)
that contains <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> that participate in template argument deduction
with the type of the corresponding argument of the call (call it
<span class='texttt'>A</span>)
as described below<a class='hidden_link' href='#deduct.call-1.sentence-1'>.</a></div> <div id='deduct.call-1.sentence-2' class='sentence'>If removing references and cv-qualifiers from <span class='texttt'>P</span> gives
<span class='texttt'>std&#x200b;::&#x200b;initializer_&shy;list&lt;P<span class='math'>'</span>&gt;</span>
or <span class='texttt'>P<span class='math'>'</span>[N]</span>
for some <span class='texttt'>P<span class='math'>'</span></span> and <span class='texttt'>N</span> and the
argument is a non-empty initializer list (<a href='dcl.init.list'>[dcl.init.list]</a>), then deduction is
performed instead for each element of the initializer list, taking
<span class='texttt'>P<span class='math'>'</span></span> as a function template parameter type and the initializer
element as its argument,
and in the <span class='texttt'>P<span class='math'>'</span>[N]</span> case, if <span class='texttt'>N</span> is a non-type template parameter,
<span class='texttt'>N</span> is deduced from the length of the initializer list<a class='hidden_link' href='#deduct.call-1.sentence-2'>.</a></div> <div id='deduct.call-1.sentence-3' class='sentence'>Otherwise, an initializer list argument causes the
parameter to be considered a non-deduced context (<a href='temp.deduct.type'>[temp.deduct.type]</a>)<a class='hidden_link' href='#deduct.call-1.sentence-3'>.</a></div> <div id='deduct.call-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.call-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void f(std::initializer_list&lt;T&gt;);
f({1,2,3});                     <span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced to <span class='tcode_in_codeblock'>int</span>
</span>f({1,"asdf"});                  <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> deduced to both <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>const char*</span>
</span>
template&lt;class T&gt; void g(T);
g({1,2,3});                     <span class='comment'>// error: no argument deduced for <span class='tcode_in_codeblock'>T</span>
</span>
template&lt;class T, int N&gt; void h(T const(&amp;)[N]);
h({1,2,3});                     <span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced to <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>N</span> deduced to <span class='tcode_in_codeblock'>3</span>
</span>
template&lt;class T&gt; void j(T const(&amp;)[3]);
j({42});                        <span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced to <span class='tcode_in_codeblock'>int</span>, array bound not considered
</span>
struct Aggr { int i; int j; };
template&lt;int N&gt; void k(Aggr const(&amp;)[N]);
k({1,2,3});                     <span class='comment'>// error: deduction fails, no conversion from <span class='tcode_in_codeblock'>int</span> to <span class='tcode_in_codeblock'>Aggr</span>
</span>k({{1},{2},{3}});               <span class='comment'>// OK, <span class='tcode_in_codeblock'>N</span> deduced to <span class='tcode_in_codeblock'>3</span>
</span>
template&lt;int M, int N&gt; void m(int const(&amp;)[M][N]);
m({{1,2},{3,4}});               <span class='comment'>// <span class='tcode_in_codeblock'>M</span> and <span class='tcode_in_codeblock'>N</span> both deduced to <span class='tcode_in_codeblock'>2</span>
</span>
template&lt;class T, int N&gt; void n(T const(&amp;)[N], T);
n({{1},{2},{3}},Aggr());        <span class='comment'>// OK, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>Aggr</span>, <span class='tcode_in_codeblock'>N</span> is <span class='tcode_in_codeblock'>3</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct.call-1.sentence-4' class='sentence'>
For a function parameter pack that occurs at the end
of the <i ><a href='dcl.fct#nt:parameter-declaration-list'>parameter-declaration-list</a></i>,
deduction is performed for each remaining argument of the call,
taking the type <span class='texttt'>P</span>
of the <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> of the function parameter pack
as the corresponding function template parameter type<a class='hidden_link' href='#deduct.call-1.sentence-4'>.</a></div> <div id='deduct.call-1.sentence-5' class='sentence'>Each deduction deduces template arguments for subsequent positions in
the template parameter packs expanded by the function parameter pack<a class='hidden_link' href='#deduct.call-1.sentence-5'>.</a></div> <div id='deduct.call-1.sentence-6' class='sentence'>When a function parameter pack appears in a non-deduced
context (<a href='temp.deduct.type'>[temp.deduct.type]</a>), the type of that parameter pack is
never deduced<a class='hidden_link' href='#deduct.call-1.sentence-6'>.</a></div> <div id='deduct.call-1.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.call-1.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class ... Types&gt; void f(Types&amp; ...);
template&lt;class T1, class ... Types&gt; void g(T1, Types ...);
template&lt;class T1, class ... Types&gt; void g1(Types ..., T1);

void h(int x, float&amp; y) {
  const int z = x;
  f(x, y, z);                   <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> is deduced to <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>const int</span>
</span>  g(x, y, z);                   <span class='comment'>// <span class='tcode_in_codeblock'>T1</span> is deduced to <span class='tcode_in_codeblock'>int</span>; <span class='tcode_in_codeblock'>Types</span> is deduced to <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>int</span>
</span>  g1(x, y, z);                  <span class='comment'>// error: <span class='tcode_in_codeblock'>Types</span> is not deduced
</span>  g1&lt;int, int, int&gt;(x, y, z);   <span class='comment'>// OK, no deduction occurs
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.call-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7353'>#</a></div><div id='deduct.call-2.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is not a reference type:</div><div id='deduct.call-2.sentence-2' class='sentence'><ul class='itemize'><li id='deduct.call-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-2.1'>(2.1)</a></div><div id='deduct.call-2.1.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is an array type, the pointer type produced by the <a href='conv.array'>array-to-pointer
standard conversion</a> is used in place of
<span class='texttt'>A</span>
for type deduction;
otherwise,</div></li><li id='deduct.call-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-2.2'>(2.2)</a></div><div id='deduct.call-2.2.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a function type, the pointer type produced by the
<a href='conv.func'>function-to-pointer standard conversion</a> is used in place
of
<span class='texttt'>A</span>
for type
deduction; otherwise,</div></li><li id='deduct.call-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-2.3'>(2.3)</a></div><div id='deduct.call-2.3.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>A</span>'s
type are ignored for type deduction<a class='hidden_link' href='#deduct.call-2.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct.call-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7384'>#</a></div><div id='deduct.call-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':reference,forwarding'></a></span>If
<span class='texttt'>P</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>P</span>'s
type are ignored for type deduction<a class='hidden_link' href='#deduct.call-3.sentence-1'>.</a></div> <div id='deduct.call-3.sentence-2' class='sentence'>If
<span class='texttt'>P</span>
is a reference type, the type
referred to by
<span class='texttt'>P</span>
is used for type deduction<a class='hidden_link' href='#deduct.call-3.sentence-2'>.</a></div> <div id='deduct.call-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.call-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; int f(const T&amp;);
int n1 = f(5);                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(const int&amp;)</span>
</span>const int i = 0;
int n2 = f(i);                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(const int&amp;)</span>
</span>template &lt;class T&gt; int g(volatile T&amp;);
int n3 = g(i);                  <span class='comment'>// calls <span class='tcode_in_codeblock'>g&lt;const int&gt;(const volatile int&amp;)</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct.call-3.sentence-3' class='sentence'>A <a class='hidden_link' href='#def:forwarding_reference' id='def:forwarding_reference'><i >forwarding reference</i></a>
is an rvalue reference to a cv-unqualified template parameter
that does not represent a template parameter of a class template
(during class template argument deduction (<a href='over.match.class.deduct'>[over.match.class.deduct]</a>))<a class='hidden_link' href='#deduct.call-3.sentence-3'>.</a></div> <div id='deduct.call-3.sentence-4' class='sentence'>If <span class='texttt'>P</span> is a forwarding reference and the argument is an
lvalue, the type “lvalue reference to <span class='texttt'>A</span>” is used in place of <span class='texttt'>A</span> for type
deduction<a class='hidden_link' href='#deduct.call-3.sentence-4'>.</a></div> <div id='deduct.call-3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.call-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; int f(T&amp;&amp; heisenreference);
template &lt;class T&gt; int g(const T&amp;&amp;);
int i;
int n1 = f(i);                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&amp;&gt;(int&amp;)</span>
</span>int n2 = f(0);                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int&amp;&amp;)</span>
</span>int n3 = g(i);                  <span class='comment'>// error: would call <span class='tcode_in_codeblock'>g&lt;int&gt;(const int&amp;&amp;)</span>, which
</span>                                <span class='comment'>// would bind an rvalue reference to an lvalue
</span>
template &lt;class T&gt; struct A {
  template &lt;class U&gt;
    A(T&amp;&amp;, U&amp;&amp;, int*);          <span class='comment'>// #1: <span class='tcode_in_codeblock'>T&amp;&amp;</span> is not a forwarding reference.
</span>                                <span class='comment'>// <span class='tcode_in_codeblock'>U&amp;&amp;</span> is a forwarding reference.
</span>  A(T&amp;&amp;, int*);                 <span class='comment'>// #2
</span>};

template &lt;class T&gt; A(T&amp;&amp;, int*) -&gt; A&lt;T&gt;;    <span class='comment'>// #3: <span class='tcode_in_codeblock'>T&amp;&amp;</span> is a forwarding reference.
</span>
int *ip;
A a{i, 0, ip};                  <span class='comment'>// error: cannot deduce from #1
</span>A a0{0, 0, ip};                 <span class='comment'>// uses #1 to deduce <span class='tcode_in_codeblock'>A&lt;int&gt;</span> and #1 to initialize
</span>A a2{i, ip};                    <span class='comment'>// uses #3 to deduce <span class='tcode_in_codeblock'>A&lt;int&amp;&gt;</span> and #2 to initialize
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.call-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7438'>#</a></div><div id='deduct.call-4.sentence-1' class='sentence'>In general, the deduction process attempts to find template argument
values that will make the deduced
<span class='texttt'>A</span>
identical to
<span class='texttt'>A</span>
(after
the type
<span class='texttt'>A</span>
is transformed as described above)<a class='hidden_link' href='#deduct.call-4.sentence-1'>.</a></div> <div id='deduct.call-4.sentence-2' class='sentence'>However, there are
three cases that allow a difference:</div><div id='deduct.call-4.sentence-3' class='sentence'><ul class='itemize'><li id='deduct.call-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-4.1'>(4.1)</a></div><div id='deduct.call-4.1.sentence-1' class='sentence'>If the original
<span class='texttt'>P</span>
is a reference type, the deduced
<span class='texttt'>A</span>
(i.e.,
the type referred to by the reference) can be more cv-qualified than
the transformed <span class='texttt'>A</span><a class='hidden_link' href='#deduct.call-4.1.sentence-1'>.</a></div></li><li id='deduct.call-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-4.2'>(4.2)</a></div><div id='deduct.call-4.2.sentence-1' class='sentence'>The transformed <span class='texttt'>A</span>
can be another pointer or pointer-to-member type that can be converted
to the deduced
<span class='texttt'>A</span>
via a <a href='conv.fctptr'>function pointer conversion</a> and/or
<a href='conv.qual'>qualification conversion</a><a class='hidden_link' href='#deduct.call-4.2.sentence-1'>.</a></div></li><li id='deduct.call-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-4.3'>(4.3)</a></div><div id='deduct.call-4.3.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a class and
<span class='texttt'>P</span>
has the form
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>,
then
the transformed <span class='texttt'>A</span>
can be a derived class of the
deduced
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.call-4.3.sentence-1'>.</a></div> <div id='deduct.call-4.3.sentence-2' class='sentence'>Likewise, if
<span class='texttt'>P</span>
is a pointer to a class of the form
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>,
the transformed <span class='texttt'>A</span>
can be a pointer to a
derived class pointed to by the deduced
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.call-4.3.sentence-2'>.</a></div></li></ul></div></div><div class='para' id='deduct.call-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7490'>#</a></div><div id='deduct.call-5.sentence-1' class='sentence'>These alternatives are considered only if type deduction would
otherwise fail<a class='hidden_link' href='#deduct.call-5.sentence-1'>.</a></div> <div id='deduct.call-5.sentence-2' class='sentence'>If they yield more than one possible deduced
<span class='texttt'>A</span>,
the type deduction fails<a class='hidden_link' href='#deduct.call-5.sentence-2'>.</a></div> <div id='deduct.call-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.call-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.call-5.sentence-3' class='sentence'>If a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is not used in any of the function parameters of a function template,
or is used only in a non-deduced context, its corresponding
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
cannot be deduced from a function call and the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
must be explicitly specified<a class='hidden_link' href='#deduct.call-5.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.call-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7507'>#</a></div><div id='deduct.call-6.sentence-1' class='sentence'>When
<span class='texttt'>P</span>
is a function type, function pointer type, or pointer-to-member-function type:
<ul class='itemize'><li id='deduct.call-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-6.1'>(6.1)</a></div><div id='deduct.call-6.1.sentence-1' class='sentence'>If the argument is an overload set containing one or more function templates,
the parameter is treated as a non-deduced context<a class='hidden_link' href='#deduct.call-6.1.sentence-1'>.</a></div></li><li id='deduct.call-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-6.2'>(6.2)</a></div><div id='deduct.call-6.2.sentence-1' class='sentence'>If the argument is an overload set (not containing function templates), trial
argument deduction is attempted using each of the members of the set<a class='hidden_link' href='#deduct.call-6.2.sentence-1'>.</a></div> <div id='deduct.call-6.2.sentence-2' class='sentence'>If
deduction succeeds for only one of the overload set members, that member is
used as the argument value for the deduction<a class='hidden_link' href='#deduct.call-6.2.sentence-2'>.</a></div> <div id='deduct.call-6.2.sentence-3' class='sentence'>If deduction succeeds for more than
one member of the overload set the parameter is treated as a non-deduced context<a class='hidden_link' href='#deduct.call-6.2.sentence-3'>.</a></div></li></ul></div></div><div class='para' id='deduct.call-7'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7523'>#</a></div><div id='deduct.call-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.call-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// Only one function of an overload set matches the call so the function parameter is a deduced context.
</span>template &lt;class T&gt; int f(T (*p)(T));
int g(int);
int g(char);
int i = f(g);       <span class='comment'>// calls <span class='tcode_in_codeblock'>f(int (*)(int))</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.call-8'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7534'>#</a></div><div id='deduct.call-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.call-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// Ambiguous deduction causes the second function parameter to be a non-deduced context.
</span>template &lt;class T&gt; int f(T, T (*p)(T));
int g(int);
char g(char);
int i = f(1, g);    <span class='comment'>// calls <span class='tcode_in_codeblock'>f(int, int (*)(int))</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.call-9'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7545'>#</a></div><div id='deduct.call-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.call-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// The overload set contains a template, causing the second function parameter to be a non-deduced context.
</span>template &lt;class T&gt; int f(T, T (*p)(T));
char g(char);
template &lt;class T&gt; T g(T);
int i = f(1, g);    <span class='comment'>// calls <span class='tcode_in_codeblock'>f(int, int (*)(int))</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.call-10'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7556'>#</a></div><div id='deduct.call-10.sentence-1' class='sentence'>If deduction succeeds for all parameters that contain
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> that participate in template argument
deduction, and all template arguments are explicitly specified, deduced,
or obtained from default template arguments, remaining parameters are then
compared with the corresponding arguments<a class='hidden_link' href='#deduct.call-10.sentence-1'>.</a></div> <div id='deduct.call-10.sentence-2' class='sentence'>For each remaining parameter
<span class='texttt'>P</span> with a type that was non-dependent before substitution of any
explicitly-specified template arguments, if the corresponding argument
<span class='texttt'>A</span> cannot be implicitly converted to <span class='texttt'>P</span>, deduction fails<a class='hidden_link' href='#deduct.call-10.sentence-2'>.</a></div> <div id='deduct.call-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.call-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.call-10.sentence-3' class='sentence'>Parameters with dependent types in which no <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>
participate in template argument deduction, and parameters that became
non-dependent due to substitution of explicitly-specified template arguments,
will be checked during overload resolution<a class='hidden_link' href='#deduct.call-10.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct.call-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.call-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
  template &lt;class T&gt; struct Z {
    typedef typename T::x xx;
  };
  template &lt;class T&gt; typename Z&lt;T&gt;::xx f(void *, T);    <span class='comment'>// #1
</span>  template &lt;class T&gt; void f(int, T);                    <span class='comment'>// #2
</span>  struct A {} a;
  int main() {
    f(1, a);        <span class='comment'>// OK, deduction fails for #1 because there is no conversion from <span class='tcode_in_codeblock'>int</span> to <span class='tcode_in_codeblock'>void*</span>
</span>  }</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='deduct.funcaddr' class='section'><h4 ><a class='secnum' href='#deduct.funcaddr' style='min-width:118pt'>17.9.2.2</a> Deducing template arguments taking the address of a function template <a class='abbr_ref' href='temp.deduct.funcaddr'>[temp.deduct.funcaddr]</a></h4><div class='para' id='deduct.funcaddr-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.funcaddr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7587'>#</a></div><div id='deduct.funcaddr-1.sentence-1' class='sentence'>Template arguments can be deduced from the type specified when taking
the address of an <a href='over.over'>overloaded function</a><a class='hidden_link' href='#deduct.funcaddr-1.sentence-1'>.</a></div> <div id='deduct.funcaddr-1.sentence-2' class='sentence'>The function template's function type and the specified type
are used as the types of
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>,
and the deduction is done as
described in <a href='temp.deduct.type'>[temp.deduct.type]</a><a class='hidden_link' href='#deduct.funcaddr-1.sentence-2'>.</a></div></div><div class='para' id='deduct.funcaddr-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.funcaddr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7598'>#</a></div><div id='deduct.funcaddr-2.sentence-1' class='sentence'>A <a href='dcl.spec.auto#def:placeholder_type'>placeholder type</a> in the return type of a
function template is a non-deduced context<a class='hidden_link' href='#deduct.funcaddr-2.sentence-1'>.</a></div> <div id='deduct.funcaddr-2.sentence-2' class='sentence'>If template argument
deduction succeeds for such a function, the return type is determined
from instantiation of the function body<a class='hidden_link' href='#deduct.funcaddr-2.sentence-2'>.</a></div></div></div><div id='deduct.conv' class='section'><h4 ><a class='secnum' href='#deduct.conv' style='min-width:118pt'>17.9.2.3</a> Deducing conversion function template arguments <a class='abbr_ref' href='temp.deduct.conv'>[temp.deduct.conv]</a></h4><div class='para' id='deduct.conv-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7606'>#</a></div><div id='deduct.conv-1.sentence-1' class='sentence'>Template argument deduction is done by comparing the return type of
the
conversion function template
(call it
<span class='texttt'>P</span>)
with the type that is
required as the result of the conversion (call it
<span class='texttt'>A</span>; see <a href='dcl.init'>[dcl.init]</a>, <a href='over.match.conv'>[over.match.conv]</a>, and <a href='over.match.ref'>[over.match.ref]</a>
for the determination of that type)
as described in <a href='temp.deduct.type'>[temp.deduct.type]</a><a class='hidden_link' href='#deduct.conv-1.sentence-1'>.</a></div></div><div class='para' id='deduct.conv-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7618'>#</a></div><div id='deduct.conv-2.sentence-1' class='sentence'>If <span class='texttt'>P</span> is a reference type, the type referred to by <span class='texttt'>P</span> is used in place
of <span class='texttt'>P</span> for type deduction and for any further references to or transformations of
<span class='texttt'>P</span> in the remainder of this subclause<a class='hidden_link' href='#deduct.conv-2.sentence-1'>.</a></div></div><div class='para' id='deduct.conv-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7623'>#</a></div><div id='deduct.conv-3.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is not a reference type:</div><div id='deduct.conv-3.sentence-2' class='sentence'><ul class='itemize'><li id='deduct.conv-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-3.1'>(3.1)</a></div><div id='deduct.conv-3.1.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is an array type, the pointer type produced by the
<a href='conv.array'>array-to-pointer standard conversion</a> is used in place of
<span class='texttt'>P</span>
for type
deduction; otherwise,</div></li><li id='deduct.conv-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-3.2'>(3.2)</a></div><div id='deduct.conv-3.2.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a function type, the pointer type produced by the
<a href='conv.func'>function-to-pointer standard conversion</a> is used in place of
<span class='texttt'>P</span>
for
type deduction; otherwise,</div></li><li id='deduct.conv-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-3.3'>(3.3)</a></div><div id='deduct.conv-3.3.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>P</span>'s
type are ignored for type deduction<a class='hidden_link' href='#deduct.conv-3.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct.conv-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7653'>#</a></div><div id='deduct.conv-4.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>A</span>'s
type are ignored for type deduction<a class='hidden_link' href='#deduct.conv-4.sentence-1'>.</a></div> <div id='deduct.conv-4.sentence-2' class='sentence'>If
<span class='texttt'>A</span>
is a
reference type, the type referred to by
<span class='texttt'>A</span>
is used for type deduction<a class='hidden_link' href='#deduct.conv-4.sentence-2'>.</a></div></div><div class='para' id='deduct.conv-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7666'>#</a></div><div id='deduct.conv-5.sentence-1' class='sentence'>In general, the deduction process attempts to find template argument
values that will make the deduced
<span class='texttt'>A</span>
identical to
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.conv-5.sentence-1'>.</a></div> <div id='deduct.conv-5.sentence-2' class='sentence'>However, there are four cases that allow a difference:</div><div id='deduct.conv-5.sentence-3' class='sentence'><ul class='itemize'><li id='deduct.conv-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-5.1'>(5.1)</a></div><div id='deduct.conv-5.1.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is a reference type,
<span class='texttt'>A</span> can be more cv-qualified than the deduced <span class='texttt'>A</span>
(i.e., the type referred to by the reference)</div></li><li id='deduct.conv-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-5.2'>(5.2)</a></div><div id='deduct.conv-5.2.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is a function pointer type,
<span class='texttt'>A</span> can be “pointer to function”
even if the deduced <span class='texttt'>A</span> is “pointer to noexcept function”<a class='hidden_link' href='#deduct.conv-5.2.sentence-1'>.</a></div></li><li id='deduct.conv-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-5.3'>(5.3)</a></div><div id='deduct.conv-5.3.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is a pointer-to-member-function type,
<span class='texttt'>A</span> can be “pointer to member of type function”
even if the deduced <span class='texttt'>A</span> is “pointer to member of type noexcept function”<a class='hidden_link' href='#deduct.conv-5.3.sentence-1'>.</a></div></li><li id='deduct.conv-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-5.4'>(5.4)</a></div><div id='deduct.conv-5.4.sentence-1' class='sentence'>The deduced <span class='texttt'>A</span>
can be another pointer or pointer-to-member type that
can be converted to <span class='texttt'>A</span> via a qualification conversion<a class='hidden_link' href='#deduct.conv-5.4.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct.conv-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7693'>#</a></div><div id='deduct.conv-6.sentence-1' class='sentence'>These alternatives are considered only if type deduction would
otherwise fail<a class='hidden_link' href='#deduct.conv-6.sentence-1'>.</a></div> <div id='deduct.conv-6.sentence-2' class='sentence'>If they yield more than one possible deduced
<span class='texttt'>A</span>,
the type deduction fails<a class='hidden_link' href='#deduct.conv-6.sentence-2'>.</a></div></div><div class='para' id='deduct.conv-7'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7700'>#</a></div><div id='deduct.conv-7.sentence-1' class='sentence'>When the deduction process requires a qualification conversion for a
pointer or pointer-to-member type as described above, the following
process is used to determine the deduced template argument values:</div><div style='height:0.6em;display:block'></div><div id='deduct.conv-7.sentence-2' class='sentence'>If
<span class='texttt'>A</span>
is a type
<span class='indented'>
<span class='textit'>cv</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_{1,0}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span></span></span> “pointer to <span class='math'>&hellip;</span>” <span class='textit'>cv</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_{1,n-1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span> “pointer to”
<span class='textit'>cv</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_{1,n}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span></span> <span class='texttt'>T1</span>
</span>
and
<span class='texttt'>P</span>
is a type
<span class='indented'>
<span class='textit'>cv</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_{2,0}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span></span></span> “pointer to <span class='math'>&hellip;</span>” <span class='textit'>cv</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_{2,n-1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span> “pointer to”
<span class='textit'>cv</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_{2,n}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span></span> <span class='texttt'>T2</span>,
</span>
then the cv-unqualified
<span class='texttt'>T1</span>
and
<span class='texttt'>T2</span>
are used as the types of
<span class='texttt'>A</span>
and
<span class='texttt'>P</span>
respectively for type deduction<a class='hidden_link' href='#deduct.conv-7.sentence-2'>.</a></div> <div id='deduct.conv-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.conv-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  template &lt;class T&gt; operator T***();
};
A a;
const int * const * const * p1 = a;     <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is deduced as <span class='tcode_in_codeblock'>int</span>, not <span class='tcode_in_codeblock'>const int</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='deduct.partial' class='section'><h4 ><a class='secnum' href='#deduct.partial' style='min-width:118pt'>17.9.2.4</a> Deducing template arguments during partial ordering <a class='abbr_ref' href='temp.deduct.partial'>[temp.deduct.partial]</a></h4><div class='para' id='deduct.partial-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7740'>#</a></div><div id='deduct.partial-1.sentence-1' class='sentence'>Template argument deduction is done by comparing certain types associated with
the two function templates being compared<a class='hidden_link' href='#deduct.partial-1.sentence-1'>.</a></div></div><div class='para' id='deduct.partial-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7744'>#</a></div><div id='deduct.partial-2.sentence-1' class='sentence'>Two sets of types are used to determine the partial ordering<a class='hidden_link' href='#deduct.partial-2.sentence-1'>.</a></div> <div id='deduct.partial-2.sentence-2' class='sentence'>For each of
the templates involved there is the original function type and the
transformed function type<a class='hidden_link' href='#deduct.partial-2.sentence-2'>.</a></div> <div id='deduct.partial-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.partial-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.partial-2.sentence-5' class='sentence'>The creation of the transformed type is described in <a href='temp.func.order'>[temp.func.order]</a><a class='hidden_link' href='#deduct.partial-2.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct.partial-2.sentence-3' class='sentence'>
The deduction process uses the
transformed type as the argument template and the original type of the
other template as the parameter template<a class='hidden_link' href='#deduct.partial-2.sentence-3'>.</a></div> <div id='deduct.partial-2.sentence-4' class='sentence'>This process is done twice
for each type involved in the partial ordering comparison: once using
the transformed template-1 as the argument template and template-2 as
the parameter template and again using the transformed template-2 as
the argument template and template-1 as the parameter template<a class='hidden_link' href='#deduct.partial-2.sentence-4'>.</a></div></div><div class='para' id='deduct.partial-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7759'>#</a></div><div id='deduct.partial-3.sentence-1' class='sentence'>The types used to determine the ordering depend on the context in which
the partial ordering is done:</div><div id='deduct.partial-3.sentence-2' class='sentence'><ul class='itemize'><li id='deduct.partial-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-3.1'>(3.1)</a></div><div id='deduct.partial-3.1.sentence-1' class='sentence'>In the context of a function call, the types used are those function parameter types
for which the function call has arguments<a class='hidden_link' href='#deduct.partial-3.1.sentence-1'>.</a><a class='footnotenum' href='#footnote-144'>144</a></div></li><li id='deduct.partial-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-3.2'>(3.2)</a></div><div id='deduct.partial-3.2.sentence-1' class='sentence'>In the context of a call to a conversion function, the return types of
the conversion function templates are used<a class='hidden_link' href='#deduct.partial-3.2.sentence-1'>.</a></div></li><li id='deduct.partial-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-3.3'>(3.3)</a></div><div id='deduct.partial-3.3.sentence-1' class='sentence'>In <a href='temp.func.order'>other contexts</a> the function template's function
type is used<a class='hidden_link' href='#deduct.partial-3.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct.partial-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7777'>#</a></div><div id='deduct.partial-4.sentence-1' class='sentence'>Each type nominated above from the parameter template and the corresponding type from the
argument template are used as the types of
<span class='texttt'>P</span>
and
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.partial-4.sentence-1'>.</a></div> <div id='deduct.partial-4.sentence-2' class='sentence'>If a particular <span class='texttt'>P</span> contains no <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span>
that participate in template argument deduction, that <span class='texttt'>P</span> is not
used to determine the ordering<a class='hidden_link' href='#deduct.partial-4.sentence-2'>.</a></div></div><div class='para' id='deduct.partial-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7787'>#</a></div><div id='deduct.partial-5.sentence-1' class='sentence'>Before the partial ordering is done, certain transformations are performed
on the types used for partial ordering:</div><div id='deduct.partial-5.sentence-2' class='sentence'><ul class='itemize'><li id='deduct.partial-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-5.1'>(5.1)</a></div><div id='deduct.partial-5.1.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a reference type,
<span class='texttt'>P</span>
is replaced by the type referred to<a class='hidden_link' href='#deduct.partial-5.1.sentence-1'>.</a></div></li><li id='deduct.partial-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-5.2'>(5.2)</a></div><div id='deduct.partial-5.2.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a reference type,
<span class='texttt'>A</span>
is replaced by the type referred to<a class='hidden_link' href='#deduct.partial-5.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct.partial-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7806'>#</a></div><div id='deduct.partial-6.sentence-1' class='sentence'>If both
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>
were reference types (before being replaced with the type referred to
above), determine which of the two types (if any) is more cv-qualified
than the other; otherwise the types are considered to be equally
cv-qualified for partial ordering purposes<a class='hidden_link' href='#deduct.partial-6.sentence-1'>.</a></div> <div id='deduct.partial-6.sentence-2' class='sentence'>The result of this
determination will be used below<a class='hidden_link' href='#deduct.partial-6.sentence-2'>.</a></div></div><div class='para' id='deduct.partial-7'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7817'>#</a></div><div id='deduct.partial-7.sentence-1' class='sentence'>Remove any top-level cv-qualifiers:
<ul class='itemize'><li id='deduct.partial-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-7.1'>(7.1)</a></div><div id='deduct.partial-7.1.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a cv-qualified type,
<span class='texttt'>P</span>
is replaced by the cv-unqualified version of
<span class='texttt'>P</span><a class='hidden_link' href='#deduct.partial-7.1.sentence-1'>.</a></div></li><li id='deduct.partial-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-7.2'>(7.2)</a></div><div id='deduct.partial-7.2.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a cv-qualified type,
<span class='texttt'>A</span>
is replaced by the cv-unqualified version of
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.partial-7.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct.partial-8'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7836'>#</a></div><div id='deduct.partial-8.sentence-1' class='sentence'>Using the resulting types
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>,
the deduction is then done as described in <a href='temp.deduct.type'>[temp.deduct.type]</a><a class='hidden_link' href='#deduct.partial-8.sentence-1'>.</a></div> <div id='deduct.partial-8.sentence-2' class='sentence'>If <span class='texttt'>P</span> is a function parameter pack, the type <span class='texttt'>A</span> of each remaining
parameter type of the argument template is compared with the type <span class='texttt'>P</span> of
the <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> of the function parameter pack<a class='hidden_link' href='#deduct.partial-8.sentence-2'>.</a></div> <div id='deduct.partial-8.sentence-3' class='sentence'>Each comparison
deduces template arguments for subsequent positions in the template parameter
packs expanded by the function parameter pack<a class='hidden_link' href='#deduct.partial-8.sentence-3'>.</a></div> <div id='deduct.partial-8.sentence-4' class='sentence'>Similarly, if <span class='texttt'>A</span> was transformed from a function parameter pack,
it is compared with each remaining parameter type of the parameter template<a class='hidden_link' href='#deduct.partial-8.sentence-4'>.</a></div> <div id='deduct.partial-8.sentence-5' class='sentence'>If deduction succeeds for a given type,
the type from the argument template is considered to be at least as specialized
as the type from the parameter template<a class='hidden_link' href='#deduct.partial-8.sentence-5'>.</a></div> <div id='deduct.partial-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.partial-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class... Args&gt;           void f(Args... args);         <span class='comment'>// #1
</span>template&lt;class T1, class... Args&gt; void f(T1 a1, Args... args);  <span class='comment'>// #2
</span>template&lt;class T1, class T2&gt;      void f(T1 a1, T2 a2);         <span class='comment'>// #3
</span>
f();                <span class='comment'>// calls #1
</span>f(1, 2, 3);         <span class='comment'>// calls #2
</span>f(1, 2);            <span class='comment'>// calls #3; non-variadic template #3 is more specialized
</span>                    <span class='comment'>// than the variadic templates #1 and #2
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.partial-9'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7865'>#</a></div><div id='deduct.partial-9.sentence-1' class='sentence'>If, for a given type, deduction succeeds in both directions (i.e., the
types are identical after the transformations above)
and both <span class='texttt'>P</span> and <span class='texttt'>A</span> were reference types (before being replaced with the
type referred to above):</div><div id='deduct.partial-9.sentence-2' class='sentence'><ul class='itemize'><li id='deduct.partial-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-9.1'>(9.1)</a></div><div id='deduct.partial-9.1.sentence-1' class='sentence'>if the type from the argument template was an lvalue reference and the type
from the parameter template was not,
the parameter type is not considered to be
at least as specialized as the argument type; otherwise,</div></li><li id='deduct.partial-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-9.2'>(9.2)</a></div><div id='deduct.partial-9.2.sentence-1' class='sentence'>if the type from
the argument template is more cv-qualified than the type from the
parameter template (as described above),
the parameter type is not considered to be
at least as specialized as the argument type<a class='hidden_link' href='#deduct.partial-9.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct.partial-10'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7884'>#</a></div><div id='deduct.partial-10.sentence-1' class='sentence'>Function template <span class='texttt'>F</span>
is <span class='textit'>at least as specialized as</span>
function template <span class='texttt'>G</span> if,
for each pair of types used to determine the ordering,
the type from <span class='texttt'>F</span>
is at least as specialized as
the type from <span class='texttt'>G</span><a class='hidden_link' href='#deduct.partial-10.sentence-1'>.</a></div> <div id='deduct.partial-10.sentence-2' class='sentence'><span class='texttt'>F</span>
is <a class='hidden_link' href='#def:more_specialized,function_template' id='def:more_specialized,function_template'><i >more specialized than</i></a>
<span class='texttt'>G</span> if
<span class='texttt'>F</span>
is at least as specialized as
<span class='texttt'>G</span> and
<span class='texttt'>G</span>
is not at least as specialized as
<span class='texttt'>F</span><a class='hidden_link' href='#deduct.partial-10.sentence-2'>.</a></div></div><div class='para' id='deduct.partial-11'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7903'>#</a></div><div id='deduct.partial-11.sentence-1' class='sentence'>If, after considering the above, function template <span class='texttt'>F</span>
is at least as specialized as function template <span class='texttt'>G</span> and vice-versa, and
if <span class='texttt'>G</span> has a trailing parameter pack
for which <span class='texttt'>F</span> does not have a corresponding parameter, and
if <span class='texttt'>F</span> does not have a trailing parameter pack,
then <span class='texttt'>F</span> is more specialized than <span class='texttt'>G</span><a class='hidden_link' href='#deduct.partial-11.sentence-1'>.</a></div></div><div class='para' id='deduct.partial-12'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7911'>#</a></div><div id='deduct.partial-12.sentence-1' class='sentence'>In most cases,
deduction fails if not all template parameters have values,
but for partial ordering purposes a template
parameter may remain without a value provided it is not used in the
types being used for partial ordering<a class='hidden_link' href='#deduct.partial-12.sentence-1'>.</a></div> <div id='deduct.partial-12.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.partial-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.partial-12.sentence-2' class='sentence'>A template parameter used in a non-deduced context is considered used<a class='hidden_link' href='#deduct.partial-12.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct.partial-12.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.partial-12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; T f(int);            <span class='comment'>// #1
</span>template &lt;class T, class U&gt; T f(U);     <span class='comment'>// #2
</span>void g() {
  f&lt;int&gt;(1);                            <span class='comment'>// calls #1
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.partial-13'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7930'>#</a></div><div id='deduct.partial-13.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.partial-13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.partial-13.sentence-1' class='sentence'>Partial ordering of function templates containing
template parameter packs is independent of the number of deduced arguments
for those template parameter packs<a class='hidden_link' href='#deduct.partial-13.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct.partial-13.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.partial-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class ...&gt; struct Tuple { };
template&lt;class ... Types&gt; void g(Tuple&lt;Types ...&gt;);                 <span class='comment'>// #1
</span>template&lt;class T1, class ... Types&gt; void g(Tuple&lt;T1, Types ...&gt;);   <span class='comment'>// #2
</span>template&lt;class T1, class ... Types&gt; void g(Tuple&lt;T1, Types&amp; ...&gt;);  <span class='comment'>// #3
</span>
g(Tuple&lt;&gt;());                   <span class='comment'>// calls #1
</span>g(Tuple&lt;int, float&gt;());         <span class='comment'>// calls #2
</span>g(Tuple&lt;int, float&amp;&gt;());        <span class='comment'>// calls #3
</span>g(Tuple&lt;int&gt;());                <span class='comment'>// calls #3
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-144'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-144'>144)</a></div><div id='footnote-144.sentence-1' class='sentence'>Default arguments
are not considered to be arguments in this context; they only become arguments
after a function has been selected<a class='hidden_link' href='#footnote-144.sentence-1'>.</a></div></div></div><div id='deduct.type' class='section'><h4 ><a class='secnum' href='#deduct.type' style='min-width:118pt'>17.9.2.5</a> Deducing template arguments from a type <a class='abbr_ref' href='temp.deduct.type'>[temp.deduct.type]</a></h4><div class='para' id='deduct.type-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7952'>#</a></div><div id='deduct.type-1.sentence-1' class='sentence'>Template arguments can be deduced in several different contexts, but
in each case a type that is specified in terms of template parameters
(call it
<span class='texttt'>P</span>)
is compared with an actual type (call it
<span class='texttt'>A</span>),
and an attempt is made to find template argument values (a type for a type
parameter, a value for a non-type parameter, or a template for a
template parameter) that will make
<span class='texttt'>P</span>,
after substitution of the deduced values (call it the deduced
<span class='texttt'>A</span>),
compatible with
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-1.sentence-1'>.</a></div></div><div class='para' id='deduct.type-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7968'>#</a></div><div id='deduct.type-2.sentence-1' class='sentence'>In some cases, the deduction is done using a single set of types
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>,
in other cases, there will be a set of corresponding types
<span class='texttt'>P</span>
and
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-2.sentence-1'>.</a></div> <div id='deduct.type-2.sentence-2' class='sentence'>Type deduction is done
independently for each
<span class='texttt'>P/A</span>
pair, and the deduced template
argument values are then combined<a class='hidden_link' href='#deduct.type-2.sentence-2'>.</a></div> <div id='deduct.type-2.sentence-3' class='sentence'>If type deduction cannot be done
for any
<span class='texttt'>P/A</span>
pair, or if for any pair the deduction leads to more than
one possible set of deduced values, or if different pairs yield
different deduced values, or if any template argument remains neither
deduced nor explicitly specified, template argument deduction fails<a class='hidden_link' href='#deduct.type-2.sentence-3'>.</a></div> <div id='deduct.type-2.sentence-4' class='sentence'>The type of a type parameter
is only deduced from an array bound
if it is not otherwise deduced<a class='hidden_link' href='#deduct.type-2.sentence-4'>.</a></div></div><div class='para' id='deduct.type-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L7993'>#</a></div><div id='deduct.type-3.sentence-1' class='sentence'>A given type
<span class='texttt'>P</span>
can be composed from a number of other
types, templates, and non-type values:</div><div id='deduct.type-3.sentence-2' class='sentence'><ul class='itemize'><li id='deduct.type-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-3.1'>(3.1)</a></div><div id='deduct.type-3.1.sentence-1' class='sentence'>A function type includes the types of each of the function parameters
and the return type<a class='hidden_link' href='#deduct.type-3.1.sentence-1'>.</a></div></li><li id='deduct.type-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-3.2'>(3.2)</a></div><div id='deduct.type-3.2.sentence-1' class='sentence'>A pointer-to-member type includes the type of the class object pointed to
and the type of the member pointed to<a class='hidden_link' href='#deduct.type-3.2.sentence-1'>.</a></div></li><li id='deduct.type-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-3.3'>(3.3)</a></div><div id='deduct.type-3.3.sentence-1' class='sentence'>A type that is a specialization of a class template (e.g.,
<span class='texttt'>A&lt;int&gt;</span>)
includes the types, templates, and non-type values referenced by the
template argument list of the specialization<a class='hidden_link' href='#deduct.type-3.3.sentence-1'>.</a></div></li><li id='deduct.type-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-3.4'>(3.4)</a></div><div id='deduct.type-3.4.sentence-1' class='sentence'>An array type includes the array element type and the value of the
array bound<a class='hidden_link' href='#deduct.type-3.4.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct.type-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8016'>#</a></div><div id='deduct.type-4.sentence-1' class='sentence'>In most cases, the types, templates, and non-type values that are used
to compose
<span class='texttt'>P</span>
participate in template argument deduction<a class='hidden_link' href='#deduct.type-4.sentence-1'>.</a></div> <div id='deduct.type-4.sentence-2' class='sentence'>That is,
they may be used to determine the value of a template argument, and
template argument deduction fails if
the value so determined is not consistent with the values determined
elsewhere<a class='hidden_link' href='#deduct.type-4.sentence-2'>.</a></div> <div id='deduct.type-4.sentence-3' class='sentence'>In certain contexts, however, the value does not
participate in type deduction, but instead uses the values of template
arguments that were either deduced elsewhere or explicitly specified<a class='hidden_link' href='#deduct.type-4.sentence-3'>.</a></div> <div id='deduct.type-4.sentence-4' class='sentence'>If a template parameter is used only in non-deduced contexts and is not
explicitly specified, template argument deduction fails<a class='hidden_link' href='#deduct.type-4.sentence-4'>.</a></div> <div id='deduct.type-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.type-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-4.sentence-5' class='sentence'>Under <a href='temp.deduct.call'>[temp.deduct.call]</a> and <a href='temp.deduct.partial'>[temp.deduct.partial]</a>,
if <span class='texttt'>P</span> contains no <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> that appear
in deduced contexts, no deduction is done, so <span class='texttt'>P</span> and <span class='texttt'>A</span>
need not have the same form<a class='hidden_link' href='#deduct.type-4.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8038'>#</a></div><div id='deduct.type-5.sentence-1' class='sentence'>The non-deduced contexts are:</div><div id='deduct.type-5.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':context,non-deduced'></a></span><ul class='itemize'><li id='deduct.type-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.1'>(5.1)</a></div><div id='deduct.type-5.1.sentence-1' class='sentence'>The
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
of a type that was specified using a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i><a class='hidden_link' href='#deduct.type-5.1.sentence-1'>.</a></div></li><li id='deduct.type-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.2'>(5.2)</a></div><div id='deduct.type-5.2.sentence-1' class='sentence'>The <i ><a href='expr.comma#nt:expression'>expression</a></i> of a <i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i><a class='hidden_link' href='#deduct.type-5.2.sentence-1'>.</a></div></li><li id='deduct.type-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.3'>(5.3)</a></div><div id='deduct.type-5.3.sentence-1' class='sentence'>A non-type template argument or an array bound in which a subexpression
references a template parameter<a class='hidden_link' href='#deduct.type-5.3.sentence-1'>.</a></div></li><li id='deduct.type-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.4'>(5.4)</a></div><div id='deduct.type-5.4.sentence-1' class='sentence'>A template parameter used in the parameter type of a function parameter that
has a default argument that is being used in the call for which argument
deduction is being done<a class='hidden_link' href='#deduct.type-5.4.sentence-1'>.</a></div></li><li id='deduct.type-5.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.5'>(5.5)</a></div><div id='deduct.type-5.5.sentence-1' class='sentence'>A function parameter for which argument deduction cannot be done because the
associated function argument is a function, or a set of overloaded
functions (<a href='over.over'>[over.over]</a>), and one or more of the following apply:
<ul class='itemize'><li id='deduct.type-5.5.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct.type-5.5.1'>(5.5.1)</a></div><div id='deduct.type-5.5.1.sentence-1' class='sentence'>more than one function matches the function parameter type (resulting in
an ambiguous deduction), or</div></li><li id='deduct.type-5.5.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct.type-5.5.2'>(5.5.2)</a></div><div id='deduct.type-5.5.2.sentence-1' class='sentence'>no function matches the function parameter type, or</div></li><li id='deduct.type-5.5.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct.type-5.5.3'>(5.5.3)</a></div><div id='deduct.type-5.5.3.sentence-1' class='sentence'>the set of functions supplied as an argument contains one or more function templates<a class='hidden_link' href='#deduct.type-5.5.3.sentence-1'>.</a></div></li></ul></div></li><li id='deduct.type-5.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.6'>(5.6)</a></div><div id='deduct.type-5.6.sentence-1' class='sentence'>A function parameter for which the associated argument is an initializer
list (<a href='dcl.init.list'>[dcl.init.list]</a>) but the parameter does not have
a type for which deduction from an initializer list is specified (<a href='temp.deduct.call'>[temp.deduct.call]</a>)<a class='hidden_link' href='#deduct.type-5.6.sentence-1'>.</a></div> <div id='deduct.type-5.6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-5.6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void g(T);
g({1,2,3});                 <span class='comment'>// error: no argument deduced for <span class='tcode_in_codeblock'>T</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='deduct.type-5.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.7'>(5.7)</a></div><div id='deduct.type-5.7.sentence-1' class='sentence'>A function parameter pack that does not occur at the end of the
<i ><a href='dcl.fct#nt:parameter-declaration-list'>parameter-declaration-list</a></i><a class='hidden_link' href='#deduct.type-5.7.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='deduct.type-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8083'>#</a></div><div id='deduct.type-6.sentence-1' class='sentence'>When a type name is specified in a way that includes a non-deduced
context, all of the types that comprise that type name are also
non-deduced<a class='hidden_link' href='#deduct.type-6.sentence-1'>.</a></div> <div id='deduct.type-6.sentence-2' class='sentence'>However, a compound type can include both deduced and non-deduced types<a class='hidden_link' href='#deduct.type-6.sentence-2'>.</a></div> <div id='deduct.type-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct.type-6.sentence-3' class='sentence'>If a type is specified as
<span class='texttt'>A&lt;T&gt;&#x200b;::&#x200b;B&lt;T2&gt;</span>,
both
<span class='texttt'>T</span>
and
<span class='texttt'>T2</span>
are non-deduced<a class='hidden_link' href='#deduct.type-6.sentence-3'>.</a></div> <div id='deduct.type-6.sentence-4' class='sentence'>Likewise, if a type is specified as
<span class='texttt'>A&lt;I+J&gt;&#x200b;::&#x200b;X&lt;T&gt;</span>,
<span class='texttt'>I</span>,
<span class='texttt'>J</span>,
and
<span class='texttt'>T</span>
are non-deduced<a class='hidden_link' href='#deduct.type-6.sentence-4'>.</a></div> <div id='deduct.type-6.sentence-5' class='sentence'>If a type is specified as
<span class='texttt'>void</span>
<span class='texttt'>f(typename</span>
<span class='texttt'>A&lt;T&gt;&#x200b;::&#x200b;B,</span>
<span class='texttt'>A&lt;T&gt;)</span>,
the
<span class='texttt'>T</span>
in
<span class='texttt'>A&lt;T&gt;&#x200b;::&#x200b;B</span>
is non-deduced but
the
<span class='texttt'>T</span>
in
<span class='texttt'>A&lt;T&gt;</span>
is deduced<a class='hidden_link' href='#deduct.type-6.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-7'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8120'>#</a></div><div id='deduct.type-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct.type-7.sentence-1' class='sentence'>Here is an example in which different parameter/argument pairs produce
inconsistent template argument deductions:</div><pre class='codeblock'>
template&lt;class T&gt; void f(T x, T y) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
struct A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct B : A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
void g(A a, B b) {
  f(a,b);           <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> could be <span class='tcode_in_codeblock'>A</span> or <span class='tcode_in_codeblock'>B</span>
</span>  f(b,a);           <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> could be <span class='tcode_in_codeblock'>A</span> or <span class='tcode_in_codeblock'>B</span>
</span>  f(a,a);           <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>A</span>
</span>  f(b,b);           <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>B</span>
</span>}</pre><div id='deduct.type-7.sentence-2' class='sentence'>Here is an example where two template arguments are deduced from a
single function parameter/argument pair<a class='hidden_link' href='#deduct.type-7.sentence-2'>.</a></div> <div id='deduct.type-7.sentence-3' class='sentence'>This can lead to conflicts
that cause type deduction to fail:</div><pre class='codeblock'>
template &lt;class T, class U&gt; void f(  T (*)( T, U, U )  );

int g1( int, float, float);
char g2( int, float, float);
int g3( int, char, float);

void r() {
  f(g1);            <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>U</span> is <span class='tcode_in_codeblock'>float</span>
</span>  f(g2);            <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> could be <span class='tcode_in_codeblock'>char</span> or <span class='tcode_in_codeblock'>int</span>
</span>  f(g3);            <span class='comment'>// error: <span class='tcode_in_codeblock'>U</span> could be <span class='tcode_in_codeblock'>char</span> or <span class='tcode_in_codeblock'>float</span>
</span>}</pre><div id='deduct.type-7.sentence-4' class='sentence'>Here is an example where a qualification conversion applies between the
argument type on the function call and the deduced template argument type:</div><pre class='codeblock'>
template&lt;class T&gt; void f(const T*) { }
int* p;
void s() {
  f(p);             <span class='comment'>// <span class='tcode_in_codeblock'>f(const int*)</span>
</span>}</pre><div id='deduct.type-7.sentence-5' class='sentence'>Here is an example where the template argument is used to instantiate
a derived class type of the corresponding function parameter type:</div><pre class='codeblock'>
template &lt;class T&gt; struct B { };
template &lt;class T&gt; struct D : public B&lt;T&gt; {};
struct D2 : public B&lt;int&gt; {};
template &lt;class T&gt; void f(B&lt;T&gt;&amp;){}
void t() {
  D&lt;int&gt; d;
  D2     d2;
  f(d);             <span class='comment'>// calls <span class='tcode_in_codeblock'>f(B&lt;int&gt;&amp;)</span>
</span>  f(d2);            <span class='comment'>// calls <span class='tcode_in_codeblock'>f(B&lt;int&gt;&amp;)</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-8'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8184'>#</a></div><div id='deduct.type-8.sentence-1' class='sentence'>A template type argument
<span class='texttt'>T</span>,
a template template argument
<span class='texttt'>TT</span>
or a template non-type argument
<span class='texttt'>i</span>
can be deduced if
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>
have one of the following forms:</div><pre class='codeblock'>
T
<span class='textit'>cv</span> T
T*
T&amp;
T&amp;&amp;
T[<span class='textit'>integer-constant</span>]
<span class='grammarterm'>template-name</span>&lt;T&gt;  <span class='textrm'>(where <span class='tcode_in_codeblock'><span class='grammarterm'>template-name</span></span> refers to a class template)</span>
<span class='textit'>type</span>(T)
T()
T(T)
T <span class='textit'>type</span>::*
<span class='textit'>type</span> T::*
T T::*
T (<span class='textit'>type</span>::*)()
<span class='textit'>type</span> (T::*)()
<span class='textit'>type</span> (<span class='textit'>type</span>::*)(T)
<span class='textit'>type</span> (T::*)(T)
T (<span class='textit'>type</span>::*)(T)
T (T::*)()
T (T::*)(T)
<span class='textit'>type</span>[i]
<span class='grammarterm'>template-name</span>&lt;i&gt;  <span class='textrm'>(where <span class='tcode_in_codeblock'><span class='grammarterm'>template-name</span></span> refers to a class template)</span>
TT&lt;T&gt;
TT&lt;i&gt;
TT&lt;&gt;</pre><div id='deduct.type-8.sentence-2' class='sentence'>where
<span class='texttt'>(T)</span>
represents
a parameter-type-list (<a href='dcl.fct'>[dcl.fct]</a>)
where at least one parameter type contains a
<span class='texttt'>T</span>,
and
<span class='texttt'>()</span>
represents
a parameter-type-list
where no parameter type contains a
<span class='texttt'>T</span><a class='hidden_link' href='#deduct.type-8.sentence-2'>.</a></div> <div id='deduct.type-8.sentence-3' class='sentence'>Similarly,
<span class='texttt'>&lt;T&gt;</span>
represents template argument lists where at least one argument contains a
<span class='texttt'>T</span>,
<span class='texttt'>&lt;i&gt;</span>
represents template argument lists where at least one argument contains an
<span class='texttt'>i</span>
and
<span class='texttt'>&lt;&gt;</span>
represents template argument lists where no argument contains a
<span class='texttt'>T</span>
or an
<span class='texttt'>i</span><a class='hidden_link' href='#deduct.type-8.sentence-3'>.</a></div></div><div class='para' id='deduct.type-9'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8251'>#</a></div><div id='deduct.type-9.sentence-1' class='sentence'>If <span class='texttt'>P</span> has a form that contains <span class='texttt'>&lt;T&gt;</span>
or <span class='texttt'>&lt;i&gt;</span>, then each argument <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> of the
respective template argument list of <span class='texttt'>P</span> is compared with the
corresponding argument <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> of the corresponding
template argument list of <span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-9.sentence-1'>.</a></div> <div id='deduct.type-9.sentence-2' class='sentence'>If the template argument list
of <span class='texttt'>P</span> contains a pack expansion that is not the last
template argument, the entire template argument list is a non-deduced
context<a class='hidden_link' href='#deduct.type-9.sentence-2'>.</a></div> <div id='deduct.type-9.sentence-3' class='sentence'>If <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is a pack expansion, then the pattern
of <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is compared with each remaining argument in the
template argument list of <span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-9.sentence-3'>.</a></div> <div id='deduct.type-9.sentence-4' class='sentence'>Each comparison deduces
template arguments for subsequent positions in the template parameter
packs expanded by <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span><a class='hidden_link' href='#deduct.type-9.sentence-4'>.</a></div> <div id='deduct.type-9.sentence-5' class='sentence'>During <a href='temp.deduct.partial'>partial ordering</a>, if <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> was
originally a pack expansion:</div><div id='deduct.type-9.sentence-6' class='sentence'><ul class='itemize'><li id='deduct.type-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-9.1'>(9.1)</a></div><div id='deduct.type-9.1.sentence-1' class='sentence'>if <span class='texttt'>P</span> does not contain a template argument corresponding to
<span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> then <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is ignored;</div></li><li id='deduct.type-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-9.2'>(9.2)</a></div><div id='deduct.type-9.2.sentence-1' class='sentence'>otherwise, if <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is not a pack expansion, template argument
deduction fails<a class='hidden_link' href='#deduct.type-9.2.sentence-1'>.</a></div></li></ul></div> <div id='deduct.type-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T1, class... Z&gt; class S;                               <span class='comment'>// #1
</span>template&lt;class T1, class... Z&gt; class S&lt;T1, const Z&amp;...&gt; { };          <span class='comment'>// #2
</span>template&lt;class T1, class T2&gt;   class S&lt;T1, const T2&amp;&gt; { };            <span class='comment'>// #3
</span>S&lt;int, const int&amp;&gt; s;         <span class='comment'>// both #2 and #3 match; #3 is more specialized
</span>
template&lt;class T, class... U&gt;            struct A { };                <span class='comment'>// #1
</span>template&lt;class T1, class T2, class... U&gt; struct A&lt;T1, T2*, U...&gt; { }; <span class='comment'>// #2
</span>template&lt;class T1, class T2&gt;             struct A&lt;T1, T2&gt; { };        <span class='comment'>// #3
</span>template struct A&lt;int, int*&gt;; <span class='comment'>// selects #2
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-10'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8288'>#</a></div><div id='deduct.type-10.sentence-1' class='sentence'>Similarly, if <span class='texttt'>P</span> has a form that contains
<span class='texttt'>(T)</span>, then each parameter type <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
of the respective parameter-type-list (<a href='dcl.fct'>[dcl.fct]</a>) of
<span class='texttt'>P</span> is compared with the corresponding parameter type
<span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> of the corresponding parameter-type-list
of <span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-10.sentence-1'>.</a></div> <div id='deduct.type-10.sentence-2' class='sentence'>If <span class='texttt'>P</span> and <span class='texttt'>A</span> are function types that originated from deduction when
taking the address of a function template (<a href='temp.deduct.funcaddr'>[temp.deduct.funcaddr]</a>) or when
deducing template arguments from a function declaration (<a href='temp.deduct.decl'>[temp.deduct.decl]</a>)
and <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> are parameters of the top-level
parameter-type-list of <span class='texttt'>P</span> and <span class='texttt'>A</span>, respectively,
<span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is adjusted if it is a forwarding reference (<a href='temp.deduct.call'>[temp.deduct.call]</a>)
and <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is an lvalue reference, in which case the type of
<span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is changed to be the template parameter type (i.e., <span class='texttt'>T&amp;&amp;</span> is
changed to simply <span class='texttt'>T</span>)<a class='hidden_link' href='#deduct.type-10.sentence-2'>.</a></div> <div id='deduct.type-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.type-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-10.sentence-3' class='sentence'>As a result, when <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>T&amp;&amp;</span>
and <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>X&amp;</span>, the adjusted <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> will be <span class='texttt'>T</span>,
causing <span class='texttt'>T</span> to be deduced as <span class='texttt'>X&amp;</span><a class='hidden_link' href='#deduct.type-10.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct.type-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; void f(T&amp;&amp;);
template &lt;&gt; void f(int&amp;) { }    <span class='comment'>// #1
</span>template &lt;&gt; void f(int&amp;&amp;) { }   <span class='comment'>// #2
</span>void g(int i) {
  f(i);                         <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&amp;&gt;(int&amp;)</span>, i.e., #1
</span>  f(0);                         <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int&amp;&amp;)</span>, i.e., #2
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='deduct.type-10.sentence-4' class='sentence'>If the <i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i>
corresponding to <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is a function parameter pack,
then the type of its <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> is compared with
each remaining parameter type in the parameter-type-list
of <span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-10.sentence-4'>.</a></div> <div id='deduct.type-10.sentence-5' class='sentence'>Each comparison deduces template arguments for
subsequent positions in the template parameter packs expanded by the
function parameter pack<a class='hidden_link' href='#deduct.type-10.sentence-5'>.</a></div> <div id='deduct.type-10.sentence-6' class='sentence'>During <a href='temp.deduct.partial'>partial ordering</a>, if <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> was
originally a function parameter pack:</div><div id='deduct.type-10.sentence-7' class='sentence'><ul class='itemize'><li id='deduct.type-10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-10.1'>(10.1)</a></div><div id='deduct.type-10.1.sentence-1' class='sentence'>if <span class='texttt'>P</span> does not contain a function parameter type corresponding to
<span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> then <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{A}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is ignored;</div></li><li id='deduct.type-10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-10.2'>(10.2)</a></div><div id='deduct.type-10.2.sentence-1' class='sentence'>otherwise, if <span class="mjx-chtml"><span class="mjx-math" aria-label="\texttt{P}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is not a function parameter pack, template
argument deduction fails<a class='hidden_link' href='#deduct.type-10.2.sentence-1'>.</a></div></li></ul></div> <div id='deduct.type-10.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-10.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T, class... U&gt; void f(T*, U...) { }  <span class='comment'>// #1
</span>template&lt;class T&gt;             void f(T) { }         <span class='comment'>// #2
</span>template void f(int*);                              <span class='comment'>// selects #1
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-11'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8343'>#</a></div><div id='deduct.type-11.sentence-1' class='sentence'>These forms can be used in the same way as
<span class='texttt'>T</span>
is for further composition of types<a class='hidden_link' href='#deduct.type-11.sentence-1'>.</a></div> <div id='deduct.type-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
X&lt;int&gt; (*)(char[6])</pre><div id='deduct.type-11.sentence-2' class='sentence'>is of the form</div><pre class='codeblock'>
<span class='grammarterm'>template-name</span>&lt;T&gt; (*)(<span class='textit'>type</span>[i])</pre><div id='deduct.type-11.sentence-3' class='sentence'>which is a variant of</div><pre class='codeblock'>
<span class='textit'>type</span> (*)(T)</pre><div id='deduct.type-11.sentence-4' class='sentence'>where type is
<span class='texttt'>X&lt;int&gt;</span>
and
<span class='texttt'>T</span>
is
<span class='texttt'>char[6]</span><a class='hidden_link' href='#deduct.type-11.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-12'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8373'>#</a></div><div id='deduct.type-12.sentence-1' class='sentence'>Template arguments cannot be deduced from function arguments involving
constructs other than the ones specified above<a class='hidden_link' href='#deduct.type-12.sentence-1'>.</a></div></div><div class='para' id='deduct.type-13'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8377'>#</a></div><div id='deduct.type-13.sentence-1' class='sentence'>When the value of the argument
corresponding to a non-type template parameter <span class='texttt'>P</span>
that is declared with a dependent type
is deduced from an expression,
the template parameters in the type of <span class='texttt'>P</span>
are deduced from the type of the value<a class='hidden_link' href='#deduct.type-13.sentence-1'>.</a></div> <div id='deduct.type-13.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;long n&gt; struct A { };

template&lt;typename T&gt; struct C;
template&lt;typename T, T n&gt; struct C&lt;A&lt;n&gt;&gt; {
  using Q = T;
};

using R = long;
using R = C&lt;A&lt;2&gt;&gt;::Q;           <span class='comment'>// OK; <span class='tcode_in_codeblock'>T</span> was deduced to <span class='tcode_in_codeblock'>long</span> from the
</span>                                <span class='comment'>// template argument value in the type <span class='tcode_in_codeblock'>A&lt;2&gt;</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct.type-13.sentence-2' class='sentence'>
The type of <span class='texttt'>N</span> in the type <span class='texttt'>T[N]</span> is <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span><a class='hidden_link' href='#deduct.type-13.sentence-2'>.</a></div> <div id='deduct.type-13.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-13.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; struct S;
template&lt;typename T, T n&gt; struct S&lt;int[n]&gt; {
  using Q = T;
};

using V = decltype(sizeof 0);
using V = S&lt;int[42]&gt;::Q;        <span class='comment'>// OK; <span class='tcode_in_codeblock'>T</span> was deduced to <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;size_&shy;t</span> from the type <span class='tcode_in_codeblock'>int[42]</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-14'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8411'>#</a></div><div id='deduct.type-14.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T, T i&gt; void f(int (&amp;a)[i]);
int v[10];
void g() {
  f(v);                         <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;size_&shy;t</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-15'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8422'>#</a></div><div id='deduct.type-15.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.type-15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-15.sentence-1' class='sentence'>Except for reference and pointer types, a major array bound is not part of a
function parameter type and cannot be deduced from an argument:
<pre class='codeblock'>
template&lt;int i&gt; void f1(int a[10][i]);
template&lt;int i&gt; void f2(int a[i][20]);
template&lt;int i&gt; void f3(int (&amp;a)[i][20]);

void g() {
  int v[10][20];
  f1(v);                        <span class='comment'>// OK: <span class='tcode_in_codeblock'>i</span> deduced to be <span class='tcode_in_codeblock'>20</span>
</span>  f1&lt;20&gt;(v);                    <span class='comment'>// OK
</span>  f2(v);                        <span class='comment'>// error: cannot deduce template-argument <span class='tcode_in_codeblock'>i</span>
</span>  f2&lt;10&gt;(v);                    <span class='comment'>// OK
</span>  f3(v);                        <span class='comment'>// OK: <span class='tcode_in_codeblock'>i</span> deduced to be <span class='tcode_in_codeblock'>10</span>
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-16'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8442'>#</a></div><div id='deduct.type-16.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.type-16.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-16.sentence-1' class='sentence'>If, in the declaration of a function template with a non-type
template parameter, the non-type template parameter
is used in a subexpression in the function parameter list,
the expression is a non-deduced context as specified above<a class='hidden_link' href='#deduct.type-16.sentence-1'>.</a></div> <div id='deduct.type-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;int i&gt; class A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template &lt;int i&gt; void g(A&lt;i+1&gt;);
template &lt;int i&gt; void f(A&lt;i&gt;, A&lt;i+1&gt;);
void k() {
  A&lt;1&gt; a1;
  A&lt;2&gt; a2;
  g(a1);                        <span class='comment'>// error: deduction fails for expression <span class='tcode_in_codeblock'>i+1</span>
</span>  g&lt;0&gt;(a1);                     <span class='comment'>// OK
</span>  f(a1, a2);                    <span class='comment'>// OK
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-17'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8464'>#</a></div><div id='deduct.type-17.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.type-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-17.sentence-1' class='sentence'>Template parameters do not participate in template argument deduction if
they are used only in non-deduced contexts<a class='hidden_link' href='#deduct.type-17.sentence-1'>.</a></div> <div id='deduct.type-17.sentence-2' class='sentence'>For example,</div><pre class='codeblock'>
template&lt;int i, typename T&gt;
T deduce(typename A&lt;T&gt;::X x,    <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is not deduced here
</span>         T t,                   <span class='comment'>// but <span class='tcode_in_codeblock'>T</span> is deduced here
</span>         typename B&lt;i&gt;::Y y);   <span class='comment'>// <span class='tcode_in_codeblock'>i</span> is not deduced here
</span>A&lt;int&gt; a;
B&lt;77&gt;  b;

int    x = deduce&lt;77&gt;(a.xm, 62, b.ym);
<span class='comment'>// <span class='tcode_in_codeblock'>T</span> is deduced to be <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>a.xm</span> must be convertible to <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;X</span>
</span><span class='comment'>// <span class='tcode_in_codeblock'>i</span> is explicitly specified to be <span class='tcode_in_codeblock'>77</span>, <span class='tcode_in_codeblock'>b.ym</span> must be convertible to <span class='tcode_in_codeblock'>B&lt;77&gt;&#x200b;::&#x200b;Y</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-18'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8484'>#</a></div><div id='deduct.type-18.sentence-1' class='sentence'>If <span class='texttt'>P</span> has a form that contains <span class='texttt'>&lt;i&gt;</span>, and
if the type of <span class='texttt'>i</span> differs from the type
of the corresponding template parameter
of the template named by the enclosing <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>,
deduction fails<a class='hidden_link' href='#deduct.type-18.sentence-1'>.</a></div> <div id='deduct.type-18.sentence-2' class='sentence'>If <span class='texttt'>P</span> has a form that contains <span class='texttt'>[i]</span>, and if the type of
<span class='texttt'>i</span> is not an integral type, deduction fails<a class='hidden_link' href='#deduct.type-18.sentence-2'>.</a><a class='footnotenum' href='#footnote-145'>145</a></div> <div id='deduct.type-18.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;int i&gt; class A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;short s&gt; void f(A&lt;s&gt;);
void k1() {
  A&lt;1&gt; a;
  f(a);             <span class='comment'>// error: deduction fails for conversion from <span class='tcode_in_codeblock'>int</span> to <span class='tcode_in_codeblock'>short</span>
</span>  f&lt;1&gt;(a);          <span class='comment'>// OK
</span>}

template&lt;const short cs&gt; class B { };
template&lt;short s&gt; void g(B&lt;s&gt;);
void k2() {
  B&lt;1&gt; b;
  g(b);             <span class='comment'>// OK: cv-qualifiers are ignored on template parameter types
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-19'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8519'>#</a></div><div id='deduct.type-19.sentence-1' class='sentence'>A
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
can be deduced from a function, pointer to function, or
pointer-to-member-function type<a class='hidden_link' href='#deduct.type-19.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='deduct.type-19.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-19.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void f(void(*)(T,int));
template&lt;class T&gt; void foo(T,int);
void g(int,int);
void g(char,int);

void h(int,int,int);
void h(char,int);
int m() {
  f(&amp;g);            <span class='comment'>// error: ambiguous
</span>  f(&amp;h);            <span class='comment'>// OK: void <span class='tcode_in_codeblock'>h(char,int)</span> is a unique match
</span>  f(&amp;foo);          <span class='comment'>// error: type deduction fails because <span class='tcode_in_codeblock'>foo</span> is a template
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-20'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8542'>#</a></div><div id='deduct.type-20.sentence-1' class='sentence'>A template
<i ><a href='temp.param#nt:type-parameter'>type-parameter</a></i>
cannot be deduced from the type of a function default argument<a class='hidden_link' href='#deduct.type-20.sentence-1'>.</a></div> <div id='deduct.type-20.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-20.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; void f(T = 5, T = 7);
void g() {
  f(1);             <span class='comment'>// OK: call <span class='tcode_in_codeblock'>f&lt;int&gt;(1,7)</span>
</span>  f();              <span class='comment'>// error: cannot deduce <span class='tcode_in_codeblock'>T</span>
</span>  f&lt;int&gt;();         <span class='comment'>// OK: call <span class='tcode_in_codeblock'>f&lt;int&gt;(5,7)</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-21'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8557'>#</a></div><div id='deduct.type-21.sentence-1' class='sentence'>The
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
corresponding to a template
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is deduced from the type of the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
of a class template specialization used in the argument list of a function call<a class='hidden_link' href='#deduct.type-21.sentence-1'>.</a></div> <div id='deduct.type-21.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-21.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;template &lt;class T&gt; class X&gt; struct A { };
template &lt;template &lt;class T&gt; class X&gt; void f(A&lt;X&gt;) { }
template&lt;class T&gt; struct B { };
A&lt;B&gt; ab;
f(ab);              <span class='comment'>// calls <span class='tcode_in_codeblock'>f(A&lt;B&gt;)</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.type-22'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-22'>22</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8575'>#</a></div><div id='deduct.type-22.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#deduct.type-22.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-22.sentence-1' class='sentence'>Template argument deduction involving parameter
packs (<a href='temp.variadic'>[temp.variadic]</a>) can deduce zero or more arguments for
each parameter pack<a class='hidden_link' href='#deduct.type-22.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='deduct.type-22.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.type-22.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class&gt; struct X { };
template&lt;class R, class ... ArgTypes&gt; struct X&lt;R(int, ArgTypes ...)&gt; { };
template&lt;class ... Types&gt; struct Y { };
template&lt;class T, class ... Types&gt; struct Y&lt;T, Types&amp; ...&gt; { };

template&lt;class ... Types&gt; int f(void (*)(Types ...));
void g(int, float);

X&lt;int&gt; x1;                      <span class='comment'>// uses primary template
</span>X&lt;int(int, float, double)&gt; x2;  <span class='comment'>// uses partial specialization; <span class='tcode_in_codeblock'>ArgTypes</span> contains <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>double</span>
</span>X&lt;int(float, int)&gt; x3;          <span class='comment'>// uses primary template
</span>Y&lt;&gt; y1;                         <span class='comment'>// use primary template; <span class='tcode_in_codeblock'>Types</span> is empty
</span>Y&lt;int&amp;, float&amp;, double&amp;&gt; y2;    <span class='comment'>// uses partial specialization; <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>int&amp;</span>, <span class='tcode_in_codeblock'>Types</span> contains <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>double</span>
</span>Y&lt;int, float, double&gt; y3;       <span class='comment'>// uses primary template; <span class='tcode_in_codeblock'>Types</span> contains <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>double</span>
</span>int fv = f(g);                  <span class='comment'>// OK; <span class='tcode_in_codeblock'>Types</span> contains <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>float</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-145'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-145'>145)</a></div><div id='footnote-145.sentence-1' class='sentence'>Although the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
corresponding to a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
of type
<span class='texttt'>bool</span>
may be deduced from an array bound, the resulting value will always be
<span class='texttt'>true</span>
because the array bound will be nonzero<a class='hidden_link' href='#footnote-145.sentence-1'>.</a></div></div></div><div id='deduct.decl' class='section'><h4 ><a class='secnum' href='#deduct.decl' style='min-width:118pt'>17.9.2.6</a> Deducing template arguments from a function declaration <a class='abbr_ref' href='temp.deduct.decl'>[temp.deduct.decl]</a></h4><div class='para' id='deduct.decl-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.decl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8603'>#</a></div><div id='deduct.decl-1.sentence-1' class='sentence'>In a declaration whose <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> refers to a specialization
of a function template, template argument deduction is performed to identify
the specialization to which the declaration refers<a class='hidden_link' href='#deduct.decl-1.sentence-1'>.</a></div> <div id='deduct.decl-1.sentence-2' class='sentence'>Specifically, this is done
for <a href='temp.explicit'>explicit instantiations</a>, <a href='temp.expl.spec'>explicit specializations</a>,
and certain <a href='temp.friend'>friend declarations</a><a class='hidden_link' href='#deduct.decl-1.sentence-2'>.</a></div> <div id='deduct.decl-1.sentence-3' class='sentence'>This is also done to
determine whether a deallocation function template specialization matches a placement
<span class='texttt'>operator new</span> (<a href='basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a>, <a href='expr.new'>[expr.new]</a>)<a class='hidden_link' href='#deduct.decl-1.sentence-3'>.</a></div> <div id='deduct.decl-1.sentence-4' class='sentence'>In all these cases, <span class='texttt'>P</span> is the type of the function template being considered
as a potential match and <span class='texttt'>A</span> is either the function type from the
declaration
or the type of the deallocation function that would match the placement
<span class='texttt'>operator new</span> as described in <a href='expr.new'>[expr.new]</a><a class='hidden_link' href='#deduct.decl-1.sentence-4'>.</a></div> <div id='deduct.decl-1.sentence-5' class='sentence'>The
deduction is done as described in <a href='temp.deduct.type'>[temp.deduct.type]</a><a class='hidden_link' href='#deduct.decl-1.sentence-5'>.</a></div></div><div class='para' id='deduct.decl-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.decl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8618'>#</a></div><div id='deduct.decl-2.sentence-1' class='sentence'>If, for the set of function templates so considered, there is either no match or
more than one match after partial ordering has been considered (<a href='temp.func.order'>[temp.func.order]</a>),
deduction fails and, in the declaration cases, the
program is ill-formed<a class='hidden_link' href='#deduct.decl-2.sentence-1'>.</a></div></div></div></div><div id='over' class='section'><h3 ><a class='secnum' href='#over' style='min-width:103pt'>17.9.3</a> Overload resolution <a class='abbr_ref' href='temp.over'>[temp.over]</a></h3><div class='para' id='over-1'><div class='marginalizedparent'><a class='marginalized' href='#over-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8626'>#</a></div><div id='over-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloading,resolution,function_template'></a></span>A function template can be overloaded either by (non-template) functions of its
name or by (other) function templates of the same name<a class='hidden_link' href='#over-1.sentence-1'>.</a></div> <div id='over-1.sentence-2' class='sentence'>When a call to that name is written (explicitly, or implicitly using the
operator notation), <a href='temp.deduct'>template argument deduction</a>
and checking of any explicit <a href='temp.arg'>template arguments</a> are performed
for each function template to find the template argument values (if any) that
can be used with that function template to instantiate a function template
specialization that can be invoked with the call arguments<a class='hidden_link' href='#over-1.sentence-2'>.</a></div> <div id='over-1.sentence-3' class='sentence'>For each function template, if the argument deduction and checking succeeds,
the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
(deduced and/or explicit)
are used to synthesize the declaration of
a single function template specialization which is
added to the candidate functions set to be used in overload resolution<a class='hidden_link' href='#over-1.sentence-3'>.</a></div> <div id='over-1.sentence-4' class='sentence'>If, for a given function template, argument deduction fails or
the synthesized function template specialization would be ill-formed,
no such function is added to the set of candidate functions for that template<a class='hidden_link' href='#over-1.sentence-4'>.</a></div> <div id='over-1.sentence-5' class='sentence'>The complete set of candidate functions includes all the synthesized
declarations and all of the non-template overloaded functions of
the same name<a class='hidden_link' href='#over-1.sentence-5'>.</a></div> <div id='over-1.sentence-6' class='sentence'>The synthesized declarations are
treated like any other functions in
the remainder of overload resolution, except as explicitly noted
in <a href='over.match.best'>[over.match.best]</a><a class='hidden_link' href='#over-1.sentence-6'>.</a><a class='footnotenum' href='#footnote-146'>146</a></div></div><div class='para' id='over-2'><div class='marginalizedparent'><a class='marginalized' href='#over-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8664'>#</a></div><div id='over-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; T max(T a, T b) { return a&gt;b?a:b; }

void f(int a, int b, char c, char d) {
  int m1 = max(a,b);            <span class='comment'>// <span class='tcode_in_codeblock'>max(int a, int b)</span>
</span>  char m2 = max(c,d);           <span class='comment'>// <span class='tcode_in_codeblock'>max(char a, char b)</span>
</span>  int m3 = max(a,c);            <span class='comment'>// error: cannot generate <span class='tcode_in_codeblock'>max(int,char)</span>
</span>}</pre><div id='over-2.sentence-1' class='sentence'>Adding the non-template function</div><pre class='codeblock'>
int max(int,int);</pre><div id='over-2.sentence-2' class='sentence'>to the example above would resolve the third call, by providing a function that
could be called for
<span class='texttt'>max(a,c)</span>
after using the standard conversion of
<span class='texttt'>char</span>
to
<span class='texttt'>int</span>
for
<span class='texttt'>c</span><a class='hidden_link' href='#over-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='over-3'><div class='marginalizedparent'><a class='marginalized' href='#over-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8693'>#</a></div><div id='over-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='over-3.sentence-1' class='sentence'>Here is an example involving conversions on a function argument involved in
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
deduction:
<pre class='codeblock'>
template&lt;class T&gt; struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T&gt; struct D : public B&lt;T&gt; { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T&gt; void f(B&lt;T&gt;&amp;);

void g(B&lt;int&gt;&amp; bi, D&lt;int&gt;&amp; di) {
  f(bi);            <span class='comment'>// <span class='tcode_in_codeblock'>f(bi)</span>
</span>  f(di);            <span class='comment'>// <span class='tcode_in_codeblock'>f((B&lt;int&gt;&amp;)di)</span>
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='over-4'><div class='marginalizedparent'><a class='marginalized' href='#over-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8710'>#</a></div><div id='over-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='over-4.sentence-1' class='sentence'>Here is an example involving conversions on a function argument not involved in
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
deduction:
<pre class='codeblock'>
template&lt;class T&gt; void f(T*,int);       <span class='comment'>// #1
</span>template&lt;class T&gt; void f(T,char);       <span class='comment'>// #2
</span>
void h(int* pi, int i, char c) {
  f(pi,i);          <span class='comment'>// #1: <span class='tcode_in_codeblock'>f&lt;int&gt;(pi,i)</span>
</span>  f(pi,c);          <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int*&gt;(pi,c)</span>
</span>
  f(i,c);           <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int&gt;(i,c);</span>
</span>  f(i,i);           <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int&gt;(i,char(i))</span>
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='over-5'><div class='marginalizedparent'><a class='marginalized' href='#over-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8729'>#</a></div><div id='over-5.sentence-1' class='sentence'>Only the signature of a function template specialization is needed to enter the
specialization in a set of candidate functions<a class='hidden_link' href='#over-5.sentence-1'>.</a></div> <div id='over-5.sentence-2' class='sentence'>Therefore only the function template declaration is needed to resolve a call
for which a template specialization is a candidate<a class='hidden_link' href='#over-5.sentence-2'>.</a></div> <div id='over-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#over-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; void f(T);    <span class='comment'>// declaration
</span>
void g() {
  f("Annemarie");               <span class='comment'>// call of <span class='tcode_in_codeblock'>f&lt;const char*&gt;</span>
</span>}</pre><div id='over-5.sentence-3' class='sentence'>The call of
<span class='texttt'>f</span>
is well-formed even if the template
<span class='texttt'>f</span>
is only declared and not defined at the point of the call<a class='hidden_link' href='#over-5.sentence-3'>.</a></div> <div id='over-5.sentence-4' class='sentence'>The program will be ill-formed unless a specialization for
<span class='texttt'>f&lt;const char*&gt;</span>,
either implicitly or explicitly generated,
is present in some translation unit<a class='hidden_link' href='#over-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-146'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-146'>146)</a></div><div id='footnote-146.sentence-1' class='sentence'>The parameters of function template
specializations contain no
template parameter types<a class='hidden_link' href='#footnote-146.sentence-1'>.</a></div> <div id='footnote-146.sentence-2' class='sentence'>The set of conversions allowed on deduced arguments is limited, because the
argument deduction process produces function templates with parameters that
either match the call arguments exactly or differ only in ways that can be
bridged by the allowed limited conversions<a class='hidden_link' href='#footnote-146.sentence-2'>.</a></div> <div id='footnote-146.sentence-3' class='sentence'>Non-deduced arguments allow the full range of conversions<a class='hidden_link' href='#footnote-146.sentence-3'>.</a></div> <div id='footnote-146.sentence-4' class='sentence'>Note also that <a href='over.match.best'>[over.match.best]</a> specifies that a non-template function will
be given preference over a template specialization if the two functions
are otherwise equally good candidates for an overload match<a class='hidden_link' href='#footnote-146.sentence-4'>.</a></div></div></div></div><div id='deduct.guide' class='section'><h2 ><a class='secnum' href='#deduct.guide' style='min-width:88pt'>17.10</a> Deduction guides <a class='abbr_ref' href='temp.deduct.guide'>[temp.deduct.guide]</a></h2><span class='indexparent'><a class='index' id=':deduction,class_template_argument'></a></span><div class='para' id='deduct.guide-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.guide-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8757'>#</a></div><div id='deduct.guide-1.sentence-1' class='sentence'>Deduction guides are used
when a <i ><a href='temp.names#nt:template-name'>template-name</a></i> appears
as a type specifier
for a <a href='dcl.type.class.deduct'>deduced class type</a><a class='hidden_link' href='#deduct.guide-1.sentence-1'>.</a></div> <div id='deduct.guide-1.sentence-2' class='sentence'>Deduction guides are not found by name lookup<a class='hidden_link' href='#deduct.guide-1.sentence-2'>.</a></div> <div id='deduct.guide-1.sentence-3' class='sentence'>Instead, when performing class template <a href='over.match.class.deduct'>argument deduction</a>,
any deduction guides declared for the class template are considered<a class='hidden_link' href='#deduct.guide-1.sentence-3'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:deduction-guide' id='nt:deduction-guide'>deduction-guide:</a>
&#9;<span class='terminal'>explicit</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='temp.names#nt:template-name'>template-name</a></i> <span class='terminal'>(</span> <i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> <span class='terminal'>) -&gt;</span> <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i> <span class='terminal'>;</span>
</pre></div><div class='para' id='deduct.guide-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.guide-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8771'>#</a></div><div id='deduct.guide-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#deduct.guide-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T, class D = int&gt;
struct S {
  T data;
};
template&lt;class U&gt;
S(U) -&gt; S&lt;typename U::type&gt;;

struct A {
  using type = short;
  operator type();
};
S x{A()};           <span class='comment'>// <span class='tcode_in_codeblock'>x</span> is of type <span class='tcode_in_codeblock'>S&lt;short, int&gt;</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='deduct.guide-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.guide-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f68ca585d040269f804aea46ca56cc3a43dcab24/source/templates.tex#L8789'>#</a></div><div id='deduct.guide-3.sentence-1' class='sentence'>The same restrictions apply
to the <i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i>
of a deduction guide
as in a function declaration (<a href='dcl.fct'>[dcl.fct]</a>)<a class='hidden_link' href='#deduct.guide-3.sentence-1'>.</a></div> <div id='deduct.guide-3.sentence-2' class='sentence'>The <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
shall name a class template specialization<a class='hidden_link' href='#deduct.guide-3.sentence-2'>.</a></div> <div id='deduct.guide-3.sentence-3' class='sentence'>The <i ><a href='temp.names#nt:template-name'>template-name</a></i>
shall be the same <i ><a href='lex.name#nt:identifier'>identifier</a></i>
as the <i ><a href='temp.names#nt:template-name'>template-name</a></i>
of the <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i><a class='hidden_link' href='#deduct.guide-3.sentence-3'>.</a></div> <div id='deduct.guide-3.sentence-4' class='sentence'>A <i ><a href='temp.deduct.guide#nt:deduction-guide'>deduction-guide</a></i>
shall be declared
in the same scope
as the corresponding class template
and, for a member class template, with the same access<a class='hidden_link' href='#deduct.guide-3.sentence-4'>.</a></div> <div id='deduct.guide-3.sentence-5' class='sentence'>Two deduction guide declarations
in the same translation unit
for the same class template
shall not have equivalent <i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i><span class='textit'>s</span><a class='hidden_link' href='#deduct.guide-3.sentence-5'>.</a></div></div></div></div></body></html>