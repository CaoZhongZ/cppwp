<!DOCTYPE html><html lang='en'><head><title>[basic.start.static]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basic concepts <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.6</a> Start and termination <a class='abbr_ref' href='basic.start#static'>[basic.start]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>6.6.2</a> Static initialization <a class='abbr_ref'>[basic.start.static]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4ad1c6bb8e53bd32bd475d8b199e5ce01b8556f1/source/basic.tex#L2526'>#</a></div><p ><span class='indexparent'><a class='index' id=':initialization'></a></span><span class='indexparent'><a class='index' id=':initialization,static_and_thread'></a></span>Variables with static storage duration
are initialized as a consequence of program initiation. Variables with
thread storage duration are initialized as a consequence of thread execution.
Within each of these phases of initiation, initialization occurs as follows.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4ad1c6bb8e53bd32bd475d8b199e5ce01b8556f1/source/basic.tex#L2534'>#</a></div><p ><span class='indexparent'><a class='index' id=':initialization,static_object'></a></span><span class='indexparent'><a class='index' id=':initialization,constant'></a></span>A <a class='hidden_link' href='#def:constant_initializer' id='def:constant_initializer'><i >constant initializer</i></a> for a variable or temporary object <span class='texttt'>o</span>
is an initializer whose full-expression is a
constant expression, except that if <span class='texttt'>o</span> is an object,
such an initializer may also invoke constexpr constructors
for <span class='texttt'>o</span> and its subobjects even if those objects are of non-literal class
types. [<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  Such a class may have a non-trivial destructor. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
<a class='hidden_link' href='#def:constant_initialization' id='def:constant_initialization'><i >Constant initialization</i></a> is performed
if a variable or temporary object with static or thread storage duration
is initialized by a constant initializer for the entity.</p><p ><span class='indexparent'><a class='index' id=':initialization,runtime'></a></span>If constant initialization is not performed, a variable with <a href='basic.stc.static#def:static_storage_duration'>static
storage duration</a> or <a href='basic.stc.thread#def:thread_storage_duration'>thread storage
duration</a> is <a href='dcl.init#def:zero-initialization'>zero-initialized</a>.
Together, zero-initialization and constant initialization are called
<span class='indexparent'><a class='index' id=':initialization,dynamic'></a></span><a class='hidden_link' href='#def:static_initialization' id='def:static_initialization'><i >static initialization</i></a>;
all other initialization is <a class='hidden_link' href='#def:dynamic_initialization' id='def:dynamic_initialization'><i >dynamic initialization</i></a>.
All static initialization strongly happens before (<a href='intro.races'>[intro.races]</a>)
any dynamic initialization.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  The dynamic initialization of non-local variables is described
in <a href='basic.start.dynamic'>[basic.start.dynamic]</a>; that of local static variables is described
in <a href='stmt.dcl'>[stmt.dcl]</a>. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4ad1c6bb8e53bd32bd475d8b199e5ce01b8556f1/source/basic.tex#L2561'>#</a></div><p >An implementation is permitted to perform the initialization of a
variable with static or thread storage duration as a static
initialization even if such initialization is not required to be done
statically, provided that
</p><ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div><p >the dynamic version of the initialization does not change the
value of any other object of static or thread storage duration
prior to its initialization, and</p></li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div><p >the static version of the initialization produces the same value
in the initialized variable as would be produced by the dynamic
initialization if all variables not required to be initialized statically
were initialized dynamically.
</p></li></ul><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
As a consequence, if the initialization of an object <span class='texttt'>obj1</span> refers to an
object <span class='texttt'>obj2</span> of namespace scope potentially requiring dynamic initialization and defined
later in the same translation unit, it is unspecified whether the value of <span class='texttt'>obj2</span> used
will be the value of the fully initialized <span class='texttt'>obj2</span> (because <span class='texttt'>obj2</span> was statically
initialized) or will be the value of <span class='texttt'>obj2</span> merely zero-initialized. For example,
</p><pre class='codeblock'>
inline double fd() { return 1.0; }
extern double d1;
double d2 = d1;     <span class='comment'>// unspecified:
</span>                    <span class='comment'>// may be statically initialized to <span class='tcode_in_codeblock'>0.0</span> or
</span>                    <span class='comment'>// dynamically initialized to <span class='tcode_in_codeblock'>0.0</span> if <span class='tcode_in_codeblock'>d1</span> is
</span>                    <span class='comment'>// dynamically initialized, or <span class='tcode_in_codeblock'>1.0</span> otherwise
</span>double d1 = fd();   <span class='comment'>// may be initialized statically or dynamically to <span class='tcode_in_codeblock'>1.0</span>
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div></body></html>