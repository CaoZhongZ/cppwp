<!DOCTYPE html><html lang='en'><head><title>[locale.stdcvt]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>22</a> Localization library <a class='abbr_ref' href='./#localization'>[localization]</a></h1><div id='locale.stdcvt'><h2 ><a class='secnum' style='min-width:88pt'>22.5</a> Standard code conversion facets <a class='abbr_ref'>[locale.stdcvt]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >The header <span class='texttt'>&lt;codecvt&gt;</span> provides code conversion facets for various character encodings.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p ><b>Header <span class='texttt'>&lt;codecvt&gt;</span> synopsis</b></p><p ><span class='indexparent'><a class='index' id='codecvt'></a></span></p><pre class='codeblock'>
namespace std {
  enum codecvt_mode {
    consume_header = 4,
    generate_header = 2,
    little_endian = 1
  };

  template&lt;class Elem, unsigned long Maxcode = 0x10ffff,
    codecvt_mode Mode = (codecvt_mode)0&gt;
  class codecvt_utf8
    : public codecvt&lt;Elem, char, mbstate_t&gt; {
    <span class='comment'>// <i><span class='texttt'>unspecified</span></i>
</span>  };

  template&lt;class Elem, unsigned long Maxcode = 0x10ffff,
    codecvt_mode Mode = (codecvt_mode)0&gt;
  class codecvt_utf16
    : public codecvt&lt;Elem, char, mbstate_t&gt; {
    <span class='comment'>// <i><span class='texttt'>unspecified</span></i>
</span>  };

  template&lt;class Elem, unsigned long Maxcode = 0x10ffff,
    codecvt_mode Mode = (codecvt_mode)0&gt;
  class codecvt_utf8_utf16
    : public codecvt&lt;Elem, char, mbstate_t&gt; {
    <span class='comment'>// <i><span class='texttt'>unspecified</span></i>
</span>  };
}
</pre></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p >For each of the three code conversion facets <span class='texttt'>codecvt_utf8</span>, <span class='texttt'>codecvt_utf16</span>, and <span class='texttt'>codecvt_utf8_utf16</span>:</p><ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div><p ><span class='texttt'>Elem</span> is the wide-character type, such as <span class='texttt'>wchar_t</span>, <span class='texttt'>char16_t</span>, or <span class='texttt'>char32_t</span>.
</p></li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div><p ><span class='texttt'>Maxcode</span> is the largest wide-character code that the facet will read or write without reporting a conversion error.
</p></li><li id='3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.3'>(3.3)</a></div><p >If <span class='texttt'>(Mode &amp; consume_header)</span>, the facet shall consume an initial header sequence, if present, when reading a multibyte sequence to determine the endianness of the subsequent multibyte sequence to be read.
</p></li><li id='3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.4'>(3.4)</a></div><p >If <span class='texttt'>(Mode &amp; generate_header)</span>, the facet shall generate an initial header sequence when writing a multibyte sequence to advertise the endianness of the subsequent multibyte sequence to be written.
</p></li><li id='3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.5'>(3.5)</a></div><p >If <span class='texttt'>(Mode &amp; little_endian)</span>, the facet shall generate a multibyte sequence in little-endian order, as opposed to the default big-endian order.
</p></li></ul></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><p >For the facet <span class='texttt'>codecvt_utf8</span>:</p><ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div><p >The facet shall convert between UTF-8 multibyte sequences and UCS2 or UCS4 (depending on the size of <span class='texttt'>Elem</span>) within the program.
</p></li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div><p >Endianness shall not affect how multibyte sequences are read or written.
</p></li><li id='4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.3'>(4.3)</a></div><p >The multibyte sequences may be written as either a text or a binary file.
</p></li></ul></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><p >For the facet <span class='texttt'>codecvt_utf16</span>:</p><ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.1'>(5.1)</a></div><p >The facet shall convert between UTF-16 multibyte sequences and UCS2 or UCS4 (depending on the size of <span class='texttt'>Elem</span>) within the program.
</p></li><li id='5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.2'>(5.2)</a></div><p >Multibyte sequences shall be read or written according to the <span class='texttt'>Mode</span> flag, as set out above.
</p></li><li id='5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.3'>(5.3)</a></div><p >The multibyte sequences may be written only as a binary file. Attempting to write to a text file produces undefined behavior.
</p></li></ul></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><p >For the facet <span class='texttt'>codecvt_utf8_utf16</span>:</p><ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.1'>(6.1)</a></div><p >The facet shall convert between UTF-8 multibyte sequences and UTF-16 (one or two 16-bit codes) within the program.
</p></li><li id='6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.2'>(6.2)</a></div><p >Endianness shall not affect how multibyte sequences are read or written.
</p></li><li id='6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.3'>(6.3)</a></div><p >The multibyte sequences may be written as either a text or a binary file.
</p></li></ul><p ><span class='textsc'>See also:</span> ISO/IEC 10646-1:1993.</p></div></div></div></body></html>