<!DOCTYPE html><html lang='en'><head><title>[basic.link]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basic concepts <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.5</a> Program and linkage <a class='abbr_ref'>[basic.link]</a></h2><span class='indexparent'><a class='index' id=':linkage'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2148'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':program'></a></span>A <a class='hidden_link' href='#def:program' id='def:program'><i >program</i></a> consists of one or more
<a href='lex#def:translation_unit'>translation units</a> linked together<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A translation unit consists of a sequence of declarations<a class='hidden_link' href='#1.sentence-2'>.</a></div><pre class='bnf'><a class='nontermdef' id='nt:translation-unit'>translation-unit:</a>
&#9;<i ><a href='dcl.dcl#nt:declaration-seq'>declaration-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2159'>#</a></div><div id='2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':linkage_'></a></span><span class='indexparent'><a class='index' id=':translation_unit'></a></span><span class='indexparent'><a class='index' id=':linkage,internal'></a></span><span class='indexparent'><a class='index' id=':linkage,external'></a></span>A name is said to have <a class='hidden_link' href='#def:linkage' id='def:linkage'><i >linkage</i></a> when it might denote the same
object, reference, function, type, template, namespace or value as a
name introduced by a declaration in another scope:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><div id='2.1.sentence-1' class='sentence'>When a name has <span class='indexparent'><a class='index' id=':linkage,external_'></a></span><a class='hidden_link' href='#def:external_linkage' id='def:external_linkage'><i >external linkage</i></a>,
the entity it denotes
can be referred to by names from scopes of other translation units or
from other scopes of the same translation unit<a class='hidden_link' href='#2.1.sentence-1'>.</a></div></li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><div id='2.2.sentence-1' class='sentence'>When a name has <span class='indexparent'><a class='index' id=':linkage,internal_'></a></span><a class='hidden_link' href='#def:internal_linkage' id='def:internal_linkage'><i >internal linkage</i></a>,
the entity it denotes
can be referred to by names from other scopes in the same translation
unit<a class='hidden_link' href='#2.2.sentence-1'>.</a></div></li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div><div id='2.3.sentence-1' class='sentence'>When a name has <span class='indexparent'><a class='index' id=':linkage,no'></a></span><a class='hidden_link' href='#def:no_linkage' id='def:no_linkage'><i >no linkage</i></a>, the entity it denotes
cannot be referred to by names from other scopes<a class='hidden_link' href='#2.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2182'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':linkage,static_and'></a></span><span class='indexparent'><a class='index' id=':static,linkage_of'></a></span><span class='indexparent'><a class='index' id=':linkage,const_and'></a></span><span class='indexparent'><a class='index' id=':const,linkage_of'></a></span><span class='indexparent'><a class='index' id=':linkage,inline_and'></a></span><span class='indexparent'><a class='index' id=':inline,linkage_of'></a></span>A name having <a href='basic.scope.namespace'>namespace scope</a> has internal
linkage if it is the name of
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div><div id='3.1.sentence-1' class='sentence'>a variable, function or function template that is
  explicitly declared <span class='texttt'>static</span>; or,</div></li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div><div id='3.2.sentence-1' class='sentence'>a non-inline variable of non-volatile const-qualified type that is
  neither explicitly declared <span class='texttt'>extern</span> nor previously
  declared to have external linkage; or</div></li><li id='3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.3'>(3.3)</a></div><div id='3.3.sentence-1' class='sentence'>a data member of an anonymous union<a class='hidden_link' href='#3.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2203'>#</a></div><div id='4.sentence-1' class='sentence'>An unnamed namespace or a namespace declared directly or indirectly within an
unnamed namespace has internal linkage<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>All other namespaces have external linkage<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>A name having namespace scope
that has not been given internal linkage above
has the same linkage as the enclosing namespace if it is the name of
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div><div id='4.1.sentence-1' class='sentence'>a variable; or</div></li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div><div id='4.2.sentence-1' class='sentence'>a function; or</div></li><li id='4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.3'>(4.3)</a></div><div id='4.3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':class,linkage_of'></a></span>a named class (Clause <a href='class'>[class]</a>), or an unnamed class defined in a
typedef declaration in which the class has the typedef name for linkage
purposes (<a href='dcl.typedef'>[dcl.typedef]</a>); or</div></li><li id='4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.4'>(4.4)</a></div><div id='4.4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':enumeration,linkage_of'></a></span>a named <a href='dcl.enum'>enumeration</a>, or an unnamed enumeration defined
in a typedef declaration in which the enumeration has the typedef name
for linkage purposes (<a href='dcl.typedef'>[dcl.typedef]</a>); or</div></li><li id='4.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.5'>(4.5)</a></div><div id='4.5.sentence-1' class='sentence'>a template<a class='hidden_link' href='#4.5.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2223'>#</a></div><div id='5.sentence-1' class='sentence'>In addition, a member function, static data member, a named class or
enumeration of class scope, or an unnamed class or enumeration defined
in a class-scope typedef declaration such that the class or enumeration
has the typedef name for linkage purposes (<a href='dcl.typedef'>[dcl.typedef]</a>), has
the same linkage, if any, as the name of the class of which it is a
member<a class='hidden_link' href='#5.sentence-1'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2231'>#</a></div><div id='6.sentence-1' class='sentence'>The name of a function declared in block scope and the name of a variable declared by a
block scope <span class='texttt'>extern</span> declaration have linkage<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>If there is a visible declaration
of an entity with linkage having the same name and type, ignoring entities declared
outside the innermost enclosing namespace scope, the block scope declaration declares
that same entity and receives the linkage of the previous declaration<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>If there is more
than one such matching entity, the program is ill-formed<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>Otherwise, if no matching
entity is found, the block scope entity receives external linkage<a class='hidden_link' href='#6.sentence-4'>.</a></div> <div id='6.sentence-5' class='sentence'>If, within a translation unit, the same entity is declared with both
internal and external linkage, the program is ill-formed<a class='hidden_link' href='#6.sentence-5'>.</a></div> <div id='6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
static void f();
static int i = 0;               <span class='comment'>// #1
</span>void g() {
  extern void f();              <span class='comment'>// internal linkage
</span>  int i;                        <span class='comment'>// #2: <span class='tcode_in_codeblock'>i</span> has no linkage
</span>  {
    extern void f();            <span class='comment'>// internal linkage
</span>    extern int i;               <span class='comment'>// #3: external linkage, ill-formed
</span>  }
}</pre> <div id='6.sentence-6' class='sentence'>
Without the declaration at line #2,
the declaration at line #3 would link with the declaration at line #1<a class='hidden_link' href='#6.sentence-6'>.</a></div> <div id='6.sentence-7' class='sentence'>Because the declaration with internal linkage is hidden, however,
#3 is given external linkage, making the program ill-formed<a class='hidden_link' href='#6.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2260'>#</a></div><div id='7.sentence-1' class='sentence'>When a block scope declaration of an entity with linkage is not found to
refer to some other declaration, then that entity is a member of the
innermost enclosing namespace<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>However such a declaration does not
introduce the member name in its namespace scope<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace X {
  void p() {
    q();                        <span class='comment'>// error: <span class='tcode_in_codeblock'>q</span> not yet declared
</span>    extern void q();            <span class='comment'>// <span class='tcode_in_codeblock'>q</span> is a member of namespace <span class='tcode_in_codeblock'>X</span>
</span>  }

  void middle() {
    q();                        <span class='comment'>// error: <span class='tcode_in_codeblock'>q</span> not yet declared
</span>  }

  void q() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }        <span class='comment'>// definition of <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;q</span>
</span>}

void q() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }          <span class='comment'>// some other, unrelated <span class='tcode_in_codeblock'>q</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2283'>#</a></div><div id='8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':linkage,no_'></a></span>Names not covered by these rules have no linkage<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>Moreover, except as
noted, a name declared at <a href='basic.scope.block#def:block_scope'>block scope</a> has no
linkage<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>A type is said to have linkage if and only if:
<ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.1'>(8.1)</a></div><div id='8.1.sentence-1' class='sentence'>it is a class or enumeration type that is named (or has a name for
linkage purposes (<a href='dcl.typedef'>[dcl.typedef]</a>)) and the name has linkage; or</div></li><li id='8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.2'>(8.2)</a></div><div id='8.2.sentence-1' class='sentence'>it is an unnamed class or unnamed enumeration that is a member of a class
with linkage; or</div></li><li id='8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.3'>(8.3)</a></div><div id='8.3.sentence-1' class='sentence'>it is a specialization of a class template (Clause <a href='temp'>[temp]</a>)<a class='footnotenum' href='#footnote-35'>35</a>;
or</div></li><li id='8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.4'>(8.4)</a></div><div id='8.4.sentence-1' class='sentence'>it is a <a href='basic.fundamental'>fundamental type</a>; or</div></li><li id='8.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.5'>(8.5)</a></div><div id='8.5.sentence-1' class='sentence'>it is a <a href='basic.compound'>compound type</a> other than a class or
enumeration, compounded exclusively from types that have linkage; or</div></li><li id='8.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.6'>(8.6)</a></div><div id='8.6.sentence-1' class='sentence'>it is a <a href='basic.type.qualifier'>cv-qualified</a> version of a
type that has linkage<a class='hidden_link' href='#8.6.sentence-1'>.</a></div></li></ul></div> <div id='8.sentence-4' class='sentence'>
A type without linkage shall not be used as the type of a variable or
function with external linkage unless
<ul class='itemize'><li id='8.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.7'>(8.7)</a></div><div id='8.7.sentence-1' class='sentence'>the entity has C language <a href='dcl.link'>linkage</a>, or</div></li><li id='8.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.8'>(8.8)</a></div><div id='8.8.sentence-1' class='sentence'>the entity is declared within an <a href='namespace.unnamed'>unnamed
namespace</a>, or</div></li><li id='8.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.9'>(8.9)</a></div><div id='8.9.sentence-1' class='sentence'>the entity is not <a href='basic.def.odr'>odr-used</a> or is defined in
the same translation unit<a class='hidden_link' href='#8.9.sentence-1'>.</a></div></li></ul></div> <div id='8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='8.sentence-5' class='sentence'>In other words, a type without linkage contains a class or enumeration that
cannot be named outside its translation unit<a class='hidden_link' href='#8.sentence-5'>.</a></div> <div id='8.sentence-6' class='sentence'>An entity with external linkage declared
using such a type could not correspond to any other entity in another translation unit
of the program and thus must be defined in the
translation unit if it is odr-used<a class='hidden_link' href='#8.sentence-6'>.</a></div> <div id='8.sentence-7' class='sentence'>Also note that classes with linkage may contain members
whose types do not have linkage, and that typedef names are ignored in the determination
of whether a type has linkage<a class='hidden_link' href='#8.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <div id='8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct B {
  void g(T) { }
  void h(T);
  friend void i(B, T) { }
};

void f() {
  struct A { int x; };  <span class='comment'>// no linkage
</span>  A a = { 1 };
  B&lt;A&gt; ba;              <span class='comment'>// declares <span class='tcode_in_codeblock'>B&lt;A&gt;&#x200b;::&#x200b;g(A)</span> and <span class='tcode_in_codeblock'>B&lt;A&gt;&#x200b;::&#x200b;h(A)</span>
</span>  ba.g(a);              <span class='comment'>// OK
</span>  ba.h(a);              <span class='comment'>// error: <span class='tcode_in_codeblock'>B&lt;A&gt;&#x200b;::&#x200b;h(A) not defined in the translation unit</span>
</span>  i(ba, a);             <span class='comment'>// OK
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2348'>#</a></div><div id='9.sentence-1' class='sentence'>Two names that are <a href='basic#def:name,same'>the same</a> and that are declared
in different scopes shall denote the same variable, function,
type, template or namespace if
<ul class='itemize'><li id='9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.1'>(9.1)</a></div><div id='9.1.sentence-1' class='sentence'>both names have external linkage or else both names have internal
linkage and are declared in the same translation unit; and</div></li><li id='9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.2'>(9.2)</a></div><div id='9.2.sentence-1' class='sentence'>both names refer to members of the same namespace or to members,
not by inheritance, of the same class; and</div></li><li id='9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.3'>(9.3)</a></div><div id='9.3.sentence-1' class='sentence'>when both names denote functions, the parameter-type-lists of the
functions (<a href='dcl.fct'>[dcl.fct]</a>) are identical; and</div></li><li id='9.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.4'>(9.4)</a></div><div id='9.4.sentence-1' class='sentence'>when both names denote function templates, the
signatures (<a href='temp.over.link'>[temp.over.link]</a>) are the same<a class='hidden_link' href='#9.4.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2366'>#</a></div><div id='10.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':consistency,type_declaration'></a></span><span class='indexparent'><a class='index' id=':declaration,multiple'></a></span>After all adjustments of types (during which
<a href='dcl.typedef'>typedefs</a> are replaced by their definitions), the
types specified by all declarations referring to a given variable or
function shall be identical, except that declarations for an array
object can specify array types that differ by the presence or absence of
a major array bound (<a href='dcl.array'>[dcl.array]</a>)<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>A violation of this rule on type
identity does not require a diagnostic<a class='hidden_link' href='#10.sentence-2'>.</a></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/119b98d70d24612e425fb2ae1b6caffb93689b89/source/basic.tex#L2377'>#</a></div><div id='11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='11.sentence-1' class='sentence'>Linkage to non-C++ declarations can be achieved using a
<span class='grammarterm'>linkage-specification</span> (<a href='dcl.link'>[dcl.link]</a>)<a class='hidden_link' href='#11.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  </div><div class='footnote' id='footnote-35'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-35'>35)</a></div><div id='footnote-35.sentence-1' class='sentence'>A class
template has the linkage of the innermost enclosing class or namespace in which
it is declared<a class='hidden_link' href='#footnote-35.sentence-1'>.</a></div></div></div></body></html>