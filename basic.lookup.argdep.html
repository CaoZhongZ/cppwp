<!DOCTYPE html><html lang='en'><head><title>[basic.lookup.argdep]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basic concepts <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.4</a> Name lookup <a class='abbr_ref' href='basic.lookup#argdep'>[basic.lookup]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>6.4.2</a> Argument-dependent name lookup <a class='abbr_ref'>[basic.lookup.argdep]</a></h3><span class='indexparent'><a class='index' id=':lookup,argument-dependent'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/basic.tex#L1417'>#</a></div><div id='1.sentence-1' class='sentence'>When the <i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> in
a <a href='expr.call'>function call</a> is an <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>, other namespaces not considered
during the usual <a href='basic.lookup.unqual'>unqualified lookup</a> may be
searched, and in those namespaces, namespace-scope friend function or
function template declarations (<a href='class.friend'>[class.friend]</a>) not otherwise
visible may be found<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>These modifications to the search depend on the types of the arguments
(and for template template arguments, the namespace of the template
argument)<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace N {
  struct S { };
  void f(S);
}

void g() {
  N::S s;
  f(s);     <span class='comment'>// OK: calls <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span>
</span>  (f)(s);   <span class='comment'>// error: <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span> not considered; parentheses prevent argument-dependent lookup
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/basic.tex#L1442'>#</a></div><div id='2.sentence-1' class='sentence'>For each argument type <span class='texttt'>T</span> in the function call, there is a set of
zero or more <a class='hidden_link' href='#def:namespace,associated' id='def:namespace,associated'><i >associated namespaces</i></a>
and a set of zero or more <a class='hidden_link' href='#def:class,associated' id='def:class,associated'><i >associated classes</i></a>
to be considered<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The sets of namespaces and classes are
determined entirely by the types of the function arguments (and the
namespace of any template template argument)<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Typedef names and
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i><span class='textit'>s</span> used to specify the types do not
contribute to this set<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>The sets of namespaces and classes are
determined in the following way:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><div id='2.1.sentence-1' class='sentence'>If <span class='texttt'>T</span> is a fundamental type, its associated sets of
namespaces and classes are both empty<a class='hidden_link' href='#2.1.sentence-1'>.</a></div></li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><div id='2.2.sentence-1' class='sentence'>If <span class='texttt'>T</span> is a class type (including unions), its associated
classes are: the class itself; the class of which it is a member, if
any; and its direct and indirect base classes<a class='hidden_link' href='#2.2.sentence-1'>.</a></div> <div id='2.2.sentence-2' class='sentence'>Its associated namespaces
are the innermost enclosing namespaces of its associated classes<a class='hidden_link' href='#2.2.sentence-2'>.</a></div> <div id='2.2.sentence-3' class='sentence'>Furthermore, if <span class='texttt'>T</span> is a class template specialization, its
associated namespaces and classes also include: the namespaces and
classes associated with the types of the template arguments provided for
template type parameters (excluding template template parameters); the
namespaces of which any template template arguments are members; and the
classes of which any member templates used as template template
arguments are members<a class='hidden_link' href='#2.2.sentence-3'>.</a></div> <div id='2.2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#2.2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.2.sentence-4' class='sentence'>Non-type template arguments do not
contribute to the set of associated namespaces<a class='hidden_link' href='#2.2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div><div id='2.3.sentence-1' class='sentence'>If <span class='texttt'>T</span> is an enumeration type, its associated namespace is
the innermost enclosing namespace of its declaration<a class='hidden_link' href='#2.3.sentence-1'>.</a></div> <div id='2.3.sentence-2' class='sentence'>If it is a class member, its
associated class is the member's class; else it has no associated class<a class='hidden_link' href='#2.3.sentence-2'>.</a></div></li><li id='2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.4'>(2.4)</a></div><div id='2.4.sentence-1' class='sentence'>If <span class='texttt'>T</span> is a pointer to <span class='texttt'>U</span> or an array of <span class='texttt'>U</span>,
its associated namespaces and classes are those associated with
<span class='texttt'>U</span><a class='hidden_link' href='#2.4.sentence-1'>.</a></div></li><li id='2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.5'>(2.5)</a></div><div id='2.5.sentence-1' class='sentence'>If <span class='texttt'>T</span> is a function type, its associated namespaces and
classes are those associated with the function parameter types and those
associated with the return type<a class='hidden_link' href='#2.5.sentence-1'>.</a></div></li><li id='2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.6'>(2.6)</a></div><div id='2.6.sentence-1' class='sentence'>If <span class='texttt'>T</span> is a pointer to a member function of a class
<span class='texttt'>X</span>, its associated namespaces and classes are those associated
with the function parameter types and return type, together with those
associated with <span class='texttt'>X</span><a class='hidden_link' href='#2.6.sentence-1'>.</a></div></li><li id='2.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.7'>(2.7)</a></div><div id='2.7.sentence-1' class='sentence'>If <span class='texttt'>T</span> is a pointer to a data member of class <span class='texttt'>X</span>, its
associated namespaces and classes are those associated with the member
type together with those associated with <span class='texttt'>X</span><a class='hidden_link' href='#2.7.sentence-1'>.</a></div></li></ul></div> <div id='2.sentence-5' class='sentence'>
If an associated namespace is an <a href='namespace.def#def:inline_namespace'>inline namespace</a>, its
enclosing namespace is also included in the set<a class='hidden_link' href='#2.sentence-5'>.</a></div> <div id='2.sentence-6' class='sentence'>If an associated namespace
directly contains inline namespaces, those inline namespaces are also included
in the set<a class='hidden_link' href='#2.sentence-6'>.</a></div> <div id='2.sentence-7' class='sentence'>In addition, if the argument is the name or address of a set of
overloaded functions and/or function templates, its associated classes
and namespaces are the union of those associated with each of the
members of the set, i.e., the classes and namespaces associated with its
parameter types and return type.
Additionally, if the aforementioned set of overloaded functions is named with
a <i ><a href='temp.names#nt:template-id'>template-id</a></i>, its associated classes and namespaces also include
those of its type <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span> and its template
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span><a class='hidden_link' href='#2.sentence-7'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/basic.tex#L1504'>#</a></div><div id='3.sentence-1' class='sentence'>Let <span class='textit'>X</span> be the lookup set produced by <a href='basic.lookup.unqual'>unqualified
lookup</a> and let <span class='textit'>Y</span> be the lookup set produced
by argument dependent lookup (defined as follows)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If <span class='textit'>X</span> contains
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div><div id='3.1.sentence-1' class='sentence'>a declaration of a class member, or</div></li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div><div id='3.2.sentence-1' class='sentence'>a block-scope function declaration that is not a <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>, or</div></li><li id='3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.3'>(3.3)</a></div><div id='3.3.sentence-1' class='sentence'>a declaration that is neither a function nor a function template</div></li></ul>
then <span class='textit'>Y</span> is empty<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>Otherwise <span class='textit'>Y</span> is the set of declarations
found in the namespaces associated with the argument types as described
below<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>The set of declarations found by the lookup of the name is the
union of <span class='textit'>X</span> and <span class='textit'>Y</span><a class='hidden_link' href='#3.sentence-4'>.</a></div> <div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-5' class='sentence'>The namespaces and classes
associated with the argument types can include namespaces and classes
already considered by the ordinary unqualified lookup<a class='hidden_link' href='#3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace NS {
  class T { };
  void f(T);
  void g(T, int);
}
NS::T parm;
void g(NS::T, float);
int main() {
  f(parm);                      <span class='comment'>// OK: calls <span class='tcode_in_codeblock'>NS&#x200b;::&#x200b;f</span>
</span>  extern void g(NS::T, float);
  g(parm, 1);                   <span class='comment'>// OK: calls <span class='tcode_in_codeblock'>g(NS&#x200b;::&#x200b;T, float)</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/basic.tex#L1537'>#</a></div><div id='4.sentence-1' class='sentence'>When considering an associated namespace, the lookup is the same as the
lookup performed when the associated namespace is used as a
qualifier (<a href='namespace.qual'>[namespace.qual]</a>) except that:
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div><div id='4.1.sentence-1' class='sentence'>Any <i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i><span class='textit'>s</span> in the associated namespace are
ignored<a class='hidden_link' href='#4.1.sentence-1'>.</a></div></li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div><div id='4.2.sentence-1' class='sentence'>Any namespace-scope friend functions or friend function templates
declared in associated classes are visible within their respective
namespaces even if they are not visible during an ordinary
lookup (<a href='class.friend'>[class.friend]</a>)<a class='hidden_link' href='#4.2.sentence-1'>.</a></div></li><li id='4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.3'>(4.3)</a></div><div id='4.3.sentence-1' class='sentence'>All names except those of (possibly overloaded) functions and
function templates are ignored<a class='hidden_link' href='#4.3.sentence-1'>.</a></div></li></ul></div></div></div></body></html>