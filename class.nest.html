<!DOCTYPE html><html lang='en'><head><title>[class.nest]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>12</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>12.2</a> Class members <a class='abbr_ref' href='class.mem#class.nest'>[class.mem]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>12.2.5</a> Nested class declarations <a class='abbr_ref'>[class.nest]</a></h3><p ><span class='indexparent'><a class='index' id=':definition,nested_class'></a></span></p><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/classes.tex#L1389'>#</a></div><p >A class can be declared within another class. A class declared within
another is called a <a class='hidden_link' href='#def:nested_class' id='def:nested_class'><i >nested</i></a> class. The name of a nested class
is local to its enclosing class.
<span class='indexparent'><a class='index' id=':nested_class,scope_of'></a></span>The nested class is in the scope of its enclosing class.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
See <a href='expr.prim'>[expr.prim]</a> for restrictions on the use of non-static data
members and non-static member functions.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p><p ><span class='indexparent'><a class='index' id=':example,nested_class'></a></span>[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
int x;
int y;

struct enclose {
  int x;
  static int s;

  struct inner {
    void f(int i) {
      int a = sizeof(x);        <span class='comment'>// OK: operand of sizeof is an unevaluated operand
</span>      x = i;                    <span class='comment'>// error: assign to <span class='tcode_in_codeblock'>enclose&#x200b;::&#x200b;x</span>
</span>      s = i;                    <span class='comment'>// OK: assign to <span class='tcode_in_codeblock'>enclose&#x200b;::&#x200b;s</span>
</span>      ::x = i;                  <span class='comment'>// OK: assign to global <span class='tcode_in_codeblock'>x</span>
</span>      y = i;                    <span class='comment'>// OK: assign to global <span class='tcode_in_codeblock'>y</span>
</span>    }
    void g(enclose* p, int i) {
      p-&gt;x = i;                 <span class='comment'>// OK: assign to <span class='tcode_in_codeblock'>enclose&#x200b;::&#x200b;x</span>
</span>    }
  };
};

inner* p = 0;                   <span class='comment'>// error: <span class='tcode_in_codeblock'>inner</span> not in scope
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/classes.tex#L1429'>#</a></div><p >Member functions and static data members of a nested class can be
defined in a namespace scope enclosing the definition of their class.
<span class='indexparent'><a class='index' id=':example,nested_class_definition'></a></span>[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
struct enclose {
  struct inner {
    static int x;
    void f(int i);
  };
};

int enclose::inner::x = 1;

void enclose::inner::f(int i) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/classes.tex#L1449'>#</a></div><p >If class <span class='texttt'>X</span> is defined in a namespace scope, a nested class
<span class='texttt'>Y</span> may be declared in class <span class='texttt'>X</span> and later defined in the
definition of class <span class='texttt'>X</span> or be later defined in a namespace scope
enclosing the definition of class <span class='texttt'>X</span>.
<span class='indexparent'><a class='index' id=':example,nested_class_forward_declaration'></a></span>[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
class E {
  class I1;                     <span class='comment'>// forward declaration of nested class
</span>  class I2;
  class I1 { };                 <span class='comment'>// definition of nested class
</span>};
class E::I2 { };                <span class='comment'>// definition of nested class
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/classes.tex#L1467'>#</a></div><p ><span class='indexparent'><a class='index' id=':friend_function,nested_class'></a></span>Like a member function, a <a href='class.friend'>friend function</a> defined
within a nested class is in the lexical scope of that class; it obeys
the same rules for name binding as a <a href='class.static'>static member function</a>
of that class, but it has no special access rights to
members of an enclosing class.</p></div></div></body></html>