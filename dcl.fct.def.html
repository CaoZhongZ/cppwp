<!DOCTYPE html><html lang='en'><head><title>[dcl.fct.def]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>11</a> Declarators <a class='abbr_ref' href='./#dcl.decl'>[dcl.decl]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>11.4</a> Function definitions <a class='abbr_ref'>[dcl.fct.def]</a></h2><span class='indexparent'><a class='index' id=':definition,function'></a></span><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:103pt'>11.4.1</a> In general <a class='abbr_ref' href='dcl.fct.def.general'>[dcl.fct.def.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L1940'>#</a></div><div id='general-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':body,function'></a></span>Function definitions have the form</div><span class='indexparent'><a class='index' id=':function-definition'></a></span><pre class='bnf'><a class='nontermdef' id='nt:function-definition'>function-definition:</a>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.decl#nt:declarator'>declarator</a></i> <i ><a href='class.mem#nt:virt-specifier-seq'>virt-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.fct.def.general#nt:function-body'>function-body</a></i>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.decl#nt:declarator'>declarator</a></i> <i ><a href='temp#nt:requires-clause'>requires-clause</a></i> <i ><a href='dcl.fct.def.general#nt:function-body'>function-body</a></i>
</pre><pre class='bnf'><a class='nontermdef' id='nt:function-body'>function-body:</a>
&#9;<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i>
&#9;<i ><a href='except#nt:function-try-block'>function-try-block</a></i>
&#9;<span class='terminal'>= default ;</span>
&#9;<span class='terminal'>= delete ;</span>
</pre><div id='general-1.sentence-2' class='sentence'>Any informal reference to the body of a function should be interpreted as a reference to
the non-terminal <i ><a href='dcl.fct.def.general#nt:function-body'>function-body</a></i><a class='hidden_link' href='#general-1.sentence-2'>.</a></div> <div id='general-1.sentence-3' class='sentence'>The optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> in a <i ><a href='dcl.fct.def.general#nt:function-definition'>function-definition</a></i>
appertains to the function<a class='hidden_link' href='#general-1.sentence-3'>.</a></div> <div id='general-1.sentence-4' class='sentence'>A <i ><a href='class.mem#nt:virt-specifier-seq'>virt-specifier-seq</a></i> can be part of a <i ><a href='dcl.fct.def.general#nt:function-definition'>function-definition</a></i>
only if it is a <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i><a class='hidden_link' href='#general-1.sentence-4'>.</a></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L1967'>#</a></div><div id='general-2.sentence-1' class='sentence'>In a <i ><a href='dcl.fct.def.general#nt:function-definition'>function-definition</a></i>,
either <span class='texttt'>void</span> <i ><a href='dcl.decl#nt:declarator'>declarator</a></i> <span class='texttt'>;</span>
or <i ><a href='dcl.decl#nt:declarator'>declarator</a></i> <span class='texttt'>;</span>
shall be a well-formed function declaration
as described in <a href='dcl.fct'>[dcl.fct]</a><a class='hidden_link' href='#general-2.sentence-1'>.</a></div> <div id='general-2.sentence-2' class='sentence'>A function shall be defined only in namespace or class scope<a class='hidden_link' href='#general-2.sentence-2'>.</a></div></div><div class='para' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L1975'>#</a></div><div id='general-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#general-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='general-3.sentence-1' class='sentence'>A simple example of a complete function definition is
<span class='indexparent'><a class='index' id=':example,function_definition'></a></span><pre class='codeblock'>
int max(int a, int b, int c) {
  int m = (a &gt; b) ? a : b;
  return (m &gt; c) ? m : c;
}</pre></div><div id='general-3.sentence-2' class='sentence'>Here
<span class='texttt'>int</span>
is the
<i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i>;
<span class='texttt'>max(int</span>
<span class='texttt'>a,</span>
<span class='texttt'>int</span>
<span class='texttt'>b,</span>
<span class='texttt'>int</span>
<span class='texttt'>c)</span>
is the
<i ><a href='dcl.decl#nt:declarator'>declarator</a></i>;
<span class='texttt'>{ /* ...&nbsp;*/ }</span>
is the
<i ><a href='dcl.fct.def.general#nt:function-body'>function-body</a></i><a class='hidden_link' href='#general-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='general-4'><div class='marginalizedparent'><a class='marginalized' href='#general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2003'>#</a></div><div id='general-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initializer,base_class'></a></span><span class='indexparent'><a class='index' id=':initializer,member'></a></span><span class='indexparent'><a class='index' id=':definition,constructor'></a></span>A
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>
is used only in a constructor; see <a href='class.ctor'>[class.ctor]</a> and <a href='class.init'>[class.init]</a><a class='hidden_link' href='#general-4.sentence-1'>.</a></div></div><div class='para' id='general-5'><div class='marginalizedparent'><a class='marginalized' href='#general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2011'>#</a></div><div id='general-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#general-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='general-5.sentence-1' class='sentence'>A <i ><a href='dcl.decl#nt:cv-qualifier-seq'>cv-qualifier-seq</a></i> affects the type of <span class='texttt'>this</span>
in the body of a member function; see <a href='dcl.ref'>[dcl.ref]</a><a class='hidden_link' href='#general-5.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='general-6'><div class='marginalizedparent'><a class='marginalized' href='#general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2017'>#</a></div><div id='general-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#general-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='general-6.sentence-1' class='sentence'>Unused parameters need not be named<a class='hidden_link' href='#general-6.sentence-1'>.</a></div> <div id='general-6.sentence-2' class='sentence'>For example,
<span class='indexparent'><a class='index' id=':example,unnamed_parameter'></a></span><pre class='codeblock'>
void print(int a, int) {
  std::printf("a = %d\n",a);
}</pre></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='general-7'><div class='marginalizedparent'><a class='marginalized' href='#general-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2029'>#</a></div><div id='general-7.sentence-1' class='sentence'>In the <i ><a href='dcl.fct.def.general#nt:function-body'>function-body</a></i>, a
<span class='textit'>function-local predefined variable</span> denotes a block-scope object of static
storage duration that is implicitly defined (see <a href='basic.scope.block'>[basic.scope.block]</a>)<a class='hidden_link' href='#general-7.sentence-1'>.</a></div></div><div class='para' id='general-8'><div class='marginalizedparent'><a class='marginalized' href='#general-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2034'>#</a></div><div id='general-8.sentence-1' class='sentence'>The function-local predefined variable <span id=':__func__'><span class='texttt'>_&shy;_&shy;func_&shy;_&shy;</span></span> is
defined as if a definition of the form
<pre class='codeblock'>
static const char __func__[] = "<span class='textit'>function-name</span>";</pre>
had been provided, where <span class='textit'>function-name</span> is an <span class='indexparent'><a class='index' id=':string_resulting_from___func__'></a></span>implementation-defined string<a class='hidden_link' href='#general-8.sentence-1'>.</a></div> <div id='general-8.sentence-2' class='sentence'>It is unspecified whether such a variable has an address
distinct from that of any other object in the program<a class='hidden_link' href='#general-8.sentence-2'>.</a><a class='footnotenum' href='#footnote-103'>103</a></div> <div id='general-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#general-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  S() : s(__func__) { }             <span class='comment'>// OK
</span>  const char* s;
};
void f(const char* s = __func__);   <span class='comment'>// error: <span class='tcode_in_codeblock'>_&shy;_&shy;func_&shy;_&shy;</span> is undeclared
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-103'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-103'>103)</a></div><div id='footnote-103.sentence-1' class='sentence'>Implementations are
permitted to provide additional predefined variables with names that are
<a href='lex.name#:reserved_identifier'>reserved to the implementation</a><a class='hidden_link' href='#footnote-103.sentence-1'>.</a></div> <div id='footnote-103.sentence-2' class='sentence'>If a predefined variable is not
<a href='basic.def.odr'>odr-used</a>, its string value need not be present in the program image<a class='hidden_link' href='#footnote-103.sentence-2'>.</a></div></div></div><div id='default' class='section'><h3 ><a class='secnum' href='#default' style='min-width:103pt'>11.4.2</a> Explicitly-defaulted functions <a class='abbr_ref' href='dcl.fct.def.default'>[dcl.fct.def.default]</a></h3><span class='indexparent'><a class='index' id=':definition,function,explicitly-defaulted'></a></span><div class='para' id='default-1'><div class='marginalizedparent'><a class='marginalized' href='#default-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2060'>#</a></div><div id='default-1.sentence-1' class='sentence'>A function definition whose
<i ><a href='dcl.fct.def.general#nt:function-body'>function-body</a></i>
is of the form
<span class='texttt'>= default ;</span>
is called an <span class='textit'>explicitly-defaulted</span> definition<a class='hidden_link' href='#default-1.sentence-1'>.</a></div> <div id='default-1.sentence-2' class='sentence'>A function that is explicitly defaulted shall
<ul class='itemize'><li id='default-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default-1.1'>(1.1)</a></div><div id='default-1.1.sentence-1' class='sentence'>be a special member function,</div></li><li id='default-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default-1.2'>(1.2)</a></div><div id='default-1.2.sentence-1' class='sentence'>have the same declared function type (except for possibly differing
<i ><a href='dcl.decl#nt:ref-qualifier'>ref-qualifier</a></i><span class='textit'>s</span> and except that in the case of a copy constructor or
copy assignment operator, the parameter type may be “reference to non-const <span class='texttt'>T</span>”,
where <span class='texttt'>T</span> is the name of the member function's class) as if it had been implicitly
declared, and</div></li><li id='default-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default-1.3'>(1.3)</a></div><div id='default-1.3.sentence-1' class='sentence'>not have default arguments<a class='hidden_link' href='#default-1.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='default-2'><div class='marginalizedparent'><a class='marginalized' href='#default-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2079'>#</a></div><div id='default-2.sentence-1' class='sentence'>An explicitly-defaulted function that is not defined as deleted may be declared
<span class='texttt'>constexpr</span> only if it would have been implicitly declared as
<span class='texttt'>constexpr</span><a class='hidden_link' href='#default-2.sentence-1'>.</a></div> <div id='default-2.sentence-2' class='sentence'>If
a function is explicitly defaulted on its first declaration,
it is implicitly considered to be <span class='texttt'>constexpr</span> if the implicit
declaration would be<a class='hidden_link' href='#default-2.sentence-2'>.</a></div></div><div class='para' id='default-3'><div class='marginalizedparent'><a class='marginalized' href='#default-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2087'>#</a></div><div id='default-3.sentence-1' class='sentence'>If a function that is explicitly defaulted is declared with a
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> that does not produce
the same exception specification
as the implicit declaration (<a href='except.spec'>[except.spec]</a>), then
<ul class='itemize'><li id='default-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default-3.1'>(3.1)</a></div><div id='default-3.1.sentence-1' class='sentence'>if the function is explicitly defaulted on its first declaration, it is defined as deleted;</div></li><li id='default-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default-3.2'>(3.2)</a></div><div id='default-3.2.sentence-1' class='sentence'>otherwise, the program is ill-formed<a class='hidden_link' href='#default-3.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='default-4'><div class='marginalizedparent'><a class='marginalized' href='#default-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2097'>#</a></div><div id='default-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#default-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  constexpr S() = default;              <span class='comment'>// ill-formed: implicit <span class='tcode_in_codeblock'>S()</span> is not <span class='tcode_in_codeblock'>constexpr</span>
</span>  S(int a = 0) = default;               <span class='comment'>// ill-formed: default argument
</span>  void operator=(const S&amp;) = default;   <span class='comment'>// ill-formed: non-matching return type
</span>  ~S() noexcept(false) = default;       <span class='comment'>// deleted: exception specification does not match
</span>private:
  int i;
  S(S&amp;);                                <span class='comment'>// OK: private copy constructor
</span>};
S::S(S&amp;) = default;                     <span class='comment'>// OK: defines copy constructor
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='default-5'><div class='marginalizedparent'><a class='marginalized' href='#default-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2113'>#</a></div><div id='default-5.sentence-1' class='sentence'>Explicitly-defaulted functions and implicitly-declared functions are collectively
called <a class='hidden_link' href='#def:defaulted' id='def:defaulted'><i >defaulted</i></a> functions, and the implementation
shall provide implicit definitions
for them (<a href='class.ctor'>[class.ctor]</a>
<a href='class.dtor'>[class.dtor]</a>, <a href='class.copy'>[class.copy]</a>), which might mean defining them as deleted<a class='hidden_link' href='#default-5.sentence-1'>.</a></div> <div id='default-5.sentence-2' class='sentence'>A function is
<a class='hidden_link' href='#def:user-provided' id='def:user-provided'><i >user-provided</i></a> if it is user-declared and not explicitly
defaulted or deleted on its first declaration<a class='hidden_link' href='#default-5.sentence-2'>.</a></div> <div id='default-5.sentence-3' class='sentence'>A user-provided explicitly-defaulted function
(i.e., explicitly defaulted after its first declaration)
is defined at the point where it is explicitly defaulted; if such a function is implicitly
defined as deleted, the program is ill-formed.
<div id='default-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#default-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='default-5.sentence-4' class='sentence'>Declaring a function as defaulted after its first declaration can provide
efficient execution and concise
definition while enabling a stable binary interface to an evolving code
base<a class='hidden_link' href='#default-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='default-6'><div class='marginalizedparent'><a class='marginalized' href='#default-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2131'>#</a></div><div id='default-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#default-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct trivial {
  trivial() = default;
  trivial(const trivial&amp;) = default;
  trivial(trivial&amp;&amp;) = default;
  trivial&amp; operator=(const trivial&amp;) = default;
  trivial&amp; operator=(trivial&amp;&amp;) = default;
  ~trivial() = default;
};

struct nontrivial1 {
  nontrivial1();
};
nontrivial1::nontrivial1() = default;   <span class='comment'>// not first declaration
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='delete' class='section'><h3 ><a class='secnum' href='#delete' style='min-width:103pt'>11.4.3</a> Deleted definitions <a class='abbr_ref' href='dcl.fct.def.delete'>[dcl.fct.def.delete]</a></h3><span class='indexparent'><a class='index' id=':definition,function,deleted'></a></span><div class='para' id='delete-1'><div class='marginalizedparent'><a class='marginalized' href='#delete-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2154'>#</a></div><div id='delete-1.sentence-1' class='sentence'>A function definition whose
<i ><a href='dcl.fct.def.general#nt:function-body'>function-body</a></i>
is of the form
<span class='texttt'>= delete ;</span>
is called a <a class='hidden_link' href='#def:deleted_definition' id='def:deleted_definition'><i>deleted definition</i></a><a class='hidden_link' href='#delete-1.sentence-1'>.</a></div> <div id='delete-1.sentence-2' class='sentence'>A function with a
deleted definition is also called a <a class='hidden_link' href='#def:deleted_function' id='def:deleted_function'><i>deleted function</i></a><a class='hidden_link' href='#delete-1.sentence-2'>.</a></div></div><div class='para' id='delete-2'><div class='marginalizedparent'><a class='marginalized' href='#delete-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2162'>#</a></div><div id='delete-2.sentence-1' class='sentence'>A program that refers to a deleted function implicitly or explicitly, other
than to declare it, is ill-formed<a class='hidden_link' href='#delete-2.sentence-1'>.</a></div> <div id='delete-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#delete-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='delete-2.sentence-2' class='sentence'>This includes calling the function
implicitly or explicitly and forming a pointer or pointer-to-member to the
function<a class='hidden_link' href='#delete-2.sentence-2'>.</a></div> <div id='delete-2.sentence-3' class='sentence'>It applies even for references in expressions that are not
potentially-evaluated<a class='hidden_link' href='#delete-2.sentence-3'>.</a></div> <div id='delete-2.sentence-4' class='sentence'>If a function is overloaded, it is referenced only if the
function is selected by overload resolution<a class='hidden_link' href='#delete-2.sentence-4'>.</a></div> <div id='delete-2.sentence-5' class='sentence'>The implicit
<a href='basic.def.odr'>odr-use</a> of a virtual function does not, by itself,
constitute a reference<a class='hidden_link' href='#delete-2.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='delete-3'><div class='marginalizedparent'><a class='marginalized' href='#delete-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2172'>#</a></div><div id='delete-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#delete-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='delete-3.sentence-1' class='sentence'>One can enforce non-default-initialization and non-integral
initialization with
<pre class='codeblock'>
struct onlydouble {
  onlydouble() = delete;                <span class='comment'>// OK, but redundant
</span>  onlydouble(std::intmax_t) = delete;
  onlydouble(double);
};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='delete-3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#delete-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='delete-3.sentence-2' class='sentence'>One can prevent use of a
class in certain <i ><a href='expr.new#nt:new-expression'>new-expression</a></i><span class='textit'>s</span> by using deleted definitions
of a user-declared <span class='texttt'>operator new</span> for that class<a class='hidden_link' href='#delete-3.sentence-2'>.</a></div> <pre class='codeblock'>
struct sometype {
  void* operator new(std::size_t) = delete;
  void* operator new[](std::size_t) = delete;
};
sometype* p = new sometype;     <span class='comment'>// error, deleted class <span class='tcode_in_codeblock'>operator new</span>
</span>sometype* q = new sometype[3];  <span class='comment'>// error, deleted class <span class='tcode_in_codeblock'>operator new[]</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='delete-3.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#delete-3.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='delete-3.sentence-3' class='sentence'>One can make a class uncopyable, i.e. move-only, by using deleted
definitions of the copy constructor and copy assignment operator, and then
providing defaulted definitions of the move constructor and move assignment operator.
<pre class='codeblock'>
struct moveonly {
  moveonly() = default;
  moveonly(const moveonly&amp;) = delete;
  moveonly(moveonly&amp;&amp;) = default;
  moveonly&amp; operator=(const moveonly&amp;) = delete;
  moveonly&amp; operator=(moveonly&amp;&amp;) = default;
  ~moveonly() = default;
};
moveonly* p;
moveonly q(*p);                 <span class='comment'>// error, deleted copy constructor
</span></pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='delete-4'><div class='marginalizedparent'><a class='marginalized' href='#delete-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/declarators.tex#L2216'>#</a></div><div id='delete-4.sentence-1' class='sentence'>A deleted function is implicitly an <a href='dcl.inline#def:inline_function'>inline function</a><a class='hidden_link' href='#delete-4.sentence-1'>.</a></div> <div id='delete-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#delete-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='delete-4.sentence-4' class='sentence'>The
<a href='basic.def.odr'>one-definition rule</a> applies to deleted definitions<a class='hidden_link' href='#delete-4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='delete-4.sentence-2' class='sentence'>
A deleted definition of a function shall be the first declaration of the function or,
for an explicit specialization of a function template, the first declaration of that
specialization<a class='hidden_link' href='#delete-4.sentence-2'>.</a></div> <div id='delete-4.sentence-3' class='sentence'>An implicitly declared allocation or deallocation function (<a href='basic.stc.dynamic'>[basic.stc.dynamic]</a>)
shall not be defined as deleted<a class='hidden_link' href='#delete-4.sentence-3'>.</a></div> <div id='delete-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#delete-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct sometype {
  sometype();
};
sometype::sometype() = delete;  <span class='comment'>// ill-formed; not first declaration
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  </div></div></div></body></html>