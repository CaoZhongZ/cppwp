<!DOCTYPE html><html lang='en'><head><title>[locale.nm.put]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>28</a> Localization library <a class='abbr_ref' href='./#localization'>[localization]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>28.4</a> Standard <span class='texttt'>locale</span> categories <a class='abbr_ref' href='locale.categories#locale.nm.put'>[locale.categories]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>28.4.2</a> The numeric category <a class='abbr_ref' href='category.numeric#locale.nm.put'>[category.numeric]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>28.4.2.2</a> Class template <span class='texttt'>num_&shy;put</span> <a class='abbr_ref'>[locale.nm.put]</a></h4><span class='indexparent'><a class='index' id='lib:num_put'></a></span><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> charT, <span class='keyword'>class</span> OutputIterator <span class='operator'>=</span> ostreambuf_iterator<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
    <span class='keyword'>class</span> num_put <span class='operator'>:</span> <span class='keyword'>public</span> locale<span class='operator'>:</span><span class='operator'>:</span>facet <span class='curlybracket'>{</span>
    <span class='keyword'>public</span><span class='operator'>:</span>
      <span class='keyword'>using</span> char_type <span class='operator'>=</span> charT;
      <span class='keyword'>using</span> iter_type <span class='operator'>=</span> OutputIterator;

      <span class='keyword'>explicit</span> num_put<span class='parenthesis'>(</span>size_t refs <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;

      iter_type put<span class='parenthesis'>(</span>iter_type s, ios_base<span class='operator'>&amp;</span> f, char_type fill, <span class='keyword'>bool</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      iter_type put<span class='parenthesis'>(</span>iter_type s, ios_base<span class='operator'>&amp;</span> f, char_type fill, <span class='keyword'>long</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      iter_type put<span class='parenthesis'>(</span>iter_type s, ios_base<span class='operator'>&amp;</span> f, char_type fill, <span class='keyword'>long</span> <span class='keyword'>long</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      iter_type put<span class='parenthesis'>(</span>iter_type s, ios_base<span class='operator'>&amp;</span> f, char_type fill, <span class='keyword'>unsigned</span> <span class='keyword'>long</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      iter_type put<span class='parenthesis'>(</span>iter_type s, ios_base<span class='operator'>&amp;</span> f, char_type fill, <span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      iter_type put<span class='parenthesis'>(</span>iter_type s, ios_base<span class='operator'>&amp;</span> f, char_type fill, <span class='keyword'>double</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      iter_type put<span class='parenthesis'>(</span>iter_type s, ios_base<span class='operator'>&amp;</span> f, char_type fill, <span class='keyword'>long</span> <span class='keyword'>double</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      iter_type put<span class='parenthesis'>(</span>iter_type s, ios_base<span class='operator'>&amp;</span> f, char_type fill, <span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;

      <span class='keyword'>static</span> locale<span class='operator'>:</span><span class='operator'>:</span>id id;

    <span class='keyword'>protected</span><span class='operator'>:</span>
      <span class='operator'>~</span>num_put<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
      <span class='keyword'>virtual</span> iter_type do_put<span class='parenthesis'>(</span>iter_type, ios_base<span class='operator'>&amp;</span>, char_type fill, <span class='keyword'>bool</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      <span class='keyword'>virtual</span> iter_type do_put<span class='parenthesis'>(</span>iter_type, ios_base<span class='operator'>&amp;</span>, char_type fill, <span class='keyword'>long</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      <span class='keyword'>virtual</span> iter_type do_put<span class='parenthesis'>(</span>iter_type, ios_base<span class='operator'>&amp;</span>, char_type fill, <span class='keyword'>long</span> <span class='keyword'>long</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      <span class='keyword'>virtual</span> iter_type do_put<span class='parenthesis'>(</span>iter_type, ios_base<span class='operator'>&amp;</span>, char_type fill, <span class='keyword'>unsigned</span> <span class='keyword'>long</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      <span class='keyword'>virtual</span> iter_type do_put<span class='parenthesis'>(</span>iter_type, ios_base<span class='operator'>&amp;</span>, char_type fill, <span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      <span class='keyword'>virtual</span> iter_type do_put<span class='parenthesis'>(</span>iter_type, ios_base<span class='operator'>&amp;</span>, char_type fill, <span class='keyword'>double</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      <span class='keyword'>virtual</span> iter_type do_put<span class='parenthesis'>(</span>iter_type, ios_base<span class='operator'>&amp;</span>, char_type fill, <span class='keyword'>long</span> <span class='keyword'>double</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
      <span class='keyword'>virtual</span> iter_type do_put<span class='parenthesis'>(</span>iter_type, ios_base<span class='operator'>&amp;</span>, char_type fill, <span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/871b9e1d91ad939afe46b66e6139a527e773200e/source/locales.tex#L2793'>#</a></div><div id='1.sentence-1' class='sentence'>The facet
<span class='texttt'>num_&shy;put</span>
is used to format numeric values to a character sequence such as an ostream<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div id='facet.num.put.members' class='section'><h4 ><a class='secnum' href='#facet.num.put.members' style='min-width:133pt'>28.4.2.2.1</a> Members <a class='abbr_ref' href='facet.num.put.members'>[facet.num.put.members]</a></h4><span class='indexparent'><a class='index' id='lib:num_put,put'></a></span><span class='indexparent'><a class='index' id='lib:put,num_put'></a></span><div class='itemdecl' id='facet.num.put.members-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#facet.num.put.members-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>iter_type put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>bool</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>long</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>long</span> <span class='keyword'>long</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>unsigned</span> <span class='keyword'>long</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>double</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>long</span> <span class='keyword'>double</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div><div class='itemdescr'></div><div class='para' id='facet.num.put.members-1'><div class='marginalizedparent'><a class='marginalized' href='#facet.num.put.members-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/871b9e1d91ad939afe46b66e6139a527e773200e/source/locales.tex#L2813'>#</a></div><div id='facet.num.put.members-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>do_&shy;put<span class='parenthesis'>(</span>out, str, fill, val<span class='parenthesis'>)</span></span><a class='hidden_link' href='#facet.num.put.members-1.sentence-1'>.</a></div></div></div></div><div id='facet.num.put.virtuals' class='section'><h4 ><a class='secnum' href='#facet.num.put.virtuals' style='min-width:133pt'>28.4.2.2.2</a> Virtual functions <a class='abbr_ref' href='facet.num.put.virtuals'>[facet.num.put.virtuals]</a></h4><span class='indexparent'><a class='index' id='lib:num_put,do_put'></a></span><span class='indexparent'><a class='index' id='lib:do_put,num_put'></a></span><div class='itemdecl' id='facet.num.put.virtuals-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#facet.num.put.virtuals-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>iter_type do_put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>long</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type do_put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>long</span> <span class='keyword'>long</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type do_put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>unsigned</span> <span class='keyword'>long</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type do_put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type do_put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>double</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type do_put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>long</span> <span class='keyword'>double</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
iter_type do_put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div><div class='itemdescr'></div><div class='para' id='facet.num.put.virtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#facet.num.put.virtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/871b9e1d91ad939afe46b66e6139a527e773200e/source/locales.tex#L2832'>#</a></div><div id='facet.num.put.virtuals-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Writes characters to the sequence <span class='texttt'>out</span>,
formatting <span class='texttt'>val</span> as desired<a class='hidden_link' href='#facet.num.put.virtuals-1.sentence-1'>.</a></div> <div id='facet.num.put.virtuals-1.sentence-2' class='sentence'>In the following description,
<span class='texttt'>loc</span> names a local variable initialized as
<pre class='codeblock'>
locale loc <span class='operator'>=</span> str<span class='operator'>.</span>getloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</pre></div></div></div><div class='para' id='facet.num.put.virtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#facet.num.put.virtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/871b9e1d91ad939afe46b66e6139a527e773200e/source/locales.tex#L2842'>#</a></div><div id='facet.num.put.virtuals-2.sentence-1' class='sentence'>The details of this operation occur in several stages:</div><div id='facet.num.put.virtuals-2.sentence-2' class='sentence'><ul class='itemize'><li id='facet.num.put.virtuals-2.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#facet.num.put.virtuals-2.1'>(2.1)</a></div>Stage 1:
Determine a printf conversion specifier <span class='texttt'>spec</span> and
determine the characters that would be printed by
<span class='texttt'>printf</span> (<a href='c.files'>[c.files]</a>)
given this conversion specifier for
<pre class='codeblock'>
printf<span class='parenthesis'>(</span>spec, val<span class='parenthesis'>)</span>
</pre>
assuming that the current locale is
the <span class='texttt'><span class='literal'>"C"</span></span> locale.</li><li id='facet.num.put.virtuals-2.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#facet.num.put.virtuals-2.2'>(2.2)</a></div>Stage 2:
Adjust the representation by converting each
<span class='texttt'><span class='keyword'>char</span></span>
determined by stage 1 to a
<span class='texttt'>charT</span>
using a conversion and values returned by members of
<span class='texttt'>use_&shy;facet<span class='anglebracket'>&lt;</span>numpunct<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>loc<span class='parenthesis'>)</span></span></li><li id='facet.num.put.virtuals-2.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#facet.num.put.virtuals-2.3'>(2.3)</a></div>Stage 3:
Determine where padding is required.</li><li id='facet.num.put.virtuals-2.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#facet.num.put.virtuals-2.4'>(2.4)</a></div>Stage 4:
Insert the sequence into the <span class='texttt'>out</span>.</li></ul></div></div></div><div class='para' id='facet.num.put.virtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#facet.num.put.virtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/871b9e1d91ad939afe46b66e6139a527e773200e/source/locales.tex#L2873'>#</a></div><div id='facet.num.put.virtuals-3.sentence-1' class='sentence'>Detailed descriptions of each stage follow<a class='hidden_link' href='#facet.num.put.virtuals-3.sentence-1'>.</a></div></div></div><div class='para' id='facet.num.put.virtuals-4'><div class='marginalizedparent'><a class='marginalized' href='#facet.num.put.virtuals-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/871b9e1d91ad939afe46b66e6139a527e773200e/source/locales.tex#L2876'>#</a></div><div id='facet.num.put.virtuals-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>out</span><a class='hidden_link' href='#facet.num.put.virtuals-4.sentence-1'>.</a></div></div></div><div class='para' id='facet.num.put.virtuals-5'><div class='marginalizedparent'><a class='marginalized' href='#facet.num.put.virtuals-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/871b9e1d91ad939afe46b66e6139a527e773200e/source/locales.tex#L2880'>#</a></div><div id='facet.num.put.virtuals-5.sentence-1' class='sentence'><ul class='description'><li id='facet.num.put.virtuals-5.1'><a href='#facet.num.put.virtuals-5.1'>Stage 1:</a> The first action of stage 1 is to determine a conversion specifier. The tables that describe this determination use the following local variables<pre class='codeblock'>
fmtflags flags <span class='operator'>=</span> str<span class='operator'>.</span>flags<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
fmtflags basefield <span class='operator'>=</span>  <span class='parenthesis'>(</span>flags <span class='operator'>&amp;</span> <span class='parenthesis'>(</span>ios_base<span class='operator'>:</span><span class='operator'>:</span>basefield<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
fmtflags uppercase <span class='operator'>=</span>  <span class='parenthesis'>(</span>flags <span class='operator'>&amp;</span> <span class='parenthesis'>(</span>ios_base<span class='operator'>:</span><span class='operator'>:</span>uppercase<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
fmtflags floatfield <span class='operator'>=</span> <span class='parenthesis'>(</span>flags <span class='operator'>&amp;</span> <span class='parenthesis'>(</span>ios_base<span class='operator'>:</span><span class='operator'>:</span>floatfield<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
fmtflags showpos <span class='operator'>=</span>    <span class='parenthesis'>(</span>flags <span class='operator'>&amp;</span> <span class='parenthesis'>(</span>ios_base<span class='operator'>:</span><span class='operator'>:</span>showpos<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
fmtflags showbase <span class='operator'>=</span>   <span class='parenthesis'>(</span>flags <span class='operator'>&amp;</span> <span class='parenthesis'>(</span>ios_base<span class='operator'>:</span><span class='operator'>:</span>showbase<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
fmtflags showpoint <span class='operator'>=</span>  <span class='parenthesis'>(</span>flags <span class='operator'>&amp;</span> <span class='parenthesis'>(</span>ios_base<span class='operator'>:</span><span class='operator'>:</span>showpoint<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre>All tables used in describing stage 1 are ordered. That is, the first line whose condition is true applies. A line without a condition is the default behavior when none of the earlier
lines apply.<div style='height:0.6em;display:block'></div>For conversion from an integral type other than a character type, the
function determines the integral conversion specifier as indicated in
Table <a href='#tab:localization.integer.conversions.out'>96</a>.<div class='numberedTable' id='tab:localization.integer.conversions.out'>Table <a href='#tab:localization.integer.conversions.out'>96</a> â€” Integer conversions<br><table ><tr class='rowsep'><td class='center'><b>State</b></td><td class='center'><span class='texttt'>stdio</span> equivalent</td></tr><tr class='capsep'><td class='left'><span class='texttt'>basefield <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>oct</span></td><td class='center'><span class='texttt'><span class='operator'>%</span>o</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'><span class='parenthesis'>(</span>basefield <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>hex<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>uppercase</span></td><td class='center'><span class='texttt'><span class='operator'>%</span>x</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'><span class='parenthesis'>(</span>basefield <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>hex<span class='parenthesis'>)</span></span></td><td class='center'><span class='texttt'><span class='operator'>%</span>X</span></td></tr><tr class='rowsep'><td class='left'>for a <span class='texttt'><span class='keyword'>signed</span></span> integral type</td><td class='center'><span class='texttt'><span class='operator'>%</span>d</span></td></tr><tr class='rowsep'><td class='left'>for an <span class='texttt'><span class='keyword'>unsigned</span></span> integral type</td><td class='center'><span class='texttt'><span class='operator'>%</span>u</span></td></tr></table></div>For conversion from a floating-point type, the function determines
the floating-point conversion specifier as indicated in Table <a href='#tab:localization.fp.conversions.out'>97</a>.<div class='numberedTable' id='tab:localization.fp.conversions.out'>Table <a href='#tab:localization.fp.conversions.out'>97</a> â€” Floating-point conversions<br><table ><tr class='rowsep'><td class='center'><b>State</b></td><td class='center'><span class='texttt'>stdio</span> equivalent</td></tr><tr class='capsep'><td class='left'><span class='texttt'>floatfield <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>fixed</span></td><td class='center'><span class='texttt'><span class='operator'>%</span>f</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'>floatfield <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>scientific <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>uppercase</span></td><td class='center'><span class='texttt'><span class='operator'>%</span>e</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'>floatfield <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>scientific</span></td><td class='center'><span class='texttt'><span class='operator'>%</span>E</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'>floatfield <span class='operator'>=</span><span class='operator'>=</span> <span class='parenthesis'>(</span>ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>fixed <span class='operator'>|</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>scientific<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>uppercase</span></td><td class='center'><span class='texttt'><span class='operator'>%</span>a</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'>floatfield <span class='operator'>=</span><span class='operator'>=</span> <span class='parenthesis'>(</span>ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>fixed <span class='operator'>|</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>scientific<span class='parenthesis'>)</span></span></td><td class='center'><span class='texttt'><span class='operator'>%</span>A</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'><span class='operator'>!</span>uppercase</span></td><td class='center'><span class='texttt'><span class='operator'>%</span>g</span></td></tr><tr class='rowsep'><td class='left'><span class='textit'>otherwise</span></td><td class='center'><span class='texttt'><span class='operator'>%</span>G</span></td></tr></table></div>For conversions from an integral or floating-point
type a length modifier is added to the
conversion specifier as indicated in  Table <a href='#tab:localization.length.modifier.out'>98</a>.<div class='numberedTable' id='tab:localization.length.modifier.out'>Table <a href='#tab:localization.length.modifier.out'>98</a> â€” Length modifier<br><table ><tr class='rowsep'><td class='center'><b>Type</b></td><td class='center'>Length modifier</td></tr><tr class='capsep'><td class='left'><span class='texttt'><span class='keyword'>long</span></span></td><td class='center'><span class='texttt'>l</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'><span class='keyword'>long</span> <span class='keyword'>long</span></span></td><td class='center'><span class='texttt'>ll</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span></span></td><td class='center'><span class='texttt'>l</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span></span></td><td class='center'><span class='texttt'>ll</span></td></tr><tr class='rowsep'><td class='left'><span class='texttt'><span class='keyword'>long</span> <span class='keyword'>double</span></span></td><td class='center'><span class='texttt'>L</span></td></tr><tr class='rowsep'><td class='left'><span class='textit'>otherwise</span></td><td class='center'><span class='textit'>none</span></td></tr></table></div>The conversion specifier has the following optional additional qualifiers
prepended as indicated in Table <a href='#tab:localization.numeric.conversions'>99</a>.<div class='numberedTable' id='tab:localization.numeric.conversions'>Table <a href='#tab:localization.numeric.conversions'>99</a> â€” Numeric conversions<br><table ><tr class='rowsep'><td class='center'><b>Type(s)</b></td><td class='center'><b>State</b></td><td class='center'><span class='texttt'>stdio</span> equivalent</td></tr><tr class='capsep'><td class='left'>an integral type</td><td class='left'><span class='texttt'>showpos</span></td><td class='center'><span class='texttt'><span class='operator'>+</span></span></td></tr><tr ><td class='empty left'></td><td class='left'><span class='texttt'>showbase</span></td><td class='center'><span class='texttt'><span class='preprocessordirective'>#</span></span></td></tr><tr class='rowsep'><td class='left'>a floating-point type</td><td class='left'><span class='texttt'>showpos</span></td><td class='center'><span class='texttt'><span class='operator'>+</span></span></td></tr><tr ><td class='empty left'></td><td class='left'><span class='texttt'>showpoint</span></td><td class='center'><span class='texttt'><span class='preprocessordirective'>#</span></span></td></tr></table></div>For conversion from a floating-point type,
if <span class='texttt'>floatfield <span class='operator'>!</span><span class='operator'>=</span> <span class='parenthesis'>(</span>ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>fixed <span class='operator'>|</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>&#x200b;scientific<span class='parenthesis'>)</span></span>,
<span class='texttt'>str<span class='operator'>.</span>precision<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
is specified as precision in the conversion specification. Otherwise, no precision is specified.<div style='height:0.6em;display:block'></div>For conversion from
<span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span>
the specifier is
<span class='texttt'><span class='operator'>%</span>p</span>.<div style='height:0.6em;display:block'></div>The representations at the end of stage 1 consists of the
<span class='texttt'><span class='keyword'>char</span></span>'s
that would be printed by a call of
<span class='texttt'>printf<span class='parenthesis'>(</span>s, val<span class='parenthesis'>)</span></span>
where <span class='texttt'>s</span> is the conversion specifier determined above.</li><li id='facet.num.put.virtuals-5.2'><a href='#facet.num.put.virtuals-5.2'>Stage 2:</a> Any character <span class='texttt'>c</span> other than a decimal point(.) is converted to a
<span class='texttt'>charT</span> via
<pre class='codeblock'>
use_facet<span class='anglebracket'>&lt;</span>ctype<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>loc<span class='parenthesis'>)</span><span class='operator'>.</span>widen<span class='parenthesis'>(</span>c<span class='parenthesis'>)</span>
</pre>A local variable <span class='texttt'>punct</span> is initialized via
<pre class='codeblock'>
<span class='keyword'>const</span> numpunct<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> punct <span class='operator'>=</span> use_facet<span class='anglebracket'>&lt;</span>numpunct<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>loc<span class='parenthesis'>)</span>;
</pre>For arithmetic types,
<span class='texttt'>punct<span class='operator'>.</span>thousands_&shy;sep<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
characters are inserted into the sequence as determined by the value returned
by
<span class='texttt'>punct<span class='operator'>.</span>do_&shy;grouping<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
using the method described in <a href='facet.numpunct.virtuals'>[facet.numpunct.virtuals]</a><div style='height:0.6em;display:block'></div>Decimal point characters(.) are replaced by
<span class='texttt'>punct<span class='operator'>.</span>decimal_&shy;point<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></li><li id='facet.num.put.virtuals-5.3'><a href='#facet.num.put.virtuals-5.3'>Stage 3:</a> A local variable is initialized as
<pre class='codeblock'>
fmtflags adjustfield <span class='operator'>=</span> <span class='parenthesis'>(</span>flags <span class='operator'>&amp;</span> <span class='parenthesis'>(</span>ios_base<span class='operator'>:</span><span class='operator'>:</span>adjustfield<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre>The location of any padding<a class='footnotenum' href='#footnote-271' id='footnoteref-271'>271</a> is determined according to Table <a href='#tab:localization.fill.padding'>100</a>.<div class='numberedTable' id='tab:localization.fill.padding'>Table <a href='#tab:localization.fill.padding'>100</a> â€” Fill padding<br><table ><tr class='rowsep'><td class='center'><b>State</b></td><td class='center'><b>Location</b></td></tr><tr class='capsep'><td class='justify'><span class='texttt'>adjustfield <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>left</span></td><td class='left'>pad after</td></tr><tr class='rowsep'><td class='justify'><span class='texttt'>adjustfield <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>right</span></td><td class='left'>pad before</td></tr><tr class='rowsep'><td class='justify'><span class='texttt'>adjustfield <span class='operator'>=</span><span class='operator'>=</span> internal</span> and a sign occurs in the representation</td><td class='left'>pad after the sign</td></tr><tr class='rowsep'><td class='justify'><span class='texttt'>adjustfield <span class='operator'>=</span><span class='operator'>=</span> internal</span> and representation after stage 1
began with 0x or 0X</td><td class='left'>pad after x or X</td></tr><tr class='rowsep'><td class='justify'><span class='textit'>otherwise</span></td><td class='left'>pad before</td></tr></table></div>If
<span class='texttt'>str<span class='operator'>.</span>width<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
is nonzero and the number of
<span class='texttt'>charT</span>'s
in the sequence after stage 2 is less than
<span class='texttt'>str<span class='operator'>.</span>&#x200b;width<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
then enough <span class='texttt'>fill</span> characters are added to the sequence at the position
indicated for padding to bring the length of the sequence to
<span class='texttt'>str<span class='operator'>.</span>width<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>.<div style='height:0.6em;display:block'></div><span class='texttt'>str<span class='operator'>.</span>width<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span></span>
is called.</li><li id='facet.num.put.virtuals-5.4'><a href='#facet.num.put.virtuals-5.4'>Stage 4:</a> The sequence of
<span class='texttt'>charT</span>'s
at the end of stage 3 are output via<pre class='codeblock'>
<span class='operator'>*</span>out<span class='operator'>+</span><span class='operator'>+</span> <span class='operator'>=</span> c
</pre></li></ul></div></div></div><span class='indexparent'><a class='index' id='lib:do_put,num_put_'></a></span><span class='indexparent'><a class='index' id='lib:num_put,do_put_'></a></span><div class='itemdecl' id='facet.num.put.virtuals-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#facet.num.put.virtuals-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>iter_type do_put<span class='parenthesis'>(</span>iter_type out, ios_base<span class='operator'>&amp;</span> str, char_type fill, <span class='keyword'>bool</span> val<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div><div class='itemdescr'></div><div class='para' id='facet.num.put.virtuals-6'><div class='marginalizedparent'><a class='marginalized' href='#facet.num.put.virtuals-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/871b9e1d91ad939afe46b66e6139a527e773200e/source/locales.tex#L3057'>#</a></div><div id='facet.num.put.virtuals-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
If
<span class='texttt'><span class='parenthesis'>(</span>str<span class='operator'>.</span>flags<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span> ios_&shy;base<span class='operator'>:</span><span class='operator'>:</span>boolalpha<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span></span>
returns
<span class='texttt'>do_&shy;put<span class='parenthesis'>(</span>out, str, fill,<br/><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>val<span class='parenthesis'>)</span></span>,
otherwise obtains a string
<span class='texttt'>s</span>
as if by
<pre class='codeblock'>
string_type s <span class='operator'>=</span>
  val <span class='operator'>?</span> use_facet<span class='anglebracket'>&lt;</span>numpunct<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>loc<span class='parenthesis'>)</span><span class='operator'>.</span>truename<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
      <span class='operator'>:</span> use_facet<span class='anglebracket'>&lt;</span>numpunct<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>loc<span class='parenthesis'>)</span><span class='operator'>.</span>falsename<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</pre>
and then inserts each character
<span class='texttt'>c</span>
of
<span class='texttt'>s</span>
into
<span class='texttt'>out</span>
via
<span class='texttt'><span class='operator'>*</span>out<span class='operator'>+</span><span class='operator'>+</span> <span class='operator'>=</span> c</span>
and returns
<span class='texttt'>out</span><a class='hidden_link' href='#facet.num.put.virtuals-6.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-271'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-271'>271)</a></div><div id='footnote-271.sentence-1' class='sentence'>The conversion specification
<span class='texttt'><span class='preprocessordirective'>#</span>o</span>
generates a leading
<span class='texttt'><span class='literal'>0</span></span>
which is
<span class='textit'>not</span>
a padding character<a class='hidden_link' href='#footnote-271.sentence-1'>.</a></div> <a href='#footnoteref-271'>â®¥</a></div></div></div></body></html>