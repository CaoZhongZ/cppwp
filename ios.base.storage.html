<!DOCTYPE html><html lang='en'><head><title>[ios.base.storage]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>30</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>30.5</a> Iostreams base classes <a class='abbr_ref' href='iostreams.base#ios.base.storage'>[iostreams.base]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>30.5.3</a> Class <span class='texttt'>ios_&shy;base</span> <a class='abbr_ref' href='ios.base#storage'>[ios.base]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>30.5.3.5</a> <span class='texttt'>ios_&shy;base</span> storage functions <a class='abbr_ref'>[ios.base.storage]</a></h4><p ><span class='indexparent'><a class='index' id='lib:xalloc,ios_base'></a></span><span class='indexparent'><a class='index' id='lib:ios_base,xalloc'></a></span></p><p ><code class='itemdecl'>static int xalloc();
</code></p><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/iostreams.tex#L1426'>#</a></div><p ><span class='textit'>Returns:</span> 
<span class='texttt'>index</span>
<span class='texttt'>++</span>.</p></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/iostreams.tex#L1431'>#</a></div><p ><span class='textit'>Remarks:</span> 
Concurrent access to this function by multiple threads shall not result in a
<a href='intro.multithread#def:data_race'>data race</a>.
</p></div></div><p ><span class='indexparent'><a class='index' id='lib:iword,ios_base'></a></span><span class='indexparent'><a class='index' id='lib:ios_base,iword'></a></span></p><p ><code class='itemdecl'>long&amp; iword(int idx);
</code></p><div class='itemdescr'></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/iostreams.tex#L1443'>#</a></div><p ><span class='textit'>Effects:</span> 
If <span class='texttt'>iarray</span> is a null pointer, allocates an array of
<span class='texttt'>long</span>
of unspecified size and stores a pointer to its first element in
<span class='texttt'>iarray</span>.
The function then extends the array pointed at by
<span class='texttt'>iarray</span> as necessary to include the element
<span class='texttt'>iarray[idx]</span>.
Each newly allocated element of the array is initialized to zero.
The reference returned is invalid after any other operations on the
object.<a class='footnotenum' href='#footnote-293'>293</a>
However, the value of the storage referred to is retained, so
that until the next call to
<span class='texttt'>copyfmt</span>,
calling
<span class='texttt'>iword</span>
with the same index yields another reference to the same value.
If the function fails<a class='footnotenum' href='#footnote-294'>294</a>
and
<span class='texttt'>*this</span>
is a base class subobject of a
<span class='texttt'>basic_&shy;ios&lt;&gt;</span>
object or subobject, the effect is equivalent to calling
<span class='texttt'>basic_&shy;ios&lt;&gt;&#x200b;::&#x200b;setstate(badbit)</span>
on the derived object (which may throw
<span class='texttt'>failure</span>).</p></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/iostreams.tex#L1474'>#</a></div><p ><span class='textit'>Returns:</span> 
On success
<span class='texttt'>iarray[idx]</span>.
On failure, a valid
<span class='texttt'>long&amp;</span>
initialized to 0.
</p></div></div><p ><span class='indexparent'><a class='index' id='lib:pword,ios_base'></a></span><span class='indexparent'><a class='index' id='lib:ios_base,pword'></a></span></p><p ><code class='itemdecl'>void*&amp; pword(int idx);
</code></p><div class='itemdescr'></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/iostreams.tex#L1489'>#</a></div><p ><span class='textit'>Effects:</span> 
If <span class='texttt'>parray</span> is a null pointer, allocates an array of
pointers to <span class='texttt'>void</span> of unspecified size and stores a pointer to
its
first element in <span class='texttt'>parray</span>.
The function then extends the array
pointed at by <span class='texttt'>parray</span> as necessary to include the element
<span class='texttt'>parray[idx]</span>.
Each newly allocated element of the array is initialized to a null
pointer.
The reference returned is invalid after any other operations on the
object.
However, the value of the storage referred to is retained, so
that until the next call to
<span class='texttt'>copyfmt</span>,
calling
<span class='texttt'>pword</span>
with the same index yields another reference to the same value.
If the function fails<a class='footnotenum' href='#footnote-295'>295</a>
and
<span class='texttt'>*this</span>
is a base class subobject of a
<span class='texttt'>basic_&shy;ios&lt;&gt;</span>
object or subobject, the effect is equivalent to calling
<span class='texttt'>basic_&shy;ios&lt;&gt;&#x200b;::&#x200b;setstate(badbit)</span>
on the derived object (which may throw
<span class='texttt'>failure</span>).</p></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/iostreams.tex#L1518'>#</a></div><p ><span class='textit'>Returns:</span> 
On success
<span class='texttt'>parray[idx]</span>.
On failure a valid
<span class='texttt'>void*&amp;</span>
initialized to 0.</p></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/iostreams.tex#L1526'>#</a></div><p ><span class='textit'>Remarks:</span> 
After a subsequent call to
<span class='texttt'>pword(int)</span>
for the same object, the earlier return value may no longer be valid.
</p></div></div><div class='footnote' id='footnote-293'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-293'>293)</a></div><p >An implementation is free to implement both the integer
array pointed at by <span class='texttt'>iarray</span> and the pointer array pointed at by
<span class='texttt'>parray</span> as sparse data structures, possibly with a one-element
cache for each.</p></div><div class='footnote' id='footnote-294'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-294'>294)</a></div><p >for example, because it cannot allocate space.</p></div><div class='footnote' id='footnote-295'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-295'>295)</a></div><p >for example, because it cannot allocate space.</p></div></div></body></html>