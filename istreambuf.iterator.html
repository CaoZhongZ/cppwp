<!DOCTYPE html><html lang='en'><head><title>[istreambuf.iterator]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>27</a> Iterators library <a class='abbr_ref' href='./#iterators'>[iterators]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>27.6</a> Stream iterators <a class='abbr_ref' href='stream.iterators#istreambuf.iterator'>[stream.iterators]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>27.6.3</a> Class template <span class='texttt'>istreambuf_&shy;iterator</span> <a class='abbr_ref'>[istreambuf.iterator]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L2936'>#</a></div><div id='1.sentence-1' class='sentence'>The
class template
<span class='texttt'>istreambuf_&shy;iterator</span>
defines an <a href='input.iterators'>input iterator</a> that
reads successive
<span class='textit'>characters</span>
from the streambuf for which it was constructed<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'><span class='texttt'>operator*</span>
provides access to the current input character, if any<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>Each time
<span class='texttt'>operator++</span>
is evaluated, the iterator advances to the next input character<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>If the end of stream is reached (<span class='texttt'>streambuf_&shy;type&#x200b;::&#x200b;sgetc()</span> returns
<span class='texttt'>traits&#x200b;::&#x200b;eof()</span>),
the iterator becomes equal to the
<span class='textit'>end-of-stream</span>
iterator value<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>The default constructor
<span class='texttt'>istreambuf_&shy;iterator()</span>
and the constructor
<span class='texttt'>istreambuf_&shy;iterator(0)</span>
both construct an end-of-stream iterator object suitable for use
as an end-of-range<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>All specializations of <span class='texttt'>istreambuf_&shy;iterator</span> shall have a trivial copy
constructor, a <span class='texttt'>constexpr</span> default constructor, and a trivial destructor<a class='hidden_link' href='#1.sentence-6'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L2963'>#</a></div><div id='2.sentence-1' class='sentence'>The result of
<span class='texttt'>operator*()</span>
on an end-of-stream iterator is undefined<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':behavior,undefined'></a></span>For any other iterator value a
<span class='texttt'>char_&shy;type</span>
value is returned<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>It is impossible to assign a character via an input iterator<a class='hidden_link' href='#2.sentence-3'>.</a></div><span class='indexparent'><a class='index' id='lib:istreambuf_iterator'></a></span><pre class='codeblock'>
namespace std {
  template&lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
  class istreambuf_iterator {
  public:
    using iterator_category = input_iterator_tag;
    using value_type        = charT;
    using difference_type   = typename traits::off_type;
    using pointer           = <span class='textit'><span class='texttt'>unspecified</span></span>;
    using reference         = charT;
    using char_type         = charT;
    using traits_type       = traits;
    using int_type          = typename traits::int_type;
    using streambuf_type    = basic_streambuf&lt;charT,traits&gt;;
    using istream_type      = basic_istream&lt;charT,traits&gt;;

    class proxy;                          <span class='comment'>// <span class='textit'>exposition only</span>
</span>
    constexpr istreambuf_iterator() noexcept;
    istreambuf_iterator(const istreambuf_iterator&amp;) noexcept = default;
    ~istreambuf_iterator() = default;
    istreambuf_iterator(istream_type&amp; s) noexcept;
    istreambuf_iterator(streambuf_type* s) noexcept;
    istreambuf_iterator(const proxy&amp; p) noexcept;
    charT operator*() const;
    istreambuf_iterator&amp; operator++();
    proxy operator++(int);
    bool equal(const istreambuf_iterator&amp; b) const;

  private:
    streambuf_type* sbuf_;                <span class='comment'>// <span class='textit'>exposition only</span>
</span>  };

  template &lt;class charT, class traits&gt;
    bool operator==(const istreambuf_iterator&lt;charT,traits&gt;&amp; a,
            const istreambuf_iterator&lt;charT,traits&gt;&amp; b);
  template &lt;class charT, class traits&gt;
    bool operator!=(const istreambuf_iterator&lt;charT,traits&gt;&amp; a,
            const istreambuf_iterator&lt;charT,traits&gt;&amp; b);
}</pre></div><div id='proxy' class='section'><h4 ><a class='secnum' href='#proxy' style='min-width:118pt'>27.6.3.1</a> Class template <span class='texttt'>istreambuf_&shy;iterator&#x200b;::&#x200b;proxy</span> <a class='abbr_ref' href='istreambuf.iterator.proxy'>[istreambuf.iterator.proxy]</a></h4><span class='indexparent'><a class='index' id='lib:proxy,istreambuf_iterator'></a></span><pre class='codeblock'>
namespace std {
  template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
  class istreambuf_iterator&lt;charT, traits&gt;::proxy { <span class='comment'>// <span class='textit'>exposition only</span>
</span>    charT keep_;
    basic_streambuf&lt;charT,traits&gt;* sbuf_;
    proxy(charT c, basic_streambuf&lt;charT,traits&gt;* sbuf)
      : keep_(c), sbuf_(sbuf) { }
  public:
    charT operator*() { return keep_; }
  };
}</pre><div class='para' id='proxy-1'><div class='marginalizedparent'><a class='marginalized' href='#proxy-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3033'>#</a></div><div id='proxy-1.sentence-1' class='sentence'>Class
<span class='texttt'>istreambuf_&shy;iterator&lt;charT,traits&gt;&#x200b;::&#x200b;proxy</span>
is for exposition only<a class='hidden_link' href='#proxy-1.sentence-1'>.</a></div> <div id='proxy-1.sentence-2' class='sentence'>An implementation is permitted to provide equivalent functionality without
providing a class with this name<a class='hidden_link' href='#proxy-1.sentence-2'>.</a></div> <div id='proxy-1.sentence-3' class='sentence'>Class
<span class='texttt'>istreambuf_&shy;iterator&lt;charT, traits&gt;&#x200b;::&#x200b;proxy</span>
provides a temporary
placeholder as the return value of the post-increment operator
(<span class='texttt'>operator++</span>)<a class='hidden_link' href='#proxy-1.sentence-3'>.</a></div> <div id='proxy-1.sentence-4' class='sentence'>It keeps the character pointed to by the previous value
of the iterator for some possible future access to get the character<a class='hidden_link' href='#proxy-1.sentence-4'>.</a></div></div></div><div id='cons' class='section'><h4 ><a class='secnum' href='#cons' style='min-width:118pt'>27.6.3.2</a> <span class='texttt'>istreambuf_&shy;iterator</span> constructors <a class='abbr_ref' href='istreambuf.iterator.cons'>[istreambuf.iterator.cons]</a></h4><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3049'>#</a></div><div id='cons-1.sentence-1' class='sentence'>For each <span class='texttt'>istreambuf_&shy;iterator</span> constructor in this subclause,
an end-of-stream iterator is constructed if and only if
the exposition-only member <span class='texttt'>sbuf_&shy;</span> is initialized with a null pointer value<a class='hidden_link' href='#cons-1.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='cons-1.sentence-2' class='sentence'><div id='lib:istreambuf_iterator,constructor'>
<code class='itemdecl'>constexpr istreambuf_iterator() noexcept;
</code>
</div></div></div><div class='itemdescr'></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3062'>#</a></div><div id='cons-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes <span class='texttt'>sbuf_&shy;</span> with <span class='texttt'>nullptr</span><a class='hidden_link' href='#cons-2.sentence-1'>.</a></div></div></div><div id='cons-sentence-1' class='sentence'><div id='lib:istreambuf_iterator,constructor'>
<code class='itemdecl'>istreambuf_iterator(istream_type&amp; s) noexcept;
</code>
</div></div><div class='itemdescr'></div><div class='para' id='cons-3'><div class='marginalizedparent'><a class='marginalized' href='#cons-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3074'>#</a></div><div id='cons-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes <span class='texttt'>sbuf_&shy;</span> with <span class='texttt'>s.rdbuf()</span><a class='hidden_link' href='#cons-3.sentence-1'>.</a></div></div></div><div id='cons-sentence-1' class='sentence'><div id='lib:istreambuf_iterator,constructor'>
<code class='itemdecl'>istreambuf_iterator(streambuf_type* s) noexcept;
</code>
</div></div><div class='itemdescr'></div><div class='para' id='cons-4'><div class='marginalizedparent'><a class='marginalized' href='#cons-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3086'>#</a></div><div id='cons-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes <span class='texttt'>sbuf_&shy;</span> with <span class='texttt'>s</span><a class='hidden_link' href='#cons-4.sentence-1'>.</a></div></div></div><div id='cons-sentence-1' class='sentence'><div id='lib:istreambuf_iterator,constructor'>
<code class='itemdecl'>istreambuf_iterator(const proxy&amp; p) noexcept;
</code>
</div></div><div class='itemdescr'></div><div class='para' id='cons-5'><div class='marginalizedparent'><a class='marginalized' href='#cons-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3098'>#</a></div><div id='cons-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes <span class='texttt'>sbuf_&shy;</span> with <span class='texttt'>p.sbuf_&shy;</span><a class='hidden_link' href='#cons-5.sentence-1'>.</a></div></div></div></div><div id='ops' class='section'><h4 ><a class='secnum' href='#ops' style='min-width:118pt'>27.6.3.3</a> <span class='texttt'>istreambuf_&shy;iterator</span> operations <a class='abbr_ref' href='istreambuf.iterator.ops'>[istreambuf.iterator.ops]</a></h4><span class='indexparent'><a class='index' id='lib:operator*,istreambuf_iterator'></a></span><span class='indexparent'><a class='index' id='lib:istreambuf_iterator,operator*'></a></span><code class='itemdecl'>charT operator*() const
</code><div class='itemdescr'></div><div class='para' id='ops-1'><div class='marginalizedparent'><a class='marginalized' href='#ops-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3111'>#</a></div><div id='ops-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The character obtained via the
<span class='texttt'>streambuf</span>
member
<span class='texttt'>sbuf_&shy;-&gt;sgetc()</span><a class='hidden_link' href='#ops-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator++,istreambuf_iterator'></a></span><span class='indexparent'><a class='index' id='lib:istreambuf_iterator,operator++'></a></span><code class='itemdecl'>istreambuf_iterator&amp; operator++();
</code><div class='itemdescr'></div><div class='para' id='ops-2'><div class='marginalizedparent'><a class='marginalized' href='#ops-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3125'>#</a></div><div id='ops-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
As if by <span class='texttt'>sbuf_&shy;-&gt;sbumpc()</span><a class='hidden_link' href='#ops-2.sentence-1'>.</a></div></div></div><div class='para' id='ops-3'><div class='marginalizedparent'><a class='marginalized' href='#ops-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3129'>#</a></div><div id='ops-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>*this</span><a class='hidden_link' href='#ops-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator++,istreambuf_iterator_'></a></span><span class='indexparent'><a class='index' id='lib:istreambuf_iterator,operator++_'></a></span><code class='itemdecl'>proxy operator++(int);
</code><div class='itemdescr'></div><div class='para' id='ops-4'><div class='marginalizedparent'><a class='marginalized' href='#ops-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3140'>#</a></div><div id='ops-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>proxy(sbuf_&shy;-&gt;sbumpc(), sbuf_&shy;)</span><a class='hidden_link' href='#ops-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:equal,istreambuf_iterator'></a></span><span class='indexparent'><a class='index' id='lib:istreambuf_iterator,equal'></a></span><code class='itemdecl'>bool equal(const istreambuf_iterator&amp; b) const;
</code><div class='itemdescr'></div><div class='para' id='ops-5'><div class='marginalizedparent'><a class='marginalized' href='#ops-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3151'>#</a></div><div id='ops-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>true</span>
if and only if both iterators are at end-of-stream,
or neither is at end-of-stream, regardless of what
<span class='texttt'>streambuf</span>
object they use<a class='hidden_link' href='#ops-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator==,istreambuf_iterator'></a></span><span class='indexparent'><a class='index' id='lib:istreambuf_iterator,operator=='></a></span><code class='itemdecl'>template &lt;class charT, class traits&gt;
  bool operator==(const istreambuf_iterator&lt;charT,traits&gt;&amp; a,
                  const istreambuf_iterator&lt;charT,traits&gt;&amp; b);
</code><div class='itemdescr'></div><div class='para' id='ops-6'><div class='marginalizedparent'><a class='marginalized' href='#ops-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3168'>#</a></div><div id='ops-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>a.equal(b)</span><a class='hidden_link' href='#ops-6.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator!=,istreambuf_iterator'></a></span><span class='indexparent'><a class='index' id='lib:istreambuf_iterator,operator!='></a></span><code class='itemdecl'>template &lt;class charT, class traits&gt;
  bool operator!=(const istreambuf_iterator&lt;charT,traits&gt;&amp; a,
                  const istreambuf_iterator&lt;charT,traits&gt;&amp; b);
</code><div class='itemdescr'></div><div class='para' id='ops-7'><div class='marginalizedparent'><a class='marginalized' href='#ops-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iterators.tex#L3181'>#</a></div><div id='ops-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>!a.equal(b)</span><a class='hidden_link' href='#ops-7.sentence-1'>.</a></div></div></div></div></div></body></html>