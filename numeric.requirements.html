<!DOCTYPE html><html lang='en'><head><title>[numeric.requirements]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>26</a> Numerics library <a class='abbr_ref' href='./#numerics'>[numerics]</a></h1><div id='numeric.requirements'><h2 ><a class='secnum' style='min-width:88pt'>26.3</a> Numeric type requirements <a class='abbr_ref'>[numeric.requirements]</a></h2><p ><span class='indexparent'><a class='index' id='requirements,numeric_type'></a></span></p><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/019585eb4da447ff6a41fa766056b4febff08c25/source/numerics.tex#L57'>#</a></div><p >The
<span class='texttt'>complex</span>
and
<span class='texttt'>valarray</span>
components are parameterized by the type of information they contain and manipulate.
A C++ program shall instantiate these components only with a type
<span class='texttt'>T</span>
that satisfies the
following requirements:<a class='footnotenum' href='#footnote-267'>267</a></p><ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div><p ><span class='texttt'>T</span> is not an abstract class (it has no pure virtual member functions);
</p></li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div><p ><span class='texttt'>T</span> is not a reference type;
</p></li><li id='1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.3'>(1.3)</a></div><p ><span class='texttt'>T</span> is not cv-qualified;
</p></li><li id='1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.4'>(1.4)</a></div><p >If <span class='texttt'>T</span> is a class, it has a public default constructor;
</p></li><li id='1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.5'>(1.5)</a></div><p >If <span class='texttt'>T</span> is a class, it has a public copy constructor with the signature <span class='texttt'>T&#x200b;::&#x200b;T(const T&amp;)</span>
</p></li><li id='1.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.6'>(1.6)</a></div><p >If <span class='texttt'>T</span> is a class, it has a public destructor;
</p></li><li id='1.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.7'>(1.7)</a></div><p >If <span class='texttt'>T</span> is a class, it has a public assignment operator whose signature is either
<span class='texttt'>T&amp; T&#x200b;::&#x200b;operator=(const T&amp;)</span>
or
<span class='texttt'>T&amp; T&#x200b;::&#x200b;operator=(T)</span>
</p></li><li id='1.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.8'>(1.8)</a></div><p >If <span class='texttt'>T</span> is a class, its assignment operator, copy and default constructors,
and destructor shall correspond to each other in the following sense:
 </p><ul class='itemize'><li id='1.8.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#1.8.1'>(1.8.1)</a></div><p >Initialization of raw storage using the copy constructor
   on the value of <span class='texttt'>T()</span>, however obtained,
   is semantically equivalent to value-initialization of the same raw storage.
 </p></li><li id='1.8.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#1.8.2'>(1.8.2)</a></div><p >Initialization of raw storage using the default constructor,
   followed by assignment,
   is semantically equivalent to initialization of raw storage using the copy constructor.
 </p></li><li id='1.8.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#1.8.3'>(1.8.3)</a></div><p >Destruction of an object,
   followed by initialization of its raw storage using the copy constructor,
    is semantically equivalent to assignment to the original object.
 </p></li></ul><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
This rule states, in part, that there shall not be any subtle differences in the semantics
of initialization versus assignment.
This gives an implementation
considerable flexibility in how arrays are initialized.</p><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
An implementation is allowed to initialize a
<span class='texttt'>valarray</span>
by allocating storage using the
<span class='texttt'>new</span>
operator (which
implies a call to the default constructor for each element) and then
assigning each element its value.
Or the implementation can allocate raw
storage and use the copy constructor to initialize each element.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p><p >If the distinction between initialization and assignment is important
for a class, or if it fails to satisfy any of
the other conditions listed above, the programmer should use
<span class='texttt'>vector</span> (<a href='vector'>[vector]</a>) instead of
<span class='texttt'>valarray</span>
for that class.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
</p></li><li id='1.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.9'>(1.9)</a></div><p >If <span class='texttt'>T</span> is a class, it does not overload unary
<span class='texttt'>operator&amp;</span>.
</p></li></ul></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/019585eb4da447ff6a41fa766056b4febff08c25/source/numerics.tex#L128'>#</a></div><p >If any operation on <span class='texttt'>T</span>
throws an exception the effects are undefined.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/019585eb4da447ff6a41fa766056b4febff08c25/source/numerics.tex#L132'>#</a></div><p >In addition, many member and related functions of
<span class='texttt'>valarray&lt;T&gt;</span>
can be successfully instantiated
and will exhibit well-defined behavior if and only if
<span class='texttt'>T</span> satisfies additional requirements specified for each such member
or related function.</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/019585eb4da447ff6a41fa766056b4febff08c25/source/numerics.tex#L140'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
It is valid to instantiate
<span class='texttt'>valarray&lt;complex&gt;</span>,
but
<span class='texttt'>operator&gt;()</span>
will not be successfully instantiated for
<span class='texttt'>valarray&lt;complex&gt;</span>
operands, since
<span class='texttt'>complex</span>
does not have any ordering operators.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='footnote' id='footnote-267'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-267'>267)</a></div><p >In other words, value types.
These include arithmetic types,
pointers, the library class
<span class='texttt'>complex</span>,
and instantiations of
<span class='texttt'>valarray</span>
for value types.</p></div></div></div></body></html>