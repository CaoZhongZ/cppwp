<!DOCTYPE html><html lang='en'><head><title>[basic.start.term]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basic concepts <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.8</a> Program execution <a class='abbr_ref' href='basic.exec#basic.start.term'>[basic.exec]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>6.8.3</a> Start and termination <a class='abbr_ref' href='basic.start#term'>[basic.start]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>6.8.3.4</a> Termination <a class='abbr_ref'>[basic.start.term]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/basic.tex#L5420'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':program,termination'></a></span><span class='indexparent'><a class='index' id=':object,destructor_static'></a></span><span class='indexparent'><a class='index' id=':main_function,return_from'></a></span>Destructors (<a href='class.dtor'>[class.dtor]</a>) for initialized objects
(that is, objects whose lifetime (<a href='basic.life'>[basic.life]</a>) has begun)
with static storage duration,
and functions registered with <span class='texttt'>std&#x200b;::&#x200b;atexit</span>,
are called as part of a call to
<span class='indexparent'><a class='index' id=':exit'></a></span><span class='indexparent'><a class='index' id='lib:exit'></a></span><span class='texttt'>std&#x200b;::&#x200b;exit</span> (<a href='support.start.term'>[support.start.term]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The call to <span class='texttt'>std&#x200b;::&#x200b;exit</span> is sequenced before
the invocations of the destructors and the registered functions<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-3' class='sentence'>Returning from <span class='texttt'>main</span> invokes <span class='texttt'>std&#x200b;::&#x200b;exit</span> (<a href='basic.start.main'>[basic.start.main]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/basic.tex#L5438'>#</a></div><div id='2.sentence-1' class='sentence'>Destructors for initialized objects with thread storage duration within a given thread
are called as a result of returning from the initial function of that thread and as a
result of that thread calling <span class='texttt'>std&#x200b;::&#x200b;exit</span><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The completions of the destructors for all initialized objects with thread storage
duration within that thread strongly happen before the initiation of the destructors of
any object with static storage duration<a class='hidden_link' href='#2.sentence-2'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/basic.tex#L5446'>#</a></div><div id='3.sentence-1' class='sentence'>If the completion of the constructor or dynamic initialization of an object with static
storage duration strongly happens before that of another, the completion of the destructor
of the second is sequenced before the initiation of the destructor of the first<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If the completion of the constructor or dynamic initialization of an object with thread
storage duration is sequenced before that of another, the completion of the destructor
of the second is sequenced before the initiation of the destructor of the first<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>If an object is
initialized statically, the object is destroyed in the same order as if
the object was dynamically initialized<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>For an object of array or class
type, all subobjects of that object are destroyed before any block-scope
object with static storage duration initialized during the construction
of the subobjects is destroyed<a class='hidden_link' href='#3.sentence-4'>.</a></div> <div id='3.sentence-5' class='sentence'>If the destruction of an object with static or thread storage duration
exits via an exception,
<span class='texttt'>std&#x200b;::&#x200b;terminate</span> is called (<a href='except.terminate'>[except.terminate]</a>)<a class='hidden_link' href='#3.sentence-5'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/basic.tex#L5463'>#</a></div><div id='4.sentence-1' class='sentence'>If a function contains a block-scope object of static or thread storage duration that has been
destroyed and the function is called during the destruction of an object with static or
thread storage duration, the program has undefined behavior if the flow of control
passes through the definition of the previously destroyed block-scope object<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Likewise, the
behavior is undefined if the block-scope object is used indirectly (i.e., through a
pointer) after its destruction<a class='hidden_link' href='#4.sentence-2'>.</a></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/basic.tex#L5471'>#</a></div><div id='5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':atexit'></a></span><span class='indexparent'><a class='index' id='lib:atexit'></a></span>If the completion of the initialization of an object with static storage
duration strongly happens before a call to <span class='texttt'>std&#x200b;::&#x200b;atexit</span> (see
<span class='texttt'>&lt;cstdlib&gt;</span>, <a href='support.start.term'>[support.start.term]</a>), the call to the function passed to
<span class='texttt'>std&#x200b;::&#x200b;atexit</span> is sequenced before the call to the destructor for the object<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>If a
call to <span class='texttt'>std&#x200b;::&#x200b;atexit</span> strongly happens before the completion of the initialization of
an object with static storage duration, the call to the destructor for the
object is sequenced before the call to the function passed to <span class='texttt'>std&#x200b;::&#x200b;atexit</span><a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>If a
call to <span class='texttt'>std&#x200b;::&#x200b;atexit</span> strongly happens before another call to <span class='texttt'>std&#x200b;::&#x200b;atexit</span>, the
call to the function passed to the second <span class='texttt'>std&#x200b;::&#x200b;atexit</span> call is sequenced before
the call to the function passed to the first <span class='texttt'>std&#x200b;::&#x200b;atexit</span> call<a class='hidden_link' href='#5.sentence-3'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/basic.tex#L5485'>#</a></div><div id='6.sentence-1' class='sentence'>If there is a use of a standard library object or function not permitted within signal
handlers (<a href='support.runtime'>[support.runtime]</a>) that does not happen before (<a href='intro.multithread'>[intro.multithread]</a>)
completion of destruction of objects with static storage duration and execution of
<span class='texttt'>std&#x200b;::&#x200b;atexit</span> registered functions (<a href='support.start.term'>[support.start.term]</a>), the program has
undefined behavior<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-2' class='sentence'>If there is a use of an object with static storage
duration that does not happen before the object's destruction, the program has undefined
behavior<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>Terminating every thread before a call to <span class='texttt'>std&#x200b;::&#x200b;exit</span> or the exit from
<span class='texttt'>main</span> is sufficient, but not necessary, to satisfy these requirements<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>These
requirements permit thread managers as static-storage-duration objects<a class='hidden_link' href='#6.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/basic.tex#L5496'>#</a></div><div id='7.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':abort'></a></span><span class='indexparent'><a class='index' id='lib:abort'></a></span><span class='indexparent'><a class='index' id=':termination,program'></a></span>Calling the function <span class='texttt'>std&#x200b;::&#x200b;abort()</span> declared in
<span class='indexparent'><a class='index' id=':<cstdlib>'></a></span><span class='indexparent'><a class='index' id=':<cstdlib>'></a></span><span class='texttt'>&lt;cstdlib&gt;</span> terminates the program without executing any destructors
and without calling
the functions passed to <span class='texttt'>std&#x200b;::&#x200b;atexit()</span> or <span class='texttt'>std&#x200b;::&#x200b;at_&shy;quick_&shy;exit()</span><a class='hidden_link' href='#7.sentence-1'>.</a></div> </div></div></body></html>