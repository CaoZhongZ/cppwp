<!DOCTYPE html><html lang='en'><head><title>[temp.class]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>17.6</a> Template declarations <a class='abbr_ref' href='temp.decls#temp.class'>[temp.decls]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>17.6.1</a> Class templates <a class='abbr_ref'>[temp.class]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2098'>#</a></div><div id='1.sentence-1' class='sentence'>A
<a class='hidden_link' href='#def:template,class' id='def:template,class'><i >class template</i></a>
defines the layout and operations
for an unbounded set of related types<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2104'>#</a></div><div id='2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='2.sentence-1' class='sentence'>A single class template
<span class='texttt'>List</span>
might provide an unbounded set of class definitions:
one class <span class='texttt'>List&lt;T&gt;</span> for every type <span class='texttt'>T</span>,
each describing a linked list of elements of type <span class='texttt'>T</span><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Similarly, a class template <span class='texttt'>Array</span> describing a contiguous,
dynamic array might be defined like this:
<pre class='codeblock'>
template&lt;class T&gt; class Array {
  T* v;
  int sz;
public:
  explicit Array(int);
  T&amp; operator[](int);
  T&amp; elem(int i) { return v[i]; }
};</pre>
The prefix <span class='texttt'>template&lt;class T&gt;</span>
specifies that a template is being declared and that a
<i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>
<span class='texttt'>T</span>
may be used in the declaration<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>In other words,
<span class='texttt'>Array</span>
is a parameterized type with
<span class='texttt'>T</span>
as its parameter<a class='hidden_link' href='#2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2135'>#</a></div><div id='3.sentence-1' class='sentence'>When a member function, a member class, a member enumeration, a static data member or
a member template of a class
template is defined outside of the class template definition,
the member definition is defined as a template definition in which the
<i ><a href='temp#nt:template-head'>template-head</a></i> is equivalent to that
of the class template (<a href='temp.over.link'>[temp.over.link]</a>)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>The names of the template parameters used in the definition of the member may
be different from the template parameter names used in the class
template definition<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>The template argument list following the class template name in the member
definition shall name the parameters in the same order as the one used in
the template parameter list of the member<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>Each template
parameter pack shall be expanded with an ellipsis in the template
argument list<a class='hidden_link' href='#3.sentence-4'>.</a></div> <div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T1, class T2&gt; struct A {
  void f1();
  void f2();
};

template&lt;class T2, class T1&gt; void A&lt;T2,T1&gt;::f1() { }    <span class='comment'>// OK
</span>template&lt;class T2, class T1&gt; void A&lt;T1,T2&gt;::f2() { }    <span class='comment'>// error
</span></pre><pre class='codeblock'>
template&lt;class ... Types&gt; struct B {
  void f3();
  void f4();
};

template&lt;class ... Types&gt; void B&lt;Types ...&gt;::f3() { }   <span class='comment'>// OK
</span>template&lt;class ... Types&gt; void B&lt;Types&gt;::f4() { }       <span class='comment'>// error
</span></pre><pre class='codeblock'>
template&lt;typename T&gt; concept C = true;
template&lt;typename T&gt; concept D = true;

template&lt;C T&gt; struct S {
  void f();
  void g();
  void h();
  template&lt;D U&gt; struct Inner;
};

template&lt;C A&gt; void S&lt;A&gt;::f() { }        <span class='comment'>// OK: <span class='grammarterm'>template-head</span><span class='textit'>s</span> match
</span>template&lt;typename T&gt; void S&lt;T&gt;::g() { } <span class='comment'>// error: no matching declaration for <span class='tcode_in_codeblock'>S&lt;T&gt;</span>
</span>
template&lt;typename T&gt; requires C&lt;T&gt;      <span class='comment'>// error (no diagnostic required): <span class='grammarterm'>template-head</span><span class='textit'>s</span> are
</span>void S&lt;T&gt;::h() { }                      <span class='comment'>// functionally equivalent but not equivalent
</span>
template&lt;C X&gt; template&lt;D Y&gt;
struct S&lt;X&gt;::Inner { };                 <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2193'>#</a></div><div id='4.sentence-1' class='sentence'>In a redeclaration, partial
specialization,
explicit specialization or explicit
instantiation of a class template, the
<i ><a href='class#nt:class-key'>class-key</a></i>
shall agree in kind with the original class template declaration (<a href='dcl.type.elab'>[dcl.type.elab]</a>)<a class='hidden_link' href='#4.sentence-1'>.</a></div></div><div id='temp.mem.func' class='section'><h4 ><a class='secnum' href='#temp.mem.func' style='min-width:118pt'>17.6.1.1</a> Member functions of class templates <a class='abbr_ref' href='temp.mem.func'>[temp.mem.func]</a></h4><div class='para' id='temp.mem.func-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.mem.func-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2203'>#</a></div><div id='temp.mem.func-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':template,member_function'></a></span>A member function
of a class template
may be defined outside of the class
template definition in which it is declared<a class='hidden_link' href='#temp.mem.func-1.sentence-1'>.</a></div> <div id='temp.mem.func-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.mem.func-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class Array {
  T* v;
  int sz;
public:
  explicit Array(int);
  T&amp; operator[](int);
  T&amp; elem(int i) { return v[i]; }
};</pre><div id='temp.mem.func-1.sentence-2' class='sentence'>declares three function templates<a class='hidden_link' href='#temp.mem.func-1.sentence-2'>.</a></div> <div id='temp.mem.func-1.sentence-3' class='sentence'>The subscript function might be defined like this:</div><pre class='codeblock'>
template&lt;class T&gt; T&amp; Array&lt;T&gt;::operator[](int i) {
  if (i&lt;0 || sz&lt;=i) error("Array: range error");
  return v[i];
}</pre><div id='temp.mem.func-1.sentence-4' class='sentence'>A constrained member function can be defined out of line:
<pre class='codeblock'>
template&lt;typename T&gt; concept C = requires {
  typename T::type;
};

template&lt;typename T&gt; struct S {
  void f() requires C&lt;T&gt;;
  void g() requires C&lt;T&gt;;
};

template&lt;typename T&gt;
  void S&lt;T&gt;::f() requires C&lt;T&gt; { }      <span class='comment'>// OK
</span>template&lt;typename T&gt;
  void S&lt;T&gt;::g() { }                    <span class='comment'>// error: no matching function in <span class='tcode_in_codeblock'>S&lt;T&gt;</span>
</span></pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.mem.func-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.mem.func-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2250'>#</a></div><div id='temp.mem.func-2.sentence-1' class='sentence'>The
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
for a member function of a class template are determined by the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
of the type of the object for which the member function is called<a class='hidden_link' href='#temp.mem.func-2.sentence-1'>.</a></div> <div id='temp.mem.func-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.mem.func-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='temp.mem.func-2.sentence-2' class='sentence'>The
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
for
<span class='texttt'>Array&lt;T&gt;&#x200b;::&#x200b;operator[]()</span>
will be determined by the
<span class='texttt'>Array</span>
to which the subscripting operation is applied<a class='hidden_link' href='#temp.mem.func-2.sentence-2'>.</a></div><pre class='codeblock'>
Array&lt;int&gt; v1(20);
Array&lt;dcomplex&gt; v2(30);

v1[3] = 7;                              <span class='comment'>// <span class='tcode_in_codeblock'>Array&lt;int&gt;&#x200b;::&#x200b;operator[]()</span>
</span>v2[3] = dcomplex(7,8);                  <span class='comment'>// <span class='tcode_in_codeblock'>Array&lt;dcomplex&gt;&#x200b;::&#x200b;operator[]()</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='temp.mem.class' class='section'><h4 ><a class='secnum' href='#temp.mem.class' style='min-width:118pt'>17.6.1.2</a> Member classes of class templates <a class='abbr_ref' href='temp.mem.class'>[temp.mem.class]</a></h4><div class='para' id='temp.mem.class-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.mem.class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2276'>#</a></div><div id='temp.mem.class-1.sentence-1' class='sentence'>A member class of a class template may be defined outside the class template
definition in which it is declared<a class='hidden_link' href='#temp.mem.class-1.sentence-1'>.</a></div> <div id='temp.mem.class-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.mem.class-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.mem.class-1.sentence-2' class='sentence'>The member class must be defined before its first use that requires
an instantiation (<a href='temp.inst'>[temp.inst]</a>)<a class='hidden_link' href='#temp.mem.class-1.sentence-2'>.</a></div> <div id='temp.mem.class-1.sentence-3' class='sentence'>For example,</div><pre class='codeblock'>
template&lt;class T&gt; struct A {
  class B;
};
A&lt;int&gt;::B* b1;                          <span class='comment'>// OK: requires <span class='tcode_in_codeblock'>A</span> to be defined but not <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span>
</span>template&lt;class T&gt; class A&lt;T&gt;::B { };
A&lt;int&gt;::B  b2;                          <span class='comment'>// OK: requires <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> to be defined
</span></pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='temp.static' class='section'><h4 ><a class='secnum' href='#temp.static' style='min-width:118pt'>17.6.1.3</a> Static data members of class templates <a class='abbr_ref' href='temp.static'>[temp.static]</a></h4><div class='para' id='temp.static-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.static-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2296'>#</a></div><div id='temp.static-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member,template_and_static'></a></span>A definition for a static data member or static data member template may be
provided in a namespace scope enclosing the definition of the static member's
class template<a class='hidden_link' href='#temp.static-1.sentence-1'>.</a></div> <div id='temp.static-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.static-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class X {
  static T s;
};
template&lt;class T&gt; T X&lt;T&gt;::s = 0;

struct limits {
  template&lt;class T&gt;
    static const T min;                 <span class='comment'>// declaration
</span>};

template&lt;class T&gt;
  const T limits::min = { };            <span class='comment'>// definition
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.static-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.static-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2319'>#</a></div><div id='temp.static-2.sentence-1' class='sentence'>An explicit specialization of a static data member declared as an array of unknown
bound can have a different bound from its definition, if any<a class='hidden_link' href='#temp.static-2.sentence-1'>.</a></div> <div id='temp.static-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.static-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct A {
  static int i[];
};
template &lt;class T&gt; int A&lt;T&gt;::i[4];      <span class='comment'>// 4 elements
</span>template &lt;&gt; int A&lt;int&gt;::i[] = { 1 };    <span class='comment'>// OK: 1 element
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='temp.mem.enum' class='section'><h4 ><a class='secnum' href='#temp.mem.enum' style='min-width:118pt'>17.6.1.4</a> Enumeration members of class templates <a class='abbr_ref' href='temp.mem.enum'>[temp.mem.enum]</a></h4><div class='para' id='temp.mem.enum-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.mem.enum-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/templates.tex#L2334'>#</a></div><div id='temp.mem.enum-1.sentence-1' class='sentence'>An enumeration member of a class template may be defined outside the class
template definition<a class='hidden_link' href='#temp.mem.enum-1.sentence-1'>.</a></div> <div id='temp.mem.enum-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.mem.enum-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  enum E : T;
};
A&lt;int&gt; a;
template&lt;class T&gt; enum A&lt;T&gt;::E : T { e1, e2 };
A&lt;int&gt;::E e = A&lt;int&gt;::e1;</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div></body></html>