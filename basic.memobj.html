<!DOCTYPE html><html lang='en'><head><title>[basic.memobj]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.6</a> Memory and objects <a class='abbr_ref'>[basic.memobj]</a></h2><div id='intro.memory' class='section'><h3 ><a class='secnum' href='#intro.memory' style='min-width:103pt'>6.6.1</a> Memory model <a class='abbr_ref' href='intro.memory'>[intro.memory]</a></h3><div class='para' id='intro.memory-1'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2505'>#</a></div><div id='intro.memory-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':memory_model'></a></span>The fundamental storage unit in the C++ memory model is the
<a class='hidden_link' href='#def:byte' id='def:byte'><i >byte</i></a><a class='hidden_link' href='#intro.memory-1.sentence-1'>.</a></div> <div id='intro.memory-1.sentence-2' class='sentence'>A byte is at least large enough to contain any member of the
<span class='indexparent'><a class='index' id=':character_set,basic_execution'></a></span><a href='lex.charset#def:character_set,basic_execution'>basic execution character set</a>
and the eight-bit code units of the Unicode UTF-8 encoding form
and is composed of a contiguous sequence of
bits,<a class='footnotenum' href='#footnote-31'>31</a>
the number of which is <span class='indexparent'><a class='index' id=':bits_in_a_byte'></a></span>implementation-defined<a class='hidden_link' href='#intro.memory-1.sentence-2'>.</a></div> <div id='intro.memory-1.sentence-3' class='sentence'>The least
significant bit is called the <a class='hidden_link' href='#def:low-order_bit' id='def:low-order_bit'><i >low-order bit</i></a>; the most
significant bit is called the <a class='hidden_link' href='#def:high-order_bit' id='def:high-order_bit'><i >high-order bit</i></a><a class='hidden_link' href='#intro.memory-1.sentence-3'>.</a></div> <div id='intro.memory-1.sentence-4' class='sentence'>The memory
available to a C++ program consists of one or more sequences of
contiguous bytes<a class='hidden_link' href='#intro.memory-1.sentence-4'>.</a></div> <div id='intro.memory-1.sentence-5' class='sentence'>Every byte has a unique address<a class='hidden_link' href='#intro.memory-1.sentence-5'>.</a></div></div><div class='para' id='intro.memory-2'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2522'>#</a></div><div id='intro.memory-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#intro.memory-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='intro.memory-2.sentence-1' class='sentence'>The representation of types is described
in <a href='basic.types'>[basic.types]</a><a class='hidden_link' href='#intro.memory-2.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='intro.memory-3'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2526'>#</a></div><div id='intro.memory-3.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:memory_location' id='def:memory_location'><i >memory location</i></a> is either an object of scalar type or a maximal
sequence of adjacent bit-fields all having nonzero width<a class='hidden_link' href='#intro.memory-3.sentence-1'>.</a></div> <div id='intro.memory-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#intro.memory-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='intro.memory-3.sentence-3' class='sentence'>Various
features of the language, such as references and virtual functions, might
involve additional memory locations that are not accessible to programs but are
managed by the implementation<a class='hidden_link' href='#intro.memory-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='intro.memory-3.sentence-2' class='sentence'> Two or more <a href='intro.multithread#def:thread_of_execution'>threads of
execution</a> can access separate memory
locations without interfering with each other<a class='hidden_link' href='#intro.memory-3.sentence-2'>.</a></div></div><div class='para' id='intro.memory-4'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2535'>#</a></div><div id='intro.memory-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#intro.memory-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='intro.memory-4.sentence-1' class='sentence'>Thus a bit-field and an adjacent non-bit-field are in separate memory
locations, and therefore can be concurrently updated by two threads of execution
without interference<a class='hidden_link' href='#intro.memory-4.sentence-1'>.</a></div> <div id='intro.memory-4.sentence-2' class='sentence'>The same applies to two bit-fields, if one is declared
inside a nested struct declaration and the other is not, or if the two are
separated by a zero-length bit-field declaration, or if they are separated by a
non-bit-field declaration<a class='hidden_link' href='#intro.memory-4.sentence-2'>.</a></div> <div id='intro.memory-4.sentence-3' class='sentence'>It is not safe to concurrently update two bit-fields
in the same struct if all fields between them are also bit-fields of nonzero
width<a class='hidden_link' href='#intro.memory-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='intro.memory-5'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2545'>#</a></div><div id='intro.memory-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#intro.memory-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='intro.memory-5.sentence-1' class='sentence'>A structure declared as</div><pre class='codeblock'>
struct {
  char a;
  int b:5,
  c:11,
  :0,
  d:8;
  struct {int ee:8;} e;
}</pre><div id='intro.memory-5.sentence-2' class='sentence'>contains four separate memory locations: The member <span class='texttt'>a</span> and bit-fields
<span class='texttt'>d</span> and <span class='texttt'>e.ee</span> are each separate memory locations, and can be
modified concurrently without interfering with each other<a class='hidden_link' href='#intro.memory-5.sentence-2'>.</a></div> <div id='intro.memory-5.sentence-3' class='sentence'>The bit-fields
<span class='texttt'>b</span> and <span class='texttt'>c</span> together constitute the fourth memory location<a class='hidden_link' href='#intro.memory-5.sentence-3'>.</a></div> <div id='intro.memory-5.sentence-4' class='sentence'>The
bit-fields <span class='texttt'>b</span> and <span class='texttt'>c</span> cannot be concurrently modified, but
<span class='texttt'>b</span> and <span class='texttt'>a</span>, for example, can be<a class='hidden_link' href='#intro.memory-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  </div><div class='footnote' id='footnote-31'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-31'>31)</a></div><div id='footnote-31.sentence-1' class='sentence'>The number of bits in a byte is reported by the macro
<span class='texttt'>CHAR_&shy;BIT</span> in the header <span class='texttt'>&lt;climits&gt;</span><a class='hidden_link' href='#footnote-31.sentence-1'>.</a></div></div></div><div id='intro.object' class='section'><h3 ><a class='secnum' href='#intro.object' style='min-width:103pt'>6.6.2</a> Object model <a class='abbr_ref' href='intro.object'>[intro.object]</a></h3><div class='para' id='intro.object-1'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2569'>#</a></div><div id='intro.object-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object_model'></a></span>The constructs in a C++ program create, destroy, refer to, access, and
manipulate objects<a class='hidden_link' href='#intro.object-1.sentence-1'>.</a></div> <div id='intro.object-1.sentence-2' class='sentence'>An <a class='hidden_link' href='#def:object' id='def:object'><i >object</i></a> is created
by a definition (<a href='basic.def'>[basic.def]</a>),
by a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>,
when implicitly changing the active member of a union (<a href='class.union'>[class.union]</a>),
or
when a temporary object is created (<a href='conv.rval'>[conv.rval]</a>, <a href='#class.temporary'>[class.temporary]</a>)<a class='hidden_link' href='#intro.object-1.sentence-2'>.</a></div> <div id='intro.object-1.sentence-3' class='sentence'>An object occupies a region of storage
in its period of construction (<a href='class.cdtor'>[class.cdtor]</a>),
throughout its lifetime (<a href='#basic.life'>[basic.life]</a>),
and
in its period of destruction (<a href='class.cdtor'>[class.cdtor]</a>)<a class='hidden_link' href='#intro.object-1.sentence-3'>.</a></div> <div id='intro.object-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#intro.object-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='intro.object-1.sentence-10' class='sentence'>A function is not an object, regardless of whether or not it
occupies storage in the way that objects do<a class='hidden_link' href='#intro.object-1.sentence-10'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='intro.object-1.sentence-4' class='sentence'>
The properties of an
object are determined when the object is created<a class='hidden_link' href='#intro.object-1.sentence-4'>.</a></div> <div id='intro.object-1.sentence-5' class='sentence'>An object can have a
name (<a href='basic'>[basic]</a>)<a class='hidden_link' href='#intro.object-1.sentence-5'>.</a></div> <div id='intro.object-1.sentence-6' class='sentence'>An object has a storage
duration (<a href='#basic.stc'>[basic.stc]</a>) which influences its
lifetime (<a href='#basic.life'>[basic.life]</a>)<a class='hidden_link' href='#intro.object-1.sentence-6'>.</a></div> <div id='intro.object-1.sentence-7' class='sentence'>An object has a
type (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#intro.object-1.sentence-7'>.</a></div> <div id='intro.object-1.sentence-8' class='sentence'>Some objects are
polymorphic (<a href='class.virtual'>[class.virtual]</a>); the implementation
generates information associated with each such object that makes it
possible to determine that object's type during program execution<a class='hidden_link' href='#intro.object-1.sentence-8'>.</a></div> <div id='intro.object-1.sentence-9' class='sentence'>For
other objects, the interpretation of the values found therein is
determined by the type of the <i ><a href='expr.comma#nt:expression'>expression</a></i><span class='textit'>s</span> (<a href='expr.compound'>[expr.compound]</a>)
used to access them<a class='hidden_link' href='#intro.object-1.sentence-9'>.</a></div></div><div class='para' id='intro.object-2'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2600'>#</a></div><div id='intro.object-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':subobject'></a></span>Objects can contain other objects, called <a class='hidden_link' href='#def:subobject_' id='def:subobject_'><i >subobjects</i></a><a class='hidden_link' href='#intro.object-2.sentence-1'>.</a></div> <div id='intro.object-2.sentence-2' class='sentence'>A subobject can be
a <a class='hidden_link' href='#def:member_subobject' id='def:member_subobject'><i >member subobject</i></a> (<a href='class.mem'>[class.mem]</a>), a <a class='hidden_link' href='#def:base_class_subobject' id='def:base_class_subobject'><i >base class subobject</i></a> (<a href='class.derived'>[class.derived]</a>),
or an array element<a class='hidden_link' href='#intro.object-2.sentence-2'>.</a></div> <div id='intro.object-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':object,complete'></a></span>An object that is not a subobject of any other object is called a <a class='hidden_link' href='#def:complete_object' id='def:complete_object'><i >complete
object</i></a><a class='hidden_link' href='#intro.object-2.sentence-3'>.</a></div> <div id='intro.object-2.sentence-4' class='sentence'>If an object is created
in storage associated with a member subobject or array element <span class='textit'>e</span>
(which may or may not be within its lifetime),
the created object
is a subobject of <span class='textit'>e</span>'s containing object if:
<ul class='itemize'><li id='intro.object-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-2.1'>(2.1)</a></div><div id='intro.object-2.1.sentence-1' class='sentence'>the lifetime of <span class='textit'>e</span>'s containing object has begun and not ended, and</div></li><li id='intro.object-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-2.2'>(2.2)</a></div><div id='intro.object-2.2.sentence-1' class='sentence'>the storage for the new object exactly overlays the storage location associated with <span class='textit'>e</span>, and</div></li><li id='intro.object-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-2.3'>(2.3)</a></div><div id='intro.object-2.3.sentence-1' class='sentence'>the new object is of the same type as <span class='textit'>e</span> (ignoring cv-qualification)<a class='hidden_link' href='#intro.object-2.3.sentence-1'>.</a></div></li></ul></div> <div id='intro.object-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#intro.object-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='intro.object-2.sentence-5' class='sentence'>If the subobject contains a reference member or a <span class='texttt'>const</span> subobject,
the name of the original subobject cannot be used to access the new object (<a href='#basic.life'>[basic.life]</a>)<a class='hidden_link' href='#intro.object-2.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='intro.object-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#intro.object-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X { const int n; };
union U { X x; float f; };
void tong() {
  U u = {{ 1 }};
  u.f = 5.f;                            <span class='comment'>// OK, creates new subobject of <span class='tcode_in_codeblock'>u</span> (<a href='class.union'>[class.union]</a>)
</span>  X *p = new (&amp;u.x) X {2};              <span class='comment'>// OK, creates new subobject of <span class='tcode_in_codeblock'>u</span>
</span>  assert(p-&gt;n == 2);                    <span class='comment'>// OK
</span>  assert(*std::launder(&amp;u.x.n) == 2);   <span class='comment'>// OK
</span>  assert(u.x.n == 2);                   <span class='comment'>// undefined behavior, <span class='tcode_in_codeblock'>u.x</span> does not name new subobject
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='intro.object-3'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2641'>#</a></div><div id='intro.object-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,providing_storage_for'></a></span>If a complete object is created (<a href='expr.new'>[expr.new]</a>)
in storage associated with another object <span class='textit'>e</span>
of type “array of <span class='math'><span class='mathalpha'>N</span></span> <span class='texttt'>unsigned char</span>” or
of type “array of <span class='math'><span class='mathalpha'>N</span></span> <span class='texttt'>std&#x200b;::&#x200b;byte</span>” (<a href='cstddef.syn'>[cstddef.syn]</a>),
that array <a class='hidden_link' href='#def:provides_storage' id='def:provides_storage'><i >provides storage</i></a>
for the created object if:
<ul class='itemize'><li id='intro.object-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-3.1'>(3.1)</a></div><div id='intro.object-3.1.sentence-1' class='sentence'>the lifetime of <span class='textit'>e</span> has begun and not ended, and</div></li><li id='intro.object-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-3.2'>(3.2)</a></div><div id='intro.object-3.2.sentence-1' class='sentence'>the storage for the new object fits entirely within <span class='textit'>e</span>, and</div></li><li id='intro.object-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-3.3'>(3.3)</a></div><div id='intro.object-3.3.sentence-1' class='sentence'>there is no smaller array object that satisfies these constraints<a class='hidden_link' href='#intro.object-3.3.sentence-1'>.</a></div></li></ul></div> <div id='intro.object-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#intro.object-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='intro.object-3.sentence-2' class='sentence'>If that portion of the array
previously provided storage for another object,
the lifetime of that object ends
because its storage was reused (<a href='#basic.life'>[basic.life]</a>)<a class='hidden_link' href='#intro.object-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='intro.object-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#intro.object-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename ...T&gt;
struct AlignedUnion {
  alignas(T...) unsigned char data[max(sizeof(T)...)];
};
int f() {
  AlignedUnion&lt;int, char&gt; au;
  int *p = new (au.data) int;           <span class='comment'>// OK, <span class='tcode_in_codeblock'>au.data</span> provides storage
</span>  char *c = new (au.data) char();       <span class='comment'>// OK, ends lifetime of <span class='tcode_in_codeblock'>*p</span>
</span>  char *d = new (au.data + 1) char();
  return *c + *d; <span class='comment'>// OK
</span>}

struct A { unsigned char a[32]; };
struct B { unsigned char b[16]; };
A a;
B *b = new (a.a + 8) B;                 <span class='comment'>// <span class='tcode_in_codeblock'>a.a</span> provides storage for <span class='tcode_in_codeblock'>*b</span>
</span>int *p = new (b-&gt;b + 4) int;            <span class='comment'>// <span class='tcode_in_codeblock'>b-&gt;b</span> provides storage for <span class='tcode_in_codeblock'>*p</span>
</span>                                        <span class='comment'>// <span class='tcode_in_codeblock'>a.a</span> does not provide storage for <span class='tcode_in_codeblock'>*p</span> (directly),
</span>                                        <span class='comment'>// but <span class='tcode_in_codeblock'>*p</span> is nested within <span class='tcode_in_codeblock'>a</span> (see below)
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='intro.object-4'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2687'>#</a></div><div id='intro.object-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,nested_within'></a></span>An object <span class='textit'>a</span> is <a class='hidden_link' href='#def:nested_within' id='def:nested_within'><i >nested within</i></a> another object <span class='textit'>b</span> if:
<ul class='itemize'><li id='intro.object-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-4.1'>(4.1)</a></div><div id='intro.object-4.1.sentence-1' class='sentence'><span class='textit'>a</span> is a subobject of <span class='textit'>b</span>, or</div></li><li id='intro.object-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-4.2'>(4.2)</a></div><div id='intro.object-4.2.sentence-1' class='sentence'><span class='textit'>b</span> provides storage for <span class='textit'>a</span>, or</div></li><li id='intro.object-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-4.3'>(4.3)</a></div><div id='intro.object-4.3.sentence-1' class='sentence'>there exists an object <span class='textit'>c</span>
where <span class='textit'>a</span> is nested within <span class='textit'>c</span>,
and <span class='textit'>c</span> is nested within <span class='textit'>b</span><a class='hidden_link' href='#intro.object-4.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='intro.object-5'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2701'>#</a></div><div id='intro.object-5.sentence-1' class='sentence'>For every object <span class='texttt'>x</span>, there is some object called the
<a class='hidden_link' href='#def:complete_object_of' id='def:complete_object_of'><i >complete object of</i></a> <span class='texttt'>x</span>, determined as follows:
<ul class='itemize'><li id='intro.object-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-5.1'>(5.1)</a></div><div id='intro.object-5.1.sentence-1' class='sentence'>If <span class='texttt'>x</span> is a complete object, then the complete object
of <span class='texttt'>x</span> is itself<a class='hidden_link' href='#intro.object-5.1.sentence-1'>.</a></div></li><li id='intro.object-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-5.2'>(5.2)</a></div><div id='intro.object-5.2.sentence-1' class='sentence'>Otherwise, the complete object of <span class='texttt'>x</span> is the complete object
of the (unique) object that contains <span class='texttt'>x</span><a class='hidden_link' href='#intro.object-5.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='intro.object-6'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2714'>#</a></div><div id='intro.object-6.sentence-1' class='sentence'>If a complete object, a data member (<a href='class.mem'>[class.mem]</a>), or an array element is of
class type, its type is considered the <a class='hidden_link' href='#def:most_derived_class' id='def:most_derived_class'><i >most derived
class</i></a>, to distinguish it from the class type of any base class subobject;
an object of a most derived class type or of a non-class type is called a
<a class='hidden_link' href='#def:most_derived_object' id='def:most_derived_object'><i >most derived object</i></a><a class='hidden_link' href='#intro.object-6.sentence-1'>.</a></div></div><div class='para' id='intro.object-7'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2721'>#</a></div><div id='intro.object-7.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:potentially-overlapping_subobject' id='def:potentially-overlapping_subobject'><i >potentially-overlapping subobject</i></a> is either:
<ul class='itemize'><li id='intro.object-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-7.1'>(7.1)</a></div><div id='intro.object-7.1.sentence-1' class='sentence'>a base class subobject, or</div></li><li id='intro.object-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-7.2'>(7.2)</a></div><div id='intro.object-7.2.sentence-1' class='sentence'>a non-static data member
declared with the <span class='texttt'>no_&shy;unique_&shy;address</span> attribute (<a href='dcl.attr.nouniqueaddr'>[dcl.attr.nouniqueaddr]</a>)<a class='hidden_link' href='#intro.object-7.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='intro.object-8'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2729'>#</a></div><div id='intro.object-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,zero_size'></a></span><span class='indexparent'><a class='index' id=':object,nonzero_size'></a></span>An object has nonzero size if it
<ul class='itemize'><li id='intro.object-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-8.1'>(8.1)</a></div><div id='intro.object-8.1.sentence-1' class='sentence'>is not a potentially-overlapping subobject, or</div></li><li id='intro.object-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-8.2'>(8.2)</a></div><div id='intro.object-8.2.sentence-1' class='sentence'>is not of class type, or</div></li><li id='intro.object-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-8.3'>(8.3)</a></div><div id='intro.object-8.3.sentence-1' class='sentence'>is of a class type with virtual member functions or virtual base classes, or</div></li><li id='intro.object-8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#intro.object-8.4'>(8.4)</a></div><div id='intro.object-8.4.sentence-1' class='sentence'>has subobjects of nonzero size or bit-fields of nonzero length<a class='hidden_link' href='#intro.object-8.4.sentence-1'>.</a></div></li></ul></div> <div id='intro.object-8.sentence-2' class='sentence'>
Otherwise, if the object is a base class subobject
of a standard-layout class type
with no non-static data members,
it has zero size<a class='hidden_link' href='#intro.object-8.sentence-2'>.</a></div> <div id='intro.object-8.sentence-3' class='sentence'>Otherwise, the circumstances under which the object has zero size
are <span class='indexparent'><a class='index' id=':which_non-standard-layout_objects_containing_no_data_are_considered_empty'></a></span>implementation-defined<a class='hidden_link' href='#intro.object-8.sentence-3'>.</a></div> <div id='intro.object-8.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':most_derived_object,bit-field'></a></span>Unless it is a bit-field (<a href='class.bit'>[class.bit]</a>),
an object with nonzero size
shall occupy one or more bytes of storage,
including every byte that is occupied in full or in part
by any of its subobjects<a class='hidden_link' href='#intro.object-8.sentence-4'>.</a></div> <div id='intro.object-8.sentence-5' class='sentence'>An object of trivially copyable or
standard-layout type (<a href='basic.types'>[basic.types]</a>) shall occupy contiguous bytes of
storage<a class='hidden_link' href='#intro.object-8.sentence-5'>.</a></div></div><div class='para' id='intro.object-9'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2756'>#</a></div><div id='intro.object-9.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':most_derived_object,bit-field_'></a></span><span class='indexparent'><a class='index' id=':most_derived_object,zero_size_subobject'></a></span>Unless an object is a bit-field or a subobject of zero size, the
address of that object is the address of the first byte it occupies<a class='hidden_link' href='#intro.object-9.sentence-1'>.</a></div> <div id='intro.object-9.sentence-2' class='sentence'>Two objects
with overlapping lifetimes
that are not bit-fields
may have the same address
if one is nested within the other,
or
if at least one is a subobject of zero size
and they are of different types;
otherwise, they have distinct addresses
and occupy disjoint bytes of storage<a class='hidden_link' href='#intro.object-9.sentence-2'>.</a><a class='footnotenum' href='#footnote-32'>32</a></div> <div id='intro.object-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#intro.object-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
static const char test1 = 'x';
static const char test2 = 'x';
const bool b = &amp;test1 != &amp;test2;        <span class='comment'>// always <span class='tcode_in_codeblock'>true</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='intro.object-9.sentence-3' class='sentence'>
The address of a non-bit-field subobject of zero size is
the address of an unspecified byte of storage
occupied by the complete object of that subobject<a class='hidden_link' href='#intro.object-9.sentence-3'>.</a></div></div><div class='para' id='intro.object-10'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2785'>#</a></div><div id='intro.object-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#intro.object-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='intro.object-10.sentence-1' class='sentence'>C++ provides a variety of fundamental types and several ways of composing
new types from existing types (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#intro.object-10.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  </div><div class='footnote' id='footnote-32'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-32'>32)</a></div><div id='footnote-32.sentence-1' class='sentence'>Under the “as-if” rule an
implementation is allowed to store two objects at the same machine address or
not store an object at all if the program cannot observe the
difference (<a href='intro.execution'>[intro.execution]</a>)<a class='hidden_link' href='#footnote-32.sentence-1'>.</a></div></div></div><div id='basic.life' class='section'><h3 ><a class='secnum' href='#basic.life' style='min-width:103pt'>6.6.3</a> Object lifetime <a class='abbr_ref' href='basic.life'>[basic.life]</a></h3><div class='para' id='basic.life-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2794'>#</a></div><div id='basic.life-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object_lifetime'></a></span>The <a class='hidden_link' href='#def:lifetime' id='def:lifetime'><i >lifetime</i></a> of an object or reference is a runtime property of the
object or reference<a class='hidden_link' href='#basic.life-1.sentence-1'>.</a></div> <div id='basic.life-1.sentence-2' class='sentence'>An object is said to have <a class='hidden_link' href='#def:initialization,non-vacuous' id='def:initialization,non-vacuous'><i >non-vacuous initialization</i></a> if it is of a class or
aggregate type and it or one of its subobjects is initialized by a constructor
other than a trivial default constructor<a class='hidden_link' href='#basic.life-1.sentence-2'>.</a></div> <div id='basic.life-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.life-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.life-1.sentence-5' class='sentence'>Initialization by a
trivial copy/move constructor is non-vacuous initialization<a class='hidden_link' href='#basic.life-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='basic.life-1.sentence-3' class='sentence'>
The lifetime of an object of type <span class='texttt'>T</span> begins when:
<ul class='itemize'><li id='basic.life-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-1.1'>(1.1)</a></div><div id='basic.life-1.1.sentence-1' class='sentence'>storage with the proper alignment and size for type <span class='texttt'>T</span> is
obtained, and</div></li><li id='basic.life-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-1.2'>(1.2)</a></div><div id='basic.life-1.2.sentence-1' class='sentence'>if the object has non-vacuous initialization, its initialization is complete,</div></li></ul>
except that if the object is a union member or subobject thereof,
its lifetime only begins if that union member is the
initialized member in the union (<a href='dcl.init.aggr'>[dcl.init.aggr]</a>, <a href='class.base.init'>[class.base.init]</a>),
or as described in <a href='class.union'>[class.union]</a><a class='hidden_link' href='#basic.life-1.sentence-3'>.</a></div> <div id='basic.life-1.sentence-4' class='sentence'>The lifetime of an object <span class='textit'>o</span> of type <span class='texttt'>T</span> ends when:
<ul class='itemize'><li id='basic.life-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-1.3'>(1.3)</a></div><div id='basic.life-1.3.sentence-1' class='sentence'>if <span class='texttt'>T</span> is a class type with a non-trivial
destructor (<a href='class.dtor'>[class.dtor]</a>), the destructor call starts, or</div></li><li id='basic.life-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-1.4'>(1.4)</a></div><div id='basic.life-1.4.sentence-1' class='sentence'>the storage which the object occupies is released,
or is reused by an object that is not nested within <span class='textit'>o</span> (<a href='#intro.object'>[intro.object]</a>)<a class='hidden_link' href='#basic.life-1.4.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='basic.life-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2820'>#</a></div><div id='basic.life-2.sentence-1' class='sentence'>The lifetime of a reference begins when its initialization is complete<a class='hidden_link' href='#basic.life-2.sentence-1'>.</a></div> <div id='basic.life-2.sentence-2' class='sentence'>The lifetime of a reference ends as if it were a scalar object<a class='hidden_link' href='#basic.life-2.sentence-2'>.</a></div></div><div class='para' id='basic.life-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2824'>#</a></div><div id='basic.life-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.life-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.life-3.sentence-1' class='sentence'><a href='class.base.init'>[class.base.init]</a>
describes the lifetime of base and member subobjects<a class='hidden_link' href='#basic.life-3.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.life-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2828'>#</a></div><div id='basic.life-4.sentence-1' class='sentence'>The properties ascribed to objects and references throughout this document
apply for a given object or reference only during its lifetime<a class='hidden_link' href='#basic.life-4.sentence-1'>.</a></div> <div id='basic.life-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.life-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.life-4.sentence-2' class='sentence'>In particular, before the lifetime of an object starts and after its
lifetime ends there are significant restrictions on the use of the
object, as described below, in <a href='class.base.init'>[class.base.init]</a> and
in <a href='class.cdtor'>[class.cdtor]</a><a class='hidden_link' href='#basic.life-4.sentence-2'>.</a></div> <div id='basic.life-4.sentence-3' class='sentence'>Also, the behavior of an object under construction
and destruction might not be the same as the behavior of an object whose
lifetime has started and not ended<a class='hidden_link' href='#basic.life-4.sentence-3'>.</a></div> <div id='basic.life-4.sentence-4' class='sentence'><a href='class.base.init'>[class.base.init]</a>
and <a href='class.cdtor'>[class.cdtor]</a> describe the behavior of objects during the
construction and destruction phases<a class='hidden_link' href='#basic.life-4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.life-5'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2840'>#</a></div><div id='basic.life-5.sentence-1' class='sentence'>A program may end the lifetime of any object by reusing the storage
which the object occupies or by explicitly calling the destructor for an
object of a class type with a non-trivial destructor<a class='hidden_link' href='#basic.life-5.sentence-1'>.</a></div> <div id='basic.life-5.sentence-2' class='sentence'>For an object of a
class type with a non-trivial destructor, the program is not required to
call the destructor explicitly before the storage which the object
occupies is reused or released; however, if there is no explicit call to
the destructor or if a <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>
is not used to release the storage, the destructor shall not be
implicitly called and any program that depends on the side effects
produced by the destructor has undefined behavior<a class='hidden_link' href='#basic.life-5.sentence-2'>.</a></div></div><div class='para' id='basic.life-6'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2852'>#</a></div><div id='basic.life-6.sentence-1' class='sentence'>Before the lifetime of an object has started but after the storage which
the object will occupy has been allocated<a class='footnotenum' href='#footnote-33'>33</a>
or, after the lifetime of an object has ended and before the storage
which the object occupied is reused or released, any pointer that represents the address of
the storage location where the object will be or was located may be
used but only in limited ways<a class='hidden_link' href='#basic.life-6.sentence-1'>.</a></div> <div id='basic.life-6.sentence-2' class='sentence'>For an object under construction or destruction, see <a href='class.cdtor'>[class.cdtor]</a><a class='hidden_link' href='#basic.life-6.sentence-2'>.</a></div> <div id='basic.life-6.sentence-3' class='sentence'>Otherwise, such
a pointer refers to allocated
storage (<a href='#basic.stc.dynamic.allocation'>[basic.stc.dynamic.allocation]</a>), and using the pointer as
if the pointer were of type <span class='texttt'>void*</span>, is
well-defined<a class='hidden_link' href='#basic.life-6.sentence-3'>.</a></div> <div id='basic.life-6.sentence-4' class='sentence'>Indirection through such a pointer is permitted but the resulting lvalue may only be used in
limited ways, as described below<a class='hidden_link' href='#basic.life-6.sentence-4'>.</a></div> <div id='basic.life-6.sentence-5' class='sentence'>The
program has undefined behavior if:
<ul class='itemize'><li id='basic.life-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-6.1'>(6.1)</a></div><div id='basic.life-6.1.sentence-1' class='sentence'>the object will be or was of a class type with a non-trivial destructor
  and the pointer is used as the operand of a <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>,</div></li><li id='basic.life-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-6.2'>(6.2)</a></div><div id='basic.life-6.2.sentence-1' class='sentence'>the pointer is used to access a non-static data member or call a
  non-static member function of the object, or</div></li><li id='basic.life-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-6.3'>(6.3)</a></div><div id='basic.life-6.3.sentence-1' class='sentence'>the pointer is implicitly converted (<a href='conv.ptr'>[conv.ptr]</a>) to a pointer
  to a virtual base class, or</div></li><li id='basic.life-6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-6.4'>(6.4)</a></div><div id='basic.life-6.4.sentence-1' class='sentence'>the pointer is used as the operand of a
  <span class='texttt'>static_&shy;cast</span> (<a href='expr.static.cast'>[expr.static.cast]</a>), except when the conversion
  is to pointer to <span class='mathit'>cv</span> <span class='texttt'>void</span>, or to pointer to <span class='mathit'>cv</span> <span class='texttt'>void</span>
  and subsequently to pointer to
  <span class='mathit'>cv</span> <span class='texttt'>char</span>,
  <span class='mathit'>cv</span> <span class='texttt'>unsigned char</span>, or
  <span class='mathit'>cv</span> <span class='texttt'>std&#x200b;::&#x200b;byte</span> (<a href='cstddef.syn'>[cstddef.syn]</a>), or</div></li><li id='basic.life-6.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-6.5'>(6.5)</a></div><div id='basic.life-6.5.sentence-1' class='sentence'>the pointer is used as the operand of a
  <span class='texttt'>dynamic_&shy;cast</span> (<a href='expr.dynamic.cast'>[expr.dynamic.cast]</a>)<a class='hidden_link' href='#basic.life-6.5.sentence-1'>.</a></div></li></ul></div> <div id='basic.life-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#basic.life-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
#include &lt;cstdlib&gt;

struct B {
  virtual void f();
  void mutate();
  virtual ~B();
};

struct D1 : B { void f(); };
struct D2 : B { void f(); };

void B::mutate() {
  new (this) D2;    <span class='comment'>// reuses storage — ends the lifetime of <span class='tcode_in_codeblock'>*this</span>
</span>  f();              <span class='comment'>// undefined behavior
</span>  ... = this;       <span class='comment'>// OK, <span class='tcode_in_codeblock'>this</span> points to valid memory
</span>}

void g() {
  void* p = std::malloc(sizeof(D1) + sizeof(D2));
  B* pb = new (p) D1;
  pb-&gt;mutate();
  *pb;              <span class='comment'>// OK: <span class='tcode_in_codeblock'>pb</span> points to valid memory
</span>  void* q = pb;     <span class='comment'>// OK: <span class='tcode_in_codeblock'>pb</span> points to valid memory
</span>  pb-&gt;f();          <span class='comment'>// undefined behavior, lifetime of <span class='tcode_in_codeblock'>*pb</span> has ended
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.life-7'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2921'>#</a></div><div id='basic.life-7.sentence-1' class='sentence'>Similarly, before the lifetime of an object has started but after the
storage which the object will occupy has been allocated or, after the
lifetime of an object has ended and before the storage which the object
occupied is reused or released, any glvalue that refers to the original
object may be used but only in limited ways<a class='hidden_link' href='#basic.life-7.sentence-1'>.</a></div> <div id='basic.life-7.sentence-2' class='sentence'>For an object under construction or destruction, see <a href='class.cdtor'>[class.cdtor]</a><a class='hidden_link' href='#basic.life-7.sentence-2'>.</a></div> <div id='basic.life-7.sentence-3' class='sentence'>Otherwise, such
a glvalue refers to
allocated storage (<a href='#basic.stc.dynamic.allocation'>[basic.stc.dynamic.allocation]</a>), and using the
properties of the glvalue that do not depend on its value is
well-defined<a class='hidden_link' href='#basic.life-7.sentence-3'>.</a></div> <div id='basic.life-7.sentence-4' class='sentence'>The program has undefined behavior if:
<ul class='itemize'><li id='basic.life-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-7.1'>(7.1)</a></div><div id='basic.life-7.1.sentence-1' class='sentence'>the glvalue is used to access the object, or</div></li><li id='basic.life-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-7.2'>(7.2)</a></div><div id='basic.life-7.2.sentence-1' class='sentence'>the glvalue is used to call a non-static member function of the object, or</div></li><li id='basic.life-7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-7.3'>(7.3)</a></div><div id='basic.life-7.3.sentence-1' class='sentence'>the glvalue is bound to a reference to a virtual base class (<a href='dcl.init.ref'>[dcl.init.ref]</a>), or</div></li><li id='basic.life-7.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-7.4'>(7.4)</a></div><div id='basic.life-7.4.sentence-1' class='sentence'>the glvalue is used as the operand of a
<span class='texttt'>dynamic_&shy;cast</span> (<a href='expr.dynamic.cast'>[expr.dynamic.cast]</a>) or as the operand of
<span class='texttt'>typeid</span><a class='hidden_link' href='#basic.life-7.4.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='basic.life-8'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2942'>#</a></div><div id='basic.life-8.sentence-1' class='sentence'>If, after the lifetime of an object has ended and before the storage
which the object occupied is reused or released, a new object is created
at the storage location which the original object occupied, a pointer
that pointed to the original object, a reference that referred to the
original object, or the name of the original object will automatically
refer to the new object and, once the lifetime of the new object has
started, can be used to manipulate the new object, if:
<ul class='itemize'><li id='basic.life-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-8.1'>(8.1)</a></div><div id='basic.life-8.1.sentence-1' class='sentence'>the storage for the new object exactly overlays the storage
location which the original object occupied, and</div></li><li id='basic.life-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-8.2'>(8.2)</a></div><div id='basic.life-8.2.sentence-1' class='sentence'>the new object is of the same type as the original object
(ignoring the top-level cv-qualifiers), and</div></li><li id='basic.life-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-8.3'>(8.3)</a></div><div id='basic.life-8.3.sentence-1' class='sentence'>the type of the original object is not const-qualified, and, if a
class type, does not contain any non-static data member whose type is
const-qualified or a reference type, and</div></li><li id='basic.life-8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.life-8.4'>(8.4)</a></div><div id='basic.life-8.4.sentence-1' class='sentence'>neither the original object nor the new object
is a potentially-overlapping subobject (<a href='#intro.object'>[intro.object]</a>)<a class='hidden_link' href='#basic.life-8.4.sentence-1'>.</a></div></li></ul></div> <div id='basic.life-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#basic.life-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct C {
  int i;
  void f();
  const C&amp; operator=( const C&amp; );
};

const C&amp; C::operator=( const C&amp; other) {
  if ( this != &amp;other ) {
    this-&gt;~C();                 <span class='comment'>// lifetime of <span class='tcode_in_codeblock'>*this</span> ends
</span>    new (this) C(other);        <span class='comment'>// new object of type <span class='tcode_in_codeblock'>C</span> created
</span>    f();                        <span class='comment'>// well-defined
</span>  }
  return *this;
}

C c1;
C c2;
c1 = c2;                        <span class='comment'>// well-defined
</span>c1.f();                         <span class='comment'>// well-defined; <span class='tcode_in_codeblock'>c1</span> refers to a new object of type <span class='tcode_in_codeblock'>C</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='basic.life-8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.life-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.life-8.sentence-2' class='sentence'>If these conditions are not met,
a pointer to the new object can be obtained from
a pointer that represents the address of its storage
by calling <span class='texttt'>std&#x200b;::&#x200b;launder</span> (<a href='support.dynamic'>[support.dynamic]</a>)<a class='hidden_link' href='#basic.life-8.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.life-9'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L2994'>#</a></div><div id='basic.life-9.sentence-1' class='sentence'>If a program ends the lifetime of an object of type <span class='texttt'>T</span> with
<a href='#basic.stc.static'>static</a>, <a href='#basic.stc.thread'>thread</a>,
or <a href='#basic.stc.auto'>automatic storage duration</a>
and if <span class='texttt'>T</span> has a non-trivial destructor,<a class='footnotenum' href='#footnote-34'>34</a>
the program must ensure that an object of the original type occupies
that same storage location when the implicit destructor call takes
place; otherwise the behavior of the program is undefined<a class='hidden_link' href='#basic.life-9.sentence-1'>.</a></div> <div id='basic.life-9.sentence-2' class='sentence'>This is true
even if the block is exited with an exception<a class='hidden_link' href='#basic.life-9.sentence-2'>.</a></div> <div id='basic.life-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#basic.life-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class T { };
struct B {
   ~B();
};

void h() {
   B b;
   new (&amp;b) T;
}                               <span class='comment'>// undefined behavior at block exit
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.life-10'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3022'>#</a></div><div id='basic.life-10.sentence-1' class='sentence'>Creating a new object within the storage that a const complete
object with static, thread, or automatic storage duration occupies,
or within the storage that such a const object used to occupy before
its lifetime ended, results in undefined behavior<a class='hidden_link' href='#basic.life-10.sentence-1'>.</a></div> <div id='basic.life-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#basic.life-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B {
  B();
  ~B();
};

const B b;

void h() {
  b.~B();
  new (const_cast&lt;B*&gt;(&amp;b)) const B;     <span class='comment'>// undefined behavior
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.life-11'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3043'>#</a></div><div id='basic.life-11.sentence-1' class='sentence'>In this subclause, “before” and “after” refer to the “happens before”
relation (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#basic.life-11.sentence-1'>.</a></div> <div id='basic.life-11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.life-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.life-11.sentence-2' class='sentence'>Therefore, undefined behavior results
if an object that is being constructed in one thread is referenced from another
thread without adequate synchronization<a class='hidden_link' href='#basic.life-11.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  </div><div class='footnote' id='footnote-33'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-33'>33)</a></div><div id='footnote-33.sentence-1' class='sentence'>For example, before the
construction of a global object
that is initialized via a user-provided constructor (<a href='class.cdtor'>[class.cdtor]</a>)<a class='hidden_link' href='#footnote-33.sentence-1'>.</a></div></div><div class='footnote' id='footnote-34'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-34'>34)</a></div><div id='footnote-34.sentence-1' class='sentence'>That
is, an object for which a destructor will be called
implicitly—upon exit from the block for an object with
automatic storage duration, upon exit from the thread for an object with
thread storage duration, or upon exit from the program for an object
with static storage duration<a class='hidden_link' href='#footnote-34.sentence-1'>.</a></div></div></div><div id='basic.stc' class='section'><h3 ><a class='secnum' href='#basic.stc' style='min-width:103pt'>6.6.4</a> Storage duration <a class='abbr_ref' href='basic.stc'>[basic.stc]</a></h3><div class='para' id='basic.stc-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3052'>#</a></div><div id='basic.stc-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':storage_duration'></a></span>The <a class='hidden_link' href='#def:storage_duration_' id='def:storage_duration_'><i >storage duration</i></a> is the property of an object that defines the minimum
potential lifetime of the storage containing the object<a class='hidden_link' href='#basic.stc-1.sentence-1'>.</a></div> <div id='basic.stc-1.sentence-2' class='sentence'>The storage
duration is determined by the construct used to create the object and is
one of the following:</div><div id='basic.stc-1.sentence-3' class='sentence'><ul class='itemize'><li id='basic.stc-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc-1.1'>(1.1)</a></div><div id='basic.stc-1.1.sentence-1' class='sentence'>static storage duration</div></li><li id='basic.stc-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc-1.2'>(1.2)</a></div><div id='basic.stc-1.2.sentence-1' class='sentence'>thread storage duration</div></li><li id='basic.stc-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc-1.3'>(1.3)</a></div><div id='basic.stc-1.3.sentence-1' class='sentence'>automatic storage duration</div></li><li id='basic.stc-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc-1.4'>(1.4)</a></div><div id='basic.stc-1.4.sentence-1' class='sentence'>dynamic storage duration</div></li></ul></div></div><div class='para' id='basic.stc-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3066'>#</a></div><div id='basic.stc-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':storage_duration,static'></a></span><span class='indexparent'><a class='index' id=':storage_duration,thread'></a></span><span class='indexparent'><a class='index' id=':storage_duration,automatic'></a></span><span class='indexparent'><a class='index' id=':storage_duration,dynamic'></a></span>Static, thread, and automatic storage durations are associated with objects
introduced by declarations (<a href='basic.def'>[basic.def]</a>) and <a href='#class.temporary'>implicitly created by
the implementation</a><a class='hidden_link' href='#basic.stc-2.sentence-1'>.</a></div> <div id='basic.stc-2.sentence-2' class='sentence'>The dynamic storage duration
is associated with objects created by a
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i><a class='hidden_link' href='#basic.stc-2.sentence-2'>.</a></div></div><div class='para' id='basic.stc-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3077'>#</a></div><div id='basic.stc-3.sentence-1' class='sentence'>The storage duration categories apply to references as well<a class='hidden_link' href='#basic.stc-3.sentence-1'>.</a></div></div><div class='para' id='basic.stc-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3080'>#</a></div><div id='basic.stc-4.sentence-1' class='sentence'>When the end of the duration of a region of storage is reached,
the values of all pointers
representing the address of any part of that region of storage
become <a href='basic.compound#def:invalid_pointer_value'>invalid pointer values</a><a class='hidden_link' href='#basic.stc-4.sentence-1'>.</a></div> <div id='basic.stc-4.sentence-2' class='sentence'>Indirection through an invalid pointer value and
passing an invalid pointer value to a deallocation function
have undefined behavior<a class='hidden_link' href='#basic.stc-4.sentence-2'>.</a></div> <div id='basic.stc-4.sentence-3' class='sentence'>Any other use of an invalid pointer value has
<span class='indexparent'><a class='index' id=':any_use_of_an_invalid_pointer_other_than_to_perform_indirection_or_deallocate'></a></span>implementation-defined
behavior<a class='hidden_link' href='#basic.stc-4.sentence-3'>.</a><a class='footnotenum' href='#footnote-35'>35</a></div></div><div class='footnote' id='footnote-35'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-35'>35)</a></div><div id='footnote-35.sentence-1' class='sentence'>Some implementations might define that
copying an invalid pointer value
causes a system-generated runtime fault<a class='hidden_link' href='#footnote-35.sentence-1'>.</a></div></div><div id='basic.stc.static' class='section'><h4 ><a class='secnum' href='#basic.stc.static' style='min-width:118pt'>6.6.4.1</a> Static storage duration <a class='abbr_ref' href='basic.stc.static'>[basic.stc.static]</a></h4><div class='para' id='basic.stc.static-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.static-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3096'>#</a></div><div id='basic.stc.static-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':storage_duration,static_'></a></span>All variables which do not have dynamic storage duration, do not have thread
storage duration, and are not local
have <a class='hidden_link' href='#def:static_storage_duration' id='def:static_storage_duration'><i >static storage duration</i></a><a class='hidden_link' href='#basic.stc.static-1.sentence-1'>.</a></div> <div id='basic.stc.static-1.sentence-2' class='sentence'>The
storage for these entities shall last for the duration of the
program (<a href='basic.start.static'>[basic.start.static]</a>, <a href='basic.start.term'>[basic.start.term]</a>)<a class='hidden_link' href='#basic.stc.static-1.sentence-2'>.</a></div></div><div class='para' id='basic.stc.static-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.static-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3104'>#</a></div><div id='basic.stc.static-2.sentence-1' class='sentence'>If a variable with static storage duration has initialization or a
destructor with side effects, it shall not be eliminated even if it
appears to be unused, except that a class object or its copy/move may be
eliminated as specified in <a href='class.copy.elision'>[class.copy.elision]</a><a class='hidden_link' href='#basic.stc.static-2.sentence-1'>.</a></div></div><div class='para' id='basic.stc.static-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.static-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3110'>#</a></div><div id='basic.stc.static-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,local_static'></a></span>The keyword <span class='texttt'>static</span> can be used to declare a local variable with
static storage duration<a class='hidden_link' href='#basic.stc.static-3.sentence-1'>.</a></div> <div id='basic.stc.static-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.stc.static-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.stc.static-3.sentence-2' class='sentence'><a href='stmt.dcl'>[stmt.dcl]</a> describes the
initialization of local <span class='texttt'>static</span> variables; <a href='basic.start.term'>[basic.start.term]</a>
describes the destruction of local <span class='texttt'>static</span> variables<a class='hidden_link' href='#basic.stc.static-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.stc.static-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.static-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3117'>#</a></div><div id='basic.stc.static-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member,class_static'></a></span>The keyword <span class='texttt'>static</span> applied to a class data member in a class
definition gives the data member static storage duration<a class='hidden_link' href='#basic.stc.static-4.sentence-1'>.</a></div></div></div><div id='basic.stc.thread' class='section'><h4 ><a class='secnum' href='#basic.stc.thread' style='min-width:118pt'>6.6.4.2</a> Thread storage duration <a class='abbr_ref' href='basic.stc.thread'>[basic.stc.thread]</a></h4><div class='para' id='basic.stc.thread-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.thread-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3124'>#</a></div><div id='basic.stc.thread-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':storage_duration,thread_'></a></span>All variables declared with the <span class='texttt'>thread_&shy;local</span> keyword have <a class='hidden_link' href='#def:thread_storage_duration' id='def:thread_storage_duration'><i >thread
storage duration</i></a><a class='hidden_link' href='#basic.stc.thread-1.sentence-1'>.</a></div> <div id='basic.stc.thread-1.sentence-2' class='sentence'>The storage for these entities shall last for the duration of
the thread in which they are created<a class='hidden_link' href='#basic.stc.thread-1.sentence-2'>.</a></div> <div id='basic.stc.thread-1.sentence-3' class='sentence'>There is a distinct object or reference
per thread, and use of the declared name refers to the entity associated with
the current thread<a class='hidden_link' href='#basic.stc.thread-1.sentence-3'>.</a></div></div><div class='para' id='basic.stc.thread-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.thread-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3132'>#</a></div><div id='basic.stc.thread-2.sentence-1' class='sentence'>A variable with thread storage duration shall be initialized before
its first <a href='basic.def.odr'>odr-use</a> and, if constructed, shall be destroyed on thread exit<a class='hidden_link' href='#basic.stc.thread-2.sentence-1'>.</a></div></div></div><div id='basic.stc.auto' class='section'><h4 ><a class='secnum' href='#basic.stc.auto' style='min-width:118pt'>6.6.4.3</a> Automatic storage duration <a class='abbr_ref' href='basic.stc.auto'>[basic.stc.auto]</a></h4><div class='para' id='basic.stc.auto-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.auto-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3138'>#</a></div><div id='basic.stc.auto-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':storage_duration,automatic_'></a></span><span class='indexparent'><a class='index' id=':storage_duration,local_object'></a></span>Block-scope variables
not explicitly declared <span class='texttt'>static</span>, <span class='texttt'>thread_&shy;local</span>, or <span class='texttt'>extern</span> have
<a class='hidden_link' href='#def:automatic_storage_duration' id='def:automatic_storage_duration'><i >automatic storage duration</i></a><a class='hidden_link' href='#basic.stc.auto-1.sentence-1'>.</a></div> <div id='basic.stc.auto-1.sentence-2' class='sentence'>The storage
for these entities lasts until the block in which they are created exits<a class='hidden_link' href='#basic.stc.auto-1.sentence-2'>.</a></div></div><div class='para' id='basic.stc.auto-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.auto-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3146'>#</a></div><div id='basic.stc.auto-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.stc.auto-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.stc.auto-2.sentence-1' class='sentence'>These variables are initialized and destroyed as described in <a href='stmt.dcl'>[stmt.dcl]</a><a class='hidden_link' href='#basic.stc.auto-2.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.stc.auto-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.auto-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3151'>#</a></div><div id='basic.stc.auto-3.sentence-1' class='sentence'>If a variable with automatic storage duration has initialization or a destructor with side
effects, an implementation shall not destroy it before the end of its block
nor eliminate it as an optimization, even if it appears to be
unused, except that a class object or its copy/move may be eliminated as
specified in <a href='class.copy.elision'>[class.copy.elision]</a><a class='hidden_link' href='#basic.stc.auto-3.sentence-1'>.</a></div></div></div><div id='basic.stc.dynamic' class='section'><h4 ><a class='secnum' href='#basic.stc.dynamic' style='min-width:118pt'>6.6.4.4</a> Dynamic storage duration <a class='abbr_ref' href='basic.stc.dynamic'>[basic.stc.dynamic]</a></h4><span class='indexparent'><a class='index' id=':storage_duration,dynamic_'></a></span><div class='para' id='basic.stc.dynamic-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3161'>#</a></div><div id='basic.stc.dynamic-1.sentence-1' class='sentence'>Objects can be created dynamically during <a href='intro.execution'>program
execution</a>, using
<span class='indexparent'><a class='index' id=':new'></a></span><i ><a href='expr.new#nt:new-expression'>new-expression</a></i><span class='textit'>s</span>, and destroyed using
<span class='indexparent'><a class='index' id=':delete'></a></span><i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i><span class='textit'>s</span><a class='hidden_link' href='#basic.stc.dynamic-1.sentence-1'>.</a></div> <div id='basic.stc.dynamic-1.sentence-2' class='sentence'>A C++ implementation
provides access to, and management of, dynamic storage via the global
<a class='hidden_link' href='#def:allocation_functions' id='def:allocation_functions'><i >allocation functions</i></a> <span class='texttt'>operator new</span> and <span class='texttt'>operator
new[]</span> and the global <a class='hidden_link' href='#def:deallocation_functions' id='def:deallocation_functions'><i >deallocation functions</i></a> <span class='texttt'>operator
delete</span> and <span class='texttt'>operator delete[]</span><a class='hidden_link' href='#basic.stc.dynamic-1.sentence-2'>.</a></div> <div id='basic.stc.dynamic-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.stc.dynamic-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.stc.dynamic-1.sentence-3' class='sentence'>The non-allocating forms described in <a href='new.delete.placement'>[new.delete.placement]</a>
do not perform allocation or deallocation<a class='hidden_link' href='#basic.stc.dynamic-1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.stc.dynamic-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3177'>#</a></div><div id='basic.stc.dynamic-2.sentence-1' class='sentence'>The library provides default definitions for the global allocation and
deallocation functions<a class='hidden_link' href='#basic.stc.dynamic-2.sentence-1'>.</a></div> <div id='basic.stc.dynamic-2.sentence-2' class='sentence'>Some global allocation and deallocation
functions are replaceable (<a href='new.delete'>[new.delete]</a>)<a class='hidden_link' href='#basic.stc.dynamic-2.sentence-2'>.</a></div> <div id='basic.stc.dynamic-2.sentence-3' class='sentence'>A C++ program shall
provide at most one definition of a replaceable allocation or
deallocation function<a class='hidden_link' href='#basic.stc.dynamic-2.sentence-3'>.</a></div> <div id='basic.stc.dynamic-2.sentence-4' class='sentence'>Any such function definition replaces the default
version provided in the library (<a href='replacement.functions'>[replacement.functions]</a>)<a class='hidden_link' href='#basic.stc.dynamic-2.sentence-4'>.</a></div> <div id='basic.stc.dynamic-2.sentence-5' class='sentence'>The
following allocation and deallocation functions (<a href='support.dynamic'>[support.dynamic]</a>)
are implicitly declared in global scope in each translation unit of a
program<a class='hidden_link' href='#basic.stc.dynamic-2.sentence-5'>.</a></div><pre class='codeblock'>
[[nodiscard]] void* operator new(std::size_t);
[[nodiscard]] void* operator new(std::size_t, std::align_val_t);

void operator delete(void*) noexcept;
void operator delete(void*, std::size_t) noexcept;
void operator delete(void*, std::align_val_t) noexcept;
void operator delete(void*, std::size_t, std::align_val_t) noexcept;

[[nodiscard]] void* operator new[](std::size_t);
[[nodiscard]] void* operator new[](std::size_t, std::align_val_t);

void operator delete[](void*) noexcept;
void operator delete[](void*, std::size_t) noexcept;
void operator delete[](void*, std::align_val_t) noexcept;
void operator delete[](void*, std::size_t, std::align_val_t) noexcept;</pre><div id='basic.stc.dynamic-2.sentence-6' class='sentence'>These implicit declarations introduce only the function names
<span class='texttt'>operator</span> <span class='texttt'>new</span>, <span class='texttt'>operator</span> <span class='texttt'>new[]</span>,
<span class='texttt'>operator</span> <span class='texttt'>delete</span>, and <span class='texttt'>operator</span>
<span class='texttt'>delete[]</span><a class='hidden_link' href='#basic.stc.dynamic-2.sentence-6'>.</a></div> <div id='basic.stc.dynamic-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.stc.dynamic-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.stc.dynamic-2.sentence-8' class='sentence'>The implicit declarations do not introduce
the names <span class='texttt'>std</span>,
<span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span>,
<span class='texttt'>std&#x200b;::&#x200b;align_&shy;val_&shy;t</span>,
or any other names that the library uses to
declare these names<a class='hidden_link' href='#basic.stc.dynamic-2.sentence-8'>.</a></div> <div id='basic.stc.dynamic-2.sentence-9' class='sentence'>Thus, a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>,
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> or function call that refers to one of
these functions without including the header <span class='texttt'>&lt;new&gt;</span> is
well-formed<a class='hidden_link' href='#basic.stc.dynamic-2.sentence-9'>.</a></div> <div id='basic.stc.dynamic-2.sentence-10' class='sentence'>However, referring to <span class='texttt'>std</span>
or <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span>
or <span class='texttt'>std&#x200b;::&#x200b;align_&shy;val_&shy;t</span>
is ill-formed unless the name has been declared
by including the appropriate header<a class='hidden_link' href='#basic.stc.dynamic-2.sentence-10'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='basic.stc.dynamic-2.sentence-7' class='sentence'> Allocation and/or
deallocation functions may also be declared and defined for any
class (<a href='class.free'>[class.free]</a>)<a class='hidden_link' href='#basic.stc.dynamic-2.sentence-7'>.</a></div></div><div class='para' id='basic.stc.dynamic-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3225'>#</a></div><div id='basic.stc.dynamic-3.sentence-1' class='sentence'>If the behavior of an allocation or deallocation function
does not satisfy the semantic constraints
specified in <a href='#basic.stc.dynamic.allocation'>[basic.stc.dynamic.allocation]</a>
and <a href='#basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a>,
the behavior is undefined<a class='hidden_link' href='#basic.stc.dynamic-3.sentence-1'>.</a></div></div><div id='basic.stc.dynamic.allocation' class='section'><h4 ><a class='secnum' href='#basic.stc.dynamic.allocation' style='min-width:133pt'>6.6.4.4.1</a> Allocation functions <a class='abbr_ref' href='basic.stc.dynamic.allocation'>[basic.stc.dynamic.allocation]</a></h4><div class='para' id='basic.stc.dynamic.allocation-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.allocation-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3234'>#</a></div><div id='basic.stc.dynamic.allocation-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':function,allocation'></a></span>An allocation function shall be a class member function or a global
function; a program is ill-formed if an allocation function is declared
in a namespace scope other than global scope or declared static in
global scope<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-1'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-2' class='sentence'>The return type shall be <span class='texttt'>void*</span><a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-2'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-3' class='sentence'>The first
parameter shall have type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span> (<a href='support.types'>[support.types]</a>)<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-3'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-4' class='sentence'>The
first parameter shall not have an associated default
argument (<a href='dcl.fct.default'>[dcl.fct.default]</a>)<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-4'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-5' class='sentence'>The value of the first parameter
is interpreted as the requested size of the allocation<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-5'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-6' class='sentence'>An allocation
function can be a function template<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-6'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-7' class='sentence'>Such a template shall declare its
return type and first parameter as specified above (that is, template
parameter types shall not be used in the return type and first parameter
type)<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-7'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-8' class='sentence'>Template allocation functions shall have two or more parameters<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-8'>.</a></div></div><div class='para' id='basic.stc.dynamic.allocation-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.allocation-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3249'>#</a></div><div id='basic.stc.dynamic.allocation-2.sentence-1' class='sentence'>An allocation function attempts to allocate the requested amount of
storage<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-1'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-2' class='sentence'>If it is successful, it returns the address of the start
of a block of storage whose length in bytes is at least as large
as the requested size<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-2'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-3' class='sentence'>The order,
contiguity, and initial value of storage allocated by successive calls
to an allocation function are unspecified<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-3'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-4' class='sentence'>For an allocation function other than
a reserved placement allocation function (<a href='new.delete.placement'>[new.delete.placement]</a>),
the pointer returned is
suitably aligned so that it can be converted to a pointer to any
suitable complete object type (<a href='new.delete.single'>[new.delete.single]</a>)
and then used to access the object or array in the
storage allocated (until the storage is explicitly deallocated by a call
to a corresponding deallocation function)<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-4'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-5' class='sentence'>Even if the size of the space
requested is zero, the request can fail<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-5'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-6' class='sentence'>If the request succeeds, the
value returned by a replaceable allocation function
is a non-null pointer value (<a href='conv.ptr'>[conv.ptr]</a>)
<span class='texttt'>p0</span> different from any previously returned value <span class='texttt'>p1</span>,
unless that value <span class='texttt'>p1</span> was subsequently passed to a
replaceable deallocation function<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-6'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-7' class='sentence'>Furthermore, for the library allocation functions
in <a href='new.delete.single'>[new.delete.single]</a> and <a href='new.delete.array'>[new.delete.array]</a>,
<span class='texttt'>p0</span> represents the address of a block of storage disjoint from the storage
for any other object accessible to the caller<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-7'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-8' class='sentence'>The effect of indirecting through a pointer
returned from a request for zero size is undefined<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-8'>.</a><a class='footnotenum' href='#footnote-36'>36</a></div></div><div class='para' id='basic.stc.dynamic.allocation-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.allocation-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3282'>#</a></div><div id='basic.stc.dynamic.allocation-3.sentence-1' class='sentence'>An allocation function that fails to allocate storage can invoke the
currently installed new-handler function (<a href='new.handler'>[new.handler]</a>), if any<a class='hidden_link' href='#basic.stc.dynamic.allocation-3.sentence-1'>.</a></div> <div id='basic.stc.dynamic.allocation-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.stc.dynamic.allocation-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.stc.dynamic.allocation-3.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':new_handler'></a></span>A program-supplied allocation function can obtain the address of the
currently installed <span class='texttt'>new_&shy;handler</span> using the
<span class='texttt'>std&#x200b;::&#x200b;get_&shy;new_&shy;handler</span> function (<a href='set.new.handler'>[set.new.handler]</a>)<a class='hidden_link' href='#basic.stc.dynamic.allocation-3.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='basic.stc.dynamic.allocation-3.sentence-2' class='sentence'>
An allocation function that has a non-throwing
exception specification (<a href='except.spec'>[except.spec]</a>)
indicates failure by returning
a null pointer value<a class='hidden_link' href='#basic.stc.dynamic.allocation-3.sentence-2'>.</a></div> <div id='basic.stc.dynamic.allocation-3.sentence-3' class='sentence'>Any other allocation function
never returns a null pointer value and
indicates failure only by throwing an exception (<a href='except.throw'>[except.throw]</a>) of a type
that would match a handler (<a href='except.handle'>[except.handle]</a>) of type
<span class='texttt'>std&#x200b;::&#x200b;bad_&shy;alloc</span> (<a href='bad.alloc'>[bad.alloc]</a>)<a class='hidden_link' href='#basic.stc.dynamic.allocation-3.sentence-3'>.</a></div></div><div class='para' id='basic.stc.dynamic.allocation-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.allocation-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3300'>#</a></div><div id='basic.stc.dynamic.allocation-4.sentence-1' class='sentence'>A global allocation function is only called as the result of a <a href='expr.new'>new
expression</a>, or called directly using the <a href='expr.call'>function call</a>
syntax, or called indirectly through calls to the
functions in the C++ standard library<a class='hidden_link' href='#basic.stc.dynamic.allocation-4.sentence-1'>.</a></div> <div id='basic.stc.dynamic.allocation-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.stc.dynamic.allocation-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.stc.dynamic.allocation-4.sentence-2' class='sentence'>In particular, a
global allocation function is not called to allocate storage for objects
with <a href='#basic.stc.static'>static storage duration</a>, for objects or references
with <a href='#basic.stc.thread'>thread storage duration</a>, for objects of
type <a href='expr.typeid'><span class='texttt'>std&#x200b;::&#x200b;type_&shy;info</span></a>, or for an
<a href='except.throw'>exception object</a><a class='hidden_link' href='#basic.stc.dynamic.allocation-4.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-36'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-36'>36)</a></div><div id='footnote-36.sentence-1' class='sentence'>The intent is
to have <span class='texttt'>operator new()</span> implementable by
calling <span class='texttt'>std&#x200b;::&#x200b;malloc()</span> or <span class='texttt'>std&#x200b;::&#x200b;calloc()</span>, so the rules are
substantially the same<a class='hidden_link' href='#footnote-36.sentence-1'>.</a></div> <div id='footnote-36.sentence-2' class='sentence'>C++ differs from C in requiring a zero request
to return a non-null pointer<a class='hidden_link' href='#footnote-36.sentence-2'>.</a></div></div></div><div id='basic.stc.dynamic.deallocation' class='section'><h4 ><a class='secnum' href='#basic.stc.dynamic.deallocation' style='min-width:133pt'>6.6.4.4.2</a> Deallocation functions <a class='abbr_ref' href='basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a></h4><div class='para' id='basic.stc.dynamic.deallocation-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3314'>#</a></div><div id='basic.stc.dynamic.deallocation-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':function,deallocation'></a></span>Deallocation functions shall be class member functions or global
functions; a program is ill-formed if deallocation functions are
declared in a namespace scope other than global scope or declared static
in global scope<a class='hidden_link' href='#basic.stc.dynamic.deallocation-1.sentence-1'>.</a></div></div><div class='para' id='basic.stc.dynamic.deallocation-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3321'>#</a></div><div id='basic.stc.dynamic.deallocation-2.sentence-1' class='sentence'>A deallocation function
is a <a class='hidden_link' href='#def:destroying_operator_delete' id='def:destroying_operator_delete'><i >destroying operator delete</i></a>
if it has at least two parameters
and its second parameter
is of type <span class='texttt'>std&#x200b;::&#x200b;destroying_&shy;delete_&shy;t</span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-2.sentence-1'>.</a></div> <div id='basic.stc.dynamic.deallocation-2.sentence-2' class='sentence'>A destroying operator delete
shall be a class member function named <span class='texttt'>operator delete</span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-2.sentence-2'>.</a></div> <div id='basic.stc.dynamic.deallocation-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.stc.dynamic.deallocation-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.stc.dynamic.deallocation-2.sentence-3' class='sentence'>Array deletion cannot use a destroying operator delete<a class='hidden_link' href='#basic.stc.dynamic.deallocation-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.stc.dynamic.deallocation-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3333'>#</a></div><div id='basic.stc.dynamic.deallocation-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':delete,overloading_and'></a></span>Each deallocation function shall return <span class='texttt'>void</span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-1'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-2' class='sentence'>If the function is a destroying operator delete
declared in class type <span class='texttt'>C</span>,
the type of its first parameter shall be <span class='texttt'>C*</span>;
otherwise, the type of its first
parameter shall be <span class='texttt'>void*</span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-2'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-3' class='sentence'>A deallocation function may have more
than one parameter<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-3'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':deallocation_function,usual'></a></span>A <a class='hidden_link' href='#def:usual_deallocation_function' id='def:usual_deallocation_function'><i >usual deallocation function</i></a> is a deallocation function
whose parameters after the first are
<ul class='itemize'><li id='basic.stc.dynamic.deallocation-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.deallocation-3.1'>(3.1)</a></div><div id='basic.stc.dynamic.deallocation-3.1.sentence-1' class='sentence'>optionally, a parameter of type <span class='texttt'>std&#x200b;::&#x200b;destroying_&shy;delete_&shy;t</span>, then</div></li><li id='basic.stc.dynamic.deallocation-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.deallocation-3.2'>(3.2)</a></div><div id='basic.stc.dynamic.deallocation-3.2.sentence-1' class='sentence'>optionally, a parameter of type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span><a class='footnotenum' href='#footnote-37'>37</a>, then</div></li><li id='basic.stc.dynamic.deallocation-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.deallocation-3.3'>(3.3)</a></div><div id='basic.stc.dynamic.deallocation-3.3.sentence-1' class='sentence'>optionally, a parameter of type <span class='texttt'>std&#x200b;::&#x200b;align_&shy;val_&shy;t</span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.3.sentence-1'>.</a></div></li></ul></div> <div id='basic.stc.dynamic.deallocation-3.sentence-5' class='sentence'>
A destroying operator delete shall be a usual deallocation function<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-5'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-6' class='sentence'>A deallocation function may be an instance of a function
template<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-6'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-7' class='sentence'>Neither the first parameter nor the return type shall depend
on a template parameter<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-7'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-8' class='sentence'>A deallocation
function template shall have two or more function parameters<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-8'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-9' class='sentence'>A template
instance is never a usual deallocation function, regardless of its
signature<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-9'>.</a></div></div><div class='para' id='basic.stc.dynamic.deallocation-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3366'>#</a></div><div id='basic.stc.dynamic.deallocation-4.sentence-1' class='sentence'>If a deallocation function terminates by throwing an exception, the behavior is undefined<a class='hidden_link' href='#basic.stc.dynamic.deallocation-4.sentence-1'>.</a></div> <div id='basic.stc.dynamic.deallocation-4.sentence-2' class='sentence'>The value of the first argument supplied to a deallocation function may
be a null pointer value; if so, and if the deallocation function is one
supplied in the standard library, the call has no effect<a class='hidden_link' href='#basic.stc.dynamic.deallocation-4.sentence-2'>.</a></div></div><div class='para' id='basic.stc.dynamic.deallocation-5'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3372'>#</a></div><div id='basic.stc.dynamic.deallocation-5.sentence-1' class='sentence'>If the argument given to a deallocation function in the standard library
is a pointer that is not the <a href='conv.ptr#def:null_pointer_value'>null pointer value</a>, the
deallocation function shall deallocate the storage referenced by the
pointer, ending the duration of the region of storage<a class='hidden_link' href='#basic.stc.dynamic.deallocation-5.sentence-1'>.</a></div></div><div class='footnote' id='footnote-37'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-37'>37)</a></div><div id='footnote-37.sentence-1' class='sentence'>The global <span class='texttt'>operator delete(void*, std&#x200b;::&#x200b;size_&shy;t)</span>
precludes use of an
allocation function <span class='texttt'>void operator new(std&#x200b;::&#x200b;size_&shy;t, std&#x200b;::&#x200b;size_&shy;t)</span> as a placement
allocation function (<a href='diff.cpp11.basic'>[diff.cpp11.basic]</a>)<a class='hidden_link' href='#footnote-37.sentence-1'>.</a></div></div></div><div id='basic.stc.dynamic.safety' class='section'><h4 ><a class='secnum' href='#basic.stc.dynamic.safety' style='min-width:133pt'>6.6.4.4.3</a> Safely-derived pointers <a class='abbr_ref' href='basic.stc.dynamic.safety'>[basic.stc.dynamic.safety]</a></h4><div class='para' id='basic.stc.dynamic.safety-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.safety-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3380'>#</a></div><div id='basic.stc.dynamic.safety-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':pointer,safely-derived'></a></span><span class='indexparent'><a class='index' id=':pointer,to_traceable_object'></a></span>A <a class='hidden_link' href='#def:traceable_pointer_object' id='def:traceable_pointer_object'><i >traceable pointer object</i></a> is
<ul class='itemize'><li id='basic.stc.dynamic.safety-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-1.1'>(1.1)</a></div><div id='basic.stc.dynamic.safety-1.1.sentence-1' class='sentence'>an object of an <a href='basic.compound#def:object_pointer_type'>object pointer type</a>, or</div></li><li id='basic.stc.dynamic.safety-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-1.2'>(1.2)</a></div><div id='basic.stc.dynamic.safety-1.2.sentence-1' class='sentence'>an object of an integral type that is at least as large as <span class='texttt'>std&#x200b;::&#x200b;intptr_&shy;t</span>,
or</div></li><li id='basic.stc.dynamic.safety-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-1.3'>(1.3)</a></div><div id='basic.stc.dynamic.safety-1.3.sentence-1' class='sentence'>a sequence of elements in an array of
<a href='basic.fundamental#def:type,narrow_character'>narrow character type</a>, where the size and alignment of the sequence
match those of some object pointer type<a class='hidden_link' href='#basic.stc.dynamic.safety-1.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='basic.stc.dynamic.safety-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.safety-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3393'>#</a></div><div id='basic.stc.dynamic.safety-2.sentence-1' class='sentence'>A pointer value is a <a class='hidden_link' href='#def:safely-derived_pointer' id='def:safely-derived_pointer'><i >safely-derived pointer</i></a> to a dynamic object only if it
has an object pointer type and it is one of the following:
<ul class='itemize'><li id='basic.stc.dynamic.safety-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-2.1'>(2.1)</a></div><div id='basic.stc.dynamic.safety-2.1.sentence-1' class='sentence'>the value returned by a call to the C++ standard library implementation of
<span class='texttt'>&#x200b;::&#x200b;operator new(std&#x200b;::&#x200b;&#x200b;size_&shy;t)</span> or
<span class='texttt'>&#x200b;::&#x200b;operator new(std&#x200b;::&#x200b;size_&shy;t, std&#x200b;::&#x200b;align_&shy;val_&shy;t)</span>;<a class='footnotenum' href='#footnote-38'>38</a></div></li><li id='basic.stc.dynamic.safety-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-2.2'>(2.2)</a></div><div id='basic.stc.dynamic.safety-2.2.sentence-1' class='sentence'>the result of taking the address of an object (or one of its
  subobjects) designated by an lvalue resulting from indirection
  through a safely-derived pointer value;</div></li><li id='basic.stc.dynamic.safety-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-2.3'>(2.3)</a></div><div id='basic.stc.dynamic.safety-2.3.sentence-1' class='sentence'>the result of well-defined pointer arithmetic (<a href='expr.add'>[expr.add]</a>) using a safely-derived pointer
value;</div></li><li id='basic.stc.dynamic.safety-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-2.4'>(2.4)</a></div><div id='basic.stc.dynamic.safety-2.4.sentence-1' class='sentence'>the result of a well-defined pointer
conversion (<a href='conv.ptr'>[conv.ptr]</a>, <a href='expr.cast'>[expr.cast]</a>) of a safely-derived pointer value;</div></li><li id='basic.stc.dynamic.safety-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-2.5'>(2.5)</a></div><div id='basic.stc.dynamic.safety-2.5.sentence-1' class='sentence'>the result of a <span class='texttt'>reinterpret_&shy;cast</span> of a safely-derived pointer value;</div></li><li id='basic.stc.dynamic.safety-2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-2.6'>(2.6)</a></div><div id='basic.stc.dynamic.safety-2.6.sentence-1' class='sentence'>the result of a <span class='texttt'>reinterpret_&shy;cast</span> of an integer representation of a
safely-derived pointer value;</div></li><li id='basic.stc.dynamic.safety-2.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-2.7'>(2.7)</a></div><div id='basic.stc.dynamic.safety-2.7.sentence-1' class='sentence'>the value of an object whose value was copied from a traceable pointer object,
where at the time of the copy the source object contained a copy of a safely-derived
pointer value<a class='hidden_link' href='#basic.stc.dynamic.safety-2.7.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='basic.stc.dynamic.safety-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.safety-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3426'>#</a></div><div id='basic.stc.dynamic.safety-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':integer_representation'></a></span><span class='indexparent'><a class='index' id=':pointer,integer_representation_of_safely-derived'></a></span>An integer value is an <a class='hidden_link' href='#def:safely-derived_pointer,integer_representation' id='def:safely-derived_pointer,integer_representation'><i >integer representation of a safely-derived pointer</i></a>
only if its type is at least as large as <span class='texttt'>std&#x200b;::&#x200b;intptr_&shy;t</span> and it is one of the
following:</div><div id='basic.stc.dynamic.safety-3.sentence-2' class='sentence'><ul class='itemize'><li id='basic.stc.dynamic.safety-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-3.1'>(3.1)</a></div><div id='basic.stc.dynamic.safety-3.1.sentence-1' class='sentence'>the result of a <span class='texttt'>reinterpret_&shy;cast</span> of a safely-derived pointer value;</div></li><li id='basic.stc.dynamic.safety-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-3.2'>(3.2)</a></div><div id='basic.stc.dynamic.safety-3.2.sentence-1' class='sentence'>the result of a valid conversion of an integer representation of a safely-derived
pointer value;</div></li><li id='basic.stc.dynamic.safety-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-3.3'>(3.3)</a></div><div id='basic.stc.dynamic.safety-3.3.sentence-1' class='sentence'>the value of an object whose value was copied from a traceable pointer object,
where at the time of the copy the source object contained an integer representation of a
safely-derived pointer value;</div></li><li id='basic.stc.dynamic.safety-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.stc.dynamic.safety-3.4'>(3.4)</a></div><div id='basic.stc.dynamic.safety-3.4.sentence-1' class='sentence'>the result of an additive or bitwise operation, one of whose operands is an
integer representation of a safely-derived pointer value <span class='texttt'>P</span>, if that result
converted by <span class='texttt'>reinterpret_&shy;cast&lt;void*&gt;</span> would compare equal to a safely-derived
pointer computable from <span class='texttt'>reinterpret_&shy;cast&lt;void*&gt;(P)</span><a class='hidden_link' href='#basic.stc.dynamic.safety-3.4.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='basic.stc.dynamic.safety-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.safety-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3449'>#</a></div><div id='basic.stc.dynamic.safety-4.sentence-1' class='sentence'>An implementation may have <a class='hidden_link' href='#def:relaxed_pointer_safety' id='def:relaxed_pointer_safety'><i >relaxed pointer safety</i></a>, in which case the
validity of a pointer value does not depend on whether it is a safely-derived
pointer value<a class='hidden_link' href='#basic.stc.dynamic.safety-4.sentence-1'>.</a></div> <div id='basic.stc.dynamic.safety-4.sentence-2' class='sentence'>Alternatively, an implementation may have <a class='hidden_link' href='#def:strict_pointer_safety' id='def:strict_pointer_safety'><i >strict pointer
safety</i></a>, in which case a pointer value referring to an object with dynamic
storage duration that is not a safely-derived pointer
value is an invalid pointer value unless
the referenced complete object has previously been declared
reachable (<a href='util.dynamic.safety'>[util.dynamic.safety]</a>)<a class='hidden_link' href='#basic.stc.dynamic.safety-4.sentence-2'>.</a></div> <div id='basic.stc.dynamic.safety-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.stc.dynamic.safety-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.stc.dynamic.safety-4.sentence-4' class='sentence'>The effect of using an invalid pointer value (including passing it to a
deallocation function) is undefined, see <a href='#basic.stc'>[basic.stc]</a><a class='hidden_link' href='#basic.stc.dynamic.safety-4.sentence-4'>.</a></div> <div id='basic.stc.dynamic.safety-4.sentence-5' class='sentence'>This is true even if the unsafely-derived pointer value might compare equal to
some safely-derived pointer value<a class='hidden_link' href='#basic.stc.dynamic.safety-4.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='basic.stc.dynamic.safety-4.sentence-3' class='sentence'> It is
<span class='indexparent'><a class='index' id=':whether_an_implementation_has_relaxed_or_strict_pointer_safety'></a></span>implementation-defined whether an implementation has relaxed or strict pointer safety<a class='hidden_link' href='#basic.stc.dynamic.safety-4.sentence-3'>.</a></div> </div><div class='footnote' id='footnote-38'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-38'>38)</a></div><div id='footnote-38.sentence-1' class='sentence'>This subclause does not impose restrictions
on indirection through pointers to memory not allocated by <span class='texttt'>&#x200b;::&#x200b;operator new</span><a class='hidden_link' href='#footnote-38.sentence-1'>.</a></div> <div id='footnote-38.sentence-2' class='sentence'>This
maintains the ability of many C++ implementations to use binary libraries and
components written in other languages<a class='hidden_link' href='#footnote-38.sentence-2'>.</a></div> <div id='footnote-38.sentence-3' class='sentence'>In particular, this applies to C binaries,
because indirection through pointers to memory allocated by <span class='texttt'>std&#x200b;::&#x200b;malloc</span> is not restricted<a class='hidden_link' href='#footnote-38.sentence-3'>.</a></div></div></div></div><div id='basic.stc.inherit' class='section'><h4 ><a class='secnum' href='#basic.stc.inherit' style='min-width:118pt'>6.6.4.5</a> Duration of subobjects <a class='abbr_ref' href='basic.stc.inherit'>[basic.stc.inherit]</a></h4><div class='para' id='basic.stc.inherit-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.inherit-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3469'>#</a></div><div id='basic.stc.inherit-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':storage_duration,class_member'></a></span>The storage duration of subobjects and reference members
is that of their complete object (<a href='#intro.object'>[intro.object]</a>)<a class='hidden_link' href='#basic.stc.inherit-1.sentence-1'>.</a></div> </div></div></div><div id='basic.align' class='section'><h3 ><a class='secnum' href='#basic.align' style='min-width:103pt'>6.6.5</a> Alignment <a class='abbr_ref' href='basic.align'>[basic.align]</a></h3><div class='para' id='basic.align-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3477'>#</a></div><div id='basic.align-1.sentence-1' class='sentence'>Object types have <a class='hidden_link' href='#def:alignment_requirement,implementation-defined' id='def:alignment_requirement,implementation-defined'><i >alignment requirements</i></a> (<a href='basic.fundamental'>[basic.fundamental]</a>, <a href='basic.compound'>[basic.compound]</a>)
which place restrictions on the addresses at which an object of that type
may be allocated<a class='hidden_link' href='#basic.align-1.sentence-1'>.</a></div> <div id='basic.align-1.sentence-2' class='sentence'>An <a class='hidden_link' href='#def:alignment' id='def:alignment'><i >alignment</i></a> is an <span class='indexparent'><a class='index' id=':alignment'></a></span>implementation-defined
integer value representing the number of bytes between successive addresses
at which a given object can be allocated<a class='hidden_link' href='#basic.align-1.sentence-2'>.</a></div> <div id='basic.align-1.sentence-3' class='sentence'>An object type imposes an alignment
requirement on every object of that type; stricter alignment can be requested
using the <a href='dcl.align'>alignment specifier</a><a class='hidden_link' href='#basic.align-1.sentence-3'>.</a></div></div><div class='para' id='basic.align-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3486'>#</a></div><div id='basic.align-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':alignment,fundamental'></a></span>A <a class='hidden_link' href='#def:fundamental_alignment' id='def:fundamental_alignment'><i >fundamental alignment</i></a> is represented by an alignment
less than or equal to the greatest alignment supported by the implementation in
all contexts, which is equal to
<span class='texttt'>alignof(std&#x200b;::&#x200b;max_&shy;align_&shy;t)</span> (<a href='support.types'>[support.types]</a>)<a class='hidden_link' href='#basic.align-2.sentence-1'>.</a></div> <div id='basic.align-2.sentence-2' class='sentence'>The alignment required for a type might be different when it is used as the type
of a complete object and when it is used as the type of a subobject<a class='hidden_link' href='#basic.align-2.sentence-2'>.</a></div> <div id='basic.align-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#basic.align-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B { long double d; };
struct D : virtual B { char c; };</pre><div id='basic.align-2.sentence-4' class='sentence'>When <span class='texttt'>D</span> is the type of a complete object, it will have a subobject of
type <span class='texttt'>B</span>, so it must be aligned appropriately for a <span class='texttt'>long double</span><a class='hidden_link' href='#basic.align-2.sentence-4'>.</a></div> <div id='basic.align-2.sentence-5' class='sentence'>If <span class='texttt'>D</span> appears as a subobject of another object that also has <span class='texttt'>B</span>
as a virtual base class, the <span class='texttt'>B</span> subobject might be part of a different
subobject, reducing the alignment requirements on the <span class='texttt'>D</span> subobject<a class='hidden_link' href='#basic.align-2.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='basic.align-2.sentence-3' class='sentence'> The result of the <span class='texttt'>alignof</span> operator reflects the alignment
requirement of the type in the complete-object case<a class='hidden_link' href='#basic.align-2.sentence-3'>.</a></div></div><div class='para' id='basic.align-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3507'>#</a></div><div id='basic.align-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':alignment,extended'></a></span><span class='indexparent'><a class='index' id=':alignment,new-extended'></a></span>An <a class='hidden_link' href='#def:extended_alignment' id='def:extended_alignment'><i >extended alignment</i></a> is represented by an alignment
greater than <span class='texttt'>alignof(std&#x200b;::&#x200b;max_&shy;align_&shy;t)</span><a class='hidden_link' href='#basic.align-3.sentence-1'>.</a></div> <div id='basic.align-3.sentence-2' class='sentence'>It is <span class='indexparent'><a class='index' id=':support_for_extended_alignments'></a></span>implementation-defined
whether any extended alignments are supported and the contexts in which they are
supported (<a href='dcl.align'>[dcl.align]</a>)<a class='hidden_link' href='#basic.align-3.sentence-2'>.</a></div> <div id='basic.align-3.sentence-3' class='sentence'>A type having an extended alignment
requirement is an <a class='hidden_link' href='#def:type,over-aligned' id='def:type,over-aligned'><i >over-aligned type</i></a><a class='hidden_link' href='#basic.align-3.sentence-3'>.</a></div> <div id='basic.align-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.align-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.align-3.sentence-5' class='sentence'>Every over-aligned type is or contains a class type
to which extended alignment applies (possibly through a non-static data member)<a class='hidden_link' href='#basic.align-3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='basic.align-3.sentence-4' class='sentence'>
A <a class='hidden_link' href='#def:new-extended_alignment' id='def:new-extended_alignment'><i >new-extended alignment</i></a> is represented by
an alignment greater than <span class='texttt'>__STDCPP_&shy;DEFAULT_&shy;NEW_&shy;ALIGNMENT__</span> (<a href='cpp.predefined'>[cpp.predefined]</a>)<a class='hidden_link' href='#basic.align-3.sentence-4'>.</a></div></div><div class='para' id='basic.align-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3522'>#</a></div><div id='basic.align-4.sentence-1' class='sentence'>Alignments are represented as values of the type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span><a class='hidden_link' href='#basic.align-4.sentence-1'>.</a></div> <div id='basic.align-4.sentence-2' class='sentence'>Valid alignments include only those values returned by an <span class='texttt'>alignof</span>
expression for the fundamental types plus an additional <span class='indexparent'><a class='index' id=':alignment_additional_values'></a></span>implementation-defined
set of values, which may be empty<a class='hidden_link' href='#basic.align-4.sentence-2'>.</a></div> <div id='basic.align-4.sentence-3' class='sentence'>Every alignment value shall be a non-negative integral power of two<a class='hidden_link' href='#basic.align-4.sentence-3'>.</a></div></div><div class='para' id='basic.align-5'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3530'>#</a></div><div id='basic.align-5.sentence-1' class='sentence'>Alignments have an order from <a class='hidden_link' href='#def:alignment,weaker' id='def:alignment,weaker'><i >weaker</i></a> to
<a class='hidden_link' href='#def:alignment,stronger' id='def:alignment,stronger'><i >stronger</i></a> or <a class='hidden_link' href='#def:alignment,stricter' id='def:alignment,stricter'><i >stricter</i></a> alignments<a class='hidden_link' href='#basic.align-5.sentence-1'>.</a></div> <div id='basic.align-5.sentence-2' class='sentence'>Stricter
alignments have larger alignment values<a class='hidden_link' href='#basic.align-5.sentence-2'>.</a></div> <div id='basic.align-5.sentence-3' class='sentence'>An address that satisfies an alignment
requirement also satisfies any weaker valid alignment requirement<a class='hidden_link' href='#basic.align-5.sentence-3'>.</a></div></div><div class='para' id='basic.align-6'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3536'>#</a></div><div id='basic.align-6.sentence-1' class='sentence'>The alignment requirement of a complete type can be queried using an
<a href='expr.alignof'><span class='texttt'>alignof</span> expression</a><a class='hidden_link' href='#basic.align-6.sentence-1'>.</a></div> <div id='basic.align-6.sentence-2' class='sentence'>Furthermore,
the <a href='basic.fundamental#def:type,narrow_character'>narrow character types</a> shall have the weakest
alignment requirement<a class='hidden_link' href='#basic.align-6.sentence-2'>.</a></div> <div id='basic.align-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.align-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.align-6.sentence-3' class='sentence'>This enables the narrow character types to be used as the
underlying type for an aligned memory area (<a href='dcl.align'>[dcl.align]</a>)<a class='hidden_link' href='#basic.align-6.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.align-7'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3544'>#</a></div><div id='basic.align-7.sentence-1' class='sentence'>Comparing alignments is meaningful and provides the obvious results:</div><div id='basic.align-7.sentence-2' class='sentence'><ul class='itemize'><li id='basic.align-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.align-7.1'>(7.1)</a></div><div id='basic.align-7.1.sentence-1' class='sentence'>Two alignments are equal when their numeric values are equal<a class='hidden_link' href='#basic.align-7.1.sentence-1'>.</a></div></li><li id='basic.align-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.align-7.2'>(7.2)</a></div><div id='basic.align-7.2.sentence-1' class='sentence'>Two alignments are different when their numeric values are not equal<a class='hidden_link' href='#basic.align-7.2.sentence-1'>.</a></div></li><li id='basic.align-7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#basic.align-7.3'>(7.3)</a></div><div id='basic.align-7.3.sentence-1' class='sentence'>When an alignment is larger than another it represents a stricter alignment<a class='hidden_link' href='#basic.align-7.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='basic.align-8'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3553'>#</a></div><div id='basic.align-8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#basic.align-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='basic.align-8.sentence-1' class='sentence'>The runtime pointer alignment function (<a href='ptr.align'>[ptr.align]</a>)
can be used to obtain an aligned pointer within a buffer; the aligned-storage templates
in the library (<a href='meta.trans.other'>[meta.trans.other]</a>) can be used to obtain aligned storage<a class='hidden_link' href='#basic.align-8.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='basic.align-9'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3559'>#</a></div><div id='basic.align-9.sentence-1' class='sentence'>If a request for a specific extended alignment in a specific context is not
supported by an implementation, the program is ill-formed<a class='hidden_link' href='#basic.align-9.sentence-1'>.</a></div></div></div><div id='class.temporary' class='section'><h3 ><a class='secnum' href='#class.temporary' style='min-width:103pt'>6.6.6</a> Temporary objects <a class='abbr_ref' href='class.temporary'>[class.temporary]</a></h3><div class='para' id='class.temporary-1'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3565'>#</a></div><div id='class.temporary-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':temporary'></a></span><span class='indexparent'><a class='index' id=':temporary,elimination_of'></a></span><span class='indexparent'><a class='index' id=':temporary,implementation-defined_generation_of'></a></span>Temporary objects are created
<ul class='itemize'><li id='class.temporary-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-1.1'>(1.1)</a></div><div id='class.temporary-1.1.sentence-1' class='sentence'>when a prvalue is materialized so that it can be used as a glvalue (<a href='conv.rval'>[conv.rval]</a>),</div></li><li id='class.temporary-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-1.2'>(1.2)</a></div><div id='class.temporary-1.2.sentence-1' class='sentence'>when needed by the implementation to pass or return an object of trivially-copyable type (see below),
and</div></li><li id='class.temporary-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-1.3'>(1.3)</a></div><div id='class.temporary-1.3.sentence-1' class='sentence'>when throwing an exception (<a href='except.throw'>[except.throw]</a>)<a class='hidden_link' href='#class.temporary-1.3.sentence-1'>.</a></div> <div id='class.temporary-1.3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.temporary-1.3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.temporary-1.3.sentence-2' class='sentence'>The lifetime of exception objects is described in <a href='except.throw'>[except.throw]</a><a class='hidden_link' href='#class.temporary-1.3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul>
Even when the creation of the temporary object is
unevaluated (<a href='expr.prop'>[expr.prop]</a>),
all the semantic restrictions shall be respected as if the temporary object
had been created and later destroyed<a class='hidden_link' href='#class.temporary-1.sentence-1'>.</a></div> <div id='class.temporary-1.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.temporary-1.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.temporary-1.sentence-2' class='sentence'>This includes accessibility (<a href='class.access'>[class.access]</a>) and whether it is deleted,
for the constructor selected and for the destructor<a class='hidden_link' href='#class.temporary-1.sentence-2'>.</a></div> <div id='class.temporary-1.sentence-3' class='sentence'>However, in the special
case of the operand of a
<i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i> (<a href='expr.call'>[expr.call]</a>), no temporary is introduced,
so the foregoing does not apply to such a prvalue<a class='hidden_link' href='#class.temporary-1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.temporary-2'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3596'>#</a></div><div id='class.temporary-2.sentence-1' class='sentence'>The materialization of a temporary object is generally
delayed as long as possible
in order to avoid creating unnecessary temporary objects<a class='hidden_link' href='#class.temporary-2.sentence-1'>.</a></div> <div id='class.temporary-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.temporary-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.temporary-2.sentence-2' class='sentence'>Temporary objects are materialized:
<ul class='itemize'><li id='class.temporary-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-2.1'>(2.1)</a></div><div id='class.temporary-2.1.sentence-1' class='sentence'>when binding a reference to a prvalue (<a href='dcl.init.ref'>[dcl.init.ref]</a>, <a href='expr.type.conv'>[expr.type.conv]</a>,
<a href='expr.dynamic.cast'>[expr.dynamic.cast]</a>, <a href='expr.static.cast'>[expr.static.cast]</a>, <a href='expr.const.cast'>[expr.const.cast]</a>, <a href='expr.cast'>[expr.cast]</a>),</div></li><li id='class.temporary-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-2.2'>(2.2)</a></div><div id='class.temporary-2.2.sentence-1' class='sentence'>when performing member access on a class prvalue (<a href='expr.ref'>[expr.ref]</a>, <a href='expr.mptr.oper'>[expr.mptr.oper]</a>),</div></li><li id='class.temporary-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-2.3'>(2.3)</a></div><div id='class.temporary-2.3.sentence-1' class='sentence'>when performing an array-to-pointer conversion or subscripting on an array prvalue (<a href='conv.array'>[conv.array]</a>, <a href='expr.sub'>[expr.sub]</a>),</div></li><li id='class.temporary-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-2.4'>(2.4)</a></div><div id='class.temporary-2.4.sentence-1' class='sentence'>when initializing an object of type <span class='texttt'>std&#x200b;::&#x200b;initializer_&shy;list&lt;T&gt;</span> from a <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i> (<a href='dcl.init.list'>[dcl.init.list]</a>),</div></li><li id='class.temporary-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-2.5'>(2.5)</a></div><div id='class.temporary-2.5.sentence-1' class='sentence'>for certain unevaluated operands (<a href='expr.typeid'>[expr.typeid]</a>, <a href='expr.sizeof'>[expr.sizeof]</a>), and</div></li><li id='class.temporary-2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-2.6'>(2.6)</a></div><div id='class.temporary-2.6.sentence-1' class='sentence'>when a prvalue appears as a discarded-value expression (<a href='expr.prop'>[expr.prop]</a>)<a class='hidden_link' href='#class.temporary-2.6.sentence-1'>.</a></div></li></ul></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.temporary-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.temporary-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.temporary-2.sentence-3' class='sentence'>Consider the following code:
<pre class='codeblock'>
class X {
public:
  X(int);
  X(const X&amp;);
  X&amp; operator=(const X&amp;);
  ~X();
};

class Y {
public:
  Y(int);
  Y(Y&amp;&amp;);
  ~Y();
};

X f(X);
Y g(Y);

void h() {
  X a(1);
  X b = f(X(2));
  Y c = g(Y(3));
  a = f(a);
}</pre></div><div id='class.temporary-2.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':constructor,copy'></a></span><span class='texttt'>X(2)</span> is constructed in the space used to hold <span class='texttt'>f()</span>'s argument and
<span class='texttt'>Y(3)</span> is constructed in the space used to hold <span class='texttt'>g()</span>'s argument<a class='hidden_link' href='#class.temporary-2.sentence-4'>.</a></div> <div id='class.temporary-2.sentence-5' class='sentence'>Likewise,
<span class='texttt'>f()</span>'s result is constructed directly in <span class='texttt'>b</span> and
<span class='texttt'>g()</span>'s result is constructed directly in <span class='texttt'>c</span><a class='hidden_link' href='#class.temporary-2.sentence-5'>.</a></div> <div id='class.temporary-2.sentence-6' class='sentence'>On the other hand, the expression
<span class='texttt'>a = f(a)</span>
requires a temporary for
the result of <span class='texttt'>f(a)</span>,
which is materialized so that the reference parameter
of <span class='texttt'>A&#x200b;::&#x200b;operator=(const A&amp;)</span> can bind to it<a class='hidden_link' href='#class.temporary-2.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.temporary-3'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3661'>#</a></div><div id='class.temporary-3.sentence-1' class='sentence'>When an object of class type <span class='texttt'>X</span>
is passed to or returned from a function,
if each copy constructor, move constructor, and destructor of <span class='texttt'>X</span>
is either trivial or deleted,
and <span class='texttt'>X</span>
has at least one non-deleted copy or move constructor,
implementations are permitted
to create a temporary object
to hold the function parameter or result object<a class='hidden_link' href='#class.temporary-3.sentence-1'>.</a></div> <div id='class.temporary-3.sentence-2' class='sentence'>The temporary object is constructed
from the function argument or return value, respectively,
and the function's parameter or return object
is initialized as if by
using the non-deleted trivial constructor to copy the temporary
(even if that constructor is inaccessible
or would not be selected by overload resolution
to perform a copy or move of the object)<a class='hidden_link' href='#class.temporary-3.sentence-2'>.</a></div> <div id='class.temporary-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.temporary-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.temporary-3.sentence-3' class='sentence'>This latitude is granted to allow objects of class type to be passed to or returned from functions in registers<a class='hidden_link' href='#class.temporary-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.temporary-4'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3683'>#</a></div><div id='class.temporary-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':temporary,constructor_for'></a></span><span class='indexparent'><a class='index' id=':temporary,destructor_for'></a></span><span class='indexparent'><a class='index' id=':temporary,destruction_of'></a></span>When an implementation introduces a temporary object of a class that has a
non-trivial constructor (<a href='class.ctor'>[class.ctor]</a>, <a href='class.copy.ctor'>[class.copy.ctor]</a>),
it shall ensure that a constructor is called for the temporary object<a class='hidden_link' href='#class.temporary-4.sentence-1'>.</a></div> <div id='class.temporary-4.sentence-2' class='sentence'>Similarly, the destructor shall be called for a temporary with a non-trivial
destructor (<a href='class.dtor'>[class.dtor]</a>)<a class='hidden_link' href='#class.temporary-4.sentence-2'>.</a></div> <div id='class.temporary-4.sentence-3' class='sentence'>Temporary objects are destroyed as the last step
in evaluating
the full-expression (<a href='intro.execution'>[intro.execution]</a>)
that (lexically) contains the point where
they were created<a class='hidden_link' href='#class.temporary-4.sentence-3'>.</a></div> <div id='class.temporary-4.sentence-4' class='sentence'>This is true even if that evaluation ends in throwing an exception<a class='hidden_link' href='#class.temporary-4.sentence-4'>.</a></div> <div id='class.temporary-4.sentence-5' class='sentence'>The
<span class='indexparent'><a class='index' id=':value_computation'></a></span>value computations and
<span class='indexparent'><a class='index' id=':side_effects'></a></span>side effects of destroying a temporary object
are associated only with the full-expression, not with any specific
subexpression<a class='hidden_link' href='#class.temporary-4.sentence-5'>.</a></div></div><div class='para' id='class.temporary-5'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3706'>#</a></div><div id='class.temporary-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initializer,temporary_and_declarator'></a></span><span class='indexparent'><a class='index' id=':temporary,order_of_destruction_of'></a></span>There are three contexts in which temporaries are destroyed at a different
point than the end of the full-expression<a class='hidden_link' href='#class.temporary-5.sentence-1'>.</a></div> <div id='class.temporary-5.sentence-2' class='sentence'>The first context is when a default constructor is called to initialize
an element of an array with no corresponding initializer (<a href='dcl.init'>[dcl.init]</a>)<a class='hidden_link' href='#class.temporary-5.sentence-2'>.</a></div> <div id='class.temporary-5.sentence-3' class='sentence'>The second context is when a copy constructor is called to copy an element of
an array while the entire array is copied (<a href='expr.prim.lambda.capture'>[expr.prim.lambda.capture]</a>, <a href='class.copy.ctor'>[class.copy.ctor]</a>)<a class='hidden_link' href='#class.temporary-5.sentence-3'>.</a></div> <div id='class.temporary-5.sentence-4' class='sentence'>In either case, if the constructor has one or more default arguments,
the destruction of every temporary created in a default argument is
sequenced before the construction of the next array element, if any<a class='hidden_link' href='#class.temporary-5.sentence-4'>.</a></div></div><div class='para' id='class.temporary-6'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3719'>#</a></div><div id='class.temporary-6.sentence-1' class='sentence'>The third context is when a reference is bound to a
temporary object<a class='hidden_link' href='#class.temporary-6.sentence-1'>.</a><a class='footnotenum' href='#footnote-39'>39</a></div> <div id='class.temporary-6.sentence-2' class='sentence'>
The temporary object to which the reference is bound or the temporary object
that is the complete object of a subobject to which the reference is bound
persists for the lifetime of the reference if the glvalue
to which the reference is bound
was obtained through one of the following:
<ul class='itemize'><li id='class.temporary-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.1'>(6.1)</a></div><div id='class.temporary-6.1.sentence-1' class='sentence'>a temporary materialization conversion (<a href='conv.rval'>[conv.rval]</a>),</div></li><li id='class.temporary-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.2'>(6.2)</a></div><div id='class.temporary-6.2.sentence-1' class='sentence'><span class='texttt'>(</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='texttt'>)</span>,
  where <i ><a href='expr.comma#nt:expression'>expression</a></i> is one of these expressions,</div></li><li id='class.temporary-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.3'>(6.3)</a></div><div id='class.temporary-6.3.sentence-1' class='sentence'>subscripting (<a href='expr.sub'>[expr.sub]</a>) of an array operand,
  where that operand is one of these expressions,</div></li><li id='class.temporary-6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.4'>(6.4)</a></div><div id='class.temporary-6.4.sentence-1' class='sentence'>a class member access (<a href='expr.ref'>[expr.ref]</a>) using the <span class='texttt'>.</span> operator
  where the left operand is one of these expressions and
  the right operand designates a non-static data member of non-reference type,</div></li><li id='class.temporary-6.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.5'>(6.5)</a></div><div id='class.temporary-6.5.sentence-1' class='sentence'>a pointer-to-member operation (<a href='expr.mptr.oper'>[expr.mptr.oper]</a>) using the <span class='texttt'>.*</span> operator
  where the left operand is one of these expressions and
  the right operand is a pointer to data member of non-reference type,</div></li><li id='class.temporary-6.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.6'>(6.6)</a></div><div id='class.temporary-6.6.sentence-1' class='sentence'>a
  <ul class='itemize'><li id='class.temporary-6.6.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#class.temporary-6.6.1'>(6.6.1)</a></div><div id='class.temporary-6.6.1.sentence-1' class='sentence'>
  <span class='texttt'>const_&shy;cast</span> (<a href='expr.const.cast'>[expr.const.cast]</a>),</div></li><li id='class.temporary-6.6.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#class.temporary-6.6.2'>(6.6.2)</a></div><div id='class.temporary-6.6.2.sentence-1' class='sentence'><span class='texttt'>static_&shy;cast</span> (<a href='expr.static.cast'>[expr.static.cast]</a>),</div></li><li id='class.temporary-6.6.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#class.temporary-6.6.3'>(6.6.3)</a></div><div id='class.temporary-6.6.3.sentence-1' class='sentence'><span class='texttt'>dynamic_&shy;cast</span> (<a href='expr.dynamic.cast'>[expr.dynamic.cast]</a>), or</div></li><li id='class.temporary-6.6.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#class.temporary-6.6.4'>(6.6.4)</a></div><div id='class.temporary-6.6.4.sentence-1' class='sentence'><span class='texttt'>reinterpret_&shy;cast</span> (<a href='expr.reinterpret.cast'>[expr.reinterpret.cast]</a>)</div></li></ul>
  converting, without a user-defined conversion,
  a glvalue operand that is one of these expressions
  to a glvalue that refers
  to the object designated by the operand, or
  to its complete object or a subobject thereof,</div></li><li id='class.temporary-6.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.7'>(6.7)</a></div><div id='class.temporary-6.7.sentence-1' class='sentence'>a conditional expression (<a href='expr.cond'>[expr.cond]</a>) that is a glvalue
  where the second or third operand is one of these expressions, or</div></li><li id='class.temporary-6.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.8'>(6.8)</a></div><div id='class.temporary-6.8.sentence-1' class='sentence'>a comma expression (<a href='expr.comma'>[expr.comma]</a>) that is a glvalue
  where the right operand is one of these expressions<a class='hidden_link' href='#class.temporary-6.8.sentence-1'>.</a></div></li></ul></div> <div id='class.temporary-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.temporary-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; using id = T;

int i = 1;
int&amp;&amp; a = id&lt;int[3]&gt;{1, 2, 3}[i];          <span class='comment'>// temporary array has same lifetime as <span class='tcode_in_codeblock'>a</span>
</span>const int&amp; b = static_cast&lt;const int&amp;&gt;(0); <span class='comment'>// temporary <span class='tcode_in_codeblock'>int</span> has same lifetime as <span class='tcode_in_codeblock'>b</span>
</span>int&amp;&amp; c = cond ? id&lt;int[3]&gt;{1, 2, 3}[i] : static_cast&lt;int&amp;&amp;&gt;(0);
                                           <span class='comment'>// exactly one of the two temporaries is lifetime-extended
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.temporary-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.temporary-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.temporary-6.sentence-3' class='sentence'>An explicit type conversion (<a href='expr.type.conv'>[expr.type.conv]</a>, <a href='expr.cast'>[expr.cast]</a>)
is interpreted as
a sequence of elementary casts,
covered above<a class='hidden_link' href='#class.temporary-6.sentence-3'>.</a></div> <div id='class.temporary-6.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.temporary-6.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
const int&amp; x = (const int&amp;)1;  <span class='comment'>// temporary for value 1 has same lifetime as x
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.temporary-6.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.temporary-6.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.temporary-6.sentence-4' class='sentence'>If a temporary object has a reference member initialized by another temporary object,
lifetime extension applies recursively to such a member's initializer<a class='hidden_link' href='#class.temporary-6.sentence-4'>.</a></div> <div id='class.temporary-6.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.temporary-6.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  const int&amp; m;
};
const S&amp; s = S{1};             <span class='comment'>// both <span class='tcode_in_codeblock'>S</span> and <span class='tcode_in_codeblock'>int</span> temporaries have lifetime of <span class='tcode_in_codeblock'>s</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <div id='class.temporary-6.sentence-5' class='sentence'>The exceptions to this lifetime rule are:
<ul class='itemize'><li id='class.temporary-6.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.9'>(6.9)</a></div><div id='class.temporary-6.9.sentence-1' class='sentence'>A temporary object bound to a reference parameter in a function call (<a href='expr.call'>[expr.call]</a>)
persists until the completion of the full-expression containing the call<a class='hidden_link' href='#class.temporary-6.9.sentence-1'>.</a></div></li><li id='class.temporary-6.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.10'>(6.10)</a></div><div id='class.temporary-6.10.sentence-1' class='sentence'>The lifetime of a temporary bound to the returned value in a function <span class='texttt'>return</span> statement (<a href='stmt.return'>[stmt.return]</a>) is not extended; the temporary is destroyed at the end of the full-expression in the <span class='texttt'>return</span> statement<a class='hidden_link' href='#class.temporary-6.10.sentence-1'>.</a></div></li><li id='class.temporary-6.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.temporary-6.11'>(6.11)</a></div><div id='class.temporary-6.11.sentence-1' class='sentence'>A temporary bound to a reference in a <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i> persists until the completion of the full-expression containing the <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i><a class='hidden_link' href='#class.temporary-6.11.sentence-1'>.</a></div> <div id='class.temporary-6.11.note-3' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.temporary-6.11.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.temporary-6.11.sentence-2' class='sentence'>This may introduce a dangling reference<a class='hidden_link' href='#class.temporary-6.11.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.temporary-6.11.example-4' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.temporary-6.11.example-4'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S { int mi; const std::pair&lt;int,int&gt;&amp; mp; };
S a { 1, {2,3} };
S* p = new S{ 1, {2,3} };      <span class='comment'>// creates dangling reference
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div></div><div class='para' id='class.temporary-7'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3819'>#</a></div><div id='class.temporary-7.sentence-1' class='sentence'>The destruction of a temporary whose lifetime is not extended by being
bound to a reference is sequenced before the destruction of every
temporary which is constructed earlier in the same full-expression<a class='hidden_link' href='#class.temporary-7.sentence-1'>.</a></div> <div id='class.temporary-7.sentence-2' class='sentence'>If the lifetime of two or more temporaries to which references are bound ends
at the same point,
these temporaries are destroyed at that point in the reverse order of the
completion of their construction<a class='hidden_link' href='#class.temporary-7.sentence-2'>.</a></div> <div id='class.temporary-7.sentence-3' class='sentence'>In addition, the destruction of temporaries bound to references shall
take into account the ordering of destruction of objects with static, thread, or
automatic storage duration (<a href='#basic.stc.static'>[basic.stc.static]</a>, <a href='#basic.stc.thread'>[basic.stc.thread]</a>, <a href='#basic.stc.auto'>[basic.stc.auto]</a>);
that is, if
<span class='texttt'>obj1</span>
is an object with the same storage duration as the temporary and
created before the temporary is created
the temporary shall be destroyed before
<span class='texttt'>obj1</span>
is destroyed;
if
<span class='texttt'>obj2</span>
is an object with the same storage duration as the temporary and
created after the temporary is created
the temporary shall be destroyed after
<span class='texttt'>obj2</span>
is destroyed<a class='hidden_link' href='#class.temporary-7.sentence-3'>.</a></div></div><div class='para' id='class.temporary-8'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e160ea1300e21eb412feaa7733f1e7cd0e1875d8/source/basic.tex#L3845'>#</a></div><div id='class.temporary-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.temporary-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  S();
  S(int);
  friend S operator+(const S&amp;, const S&amp;);
  ~S();
};
S obj1;
const S&amp; cr = S(16)+S(23);
S obj2;</pre><div id='class.temporary-8.sentence-1' class='sentence'>The expression
<span class='texttt'>S(16) + S(23)</span>
creates three temporaries:
a first temporary
<span class='texttt'>T1</span>
to hold the result of the expression
<span class='texttt'>S(16)</span>,
a second temporary
<span class='texttt'>T2</span>
to hold the result of the expression
<span class='texttt'>S(23)</span>,
and a third temporary
<span class='texttt'>T3</span>
to hold the result of the addition of these two expressions<a class='hidden_link' href='#class.temporary-8.sentence-1'>.</a></div> <div id='class.temporary-8.sentence-2' class='sentence'>The temporary
<span class='texttt'>T3</span>
is then bound to the reference
<span class='texttt'>cr</span><a class='hidden_link' href='#class.temporary-8.sentence-2'>.</a></div> <div id='class.temporary-8.sentence-3' class='sentence'>It is unspecified whether
<span class='texttt'>T1</span>
or
<span class='texttt'>T2</span>
is created first<a class='hidden_link' href='#class.temporary-8.sentence-3'>.</a></div> <div id='class.temporary-8.sentence-4' class='sentence'>On an implementation where
<span class='texttt'>T1</span>
is created before
<span class='texttt'>T2</span>,
<span class='texttt'>T2</span>
shall be destroyed before
<span class='texttt'>T1</span><a class='hidden_link' href='#class.temporary-8.sentence-4'>.</a></div> <div id='class.temporary-8.sentence-5' class='sentence'>The temporaries
<span class='texttt'>T1</span>
and
<span class='texttt'>T2</span>
are bound to the reference parameters of
<span class='texttt'>operator+</span>;
these temporaries are destroyed at the end of the full-expression
containing the call to
<span class='texttt'>operator+</span><a class='hidden_link' href='#class.temporary-8.sentence-5'>.</a></div> <div id='class.temporary-8.sentence-6' class='sentence'>The temporary
<span class='texttt'>T3</span>
bound to the reference
<span class='texttt'>cr</span>
is destroyed at the end of
<span class='texttt'>cr</span>'s
lifetime, that is, at the end of the program<a class='hidden_link' href='#class.temporary-8.sentence-6'>.</a></div> <div id='class.temporary-8.sentence-7' class='sentence'>In addition, the order in which
<span class='texttt'>T3</span>
is destroyed takes into account the destruction order of other objects with
static storage duration<a class='hidden_link' href='#class.temporary-8.sentence-7'>.</a></div> <div id='class.temporary-8.sentence-8' class='sentence'>That is, because
<span class='texttt'>obj1</span>
is constructed before
<span class='texttt'>T3</span>,
and
<span class='texttt'>T3</span>
is constructed before
<span class='texttt'>obj2</span>,
<span class='texttt'>obj2</span>
shall be destroyed before
<span class='texttt'>T3</span>,
and
<span class='texttt'>T3</span>
shall be destroyed before
<span class='texttt'>obj1</span><a class='hidden_link' href='#class.temporary-8.sentence-8'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-39'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-39'>39)</a></div><div id='footnote-39.sentence-1' class='sentence'>The same rules apply to initialization of an
  <span class='texttt'>initializer_&shy;list</span> object (<a href='dcl.init.list'>[dcl.init.list]</a>) with its
  underlying temporary array<a class='hidden_link' href='#footnote-39.sentence-1'>.</a></div></div></div></div></body></html>