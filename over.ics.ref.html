<!DOCTYPE html><html lang='en'><head><title>[over.ics.ref]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>13</a> Overloading <a class='abbr_ref' href='./#over'>[over]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>13.3</a> Overload resolution <a class='abbr_ref' href='over.match#over.ics.ref'>[over.match]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>13.3.3</a> Best viable function <a class='abbr_ref' href='over.match.best#over.ics.ref'>[over.match.best]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>13.3.3.1</a> Implicit conversion sequences <a class='abbr_ref' href='over.best.ics#over.ics.ref'>[over.best.ics]</a></h4><div id='over.ics.ref'><h4 ><a class='secnum' style='min-width:133pt'>13.3.3.1.4</a> Reference binding <a class='abbr_ref'>[over.ics.ref]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/28e6c9c512637ae89e378c5f6fe2d9d227011362/source/overloading.tex#L2062'>#</a></div><p >When a parameter of reference type binds directly (<a href='dcl.init.ref'>[dcl.init.ref]</a>) to an
argument expression, the implicit conversion sequence is the identity conversion,
unless the argument expression has a type that is a derived class of the parameter
type, in which case the implicit conversion sequence is a derived-to-base
Conversion (<a href='over.best.ics'>[over.best.ics]</a>).
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span></p><pre class='codeblock'>
struct A {};
struct B : public A {} b;
int f(A&amp;);
int f(B&amp;);
int i = f(b);       <span class='comment'>// calls <span class='tcode_in_codeblock'>f(B&amp;)</span>, an exact match, rather than <span class='tcode_in_codeblock'>f(A&amp;)</span>, a conversion
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]
If the parameter binds directly to the result of
applying a conversion function to the argument expression, the implicit
conversion sequence is a user-defined conversion sequence (<a href='over.ics.user'>[over.ics.user]</a>),
with the second standard conversion sequence either an identity conversion or,
if the conversion function returns an entity of a type that is a derived class
of the parameter type, a derived-to-base Conversion.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/28e6c9c512637ae89e378c5f6fe2d9d227011362/source/overloading.tex#L2085'>#</a></div><p >When a parameter of reference type is not bound directly to an argument
expression, the conversion sequence is the one required to convert the argument
expression to the referenced type according to <a href='over.best.ics'>[over.best.ics]</a>.
Conceptually, this conversion sequence corresponds to copy-initializing a
temporary of the referenced type with the argument expression.
Any difference
in top-level cv-qualification is subsumed by the initialization itself and
does not constitute a conversion.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/28e6c9c512637ae89e378c5f6fe2d9d227011362/source/overloading.tex#L2095'>#</a></div><p >Except for an implicit object parameter, for which see <a href='over.match.funcs'>[over.match.funcs]</a>, a
standard conversion sequence cannot be formed if it requires
binding an lvalue reference
other than a reference to a non-volatile <span class='texttt'>const</span> type
to an rvalue
or binding an rvalue reference to an lvalue other than a function lvalue.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
This means, for example, that a candidate function cannot be a viable
function if it has a non-<span class='texttt'>const</span> lvalue reference parameter (other than
the implicit object parameter) and the corresponding argument
would require a temporary to be created to initialize the lvalue
reference (see <a href='dcl.init.ref'>[dcl.init.ref]</a>).
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/28e6c9c512637ae89e378c5f6fe2d9d227011362/source/overloading.tex#L2110'>#</a></div><p >Other restrictions on binding a reference to a particular argument
that are not based on the types of the reference and the argument
do not affect the formation of a standard conversion
sequence, however.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
a function with an “lvalue reference to <span class='texttt'>int</span>” parameter can
be a viable candidate even if the corresponding argument is an
<span class='texttt'>int</span>
bit-field.
The formation of implicit conversion sequences
treats the
<span class='texttt'>int</span>
bit-field as an
<span class='texttt'>int</span>
lvalue and finds an exact
match with the parameter.
If the function is selected by overload
resolution, the call will nonetheless be ill-formed because of
the prohibition on binding a non-<span class='texttt'>const</span> lvalue reference to a bit-field (<a href='dcl.init.ref'>[dcl.init.ref]</a>).
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div></div></div></body></html>