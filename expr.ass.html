<!DOCTYPE html><html lang='en'><head><title>[expr.ass]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>8</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>8.18</a> Assignment and compound assignment operators <a class='abbr_ref'>[expr.ass]</a></h2><span class='indexparent'><a class='index' id=':expression,assignment_and_compound_assignment'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/expressions.tex#L5169'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator,assignment'></a></span><span class='indexparent'><a class='index' id=':operator,+='></a></span><span class='indexparent'><a class='index' id=':operator,-='></a></span><span class='indexparent'><a class='index' id=':operator,*='></a></span><span class='indexparent'><a class='index' id=':operator,/='></a></span><span class='indexparent'><a class='index' id=':operator,%='></a></span><span class='indexparent'><a class='index' id=':operator,>>='></a></span><span class='indexparent'><a class='index' id=':operator,<<='></a></span><span class='indexparent'><a class='index' id=':operator,&='></a></span><span class='indexparent'><a class='index' id=':operator,^='></a></span><span class='indexparent'><a class='index' id=':operator,|='></a></span>The assignment operator (<span class='texttt'>=</span>) and the compound assignment
operators all group right-to-left<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':assignment,and_lvalue'></a></span>All
require a modifiable lvalue as their left operand and return an lvalue
referring to the left operand<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>The result in all cases is a bit-field if
the left operand is a bit-field<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>In all cases, the assignment is
sequenced after the
<span class='indexparent'><a class='index' id=':value_computation'></a></span>value computation of the right and left operands,
and before the
value computation of the assignment expression<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>The right operand is sequenced before the left operand<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>With
respect to an indeterminately-sequenced function call, the operation of
a compound assignment is a single evaluation<a class='hidden_link' href='#1.sentence-6'>.</a></div> <div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-7' class='sentence'>Therefore, a function call shall not intervene between the
lvalue-to-rvalue conversion and the side effect associated with any
single compound assignment operator<a class='hidden_link' href='#1.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <pre class='bnf'><a class='nontermdef' id='nt:assignment-expression'>assignment-expression:</a>
&#9;<i ><a href='expr.cond#nt:conditional-expression'>conditional-expression</a></i>
&#9;<i ><a href='expr.log.or#nt:logical-or-expression'>logical-or-expression</a></i> <i ><a href='expr.ass#nt:assignment-operator'>assignment-operator</a></i> <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i>
&#9;<i ><a href='expr.throw#nt:throw-expression'>throw-expression</a></i>
</pre><pre class='bnf'><a class='nontermdef' id='nt:assignment-operator'>assignment-operator:</a> <span class='textnormal'>one of</span>
&#9;<span class='terminal'>=  *=  /=  %=   +=  -=  &gt;&gt;=  &lt;&lt;=  &amp;=  ^=  |=</span>
</pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/expressions.tex#L5216'>#</a></div><div id='2.sentence-1' class='sentence'>In simple assignment (<span class='texttt'>=</span>), the value of the expression replaces
that of the object referred to by the left operand<a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/expressions.tex#L5220'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':assignment,conversion_by'></a></span>If the left operand is not of class type, the expression is implicitly
converted (<a href='conv'>[conv]</a>) to the cv-unqualified type of the left
operand<a class='hidden_link' href='#3.sentence-1'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/expressions.tex#L5226'>#</a></div><div id='4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':class_object,assignment_to'></a></span><span class='indexparent'><a class='index' id=':type,incomplete'></a></span>If the left operand is of class type, the class shall be complete<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Assignment to objects of a class is defined by the copy/move assignment
operator (<a href='class.copy'>[class.copy]</a>, <a href='over.ass'>[over.ass]</a>)<a class='hidden_link' href='#4.sentence-2'>.</a></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/expressions.tex#L5233'>#</a></div><div id='5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='5.sentence-1' class='sentence'>For class objects, assignment is not in general the same as
initialization (<a href='dcl.init'>[dcl.init]</a>, <a href='class.ctor'>[class.ctor]</a>, <a href='class.init'>[class.init]</a>, <a href='class.copy'>[class.copy]</a>)<a class='hidden_link' href='#5.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/expressions.tex#L5239'>#</a></div><div id='6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':reference,assignment_to'></a></span>When the left operand of an assignment operator
is a bit-field that cannot represent the value of the expression, the
resulting value of the bit-field is
<span class='indexparent'><a class='index' id=':value_of_bit-field_that_cannot_represent,assigned_value'></a></span>implementation-defined<a class='hidden_link' href='#6.sentence-1'>.</a></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/expressions.tex#L5246'>#</a></div><div id='7.sentence-1' class='sentence'>The behavior of an expression of the form <span class='texttt'>E1 <span class='textit'>op</span>= E2</span>
is equivalent to <span class='texttt'>E1 = E1 <span class='textit'>op</span> E2</span> except
that <span class='texttt'>E1</span> is evaluated only once<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>In <span class='texttt'>+=</span> and <span class='texttt'>-=</span>,
<span class='texttt'>E1</span> shall either have arithmetic type or be a pointer to a
possibly cv-qualified completely-defined object type<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.sentence-3' class='sentence'>In all other
cases, <span class='texttt'>E1</span> shall have arithmetic type<a class='hidden_link' href='#7.sentence-3'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/expressions.tex#L5254'>#</a></div><div id='8.sentence-1' class='sentence'>If the value being stored in an object is read via another object that
overlaps in any way the storage of the first object, then the overlap shall be
exact and the two objects shall have the same type, otherwise the behavior is
undefined<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='8.sentence-2' class='sentence'>This restriction applies to the relationship
between the left and right sides of the assignment operation; it is not a
statement about how the target of the assignment may be aliased in general<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>See <a href='basic.lval'>[basic.lval]</a><a class='hidden_link' href='#8.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/expressions.tex#L5263'>#</a></div><div id='9.sentence-1' class='sentence'>A <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i> may appear on the right-hand side of
<ul class='itemize'><li id='9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.1'>(9.1)</a></div><div id='9.1.sentence-1' class='sentence'>an assignment to a scalar, in which case the initializer list shall have
at most a single element<a class='hidden_link' href='#9.1.sentence-1'>.</a></div> <div id='9.1.sentence-2' class='sentence'>The meaning of <span class='texttt'>x = {v}</span>, where <span class='texttt'>T</span> is the
scalar type of the expression <span class='texttt'>x</span>, is that of <span class='texttt'>x = T{v}</span><a class='hidden_link' href='#9.1.sentence-2'>.</a></div> <div id='9.1.sentence-3' class='sentence'>The meaning of
<span class='texttt'>x = {}</span> is <span class='texttt'>x = T{}</span><a class='hidden_link' href='#9.1.sentence-3'>.</a></div></li><li id='9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.2'>(9.2)</a></div><div id='9.2.sentence-1' class='sentence'>an assignment to an object of class type, in which case the initializer
list is passed as the argument to the assignment operator function selected by
overload resolution (<a href='over.ass'>[over.ass]</a>, <a href='over.match'>[over.match]</a>)<a class='hidden_link' href='#9.2.sentence-1'>.</a></div></li></ul></div> <div id='9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
complex&lt;double&gt; z;
z = { 1,2 };              <span class='comment'>// meaning <span class='tcode_in_codeblock'>z.operator=({1,2})</span>
</span>z += { 1, 2 };            <span class='comment'>// meaning <span class='tcode_in_codeblock'>z.operator+=({1,2})</span>
</span>int a, b;
a = b = { 1 };            <span class='comment'>// meaning <span class='tcode_in_codeblock'>a=b=1;</span>
</span>a = { 1 } = b;            <span class='comment'>// syntax error
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></body></html>