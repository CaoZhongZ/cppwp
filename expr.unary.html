<!DOCTYPE html><html lang='en'><head><title>[expr.unary]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.6</a> Compound expressions <a class='abbr_ref' href='expr.compound#expr.unary'>[expr.compound]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>7.6.2</a> Unary expressions <a class='abbr_ref'>[expr.unary]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4047'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':expression,unary'></a></span>Expressions with unary operators group right-to-left<a class='hidden_link' href='#1.sentence-1'>.</a></div><span class='indexparent'><a class='index' id=':expression,unary_'></a></span><span class='indexparent'><a class='index' id=':operator,unary'></a></span><span class='indexparent'><a class='index' id=':operator,sizeof'></a></span><span class='indexparent'><a class='index' id=':operator,cast'></a></span><pre class='bnf'><a class='nontermdef' href='#nt:unary-expression' id='nt:unary-expression'>unary-expression:</a>
&#9;<i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i>
&#9;<span class='terminal'>++</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
&#9;<span class='terminal'>--</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
&#9;<i ><a href='expr.unary#nt:unary-operator'>unary-operator</a></i> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
&#9;<span class='terminal'>sizeof</span> <i ><a href='expr.unary#nt:unary-expression'>unary-expression</a></i>
&#9;<span class='terminal'>sizeof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
&#9;<span class='terminal'>sizeof ...</span> <span class='terminal'>(</span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> <span class='terminal'>)</span>
&#9;<span class='terminal'>alignof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
&#9;<i ><a href='expr.unary.noexcept#nt:noexcept-expression'>noexcept-expression</a></i>
&#9;<i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
&#9;<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>
</pre><span class='indexparent'><a class='index' id=':operator,indirection'></a></span><span class='indexparent'><a class='index' id=':operator,address-of'></a></span><span class='indexparent'><a class='index' id=':operator,unary_minus'></a></span><span class='indexparent'><a class='index' id=':operator,unary_plus'></a></span><span class='indexparent'><a class='index' id=':operator,logical_negation'></a></span><span class='indexparent'><a class='index' id=':operator,ones&#39;_complement'></a></span><span class='indexparent'><a class='index' id=':operator,increment'></a></span><span class='indexparent'><a class='index' id=':operator,decrement'></a></span><pre class='bnf'><a class='nontermdef' href='#nt:unary-operator' id='nt:unary-operator'>unary-operator:</a> <span class='textnormal'>one of</span>
&#9;<span class='terminal'>*  &amp;  +  -  !  ~</span>
</pre></div><div id='op' class='section'><h4 ><a class='secnum' href='#op' style='min-width:118pt'>7.6.2.1</a> Unary operators <a class='abbr_ref' href='expr.unary.op'>[expr.unary.op]</a></h4><div class='para' id='op-1'><div class='marginalizedparent'><a class='marginalized' href='#op-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4093'>#</a></div><div id='op-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':expression,unary_operator'></a></span><span class='indexparent'><a class='index' id=':operator,unary_'></a></span>The unary <span class='texttt'>*</span> operator performs <a class='hidden_link' href='#def:indirection' id='def:indirection'><i >indirection</i></a>:
the expression to which it is applied shall be a pointer to an object
type, or a pointer to a function type and the result is an lvalue
referring to the object or function to which the expression points<a class='hidden_link' href='#op-1.sentence-1'>.</a></div> <div id='op-1.sentence-2' class='sentence'>If
the type of the expression is “pointer to <span class='texttt'>T</span>”, the type of the
result is “<span class='texttt'>T</span>”<a class='hidden_link' href='#op-1.sentence-2'>.</a></div> <div id='op-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#op-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='op-1.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':type,incomplete'></a></span>Indirection through a pointer to an incomplete type (other than
<span class='mathit'>cv</span> <span class='texttt'>void</span>) is valid<a class='hidden_link' href='#op-1.sentence-3'>.</a></div> <div id='op-1.sentence-4' class='sentence'>The lvalue thus obtained can be
used in limited ways (to initialize a reference, for example); this
lvalue must not be converted to a prvalue, see <a href='conv.lval'>[conv.lval]</a><a class='hidden_link' href='#op-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='op-2'><div class='marginalizedparent'><a class='marginalized' href='#op-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4111'>#</a></div><div id='op-2.sentence-1' class='sentence'>The result of each of the following unary operators is a prvalue<a class='hidden_link' href='#op-2.sentence-1'>.</a></div></div><div class='para' id='op-3'><div class='marginalizedparent'><a class='marginalized' href='#op-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4114'>#</a></div><div id='op-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':name,address_of_cv-qualified'></a></span><span class='indexparent'><a class='index' id=':expression,pointer-to-member_constant'></a></span>The result of the unary <span class='texttt'>&amp;</span> operator is a pointer to its operand<a class='hidden_link' href='#op-3.sentence-1'>.</a></div> <div id='op-3.sentence-2' class='sentence'>The operand shall be an lvalue or a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i><a class='hidden_link' href='#op-3.sentence-2'>.</a></div> <div id='op-3.sentence-3' class='sentence'>If the operand is a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> naming a non-static or variant member <span class='texttt'>m</span>
of some class <span class='texttt'>C</span> with type <span class='texttt'>T</span>, the result has type “pointer to member
of class <span class='texttt'>C</span> of type <span class='texttt'>T</span>” and is a prvalue designating <span class='texttt'>C&#x200b;::&#x200b;m</span><a class='hidden_link' href='#op-3.sentence-3'>.</a></div> <div id='op-3.sentence-4' class='sentence'>Otherwise, if the type of the expression is <span class='texttt'>T</span>, the result has type “pointer to
<span class='texttt'>T</span>” and is a prvalue that is the address of the designated object (<a href='intro.memory'>[intro.memory]</a>)
or a pointer to the designated function<a class='hidden_link' href='#op-3.sentence-4'>.</a></div> <div id='op-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#op-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='op-3.sentence-5' class='sentence'>In particular, the address of an
object of type “<span class='mathit'>cv</span> <span class='texttt'>T</span>” is “pointer to <span class='mathit'>cv</span> <span class='texttt'>T</span>”, with the same
cv-qualification<a class='hidden_link' href='#op-3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='op-3.sentence-6' class='sentence'>
For purposes of pointer arithmetic (<a href='expr.add'>[expr.add]</a>) and
comparison (<a href='expr.rel'>[expr.rel]</a>, <a href='expr.eq'>[expr.eq]</a>),
an object that is not an array element whose
address is taken in this way is considered to belong to an array with one
element of type <span class='texttt'>T</span><a class='hidden_link' href='#op-3.sentence-6'>.</a></div> <div id='op-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#op-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { int i; };
struct B : A { };
... &amp;B::i ...       <span class='comment'>// has type <span class='tcode_in_codeblock'>int A&#x200b;::&#x200b;*</span>
</span>int a;
int* p1 = &amp;a;
int* p2 = p1 + 1;   <span class='comment'>// defined behavior
</span>bool b = p2 &gt; p1;   <span class='comment'>// defined behavior, with value <span class='tcode_in_codeblock'>true</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='op-3.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#op-3.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='op-3.sentence-7' class='sentence'>A pointer to member formed from a <span class='texttt'>mutable</span> non-static data
member (<a href='dcl.stc'>[dcl.stc]</a>) does not reflect the <span class='texttt'>mutable</span> specifier
associated with the non-static data member<a class='hidden_link' href='#op-3.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='op-4'><div class='marginalizedparent'><a class='marginalized' href='#op-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4150'>#</a></div><div id='op-4.sentence-1' class='sentence'>A pointer to member is only formed when an explicit <span class='texttt'>&amp;</span> is used
and its operand is a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> not enclosed in
parentheses<a class='hidden_link' href='#op-4.sentence-1'>.</a></div> <div id='op-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#op-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='op-4.sentence-2' class='sentence'>That is, the expression <span class='texttt'>&amp;(qualified-id)</span>, where the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> is enclosed in parentheses, does not form an
expression of type “pointer to member”<a class='hidden_link' href='#op-4.sentence-2'>.</a></div> <div id='op-4.sentence-3' class='sentence'>Neither does
<span class='texttt'>qualified-id</span>, because there is no implicit conversion from a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> for a non-static member function to the type
“pointer to member function” as there is from an lvalue of function
type to the type “pointer to function” (<a href='conv.func'>[conv.func]</a>)<a class='hidden_link' href='#op-4.sentence-3'>.</a></div> <div id='op-4.sentence-4' class='sentence'>Nor is
<span class='texttt'>&amp;unqualified-id</span> a pointer to member, even within the scope of
the <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>'s class<a class='hidden_link' href='#op-4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='op-5'><div class='marginalizedparent'><a class='marginalized' href='#op-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4166'>#</a></div><div id='op-5.sentence-1' class='sentence'>If <span class='texttt'>&amp;</span> is applied to an lvalue of incomplete class type and the
complete type declares <span class='texttt'>operator&amp;()</span>, it is unspecified whether
the operator has the built-in meaning or the operator function is
called<a class='hidden_link' href='#op-5.sentence-1'>.</a></div> <div id='op-5.sentence-2' class='sentence'>The operand of <span class='texttt'>&amp;</span> shall not be a bit-field<a class='hidden_link' href='#op-5.sentence-2'>.</a></div></div><div class='para' id='op-6'><div class='marginalizedparent'><a class='marginalized' href='#op-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4172'>#</a></div><div id='op-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloaded_function,address_of'></a></span>The address of an <a href='over'>overloaded function</a> can be taken
only in a context that uniquely determines which version of the
overloaded function is referred to (see <a href='over.over'>[over.over]</a>)<a class='hidden_link' href='#op-6.sentence-1'>.</a></div> <div id='op-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#op-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='op-6.sentence-2' class='sentence'>Since the context might determine whether the operand is a static or
non-static member function, the context can also affect whether the
expression has type “pointer to function” or “pointer to member
function”<a class='hidden_link' href='#op-6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='op-7'><div class='marginalizedparent'><a class='marginalized' href='#op-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4184'>#</a></div><div id='op-7.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator,unary_plus_'></a></span>The operand of the unary <span class='texttt'>+</span> operator shall have arithmetic, unscoped
enumeration, or pointer type and the result is the value of the
argument<a class='hidden_link' href='#op-7.sentence-1'>.</a></div> <div id='op-7.sentence-2' class='sentence'>Integral promotion is performed on integral or enumeration
operands<a class='hidden_link' href='#op-7.sentence-2'>.</a></div> <div id='op-7.sentence-3' class='sentence'>The type of the result is the type of the promoted operand<a class='hidden_link' href='#op-7.sentence-3'>.</a></div></div><div class='para' id='op-8'><div class='marginalizedparent'><a class='marginalized' href='#op-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4191'>#</a></div><div id='op-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator,unary_minus_'></a></span>The operand of the unary <span class='texttt'>-</span> operator shall have arithmetic or unscoped
enumeration type and the result is the negation of its operand<a class='hidden_link' href='#op-8.sentence-1'>.</a></div> <div id='op-8.sentence-2' class='sentence'>Integral
promotion is performed on integral or enumeration operands<a class='hidden_link' href='#op-8.sentence-2'>.</a></div> <div id='op-8.sentence-3' class='sentence'>The negative
of an unsigned quantity is computed by subtracting its value from <span class="mjx-chtml"><span class="mjx-math" aria-label="2 Superscript n"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.591em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span>,
where <span class='math'><span class='mathalpha'>n</span></span> is the number of bits in the promoted operand<a class='hidden_link' href='#op-8.sentence-3'>.</a></div> <div id='op-8.sentence-4' class='sentence'>The type of the
result is the type of the promoted operand<a class='hidden_link' href='#op-8.sentence-4'>.</a></div></div><div class='para' id='op-9'><div class='marginalizedparent'><a class='marginalized' href='#op-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4200'>#</a></div><div id='op-9.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator,logical_negation_'></a></span>The operand of the logical negation operator <span class='texttt'>!</span> is
<a href='conv#def:conversion,contextual_to_bool'>contextually converted to <span class='texttt'>bool</span></a>;
its value is <span class='texttt'>true</span>
if the converted operand is <span class='texttt'>false</span> and <span class='texttt'>false</span> otherwise<a class='hidden_link' href='#op-9.sentence-1'>.</a></div> <div id='op-9.sentence-2' class='sentence'>The type of the result is <span class='texttt'>bool</span><a class='hidden_link' href='#op-9.sentence-2'>.</a></div></div><div class='para' id='op-10'><div class='marginalizedparent'><a class='marginalized' href='#op-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4209'>#</a></div><div id='op-10.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':signed_integer_representation,ones&#39;_complement'></a></span><span class='indexparent'><a class='index' id=':operator,ones&#39;_complement_'></a></span>The operand of <span class='texttt'>~</span> shall have integral or unscoped enumeration type; the
result is the ones' complement of its operand<a class='hidden_link' href='#op-10.sentence-1'>.</a></div> <div id='op-10.sentence-2' class='sentence'>Integral promotions are
performed<a class='hidden_link' href='#op-10.sentence-2'>.</a></div> <div id='op-10.sentence-3' class='sentence'>The type of the result is the type of the promoted operand<a class='hidden_link' href='#op-10.sentence-3'>.</a></div> <div id='op-10.sentence-4' class='sentence'>There is an ambiguity
in the grammar when <span class='texttt'>~</span> is followed by
a <i ><a href='class#nt:class-name'>class-name</a></i> or <i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i><a class='hidden_link' href='#op-10.sentence-4'>.</a></div> <div id='op-10.sentence-5' class='sentence'>The ambiguity is resolved by treating <span class='texttt'>~</span> as the unary complement
operator rather than as the start of an <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
naming a destructor<a class='hidden_link' href='#op-10.sentence-5'>.</a></div> <div id='op-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#op-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='op-10.sentence-6' class='sentence'>Because the grammar does not permit an operator to follow the
<span class='texttt'>.</span>, <span class='texttt'>-&gt;</span>, or <span class='texttt'>&#x200b;::&#x200b;</span> tokens, a <span class='texttt'>~</span> followed by
a <i ><a href='class#nt:class-name'>class-name</a></i> or <i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i> in a
member access expression or <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> is
unambiguously parsed as a destructor name<a class='hidden_link' href='#op-10.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='expr.pre.incr' class='section'><h4 ><a class='secnum' href='#expr.pre.incr' style='min-width:118pt'>7.6.2.2</a> Increment and decrement <a class='abbr_ref' href='expr.pre.incr'>[expr.pre.incr]</a></h4><div class='para' id='expr.pre.incr-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.pre.incr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4231'>#</a></div><div id='expr.pre.incr-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':expression,increment'></a></span><span class='indexparent'><a class='index' id=':expression,decrement'></a></span>The operand of prefix <span class='texttt'>++</span>
<span class='indexparent'><a class='index' id=':operator,increment_'></a></span><span class='indexparent'><a class='index' id=':prefix_++'></a></span>is modified by adding <span class='texttt'>1</span><a class='hidden_link' href='#expr.pre.incr-1.sentence-1'>.</a></div> <div id='expr.pre.incr-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':prefix_--'></a></span>The operand shall be a modifiable lvalue<a class='hidden_link' href='#expr.pre.incr-1.sentence-2'>.</a></div> <div id='expr.pre.incr-1.sentence-3' class='sentence'>The type of the operand shall
be an arithmetic type other than <span class='mathit'>cv</span> <span class='texttt'>bool</span>,
or a pointer to a completely-defined object type<a class='hidden_link' href='#expr.pre.incr-1.sentence-3'>.</a></div> <div id='expr.pre.incr-1.sentence-4' class='sentence'>The result is the updated operand; it is an lvalue, and it is a
bit-field if the operand is a bit-field<a class='hidden_link' href='#expr.pre.incr-1.sentence-4'>.</a></div> <div id='expr.pre.incr-1.sentence-5' class='sentence'>The expression <span class='texttt'>++x</span> is equivalent to <span class='texttt'>x+=1</span><a class='hidden_link' href='#expr.pre.incr-1.sentence-5'>.</a></div> <span class='indexparent'><a class='index' id=':operator,+='></a></span><div id='expr.pre.incr-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.pre.incr-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.pre.incr-1.sentence-6' class='sentence'>See the discussions of <a href='expr.add'>addition</a> and <a href='expr.ass'>assignment
operators</a> for information on conversions<a class='hidden_link' href='#expr.pre.incr-1.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.pre.incr-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.pre.incr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4251'>#</a></div><div id='expr.pre.incr-2.sentence-1' class='sentence'>The operand of prefix
<span class='indexparent'><a class='index' id=':operator,decrement_'></a></span><span class='texttt'>--</span> is modified by subtracting <span class='texttt'>1</span><a class='hidden_link' href='#expr.pre.incr-2.sentence-1'>.</a></div> <div id='expr.pre.incr-2.sentence-2' class='sentence'>The requirements on the operand of prefix
<span class='texttt'>--</span> and the properties of its result are otherwise the same as
those of prefix <span class='texttt'>++</span><a class='hidden_link' href='#expr.pre.incr-2.sentence-2'>.</a></div> <div id='expr.pre.incr-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.pre.incr-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.pre.incr-2.sentence-3' class='sentence'>For postfix increment and decrement, see <a href='expr.post.incr'>[expr.post.incr]</a><a class='hidden_link' href='#expr.pre.incr-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='expr.sizeof' class='section'><h4 ><a class='secnum' href='#expr.sizeof' style='min-width:118pt'>7.6.2.3</a> Sizeof <a class='abbr_ref' href='expr.sizeof'>[expr.sizeof]</a></h4><div class='para' id='expr.sizeof-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4264'>#</a></div><div id='expr.sizeof-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':expression,sizeof'></a></span><span class='indexparent'><a class='index' id=':operator,sizeof_'></a></span><span class='indexparent'><a class='index' id=':byte'></a></span>The <span class='texttt'>sizeof</span> operator yields the number of bytes
occupied by a non-potentially-overlapping object of the type
of its operand<a class='hidden_link' href='#expr.sizeof-1.sentence-1'>.</a></div> <div id='expr.sizeof-1.sentence-2' class='sentence'>The operand is either an expression,
which is an unevaluated operand (<a href='expr.prop'>[expr.prop]</a>), or a parenthesized
<i ><a href='dcl.name#nt:type-id'>type-id</a></i><a class='hidden_link' href='#expr.sizeof-1.sentence-2'>.</a></div> <div id='expr.sizeof-1.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':type,incomplete_'></a></span>The <span class='texttt'>sizeof</span> operator shall not be applied to an expression that
has function or incomplete type,
to the parenthesized name of such
types, or to a glvalue that designates a bit-field<a class='hidden_link' href='#expr.sizeof-1.sentence-3'>.</a></div> <div id='expr.sizeof-1.sentence-4' class='sentence'><span class='texttt'>sizeof(char)</span>, <span class='texttt'>sizeof(signed char)</span> and
<span class='texttt'>sizeof(unsigned char)</span> are <span class='texttt'>1</span><a class='hidden_link' href='#expr.sizeof-1.sentence-4'>.</a></div> <div id='expr.sizeof-1.sentence-5' class='sentence'>The result of
<span class='texttt'>sizeof</span> applied to any other <a href='basic.fundamental'>fundamental
type</a> is <span class='indexparent'><a class='index' id=':sizeof_applied_to_fundamental_types_other_than_char,_signed_char,_and_unsigned_char'></a></span>implementation-defined<a class='hidden_link' href='#expr.sizeof-1.sentence-5'>.</a></div> <div id='expr.sizeof-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.sizeof-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.sizeof-1.sentence-6' class='sentence'>In particular, <span class='texttt'>sizeof(bool)</span>, <span class='texttt'>sizeof(char16_&shy;t)</span>,
<span class='texttt'>sizeof(char32_&shy;t)</span>, and <span class='texttt'>sizeof(wchar_&shy;t)</span> are
implementation-defined<a class='hidden_link' href='#expr.sizeof-1.sentence-6'>.</a><a class='footnotenum' href='#footnote-77'>77</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.sizeof-1.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.sizeof-1.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.sizeof-1.sentence-7' class='sentence'>See <a href='intro.memory'>[intro.memory]</a> for the definition of <a class='hidden_link' href='#def:byte' id='def:byte'><i>byte</i></a>
and <a href='basic.types'>[basic.types]</a> for the definition of <a class='hidden_link' href='#def:object_representation' id='def:object_representation'><i>object representation</i></a><a class='hidden_link' href='#expr.sizeof-1.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.sizeof-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4294'>#</a></div><div id='expr.sizeof-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':reference,sizeof'></a></span>When applied to a reference or a reference type, the result is the size
of the referenced type<a class='hidden_link' href='#expr.sizeof-2.sentence-1'>.</a></div> <div id='expr.sizeof-2.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':class_object,sizeof'></a></span>When applied to a class, the result is the number of bytes in an object
of that class including any padding required for placing objects of that
type in an array<a class='hidden_link' href='#expr.sizeof-2.sentence-2'>.</a></div> <div id='expr.sizeof-2.sentence-3' class='sentence'>The result of applying <span class='texttt'>sizeof</span> to a
potentially-overlapping subobject is
the size of the type, not the size of the subobject<a class='hidden_link' href='#expr.sizeof-2.sentence-3'>.</a><a class='footnotenum' href='#footnote-78'>78</a></div> <div id='expr.sizeof-2.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':array,sizeof'></a></span>When applied to an array, the result is the total number of bytes in the
array<a class='hidden_link' href='#expr.sizeof-2.sentence-4'>.</a></div> <div id='expr.sizeof-2.sentence-5' class='sentence'>This implies that the size of an array of <a class='hidden_link' href='#def:n' id='def:n'><i>n</i></a> elements is
<a class='hidden_link' href='#def:n' id='def:n'><i>n</i></a> times the size of an element<a class='hidden_link' href='#expr.sizeof-2.sentence-5'>.</a></div></div><div class='para' id='expr.sizeof-3'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4314'>#</a></div><div id='expr.sizeof-3.sentence-1' class='sentence'>The <span class='texttt'>sizeof</span> operator can be applied to a pointer to a function,
but shall not be applied directly to a function<a class='hidden_link' href='#expr.sizeof-3.sentence-1'>.</a></div></div><div class='para' id='expr.sizeof-4'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4318'>#</a></div><div id='expr.sizeof-4.sentence-1' class='sentence'>The <a href='conv.lval'>lvalue-to-rvalue</a>,
<a href='conv.array'>array-to-pointer</a>, and
<a href='conv.func'>function-to-pointer</a> standard conversions are not
applied to the operand of <span class='texttt'>sizeof</span><a class='hidden_link' href='#expr.sizeof-4.sentence-1'>.</a></div> <div id='expr.sizeof-4.sentence-2' class='sentence'>If the operand is a prvalue,
the <a href='conv.rval'>temporary materialization conversion</a>
is applied<a class='hidden_link' href='#expr.sizeof-4.sentence-2'>.</a></div></div><div class='para' id='expr.sizeof-5'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4327'>#</a></div><div id='expr.sizeof-5.sentence-1' class='sentence'>The identifier in a <span class='texttt'>sizeof...</span> expression shall name a
pack<a class='hidden_link' href='#expr.sizeof-5.sentence-1'>.</a></div> <div id='expr.sizeof-5.sentence-2' class='sentence'>The <span class='texttt'>sizeof...</span> operator yields the number of elements
in the pack (<a href='temp.variadic'>[temp.variadic]</a>)<a class='hidden_link' href='#expr.sizeof-5.sentence-2'>.</a></div> <div id='expr.sizeof-5.sentence-3' class='sentence'>A <span class='texttt'>sizeof...</span> expression is a pack expansion (<a href='temp.variadic'>[temp.variadic]</a>)<a class='hidden_link' href='#expr.sizeof-5.sentence-3'>.</a></div> <div id='expr.sizeof-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expr.sizeof-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class... Types&gt;
struct count {
  static const std::size_t value = sizeof...(Types);
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.sizeof-6'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4342'>#</a></div><div id='expr.sizeof-6.sentence-1' class='sentence'>The result of <span class='texttt'>sizeof</span> and <span class='texttt'>sizeof...</span> is a constant of type
<span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span><a class='hidden_link' href='#expr.sizeof-6.sentence-1'>.</a></div> <div id='expr.sizeof-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.sizeof-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.sizeof-6.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':size_t'></a></span><span class='indexparent'><a class='index' id='lib:size_t'></a></span><span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span> is defined in the standard header
<span class='indexparent'><a class='index' id=':<cstddef>'></a></span><span class='indexparent'><a class='index' id=':<cstddef>'></a></span><span class='texttt'>&lt;cstddef&gt;</span> (<a href='cstddef.syn'>[cstddef.syn]</a>, <a href='support.types.layout'>[support.types.layout]</a>)<a class='hidden_link' href='#expr.sizeof-6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-77'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-77'>77)</a></div><div id='footnote-77.sentence-1' class='sentence'><span class='texttt'>sizeof(bool)</span> is not required to be <span class='texttt'>1</span><a class='hidden_link' href='#footnote-77.sentence-1'>.</a></div></div><div class='footnote' id='footnote-78'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-78'>78)</a></div><div id='footnote-78.sentence-1' class='sentence'>The actual size of a potentially-overlapping subobject
may be less than the result of
applying <span class='texttt'>sizeof</span> to the subobject, due to virtual base classes
and less strict padding requirements on potentially-overlapping subobjects<a class='hidden_link' href='#footnote-78.sentence-1'>.</a></div></div></div><div id='expr.new' class='section'><h4 ><a class='secnum' href='#expr.new' style='min-width:118pt'>7.6.2.4</a> New <a class='abbr_ref' href='expr.new'>[expr.new]</a></h4><div class='para' id='expr.new-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4355'>#</a></div><div id='expr.new-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':expression,new'></a></span><span class='indexparent'><a class='index' id=':new'></a></span>The <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> attempts to create an object of the
<i ><a href='dcl.name#nt:type-id'>type-id</a></i> or <i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i> to which
it is applied<a class='hidden_link' href='#expr.new-1.sentence-1'>.</a></div> <div id='expr.new-1.sentence-2' class='sentence'>The type of that object is the <span class='indexparent'><a class='index' id=':type,allocated'></a></span><span class='textit'>allocated type</span><a class='hidden_link' href='#expr.new-1.sentence-2'>.</a></div> <div id='expr.new-1.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':type,incomplete__'></a></span>This type shall be a complete object type, but not an abstract class
type or array
thereof (<a href='intro.object'>[intro.object]</a>, <a href='basic.types'>[basic.types]</a>, <a href='class.abstract'>[class.abstract]</a>)<a class='hidden_link' href='#expr.new-1.sentence-3'>.</a></div> <div id='expr.new-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-1.sentence-4' class='sentence'>Because references are not objects, references cannot be created by
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i><span class='textit'>s</span><a class='hidden_link' href='#expr.new-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.new-1.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-1.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-1.sentence-5' class='sentence'>The <i ><a href='dcl.name#nt:type-id'>type-id</a></i> may be a cv-qualified type, in which case the
object created by the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> has a cv-qualified type<a class='hidden_link' href='#expr.new-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <pre class='bnf'><a class='nontermdef' href='#nt:new-expression' id='nt:new-expression'>new-expression:</a>
&#9;<span class='terminal'>::</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>new</span> <i ><a href='expr.new#nt:new-placement'>new-placement</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i> <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> 
&#9;<span class='terminal'>::</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>new</span> <i ><a href='expr.new#nt:new-placement'>new-placement</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>(</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span> <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><span class='indexparent'><a class='index' id=':new,storage_allocation'></a></span><pre class='bnf'><a class='nontermdef' href='#nt:new-placement' id='nt:new-placement'>new-placement:</a>
&#9;<span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i> <span class='terminal'>)</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:new-type-id' id='nt:new-type-id'>new-type-id:</a>
&#9;<i ><a href='dcl.type#nt:type-specifier-seq'>type-specifier-seq</a></i> <i ><a href='expr.new#nt:new-declarator'>new-declarator</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:new-declarator' id='nt:new-declarator'>new-declarator:</a>
&#9;<i ><a href='dcl.decl#nt:ptr-operator'>ptr-operator</a></i> <i ><a href='expr.new#nt:new-declarator'>new-declarator</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> 
&#9;<i ><a href='expr.new#nt:noptr-new-declarator'>noptr-new-declarator</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:noptr-new-declarator' id='nt:noptr-new-declarator'>noptr-new-declarator:</a>
&#9;<span class='terminal'>[</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>]</span> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='expr.new#nt:noptr-new-declarator'>noptr-new-declarator</a></i> <span class='terminal'>[</span> <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> <span class='terminal'>]</span> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:new-initializer' id='nt:new-initializer'>new-initializer:</a>
&#9;<span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
&#9;<i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
</pre></div><div class='para' id='expr.new-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4413'>#</a></div><div id='expr.new-2.sentence-1' class='sentence'>If a <a href='dcl.spec.auto'>placeholder type</a> appears in the
<i ><a href='dcl.type#nt:type-specifier-seq'>type-specifier-seq</a></i> of a <i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i> or
<i ><a href='dcl.name#nt:type-id'>type-id</a></i> of a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>,
the allocated type is deduced as follows:
Let
<span class='textit'>init</span> be the <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i>, if any,
and
<span class='texttt'>T</span> be the <i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i> or <i ><a href='dcl.name#nt:type-id'>type-id</a></i> of
the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>, then the allocated type is the type
deduced for the variable <span class='texttt'>x</span> in the invented
declaration (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>):</div><pre class='codeblock'>
T x <span class='textrm'><span class='textit'>init</span></span> ;</pre><div id='expr.new-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expr.new-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
new auto(1);                    <span class='comment'>// allocated type is <span class='tcode_in_codeblock'>int</span>
</span>auto x = new auto('a');         <span class='comment'>// allocated type is <span class='tcode_in_codeblock'>char</span>, <span class='tcode_in_codeblock'>x</span> is of type <span class='tcode_in_codeblock'>char*</span>
</span>
template&lt;class T&gt; struct A { A(T, T); };
auto y = new A{1, 2};           <span class='comment'>// allocated type is <span class='tcode_in_codeblock'>A&lt;int&gt;</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-3'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4440'>#</a></div><div id='expr.new-3.sentence-1' class='sentence'>The <i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i> in a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> is the longest
possible sequence of <i ><a href='expr.new#nt:new-declarator'>new-declarator</a></i><span class='textit'>s</span><a class='hidden_link' href='#expr.new-3.sentence-1'>.</a></div> <div id='expr.new-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-3.sentence-2' class='sentence'>This prevents ambiguities between the declarator operators <span class='texttt'>&amp;</span>, <span class='texttt'>&amp;&amp;</span>,
<span class='texttt'>*</span>, and <span class='texttt'>[]</span> and their expression counterparts<a class='hidden_link' href='#expr.new-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.new-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expr.new-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
new int * i;                    <span class='comment'>// syntax error: parsed as <span class='tcode_in_codeblock'>(new int*) i</span>, not as <span class='tcode_in_codeblock'>(new int)*i</span>
</span></pre> <div id='expr.new-3.sentence-3' class='sentence'>
The <span class='texttt'>*</span> is the pointer declarator and not the multiplication
operator<a class='hidden_link' href='#expr.new-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-4'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4455'>#</a></div><div id='expr.new-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':ambiguity,parentheses_and'></a></span>Parentheses in a <i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i> of a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
can have surprising effects<a class='hidden_link' href='#expr.new-4.sentence-1'>.</a></div> <div id='expr.new-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expr.new-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
new int(*[10])();               <span class='comment'>// error
</span></pre> <div id='expr.new-4.sentence-2' class='sentence'>
is ill-formed because the binding is
<pre class='codeblock'>
(new int) (*[10])();            <span class='comment'>// error
</span></pre></div><div id='expr.new-4.sentence-3' class='sentence'>Instead, the explicitly parenthesized version of the <span class='texttt'>new</span>
operator can be used to create objects of <a href='basic.compound'>compound
types</a>:
<pre class='codeblock'>
new (int (*[10])());</pre>
allocates an array of <span class='texttt'>10</span> pointers to functions (taking no
argument and returning <span class='texttt'>int</span>)<a class='hidden_link' href='#expr.new-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-5'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4480'>#</a></div><div id='expr.new-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':storage_duration,dynamic'></a></span>Objects created by a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> have dynamic storage
duration (<a href='basic.stc.dynamic'>[basic.stc.dynamic]</a>)<a class='hidden_link' href='#expr.new-5.sentence-1'>.</a></div> <div id='expr.new-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-5.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':new,scoping_and'></a></span>The lifetime of such an object is not necessarily restricted to the
scope in which it is created<a class='hidden_link' href='#expr.new-5.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.new-5.sentence-3' class='sentence'>
When the allocated object is not an array, the result of the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
is a pointer to the object created<a class='hidden_link' href='#expr.new-5.sentence-3'>.</a></div></div><div class='para' id='expr.new-6'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4492'>#</a></div><div id='expr.new-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':array,new'></a></span>When the allocated object is an array (that is, the
<i ><a href='expr.new#nt:noptr-new-declarator'>noptr-new-declarator</a></i> syntax is used or the
<i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i> or <i ><a href='dcl.name#nt:type-id'>type-id</a></i> denotes an array type), the
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i> yields a pointer to the initial element (if
any) of the array<a class='hidden_link' href='#expr.new-6.sentence-1'>.</a></div> <div id='expr.new-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-6.sentence-2' class='sentence'>Both <span class='texttt'>new int</span> and <span class='texttt'>new int[10]</span> have type <span class='texttt'>int*</span> and
the type of <span class='texttt'>new int[i][10]</span> is <span class='texttt'>int (*)[10]</span></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.new-6.sentence-3' class='sentence'>
The <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> in a <i ><a href='expr.new#nt:noptr-new-declarator'>noptr-new-declarator</a></i> appertains
to the associated array type<a class='hidden_link' href='#expr.new-6.sentence-3'>.</a></div></div><div class='para' id='expr.new-7'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4506'>#</a></div><div id='expr.new-7.sentence-1' class='sentence'>Every <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> in a
<i ><a href='expr.new#nt:noptr-new-declarator'>noptr-new-declarator</a></i> shall be a
<a href='expr.const#def:expression,converted_constant'>converted constant expression</a>
of type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span> and
shall evaluate to a strictly positive value<a class='hidden_link' href='#expr.new-7.sentence-1'>.</a></div> <div id='expr.new-7.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':new_'></a></span>The <i ><a href='expr.comma#nt:expression'>expression</a></i> in a <i ><a href='expr.new#nt:noptr-new-declarator'>noptr-new-declarator</a></i> is
implicitly converted to <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span><a class='hidden_link' href='#expr.new-7.sentence-2'>.</a></div> <div id='expr.new-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expr.new-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='expr.new-7.sentence-3' class='sentence'>Given the definition <span class='texttt'>int n = 42</span>,
<span class='texttt'>new float[n][5]</span> is well-formed (because <span class='texttt'>n</span> is the
<i ><a href='expr.comma#nt:expression'>expression</a></i> of a <i ><a href='expr.new#nt:noptr-new-declarator'>noptr-new-declarator</a></i>), but
<span class='texttt'>new float[5][n]</span> is ill-formed (because <span class='texttt'>n</span> is not a
constant expression)<a class='hidden_link' href='#expr.new-7.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-8'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4523'>#</a></div><div id='expr.new-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':function,allocation'></a></span>The <i ><a href='expr.comma#nt:expression'>expression</a></i> in a <i ><a href='expr.new#nt:noptr-new-declarator'>noptr-new-declarator</a></i> is
erroneous if:</div><div id='expr.new-8.sentence-2' class='sentence'><ul class='itemize'><li id='expr.new-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-8.1'>(8.1)</a></div><div id='expr.new-8.1.sentence-1' class='sentence'>the expression is of non-class type and its value before converting to
<span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span> is less than zero;</div></li><li id='expr.new-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-8.2'>(8.2)</a></div><div id='expr.new-8.2.sentence-1' class='sentence'>the expression is of class type and its value before application of the second
standard conversion (<a href='over.ics.user'>[over.ics.user]</a>)<a class='footnotenum' href='#footnote-79'>79</a> is less than zero;</div></li><li id='expr.new-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-8.3'>(8.3)</a></div><div id='expr.new-8.3.sentence-1' class='sentence'>its value is such that the size of the allocated object would exceed the
<span class='indexparent'><a class='index' id=':maximum_size_of_an_allocated_object'></a></span>implementation-defined <a href='implimits'>limit</a>; or</div></li><li id='expr.new-8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-8.4'>(8.4)</a></div><div id='expr.new-8.4.sentence-1' class='sentence'>the <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i> is a <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i> and the
number of array elements for which initializers are provided (including the
terminating <span class='texttt'>'\0'</span> in a <a href='lex.string'>string literal</a>) exceeds the
number of elements to initialize<a class='hidden_link' href='#expr.new-8.4.sentence-1'>.</a></div></li></ul></div><div id='expr.new-8.sentence-3' class='sentence'>If the <i ><a href='expr.comma#nt:expression'>expression</a></i> is erroneous after converting to <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span>:
<ul class='itemize'><li id='expr.new-8.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-8.5'>(8.5)</a></div><div id='expr.new-8.5.sentence-1' class='sentence'>if the <i ><a href='expr.comma#nt:expression'>expression</a></i> is a core constant expression,
the program is ill-formed;</div></li><li id='expr.new-8.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-8.6'>(8.6)</a></div><div id='expr.new-8.6.sentence-1' class='sentence'>otherwise, an allocation function is not called; instead
<ul class='itemize'><li id='expr.new-8.6.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#expr.new-8.6.1'>(8.6.1)</a></div><div id='expr.new-8.6.1.sentence-1' class='sentence'>if the allocation function that would have been called
has a non-throwing exception specification (<a href='except.spec'>[except.spec]</a>),
the value of the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
is the null pointer value of the required result type;</div></li><li id='expr.new-8.6.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#expr.new-8.6.2'>(8.6.2)</a></div><div id='expr.new-8.6.2.sentence-1' class='sentence'>otherwise, the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> terminates by throwing an
exception of a type that would match a handler (<a href='except.handle'>[except.handle]</a>) of type
<a href='new.badlength'><span class='texttt'>std&#x200b;::&#x200b;bad_&shy;array_&shy;new_&shy;length</span></a><a class='hidden_link' href='#expr.new-8.6.2.sentence-1'>.</a></div></li></ul></div></li></ul></div> <div id='expr.new-8.sentence-4' class='sentence'>
When the value of the <i ><a href='expr.comma#nt:expression'>expression</a></i> is zero, the allocation
function is called to allocate an array with no elements<a class='hidden_link' href='#expr.new-8.sentence-4'>.</a></div></div><div class='para' id='expr.new-9'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4573'>#</a></div><div id='expr.new-9.sentence-1' class='sentence'>A <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> may obtain storage for the object by calling an
allocation function (<a href='basic.stc.dynamic.allocation'>[basic.stc.dynamic.allocation]</a>)<a class='hidden_link' href='#expr.new-9.sentence-1'>.</a></div> <div id='expr.new-9.sentence-2' class='sentence'>If
the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> terminates by throwing an exception, it
may release storage by calling a <a href='basic.stc.dynamic.deallocation'>deallocation
function</a><a class='hidden_link' href='#expr.new-9.sentence-2'>.</a></div> <div id='expr.new-9.sentence-3' class='sentence'>If the allocated type
is a non-array type, the allocation function's name is
<span class='indexparent'><a class='index' id=':operator_new'></a></span><span class='indexparent'><a class='index' id=':operator_delete'></a></span><span class='texttt'>operator new</span> and the deallocation function's name is
<span class='texttt'>operator delete</span><a class='hidden_link' href='#expr.new-9.sentence-3'>.</a></div> <div id='expr.new-9.sentence-4' class='sentence'>If the allocated type is an array type, the
allocation function's name is
<span class='indexparent'><a class='index' id=':operator_new_'></a></span><span class='indexparent'><a class='index' id=':operator_delete_'></a></span><span class='texttt'>operator new[]</span>
and the deallocation function's name is
<span class='texttt'>operator delete[]</span><a class='hidden_link' href='#expr.new-9.sentence-4'>.</a></div> <div id='expr.new-9.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-9.sentence-5' class='sentence'>An implementation shall provide default definitions for the global
allocation
functions (<a href='basic.stc.dynamic'>[basic.stc.dynamic]</a>, <a href='new.delete.single'>[new.delete.single]</a>, <a href='new.delete.array'>[new.delete.array]</a>)<a class='hidden_link' href='#expr.new-9.sentence-5'>.</a></div> <div id='expr.new-9.sentence-6' class='sentence'>A C++ program can provide alternative definitions of
these functions (<a href='replacement.functions'>[replacement.functions]</a>) and/or class-specific
versions (<a href='class.free'>[class.free]</a>)<a class='hidden_link' href='#expr.new-9.sentence-6'>.</a></div> <div id='expr.new-9.sentence-7' class='sentence'>The set of allocation and deallocation functions that may be called
by a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
may include functions that do not perform allocation or deallocation;
for example, see <a href='new.delete.placement'>[new.delete.placement]</a><a class='hidden_link' href='#expr.new-9.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-10'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4603'>#</a></div><div id='expr.new-10.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator,scope_resolution'></a></span>If the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> begins with a unary <span class='texttt'>&#x200b;::&#x200b;</span>
operator, the allocation function's name is looked up in the global
scope<a class='hidden_link' href='#expr.new-10.sentence-1'>.</a></div> <div id='expr.new-10.sentence-2' class='sentence'>Otherwise, if the allocated type is a class type <span class='texttt'>T</span> or
array thereof, the allocation function's name is looked up in the scope
of <span class='texttt'>T</span><a class='hidden_link' href='#expr.new-10.sentence-2'>.</a></div> <div id='expr.new-10.sentence-3' class='sentence'>If this lookup fails to find the name, or if the allocated
type is not a class type, the allocation function's name is looked up in
the global scope<a class='hidden_link' href='#expr.new-10.sentence-3'>.</a></div></div><div class='para' id='expr.new-11'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4613'>#</a></div><div id='expr.new-11.sentence-1' class='sentence'>An implementation is allowed to omit a call to a replaceable global allocation
function (<a href='new.delete.single'>[new.delete.single]</a>, <a href='new.delete.array'>[new.delete.array]</a>)<a class='hidden_link' href='#expr.new-11.sentence-1'>.</a></div> <div id='expr.new-11.sentence-2' class='sentence'>When it does so,
the storage is instead provided by the implementation or provided by extending
the allocation of another <i ><a href='expr.new#nt:new-expression'>new-expression</a></i><a class='hidden_link' href='#expr.new-11.sentence-2'>.</a></div> <div id='expr.new-11.sentence-3' class='sentence'>The implementation may
extend the allocation of a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> <span class='texttt'>e1</span> to provide
storage for a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> <span class='texttt'>e2</span> if the
following would be true were the allocation not extended:</div><div id='expr.new-11.sentence-4' class='sentence'><ul class='itemize'><li id='expr.new-11.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-11.1'>(11.1)</a></div><div id='expr.new-11.1.sentence-1' class='sentence'>the evaluation of <span class='texttt'>e1</span> is sequenced before the evaluation of
<span class='texttt'>e2</span>, and</div></li><li id='expr.new-11.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-11.2'>(11.2)</a></div><div id='expr.new-11.2.sentence-1' class='sentence'><span class='texttt'>e2</span> is evaluated whenever <span class='texttt'>e1</span> obtains storage, and</div></li><li id='expr.new-11.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-11.3'>(11.3)</a></div><div id='expr.new-11.3.sentence-1' class='sentence'>both <span class='texttt'>e1</span> and <span class='texttt'>e2</span> invoke the same replaceable global
allocation function, and</div></li><li id='expr.new-11.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-11.4'>(11.4)</a></div><div id='expr.new-11.4.sentence-1' class='sentence'>if the allocation function invoked by <span class='texttt'>e1</span> and <span class='texttt'>e2</span> is
throwing, any exceptions thrown in the evaluation of either <span class='texttt'>e1</span> or
<span class='texttt'>e2</span> would be first caught in the same handler, and</div></li><li id='expr.new-11.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-11.5'>(11.5)</a></div><div id='expr.new-11.5.sentence-1' class='sentence'>the pointer values produced by <span class='texttt'>e1</span> and <span class='texttt'>e2</span> are operands to
evaluated <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i><span class='textit'>s</span>, and</div></li><li id='expr.new-11.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-11.6'>(11.6)</a></div><div id='expr.new-11.6.sentence-1' class='sentence'>the evaluation of <span class='texttt'>e2</span> is sequenced before the evaluation of the
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> whose operand is the pointer value produced
by <span class='texttt'>e1</span><a class='hidden_link' href='#expr.new-11.6.sentence-1'>.</a></div></li></ul></div><div id='expr.new-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expr.new-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
  void mergeable(int x) {
    <span class='comment'>// These allocations are safe for merging:
</span>    std::unique_ptr&lt;char[]&gt; a{new (std::nothrow) char[8]};
    std::unique_ptr&lt;char[]&gt; b{new (std::nothrow) char[8]};
    std::unique_ptr&lt;char[]&gt; c{new (std::nothrow) char[x]};

    g(a.get(), b.get(), c.get());
  }

  void unmergeable(int x) {
    std::unique_ptr&lt;char[]&gt; a{new char[8]};
    try {
      <span class='comment'>// Merging this allocation would change its catch handler.
</span>      std::unique_ptr&lt;char[]&gt; b{new char[x]};
    } catch (const std::bad_alloc&amp; e) {
      std::cerr &lt;&lt; "Allocation failed: " &lt;&lt; e.what() &lt;&lt; std::endl;
      throw;
    }
  }</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-12'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4667'>#</a></div><div id='expr.new-12.sentence-1' class='sentence'>When a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> calls an allocation function and that
allocation has not been extended, the
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i> passes the amount of space requested to the
allocation function as the first argument of type
<span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span><a class='hidden_link' href='#expr.new-12.sentence-1'>.</a></div> <div id='expr.new-12.sentence-2' class='sentence'>That argument shall be no less than the size
of the object being created; it may be greater than the size of the
object being created only if the object is an array<a class='hidden_link' href='#expr.new-12.sentence-2'>.</a></div> <div id='expr.new-12.sentence-3' class='sentence'>For arrays of
<span class='texttt'>char</span>, <span class='texttt'>unsigned char</span>, and <span class='texttt'>std&#x200b;::&#x200b;byte</span>,
the difference between the
result of the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> and the address returned by the
allocation function shall be an integral multiple of the
strictest fundamental
<a href='basic.align'>alignment requirement</a> of any object type whose size
is no greater than the size of the array being created<a class='hidden_link' href='#expr.new-12.sentence-3'>.</a></div> <div id='expr.new-12.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-12.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':allocation,alignment_storage'></a></span>Because allocation functions are assumed to return pointers to storage
that is appropriately aligned for objects of any type
with fundamental alignment, this constraint
on array allocation overhead permits the common idiom of allocating
character arrays into which objects of other types will later be placed<a class='hidden_link' href='#expr.new-12.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-13'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4691'>#</a></div><div id='expr.new-13.sentence-1' class='sentence'>When a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> calls an allocation function and that
allocation has been extended, the size argument to the allocation call shall
be no greater than the sum of the sizes for the omitted calls as specified
above, plus the size for the extended call had it not been extended, plus any
padding necessary to align the allocated objects within the allocated memory<a class='hidden_link' href='#expr.new-13.sentence-1'>.</a></div></div><div class='para' id='expr.new-14'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4698'>#</a></div><div id='expr.new-14.sentence-1' class='sentence'>The <i ><a href='expr.new#nt:new-placement'>new-placement</a></i> syntax is used to supply additional
arguments to an allocation function; such an expression is called
a <a class='hidden_link' href='#def:new-expression,placement' id='def:new-expression,placement'><i >placement <i >new-expression</i></i></a><a class='hidden_link' href='#expr.new-14.sentence-1'>.</a></div></div><div class='para' id='expr.new-15'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4704'>#</a></div><div id='expr.new-15.sentence-1' class='sentence'>Overload resolution is
performed on a function call created by assembling an argument list<a class='hidden_link' href='#expr.new-15.sentence-1'>.</a></div> <div id='expr.new-15.sentence-2' class='sentence'>The first argument is
the amount of space requested,
and has type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span><a class='hidden_link' href='#expr.new-15.sentence-2'>.</a></div> <div id='expr.new-15.sentence-3' class='sentence'>If the type of the allocated object has new-extended alignment,
the next argument is
the type's alignment,
and has type <span class='texttt'>std&#x200b;::&#x200b;align_&shy;val_&shy;t</span><a class='hidden_link' href='#expr.new-15.sentence-3'>.</a></div> <div id='expr.new-15.sentence-4' class='sentence'>If the <i ><a href='expr.new#nt:new-placement'>new-placement</a></i> syntax is used,
the <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>
in its <i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
are the succeeding arguments<a class='hidden_link' href='#expr.new-15.sentence-4'>.</a></div> <div id='expr.new-15.sentence-5' class='sentence'>If no matching function is found
and the allocated object type has new-extended alignment,
the alignment argument is removed from the argument list,
and overload resolution is performed again<a class='hidden_link' href='#expr.new-15.sentence-5'>.</a></div></div><div class='para' id='expr.new-16'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4723'>#</a></div><div id='expr.new-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expr.new-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='expr.new-16.sentence-1' class='sentence'><ul class='itemize'><li ><div id='expr.new-16.sentence-1' class='sentence'><span class='texttt'>new T</span> results in one of the following calls:
<pre class='codeblock'>
operator new(sizeof(T))
operator new(sizeof(T), std::align_val_t(alignof(T)))</pre></div></li><li ><div id='expr.new-16.sentence-1' class='sentence'><span class='texttt'>new(2,f) T</span> results in one of the following calls:
<pre class='codeblock'>
operator new(sizeof(T), 2, f)
operator new(sizeof(T), std::align_val_t(alignof(T)), 2, f)</pre></div></li><li ><div id='expr.new-16.sentence-1' class='sentence'><span class='texttt'>new T[5]</span> results in one of the following calls:
<pre class='codeblock'>
operator new[](sizeof(T) * 5 + x)
operator new[](sizeof(T) * 5 + x, std::align_val_t(alignof(T)))</pre></div></li><li ><div id='expr.new-16.sentence-1' class='sentence'><span class='texttt'>new(2,f) T[5]</span> results in one of the following calls:
<pre class='codeblock'>
operator new[](sizeof(T) * 5 + x, 2, f)
operator new[](sizeof(T) * 5 + x, std::align_val_t(alignof(T)), 2, f)</pre></div></li></ul>
Here, each instance of <span class='texttt'>x</span> is a non-negative unspecified value
representing array allocation overhead; the result of the
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i> will be offset by this amount from the value
returned by <span class='texttt'>operator new[]</span><a class='hidden_link' href='#expr.new-16.sentence-1'>.</a></div> <div id='expr.new-16.sentence-2' class='sentence'>This overhead may be applied in all
array <i ><a href='expr.new#nt:new-expression'>new-expression</a></i><span class='textit'>s</span>, including those referencing the
library function <span class='texttt'>operator new[](std&#x200b;::&#x200b;size_&shy;t, void*)</span> and other
placement allocation functions<a class='hidden_link' href='#expr.new-16.sentence-2'>.</a></div> <div id='expr.new-16.sentence-3' class='sentence'>The amount of overhead may vary from one
invocation of <span class='texttt'>new</span> to another<a class='hidden_link' href='#expr.new-16.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-17'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4758'>#</a></div><div id='expr.new-17.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-17.sentence-1' class='sentence'>Unless an allocation function has a non-throwing
<a href='except.spec'>exception specification</a>,
it indicates failure to allocate storage by throwing a
<span class='indexparent'><a class='index' id=':bad_alloc'></a></span><span class='indexparent'><a class='index' id='lib:bad_alloc'></a></span><span class='texttt'>std&#x200b;::&#x200b;bad_&shy;alloc</span> exception (<a href='basic.stc.dynamic.allocation'>[basic.stc.dynamic.allocation]</a>,
<a href='except'>[except]</a>, <a href='bad.alloc'>[bad.alloc]</a>);
it returns a non-null pointer otherwise<a class='hidden_link' href='#expr.new-17.sentence-1'>.</a></div> <div id='expr.new-17.sentence-2' class='sentence'>If the allocation function
has a non-throwing exception specification,
it returns null to indicate failure to allocate storage
and a non-null pointer otherwise<a class='hidden_link' href='#expr.new-17.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.new-17.sentence-3' class='sentence'>
If the allocation function is a non-allocating
form (<a href='new.delete.placement'>[new.delete.placement]</a>) that returns null,
the behavior is undefined<a class='hidden_link' href='#expr.new-17.sentence-3'>.</a></div> <div id='expr.new-17.sentence-4' class='sentence'>Otherwise,
if the allocation function returns null, initialization shall not be
done, the deallocation function shall not be called, and the value of
the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> shall be null<a class='hidden_link' href='#expr.new-17.sentence-4'>.</a></div></div><div class='para' id='expr.new-18'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4780'>#</a></div><div id='expr.new-18.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-18.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-18.sentence-1' class='sentence'>When the allocation function returns a value other than null, it must be
a pointer to a block of storage in which space for the object has been
reserved<a class='hidden_link' href='#expr.new-18.sentence-1'>.</a></div> <div id='expr.new-18.sentence-2' class='sentence'>The block of storage is assumed to be appropriately aligned
and of the requested size<a class='hidden_link' href='#expr.new-18.sentence-2'>.</a></div> <div id='expr.new-18.sentence-3' class='sentence'>The address of the created object will not
necessarily be the same as that of the block if the object is an array<a class='hidden_link' href='#expr.new-18.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-19'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4789'>#</a></div><div id='expr.new-19.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':new,array_of_class_objects_and'></a></span><span class='indexparent'><a class='index' id=':new,initialization_and'></a></span><span class='indexparent'><a class='index' id=':new,constructor_and'></a></span><span class='indexparent'><a class='index' id=':new,default_constructor_and'></a></span>A <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> that creates an object of type <span class='texttt'>T</span>
initializes that object as follows:</div><div id='expr.new-19.sentence-2' class='sentence'><ul class='itemize'><li id='expr.new-19.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-19.1'>(19.1)</a></div><div id='expr.new-19.1.sentence-1' class='sentence'>If the <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i> is omitted, the object is
default-initialized (<a href='dcl.init'>[dcl.init]</a>)<a class='hidden_link' href='#expr.new-19.1.sentence-1'>.</a></div> <div id='expr.new-19.1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-19.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-19.1.sentence-2' class='sentence'>If no initialization
is performed, the object has an indeterminate value<a class='hidden_link' href='#expr.new-19.1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='expr.new-19.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.new-19.2'>(19.2)</a></div><div id='expr.new-19.2.sentence-1' class='sentence'>Otherwise, the <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i> is interpreted according to
the initialization rules of <a href='dcl.init'>[dcl.init]</a> for direct-initialization<a class='hidden_link' href='#expr.new-19.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='expr.new-20'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4806'>#</a></div><div id='expr.new-20.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':new,unspecified_order_of_evaluation'></a></span><span class='indexparent'><a class='index' id=':new,unspecified_constructor_and'></a></span>The invocation of the allocation function is sequenced before
the evaluations of expressions in the <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i><a class='hidden_link' href='#expr.new-20.sentence-1'>.</a></div> <div id='expr.new-20.sentence-2' class='sentence'>Initialization of
the allocated object is sequenced before the
<span class='indexparent'><a class='index' id=':value_computation'></a></span>value computation of the
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i><a class='hidden_link' href='#expr.new-20.sentence-2'>.</a></div></div><div class='para' id='expr.new-21'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4816'>#</a></div><div id='expr.new-21.sentence-1' class='sentence'>If the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> creates an object or an array of
objects of class type, access and ambiguity control are done for the
allocation function, the <a href='class.free'>deallocation function</a>, and
the <a href='class.ctor'>constructor</a><a class='hidden_link' href='#expr.new-21.sentence-1'>.</a></div> <div id='expr.new-21.sentence-2' class='sentence'>If the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
creates an array of objects of class type, the <a href='class.dtor'>destructor</a>
is potentially invoked<a class='hidden_link' href='#expr.new-21.sentence-2'>.</a></div></div><div class='para' id='expr.new-22'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-22'>22</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4824'>#</a></div><div id='expr.new-22.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':new,exception_and'></a></span>If any part of the object initialization described above<a class='footnotenum' href='#footnote-80'>80</a>
terminates by throwing an exception and a suitable deallocation function
can be found, the deallocation function is called to free the memory in
which the object was being constructed, after which the exception
continues to propagate in the context of the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i><a class='hidden_link' href='#expr.new-22.sentence-1'>.</a></div> <div id='expr.new-22.sentence-2' class='sentence'>If no unambiguous matching deallocation function can be found,
propagating the exception does not cause the object's memory to be
freed<a class='hidden_link' href='#expr.new-22.sentence-2'>.</a></div> <div id='expr.new-22.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.new-22.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.new-22.sentence-3' class='sentence'>This is appropriate when the called allocation function does not
allocate memory; otherwise, it is likely to result in a memory leak<a class='hidden_link' href='#expr.new-22.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.new-23'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-23'>23</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4841'>#</a></div><div id='expr.new-23.sentence-1' class='sentence'>If the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> begins with a unary <span class='texttt'>&#x200b;::&#x200b;</span>
operator, the deallocation function's name is looked up in the global
scope<a class='hidden_link' href='#expr.new-23.sentence-1'>.</a></div> <div id='expr.new-23.sentence-2' class='sentence'>Otherwise, if the allocated type is a class type <span class='texttt'>T</span> or an
array thereof, the deallocation function's name is looked up in the
scope of <span class='texttt'>T</span><a class='hidden_link' href='#expr.new-23.sentence-2'>.</a></div> <div id='expr.new-23.sentence-3' class='sentence'>If this lookup fails to find the name, or if the
allocated type is not a class type or array thereof, the deallocation
function's name is looked up in the global scope<a class='hidden_link' href='#expr.new-23.sentence-3'>.</a></div></div><div class='para' id='expr.new-24'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-24'>24</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4850'>#</a></div><div id='expr.new-24.sentence-1' class='sentence'>A declaration of a placement deallocation function matches the
declaration of a placement allocation function if it has the same number
of parameters and, after parameter transformations (<a href='dcl.fct'>[dcl.fct]</a>), all
parameter types except the first are identical<a class='hidden_link' href='#expr.new-24.sentence-1'>.</a></div> <div id='expr.new-24.sentence-2' class='sentence'>If
the lookup finds a single matching deallocation function, that function
will be called; otherwise, no deallocation function will be called<a class='hidden_link' href='#expr.new-24.sentence-2'>.</a></div> <div id='expr.new-24.sentence-3' class='sentence'>If
the lookup finds a <a href='basic.stc.dynamic.deallocation#def:usual_deallocation_function'>usual deallocation function</a>
with a parameter of type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span>
and that function,
considered as a placement deallocation function, would have been
selected as a match for the allocation function, the program is
ill-formed<a class='hidden_link' href='#expr.new-24.sentence-3'>.</a></div> <div id='expr.new-24.sentence-4' class='sentence'>For a non-placement allocation function, the normal deallocation
function lookup is used to find the matching deallocation
function (<a href='#expr.delete'>[expr.delete]</a>)
<div id='expr.new-24.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expr.new-24.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  <span class='comment'>// Placement allocation function:
</span>  static void* operator new(std::size_t, std::size_t);

  <span class='comment'>// Usual (non-placement) deallocation function:
</span>  static void operator delete(void*, std::size_t);
};

S* p = new (0) S;   <span class='comment'>// ill-formed: non-placement deallocation function matches
</span>                    <span class='comment'>// placement allocation function
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='expr.new-25'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-25'>25</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4882'>#</a></div><div id='expr.new-25.sentence-1' class='sentence'>If a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> calls a deallocation function, it passes
the value returned from the allocation function call as the first
argument of type <span class='texttt'>void*</span><a class='hidden_link' href='#expr.new-25.sentence-1'>.</a></div> <div id='expr.new-25.sentence-2' class='sentence'>If a placement deallocation function is
called, it is passed the same additional arguments as were passed to the
placement allocation function, that is, the same arguments as those
specified with the <i ><a href='expr.new#nt:new-placement'>new-placement</a></i> syntax<a class='hidden_link' href='#expr.new-25.sentence-2'>.</a></div> <div id='expr.new-25.sentence-3' class='sentence'>If the implementation is allowed
to introduce a temporary object or make a copy of any argument
as part of the call to the allocation function,
it is unspecified whether the same object is used in the call
to both the allocation and deallocation functions<a class='hidden_link' href='#expr.new-25.sentence-3'>.</a></div></div><div class='footnote' id='footnote-79'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-79'>79)</a></div><div id='footnote-79.sentence-1' class='sentence'>If the conversion function
returns a signed integer type, the second standard conversion converts to the
unsigned type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span> and thus thwarts any attempt to detect a
negative value afterwards<a class='hidden_link' href='#footnote-79.sentence-1'>.</a></div></div><div class='footnote' id='footnote-80'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-80'>80)</a></div><div id='footnote-80.sentence-1' class='sentence'>This may
include evaluating a <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i> and/or calling
a constructor<a class='hidden_link' href='#footnote-80.sentence-1'>.</a></div></div></div><div id='expr.delete' class='section'><h4 ><a class='secnum' href='#expr.delete' style='min-width:118pt'>7.6.2.5</a> Delete <a class='abbr_ref' href='expr.delete'>[expr.delete]</a></h4><div class='para' id='expr.delete-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4897'>#</a></div><div id='expr.delete-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':expression,delete'></a></span><span class='indexparent'><a class='index' id=':delete'></a></span>The <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> operator destroys a
<a href='intro.object#def:most_derived_object'>most derived object</a> or array created by a
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i><a class='hidden_link' href='#expr.delete-1.sentence-1'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:delete-expression' id='nt:delete-expression'>delete-expression:</a>
&#9;<span class='terminal'>::</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>delete</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
&#9;<span class='terminal'>::</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>delete [ ]</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
</pre><div id='expr.delete-1.sentence-2' class='sentence'>The first alternative is a
<a class='hidden_link' href='#def:delete,single-object' id='def:delete,single-object'><i >single-object delete expression</i></a>, and the
second is an <a class='hidden_link' href='#def:delete,array' id='def:delete,array'><i >array delete expression</i></a><a class='hidden_link' href='#expr.delete-1.sentence-2'>.</a></div> <div id='expr.delete-1.sentence-3' class='sentence'>Whenever the <span class='texttt'>delete</span> keyword is immediately followed by empty square
brackets, it shall be interpreted as the second alternative<a class='hidden_link' href='#expr.delete-1.sentence-3'>.</a><a class='footnotenum' href='#footnote-81'>81</a></div> <div id='expr.delete-1.sentence-4' class='sentence'>
The operand shall be of pointer to object type or of class type<a class='hidden_link' href='#expr.delete-1.sentence-4'>.</a></div> <div id='expr.delete-1.sentence-5' class='sentence'>If of
class type, the operand is <a href='conv#def:contextually_implicitly_converted'>contextually implicitly converted</a>
to a pointer to object
type<a class='hidden_link' href='#expr.delete-1.sentence-5'>.</a><a class='footnotenum' href='#footnote-82'>82</a></div> <div id='expr.delete-1.sentence-6' class='sentence'>
The <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>'s result has type
<span class='texttt'>void</span><a class='hidden_link' href='#expr.delete-1.sentence-6'>.</a></div></div><div class='para' id='expr.delete-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4927'>#</a></div><div id='expr.delete-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':delete,single-object'></a></span>If the operand has a class type, the operand is converted to a pointer
type by calling the above-mentioned conversion function, and the
converted operand is used in place of the original operand for the
remainder of this subclause<a class='hidden_link' href='#expr.delete-2.sentence-1'>.</a></div> <div id='expr.delete-2.sentence-2' class='sentence'>In a single-object delete expression, the value of the operand of
<span class='texttt'>delete</span> may be a null pointer value, a pointer to a non-array object
created by a previous <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>,
or a pointer to a
<a href='intro.object#def:subobject'>subobject</a> representing a
<a href='class.derived'>base class</a> of such an
object<a class='hidden_link' href='#expr.delete-2.sentence-2'>.</a></div> <div id='expr.delete-2.sentence-3' class='sentence'>If not, the behavior is undefined<a class='hidden_link' href='#expr.delete-2.sentence-3'>.</a></div> <div id='expr.delete-2.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':array,delete'></a></span>In an array delete expression, the value of the operand of <span class='texttt'>delete</span>
may be a null pointer value or a pointer value that resulted from
a previous array <i ><a href='expr.new#nt:new-expression'>new-expression</a></i><a class='hidden_link' href='#expr.delete-2.sentence-4'>.</a><a class='footnotenum' href='#footnote-83'>83</a></div> <div id='expr.delete-2.sentence-5' class='sentence'>
If not, the behavior is undefined<a class='hidden_link' href='#expr.delete-2.sentence-5'>.</a></div> <div id='expr.delete-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.delete-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.delete-2.sentence-6' class='sentence'>This means that the syntax of the <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> must
match the type of the object allocated by <span class='texttt'>new</span>, not the syntax of the
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i><a class='hidden_link' href='#expr.delete-2.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.delete-2.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.delete-2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.delete-2.sentence-7' class='sentence'>A pointer to a <span class='texttt'>const</span> type can be the operand of a
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>; it is not necessary to
<a href='expr.const.cast#def:casting_away_constness'>cast away the constness</a>
of the pointer expression before it is
used as the operand of the <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i><a class='hidden_link' href='#expr.delete-2.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.delete-3'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4961'>#</a></div><div id='expr.delete-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':delete,undefined'></a></span>In a single-object delete expression, if the static type of the object to be
deleted is different from its dynamic type
and the selected deallocation function (see below)
is not a destroying operator delete,
the static type shall be a base
class of the dynamic type of the object to be deleted and the static type shall
have a virtual destructor or the behavior is undefined<a class='hidden_link' href='#expr.delete-3.sentence-1'>.</a></div> <div id='expr.delete-3.sentence-2' class='sentence'>In an array delete
expression, if the dynamic type of the object to be deleted differs from its
static type, the behavior is undefined<a class='hidden_link' href='#expr.delete-3.sentence-2'>.</a></div></div><div class='para' id='expr.delete-4'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4973'>#</a></div><div id='expr.delete-4.sentence-1' class='sentence'>The <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i> in a <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> shall
be evaluated exactly once<a class='hidden_link' href='#expr.delete-4.sentence-1'>.</a></div></div><div class='para' id='expr.delete-5'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4977'>#</a></div><div id='expr.delete-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':type,incomplete___'></a></span>If the object being deleted has incomplete class type at the point of
deletion and the complete class has a non-trivial destructor or a
deallocation function, the behavior is undefined<a class='hidden_link' href='#expr.delete-5.sentence-1'>.</a></div></div><div class='para' id='expr.delete-6'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4983'>#</a></div><div id='expr.delete-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':delete,destructor_and'></a></span>If the value of the operand of the <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> is not a
null pointer value
and the selected deallocation function (see below)
is not a destroying operator delete,
the <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> will invoke the
destructor (if any) for the object or the elements of the array being
deleted<a class='hidden_link' href='#expr.delete-6.sentence-1'>.</a></div> <div id='expr.delete-6.sentence-2' class='sentence'>In the case of an array, the elements will be destroyed in
order of decreasing address (that is, in reverse order of the completion
of their constructor; see <a href='class.base.init'>[class.base.init]</a>)<a class='hidden_link' href='#expr.delete-6.sentence-2'>.</a></div></div><div class='para' id='expr.delete-7'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L4995'>#</a></div><div id='expr.delete-7.sentence-1' class='sentence'>If the value of the operand of the <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> is not a
null pointer value, then:</div><div id='expr.delete-7.sentence-2' class='sentence'><ul class='itemize'><li id='expr.delete-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.delete-7.1'>(7.1)</a></div><div id='expr.delete-7.1.sentence-1' class='sentence'>If the allocation call for the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> for the object to
be deleted was not omitted and the allocation was not extended (<a href='#expr.new'>[expr.new]</a>), the
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> shall call a <a href='basic.stc.dynamic.deallocation'>deallocation
function</a><a class='hidden_link' href='#expr.delete-7.1.sentence-1'>.</a></div> <div id='expr.delete-7.1.sentence-2' class='sentence'>The value returned from the
allocation call of the <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> shall be passed as the
first argument to the deallocation function<a class='hidden_link' href='#expr.delete-7.1.sentence-2'>.</a></div></li><li id='expr.delete-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.delete-7.2'>(7.2)</a></div><div id='expr.delete-7.2.sentence-1' class='sentence'>Otherwise, if the allocation was extended or was provided by extending the
allocation of another <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>, and the
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> for every other pointer value produced by a
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i> that had storage provided by the extended
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i> has been evaluated, the
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> shall call a deallocation function<a class='hidden_link' href='#expr.delete-7.2.sentence-1'>.</a></div> <div id='expr.delete-7.2.sentence-2' class='sentence'>The value
returned from the allocation call of the extended <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
shall be passed as the first argument to the deallocation function<a class='hidden_link' href='#expr.delete-7.2.sentence-2'>.</a></div></li><li id='expr.delete-7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.delete-7.3'>(7.3)</a></div><div id='expr.delete-7.3.sentence-1' class='sentence'>Otherwise, the <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> will not call a
deallocation function<a class='hidden_link' href='#expr.delete-7.3.sentence-1'>.</a></div></li></ul></div> <div id='expr.delete-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.delete-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.delete-7.sentence-3' class='sentence'>The deallocation function is called regardless of whether the destructor
for the object or some element of the array throws an exception<a class='hidden_link' href='#expr.delete-7.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.delete-7.sentence-4' class='sentence'>
If the value of the operand of the <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> is a
null pointer value, it is unspecified whether a deallocation function will be
called as described above<a class='hidden_link' href='#expr.delete-7.sentence-4'>.</a></div></div><div class='para' id='expr.delete-8'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5030'>#</a></div><div id='expr.delete-8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.delete-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.delete-8.sentence-1' class='sentence'>An implementation provides default definitions of the global
deallocation functions <span class='texttt'>operator delete</span> for
non-arrays (<a href='new.delete.single'>[new.delete.single]</a>) and
<span class='indexparent'><a class='index' id=':operator_delete__'></a></span><span class='texttt'>operator delete[]</span> for arrays (<a href='new.delete.array'>[new.delete.array]</a>)<a class='hidden_link' href='#expr.delete-8.sentence-1'>.</a></div> <div id='expr.delete-8.sentence-2' class='sentence'>A C++
program can provide alternative definitions of these
functions (<a href='replacement.functions'>[replacement.functions]</a>), and/or class-specific
versions (<a href='class.free'>[class.free]</a>)<a class='hidden_link' href='#expr.delete-8.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.delete-9'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5042'>#</a></div><div id='expr.delete-9.sentence-1' class='sentence'>When the keyword <span class='texttt'>delete</span> in a <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> is
preceded by the unary <span class='texttt'>&#x200b;::&#x200b;</span> operator, the deallocation function's name is looked
up in global scope<a class='hidden_link' href='#expr.delete-9.sentence-1'>.</a></div> <div id='expr.delete-9.sentence-2' class='sentence'>Otherwise, the lookup considers class-specific deallocation
functions (<a href='class.free'>[class.free]</a>)<a class='hidden_link' href='#expr.delete-9.sentence-2'>.</a></div> <div id='expr.delete-9.sentence-3' class='sentence'>If no class-specific deallocation function is found,
the deallocation function's name is looked up in global scope<a class='hidden_link' href='#expr.delete-9.sentence-3'>.</a></div></div><div class='para' id='expr.delete-10'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5049'>#</a></div><div id='expr.delete-10.sentence-1' class='sentence'>If deallocation function lookup finds more than one usual
deallocation function,
the function to be called is selected as follows:
<ul class='itemize'><li id='expr.delete-10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.delete-10.1'>(10.1)</a></div><div id='expr.delete-10.1.sentence-1' class='sentence'>If any of the deallocation functions is a destroying operator delete,
all deallocation functions that are not destroying operator deletes
are eliminated from further consideration<a class='hidden_link' href='#expr.delete-10.1.sentence-1'>.</a></div></li><li id='expr.delete-10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.delete-10.2'>(10.2)</a></div><div id='expr.delete-10.2.sentence-1' class='sentence'>If the type has new-extended alignment,
a function with a parameter of type <span class='texttt'>std&#x200b;::&#x200b;align_&shy;val_&shy;t</span> is preferred;
otherwise a function without such a parameter is preferred<a class='hidden_link' href='#expr.delete-10.2.sentence-1'>.</a></div> <div id='expr.delete-10.2.sentence-2' class='sentence'>If any preferred functions are found,
all non-preferred functions are eliminated from further consideration<a class='hidden_link' href='#expr.delete-10.2.sentence-2'>.</a></div></li><li id='expr.delete-10.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.delete-10.3'>(10.3)</a></div><div id='expr.delete-10.3.sentence-1' class='sentence'>If exactly one function remains,
that function is selected and the selection process terminates<a class='hidden_link' href='#expr.delete-10.3.sentence-1'>.</a></div></li><li id='expr.delete-10.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.delete-10.4'>(10.4)</a></div><div id='expr.delete-10.4.sentence-1' class='sentence'>If the deallocation functions have class scope,
the one without a parameter of type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span> is selected<a class='hidden_link' href='#expr.delete-10.4.sentence-1'>.</a></div></li><li id='expr.delete-10.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.delete-10.5'>(10.5)</a></div><div id='expr.delete-10.5.sentence-1' class='sentence'>If the type is complete
and if, for an array delete expression only,
the operand is a pointer to a class type with a
non-trivial destructor or a (possibly multi-dimensional) array thereof,
the function with a parameter of type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span> is selected<a class='hidden_link' href='#expr.delete-10.5.sentence-1'>.</a></div></li><li id='expr.delete-10.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expr.delete-10.6'>(10.6)</a></div><div id='expr.delete-10.6.sentence-1' class='sentence'>Otherwise, it is unspecified
whether a deallocation function with a parameter of type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span>
is selected<a class='hidden_link' href='#expr.delete-10.6.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='expr.delete-11'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5082'>#</a></div><div id='expr.delete-11.sentence-1' class='sentence'>For a single-object delete expression,
the deleted object is
the object denoted by the operand
if its static type does not have a virtual destructor,
and its most-derived object otherwise<a class='hidden_link' href='#expr.delete-11.sentence-1'>.</a></div> <div id='expr.delete-11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.delete-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.delete-11.sentence-2' class='sentence'>If the deallocation function is not a destroying operator delete
and the deleted object is not the most derived object in the former case,
the behavior is undefined,
as stated above<a class='hidden_link' href='#expr.delete-11.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.delete-11.sentence-3' class='sentence'>
For an array delete expression,
the deleted object is
the array object<a class='hidden_link' href='#expr.delete-11.sentence-3'>.</a></div> <div id='expr.delete-11.sentence-4' class='sentence'>When a <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>
is executed, the selected deallocation function shall be called with
the address of the deleted object
in a single-object delete expression, or
the address of the deleted object
suitably adjusted for the array allocation
overhead (<a href='#expr.new'>[expr.new]</a>) in an array delete expression,
as its first argument<a class='hidden_link' href='#expr.delete-11.sentence-4'>.</a></div> <div id='expr.delete-11.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.delete-11.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.delete-11.sentence-5' class='sentence'>Any cv-qualifiers in the type of the deleted object
are ignored when forming this argument<a class='hidden_link' href='#expr.delete-11.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expr.delete-11.sentence-6' class='sentence'>
If a destroying operator delete is used,
an unspecified value
is passed as the argument
corresponding to the parameter of type <span class='texttt'>std&#x200b;::&#x200b;destroying_&shy;delete_&shy;t</span><a class='hidden_link' href='#expr.delete-11.sentence-6'>.</a></div> <div id='expr.delete-11.sentence-7' class='sentence'>If a deallocation function
with a parameter of type <span class='texttt'>std&#x200b;::&#x200b;align_&shy;val_&shy;t</span>
is used,
the alignment of the type of the deleted object
is passed as the corresponding argument<a class='hidden_link' href='#expr.delete-11.sentence-7'>.</a></div> <div id='expr.delete-11.sentence-8' class='sentence'>If a deallocation function
with a parameter of type <span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span> is used,
the size of the deleted object
in a single-object delete expression, or
of the array plus allocation overhead
in an array delete expression,
is passed as the corresponding argument<a class='hidden_link' href='#expr.delete-11.sentence-8'>.</a></div> <div id='expr.delete-11.note-3' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expr.delete-11.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expr.delete-11.sentence-9' class='sentence'>If this results in a call to a replaceable deallocation function,
and either
the first argument was not the result of
a prior call to a replaceable allocation function or
the second or third argument was not the corresponding argument in said call,
the behavior is undefined (<a href='new.delete.single'>[new.delete.single]</a>, <a href='new.delete.array'>[new.delete.array]</a>)<a class='hidden_link' href='#expr.delete-11.sentence-9'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expr.delete-12'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5134'>#</a></div><div id='expr.delete-12.sentence-1' class='sentence'>Access and ambiguity control are done for both the deallocation function
and the destructor (<a href='class.dtor'>[class.dtor]</a>, <a href='class.free'>[class.free]</a>)<a class='hidden_link' href='#expr.delete-12.sentence-1'>.</a></div></div><div class='footnote' id='footnote-81'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-81'>81)</a></div><div id='footnote-81.sentence-1' class='sentence'>A
<i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i> with a <i ><a href='expr.prim.lambda#nt:lambda-introducer'>lambda-introducer</a></i>
that consists of empty square brackets can follow the <span class='texttt'>delete</span> keyword
if the <i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i> is enclosed in parentheses<a class='hidden_link' href='#footnote-81.sentence-1'>.</a></div></div><div class='footnote' id='footnote-82'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-82'>82)</a></div><div id='footnote-82.sentence-1' class='sentence'>This implies that an object
cannot be deleted using a pointer of type
<span class='texttt'>void*</span> because <span class='texttt'>void</span> is not an object type<a class='hidden_link' href='#footnote-82.sentence-1'>.</a></div></div><div class='footnote' id='footnote-83'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-83'>83)</a></div><div id='footnote-83.sentence-1' class='sentence'>For nonzero-length
arrays, this is the same as a pointer to the first
element of the array created by that <i ><a href='expr.new#nt:new-expression'>new-expression</a></i><a class='hidden_link' href='#footnote-83.sentence-1'>.</a></div> <div id='footnote-83.sentence-2' class='sentence'>Zero-length arrays do not have a first element<a class='hidden_link' href='#footnote-83.sentence-2'>.</a></div></div></div><div id='expr.alignof' class='section'><h4 ><a class='secnum' href='#expr.alignof' style='min-width:118pt'>7.6.2.6</a> Alignof <a class='abbr_ref' href='expr.alignof'>[expr.alignof]</a></h4><div class='para' id='expr.alignof-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.alignof-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5140'>#</a></div><div id='expr.alignof-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':alignof'></a></span><span class='indexparent'><a class='index' id=':expression,alignof'></a></span>An <span class='texttt'>alignof</span> expression yields the alignment requirement
of its operand type<a class='hidden_link' href='#expr.alignof-1.sentence-1'>.</a></div> <div id='expr.alignof-1.sentence-2' class='sentence'>The operand shall be a <i ><a href='dcl.name#nt:type-id'>type-id</a></i>
representing a complete object type, or an array thereof, or a reference
to one of those types<a class='hidden_link' href='#expr.alignof-1.sentence-2'>.</a></div></div><div class='para' id='expr.alignof-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.alignof-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5148'>#</a></div><div id='expr.alignof-2.sentence-1' class='sentence'>The result is an integral constant of type
<span class='texttt'>std&#x200b;::&#x200b;size_&shy;t</span><a class='hidden_link' href='#expr.alignof-2.sentence-1'>.</a></div></div><div class='para' id='expr.alignof-3'><div class='marginalizedparent'><a class='marginalized' href='#expr.alignof-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5152'>#</a></div><div id='expr.alignof-3.sentence-1' class='sentence'>When <span class='texttt'>alignof</span> is applied to a reference type, the result
is the alignment of the referenced type<a class='hidden_link' href='#expr.alignof-3.sentence-1'>.</a></div> <div id='expr.alignof-3.sentence-2' class='sentence'>When <span class='texttt'>alignof</span>
is applied to an array type, the result is the alignment of the
element type<a class='hidden_link' href='#expr.alignof-3.sentence-2'>.</a></div></div></div><div id='noexcept' class='section'><h4 ><a class='secnum' href='#noexcept' style='min-width:118pt'>7.6.2.7</a> <span class='texttt'>noexcept</span> operator <a class='abbr_ref' href='expr.unary.noexcept'>[expr.unary.noexcept]</a></h4><div class='para' id='noexcept-1'><div class='marginalizedparent'><a class='marginalized' href='#noexcept-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5160'>#</a></div><div id='noexcept-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':noexcept'></a></span><span class='indexparent'><a class='index' id=':expression,noexcept'></a></span>The <span class='texttt'>noexcept</span> operator determines whether the evaluation of its operand,
which is an <a href='expr.prop#def:unevaluated_operand'>unevaluated operand</a>, can <a href='except.throw'>throw an
exception</a><a class='hidden_link' href='#noexcept-1.sentence-1'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:noexcept-expression' id='nt:noexcept-expression'>noexcept-expression:</a>
&#9;<span class='terminal'>noexcept</span> <span class='terminal'>(</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
</pre></div><div class='para' id='noexcept-2'><div class='marginalizedparent'><a class='marginalized' href='#noexcept-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5172'>#</a></div><div id='noexcept-2.sentence-1' class='sentence'>The result of the <span class='texttt'>noexcept</span> operator is a constant of type <span class='texttt'>bool</span>
and is a prvalue<a class='hidden_link' href='#noexcept-2.sentence-1'>.</a></div></div><div class='para' id='noexcept-3'><div class='marginalizedparent'><a class='marginalized' href='#noexcept-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/72f1bb19b4700cf4c6478b84a517150a43a91dd2/source/expressions.tex#L5176'>#</a></div><div id='noexcept-3.sentence-1' class='sentence'>The result of the <span class='texttt'>noexcept</span> operator is <span class='texttt'>true</span>
unless the <i ><a href='expr.comma#nt:expression'>expression</a></i> is
<a href='except.spec#def:potentially-throwing,expression'>potentially-throwing</a><a class='hidden_link' href='#noexcept-3.sentence-1'>.</a></div> </div></div></div></body></html>