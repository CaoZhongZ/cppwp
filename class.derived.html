<!DOCTYPE html><html lang='en'><head><title>[class.derived]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><div id='class.derived'><h1 ><a class='secnum' style='min-width:73pt'>10</a> Derived classes <a class='abbr_ref' href='./#class.derived'>[class.derived]</a></h1><p ><span class='indexparent'><a class='index' id='derived_class'></a></span></p><p ><span class='indexparent'><a class='index' id='virtual_base_class'></a></span>
<span class='indexparent'><a class='index' id='function,_virtual'></a></span>
<span class='indexparent'><a class='index' id='dynamic_binding'></a></span></p><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L11'>#</a></div><p ><span class='indexparent'><a class='index' id='base_class'></a></span><span class='indexparent'><a class='index' id='inheritance'></a></span><span class='indexparent'><a class='index' id='multiple_inheritance'></a></span>A list of base classes can be specified in a class definition using
the notation:</p><pre class='bnf'><a class='nontermdef' id='nt:base-clause'>base-clause:</a>
&#9;<span class='terminal'>:</span> <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>
</pre><pre class='bnf'><a class='nontermdef' id='nt:base-specifier-list'>base-specifier-list:</a>
&#9;<i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i> <span class='terminal'>,</span> <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' id='nt:base-specifier'>base-specifier:</a>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:base-type-specifier'>base-type-specifier</a></i>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>virtual</span> <i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:base-type-specifier'>base-type-specifier</a></i>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i> <span class='terminal'>virtual</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:base-type-specifier'>base-type-specifier</a></i>
</pre><pre class='bnf'><a class='nontermdef' id='nt:class-or-decltype'>class-or-decltype:</a>
&#9;<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class#nt:class-name'>class-name</a></i>
&#9;<i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i>
</pre><pre class='bnf'><a class='nontermdef' id='nt:base-type-specifier'>base-type-specifier:</a>
&#9;<i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
</pre><p ><span class='indexparent'><a class='index' id='specifier_access'></a></span></p><pre class='bnf'><a class='nontermdef' id='nt:access-specifier'>access-specifier:</a>
&#9;<span class='terminal'>private</span>
&#9;<span class='terminal'>protected</span>
&#9;<span class='terminal'>public</span>
</pre><p >The optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> appertains to the <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i>.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L59'>#</a></div><p ><span class='indexparent'><a class='index' id='type,incomplete'></a></span>The type denoted by a <i ><a href='class.derived#nt:base-type-specifier'>base-type-specifier</a></i> shall be
a class type that is not
an
incompletely defined class (Clause <a href='class'>[class]</a>); this class is called a
<a class='hidden_link' href='#def:base_class,direct' id='def:base_class,direct'><i>direct base class</i></a>
for the class being defined.
<span class='indexparent'><a class='index' id='base_class'></a></span><span class='indexparent'><a class='index' id='derivation'></a></span>During the lookup for a base class name, non-type names are
ignored (<a href='basic.scope.hiding'>[basic.scope.hiding]</a>). If the name found is not a
<i ><a href='class#nt:class-name'>class-name</a></i>, the program is ill-formed. A class <span class='texttt'>B</span> is a
base class of a class <span class='texttt'>D</span> if it is a direct base class of
<span class='texttt'>D</span> or a direct base class of one of <span class='texttt'>D</span>'s base classes.
A class is an <a class='hidden_link' href='#def:base_class,indirect' id='def:base_class,indirect'><i>indirect</i></a> base class of another if it is a base
class but not a direct base class. A class is said to be (directly or
indirectly) <a class='hidden_link' href='#def:derived' id='def:derived'><i>derived</i></a> from its (direct or indirect) base
classes.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
See Clause <a href='class.access'>[class.access]</a> for the meaning of
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
<span class='indexparent'><a class='index' id='access_control,base_class_member'></a></span>Unless redeclared in the derived class, members of a base class are also
considered to be members of the derived class.
Members of a base class other than constructors are said to be
<a class='hidden_link' href='#def:inheritance' id='def:inheritance'><i>inherited</i></a>
by the derived class. Constructors of a base class
can also be inherited as described in <a href='namespace.udecl'>[namespace.udecl]</a>.
Inherited members can be referred to in
expressions in the same manner as other members of the derived class,
unless their names are hidden or ambiguous (<a href='class.member.lookup'>[class.member.lookup]</a>).
<span class='indexparent'><a class='index' id='operator,scope_resolution'></a></span>[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
The scope resolution operator <span class='texttt'>&#x200b;::&#x200b;</span> (<a href='expr.prim'>[expr.prim]</a>) can be used
to refer to a direct or indirect base member explicitly. This allows
access to a name that has been redeclared in the derived class. A
derived class can itself serve as a base class subject to access
control; see <a href='class.access.base'>[class.access.base]</a>. A pointer to a derived class can be
implicitly converted to a pointer to an accessible unambiguous base
class (<a href='conv.ptr'>[conv.ptr]</a>). An lvalue of a derived class type can be bound
to a reference to an accessible unambiguous base
class (<a href='dcl.init.ref'>[dcl.init.ref]</a>).
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L105'>#</a></div><p >The <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i> specifies the type of the
<a class='hidden_link' href='#def:base_class_subobjects' id='def:base_class_subobjects'><i>base class subobjects</i></a> contained in an
object of the derived class type.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
<span class='indexparent'><a class='index' id='example,derived_class'></a></span></p><p ><pre class='codeblock'>
struct Base {
  int a, b, c;
};</pre></p><p ><pre class='codeblock'>
struct Derived : Base {
  int b;
};</pre></p><p ><pre class='codeblock'>
struct Derived2 : Derived {
  int c;
};</pre></p><p >Here, an object of class <span class='texttt'>Derived2</span> will have a subobject of class
<span class='texttt'>Derived</span> which in turn will have a subobject of class
<span class='texttt'>Base</span>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L134'>#</a></div><p >A <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> followed by an ellipsis is a
<a href='temp.variadic#def:pack_expansion'>pack expansion</a>.</p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L138'>#</a></div><p >The order in which the base class subobjects are allocated in the
<a href='intro.object#def:most_derived_object'>most derived object</a> is unspecified.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
<span class='indexparent'><a class='index' id='directed_acyclic_graph'></a></span><span class='indexparent'><a class='index' id='lattice'></a></span>A derived class and its base class subobjects can be represented by a
directed acyclic graph (DAG) where an arrow means “directly derived
from”. An arrow need not have a physical representation in memory.
A DAG of subobjects is often referred to as a “subobject lattice”.</p><div class='figure' id='fig:dag'><svg width="114pt" height="182pt"
 viewBox="0.00 0.00 114.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>dag</title>
<!-- Base -->
<g class="node"><title>Base</title>
<text text-anchor="middle" x="53" y="-150.8" font-family="Times,serif" font-size="24.00">Base</text>
</g>
<!-- Derived1 -->
<g class="node"><title>Derived1</title>
<text text-anchor="middle" x="53" y="-80.8" font-family="Times,serif" font-size="24.00">Derived1</text>
</g>
<!-- Derived1&#45;&gt;Base -->
<g class="edge"><title>Derived1&#45;&gt;Base</title>
<path fill="none" stroke="black" d="M53,-104.115C53,-111.626 53,-120.766 53,-129.269"/>
<polygon fill="black" stroke="black" points="49.5001,-129.528 53,-139.528 56.5001,-129.528 49.5001,-129.528"/>
</g>
<!-- Derived2 -->
<g class="node"><title>Derived2</title>
<text text-anchor="middle" x="53" y="-10.8" font-family="Times,serif" font-size="24.00">Derived2</text>
</g>
<!-- Derived2&#45;&gt;Derived1 -->
<g class="edge"><title>Derived2&#45;&gt;Derived1</title>
<path fill="none" stroke="black" d="M53,-34.1151C53,-41.6263 53,-50.7655 53,-59.2685"/>
<polygon fill="black" stroke="black" points="49.5001,-59.5282 53,-69.5283 56.5001,-59.5283 49.5001,-59.5282"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:dag'>2</a> — Directed acyclic graph</div><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L156'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
Initialization of objects representing base classes can be specified in
constructors; see <a href='class.base.init'>[class.base.init]</a>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L162'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
A base class subobject might have a layout (<a href='basic.stc'>[basic.stc]</a>) different
from the layout of a most derived object of the same type. A base class
subobject might have a polymorphic behavior (<a href='class.cdtor'>[class.cdtor]</a>)
different from the polymorphic behavior of a most derived object of the
same type. A base class subobject may be of zero size (Clause <a href='class'>[class]</a>);
however, two subobjects that have the same class type and that belong to
the same most derived object must not be allocated at the same
address (<a href='expr.eq'>[expr.eq]</a>).
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div id='class.mi'><h2 ><a class='secnum' href='#class.mi' style='min-width:88pt'>10.1</a> Multiple base classes <a class='abbr_ref' href='class.mi'>[class.mi]</a></h2><p ><span class='indexparent'><a class='index' id='multiple_inheritance'></a></span><span class='indexparent'><a class='index' id='base_class'></a></span>
</p><div class='para' id='class.mi-1'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L178'>#</a></div><p >A class can be derived from any number of base classes.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
The use of more than one direct base class is often called multiple inheritance.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
class A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D : public A, public B, public C { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.mi-2'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L192'>#</a></div><p ><span class='indexparent'><a class='index' id='layout,class_object'></a></span><span class='indexparent'><a class='index' id='initialization,order_of'></a></span>[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
The order of derivation is not significant except as specified by the
semantics of initialization by constructor (<a href='class.base.init'>[class.base.init]</a>),
<a href='class.dtor'>cleanup</a>, and storage
layout (<a href='class.mem'>[class.mem]</a>, <a href='class.access.spec'>[class.access.spec]</a>).
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.mi-3'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L202'>#</a></div><p >A class shall not be specified as a direct base class of a derived class
more than once.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
A class can be an indirect base class more than once and can be a direct
and an indirect base class. There are limited things that can be done
with such a class. The non-static data members and member functions of
the direct base class cannot be referred to in the scope of the derived
class. However, the static members, enumerations and types can be
unambiguously referred to.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Y : public X, public X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };             <span class='comment'>// ill-formed
</span></pre></p><p ><pre class='codeblock'>
class L { public: int next;  <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class A : public L { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B : public L { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C : public A, public B { void f(); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };   <span class='comment'>// well-formed
</span>class D : public A, public L { void f(); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };   <span class='comment'>// well-formed
</span></pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.mi-4'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L228'>#</a></div><p >A base class specifier that does not contain the keyword
<span class='texttt'>virtual</span>, specifies a <span class='grammarterm'>non-virtual</span> base class. A base
class specifier that contains the keyword <span class='texttt'>virtual</span>, specifies a
<a class='hidden_link' href='#def:base_class,virtual' id='def:base_class,virtual'><i>virtual</i></a> base class. For each distinct occurrence of a
non-virtual base class in the class lattice of the most derived class,
the <a href='intro.object#def:most_derived_object'>most derived object</a> shall contain a
corresponding distinct base class subobject of that type. For each
distinct base class that is specified virtual, the most derived object
shall contain a single base class subobject of that type.</p></div><div class='para' id='class.mi-5'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L239'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
For an object of class type <span class='texttt'>C</span>, each distinct occurrence of a
(non-virtual) base class <span class='texttt'>L</span> in the class lattice of <span class='texttt'>C</span>
corresponds one-to-one with a distinct <span class='texttt'>L</span> subobject within the
object of type <span class='texttt'>C</span>. Given the class <span class='texttt'>C</span> defined above, an
object of class <span class='texttt'>C</span> will have two subobjects of class <span class='texttt'>L</span> as
shown in Figure <a href='#fig:nonvirt'>[fig:nonvirt]</a>.</p><div class='figure' id='fig:nonvirt'><svg width="224pt" height="182pt"
 viewBox="0.00 0.00 224.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>nonvirt</title>
<!-- L1 -->
<g class="node"><title>L1</title>
<text text-anchor="middle" x="27" y="-150.8" font-family="Times,serif" font-size="24.00">L</text>
</g>
<!-- L2 -->
<g class="node"><title>L2</title>
<text text-anchor="middle" x="189" y="-150.8" font-family="Times,serif" font-size="24.00">L</text>
</g>
<!-- A -->
<g class="node"><title>A</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00">A</text>
</g>
<!-- A&#45;&gt;L1 -->
<g class="edge"><title>A&#45;&gt;L1</title>
<path fill="none" stroke="black" d="M27,-104.115C27,-111.626 27,-120.766 27,-129.269"/>
<polygon fill="black" stroke="black" points="23.5001,-129.528 27,-139.528 30.5001,-129.528 23.5001,-129.528"/>
</g>
<!-- B -->
<g class="node"><title>B</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00">B</text>
</g>
<!-- B&#45;&gt;L2 -->
<g class="edge"><title>B&#45;&gt;L2</title>
<path fill="none" stroke="black" d="M189,-104.115C189,-111.626 189,-120.766 189,-129.269"/>
<polygon fill="black" stroke="black" points="185.5,-129.528 189,-139.528 192.5,-129.528 185.5,-129.528"/>
</g>
<!-- C -->
<g class="node"><title>C</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00">C</text>
</g>
<!-- C&#45;&gt;A -->
<g class="edge"><title>C&#45;&gt;A</title>
<path fill="none" stroke="black" d="M88.8041,-34.1151C78.4893,-42.7745 65.597,-53.5976 54.2599,-63.1151"/>
<polygon fill="black" stroke="black" points="51.7473,-60.6546 46.3388,-69.765 56.2481,-66.0159 51.7473,-60.6546"/>
</g>
<!-- C&#45;&gt;B -->
<g class="edge"><title>C&#45;&gt;B</title>
<path fill="none" stroke="black" d="M127.196,-34.1151C137.511,-42.7745 150.403,-53.5976 161.74,-63.1151"/>
<polygon fill="black" stroke="black" points="159.752,-66.0159 169.661,-69.765 164.253,-60.6546 159.752,-66.0159"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:nonvirt'>3</a> — Non-virtual base</div><p >In such lattices, explicit qualification can be used to specify which
subobject is meant. The body of function <span class='texttt'>C&#x200b;::&#x200b;f</span> could refer to the
member <span class='texttt'>next</span> of each <span class='texttt'>L</span> subobject:
</p><p ><pre class='codeblock'>
void C::f() { A::next = B::next; }      <span class='comment'>// well-formed
</span></pre></p><p >Without the <span class='texttt'>A&#x200b;::&#x200b;</span> or <span class='texttt'>B&#x200b;::&#x200b;</span> qualifiers, the definition of
<span class='texttt'>C&#x200b;::&#x200b;f</span> above would be ill-formed because of
ambiguity (<a href='class.member.lookup'>[class.member.lookup]</a>).
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.mi-6'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L265'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
In contrast, consider the case with a virtual base class:
</p><p ><pre class='codeblock'>
class V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class A : virtual public V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B : virtual public V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C : public A, public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre></p><div class='figure' id='fig:virt'><svg width="224pt" height="182pt"
 viewBox="0.00 0.00 224.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virt</title>
<!-- V -->
<g class="node"><title>V</title>
<text text-anchor="middle" x="108" y="-150.8" font-family="Times,serif" font-size="24.00">V</text>
</g>
<!-- A -->
<g class="node"><title>A</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00">A</text>
</g>
<!-- A&#45;&gt;V -->
<g class="edge"><title>A&#45;&gt;V</title>
<path fill="none" stroke="black" d="M46.1959,-104.115C56.5107,-112.774 69.403,-123.598 80.7401,-133.115"/>
<polygon fill="black" stroke="black" points="78.7519,-136.016 88.6612,-139.765 83.2527,-130.655 78.7519,-136.016"/>
</g>
<!-- B -->
<g class="node"><title>B</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00">B</text>
</g>
<!-- B&#45;&gt;V -->
<g class="edge"><title>B&#45;&gt;V</title>
<path fill="none" stroke="black" d="M169.804,-104.115C159.489,-112.774 146.597,-123.598 135.26,-133.115"/>
<polygon fill="black" stroke="black" points="132.747,-130.655 127.339,-139.765 137.248,-136.016 132.747,-130.655"/>
</g>
<!-- C -->
<g class="node"><title>C</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00">C</text>
</g>
<!-- C&#45;&gt;A -->
<g class="edge"><title>C&#45;&gt;A</title>
<path fill="none" stroke="black" d="M88.8041,-34.1151C78.4893,-42.7745 65.597,-53.5976 54.2599,-63.1151"/>
<polygon fill="black" stroke="black" points="51.7473,-60.6546 46.3388,-69.765 56.2481,-66.0159 51.7473,-60.6546"/>
</g>
<!-- C&#45;&gt;B -->
<g class="edge"><title>C&#45;&gt;B</title>
<path fill="none" stroke="black" d="M127.196,-34.1151C137.511,-42.7745 150.403,-53.5976 161.74,-63.1151"/>
<polygon fill="black" stroke="black" points="159.752,-66.0159 169.661,-69.765 164.253,-60.6546 159.752,-66.0159"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:virt'>4</a> — Virtual base</div><p >For an object <span class='texttt'>c</span> of class type <span class='texttt'>C</span>, a single subobject of
type <span class='texttt'>V</span> is shared by every base class subobject of <span class='texttt'>c</span> that has a
<span class='texttt'>virtual</span> base class of type <span class='texttt'>V</span>. Given the class <span class='texttt'>C</span>
defined above, an object of class <span class='texttt'>C</span> will have one subobject of
class <span class='texttt'>V</span>, as shown in Figure <a href='#fig:virt'>[fig:virt]</a>.
<span class='indexparent'><a class='index' id='DAG,multiple_inheritance'></a></span><span class='indexparent'><a class='index' id='DAG,virtual_base_class'></a></span><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.mi-7'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L288'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
A class can have both virtual and non-virtual base classes of a given
type.
</p><p ><pre class='codeblock'>
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class X : virtual public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Y : virtual public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Z : public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class AA : public X, public Y, public Z { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre></p><p >For an object of class <span class='texttt'>AA</span>, all <span class='texttt'>virtual</span> occurrences of
base class <span class='texttt'>B</span> in the class lattice of <span class='texttt'>AA</span> correspond to a
single <span class='texttt'>B</span> subobject within the object of type <span class='texttt'>AA</span>, and
every other occurrence of a (non-virtual) base class <span class='texttt'>B</span> in the
class lattice of <span class='texttt'>AA</span> corresponds one-to-one with a distinct
<span class='texttt'>B</span> subobject within the object of type <span class='texttt'>AA</span>. Given the
class <span class='texttt'>AA</span> defined above, class <span class='texttt'>AA</span> has two subobjects of
class <span class='texttt'>B</span>: <span class='texttt'>Z</span>'s <span class='texttt'>B</span> and the virtual <span class='texttt'>B</span> shared
by <span class='texttt'>X</span> and <span class='texttt'>Y</span>, as shown in Figure <a href='#fig:virtnonvirt'>[fig:virtnonvirt]</a>.</p><p ><span class='indexparent'><a class='index' id='DAG,virtual_base_class'></a></span><span class='indexparent'><a class='index' id='DAG,non-virtual_base_class'></a></span><span class='indexparent'><a class='index' id='DAG,multiple_inheritance'></a></span></p><div class='figure' id='fig:virtnonvirt'><svg width="386pt" height="182pt"
 viewBox="0.00 0.00 386.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virtnonvirt</title>
<!-- B1 -->
<g class="node"><title>B1</title>
<text text-anchor="middle" x="108" y="-150.8" font-family="Times,serif" font-size="24.00">B</text>
</g>
<!-- B2 -->
<g class="node"><title>B2</title>
<text text-anchor="middle" x="351" y="-150.8" font-family="Times,serif" font-size="24.00">B</text>
</g>
<!-- AA -->
<g class="node"><title>AA</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00">AA</text>
</g>
<!-- X -->
<g class="node"><title>X</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00">X</text>
</g>
<!-- AA&#45;&gt;X -->
<g class="edge"><title>AA&#45;&gt;X</title>
<path fill="none" stroke="black" d="M88.8041,-34.1151C78.4893,-42.7745 65.597,-53.5976 54.2599,-63.1151"/>
<polygon fill="black" stroke="black" points="51.7473,-60.6546 46.3388,-69.765 56.2481,-66.0159 51.7473,-60.6546"/>
</g>
<!-- Y -->
<g class="node"><title>Y</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00">Y</text>
</g>
<!-- AA&#45;&gt;Y -->
<g class="edge"><title>AA&#45;&gt;Y</title>
<path fill="none" stroke="black" d="M127.196,-34.1151C137.511,-42.7745 150.403,-53.5976 161.74,-63.1151"/>
<polygon fill="black" stroke="black" points="159.752,-66.0159 169.661,-69.765 164.253,-60.6546 159.752,-66.0159"/>
</g>
<!-- Z -->
<g class="node"><title>Z</title>
<text text-anchor="middle" x="351" y="-80.8" font-family="Times,serif" font-size="24.00">Z</text>
</g>
<!-- AA&#45;&gt;Z -->
<g class="edge"><title>AA&#45;&gt;Z</title>
<path fill="none" stroke="black" d="M135.403,-25.6683C179.09,-37.8934 264.596,-61.8211 313.781,-75.5849"/>
<polygon fill="black" stroke="black" points="313.124,-79.0354 323.697,-78.3597 315.01,-72.2943 313.124,-79.0354"/>
</g>
<!-- X&#45;&gt;B1 -->
<g class="edge"><title>X&#45;&gt;B1</title>
<path fill="none" stroke="black" d="M46.1959,-104.115C56.5107,-112.774 69.403,-123.598 80.7401,-133.115"/>
<polygon fill="black" stroke="black" points="78.7519,-136.016 88.6612,-139.765 83.2527,-130.655 78.7519,-136.016"/>
</g>
<!-- Y&#45;&gt;B1 -->
<g class="edge"><title>Y&#45;&gt;B1</title>
<path fill="none" stroke="black" d="M169.804,-104.115C159.489,-112.774 146.597,-123.598 135.26,-133.115"/>
<polygon fill="black" stroke="black" points="132.747,-130.655 127.339,-139.765 137.248,-136.016 132.747,-130.655"/>
</g>
<!-- Z&#45;&gt;B2 -->
<g class="edge"><title>Z&#45;&gt;B2</title>
<path fill="none" stroke="black" d="M351,-104.115C351,-111.626 351,-120.766 351,-129.269"/>
<polygon fill="black" stroke="black" points="347.5,-129.528 351,-139.528 354.5,-129.528 347.5,-129.528"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:virtnonvirt'>5</a> — Virtual and non-virtual base</div><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div></div><div id='class.member.lookup'><h2 ><a class='secnum' href='#class.member.lookup' style='min-width:88pt'>10.2</a> Member name lookup <a class='abbr_ref' href='class.member.lookup'>[class.member.lookup]</a></h2><p ><span class='indexparent'><a class='index' id='lookup,member_name'></a></span><span class='indexparent'><a class='index' id='ambiguity,base_class_member'></a></span><span class='indexparent'><a class='index' id='ambiguity,member_access'></a></span></p><div class='para' id='class.member.lookup-1'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L324'>#</a></div><p >Member name lookup determines the meaning of a name
(<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>) in a <a href='basic.scope.class'>class scope</a>.
Name lookup can result in an <a class='hidden_link' href='#def:ambiguity' id='def:ambiguity'><i>ambiguity</i></a>, in which case the
program is ill-formed. For an <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>, name lookup
begins in the class scope of <span class='texttt'>this</span>; for a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>, name lookup begins in the scope of the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>.
<a href='basic.lookup'>Name lookup</a> takes place before
<a href='class.access'>access control</a>.</p></div><div class='para' id='class.member.lookup-2'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L335'>#</a></div><p >The following steps define the result of name lookup for a member name
<span class='texttt'>f</span> in a class scope <span class='texttt'>C</span>.</p></div><div class='para' id='class.member.lookup-3'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L339'>#</a></div><p >The <a class='hidden_link' href='#def:lookup_set' id='def:lookup_set'><i>lookup set</i></a> for <span class='texttt'>f</span> in <span class='texttt'>C</span>, called <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>,
consists of two component sets: the <a class='hidden_link' href='#def:declaration_set' id='def:declaration_set'><i>declaration set</i></a>, a set of
members named <span class='texttt'>f</span>; and the <a class='hidden_link' href='#def:subobject_set' id='def:subobject_set'><i>subobject set</i></a>, a set of
subobjects where declarations of these members (possibly including
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>s) were found. In the declaration set,
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>s are replaced by the
set of designated members that are not hidden or overridden by members of the
derived class (<a href='namespace.udecl'>[namespace.udecl]</a>),
and type declarations (including injected-class-names) are
replaced by the types they designate. <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is calculated as follows:</p></div><div class='para' id='class.member.lookup-4'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L351'>#</a></div><p >If <span class='texttt'>C</span> contains a declaration of the name <span class='texttt'>f</span>, the
declaration set contains every declaration of <span class='texttt'>f</span> declared in
<span class='texttt'>C</span> that satisfies the requirements of the language construct in
which the lookup occurs.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
Looking up a name in an
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> (<a href='basic.lookup.elab'>[basic.lookup.elab]</a>) or
<i><a href="class.derived#nt:base-specifier">base-specifier</a></i>, for instance,
ignores all non-type declarations, while looking up a name in a
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> (<a href='basic.lookup.qual'>[basic.lookup.qual]</a>) ignores
function, variable, and enumerator declarations. As another example,
looking up a name in a
<i><a href="namespace.udecl#nt:using-declaration">using-declaration</a></i> includes the
declaration of a class or enumeration that would ordinarily be hidden by
another declaration of that name in the same scope.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
If the resulting declaration set is not empty, the subobject set
contains <span class='texttt'>C</span> itself, and calculation is complete.</p></div><div class='para' id='class.member.lookup-5'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L371'>#</a></div><p >Otherwise (i.e., <span class='texttt'>C</span> does not contain a declaration of <span class='texttt'>f</span>
or the resulting declaration set is empty), <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is initially empty.
If <span class='texttt'>C</span> has base classes, calculate the lookup set for <span class='texttt'>f</span> in
each direct base class subobject <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>, and merge each such lookup set
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> in turn into <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>.</p></div><div class='para' id='class.member.lookup-6'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L378'>#</a></div><p >The following steps define the result of merging lookup set <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>
into the intermediate <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>:</p><ul class='itemize'><li id='class.member.lookup-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.member.lookup-6.1'>(6.1)</a></div><p >If each of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a base class
subobject of at least one of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>, or if
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is empty, <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is unchanged and the merge is complete.
Conversely, if each of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a base class
subobject of at least one of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>, or if
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is empty, the new <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a copy of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>.</p></li><li id='class.member.lookup-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.member.lookup-6.2'>(6.2)</a></div><p >Otherwise, if the declaration sets of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>
differ, the merge is ambiguous: the new <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a lookup set with an
invalid declaration set and the union of the subobject sets. In
subsequent merges, an invalid declaration set is considered different
from any other.</p></li><li id='class.member.lookup-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.member.lookup-6.3'>(6.3)</a></div><p >Otherwise, the new <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a lookup set with the shared set of
declarations and the union of the subobject sets.
</p></li></ul></div><div class='para' id='class.member.lookup-7'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L400'>#</a></div><p >The result of name lookup for <span class='texttt'>f</span> in <span class='texttt'>C</span> is the declaration
set of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>. If it is an invalid set, the program is ill-formed.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct A { int x; };                    <span class='comment'>// S(x,A) = { { <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>A</span> } }
</span>struct B { float x; };                  <span class='comment'>// S(x,B) = { { <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>B</span> } }
</span>struct C: public A, public B { };       <span class='comment'>// S(x,C) = { invalid, { <span class='tcode_in_codeblock'>A</span> in <span class='tcode_in_codeblock'>C</span>, <span class='tcode_in_codeblock'>B</span> in <span class='tcode_in_codeblock'>C</span> } }
</span>struct D: public virtual C { };         <span class='comment'>// S(x,D) = S(x,C)
</span>struct E: public virtual C { char x; }; <span class='comment'>// S(x,E) = { { <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>E</span> } }
</span>struct F: public D, public E { };       <span class='comment'>// S(x,F) = S(x,E)
</span>int main() {
  F f;
  f.x = 0;                              <span class='comment'>// OK, lookup finds <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span>
</span>}</pre></p><p ><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.106em;">F</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is unambiguous because the <span class='texttt'>A</span> and <span class='texttt'>B</span> base
class subobjects of <span class='texttt'>D</span> are also base class subobjects of <span class='texttt'>E</span>, so
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">D</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is discarded in the first merge step.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.member.lookup-8'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L422'>#</a></div><p ><span class='indexparent'><a class='index' id='access_control,overload_resolution_and'></a></span>If the name of an overloaded function is unambiguously found,
<a href='over.match'>overload resolution</a> also takes place before access
control.
<span class='indexparent'><a class='index' id='example,scope_resolution_operator'></a></span><span class='indexparent'><a class='index' id='example,explicit_qualification'></a></span><span class='indexparent'><a class='index' id='overloading,resolution,scoping_ambiguity'></a></span>Ambiguities can often be resolved by qualifying a name with its class name.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct A {
  int f();
};</pre></p><p ><pre class='codeblock'>
struct B {
  int f();
};</pre></p><p ><pre class='codeblock'>
struct C : A, B {
  int f() { return A::f() + B::f(); }
};</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.member.lookup-9'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L451'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
A static member, a nested type or an enumerator defined in a base class
<span class='texttt'>T</span> can unambiguously be found even if an object has more than one
base class subobject of type <span class='texttt'>T</span>. Two base class subobjects share
the non-static member subobjects of their common virtual base classes.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct V {
  int v;
};
struct A {
  int a;
  static int   s;
  enum { e };
};
struct B : A, virtual V { };
struct C : A, virtual V { };
struct D : B, C { };

void f(D* pd) {
  pd-&gt;v++;          <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>v</span> (virtual)
</span>  pd-&gt;s++;          <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>s</span> (static)
</span>  int i = pd-&gt;e;    <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>e</span> (enumerator)
</span>  pd-&gt;a++;          <span class='comment'>// error, ambiguous: two <span class='tcode_in_codeblock'>a</span>s in <span class='tcode_in_codeblock'>D</span>
</span>}</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.member.lookup-10'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L481'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
<span class='indexparent'><a class='index' id='dominance,virtual_base_class'></a></span>When virtual base classes are used, a hidden declaration can be reached
along a path through the subobject lattice that does not pass through
the hiding declaration. This is not an ambiguity. The identical use with
non-virtual base classes is an ambiguity; in that case there is no
unique instance of the name that hides all the others.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct V { int f();  int x; };
struct W { int g();  int y; };
struct B : virtual V, W {
  int f();  int x;
  int g();  int y;
};
struct C : virtual V, W { };

struct D : B, C { void glorp(); };</pre></p><div class='figure' id='fig:name'><svg width="386pt" height="182pt"
 viewBox="0.00 0.00 386.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virt</title>
<!-- W1 -->
<g class="node"><title>W1</title>
<text text-anchor="middle" x="27" y="-150.8" font-family="Times,serif" font-size="24.00">W</text>
</g>
<!-- V -->
<g class="node"><title>V</title>
<text text-anchor="middle" x="189" y="-150.8" font-family="Times,serif" font-size="24.00">V</text>
</g>
<!-- W2 -->
<g class="node"><title>W2</title>
<text text-anchor="middle" x="351" y="-150.8" font-family="Times,serif" font-size="24.00">W</text>
</g>
<!-- B -->
<g class="node"><title>B</title>
<text text-anchor="middle" x="108" y="-80.8" font-family="Times,serif" font-size="24.00">B</text>
</g>
<!-- B&#45;&gt;W1 -->
<g class="edge"><title>B&#45;&gt;W1</title>
<path fill="none" stroke="black" d="M88.8041,-104.115C78.4893,-112.774 65.597,-123.598 54.2599,-133.115"/>
<polygon fill="black" stroke="black" points="51.7473,-130.655 46.3388,-139.765 56.2481,-136.016 51.7473,-130.655"/>
</g>
<!-- B&#45;&gt;V -->
<g class="edge"><title>B&#45;&gt;V</title>
<path fill="none" stroke="black" d="M127.196,-104.115C137.511,-112.774 150.403,-123.598 161.74,-133.115"/>
<polygon fill="black" stroke="black" points="159.752,-136.016 169.661,-139.765 164.253,-130.655 159.752,-136.016"/>
</g>
<!-- C -->
<g class="node"><title>C</title>
<text text-anchor="middle" x="270" y="-80.8" font-family="Times,serif" font-size="24.00">C</text>
</g>
<!-- C&#45;&gt;V -->
<g class="edge"><title>C&#45;&gt;V</title>
<path fill="none" stroke="black" d="M250.804,-104.115C240.489,-112.774 227.597,-123.598 216.26,-133.115"/>
<polygon fill="black" stroke="black" points="213.747,-130.655 208.339,-139.765 218.248,-136.016 213.747,-130.655"/>
</g>
<!-- C&#45;&gt;W2 -->
<g class="edge"><title>C&#45;&gt;W2</title>
<path fill="none" stroke="black" d="M289.196,-104.115C299.511,-112.774 312.403,-123.598 323.74,-133.115"/>
<polygon fill="black" stroke="black" points="321.752,-136.016 331.661,-139.765 326.253,-130.655 321.752,-136.016"/>
</g>
<!-- D -->
<g class="node"><title>D</title>
<text text-anchor="middle" x="189" y="-10.8" font-family="Times,serif" font-size="24.00">D</text>
</g>
<!-- D&#45;&gt;B -->
<g class="edge"><title>D&#45;&gt;B</title>
<path fill="none" stroke="black" d="M169.804,-34.1151C159.489,-42.7745 146.597,-53.5976 135.26,-63.1151"/>
<polygon fill="black" stroke="black" points="132.747,-60.6546 127.339,-69.765 137.248,-66.0159 132.747,-60.6546"/>
</g>
<!-- D&#45;&gt;C -->
<g class="edge"><title>D&#45;&gt;C</title>
<path fill="none" stroke="black" d="M208.196,-34.1151C218.511,-42.7745 231.403,-53.5976 242.74,-63.1151"/>
<polygon fill="black" stroke="black" points="240.752,-66.0159 250.661,-69.765 245.253,-60.6546 240.752,-66.0159"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:name'>6</a> — Name lookup</div><p >The names declared in <span class='texttt'>V</span> and the left-hand instance of <span class='texttt'>W</span>
are hidden by those in <span class='texttt'>B</span>, but the names declared in the
right-hand instance of <span class='texttt'>W</span> are not hidden at all.
</p><p ><pre class='codeblock'>
void D::glorp() {
  x++;              <span class='comment'>// OK: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;x</span> hides <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;x</span>
</span>  f();              <span class='comment'>// OK: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f()</span> hides <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;f()</span>
</span>  y++;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;y</span> and <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>W&#x200b;::&#x200b;y</span>
</span>  g();              <span class='comment'>// error: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;g()</span> and <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>W&#x200b;::&#x200b;g()</span>
</span>}</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]
<span class='indexparent'><a class='index' id='ambiguity,class_conversion'></a></span>
</p></div><div class='para' id='class.member.lookup-11'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L523'>#</a></div><p >An explicit or implicit conversion from a pointer to or
an expression designating an object
of a
derived class to a pointer or reference to one of its base classes shall
unambiguously refer to a unique object representing the base class.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct V { };
struct A { };
struct B : A, virtual V { };
struct C : A, virtual V { };
struct D : B, C { };

void g() {
  D d;
  B* pb = &amp;d;
  A* pa = &amp;d;       <span class='comment'>// error, ambiguous: <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>A</span> or <span class='tcode_in_codeblock'>B</span>'s <span class='tcode_in_codeblock'>A</span>?
</span>  V* pv = &amp;d;       <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>V</span> subobject
</span>}</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.member.lookup-12'><div class='marginalizedparent'><a class='marginalized' href='#class.member.lookup-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L546'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
Even if the result of name lookup is unambiguous, use of a name found in
multiple subobjects might still be
ambiguous (<a href='conv.mem'>[conv.mem]</a>, <a href='expr.ref'>[expr.ref]</a>, <a href='class.access.base'>[class.access.base]</a>).<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct B1 {
  void f();
  static void f(int);
  int i;
};
struct B2 {
  void f(double);
};
struct I1: B1 { };
struct I2: B1 { };

struct D: I1, I2, B2 {
  using B1::f;
  using B2::f;
  void g() {
    f();                        <span class='comment'>// Ambiguous conversion of <span class='tcode_in_codeblock'>this</span>
</span>    f(0);                       <span class='comment'>// Unambiguous (static)
</span>    f(0.0);                     <span class='comment'>// Unambiguous (only one <span class='tcode_in_codeblock'>B2</span>)
</span>    int B1::* mpB1 = &amp;D::i;     <span class='comment'>// Unambiguous
</span>    int D::* mpD = &amp;D::i;       <span class='comment'>// Ambiguous conversion
</span>  }
};</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div></div><div id='class.virtual'><h2 ><a class='secnum' href='#class.virtual' style='min-width:88pt'>10.3</a> Virtual functions <a class='abbr_ref' href='class.virtual'>[class.virtual]</a></h2><p ><span class='indexparent'><a class='index' id='virtual_function'></a></span><span class='indexparent'><a class='index' id='type,polymorphic'></a></span>
</p><div class='para' id='class.virtual-1'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L581'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
Virtual functions support dynamic binding and object-oriented
programming. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] A class that declares or inherits a virtual function is
called a <a class='hidden_link' href='#def:class,polymorphic' id='def:class,polymorphic'><i>polymorphic class</i></a>.</p></div><div class='para' id='class.virtual-2'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L587'>#</a></div><p >If a virtual member function <span class='texttt'>vf</span> is declared in a class
<span class='texttt'>Base</span> and in a class <span class='texttt'>Derived</span>, derived directly or
indirectly from <span class='texttt'>Base</span>, a member function <span class='texttt'>vf</span> with the same
name, <a href='dcl.fct#def:parameter-type-list'>parameter-type-list</a>, cv-qualification, and ref-qualifier
(or absence of same) as
<span class='texttt'>Base&#x200b;::&#x200b;vf</span> is declared, then <span class='texttt'>Derived&#x200b;::&#x200b;vf</span> is also virtual
(whether or not it is so declared) and it <a class='hidden_link' href='#def:overrides' id='def:overrides'><i>overrides</i></a><a class='footnotenum' href='#footnote-111'>111</a>
<span class='texttt'>Base&#x200b;::&#x200b;vf</span>. For convenience we say that any virtual function
overrides itself.
<span class='indexparent'><a class='index' id='overrider,final'></a></span>A virtual member function <span class='texttt'>C&#x200b;::&#x200b;vf</span> of a class object <span class='texttt'>S</span> is a <a class='hidden_link' href='#def:final_overrider' id='def:final_overrider'><i>final
overrider</i></a> unless the <a href='intro.object#def:most_derived_class'>most derived class</a> of which <span class='texttt'>S</span> is a
base class subobject (if any) declares or inherits another member function that overrides
<span class='texttt'>vf</span>. In a derived class, if a virtual member function of a base class subobject
has more than one final overrider the program is ill-formed.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct A {
  virtual void f();
};
struct B : virtual A {
  virtual void f();
};
struct C : B , virtual A {
  using A::f;
};

void foo() {
  C c;
  c.f();              <span class='comment'>// calls <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f</span>, the final overrider
</span>  c.C::f();           <span class='comment'>// calls <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span> because of the using-declaration
</span>}</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct A { virtual void f(); };
struct B : A { };
struct C : A { void f(); };
struct D : B, C { };  <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span> and <span class='tcode_in_codeblock'>C&#x200b;::&#x200b;f</span> are the final overriders
</span>                      <span class='comment'>// for the <span class='tcode_in_codeblock'>B</span> and <span class='tcode_in_codeblock'>C</span> subobjects, respectively
</span></pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-3'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L638'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
A virtual member function does not have to be visible to be overridden,
for example,
</p><p ><pre class='codeblock'>
struct B {
  virtual void f();
};
struct D : B {
  void f(int);
};
struct D2 : D {
  void f();
};</pre></p><p >the function <span class='texttt'>f(int)</span> in class <span class='texttt'>D</span> hides the virtual
function <span class='texttt'>f()</span> in its base class <span class='texttt'>B</span>; <span class='texttt'>D&#x200b;::&#x200b;f(int)</span> is
not a virtual function. However, <span class='texttt'>f()</span> declared in class
<span class='texttt'>D2</span> has the same name and the same parameter list as
<span class='texttt'>B&#x200b;::&#x200b;f()</span>, and therefore is a virtual function that overrides the
function <span class='texttt'>B&#x200b;::&#x200b;f()</span> even though <span class='texttt'>B&#x200b;::&#x200b;f()</span> is not visible in
class <span class='texttt'>D2</span>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-4'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L662'>#</a></div><p >If a virtual function <span class='texttt'>f</span> in some class <span class='texttt'>B</span> is marked with the
<i ><a href='class.mem#nt:virt-specifier'>virt-specifier</a></i> <span class='texttt'>final</span> and in a class <span class='texttt'>D</span> derived from <span class='texttt'>B</span>
a function <span class='texttt'>D&#x200b;::&#x200b;f</span> overrides <span class='texttt'>B&#x200b;::&#x200b;f</span>, the program is ill-formed. [<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct B {
  virtual void f() const final;
};

struct D : B {
  void f() const;     <span class='comment'>// error: <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f</span> attempts to override <span class='tcode_in_codeblock'>final</span> <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f</span>
</span>};</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-5'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L677'>#</a></div><p >If a virtual function is marked with the <i ><a href='class.mem#nt:virt-specifier'>virt-specifier</a></i> <span class='texttt'>override</span> and
does not override a member function of a base class, the program is ill-formed. [<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct B {
  virtual void f(int);
};

struct D : B {
  virtual void f(long) override;  <span class='comment'>// error: wrong signature overriding <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f</span>
</span>  virtual void f(int) override;   <span class='comment'>// OK
</span>};</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-6'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L692'>#</a></div><p >Even though destructors are not inherited, a destructor in a derived
class overrides a base class destructor declared virtual;
see <a href='class.dtor'>[class.dtor]</a> and <a href='class.free'>[class.free]</a>.</p></div><div class='para' id='class.virtual-7'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L697'>#</a></div><p >The return type of an overriding function shall be either identical to
the return type of the overridden function or <a class='hidden_link' href='#def:return_type,covariant' id='def:return_type,covariant'><i>covariant</i></a> with
the classes of the functions. If a function <span class='texttt'>D&#x200b;::&#x200b;f</span> overrides a
function <span class='texttt'>B&#x200b;::&#x200b;f</span>, the return types of the functions are covariant
if they satisfy the following criteria:
</p><ul class='itemize'><li id='class.virtual-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.virtual-7.1'>(7.1)</a></div><p >both are pointers to classes, both are lvalue references to
classes, or both are rvalue references to classes<a class='footnotenum' href='#footnote-112'>112</a></p></li><li id='class.virtual-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.virtual-7.2'>(7.2)</a></div><p >the class in the return type of <span class='texttt'>B&#x200b;::&#x200b;f</span> is the same class as
the class in the return type of <span class='texttt'>D&#x200b;::&#x200b;f</span>, or is an unambiguous and
accessible direct or indirect base class of the class in the return type
of <span class='texttt'>D&#x200b;::&#x200b;f</span></p></li><li id='class.virtual-7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.virtual-7.3'>(7.3)</a></div><p >both pointers or references have the same cv-qualification and the
class type in the return type of <span class='texttt'>D&#x200b;::&#x200b;f</span> has the same
cv-qualification as or less cv-qualification than the class type in the
return type of <span class='texttt'>B&#x200b;::&#x200b;f</span>.
</p></li></ul></div><div class='para' id='class.virtual-8'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L720'>#</a></div><p >If the class type in the covariant return type of <span class='texttt'>D&#x200b;::&#x200b;f</span> differs from that of
<span class='texttt'>B&#x200b;::&#x200b;f</span>, the class type in the return type of <span class='texttt'>D&#x200b;::&#x200b;f</span> shall be
complete at the point of declaration of <span class='texttt'>D&#x200b;::&#x200b;f</span> or shall be the
class type <span class='texttt'>D</span>. When the overriding function is called as the
final overrider of the overridden function, its result is converted to
the type returned by the (statically chosen) overridden
function (<a href='expr.call'>[expr.call]</a>).
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
<span class='indexparent'><a class='index' id='example,virtual_function'></a></span></p><p ><pre class='codeblock'>
class B { };
class D : private B { friend class Derived; };
struct Base {
  virtual void vf1();
  virtual void vf2();
  virtual void vf3();
  virtual B*   vf4();
  virtual B*   vf5();
  void f();
};

struct No_good : public Base {
  D*  vf4();        <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> (base class of <span class='tcode_in_codeblock'>D</span>) inaccessible
</span>};

class A;
struct Derived : public Base {
    void vf1();     <span class='comment'>// virtual and overrides <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;vf1()</span>
</span>    void vf2(int);  <span class='comment'>// not virtual, hides <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;vf2()</span>
</span>    char vf3();     <span class='comment'>// error: invalid difference in return type only
</span>    D*   vf4();     <span class='comment'>// OK: returns pointer to derived class
</span>    A*   vf5();     <span class='comment'>// error: returns pointer to incomplete class
</span>    void f();
};

void g() {
  Derived d;
  Base* bp = &amp;d;                <span class='comment'>// standard conversion:
</span>                                <span class='comment'>// <span class='tcode_in_codeblock'>Derived*</span> to <span class='tcode_in_codeblock'>Base*</span>
</span>  bp-&gt;vf1();                    <span class='comment'>// calls <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;vf1()</span>
</span>  bp-&gt;vf2();                    <span class='comment'>// calls <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;vf2()</span>
</span>  bp-&gt;f();                      <span class='comment'>// calls <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;f()</span> (not virtual)
</span>  B*  p = bp-&gt;vf4();            <span class='comment'>// calls <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;pf()</span> and converts the
</span>                                <span class='comment'>// result to <span class='tcode_in_codeblock'>B*</span>
</span>  Derived*  dp = &amp;d;
  D*  q = dp-&gt;vf4();            <span class='comment'>// calls <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;pf()</span> and does not
</span>                                <span class='comment'>// convert the result to <span class='tcode_in_codeblock'>B*</span>
</span>  dp-&gt;vf2();                    <span class='comment'>// ill-formed: argument mismatch
</span>}</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-9'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L773'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
The interpretation of the call of a virtual function depends on the type
of the object for which it is called (the dynamic type), whereas the
interpretation of a call of a non-virtual member function depends only
on the type of the pointer or reference denoting that object (the static
type) (<a href='expr.call'>[expr.call]</a>).
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-10'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L782'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
The <span class='texttt'>virtual</span> specifier implies membership, so a virtual function
cannot be a non-member (<a href='dcl.fct.spec'>[dcl.fct.spec]</a>) function. Nor can a virtual
function be a static member, since a virtual function call relies on a
specific object for determining which function to invoke. A virtual
function declared in one class can be declared a <span class='texttt'>friend</span> in
another class.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-11'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L792'>#</a></div><p ><span class='indexparent'><a class='index' id='definition,virtual_function'></a></span>A virtual function declared in a class shall be defined, or declared
<a href='class.abstract#def:pure'>pure</a> in that class, or both; no diagnostic is
required (<a href='basic.def.odr'>[basic.def.odr]</a>).
<span class='indexparent'><a class='index' id='friend,virtual_and'></a></span>
</p></div><div class='para' id='class.virtual-12'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L799'>#</a></div><p ><span class='indexparent'><a class='index' id='multiple_inheritance,virtual_and'></a></span>[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
Here are some uses of virtual functions with multiple base classes:
<span class='indexparent'><a class='index' id='example,virtual_function'></a></span></p><p ><pre class='codeblock'>
struct A {
  virtual void f();
};

struct B1 : A {                 <span class='comment'>// note non-virtual derivation
</span>  void f();
};

struct B2 : A {
  void f();
};

struct D : B1, B2 {             <span class='comment'>// <span class='tcode_in_codeblock'>D</span> has two separate <span class='tcode_in_codeblock'>A</span> subobjects
</span>};

void foo() {
  D   d;
<span class='comment'>//<span class='tcode_in_codeblock'>   A*  ap = &amp;d;</span>                  // would be ill-formed: ambiguous
</span>  B1*  b1p = &amp;d;
  A*   ap = b1p;
  D*   dp = &amp;d;
  ap-&gt;f();                      <span class='comment'>// calls <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;B1&#x200b;::&#x200b;f</span>
</span>  dp-&gt;f();                      <span class='comment'>// ill-formed: ambiguous
</span>}</pre></p><p >In class <span class='texttt'>D</span> above there are two occurrences of class <span class='texttt'>A</span>
and hence two occurrences of the virtual member function <span class='texttt'>A&#x200b;::&#x200b;f</span>.
The final overrider of <span class='texttt'>B1&#x200b;::&#x200b;A&#x200b;::&#x200b;f</span> is <span class='texttt'>B1&#x200b;::&#x200b;f</span> and the final
overrider of <span class='texttt'>B2&#x200b;::&#x200b;A&#x200b;::&#x200b;f</span> is <span class='texttt'>B2&#x200b;::&#x200b;f</span>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-13'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L836'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
The following example shows a function that does not have a unique final
overrider:
</p><p ><pre class='codeblock'>
struct A {
  virtual void f();
};

struct VB1 : virtual A {        <span class='comment'>// note virtual derivation
</span>  void f();
};

struct VB2 : virtual A {
  void f();
};

struct Error : VB1, VB2 {       <span class='comment'>// ill-formed
</span>};

struct Okay : VB1, VB2 {
  void f();
};</pre></p><p >Both <span class='texttt'>VB1&#x200b;::&#x200b;f</span> and <span class='texttt'>VB2&#x200b;::&#x200b;f</span> override <span class='texttt'>A&#x200b;::&#x200b;f</span> but there
is no overrider of both of them in class <span class='texttt'>Error</span>. This example is
therefore ill-formed. Class <span class='texttt'>Okay</span> is well formed, however,
because <span class='texttt'>Okay&#x200b;::&#x200b;f</span> is a final overrider.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-14'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L866'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
The following example uses the well-formed classes from above.
</p><p ><pre class='codeblock'>
struct VB1a : virtual A {       <span class='comment'>// does not declare <span class='tcode_in_codeblock'>f</span>
</span>};

struct Da : VB1a, VB2 {
};

void foe() {
  VB1a*  vb1ap = new Da;
  vb1ap-&gt;f();                   <span class='comment'>// calls <span class='tcode_in_codeblock'>VB2&#x200b;::&#x200b;f</span>
</span>}</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-15'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L883'>#</a></div><p ><span class='indexparent'><a class='index' id='operator,scope_resolution'></a></span><span class='indexparent'><a class='index' id='virtual_function_call'></a></span>Explicit qualification with the scope operator (<a href='expr.prim'>[expr.prim]</a>)
suppresses the virtual call mechanism.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
class B { public: virtual void f(); };
class D : public B { public: void f(); };

void D::f() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> B::f(); }</pre></p><p >Here, the function call in
<span class='texttt'>D&#x200b;::&#x200b;f</span>
really does call
<span class='texttt'>B&#x200b;::&#x200b;f</span>
and not
<span class='texttt'>D&#x200b;::&#x200b;f</span>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.virtual-16'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L904'>#</a></div><p >A function with a deleted definition (<a href='dcl.fct.def'>[dcl.fct.def]</a>) shall
not override a function that does not have a deleted definition. Likewise,
a function that does not have a deleted definition shall not override a
function with a deleted definition.</p></div><div class='footnote' id='footnote-111'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-111'>111)</a></div><p >A function with the same name but a different parameter list
(Clause <a href='over'>[over]</a>) as a virtual function is not necessarily virtual and
does not override. The use of the <span class='texttt'>virtual</span> specifier in the
declaration of an overriding function is legal but redundant (has empty
semantics). <a href='class.access'>Access control</a> is not considered in
determining overriding.</p></div><div class='footnote' id='footnote-112'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-112'>112)</a></div><p >Multi-level pointers to classes or references to multi-level pointers to
classes are not allowed.</p></div></div><div id='class.abstract'><h2 ><a class='secnum' href='#class.abstract' style='min-width:88pt'>10.4</a> Abstract classes <a class='abbr_ref' href='class.abstract'>[class.abstract]</a></h2><div class='para' id='class.abstract-1'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L913'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
The abstract class mechanism supports the notion of a general concept,
such as a <span class='texttt'>shape</span>, of which only more concrete variants, such as
<span class='texttt'>circle</span> and <span class='texttt'>square</span>, can actually be used. An abstract
class can also be used to define an interface for which derived classes
provide a variety of implementations.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.abstract-2'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L922'>#</a></div><p >An <a class='hidden_link' href='#def:class,abstract' id='def:class,abstract'><i>abstract class</i></a> is a class that can be used only
as a base class of some other class; no objects of an abstract class can
be created except as subobjects of a class derived from it. A class is
abstract if it has at least one <a class='hidden_link' href='#def:pure_virtual_function' id='def:pure_virtual_function'><i>pure virtual function</i></a>.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
Such a function might be inherited: see below.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
A virtual function is specified <a class='hidden_link' href='#def:virtual_function,pure' id='def:virtual_function,pure'><i>pure</i></a> by using a
<i><a href="class.mem#nt:pure-specifier">pure-specifier</a></i> in the function declaration
in the class definition.
<span class='indexparent'><a class='index' id='definition,pure_virtual_function'></a></span>A pure virtual function need be defined only if called with, or as if
with (<a href='class.dtor'>[class.dtor]</a>), the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
syntax (<a href='expr.prim'>[expr.prim]</a>).
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
<span class='indexparent'><a class='index' id='example,pure_virtual_function'></a></span></p><p ><pre class='codeblock'>
class point { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class shape {                   <span class='comment'>// abstract class
</span>  point center;
public:
  point where() { return center; }
  void move(point p) { center=p; draw(); }
  virtual void rotate(int) = 0; <span class='comment'>// pure virtual
</span>  virtual void draw() = 0;      <span class='comment'>// pure virtual
</span>};</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
A function declaration cannot provide both a <i ><a href='class.mem#nt:pure-specifier'>pure-specifier</a></i>
and a definition
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
struct C {
  virtual void f() = 0 { };     <span class='comment'>// ill-formed
</span>};</pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.abstract-3'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L963'>#</a></div><p ><span class='indexparent'><a class='index' id='class,pointer_to_abstract'></a></span>An abstract class shall not be used as a parameter type, as a function
return type, or as the type of an explicit conversion. Pointers and
references to an abstract class can be declared.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
shape x;                        <span class='comment'>// error: object of abstract class
</span>shape* p;                       <span class='comment'>// OK
</span>shape f();                      <span class='comment'>// error
</span>void g(shape);                  <span class='comment'>// error
</span>shape&amp; h(shape&amp;);               <span class='comment'>// OK
</span></pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.abstract-4'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L978'>#</a></div><p ><span class='indexparent'><a class='index' id='virtual_function,pure'></a></span>A class is abstract if it contains or inherits at least one pure virtual
function for which the final overrider is pure virtual.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
class ab_circle : public shape {
  int radius;
public:
  void rotate(int) { }
  <span class='comment'>// <span class='tcode_in_codeblock'>ab_&shy;circle&#x200b;::&#x200b;draw()</span> is a pure virtual
</span>};</pre></p><p >Since <span class='texttt'>shape&#x200b;::&#x200b;draw()</span> is a pure virtual function
<span class='texttt'>ab_&shy;circle&#x200b;::&#x200b;draw()</span> is a pure virtual by default. The alternative
declaration,
</p><p ><pre class='codeblock'>
class circle : public shape {
  int radius;
public:
  void rotate(int) { }
  void draw();                  <span class='comment'>// a definition is required somewhere
</span>};</pre></p><p >would make class <span class='texttt'>circle</span> non-abstract and a definition of
<span class='texttt'>circle&#x200b;::&#x200b;draw()</span> must be provided.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.abstract-5'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L1007'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
An abstract class can be derived from a class that is not abstract, and
a pure virtual function may override a virtual function which is not
pure.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div class='para' id='class.abstract-6'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cdefe2d0e11ad1081871542bc312fd93bbfd6ca0/source/derived.tex#L1014'>#</a></div><p ><span class='indexparent'><a class='index' id='class,constructor_and_abstract'></a></span>Member functions can be called from a constructor (or destructor) of an
abstract class;
<span class='indexparent'><a class='index' id='virtual_function_call,undefined_pure'></a></span>the effect of making a <a href='class.virtual'>virtual call</a> to a pure
virtual function directly or indirectly for the object being created (or
destroyed) from such a constructor (or destructor) is undefined.
</p></div></div></div></div></body></html>