<!DOCTYPE html><html lang='en'><head><title>[support.start.term]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>21</a> Language support library <a class='abbr_ref' href='./#language.support'>[language.support]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>21.5</a> Start and termination <a class='abbr_ref'>[support.start.term]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1590'>#</a></div><p ><span class='indexparent'><a class='index' id=':<cstdlib>'></a></span>[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
The header <a href='cstdlib.syn'><span class='texttt'>&lt;cstdlib&gt;</span></a>
declares the functions described in this subclause.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p><p ><span class='indexparent'><a class='index' id='lib:_Exit'></a></span></p></div><p ><code class='itemdecl'>[[noreturn]] void _Exit(int status) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1603'>#</a></div><p ><span class='textit'>Effects:</span> 
This function has the semantics specified in the C standard library.</p></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1607'>#</a></div><p ><span class='textit'>Remarks:</span> 
The program is terminated without executing destructors for objects of automatic,
thread, or static storage duration and without calling functions passed to
<span class='texttt'>atexit()</span> (<a href='basic.start.term'>[basic.start.term]</a>).
<span class='indexparent'><a class='index' id=':signal-safe,_Exit'></a></span>The function <span class='texttt'>_&shy;Exit</span> is signal-safe (<a href='csignal.syn'>[csignal.syn]</a>).
</p></div></div><p ><span class='indexparent'><a class='index' id='lib:abort'></a></span></p><p ><code class='itemdecl'>[[noreturn]] void abort() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1622'>#</a></div><p ><span class='textit'>Effects:</span> 
This function has the semantics specified in the C standard library.</p></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1626'>#</a></div><p ><span class='textit'>Remarks:</span> 
The program is terminated without executing destructors for objects of
automatic, thread, or static storage
duration and without calling functions passed to
<span class='texttt'>atexit()</span> (<a href='basic.start.term'>[basic.start.term]</a>).
<span class='indexparent'><a class='index' id=':signal-safe,abort'></a></span>The function <span class='texttt'>abort</span> is signal-safe (<a href='csignal.syn'>[csignal.syn]</a>).
</p></div></div><p ><span class='indexparent'><a class='index' id='lib:atexit'></a></span></p><p ><code class='itemdecl'>int atexit(<span class='textit'>c-atexit-handler</span>* f) noexcept;
int atexit(<span class='textit'>atexit-handler</span>* f) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1643'>#</a></div><p ><span class='textit'>Effects:</span> 
The
<span class='texttt'>atexit()</span>
functions register the function pointed to by <span class='texttt'>f</span>
to be called without arguments at normal program termination.
It is unspecified whether a call to <span class='texttt'>atexit()</span> that does not
<a href='intro.multithread#def:happens_before'>happen before</a>
a call to <span class='texttt'>exit()</span> will succeed.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  The <span class='texttt'>atexit()</span> functions do not introduce a data
race (<a href='res.on.data.races'>[res.on.data.races]</a>). <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1655'>#</a></div><p ><span class='textit'>Implementation limits:</span> 
The implementation shall support the registration of at least 32 functions.</p></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1659'>#</a></div><p ><span class='textit'>Returns:</span> 
The
<span class='texttt'>atexit()</span>
function returns zero if the registration succeeds,
nonzero if it fails.
</p></div></div><div id='lib:exit'>
<code class='itemdecl'>[[noreturn]] void exit(int status);
</code>
</div><div class='itemdescr'></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1674'>#</a></div><p ><span class='textit'>Effects:</span> 
</p><ul class='itemize'><li id='9.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#9.1'>(9.1)</a></div><p >First, objects with thread storage duration and associated with the current thread
are destroyed. Next, objects with static storage duration are destroyed
and functions registered by calling
<span class='texttt'>atexit</span>
are called.<a class='footnotenum' href='#footnote-215'>215</a>
See <a href='basic.start.term'>[basic.start.term]</a> for the order of destructions and calls.
(Automatic objects are not destroyed as a result of calling
<span class='texttt'>exit()</span>.)<a class='footnotenum' href='#footnote-216'>216</a></p><p >If control leaves a registered function called by <span class='texttt'>exit</span> because the function does
not provide a handler for a thrown exception, <span class='texttt'>std&#x200b;::&#x200b;terminate()</span> shall be called (<a href='except.terminate'>[except.terminate]</a>).<span class='indexparent'><a class='index' id='lib:terminate'></a></span>
</p></li><li id='9.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#9.2'>(9.2)</a></div><p >Next, all open C streams (as mediated by the function
signatures declared in
<span class='texttt'>&lt;cstdio&gt;</span>)
with unwritten buffered data are flushed, all open C
streams are closed, and all files created by calling
<span class='texttt'>tmpfile()</span>
are removed.</p></li><li id='9.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#9.3'>(9.3)</a></div><p >Finally, control is returned to the host environment.
If <span class='texttt'>status</span> is zero or
<span class='texttt'>EXIT_&shy;SUCCESS</span>,
an <span class='indexparent'><a class='index' id=':exit_status'></a></span>implementation-defined
form of the status
<a class='hidden_link' href='#def:successful_termination' id='def:successful_termination'><i>successful termination</i></a>
is returned.
If <span class='texttt'>status</span> is
<span class='texttt'>EXIT_&shy;FAILURE</span>,
an <span class='indexparent'><a class='index' id=':exit_status_'></a></span>implementation-defined form of the status
<a class='hidden_link' href='#def:unsuccessful_termination' id='def:unsuccessful_termination'><i>unsuccessful termination</i></a>
is returned.
Otherwise the status returned is <span class='indexparent'><a class='index' id=':exit_status__'></a></span>implementation-defined.<a class='footnotenum' href='#footnote-217'>217</a>
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='lib:at_quick_exit'></a></span></p><p ><code class='itemdecl'>int at_quick_exit(<span class='textit'>c-atexit-handler</span>* f) noexcept;
int at_quick_exit(<span class='textit'>atexit-handler</span>* f) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1736'>#</a></div><p ><span class='textit'>Effects:</span> The <span class='texttt'>at_&shy;quick_&shy;exit()</span> functions register the function pointed to by <span class='texttt'>f</span>
to be called without arguments when <span class='texttt'>quick_&shy;exit</span> is called.
It is unspecified whether a call to <span class='texttt'>at_&shy;quick_&shy;exit()</span> that does not
<a href='intro.multithread#def:happens_before'>happen before</a>
all calls to <span class='texttt'>quick_&shy;exit</span> will succeed. [<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  The
<span class='texttt'>at_&shy;quick_&shy;exit()</span> functions do not introduce a
data race (<a href='res.on.data.races'>[res.on.data.races]</a>). <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
The order of registration may be indeterminate if <span class='texttt'>at_&shy;quick_&shy;exit</span> was called from more
than one thread.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  The
<span class='texttt'>at_&shy;quick_&shy;exit</span> registrations are distinct from the <span class='texttt'>atexit</span> registrations,
and applications may need to call both registration functions with the same argument.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1753'>#</a></div><p ><span class='textit'>Implementation limits:</span> 
The implementation shall support the registration of at least 32 functions.</p></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1757'>#</a></div><p ><span class='textit'>Returns:</span> Zero if the registration succeeds, nonzero if it fails.
</p></div></div><p ><span class='indexparent'><a class='index' id='lib:quick_exit'></a></span></p><p ><code class='itemdecl'>[[noreturn]] void quick_exit(int status) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1767'>#</a></div><p ><span class='textit'>Effects:</span> Functions registered by calls to <span class='texttt'>at_&shy;quick_&shy;exit</span> are called in the
reverse order of their registration, except that a function shall be called after any
previously registered functions that had already been called at the time it was
registered. Objects shall not be destroyed as a result of calling <span class='texttt'>quick_&shy;exit</span>.
If control leaves a registered function called by <span class='texttt'>quick_&shy;exit</span> because the
function does not provide a handler for a thrown exception, <span class='texttt'>std&#x200b;::&#x200b;terminate()</span> shall
be called.<span class='indexparent'><a class='index' id='lib:terminate_'></a></span>
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
A function registered via <span class='texttt'>at_&shy;quick_&shy;exit</span>
is invoked by the thread that calls <span class='texttt'>quick_&shy;exit</span>,
which can be a different thread
than the one that registered it, so registered functions should not rely on the identity
of objects with thread storage duration.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
After calling registered functions, <span class='texttt'>quick_&shy;exit</span> shall call <span class='texttt'>_&shy;Exit(status)</span>.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
The standard file buffers are not flushed.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/support.tex#L1787'>#</a></div><p ><span class='textit'>Remarks:</span> 
<span class='indexparent'><a class='index' id=':signal-safe,quick_exit'></a></span>The function <span class='texttt'>quick_&shy;exit</span> is signal-safe (<a href='csignal.syn'>[csignal.syn]</a>)
when the functions registered with <span class='texttt'>at_&shy;quick_&shy;exit</span> are.
</p></div></div><p ><span class='textsc'>See also:</span>  <a href='basic.start'>[basic.start]</a>, <a href='basic.start.term'>[basic.start.term]</a>,
ISO C 7.22.4.</p><div class='footnote' id='footnote-215'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-215'>215)</a></div><p >A function is called for every time it is registered.</p></div><div class='footnote' id='footnote-216'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-216'>216)</a></div><p >Objects with automatic storage duration are all destroyed in a program whose
<a href='basic.start.main'><span class='texttt'>main</span> function</a>
contains no automatic objects and executes the call to
<span class='texttt'>exit()</span>.
Control can be transferred directly to such a
<span class='texttt'>main</span> function
by throwing an exception that is caught in
<span class='texttt'>main</span>.</p></div><div class='footnote' id='footnote-217'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-217'>217)</a></div><p >The macros
<span class='texttt'>EXIT_&shy;FAILURE</span>
and
<span class='texttt'>EXIT_&shy;SUCCESS</span>
are defined in
<span class='texttt'>&lt;cstdlib&gt;</span>.</p></div></div></body></html>