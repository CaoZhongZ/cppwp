<!DOCTYPE html><html lang='en'><head><title>[diff.cpp11]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:73pt'>Annex C&emsp;(informative)</a> Compatibility <a class='abbr_ref' href='./#diff'>[diff]</a></h1><div id='diff.cpp11'><h2 ><a class='secnum' style='min-width:88pt'>C.3</a> C++ and ISO C++ 2011 <a class='abbr_ref'>[diff.cpp11]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p ><span class='indexparent'><a class='index' id='summary,compatibility_with_ISO_C++_2011_'></a></span>This subclause lists the differences between C++ and
ISO C++ 2011 (ISO/IEC 14882:2011, <i>Programming Languages — C++</i>),
by the chapters of this document.</p></div><div id='lex'><h3 ><a class='secnum' href='#lex' style='min-width:103pt'>C.3.1</a> Clause <a href='lex'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp11.lex'>[diff.cpp11.lex]</a></h3><p ><a href='lex.ppnumber'>[lex.ppnumber]</a>
<br/><b>Change:</b> <i ><a href='lex.ppnumber#nt:pp-number'>pp-number</a></i> can contain one or more single quotes.
<br/><b>Rationale:</b> Necessary to enable single quotes as digit separators.
<br/><b>Effect on original feature:</b> Valid C++ 2011 code may fail to compile or may change meaning in this
International Standard. For example, the following code is valid both in C++ 2011 and in
this International Standard, but the macro invocation produces different outcomes
because the single quotes delimit a character literal in C++ 2011, whereas they are digit
separators in this International Standard:</p><pre class='codeblock'>
#define M(x, ...) __VA_ARGS__
int x[2] = { M(1'2,3'4) };
<span class='comment'>// <span class='texttt'>int x[2] = {};     </span> — C++ 2011
</span><span class='comment'>// <span class='texttt'>int x[2] = { 3'4 };</span> — this International Standard
</span></pre></div><div id='basic'><h3 ><a class='secnum' href='#basic' style='min-width:103pt'>C.3.2</a> Clause <a href='basic'>[basic]</a>: basic concepts <a class='abbr_ref' href='diff.cpp11.basic'>[diff.cpp11.basic]</a></h3><p ><a href='basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a>
<br/><b>Change:</b> New usual (non-placement) deallocator 
<br/><b>Rationale:</b> Required for sized deallocation.
<br/><b>Effect on original feature:</b> Valid C++ 2011 code could declare a global placement allocation function and
deallocation function as follows:</p><pre class='codeblock'>
void operator new(std::size_t, std::size_t);
void operator delete(void*, std::size_t) noexcept;
</pre><p >In this International Standard, however, the declaration of <span class='texttt'>operator delete</span>
might match a predefined usual (non-placement)
<span class='texttt'>operator delete</span> (<a href='basic.stc.dynamic'>[basic.stc.dynamic]</a>). If so, the
program is ill-formed, as it was for class member allocation functions and
deallocation functions (<a href='expr.new'>[expr.new]</a>).</p></div><div id='dcl.dcl'><h3 ><a class='secnum' href='#dcl.dcl' style='min-width:103pt'>C.3.3</a> Clause <a href='dcl.dcl'>[dcl.dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp11.dcl.dcl'>[diff.cpp11.dcl.dcl]</a></h3><p ><a href='dcl.constexpr'>[dcl.constexpr]</a>
<br/><b>Change:</b> <span class='texttt'>constexpr</span> non-static member functions are not implicitly
<span class='texttt'>const</span> member functions.
<br/><b>Rationale:</b> Necessary to allow <span class='texttt'>constexpr</span> member functions to mutate
the object.
<br/><b>Effect on original feature:</b>
Valid C++ 2011 code may fail to compile in this International Standard.
For example, the following code is valid in C++ 2011
but invalid in this International Standard because it declares the same member
function twice with different return types:</p><pre class='codeblock'>
struct S {
  constexpr const int &amp;f();
  int &amp;f();
};
</pre></div><div id='input.output'><h3 ><a class='secnum' href='#input.output' style='min-width:103pt'>C.3.4</a> Clause <a href='input.output'>[input.output]</a>: input/output library <a class='abbr_ref' href='diff.cpp11.input.output'>[diff.cpp11.input.output]</a></h3><p ><a href='c.files'>[c.files]</a>
<br/><b>Change:</b> <span class='texttt'>gets</span> is not defined.
<br/><b>Rationale:</b> Use of <span class='texttt'>gets</span> is considered dangerous.
<br/><b>Effect on original feature:</b>
Valid C++ 2011 code that uses the <span class='texttt'>gets</span> function may fail to compile
in this International Standard.</p></div></div></div></body></html>