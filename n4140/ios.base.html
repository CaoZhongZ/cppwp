<!DOCTYPE html><html lang='en'><head><title>[ios.base]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>27</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>27.5</a> Iostreams base classes <a class='abbr_ref' href='iostreams.base#ios.base'>[iostreams.base]</a></h2><div id='ios.base'><h3 ><a class='secnum' style='min-width:103pt'>27.5.3</a> Class <span class='texttt'>ios_base</span> <a class='abbr_ref'>[ios.base]</a></h3><p ><span class='indexparent'><a class='index' id='ios_base'></a></span></p><pre class='codeblock'>
namespace std {
  class ios_base {
  public:
    class failure;

    <span class='comment'>// <a href='./ios::fmtflags'>[ios::fmtflags]</a> <span class='texttt'>fmtflags</span>
</span>    typedef <i>T1</i> fmtflags;
    static constexpr fmtflags boolalpha = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags dec = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags fixed = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags hex = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags internal = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags left = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags oct = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags right = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags scientific = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags showbase = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags showpoint = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags showpos = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags skipws = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags unitbuf = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags uppercase = <i><span class='texttt'>unspecified</span></i>;
    static constexpr fmtflags adjustfield = <i><span class='texttt'>see below</span></i>;
    static constexpr fmtflags basefield = <i><span class='texttt'>see below</span></i>;
    static constexpr fmtflags floatfield = <i><span class='texttt'>see below</span></i>;

    <span class='comment'>// <a href='./ios::iostate'>[ios::iostate]</a> <span class='texttt'>iostate</span>
</span>    typedef <i>T2</i> iostate;
    static constexpr iostate badbit = <i><span class='texttt'>unspecified</span></i>;
    static constexpr iostate eofbit = <i><span class='texttt'>unspecified</span></i>;
    static constexpr iostate failbit = <i><span class='texttt'>unspecified</span></i>;
    static constexpr iostate goodbit = <i><span class='texttt'>see below</span></i>;

    <span class='comment'>// <a href='./ios::openmode'>[ios::openmode]</a> <span class='texttt'>openmode</span>
</span>    typedef <i>T3</i> openmode;
    static constexpr openmode app = <i><span class='texttt'>unspecified</span></i>;
    static constexpr openmode ate = <i><span class='texttt'>unspecified</span></i>;
    static constexpr openmode binary = <i><span class='texttt'>unspecified</span></i>;
    static constexpr openmode in = <i><span class='texttt'>unspecified</span></i>;
    static constexpr openmode out = <i><span class='texttt'>unspecified</span></i>;
    static constexpr openmode trunc = <i><span class='texttt'>unspecified</span></i>;

    <span class='comment'>// <a href='./ios::seekdir'>[ios::seekdir]</a> <span class='texttt'>seekdir</span>
</span>    typedef <i>T4</i> seekdir;
    static constexpr seekdir beg = <i><span class='texttt'>unspecified</span></i>;
    static constexpr seekdir cur = <i><span class='texttt'>unspecified</span></i>;
    static constexpr seekdir end = <i><span class='texttt'>unspecified</span></i>;

    class Init;

    <span class='comment'>// <a href='fmtflags.state'>[fmtflags.state]</a> fmtflags state:
</span>    fmtflags flags() const;
    fmtflags flags(fmtflags fmtfl);
    fmtflags setf(fmtflags fmtfl);
    fmtflags setf(fmtflags fmtfl, fmtflags mask);
    void unsetf(fmtflags mask);

    streamsize precision() const;
    streamsize precision(streamsize prec);
    streamsize width() const;
    streamsize width(streamsize wide);

    <span class='comment'>// <a href='ios.base.locales'>[ios.base.locales]</a> locales:
</span>    locale imbue(const locale&amp; loc);
    locale getloc() const;

    <span class='comment'>// <a href='ios.base.storage'>[ios.base.storage]</a> storage:
</span>    static int xalloc();
    long&amp;  iword(int index);
    void*&amp; pword(int index);

    <span class='comment'>// destructor
</span>    virtual ~ios_base();

    <span class='comment'>// <a href='ios.base.callback'>[ios.base.callback]</a> callbacks;
</span>    enum event { erase_event, imbue_event, copyfmt_event };
    typedef void (*event_callback)(event, ios_base&amp;, int index);
    void register_callback(event_callback fn, int index);

    ios_base(const ios_base&amp;) = delete;
    ios_base&amp; operator=(const ios_base&amp;) = delete;

    static bool sync_with_stdio(bool sync = true);

  protected:
    ios_base();

  private:
    static int index;  <span class='comment'>// <i>exposition only</i>
</span>    long* iarray;      <span class='comment'>// <i>exposition only</i>
</span>    void** parray;     <span class='comment'>// <i>exposition only</i>
</span>  };
}
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p ><span class='texttt'>ios_base</span>
defines several member types:
</p><ul ><li ><p >a class <span class='texttt'>failure</span> derived from <span class='texttt'>system_error</span>;</p></li><li ><p >a class <span class='texttt'>Init</span>;</p></li><li ><p >three bitmask types, <span class='texttt'>fmtflags</span>, <span class='texttt'>iostate</span>, and <span class='texttt'>openmode</span>;</p></li><li ><p >an enumerated type, <span class='texttt'>seekdir</span>.
</p></li></ul></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >It maintains several kinds of data:
</p><ul ><li ><p >state information that reflects the integrity of the stream buffer;
</p></li><li ><p >control information that influences how to interpret (format) input
sequences and how to generate (format) output sequences;
</p></li><li ><p >additional information that is stored by the program for its private use.
</p></li></ul></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p >[&nbsp;<i>Note:</i>
For the sake of exposition, the maintained data is presented here as:
</p><ul ><li ><p ><span class='texttt'>static int index</span>,
specifies the next available
unique index for the integer or pointer arrays maintained for the private use
of the program, initialized to an unspecified value;
</p></li><li ><p ><span class='texttt'>long* iarray</span>,
points to the first element of an
arbitrary-length
<span class='texttt'>long</span>
array maintained for the private use of the
program;
</p></li><li ><p ><span class='texttt'>void** parray</span>,
points to the first element of an
arbitrary-length pointer array maintained for the private use of the program.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]
</p></li></ul></div><div id='ios.types'><h4 ><a class='secnum' href='#ios.types' style='min-width:118pt'>27.5.3.1</a> Types <a class='abbr_ref' href='ios.types'>[ios.types]</a></h4><div id='ios::failure'><h4 ><a class='secnum' href='#ios::failure' style='min-width:133pt'>27.5.3.1.1</a> Class <span class='texttt'>ios_base::failure</span> <a class='abbr_ref' href='./ios::failure'>[ios::failure]</a></h4><p ><span class='indexparent'><a class='index' id='ios_base::failure'></a></span></p><pre class='codeblock'>
namespace std {
  class ios_base::failure : public system_error {
  public:
    explicit failure(const string&amp; msg, const error_code&amp; ec = io_errc::stream);
    explicit failure(const char* msg, const error_code&amp; ec = io_errc::stream);
  };
}
</pre><div class='para' id='ios::failure-1'><div class='marginalizedparent'><a class='marginalized' href='#ios::failure-1'>1</a></div><p >The class
<span class='texttt'>failure</span>
defines the base class
for the types of all objects thrown as exceptions,
by functions in the iostreams library,
to report errors detected during stream buffer operations.</p></div><div class='para' id='ios::failure-2'><div class='marginalizedparent'><a class='marginalized' href='#ios::failure-2'>2</a></div><p >When throwing <span class='texttt'>ios_base::failure</span> exceptions, implementations should provide
values of <span class='texttt'>ec</span> that identify the specific reason for the failure. [&nbsp;<i>Note:</i>
Errors arising from the operating system would typically be reported as
<span class='texttt'>system_category()</span> errors with an error value of the error number
reported by the operating system. Errors arising from within the stream library would
typically be reported as <span class='texttt'>error_code(io_errc::stream,
iostream_category())</span>. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p><p ><span class='indexparent'><a class='index' id='failure,ios_base::failure'></a></span><code class='itemdecl'>
explicit failure(const string&amp; msg, const error_code&amp; ec = io_errc::stream);
</code></p></div><div class='itemdescr'></div><div class='para' id='ios::failure-3'><div class='marginalizedparent'><a class='marginalized' href='#ios::failure-3'>3</a></div><div class='itemdescr'><p ><i>Effects:</i>
Constructs an object of class
<span class='texttt'>failure</span> by constructing the base class with <span class='texttt'>msg</span> and <span class='texttt'>ec</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='failure,ios_base::failure'></a></span><code class='itemdecl'>
explicit failure(const char* msg, const error_code&amp; ec = io_errc::stream);
</code></p><div class='itemdescr'></div><div class='para' id='ios::failure-4'><div class='marginalizedparent'><a class='marginalized' href='#ios::failure-4'>4</a></div><div class='itemdescr'><p ><i>Effects:</i>
Constructs an object of class
<span class='texttt'>failure</span> by constructing the base class with <span class='texttt'>msg</span> and <span class='texttt'>ec</span>.
</p></div></div></div><div id='ios::fmtflags'><h4 ><a class='secnum' href='#ios::fmtflags' style='min-width:133pt'>27.5.3.1.2</a> Type <span class='texttt'>ios_base::fmtflags</span> <a class='abbr_ref' href='./ios::fmtflags'>[ios::fmtflags]</a></h4><p ><span class='indexparent'><a class='index' id='fmtflags,ios_base'></a></span><code class='itemdecl'>
typedef <i>T1</i> fmtflags;
</code></p><div class='itemdescr'></div><div class='para' id='ios::fmtflags-1'><div class='marginalizedparent'><a class='marginalized' href='#ios::fmtflags-1'>1</a></div><div class='itemdescr'><p >The type
<span class='texttt'>fmtflags</span>
is a bitmask type (<a href='bitmask.types'>[bitmask.types]</a>).
Setting its elements has the effects indicated in Table <a href='#tab:iostreams.fmtflags.effects'>[tab:iostreams.fmtflags.effects]</a>.</p><div class='numberedTable' id='tab:iostreams.fmtflags.effects'>Table <a href='#tab:iostreams.fmtflags.effects'>122</a> — <span class='texttt'>fmtflags</span> effects<br><table ><tr class='rowsep'><td colspan='1' class='center'><b>Element</b></td><td colspan='1' class='center'><b>Effect(s) if set</b></td></tr><tr class='capsep'><td class='left'> 



<span class='texttt'>boolalpha</span> </td><td class='justify'>
 insert and extract <span class='texttt'>bool</span> type in alphabetic format</td></tr><tr ><td class='left'>
<span class='texttt'>dec</span>     </td><td class='justify'>
 converts integer input or generates integer output in decimal base</td></tr><tr ><td class='left'>
<span class='texttt'>fixed</span>   </td><td class='justify'>
 generate floating-point output in fixed-point notation</td></tr><tr ><td class='left'>
<span class='texttt'>hex</span>     </td><td class='justify'>
 converts integer input or generates integer output in hexadecimal base</td></tr><tr ><td class='left'>
<span class='texttt'>internal</span>  </td><td class='justify'>
 adds fill characters at a designated internal point in certain generated output,
 or identical to <span class='texttt'>right</span> if no such point is designated</td></tr><tr ><td class='left'>
<span class='texttt'>left</span>    </td><td class='justify'>
 adds fill characters on the right (final positions) of certain generated output</td></tr><tr ><td class='left'>
<span class='texttt'>oct</span>     </td><td class='justify'>
 converts integer input or generates integer output in octal base</td></tr><tr ><td class='left'>
<span class='texttt'>right</span>   </td><td class='justify'>
 adds fill characters on the left (initial positions) of certain generated output</td></tr><tr ><td class='left'>
<span class='texttt'>scientific</span>  </td><td class='justify'>
 generates floating-point output in scientific notation</td></tr><tr ><td class='left'>
<span class='texttt'>showbase</span>  </td><td class='justify'>
 generates a prefix indicating the numeric base of generated integer output</td></tr><tr ><td class='left'>
<span class='texttt'>showpoint</span> </td><td class='justify'>
 generates a decimal-point character unconditionally in generated floating-point output</td></tr><tr ><td class='left'>
<span class='texttt'>showpos</span>   </td><td class='justify'>
 generates a <span class='texttt'>+</span> sign in non-negative generated numeric output</td></tr><tr ><td class='left'>
<span class='texttt'>skipws</span>    </td><td class='justify'>
 skips leading whitespace before certain input operations</td></tr><tr ><td class='left'>
<span class='texttt'>unitbuf</span>   </td><td class='justify'>
 flushes output after each output operation</td></tr><tr ><td class='left'>
<span class='texttt'>uppercase</span> </td><td class='justify'>
 replaces certain lowercase letters with their uppercase equivalents in generated output</td></tr></table></div></div></div><div class='para' id='ios::fmtflags-2'><div class='marginalizedparent'><a class='marginalized' href='#ios::fmtflags-2'>2</a></div><div class='itemdescr'><p >Type
<span class='texttt'>fmtflags</span>
also defines the constants indicated in Table <a href='#tab:iostreams.fmtflags.constants'>[tab:iostreams.fmtflags.constants]</a>.</p><div class='numberedTable' id='tab:iostreams.fmtflags.constants'>Table <a href='#tab:iostreams.fmtflags.constants'>123</a> — <span class='texttt'>fmtflags</span> constants<br><table ><tr class='rowsep'><td colspan='1' class='center'><b>Constant</b></td><td colspan='1' class='center'><b>Allowable values</b></td></tr><tr class='capsep'><td class='left'> 
<span class='texttt'>adjustfield</span> </td><td class='left'> <span class='texttt'>left | right | internal</span>   </td></tr><tr ><td class='left'>
<span class='texttt'>basefield</span> </td><td class='left'> <span class='texttt'>dec | oct | hex</span>       </td></tr><tr ><td class='left'>
<span class='texttt'>floatfield</span>  </td><td class='left'> <span class='texttt'>scientific | fixed</span>      </td></tr></table></div></div></div></div><div id='ios::iostate'><h4 ><a class='secnum' href='#ios::iostate' style='min-width:133pt'>27.5.3.1.3</a> Type <span class='texttt'>ios_base::iostate</span> <a class='abbr_ref' href='./ios::iostate'>[ios::iostate]</a></h4><p ><span class='indexparent'><a class='index' id='iostate,ios_base'></a></span><span class='indexparent'><a class='index' id='ios_base,iostate'></a></span><code class='itemdecl'>
typedef <i>T2</i> iostate;
</code></p><div class='itemdescr'></div><div class='para' id='ios::iostate-1'><div class='marginalizedparent'><a class='marginalized' href='#ios::iostate-1'>1</a></div><div class='itemdescr'><p >The type
<span class='texttt'>iostate</span>
is a bitmask type (<a href='bitmask.types'>[bitmask.types]</a>)
that contains the elements indicated in Table <a href='#tab:iostreams.iostate.effects'>[tab:iostreams.iostate.effects]</a>.</p><div class='numberedTable' id='tab:iostreams.iostate.effects'>Table <a href='#tab:iostreams.iostate.effects'>124</a> — <span class='texttt'>iostate</span> effects<br><table ><tr class='rowsep'><td colspan='1' class='center'><b>Element</b></td><td colspan='1' class='center'><b>Effect(s) if set</b></td></tr><tr class='capsep'><td class='left'> 



<span class='texttt'>badbit</span>    </td><td class='justify'>
 indicates a loss of integrity in an input or output sequence
 (such as an irrecoverable read error from a file); </td></tr><tr ><td class='left'>
<span class='texttt'>eofbit</span>    </td><td class='justify'>
 indicates that an input operation reached the end of an input sequence;  </td></tr><tr ><td class='left'>
<span class='texttt'>failbit</span>   </td><td class='justify'>
 indicates that an input operation failed to read the expected characters,
 or that an output operation failed to generate the desired characters. </td></tr></table></div></div></div><div class='para' id='ios::iostate-2'><div class='marginalizedparent'><a class='marginalized' href='#ios::iostate-2'>2</a></div><div class='itemdescr'><p >Type
<span class='texttt'>iostate</span>
also defines the constant:
</p><ul ><li ><p ><span class='texttt'>goodbit</span>,
the value zero.
</p></li></ul></div></div></div><div id='ios::openmode'><h4 ><a class='secnum' href='#ios::openmode' style='min-width:133pt'>27.5.3.1.4</a> Type <span class='texttt'>ios_base::openmode</span> <a class='abbr_ref' href='./ios::openmode'>[ios::openmode]</a></h4><p ><span class='indexparent'><a class='index' id='openmode,ios_base'></a></span><code class='itemdecl'>
typedef <i>T3</i> openmode;
</code></p><div class='itemdescr'></div><div class='para' id='ios::openmode-1'><div class='marginalizedparent'><a class='marginalized' href='#ios::openmode-1'>1</a></div><div class='itemdescr'><p >The type
<span class='texttt'>openmode</span>
is a bitmask type (<a href='bitmask.types'>[bitmask.types]</a>).
It contains the elements indicated in Table <a href='#tab:iostreams.openmode.effects'>[tab:iostreams.openmode.effects]</a>.</p><div class='numberedTable' id='tab:iostreams.openmode.effects'>Table <a href='#tab:iostreams.openmode.effects'>125</a> — <span class='texttt'>openmode</span> effects<br><table ><tr class='rowsep'><td colspan='1' class='center'><b>Element</b></td><td colspan='1' class='center'><b>Effect(s) if set</b></td></tr><tr class='capsep'><td class='left'> 



<span class='texttt'>app</span>     </td><td class='justify'>
 seek to end before each write  </td></tr><tr ><td class='left'>
<span class='texttt'>ate</span>     </td><td class='justify'>
 open and seek to end immediately after opening </td></tr><tr ><td class='left'>
<span class='texttt'>binary</span>    </td><td class='justify'>
 perform input and output in binary mode (as opposed to text mode)  </td></tr><tr ><td class='left'>
<span class='texttt'>in</span>      </td><td class='justify'>
 open for input </td></tr><tr ><td class='left'>
<span class='texttt'>out</span>     </td><td class='justify'>
 open for output  </td></tr><tr ><td class='left'>
<span class='texttt'>trunc</span>   </td><td class='justify'>
 truncate an existing stream when opening </td></tr></table></div></div></div></div><div id='ios::seekdir'><h4 ><a class='secnum' href='#ios::seekdir' style='min-width:133pt'>27.5.3.1.5</a> Type <span class='texttt'>ios_base::seekdir</span> <a class='abbr_ref' href='./ios::seekdir'>[ios::seekdir]</a></h4><p ><span class='indexparent'><a class='index' id='seekdir,ios_base'></a></span><code class='itemdecl'>
typedef <i>T4</i> seekdir;
</code></p><div class='itemdescr'></div><div class='para' id='ios::seekdir-1'><div class='marginalizedparent'><a class='marginalized' href='#ios::seekdir-1'>1</a></div><div class='itemdescr'><p >The type
<span class='texttt'>seekdir</span>
is an enumerated type (<a href='enumerated.types'>[enumerated.types]</a>)
that contains the elements indicated in Table <a href='#tab:iostreams.seekdir.effects'>[tab:iostreams.seekdir.effects]</a>.</p><div class='numberedTable' id='tab:iostreams.seekdir.effects'>Table <a href='#tab:iostreams.seekdir.effects'>126</a> — <span class='texttt'>seekdir</span> effects<br><table ><tr class='rowsep'><td colspan='1' class='center'><b>Element</b></td><td colspan='1' class='center'><b>Meaning</b></td></tr><tr class='capsep'><td class='left'> 



<span class='texttt'>beg</span>     </td><td class='justify'>
 request a seek (for subsequent input or output) relative to the beginning of the stream  </td></tr><tr ><td class='left'>
<span class='texttt'>cur</span>     </td><td class='justify'>
 request a seek relative to the current position within the sequence  </td></tr><tr ><td class='left'>
<span class='texttt'>end</span>     </td><td class='justify'>
 request a seek relative to the current end of the sequence </td></tr></table></div></div></div></div><div id='ios::Init'><h4 ><a class='secnum' href='#ios::Init' style='min-width:133pt'>27.5.3.1.6</a> Class <span class='texttt'>ios_base::Init</span> <a class='abbr_ref' href='./ios::Init'>[ios::Init]</a></h4><p ><span class='indexparent'><a class='index' id='ios_base::Init'></a></span></p><pre class='codeblock'>
namespace std {
  class ios_base::Init {
  public:
    Init();
   ~Init();
  private:
    static int init_cnt; <span class='comment'>// <i>exposition only</i>
</span>  };
}
</pre><div class='para' id='ios::Init-1'><div class='marginalizedparent'><a class='marginalized' href='#ios::Init-1'>1</a></div><p >The class
<span class='texttt'>Init</span>
describes an object whose construction
ensures the construction of the eight objects declared in
<span class='texttt'>&lt;iostream&gt;</span> (<a href='iostream.objects'>[iostream.objects]</a>) that associate file
stream buffers with the standard C streams
provided for by the functions declared in
<span class='texttt'>&lt;cstdio&gt;</span> (<a href='c.files'>[c.files]</a>).</p></div><div class='para' id='ios::Init-2'><div class='marginalizedparent'><a class='marginalized' href='#ios::Init-2'>2</a></div><p >For the sake of exposition, the maintained data is presented here as:
</p><ul ><li ><p ><span class='texttt'>static int init_cnt</span>,
counts the number of
constructor and destructor calls for class
<span class='texttt'>Init</span>,
initialized to zero.
</p></li></ul><p ><span class='indexparent'><a class='index' id='Init,ios_base::Init'></a></span><code class='itemdecl'>
Init();
</code></p></div><div class='itemdescr'></div><div class='para' id='ios::Init-3'><div class='marginalizedparent'><a class='marginalized' href='#ios::Init-3'>3</a></div><div class='itemdescr'><p ><i>Effects:</i>
Constructs an object of class
<span class='texttt'>Init</span>.
Constructs and initializes the objects <span class='texttt'>cin</span>, <span class='texttt'>cout</span>, <span class='texttt'>cerr</span>,
<span class='texttt'>clog</span>, <span class='texttt'>wcin</span>, <span class='texttt'>wcout</span>, <span class='texttt'>wcerr</span>, and <span class='texttt'>wclog</span> if
they have not already been constructed and initialized.
</p></div></div><p ><span class='indexparent'><a class='index' id='ios_base::Init,destructor'></a></span><code class='itemdecl'>
~Init();
</code></p><div class='itemdescr'></div><div class='para' id='ios::Init-4'><div class='marginalizedparent'><a class='marginalized' href='#ios::Init-4'>4</a></div><div class='itemdescr'><p ><i>Effects:</i>
Destroys an object of class
<span class='texttt'>Init</span>.
If there are no other instances of the class still in existence,
calls
<span class='indexparent'><a class='index' id='flush'></a></span><span class='texttt'>cout.flush()</span>,
<span class='texttt'>cerr.flush()</span>,
<span class='texttt'>clog.flush()</span>,
<span class='texttt'>wcout.flush()</span>,
<span class='texttt'>wcerr.flush()</span>,
<span class='texttt'>wclog.flush()</span>.
</p></div></div></div></div><div id='fmtflags.state'><h4 ><a class='secnum' href='#fmtflags.state' style='min-width:118pt'>27.5.3.2</a> <span class='texttt'>ios_base</span> state functions <a class='abbr_ref' href='fmtflags.state'>[fmtflags.state]</a></h4><p ><span class='indexparent'><a class='index' id='flags,ios_base'></a></span><code class='itemdecl'>
fmtflags flags() const;
</code></p><div class='itemdescr'></div><div class='para' id='fmtflags.state-1'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i>
The format control information for both input and output.
</p></div></div><p ><span class='indexparent'><a class='index' id='fmtflags,ios_base'></a></span><span class='indexparent'><a class='index' id='ios_base,fmtflags'></a></span><code class='itemdecl'>
fmtflags flags(fmtflags fmtfl);
</code></p><div class='itemdescr'></div><div class='para' id='fmtflags.state-2'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-2'>2</a></div><div class='itemdescr'><p ><i>Postcondition:</i>
<span class='texttt'>fmtfl == flags()</span>.</p></div></div><div class='para' id='fmtflags.state-3'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i>
The previous value of
<span class='texttt'>flags()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='setf,ios_base'></a></span><code class='itemdecl'>
fmtflags setf(fmtflags fmtfl);
</code></p><div class='itemdescr'></div><div class='para' id='fmtflags.state-4'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-4'>4</a></div><div class='itemdescr'><p ><i>Effects:</i>
Sets <span class='texttt'>fmtfl</span> in
<span class='texttt'>flags()</span>.</p></div></div><div class='para' id='fmtflags.state-5'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i>
The previous value of
<span class='texttt'>flags()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='setf,ios_base'></a></span><span class='indexparent'><a class='index' id='ios_base,setf'></a></span><code class='itemdecl'>
fmtflags setf(fmtflags fmtfl, fmtflags mask);
</code></p><div class='itemdescr'></div><div class='para' id='fmtflags.state-6'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-6'>6</a></div><div class='itemdescr'><p ><i>Effects:</i>
Clears <span class='texttt'>mask</span> in
<span class='texttt'>flags()</span>,
sets
<span class='texttt'>fmtfl &amp; mask</span>
in
<span class='texttt'>flags()</span>.</p></div></div><div class='para' id='fmtflags.state-7'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-7'>7</a></div><div class='itemdescr'><p ><i>Returns:</i>
The previous value of
<span class='texttt'>flags()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='unsetf,ios_base'></a></span><code class='itemdecl'>
void unsetf(fmtflags mask);
</code></p><div class='itemdescr'></div><div class='para' id='fmtflags.state-8'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-8'>8</a></div><div class='itemdescr'><p ><i>Effects:</i>
Clears <span class='texttt'>mask</span> in
<span class='texttt'>flags()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='precision,ios_base'></a></span><code class='itemdecl'>
streamsize precision() const;
</code></p><div class='itemdescr'></div><div class='para' id='fmtflags.state-9'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-9'>9</a></div><div class='itemdescr'><p ><i>Returns:</i>
The precision
to generate on certain output conversions.
</p></div></div><p ><span class='indexparent'><a class='index' id='precision,ios_base'></a></span><span class='indexparent'><a class='index' id='ios_base,precision'></a></span><code class='itemdecl'>
streamsize precision(streamsize prec);
</code></p><div class='itemdescr'></div><div class='para' id='fmtflags.state-10'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-10'>10</a></div><div class='itemdescr'><p ><i>Postcondition:</i>
<span class='texttt'>prec == precision()</span>.</p></div></div><div class='para' id='fmtflags.state-11'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-11'>11</a></div><div class='itemdescr'><p ><i>Returns:</i>
The previous value of
<span class='texttt'>precision()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='width,ios_base'></a></span><code class='itemdecl'>
streamsize width() const;
</code></p><div class='itemdescr'></div><div class='para' id='fmtflags.state-12'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-12'>12</a></div><div class='itemdescr'><p ><i>Returns:</i>
The minimum field width (number of characters) to generate on certain output
conversions.
</p></div></div><p ><span class='indexparent'><a class='index' id='streamsize,ios_base'></a></span><span class='indexparent'><a class='index' id='ios_base,streamsize'></a></span><code class='itemdecl'>
streamsize width(streamsize wide);
</code></p><div class='itemdescr'></div><div class='para' id='fmtflags.state-13'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-13'>13</a></div><div class='itemdescr'><p ><i>Postcondition:</i>
<span class='texttt'>wide == width()</span>.</p></div></div><div class='para' id='fmtflags.state-14'><div class='marginalizedparent'><a class='marginalized' href='#fmtflags.state-14'>14</a></div><div class='itemdescr'><p ><i>Returns:</i>
The previous value of
<span class='texttt'>width()</span>.
</p></div></div></div><div id='locales'><h4 ><a class='secnum' href='#locales' style='min-width:118pt'>27.5.3.3</a> <span class='texttt'>ios_base</span> functions <a class='abbr_ref' href='ios.base.locales'>[ios.base.locales]</a></h4><p ><span class='indexparent'><a class='index' id='imbue,ios_base'></a></span><code class='itemdecl'>
locale imbue(const locale&amp; loc);
</code></p><div class='itemdescr'></div><div class='para' id='locales-1'><div class='marginalizedparent'><a class='marginalized' href='#locales-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i>
Calls each registered callback pair
<span class='texttt'>(fn,index)</span> (<a href='ios.base.callback'>[ios.base.callback]</a>)
as
<span class='texttt'>(*fn)(imbue_event,*this,index)</span>
at such a time that a call to
<span class='texttt'>ios_base::getloc()</span>
from within
<span class='texttt'>fn</span>
returns the new locale value
<span class='texttt'>loc</span>.</p></div></div><div class='para' id='locales-2'><div class='marginalizedparent'><a class='marginalized' href='#locales-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i>
The previous value of
<span class='texttt'>getloc()</span>.</p></div></div><div class='para' id='locales-3'><div class='marginalizedparent'><a class='marginalized' href='#locales-3'>3</a></div><div class='itemdescr'><p ><i>Postcondition:</i>
<span class='texttt'>loc == getloc()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='getloc,ios_base'></a></span><code class='itemdecl'>
locale getloc() const;
</code></p><div class='itemdescr'></div><div class='para' id='locales-4'><div class='marginalizedparent'><a class='marginalized' href='#locales-4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i>
If no locale has been imbued, a copy of the global C++ locale,
<span class='texttt'>locale()</span>,
in effect at the time of construction.
Otherwise, returns the imbued locale, to be used to
perform locale-dependent input and output operations.
</p></div></div></div><div id='ios.members.static'><h4 ><a class='secnum' href='#ios.members.static' style='min-width:118pt'>27.5.3.4</a> <span class='texttt'>ios_base</span> static members <a class='abbr_ref' href='ios.members.static'>[ios.members.static]</a></h4><p ><span class='indexparent'><a class='index' id='sync_with_stdio,ios_base'></a></span><code class='itemdecl'>
bool sync_with_stdio(bool sync = true);
</code></p><div class='itemdescr'></div><div class='para' id='ios.members.static-1'><div class='marginalizedparent'><a class='marginalized' href='#ios.members.static-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>true</span>
if the previous state of the standard iostream objects (<a href='iostream.objects'>[iostream.objects]</a>)
was synchronized and otherwise returns
<span class='texttt'>false</span>.
The first time it is called,
the function returns
<span class='texttt'>true</span>.</p></div></div><div class='para' id='ios.members.static-2'><div class='marginalizedparent'><a class='marginalized' href='#ios.members.static-2'>2</a></div><div class='itemdescr'><p ><i>Effects:</i>
If any input or output operation has occurred using the standard streams prior to the
call, the effect is
<span class='indexparent'><a class='index' id='implementation-defined'></a></span><span class='indexparent'><a class='index' id='effect_of_calling_ios_base::sync_with_stdio_after_any_input_or_output_operation_on_standard_streams'></a></span>implementation-defined.
Otherwise, called with a false argument, it allows the standard streams to
operate independently of the standard C streams.</p></div></div><div class='para' id='ios.members.static-3'><div class='marginalizedparent'><a class='marginalized' href='#ios.members.static-3'>3</a></div><div class='itemdescr'><p >When a standard iostream object <span class='texttt'>str</span> is
<i>synchronized</i>
with a standard stdio stream <span class='texttt'>f</span>, the effect of inserting a character <span class='texttt'>c</span> by
</p><pre class='codeblock'>
fputc(f, c);
</pre><p >is the same as the effect of
</p><pre class='codeblock'>
str.rdbuf()-&gt;sputc(c);
</pre><p >for any sequences of characters; the effect of extracting a character <span class='texttt'>c</span> by
</p><pre class='codeblock'>
c = fgetc(f);
</pre><p >is the same as the effect of
</p><pre class='codeblock'>
c = str.rdbuf()-&gt;sbumpc();
</pre><p >for any sequences of characters; and the effect of pushing back a character <span class='texttt'>c</span> by
</p><pre class='codeblock'>
ungetc(c, f);
</pre><p >is the same as the effect of
</p><pre class='codeblock'>
str.rdbuf()-&gt;sputbackc(c);
</pre><p >for any sequence of characters.<a class='footnotenum' href='#footnote-299'>299</a>
</p></div></div><div class='footnote' id='footnote-298'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-298'>298)</a></div><p >This implies that operations on a standard iostream object can be mixed arbitrarily
with operations on the corresponding stdio stream. In practical terms, synchronization
usually means that a standard iostream object and a standard stdio object share a
buffer.
</p></div></div><div id='storage'><h4 ><a class='secnum' href='#storage' style='min-width:118pt'>27.5.3.5</a> <span class='texttt'>ios_base</span> storage functions <a class='abbr_ref' href='ios.base.storage'>[ios.base.storage]</a></h4><p ><span class='indexparent'><a class='index' id='xalloc,ios_base'></a></span><code class='itemdecl'>
static int xalloc();
</code></p><div class='itemdescr'></div><div class='para' id='storage-1'><div class='marginalizedparent'><a class='marginalized' href='#storage-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>index</span>
<span class='texttt'>++</span>.</p></div></div><div class='para' id='storage-2'><div class='marginalizedparent'><a class='marginalized' href='#storage-2'>2</a></div><div class='itemdescr'><p ><i>Remarks:</i>
Concurrent access to this function by multiple threads shall not result in a data
race (<a href='intro.multithread'>[intro.multithread]</a>).
</p></div></div><p ><span class='indexparent'><a class='index' id='iword,ios_base'></a></span><code class='itemdecl'>
long&amp; iword(int idx);
</code></p><div class='itemdescr'></div><div class='para' id='storage-3'><div class='marginalizedparent'><a class='marginalized' href='#storage-3'>3</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>iarray</span> is a null pointer, allocates an array of
<span class='texttt'>long</span>
of unspecified size and stores a pointer to its first element in
<span class='texttt'>iarray</span>.
The function then extends the array pointed at by
<span class='texttt'>iarray</span> as necessary to include the element
<span class='texttt'>iarray[idx]</span>.
Each newly allocated element of the array is initialized to zero.
The reference returned is invalid after any other operations on the
object.<a class='footnotenum' href='#footnote-300'>300</a>
However, the value of the storage referred to is retained, so
that until the next call to
<span class='texttt'>copyfmt</span>,
calling
<span class='texttt'>iword</span>
with the same index yields another reference to the same value.
If the function fails<a class='footnotenum' href='#footnote-301'>301</a>
and
<span class='texttt'>*this</span>
is a base subobject of a
<span class='texttt'>basic_ios&lt;&gt;</span>
object or subobject, the effect is equivalent to calling
<span class='texttt'>basic_ios&lt;&gt;::setstate(badbit)</span>
on the derived object (which may throw
<span class='texttt'>failure</span>).</p></div></div><div class='para' id='storage-4'><div class='marginalizedparent'><a class='marginalized' href='#storage-4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i>
On success
<span class='texttt'>iarray[idx]</span>.
On failure, a valid
<span class='texttt'>long&amp;</span>
initialized to 0.
</p></div></div><p ><span class='indexparent'><a class='index' id='pword,ios_base'></a></span><code class='itemdecl'>
void*&amp; pword(int idx);
</code></p><div class='itemdescr'></div><div class='para' id='storage-5'><div class='marginalizedparent'><a class='marginalized' href='#storage-5'>5</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>parray</span> is a null pointer, allocates an array of
pointers to <span class='texttt'>void</span> of unspecified size and stores a pointer to
its
first element in <span class='texttt'>parray</span>.
The function then extends the array
pointed at by <span class='texttt'>parray</span> as necessary to include the element
<span class='texttt'>parray[idx]</span>.
Each newly allocated element of the array is initialized to a null
pointer.
The reference returned is invalid after any other operations on the
object.
However, the value of the storage referred to is retained, so
that until the next call to
<span class='texttt'>copyfmt</span>,
calling
<span class='texttt'>pword</span>
with the same index yields another reference to the same value.
If the function fails<a class='footnotenum' href='#footnote-302'>302</a>
and
<span class='texttt'>*this</span>
is a base subobject of a
<span class='texttt'>basic_ios&lt;&gt;</span>
object or subobject, the effect is equivalent to calling
<span class='texttt'>basic_ios&lt;&gt;::setstate(badbit)</span>
on the derived object (which may throw
<span class='texttt'>failure</span>).</p></div></div><div class='para' id='storage-6'><div class='marginalizedparent'><a class='marginalized' href='#storage-6'>6</a></div><div class='itemdescr'><p ><i>Returns:</i>
On success
<span class='texttt'>parray[idx]</span>.
On failure a valid
<span class='texttt'>void*&amp;</span>
initialized to 0.</p></div></div><div class='para' id='storage-7'><div class='marginalizedparent'><a class='marginalized' href='#storage-7'>7</a></div><div class='itemdescr'><p ><i>Remarks:</i>
After a subsequent call to
<span class='texttt'>pword(int)</span>
for the same object, the earlier return value may no longer be valid.
</p></div></div><div class='footnote' id='footnote-299'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-299'>299)</a></div><p >An implementation is free to implement both the integer
array pointed at by <span class='texttt'>iarray</span> and the pointer array pointed at by
<span class='texttt'>parray</span> as sparse data structures, possibly with a one-element
cache for each.</p></div><div class='footnote' id='footnote-300'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-300'>300)</a></div><p >for example, because it cannot allocate space.</p></div><div class='footnote' id='footnote-301'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-301'>301)</a></div><p >for example, because it cannot allocate space.</p></div></div><div id='callback'><h4 ><a class='secnum' href='#callback' style='min-width:118pt'>27.5.3.6</a> <span class='texttt'>ios_base</span> callbacks <a class='abbr_ref' href='ios.base.callback'>[ios.base.callback]</a></h4><p ><span class='indexparent'><a class='index' id='register_callback,ios_base'></a></span><code class='itemdecl'>
void register_callback(event_callback fn, int index);
</code></p><div class='itemdescr'></div><div class='para' id='callback-1'><div class='marginalizedparent'><a class='marginalized' href='#callback-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i>
Registers the pair
<span class='texttt'>(fn,index)</span>
such that during calls to
<span class='texttt'>imbue()</span> (<a href='ios.base.locales'>[ios.base.locales]</a>),
<span class='texttt'>copyfmt()</span>,
or
<span class='texttt'>~ios_base()</span> (<a href='ios.base.cons'>[ios.base.cons]</a>),
the function
<span class='texttt'>fn</span>
is called with argument
<span class='texttt'>index</span>.
Functions registered are called when an event occurs, in opposite order of
registration.
Functions registered while a callback function is active are not called until the next event.</p></div></div><div class='para' id='callback-2'><div class='marginalizedparent'><a class='marginalized' href='#callback-2'>2</a></div><div class='itemdescr'><p ><i>Requires:</i>
The function
<span class='texttt'>fn</span>
shall not throw exceptions.</p><p ><i>Remarks:</i>
Identical pairs are not merged.
A function registered twice will be called twice.
</p></div></div></div><div id='cons'><h4 ><a class='secnum' href='#cons' style='min-width:118pt'>27.5.3.7</a> <span class='texttt'>ios_base</span> constructors/destructor <a class='abbr_ref' href='ios.base.cons'>[ios.base.cons]</a></h4><p ><span class='indexparent'><a class='index' id='ios_base,ios_base'></a></span><code class='itemdecl'>
ios_base();
</code></p><div class='itemdescr'></div><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i>
Each
<span class='texttt'>ios_base</span>
member has an indeterminate value after construction.
The object's members shall be initialized by calling
<span class='texttt'>basic_ios::init</span>
before the object's first use or before it is destroyed, whichever comes first; otherwise
the behavior is undefined.
</p></div></div><p ><span class='indexparent'><a class='index' id='ios_base,destructor'></a></span><code class='itemdecl'>
~ios_base();
</code></p><div class='itemdescr'></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><p ><i>Effects:</i>
Destroys an object of class
<span class='texttt'>ios_base</span>.
Calls each registered callback pair
<span class='texttt'>(fn, index)</span> (<a href='ios.base.callback'>[ios.base.callback]</a>) as
<span class='texttt'>(*fn)(<span class='discretionary'></span>erase_event, *this, index)</span>
at such time that any
<span class='texttt'>ios_base</span>
member function called from within
<span class='texttt'>fn</span>
has well defined results.
</p></div></div></div></div></div></body></html>