<!DOCTYPE html><html lang='en'><head><title>[support.start.term]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>18</a> Language support library <a class='abbr_ref' href='./#language.support'>[language.support]</a></h1><div id='support.start.term'><h2 ><a class='secnum' style='min-width:88pt'>18.5</a> Start and termination <a class='abbr_ref'>[support.start.term]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >Table <a href='#tab:support.hdr.cstdlib'>[tab:support.hdr.cstdlib]</a> describes some of the contents of the header <span class='texttt'>&lt;cstdlib&gt;</span>.</p><p ><span class='indexparent'><a class='index' id='EXIT_FAILURE'></a></span><span class='indexparent'><a class='index' id='EXIT_SUCCESS'></a></span><span class='indexparent'><a class='index' id='_Exit'></a></span><span class='indexparent'><a class='index' id='abort'></a></span><span class='indexparent'><a class='index' id='atexit'></a></span><span class='indexparent'><a class='index' id='at_quick_exit'></a></span><span class='indexparent'><a class='index' id='exit'></a></span><span class='indexparent'><a class='index' id='quick_exit'></a></span>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </p><div class='numberedTable' id='tab:support.hdr.cstdlib'>Table <a href='#tab:support.hdr.cstdlib'>33</a> — Header <span class='texttt'>&lt;cstdlib&gt;</span> synopsis<br><table ><tr class='rowsep'><td colspan='1' class='center'><b>Type</b></td><td colspan='3' class='center'><b>Name(s)</b></td></tr><tr class='capsep'><td class='left'> 



<b>Macros</b>:     </td><td class='left'>   <span class='texttt'>EXIT_FAILURE</span>    </td><td class='left'>   <span class='texttt'>EXIT_SUCCESS</span>    </td><td class='left'>             </td></tr><tr class='rowsep'><td class='left'> 
<b>Functions</b>:
</td><td class='left'>   <span class='texttt'>_Exit</span>
</td><td class='left'>   <span class='texttt'>abort</span>
</td><td class='left'>   <span class='texttt'>atexit</span>  </td></tr><tr ><td class='left'>
</td><td class='left'>   <span class='texttt'>at_quick_exit</span>
</td><td class='left'>   <span class='texttt'>exit</span>
</td><td class='left'>   <span class='texttt'>quick_exit</span>  </td></tr></table></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >The contents are the same as the Standard C library header
<span class='texttt'>&lt;stdlib.h&gt;</span>,
with the following changes:</p><p ><span class='indexparent'><a class='index' id='_Exit'></a></span><code class='itemdecl'>
[[noreturn]] void _Exit(int status) noexcept;
</code></p></div><div class='itemdescr'></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><p >The function <span class='texttt'>_Exit(int status)</span> has additional behavior in this
International Standard:</p><ul ><li ><p >The program is terminated without executing destructors for objects of automatic,
thread, or static storage duration and without calling functions passed to
<span class='texttt'>atexit()</span> (<a href='basic.start.term'>[basic.start.term]</a>).
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='abort'></a></span><code class='itemdecl'>
[[noreturn]] void abort(void) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><p >The function
<span class='texttt'>abort()</span>
has additional behavior in this International Standard:</p><ul ><li ><p >The program is terminated without executing destructors for objects of
automatic, thread, or static storage
duration and without calling functions passed to
<span class='texttt'>atexit()</span> (<a href='basic.start.term'>[basic.start.term]</a>).
<span class='indexparent'><a class='index' id='atexit'></a></span></p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='atexit'></a></span>
<code class='itemdecl'>
extern "C" int atexit(void (*f)(void)) noexcept;
extern "C++" int atexit(void (*f)(void)) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><p ><i>Effects:</i>
The
<span class='texttt'>atexit()</span>
functions register the function pointed to by <span class='texttt'>f</span>
to be called without arguments at normal program termination.
It is unspecified whether a call to <span class='texttt'>atexit()</span> that does not
happen before (<a href='intro.multithread'>[intro.multithread]</a>) a call to <span class='texttt'>exit()</span> will succeed.
[&nbsp;<i>Note:</i> The <span class='texttt'>atexit()</span> functions do not introduce a data
race (<a href='res.on.data.races'>[res.on.data.races]</a>). <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><p ><i>Implementation limits:</i>
The implementation shall support the registration of at least 32 functions.</p></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><p ><i>Returns:</i>
The
<span class='texttt'>atexit()</span>
function returns zero if the registration succeeds,
non-zero if it fails.
</p></div></div><p ><span class='indexparent'><a class='index' id='exit'></a></span><code class='itemdecl'>
[[noreturn]] void exit(int status)
</code></p><div class='itemdescr'></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><p >The function
<span class='texttt'>exit()</span>
has additional behavior in this International Standard:</p><ul ><li ><p >First, objects with thread storage duration and associated with the current thread
are destroyed. Next, objects with static storage duration are destroyed
and functions registered by calling
<span class='texttt'>atexit</span>
are called.<a class='footnotenum' href='#footnote-224'>224</a>
See <a href='basic.start.term'>[basic.start.term]</a> for the order of destructions and calls.
(Automatic objects are not destroyed as a result of calling
<span class='texttt'>exit()</span>.)<a class='footnotenum' href='#footnote-225'>225</a></p><p >If control leaves a registered function called by <span class='texttt'>exit</span> because the function does
not provide a handler for a thrown exception, <span class='texttt'>std::terminate()</span> shall be called (<a href='except.terminate'>[except.terminate]</a>).<span class='indexparent'><a class='index' id='terminate'></a></span></p></li><li ><p >Next, all open C streams (as mediated by the function
signatures declared in
<span class='texttt'>&lt;cstdio&gt;</span>)
with unwritten buffered data are flushed, all open C
streams are closed, and all files created by calling
<span class='texttt'>tmpfile()</span>
are removed.</p></li><li ><p >Finally, control is returned to the host environment.
If <span class='texttt'>status</span> is zero or
<span class='texttt'>EXIT_SUCCESS</span>,
an <span class='indexparent'><a class='index' id='exit_status'></a></span>implementation-defined
form of the status
<a class='hidden_link' href='#def:successful_termination' id='def:successful_termination'><i>successful termination</i></a>
is returned.
<span class='indexparent'><a class='index' id='implementation-defined'></a></span>If <span class='texttt'>status</span> is
<span class='texttt'>EXIT_FAILURE</span>,
an <span class='indexparent'><a class='index' id='exit_status'></a></span>implementation-defined form of the status
<a class='hidden_link' href='#def:unsuccessful_termination' id='def:unsuccessful_termination'><i>unsuccessful termination</i></a>
is returned.
<span class='indexparent'><a class='index' id='implementation-defined'></a></span>Otherwise the status returned is <span class='indexparent'><a class='index' id='exit_status'></a></span>implementation-defined.<span class='indexparent'><a class='index' id='implementation-defined'></a></span><a class='footnotenum' href='#footnote-226'>226</a>
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='at_quick_exit'></a></span>
<code class='itemdecl'>
extern "C" int at_quick_exit(void (*f)(void)) noexcept;
extern "C++" int at_quick_exit(void (*f)(void)) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><p ><i>Effects:</i> The <span class='texttt'>at_quick_exit()</span> functions register the function pointed to by <span class='texttt'>f</span>
to be called without arguments when <span class='texttt'>quick_exit</span> is called.
It is unspecified whether a call to <span class='texttt'>at_quick_exit()</span> that does not
happen before (<a href='intro.multithread'>[intro.multithread]</a>) all calls to <span class='texttt'>quick_exit</span> will succeed. [&nbsp;<i>Note:</i> The
<span class='texttt'>at_quick_exit()</span> functions do not introduce a
data race (<a href='res.on.data.races'>[res.on.data.races]</a>). <i>&nbsp;—&nbsp;end note</i>&nbsp;]
[&nbsp;<i>Note:</i>
The order of registration may be indeterminate if <span class='texttt'>at_quick_exit</span> was called from more
than one thread.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]
[&nbsp;<i>Note:</i> The
<span class='texttt'>at_quick_exit</span> registrations are distinct from the <span class='texttt'>atexit</span> registrations,
and applications may need to call both registration functions with the same argument.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><p ><i>Implementation limits:</i>
The implementation shall support the registration of at least 32 functions.</p></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='itemdescr'><p ><i>Returns:</i> Zero if the registration succeeds, non-zero if it fails.
</p></div></div><p ><span class='indexparent'><a class='index' id='quick_exit'></a></span>
<code class='itemdecl'>
[[noreturn]] void quick_exit(int status) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='itemdescr'><p ><i>Effects:</i> Functions registered by calls to <span class='texttt'>at_quick_exit</span> are called in the
reverse order of their registration, except that a function shall be called after any
previously registered functions that had already been called at the time it was
registered. Objects shall not be destroyed as a result of calling <span class='texttt'>quick_exit</span>.
If control leaves a registered function called by <span class='texttt'>quick_exit</span> because the
function does not provide a handler for a thrown exception, <span class='texttt'>std::terminate()</span> shall
be called.<span class='indexparent'><a class='index' id='terminate'></a></span>
[&nbsp;<i>Note:</i> <span class='texttt'>at_quick_exit</span> may call a registered function from a different thread
than the one that registered it, so registered functions should not rely on the identity
of objects with thread storage duration. <i>&nbsp;—&nbsp;end note</i>&nbsp;]
After calling registered functions, <span class='texttt'>quick_exit</span> shall call <span class='texttt'>_Exit(status)</span>.
[&nbsp;<i>Note:</i> The standard file buffers are not flushed. <span class='textsc'>See:</span> ISO C 7.20.4.4. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div></div><p ><span class='textsc'>See also:</span> <a href='basic.start'>[basic.start]</a>, <a href='basic.start.term'>[basic.start.term]</a>,
ISO C 7.10.4.</p><div class='footnote' id='footnote-223'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-223'>223)</a></div><p >A function is called for every time it is registered.</p></div><div class='footnote' id='footnote-224'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-224'>224)</a></div><p >Objects with automatic storage duration are all destroyed in a program whose
function
<span class='texttt'>main()</span>
contains no automatic objects and executes the call to
<span class='texttt'>exit()</span>.
Control can be transferred directly to such a
<span class='texttt'>main()</span>
by throwing an exception that is caught in
<span class='texttt'>main()</span>.</p></div><div class='footnote' id='footnote-225'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-225'>225)</a></div><p >The macros
<span class='texttt'>EXIT_FAILURE</span>
and
<span class='texttt'>EXIT_SUCCESS</span>
are defined in
<span class='texttt'>&lt;cstdlib&gt;</span>.</p></div></div></div></body></html>