<!DOCTYPE html><html lang='en'><head><title>[temp.dep.res]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>17.6</a> Name resolution <a class='abbr_ref' href='temp.res#temp.dep.res'>[temp.res]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>17.6.4</a> Dependent name resolution <a class='abbr_ref'>[temp.dep.res]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4276'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':name,dependent'></a></span>In resolving dependent names, names from the following sources are considered:</div><div id='1.sentence-2' class='sentence'><ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div><div id='1.1.sentence-1' class='sentence'>Declarations that are visible at the point of definition of the
template<a class='hidden_link' href='#1.1.sentence-1'>.</a></div></li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div><div id='1.2.sentence-1' class='sentence'>Declarations from namespaces associated with the types of the
function arguments both from the instantiation context (<a href='temp.point'>[temp.point]</a>)
and from the definition context<a class='hidden_link' href='#1.2.sentence-1'>.</a></div></li></ul></div></div><div id='temp.point' class='section'><h4 ><a class='secnum' href='#temp.point' style='min-width:118pt'>17.6.4.1</a> Point of instantiation <a class='abbr_ref' href='temp.point'>[temp.point]</a></h4><div class='para' id='temp.point-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4292'>#</a></div><div id='temp.point-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':instantiation,point_of'></a></span>For a function template specialization, a member function template
specialization, or a specialization for a member function or static data member
of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization and
the context from which it is referenced depends on a template parameter,
the point of instantiation of the specialization is the point of instantiation
of the enclosing specialization<a class='hidden_link' href='#temp.point-1.sentence-1'>.</a></div> <div id='temp.point-1.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
follows the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#temp.point-1.sentence-2'>.</a></div></div><div class='para' id='temp.point-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4306'>#</a></div><div id='temp.point-2.sentence-1' class='sentence'>If a function template or member function of a class template is called
in a way which uses the definition of a default argument of that function
template or member function,
the point of instantiation of the default argument is the point of
instantiation of the function template or member function specialization<a class='hidden_link' href='#temp.point-2.sentence-1'>.</a></div></div><div class='para' id='temp.point-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4313'>#</a></div><div id='temp.point-3.sentence-1' class='sentence'>For a <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> of a function template
specialization or specialization of a member function of a class template, if
the <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> is implicitly instantiated because
it is needed by another template specialization and the context that requires
it depends on a template parameter, the point of instantiation of the
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> is the point of instantiation of the
specialization that requires it<a class='hidden_link' href='#temp.point-3.sentence-1'>.</a></div> <div id='temp.point-3.sentence-2' class='sentence'>Otherwise, the point of instantiation for such
a <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> immediately follows the namespace
scope declaration or definition that requires the
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><a class='hidden_link' href='#temp.point-3.sentence-2'>.</a></div></div><div class='para' id='temp.point-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4327'>#</a></div><div id='temp.point-4.sentence-1' class='sentence'>For a class template specialization, a class member template specialization,
or a specialization for a class member of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization,
if the context from which the specialization is referenced depends on a
template parameter,
and if the specialization is not instantiated previous to the instantiation of
the enclosing template,
the point of instantiation is immediately before the point of instantiation of
the enclosing template<a class='hidden_link' href='#temp.point-4.sentence-1'>.</a></div> <div id='temp.point-4.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
precedes the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#temp.point-4.sentence-2'>.</a></div></div><div class='para' id='temp.point-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4342'>#</a></div><div id='temp.point-5.sentence-1' class='sentence'>If a virtual function is implicitly instantiated, its point of instantiation
is immediately following the point of instantiation of its enclosing class
template specialization<a class='hidden_link' href='#temp.point-5.sentence-1'>.</a></div></div><div class='para' id='temp.point-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4347'>#</a></div><div id='temp.point-6.sentence-1' class='sentence'>An explicit instantiation definition is an instantiation
point for the specialization or specializations specified by the explicit
instantiation<a class='hidden_link' href='#temp.point-6.sentence-1'>.</a></div></div><div class='para' id='temp.point-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4352'>#</a></div><div id='temp.point-7.sentence-1' class='sentence'>The instantiation context of an expression that depends on the template
arguments is the set of declarations with external linkage declared prior to the
point of instantiation of the template specialization in the same translation
unit<a class='hidden_link' href='#temp.point-7.sentence-1'>.</a></div></div><div class='para' id='temp.point-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4358'>#</a></div><div id='temp.point-8.sentence-1' class='sentence'>A specialization for a function template, a member function template,
or of a member function or static data member of a class template may have
multiple points of instantiations within a translation unit, and in addition
to the points of instantiation described above, for any such specialization
that has a point of instantiation within the translation unit, the end of the
translation unit is also considered a point of instantiation<a class='hidden_link' href='#temp.point-8.sentence-1'>.</a></div> <div id='temp.point-8.sentence-2' class='sentence'>A specialization for a class template has at most one point of instantiation
within a translation unit<a class='hidden_link' href='#temp.point-8.sentence-2'>.</a></div> <div id='temp.point-8.sentence-3' class='sentence'>A specialization for any template may have points of instantiation in multiple
translation units<a class='hidden_link' href='#temp.point-8.sentence-3'>.</a></div> <div id='temp.point-8.sentence-4' class='sentence'>If two different points of instantiation give a template specialization
different meanings according to the one-definition rule (<a href='basic.def.odr'>[basic.def.odr]</a>),
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#temp.point-8.sentence-4'>.</a></div></div></div><div id='temp.dep.candidate' class='section'><h4 ><a class='secnum' href='#temp.dep.candidate' style='min-width:118pt'>17.6.4.2</a> Candidate functions <a class='abbr_ref' href='temp.dep.candidate'>[temp.dep.candidate]</a></h4><div class='para' id='temp.dep.candidate-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.candidate-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/95ac3d662c788cdabc382509be4c273e5c80b334/source/templates.tex#L4375'>#</a></div><div id='temp.dep.candidate-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':functions,candidate'></a></span>For a function call where the <i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> is a
dependent name,
the candidate functions are found using the usual lookup
rules (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>, <a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>) except that:</div><div id='temp.dep.candidate-1.sentence-2' class='sentence'><ul class='itemize'><li id='temp.dep.candidate-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.candidate-1.1'>(1.1)</a></div><div id='temp.dep.candidate-1.1.sentence-1' class='sentence'>For the part of the lookup using unqualified name lookup (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>),
only function declarations
from the template definition context are found<a class='hidden_link' href='#temp.dep.candidate-1.1.sentence-1'>.</a></div></li><li id='temp.dep.candidate-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.candidate-1.2'>(1.2)</a></div><div id='temp.dep.candidate-1.2.sentence-1' class='sentence'>For the part of the lookup using associated namespaces (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>),
only function declarations found in either the template
definition context or the template instantiation context are found<a class='hidden_link' href='#temp.dep.candidate-1.2.sentence-1'>.</a></div></li></ul></div><div id='temp.dep.candidate-1.sentence-3' class='sentence'>If
the call would be ill-formed or would find a better match had the lookup
within the associated namespaces considered all the function declarations with
external linkage introduced in those namespaces in all translation units,
not just considering those declarations found in the template definition and
template instantiation contexts, then the program has undefined behavior<a class='hidden_link' href='#temp.dep.candidate-1.sentence-3'>.</a></div></div></div></div></body></html>