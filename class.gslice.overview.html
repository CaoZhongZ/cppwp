<!DOCTYPE html><html lang='en'><head><title>[class.gslice.overview]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>26</a> Numerics library <a class='abbr_ref' href='./#numerics'>[numerics]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>26.7</a> Numeric arrays <a class='abbr_ref' href='numarray#class.gslice.overview'>[numarray]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>26.7.6</a> The <span class='texttt'>gslice</span> class <a class='abbr_ref' href='class.gslice#overview'>[class.gslice]</a></h3><div id='class.gslice.overview'><h4 ><a class='secnum' style='min-width:118pt'>26.7.6.1</a> The <span class='texttt'>gslice</span> class overview <a class='abbr_ref'>[class.gslice.overview]</a></h4><p ><span class='indexparent'><a class='index' id='gslice'></a></span></p><pre class='codeblock'>
namespace std {
  class gslice {
  public:
    gslice();
    gslice(size_t s, const valarray&lt;size_t&gt;&amp; l, const valarray&lt;size_t&gt;&amp; d);

    size_t           start() const;
    valarray&lt;size_t&gt; size() const;
    valarray&lt;size_t&gt; stride() const;
  };
}</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e5ca011e3f449e4ae1ac4777e587a4534be46224/source/numerics.tex#L8008'>#</a></div><p >This class represents a generalized slice out of an array.
A
<span class='texttt'>gslice</span>
is defined by a starting offset (<span class='math'><span class='mathalpha'>s</span></span>),
a set of lengths (<span class='math'><span class='mathalpha'>l</span><sub ><span class='mathalpha'>j</span></sub></span>),
and a set of strides (<span class='math'><span class='mathalpha'>d</span><sub ><span class='mathalpha'>j</span></sub></span>).
The number of lengths shall equal the number of strides.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e5ca011e3f449e4ae1ac4777e587a4534be46224/source/numerics.tex#L8017'>#</a></div><p >A
<span class='texttt'>gslice</span>
represents a mapping from a set of indices (<span class='math'><span class='mathalpha'>i</span><sub ><span class='mathalpha'>j</span></sub></span>),
equal in number to the number of strides, to a single index <span class='math'><span class='mathalpha'>k</span></span>.
It is useful for building multidimensional array classes using
the
<span class='texttt'>valarray</span>
template, which is one-dimensional.
The set of one-dimensional index values specified by a
<span class='texttt'>gslice</span>
are </p><p style='text-align:center'><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-1-Frame" class="mjx-chtml" style="text-align: center;"><span id="MJXc-Node-1" class="mjx-math"><span id="MJXc-Node-2" class="mjx-mrow"><span id="MJXc-Node-3" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">k</span></span><span id="MJXc-Node-4" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span id="MJXc-Node-5" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">s</span></span><span id="MJXc-Node-6" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">+</span></span><span id="MJXc-Node-7" class="mjx-munderover MJXc-space2"><span class="mjx-itable"><span class="mjx-row"><span class="mjx-cell"><span class="mjx-op"><span id="MJXc-Node-8" class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.74em; padding-bottom: 0.74em;">∑</span></span></span></span></span><span class="mjx-row"><span class="mjx-under" style="font-size: 70.7%; padding-top: 0.236em; padding-bottom: 0.141em; padding-left: 0.815em;"><span id="MJXc-Node-9" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span id="MJXc-Node-10" class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span id="MJXc-Node-11" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-12" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span><span id="MJXc-Node-13" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span id="MJXc-Node-14" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-15" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span></span>
</p><p>
where the multidimensional indices <span class='math'><span class='mathalpha'>i</span><sub ><span class='mathalpha'>j</span></sub></span> range in value from
0 to <span class='math'><span class='mathalpha'>l</span><sub ><span class='mathalpha'>ij</span></sub> - 1</span>.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e5ca011e3f449e4ae1ac4777e587a4534be46224/source/numerics.tex#L8033'>#</a></div><p >[ <i>Example:</i>
The
<span class='texttt'>gslice</span>
specification
</p><pre class='codeblock'>
start  = 3
length = {2, 4, 3}
stride = {19, 4, 1}</pre><p >yields the sequence of one-dimensional indices</p><p ><span class='mathblock'><span class='mathalpha'>k</span> = 3 + (0,1) &times; 19 + (0,1,2,3) &times; 4 + (0,1,2) &times; 1</span></p><p >which are ordered as shown in the following table:</p><pre >
<span class='='></span><span class='='></span>&#9;<span class='math'>(<span class='mathalpha'>i</span><sub >0</sub>,&emsp;&ensp; <span class='mathalpha'>i</span><sub >1</sub>,&emsp;&ensp; <span class='mathalpha'>i</span><sub >2</sub>,&emsp;&ensp; <span class='mathalpha'>k</span>)&emsp;&ensp; =</span>
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 0,&emsp;&ensp; &nbsp;3)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 1,&emsp;&ensp; &nbsp;4)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 2,&emsp;&ensp; &nbsp;5)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 0,&emsp;&ensp; &nbsp;7)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 1,&emsp;&ensp; &nbsp;8)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 2,&emsp;&ensp; &nbsp;9)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 2,&emsp;&ensp; 0,&emsp;&ensp; 11)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 2,&emsp;&ensp; 1,&emsp;&ensp; 12)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 2,&emsp;&ensp; 2,&emsp;&ensp; 13)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 3,&emsp;&ensp; 0,&emsp;&ensp; 15)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 3,&emsp;&ensp; 1,&emsp;&ensp; 16)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 3,&emsp;&ensp; 2,&emsp;&ensp; 17)</span>, 
&#9;&#9;<span class='math'>(1,&emsp;&ensp; 0,&emsp;&ensp; 0,&emsp;&ensp; 22)</span>, 
&#9;&#9;<span class='math'>(1,&emsp;&ensp; 0,&emsp;&ensp; 1,&emsp;&ensp; 23)</span>, 
&#9;&#9;<span class='math'>&hellip;</span>      
&#9;&#9;<span class='math'>(1,&emsp;&ensp; 3,&emsp;&ensp; 2,&emsp;&ensp; 36)</span>
</pre><p >That is, the highest-ordered index turns fastest.
<i> — end example</i> ]</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e5ca011e3f449e4ae1ac4777e587a4534be46224/source/numerics.tex#L8073'>#</a></div><p >It is possible to have degenerate generalized slices in which an address
is repeated.</p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e5ca011e3f449e4ae1ac4777e587a4534be46224/source/numerics.tex#L8077'>#</a></div><p >[ <i>Example:</i>
If the stride parameters in the previous
example are changed to {1, 1, 1}, the first few elements of the
resulting sequence of indices will be</p><pre >
<span class='='></span>&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 0,&emsp;&ensp; &nbsp;3)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 1,&emsp;&ensp; &nbsp;4)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 2,&emsp;&ensp; &nbsp;5)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 0,&emsp;&ensp; &nbsp;4)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 1,&emsp;&ensp; &nbsp;5)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 2,&emsp;&ensp; &nbsp;6)</span>,  
&#9;<span class='math'>&hellip;</span>
</pre><p ><i> — end example</i> ]</p></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e5ca011e3f449e4ae1ac4777e587a4534be46224/source/numerics.tex#L8095'>#</a></div><p >If a degenerate slice is used as the argument to the
non-<span class='texttt'>const</span>
version of
<span class='texttt'>operator[](const gslice&amp;)</span>,
the behavior is undefined.
<span class='indexparent'><a class='index' id='undefined'></a></span>
</p></div></div></div></body></html>