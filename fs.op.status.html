<!DOCTYPE html><html lang='en'><head><title>[fs.op.status]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>27</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>27.10</a> File systems <a class='abbr_ref' href='filesystems#fs.op.status'>[filesystems]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>27.10.15</a> Filesystem operation functions <a class='abbr_ref' href='fs.op.funcs#fs.op.status'>[fs.op.funcs]</a></h3><div id='fs.op.status'><h4 ><a class='secnum' style='min-width:118pt'>27.10.15.35</a> Status <a class='abbr_ref'>[fs.op.status]</a></h4><p ><span class='indexparent'><a class='index' id='status'></a></span><code class='itemdecl'>
file_status status(const path&amp; p);
</code></p><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1357aed3958027db9fcf1fb0e91d06a7c3d52658/source/iostreams.tex#L14522'>#</a></div><p ><i>Effects:</i> As if:
</p><pre class='codeblock'>
error_code ec;
file_status result = status(p, ec);
if (result.type() == file_type::none)
  throw filesystem_error(<i>implementation-supplied-message</i>, p, ec);
return result;</pre></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1357aed3958027db9fcf1fb0e91d06a7c3d52658/source/iostreams.tex#L14532'>#</a></div><p ><i>Returns:</i> See above.</p></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1357aed3958027db9fcf1fb0e91d06a7c3d52658/source/iostreams.tex#L14535'>#</a></div><p ><i>Throws:</i> <span class='texttt'>filesystem_error</span>.
[ <i>Note:</i> <span class='texttt'>result</span> values of <span class='texttt'>file_status(file_type::not_found)</span>
  and <span class='texttt'>file_status(file_type::unknown)</span> are not considered failures and do not
  cause an exception to be thrown.<i> — end note</i> ]
</p></div></div><p ><span class='indexparent'><a class='index' id='status'></a></span><code class='itemdecl'>
file_status status(const path&amp; p, error_code&amp; ec) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1357aed3958027db9fcf1fb0e91d06a7c3d52658/source/iostreams.tex#L14548'>#</a></div><p ><i>Effects:</i>
If possible, determines the attributes
    of the file <span class='texttt'>p</span> resolves to, as if by using POSIX <span class='texttt'>stat()</span>
    to obtain a POSIX <span class='texttt'>struct stat</span>.
      If, during attribute determination, the underlying file system API reports
    an error, sets <span class='texttt'>ec</span> to indicate the specific error reported.
    Otherwise, <span class='texttt'>ec.clear()</span>.
[ <i>Note:</i> This allows users to inspect the specifics of underlying
      API errors even when the value returned by <span class='texttt'>status()</span> is not
      <span class='texttt'>file_status(file_type::none)</span>. <i> — end note</i> ]</p></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1357aed3958027db9fcf1fb0e91d06a7c3d52658/source/iostreams.tex#L14560'>#</a></div><p >Let <span class='texttt'>prms</span> denote the result of <span class='texttt'>(m &amp; perms::mask)</span>,
where <span class='texttt'>m</span> is determined as if by converting the <span class='texttt'>st_mode</span> member
of the obtained <span class='texttt'>struct stat</span> to the type <span class='texttt'>perms</span>.</p></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1357aed3958027db9fcf1fb0e91d06a7c3d52658/source/iostreams.tex#L14565'>#</a></div><p ><i>Returns:</i>
</p><ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#6.1'>(6.1)</a></div><p >If <span class='texttt'>ec != error_code()</span>:
</p><ul class='itemize'><li id='6.1.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.1'>(6.1.1)</a></div><p >If the specific error indicates that <span class='texttt'>p</span> cannot be resolved
      because some element of the path does not exist, returns
      <span class='texttt'>file_status(file_type::not_found)</span>.
</p></li><li id='6.1.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.2'>(6.1.2)</a></div><p >Otherwise, if the specific error indicates that <span class='texttt'>p</span> can be resolved
      but the attributes cannot be determined, returns
      <span class='texttt'>file_status(file_type::unknown)</span>.
</p></li><li id='6.1.3'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.3'>(6.1.3)</a></div><p >Otherwise, returns <span class='texttt'>file_status(file_type::none)</span>.
</p></li></ul><p >[ <i>Note:</i> These semantics distinguish between <span class='texttt'>p</span> being known not to exist, <span class='texttt'>p</span> existing but not being able to determine its attributes,
        and there being an error that prevents even knowing if <span class='texttt'>p</span> exists. These
        distinctions are important to some use cases. <i> — end note</i> ]
</p></li><li id='6.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#6.2'>(6.2)</a></div><p >Otherwise,
</p><ul class='itemize'><li id='6.2.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.1'>(6.2.1)</a></div><p >If the attributes indicate a regular file, as if by POSIX <span class='texttt'>S_ISREG</span>,
      returns <span class='texttt'>file_status(file_type::regular, prms)</span>. [ <i>Note:</i>
      <span class='texttt'>file_type::regular</span> implies appropriate <span class='texttt'>&lt;fstream&gt;</span> operations
      would succeed, assuming no hardware, permission, access, or file system
      race errors. Lack of <span class='texttt'>file_type::regular</span> does not necessarily imply
      <span class='texttt'>&lt;fstream&gt;</span> operations would fail on a directory.  <i> — end note</i> ]
</p></li><li id='6.2.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.2'>(6.2.2)</a></div><p >Otherwise, if the attributes indicate a directory, as if by POSIX
      <span class='texttt'>S_ISDIR</span>, returns <span class='texttt'>file_status(file_type::directory, prms)</span>.
      [ <i>Note:</i> <span class='texttt'>file_type::directory</span> implies
      <span class='texttt'>directory_iterator(p)</span> would succeed.  <i> — end note</i> ]
</p></li><li id='6.2.3'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.3'>(6.2.3)</a></div><p >Otherwise, if the attributes indicate a block special file, as if by
      POSIX <span class='texttt'>S_ISBLK</span>, returns <span class='texttt'>file_status(file_type::block, prms)</span>.
</p></li><li id='6.2.4'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.4'>(6.2.4)</a></div><p >Otherwise, if the attributes indicate a character special file, as if
      by POSIX <span class='texttt'>S_ISCHR</span>, returns <span class='texttt'>file_status(file_type::character, prms)</span>.
</p></li><li id='6.2.5'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.5'>(6.2.5)</a></div><p >Otherwise, if the attributes indicate a fifo or pipe file, as if by
      POSIX <span class='texttt'>S_ISFIFO</span>, returns <span class='texttt'>file_status(file_type::fifo, prms)</span>.
</p></li><li id='6.2.6'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.6'>(6.2.6)</a></div><p >Otherwise, if the attributes indicate a socket, as if by POSIX
      <span class='texttt'>S_ISSOCK</span>, returns <span class='texttt'>file_status(file_type::socket, prms)</span>.
</p></li><li id='6.2.7'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.7'>(6.2.7)</a></div><p >Otherwise, returns <span class='texttt'>file_status(file_type::unknown, prms)</span>.
</p></li></ul></li></ul></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1357aed3958027db9fcf1fb0e91d06a7c3d52658/source/iostreams.tex#L14607'>#</a></div><p ><i>Remarks:</i> If a symbolic link is encountered during pathname resolution,
      pathname resolution continues using the contents of the symbolic link.
</p></div></div></div></div></body></html>