<!DOCTYPE html><html lang='en'><head><title>[fs.op.status]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>30</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>30.11</a> File systems <a class='abbr_ref' href='filesystems#fs.op.status'>[filesystems]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>30.11.14</a> Filesystem operation functions <a class='abbr_ref' href='fs.op.funcs#fs.op.status'>[fs.op.funcs]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>30.11.14.35</a> Status <a class='abbr_ref'>[fs.op.status]</a></h4><span class='indexparent'><a class='index' id='lib:status'></a></span><code class='itemdecl'>file_status status(const path&amp; p);
</code><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iostreams.tex#L15638'>#</a></div><div id='1.sentence-1' class='sentence'><span class='textit'>Effects:</span> As if:
<pre class='codeblock'>
error_code ec;
file_status result = status(p, ec);
if (result.type() == file_type::none)
  throw filesystem_error(<span class='textit'>implementation-supplied-message</span>, p, ec);
return result;</pre></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iostreams.tex#L15648'>#</a></div><div id='2.sentence-1' class='sentence'><span class='textit'>Returns:</span> See above<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iostreams.tex#L15651'>#</a></div><div id='3.sentence-1' class='sentence'><span class='textit'>Throws:</span> <span class='texttt'>filesystem_&shy;error</span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'><span class='texttt'>result</span> values of <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;not_&shy;found)</span>
  and <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;unknown)</span> are not considered failures and do not
  cause an exception to be thrown<a class='hidden_link' href='#3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:status_'></a></span><code class='itemdecl'>file_status status(const path&amp; p, error_code&amp; ec) noexcept;
</code><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iostreams.tex#L15664'>#</a></div><div id='4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If possible, determines the attributes
    of the file <span class='texttt'>p</span> resolves to, as if by using POSIX <span class='texttt'>stat()</span>
    to obtain a POSIX <span class='texttt'>struct stat</span><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If, during attribute determination, the underlying file system API reports
    an error, sets <span class='texttt'>ec</span> to indicate the specific error reported<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>Otherwise, <span class='texttt'>ec.clear()</span><a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-4' class='sentence'>This allows users to inspect the specifics of underlying
      API errors even when the value returned by <span class='texttt'>status()</span> is not
      <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;none)</span><a class='hidden_link' href='#4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iostreams.tex#L15676'>#</a></div><div id='5.sentence-1' class='sentence'>Let <span class='texttt'>prms</span> denote the result of <span class='texttt'>(m &amp; perms&#x200b;::&#x200b;mask)</span>,
where <span class='texttt'>m</span> is determined as if by converting the <span class='texttt'>st_&shy;mode</span> member
of the obtained <span class='texttt'>struct stat</span> to the type <span class='texttt'>perms</span><a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iostreams.tex#L15681'>#</a></div><div id='6.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#6.1'>(6.1)</a></div><div id='6.1.sentence-1' class='sentence'>If <span class='texttt'>ec != error_&shy;code()</span>:
<ul class='itemize'><li id='6.1.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.1'>(6.1.1)</a></div><div id='6.1.1.sentence-1' class='sentence'>If the specific error indicates that <span class='texttt'>p</span> cannot be resolved
      because some element of the path does not exist, returns
      <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;not_&shy;found)</span><a class='hidden_link' href='#6.1.1.sentence-1'>.</a></div></li><li id='6.1.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.2'>(6.1.2)</a></div><div id='6.1.2.sentence-1' class='sentence'>Otherwise, if the specific error indicates that <span class='texttt'>p</span> can be resolved
      but the attributes cannot be determined, returns
      <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;unknown)</span><a class='hidden_link' href='#6.1.2.sentence-1'>.</a></div></li><li id='6.1.3'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.3'>(6.1.3)</a></div><div id='6.1.3.sentence-1' class='sentence'>Otherwise, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;none)</span><a class='hidden_link' href='#6.1.3.sentence-1'>.</a></div></li></ul></div> <div id='6.1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.1.sentence-2' class='sentence'>These semantics distinguish between <span class='texttt'>p</span> being known not to exist, <span class='texttt'>p</span> existing but not being able to determine its attributes,
        and there being an error that prevents even knowing if <span class='texttt'>p</span> exists<a class='hidden_link' href='#6.1.sentence-2'>.</a></div> <div id='6.1.sentence-3' class='sentence'>These
        distinctions are important to some use cases<a class='hidden_link' href='#6.1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='6.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#6.2'>(6.2)</a></div><div id='6.2.sentence-1' class='sentence'>Otherwise,
<ul class='itemize'><li id='6.2.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.1'>(6.2.1)</a></div><div id='6.2.1.sentence-1' class='sentence'>If the attributes indicate a regular file, as if by POSIX <span class='texttt'>S_&shy;ISREG</span>,
      returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;regular, prms)</span><a class='hidden_link' href='#6.2.1.sentence-1'>.</a></div> <div id='6.2.1.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.2.1.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.2.1.sentence-2' class='sentence'><span class='texttt'>file_&shy;type&#x200b;::&#x200b;regular</span> implies appropriate <span class='texttt'>&lt;fstream&gt;</span> operations
      would succeed, assuming no hardware, permission, access, or file system
      race errors<a class='hidden_link' href='#6.2.1.sentence-2'>.</a></div> <div id='6.2.1.sentence-3' class='sentence'>Lack of <span class='texttt'>file_&shy;type&#x200b;::&#x200b;regular</span> does not necessarily imply
      <span class='texttt'>&lt;fstream&gt;</span> operations would fail on a directory<a class='hidden_link' href='#6.2.1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='6.2.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.2'>(6.2.2)</a></div><div id='6.2.2.sentence-1' class='sentence'>Otherwise, if the attributes indicate a directory, as if by POSIX
      <span class='texttt'>S_&shy;ISDIR</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;directory, prms)</span><a class='hidden_link' href='#6.2.2.sentence-1'>.</a></div> <div id='6.2.2.note-3' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.2.2.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.2.2.sentence-2' class='sentence'><span class='texttt'>file_&shy;type&#x200b;::&#x200b;directory</span> implies that calling
      <span class='texttt'>directory_&shy;iterator(p)</span> would succeed<a class='hidden_link' href='#6.2.2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='6.2.3'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.3'>(6.2.3)</a></div><div id='6.2.3.sentence-1' class='sentence'>Otherwise, if the attributes indicate a block special file, as if by
      POSIX <span class='texttt'>S_&shy;ISBLK</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;block, prms)</span><a class='hidden_link' href='#6.2.3.sentence-1'>.</a></div></li><li id='6.2.4'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.4'>(6.2.4)</a></div><div id='6.2.4.sentence-1' class='sentence'>Otherwise, if the attributes indicate a character special file, as if
      by POSIX <span class='texttt'>S_&shy;ISCHR</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;character, prms)</span><a class='hidden_link' href='#6.2.4.sentence-1'>.</a></div></li><li id='6.2.5'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.5'>(6.2.5)</a></div><div id='6.2.5.sentence-1' class='sentence'>Otherwise, if the attributes indicate a fifo or pipe file, as if by
      POSIX <span class='texttt'>S_&shy;ISFIFO</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;fifo, prms)</span><a class='hidden_link' href='#6.2.5.sentence-1'>.</a></div></li><li id='6.2.6'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.6'>(6.2.6)</a></div><div id='6.2.6.sentence-1' class='sentence'>Otherwise, if the attributes indicate a socket, as if by POSIX
      <span class='texttt'>S_&shy;ISSOCK</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;socket, prms)</span><a class='hidden_link' href='#6.2.6.sentence-1'>.</a></div></li><li id='6.2.7'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.7'>(6.2.7)</a></div><div id='6.2.7.sentence-1' class='sentence'>Otherwise, if the attributes indicate an implementation-defined
      file type (<a href='fs.enum.file_type'>[fs.enum.file_type]</a>),
      returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;<span class='textit'>A</span>, prms)</span>,
      where <span class='texttt'><span class='textit'>A</span></span> is the constant for the
      <span class='indexparent'><a class='index' id=':file_type_of_the_file_argument_of_filesystem::status'></a></span>implementation-defined file type<a class='hidden_link' href='#6.2.7.sentence-1'>.</a></div></li><li id='6.2.8'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.8'>(6.2.8)</a></div><div id='6.2.8.sentence-1' class='sentence'>Otherwise, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;unknown, prms)</span><a class='hidden_link' href='#6.2.8.sentence-1'>.</a></div></li></ul></div></li></ul></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b64354a7503c1cdc358d7f5dd1405ed903e170ef/source/iostreams.tex#L15728'>#</a></div><div id='7.sentence-1' class='sentence'><span class='textit'>Remarks:</span> If a symbolic link is encountered during pathname resolution,
      pathname resolution continues using the contents of the symbolic link<a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div></div></body></html>