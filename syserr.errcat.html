<!DOCTYPE html><html lang='en'><head><title>[syserr.errcat]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>19</a> Diagnostics library <a class='abbr_ref' href='./#diagnostics'>[diagnostics]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>19.5</a> System error support <a class='abbr_ref' href='syserr#errcat'>[syserr]</a></h2><div id='syserr.errcat'><h3 ><a class='secnum' style='min-width:103pt'>19.5.2</a> Class <span class='texttt'>error_category</span> <a class='abbr_ref'>[syserr.errcat]</a></h3><div id='overview'><h4 ><a class='secnum' href='#overview' style='min-width:118pt'>19.5.2.1</a> Class <span class='texttt'>error_category</span> overview <a class='abbr_ref' href='syserr.errcat.overview'>[syserr.errcat.overview]</a></h4><div class='para' id='overview-1'><div class='marginalizedparent'><a class='marginalized' href='#overview-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L936'>#</a></div><p >The class <span class='texttt'>error_category</span> serves as a base class for types used
to identify the source and encoding of a particular category of error code.
Classes may be derived from <span class='texttt'>error_category</span> to support
categories of errors in addition to those defined in this International
Standard.
Such classes shall behave as specified in this
subclause. [<span style='white-space:nowrap'>&thinsp;</span><i>Note:</i> <span class='texttt'>error_category</span> objects are
passed by reference, and two such objects
are equal if they have the same address. This means that applications using
custom <span class='texttt'>error_category</span> types should create a single object of each
such type. <i><span style='white-space:nowrap'>&thinsp;</span>â€”<span style='white-space:nowrap'>&thinsp;</span>end note</i><span style='white-space:nowrap'>&thinsp;</span>]</p><p ><span class='indexparent'><a class='index' id='error_category'></a></span><span class='indexparent'><a class='index' id='generic_category'></a></span><span class='indexparent'><a class='index' id='system_category'></a></span></p><pre class='codeblock'>
namespace std {
  class error_category {
  public:
    constexpr error_category() noexcept;
    virtual ~error_category();
    error_category(const error_category&amp;) = delete;
    error_category&amp; operator=(const error_category&amp;) = delete;
    virtual const char* name() const noexcept = 0;
    virtual error_condition default_error_condition(int ev) const noexcept;
    virtual bool equivalent(int code, const error_condition&amp; condition) const noexcept;
    virtual bool equivalent(const error_code&amp; code, int condition) const noexcept;
    virtual string message(int ev) const = 0;
    
    bool operator==(const error_category&amp; rhs) const noexcept;
    bool operator!=(const error_category&amp; rhs) const noexcept;
    bool operator&lt;(const error_category&amp; rhs) const noexcept;
  };

  const error_category&amp; generic_category() noexcept;
  const error_category&amp; system_category() noexcept;
}</pre></div></div><div id='virtuals'><h4 ><a class='secnum' href='#virtuals' style='min-width:118pt'>19.5.2.2</a> Class <span class='texttt'>error_category</span> virtual members <a class='abbr_ref' href='syserr.errcat.virtuals'>[syserr.errcat.virtuals]</a></h4><p ><span class='indexparent'><a class='index' id='error_category,destructor'></a></span><code class='itemdecl'>
virtual ~error_category();
</code></p><div class='itemdescr'></div><div class='para' id='virtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L984'>#</a></div><p ><i>Effects:</i> Destroys an object of class <span class='texttt'>error_category</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='name,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,name'></a></span><code class='itemdecl'>
virtual const char* name() const noexcept = 0;
</code></p><div class='itemdescr'></div><div class='para' id='virtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L994'>#</a></div><p ><i>Returns:</i> A string naming the error category.
</p></div></div><p ><span class='indexparent'><a class='index' id='default_error_condition,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,default_error_condition'></a></span><code class='itemdecl'>
virtual error_condition default_error_condition(int ev) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='virtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1004'>#</a></div><p ><i>Returns:</i>
<span class='texttt'>error_condition(ev, *this)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='equivalent,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,equivalent'></a></span><code class='itemdecl'>
virtual bool equivalent(int code, const error_condition&amp; condition) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='virtuals-4'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1015'>#</a></div><p ><i>Returns:</i> <span class='texttt'>default_error_condition(code) == condition</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='equivalent,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,equivalent'></a></span><code class='itemdecl'>
virtual bool equivalent(const error_code&amp; code, int condition) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='virtuals-5'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1025'>#</a></div><p ><i>Returns:</i> <span class='texttt'>*this == code.category() &amp;&amp; code.value() == condition</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='message,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,message'></a></span><code class='itemdecl'>
virtual string message(int ev) const = 0;
</code></p><div class='itemdescr'></div><div class='para' id='virtuals-6'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1035'>#</a></div><p ><i>Returns:</i> A string that describes the error condition denoted by <span class='texttt'>ev</span>.
</p></div></div></div><div id='nonvirtuals'><h4 ><a class='secnum' href='#nonvirtuals' style='min-width:118pt'>19.5.2.3</a> Class <span class='texttt'>error_category</span> non-virtual members <a class='abbr_ref' href='syserr.errcat.nonvirtuals'>[syserr.errcat.nonvirtuals]</a></h4><p ><span class='indexparent'><a class='index' id='error_category,constructor'></a></span><code class='itemdecl'>
constexpr error_category() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='nonvirtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#nonvirtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1047'>#</a></div><p ><i>Effects:</i> Constructs an object of class <span class='texttt'>error_category</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator==,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,operator=='></a></span><code class='itemdecl'>
bool operator==(const error_category&amp; rhs) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='nonvirtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#nonvirtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1057'>#</a></div><p ><i>Returns:</i> <span class='texttt'>this == &amp;rhs</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator!=,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,operator!='></a></span><code class='itemdecl'>
bool operator!=(const error_category&amp; rhs) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='nonvirtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#nonvirtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1067'>#</a></div><p ><i>Returns:</i> <span class='texttt'>!(*this == rhs)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator<,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,operator<'></a></span><code class='itemdecl'>
bool operator&lt;(const error_category&amp; rhs) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='nonvirtuals-4'><div class='marginalizedparent'><a class='marginalized' href='#nonvirtuals-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1077'>#</a></div><p ><i>Returns:</i> <span class='texttt'>less&lt;const error_category*&gt;()(this, &amp;rhs)</span>.</p><p >[<span style='white-space:nowrap'>&thinsp;</span><i>Note:</i> <span class='texttt'>less</span> (<a href='comparisons'>[comparisons]</a>) provides a total ordering for pointers. <i><span style='white-space:nowrap'>&thinsp;</span>â€”<span style='white-space:nowrap'>&thinsp;</span>end note</i><span style='white-space:nowrap'>&thinsp;</span>]
</p></div></div></div><div id='derived'><h4 ><a class='secnum' href='#derived' style='min-width:118pt'>19.5.2.4</a> Program defined classes derived from <span class='texttt'>error_category</span> <a class='abbr_ref' href='syserr.errcat.derived'>[syserr.errcat.derived]</a></h4><p ><span class='indexparent'><a class='index' id='name,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,name'></a></span><code class='itemdecl'>
virtual const char* name() const noexcept = 0;
</code></p><div class='itemdescr'></div><div class='para' id='derived-1'><div class='marginalizedparent'><a class='marginalized' href='#derived-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1091'>#</a></div><p ><i>Returns:</i> A string naming the error category.
</p></div></div><p ><span class='indexparent'><a class='index' id='default_error_condition,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,default_error_condition'></a></span><code class='itemdecl'>
virtual error_condition default_error_condition(int ev) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='derived-2'><div class='marginalizedparent'><a class='marginalized' href='#derived-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1101'>#</a></div><p ><i>Returns:</i> An object of type <span class='texttt'>error_condition</span> that corresponds to <span class='texttt'>ev</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='equivalent,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,equivalent'></a></span><code class='itemdecl'>
virtual bool equivalent(int code, const error_condition&amp; condition) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='derived-3'><div class='marginalizedparent'><a class='marginalized' href='#derived-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1111'>#</a></div><p ><i>Returns:</i> <span class='texttt'>true</span> if, for the category of error represented by <span class='texttt'>*this</span>, <span class='texttt'>code</span> is considered equivalent to <span class='texttt'>condition</span>; otherwise, <span class='texttt'>false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='equivalent,error_category'></a></span><span class='indexparent'><a class='index' id='error_category,equivalent'></a></span><code class='itemdecl'>
virtual bool equivalent(const error_code&amp; code, int condition) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='derived-4'><div class='marginalizedparent'><a class='marginalized' href='#derived-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1121'>#</a></div><p ><i>Returns:</i> <span class='texttt'>true</span> if, for the category of error represented by <span class='texttt'>*this</span>, <span class='texttt'>code</span> is considered equivalent to <span class='texttt'>condition</span>; otherwise, <span class='texttt'>false</span>.
</p></div></div></div><div id='objects'><h4 ><a class='secnum' href='#objects' style='min-width:118pt'>19.5.2.5</a> Error category objects <a class='abbr_ref' href='syserr.errcat.objects'>[syserr.errcat.objects]</a></h4><p ><span class='indexparent'><a class='index' id='generic_category'></a></span><code class='itemdecl'>
const error_category&amp; generic_category() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='objects-1'><div class='marginalizedparent'><a class='marginalized' href='#objects-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1133'>#</a></div><p ><i>Returns:</i> A reference to an object of a type derived from class <span class='texttt'>error_category</span>.
All calls to this function shall return references to the same object.</p></div></div><div class='para' id='objects-2'><div class='marginalizedparent'><a class='marginalized' href='#objects-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1137'>#</a></div><p ><i>Remarks:</i> The object's <span class='texttt'>default_error_condition</span> and <span class='texttt'>equivalent</span> virtual functions shall behave as specified for the class <span class='texttt'>error_category</span>. The object's <span class='texttt'>name</span> virtual function shall return a pointer to the string <span class='texttt'>"generic"</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='system_category'></a></span><code class='itemdecl'>
const error_category&amp; system_category() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='objects-3'><div class='marginalizedparent'><a class='marginalized' href='#objects-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1147'>#</a></div><p ><i>Returns:</i> A reference to an object of a type derived from class <span class='texttt'>error_category</span>.
All calls to this function shall return references to the same object.</p></div></div><div class='para' id='objects-4'><div class='marginalizedparent'><a class='marginalized' href='#objects-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/diagnostics.tex#L1151'>#</a></div><p ><i>Remarks:</i> The object's <span class='texttt'>equivalent</span> virtual functions shall behave as specified for
class <span class='texttt'>error_category</span>. The object's <span class='texttt'>name</span> virtual function shall return a
pointer to the string <span class='texttt'>"system"</span>. The object's <span class='texttt'>default_error_condition</span>
virtual function shall behave as follows:</p><p >If the argument <span class='texttt'>ev</span> corresponds to a POSIX <span class='texttt'>errno</span> value <span class='texttt'>posv</span>, the
function shall return <span class='texttt'>error_condition(posv, generic_category())</span>.
Otherwise, the function shall return <span class='texttt'>error_condition(ev,
system_category())</span>. What constitutes correspondence for any given operating
system is unspecified. [<span style='white-space:nowrap'>&thinsp;</span><i>Note:</i> The number of potential system error codes is large
and unbounded, and some may not correspond to any POSIX <span class='texttt'>errno</span> value. Thus
implementations are given latitude in determining correspondence. <i><span style='white-space:nowrap'>&thinsp;</span>â€”<span style='white-space:nowrap'>&thinsp;</span>end note</i><span style='white-space:nowrap'>&thinsp;</span>]
</p></div></div></div></div></div></body></html>