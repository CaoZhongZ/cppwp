<!DOCTYPE html><html lang='en'><head><title>[expr.spaceship]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.6</a> Compound expressions <a class='abbr_ref' href='expr.compound#expr.spaceship'>[expr.compound]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>7.6.8</a> Three-way comparison operator <a class='abbr_ref'>[expr.spaceship]</a></h3><span class='indexparent'><a class='index' id=':expression,three-way_comparison'></a></span><span class='indexparent'><a class='index' id=':expression,spaceship'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5547'>#</a></div><div id='1.sentence-1' class='sentence'>The three-way comparison operator groups left-to-right<a class='hidden_link' href='#1.sentence-1'>.</a></div><span class='indexparent'><a class='index' id=':operator,three-way_comparison'></a></span><span class='indexparent'><a class='index' id=':operator,spaceship'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:compare-expression' id='nt:compare-expression'>compare-expression:</a>
&#9;<i ><a href='expr.shift#nt:shift-expression'>shift-expression</a></i>
&#9;<i ><a href='expr.spaceship#nt:compare-expression'>compare-expression</a></i> <span class='terminal'>&lt;=&gt;</span> <i ><a href='expr.shift#nt:shift-expression'>shift-expression</a></i>
</pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5560'>#</a></div><div id='2.sentence-1' class='sentence'>The expression <span class='texttt'>p &lt;=&gt; q</span> is a prvalue indicating whether
<span class='texttt'>p</span> is less than, equal to, greater than, or incomparable with
<span class='texttt'>q</span><a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5565'>#</a></div><div id='3.sentence-1' class='sentence'>If one of the operands is of type <span class='texttt'>bool</span>
and the other is not, the program is ill-formed<a class='hidden_link' href='#3.sentence-1'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5569'>#</a></div><div id='4.sentence-1' class='sentence'>If both operands have arithmetic types,
or one operand has integral type and
the other operand has unscoped enumeration type,
the <a href='expr.arith.conv'>usual arithmetic conversions</a> are applied to the operands<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Then:</div><div id='4.sentence-3' class='sentence'><ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div><div id='4.1.sentence-1' class='sentence'>If a <a href='dcl.init.list#def:narrowing_conversion'>narrowing conversion</a> is required,
other than from an integral type to a floating point type,
the program is ill-formed<a class='hidden_link' href='#4.1.sentence-1'>.</a></div></li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div><div id='4.2.sentence-1' class='sentence'>Otherwise, if the operands have integral type,
the result is of type <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering</span><a class='hidden_link' href='#4.2.sentence-1'>.</a></div> <div id='4.2.sentence-2' class='sentence'>The result is
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering&#x200b;::&#x200b;equal</span>
if both operands are arithmetically equal,
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering&#x200b;::&#x200b;less</span>
if the first operand is arithmetically
less than the second operand,
and
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering&#x200b;::&#x200b;greater</span>
otherwise<a class='hidden_link' href='#4.2.sentence-2'>.</a></div></li><li id='4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.3'>(4.3)</a></div><div id='4.3.sentence-1' class='sentence'>Otherwise, the operands have floating-point type, and
the result is of type <span class='texttt'>std&#x200b;::&#x200b;partial_&shy;ordering</span><a class='hidden_link' href='#4.3.sentence-1'>.</a></div> <div id='4.3.sentence-2' class='sentence'>The expression <span class='texttt'>a &lt;=&gt; b</span> yields
<span class='texttt'>std&#x200b;::&#x200b;partial_&shy;ordering&#x200b;::&#x200b;less</span>
if <span class='texttt'>a</span> is less than <span class='texttt'>b</span>,
<span class='texttt'>std&#x200b;::&#x200b;partial_&shy;ordering&#x200b;::&#x200b;greater</span>
if <span class='texttt'>a</span> is greater than <span class='texttt'>b</span>,
<span class='texttt'>std&#x200b;::&#x200b;partial_&shy;ordering&#x200b;::&#x200b;equivalent</span>
if <span class='texttt'>a</span> is equivalent to <span class='texttt'>b</span>,
and
<span class='texttt'>std&#x200b;::&#x200b;partial_&shy;ordering&#x200b;::&#x200b;unordered</span> otherwise<a class='hidden_link' href='#4.3.sentence-2'>.</a></div></li></ul></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5608'>#</a></div><div id='5.sentence-1' class='sentence'>If both operands have the same enumeration type <span class='texttt'>E</span>,
the operator yields the result of
converting the operands to the underlying type of <span class='texttt'>E</span>
and applying <span class='texttt'>&lt;=&gt;</span> to the converted operands<a class='hidden_link' href='#5.sentence-1'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5614'>#</a></div><div id='6.sentence-1' class='sentence'>If at least one of the operands is of pointer type,
<a href='conv.array'>array-to-pointer conversions</a>,
<a href='conv.ptr'>pointer conversions</a>,
<a href='conv.fctptr'>function pointer conversions</a>,
and
<a href='conv.qual'>qualification conversions</a>
are performed on both operands
to bring them to their <a href='expr.type#def:composite_pointer_type'>composite pointer type</a><a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>If at least one of the operands is of pointer-to-member type,
<a href='conv.mem'>pointer-to-member conversions</a>
and
<a href='conv.qual'>qualification conversions</a>
are performed on both operands
to bring them to their <a href='expr.type#def:composite_pointer_type'>composite pointer type</a><a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>If both operands are null pointer constants,
but not both of integer type,
<a href='conv.ptr'>pointer conversions</a>
are performed on both operands
to bring them to their <a href='expr.type#def:composite_pointer_type'>composite pointer type</a><a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>In all cases, after the conversions, the operands shall have the same type<a class='hidden_link' href='#6.sentence-4'>.</a></div> <div id='6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-5' class='sentence'>If both of the operands are arrays,
<a href='conv.array'>array-to-pointer conversions</a> are not applied<a class='hidden_link' href='#6.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5643'>#</a></div><div id='7.sentence-1' class='sentence'>If the composite pointer type is
a function pointer type,
a pointer-to-member type, or
<span class='texttt'>std&#x200b;::&#x200b;nullptr_&shy;t</span>,
the result is of type <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;equality</span>;
the result is
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;equality&#x200b;::&#x200b;equal</span>
if the (possibly converted) operands compare equal (<a href='expr.eq'>[expr.eq]</a>)
and
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;equality&#x200b;::&#x200b;nonequal</span>
if they compare unequal,
otherwise the result of the operator is unspecified<a class='hidden_link' href='#7.sentence-1'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5657'>#</a></div><div id='8.sentence-1' class='sentence'>If the composite pointer type is an object pointer type,
<span class='texttt'>p &lt;=&gt; q</span> is of type <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering</span><a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>If two pointer operands <span class='texttt'>p</span> and <span class='texttt'>q</span> compare equal (<a href='expr.eq'>[expr.eq]</a>),
<span class='texttt'>p &lt;=&gt; q</span> yields <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering&#x200b;::&#x200b;equal</span>;
if <span class='texttt'>p</span> and <span class='texttt'>q</span> compare unequal,
<span class='texttt'>p &lt;=&gt; q</span> yields
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering&#x200b;::&#x200b;less</span>
if <span class='texttt'>q</span> compares greater than <span class='texttt'>p</span>
and
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering&#x200b;::&#x200b;greater</span>
if <span class='texttt'>p</span> compares greater than <span class='texttt'>q</span> (<a href='expr.rel'>[expr.rel]</a>)<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>Otherwise, the result is unspecified<a class='hidden_link' href='#8.sentence-3'>.</a></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5671'>#</a></div><div id='9.sentence-1' class='sentence'>Otherwise, the program is ill-formed<a class='hidden_link' href='#9.sentence-1'>.</a></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/15715f3347aaba6b2cc03c477a17e1f6462a8074/source/expressions.tex#L5674'>#</a></div><div id='10.sentence-1' class='sentence'>The five <a href='cmp.categories#def:comparison_category_types'>comparison category types</a>
(the types
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering</span>,
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;equality</span>,
<span class='texttt'>std&#x200b;::&#x200b;weak_&shy;ordering</span>,
<span class='texttt'>std&#x200b;::&#x200b;weak_&shy;equality</span>, and
<span class='texttt'>std&#x200b;::&#x200b;partial_&shy;ordering</span>)
are not predefined;
if the header
<span class='indexparent'><a class='index' id=':<compare>'></a></span><span class='indexparent'><a class='index' id=':<compare>'></a></span><span class='texttt'>&lt;compare&gt;</span>
is not included prior to a use of such a class type –
even an implicit use in which the type is not named
(e.g., via the <a href='dcl.spec.auto'><span class='texttt'>auto</span> specifier</a>
in a defaulted <a href='class.spaceship'>three-way comparison</a>
or use of the built-in operator) – the program is ill-formed<a class='hidden_link' href='#10.sentence-1'>.</a></div></div></div></body></html>