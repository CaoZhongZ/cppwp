<!DOCTYPE html><html lang='en'><head><title>[file.streams]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>30</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>30.9</a> File-based streams <a class='abbr_ref'>[file.streams]</a></h2><div id='fstream.syn' class='section'><h3 ><a class='secnum' href='#fstream.syn' style='min-width:103pt'>30.9.1</a> Header <span class='texttt'>&lt;fstream&gt;</span> synopsis <a class='abbr_ref' href='fstream.syn'>[fstream.syn]</a></h3><span class='indexparent'><a class='index' id=':<fstream>'></a></span><span class='indexparent'><a class='index' id='lib:<fstream>'></a></span><span class='indexparent'><a class='index' id='lib:filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf<char>'></a></span><span class='indexparent'><a class='index' id='lib:wfilebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf<wchar_t>'></a></span><span class='indexparent'><a class='index' id='lib:ifstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream<char>'></a></span><span class='indexparent'><a class='index' id='lib:wifstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream<wchar_t>'></a></span><span class='indexparent'><a class='index' id='lib:ofstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream<char>'></a></span><span class='indexparent'><a class='index' id='lib:wofstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream<wchar_t>'></a></span><span class='indexparent'><a class='index' id='lib:fstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream<char>'></a></span><span class='indexparent'><a class='index' id='lib:wfstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream<wchar_t>'></a></span><pre class='codeblock'>
namespace std {
  template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
    class basic_filebuf;
  using filebuf  = basic_filebuf&lt;char&gt;;
  using wfilebuf = basic_filebuf&lt;wchar_t&gt;;

  template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
    class basic_ifstream;
  using ifstream  = basic_ifstream&lt;char&gt;;
  using wifstream = basic_ifstream&lt;wchar_t&gt;;

  template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
    class basic_ofstream;
  using ofstream  = basic_ofstream&lt;char&gt;;
  using wofstream = basic_ofstream&lt;wchar_t&gt;;

  template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
    class basic_fstream;
  using fstream  = basic_fstream&lt;char&gt;;
  using wfstream = basic_fstream&lt;wchar_t&gt;;
}</pre><div class='para' id='fstream.syn-1'><div class='marginalizedparent'><a class='marginalized' href='#fstream.syn-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8410'>#</a></div><div id='fstream.syn-1.sentence-1' class='sentence'>The header
<span class='texttt'>&lt;fstream&gt;</span>
defines four class templates and eight types
that associate stream buffers with files and assist
reading and writing files<a class='hidden_link' href='#fstream.syn-1.sentence-1'>.</a></div></div><div class='para' id='fstream.syn-2'><div class='marginalizedparent'><a class='marginalized' href='#fstream.syn-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8417'>#</a></div><div id='fstream.syn-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#fstream.syn-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='fstream.syn-2.sentence-1' class='sentence'>The class template <span class='texttt'>basic_&shy;filebuf</span> treats a file as a source or
sink of bytes<a class='hidden_link' href='#fstream.syn-2.sentence-1'>.</a></div> <div id='fstream.syn-2.sentence-2' class='sentence'>In an environment that uses a large character set, the file
typically holds multibyte character sequences and the <span class='texttt'>basic_&shy;filebuf</span>
object converts those multibyte sequences into wide character sequences<a class='hidden_link' href='#fstream.syn-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='fstream.syn-3'><div class='marginalizedparent'><a class='marginalized' href='#fstream.syn-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8424'>#</a></div><div id='fstream.syn-3.sentence-1' class='sentence'>In this subclause, member functions taking arguments of <span class='texttt'>const filesystem&#x200b;::&#x200b;path&#x200b;::&#x200b;value_&shy;type*</span>
are only be provided on systems where <span class='texttt'>filesystem&#x200b;::&#x200b;path&#x200b;::&#x200b;value_&shy;type</span> (<a href='fs.class.path'>[fs.class.path]</a>) is not <span class='texttt'>char</span><a class='hidden_link' href='#fstream.syn-3.sentence-1'>.</a></div> <div id='fstream.syn-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#fstream.syn-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='fstream.syn-3.sentence-2' class='sentence'>These functions enable class <span class='texttt'>path</span> support for systems with a wide native path character type, such as <span class='texttt'>wchar_&shy;t</span><a class='hidden_link' href='#fstream.syn-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='filebuf' class='section'><h3 ><a class='secnum' href='#filebuf' style='min-width:103pt'>30.9.2</a> Class template <span class='texttt'>basic_&shy;filebuf</span> <a class='abbr_ref' href='filebuf'>[filebuf]</a></h3><span class='indexparent'><a class='index' id='lib:basic_filebuf'></a></span><pre class='codeblock'>
namespace std {
  template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
  class basic_filebuf : public basic_streambuf&lt;charT, traits&gt; {
  public:
    using char_type   = charT;
    using int_type    = typename traits::int_type;
    using pos_type    = typename traits::pos_type;
    using off_type    = typename traits::off_type;
    using traits_type = traits;

    <span class='comment'>// <a href='filebuf.cons'>[filebuf.cons]</a>, constructors/destructor
</span>    basic_filebuf();
    basic_filebuf(const basic_filebuf&amp; rhs) = delete;
    basic_filebuf(basic_filebuf&amp;&amp; rhs);
    virtual ~basic_filebuf();

    <span class='comment'>// <a href='filebuf.assign'>[filebuf.assign]</a>, assign and swap
</span>    basic_filebuf&amp; operator=(const basic_filebuf&amp; rhs) = delete;
    basic_filebuf&amp; operator=(basic_filebuf&amp;&amp; rhs);
    void swap(basic_filebuf&amp; rhs);

    <span class='comment'>// <a href='filebuf.members'>[filebuf.members]</a>, members
</span>    bool is_open() const;
    basic_filebuf* open(const char* s, ios_base::openmode mode);
    basic_filebuf* open(const filesystem::path::value_type* s,
                        ios_base::openmode mode);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span>    basic_filebuf* open(const string&amp; s,
                        ios_base::openmode mode);
    basic_filebuf* open(const filesystem::path&amp; s,
                        ios_base::openmode mode);
    basic_filebuf* close();

  protected:
    <span class='comment'>// <a href='filebuf.virtuals'>[filebuf.virtuals]</a>, overridden virtual functions
</span>    streamsize showmanyc() override;
    int_type underflow() override;
    int_type uflow() override;
    int_type pbackfail(int_type c = traits::eof()) override;
    int_type overflow (int_type c = traits::eof()) override;

    basic_streambuf&lt;charT, traits&gt;* setbuf(char_type* s,
                                           streamsize n) override;
    pos_type seekoff(off_type off, ios_base::seekdir way,
                     ios_base::openmode which
                      = ios_base::in | ios_base::out) override;
    pos_type seekpos(pos_type sp,
                     ios_base::openmode which
                      = ios_base::in | ios_base::out) override;
    int      sync() override;
    void     imbue(const locale&amp; loc) override;
  };

  template &lt;class charT, class traits&gt;
    void swap(basic_filebuf&lt;charT, traits&gt;&amp; x,
              basic_filebuf&lt;charT, traits&gt;&amp; y);
}</pre><div class='para' id='filebuf-1'><div class='marginalizedparent'><a class='marginalized' href='#filebuf-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8493'>#</a></div><div id='filebuf-1.sentence-1' class='sentence'>The class
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;</span>
associates both the input sequence and the output
sequence with a file<a class='hidden_link' href='#filebuf-1.sentence-1'>.</a></div></div><div class='para' id='filebuf-2'><div class='marginalizedparent'><a class='marginalized' href='#filebuf-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8499'>#</a></div><div id='filebuf-2.sentence-1' class='sentence'>The restrictions on reading and writing a sequence controlled by an
object of class
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;</span>
are the same as for reading and writing with the C standard library
<span class='texttt'>FILE</span>s<a class='hidden_link' href='#filebuf-2.sentence-1'>.</a></div></div><div class='para' id='filebuf-3'><div class='marginalizedparent'><a class='marginalized' href='#filebuf-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8506'>#</a></div><div id='filebuf-3.sentence-1' class='sentence'>In particular:
<ul class='itemize'><li id='filebuf-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#filebuf-3.1'>(3.1)</a></div><div id='filebuf-3.1.sentence-1' class='sentence'>If the file is not open for reading the input sequence
cannot be read<a class='hidden_link' href='#filebuf-3.1.sentence-1'>.</a></div></li><li id='filebuf-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#filebuf-3.2'>(3.2)</a></div><div id='filebuf-3.2.sentence-1' class='sentence'>If the file is not open for writing the output
sequence cannot be written<a class='hidden_link' href='#filebuf-3.2.sentence-1'>.</a></div></li><li id='filebuf-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#filebuf-3.3'>(3.3)</a></div><div id='filebuf-3.3.sentence-1' class='sentence'>A joint file position is maintained for both the input sequence and
the output sequence<a class='hidden_link' href='#filebuf-3.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='filebuf-4'><div class='marginalizedparent'><a class='marginalized' href='#filebuf-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8520'>#</a></div><div id='filebuf-4.sentence-1' class='sentence'>An instance of
<span class='texttt'>basic_&shy;filebuf</span>
behaves as described in <a href='filebuf'>[filebuf]</a> provided
<span class='texttt'>traits&#x200b;::&#x200b;pos_&shy;type</span>
is
<span class='texttt'>fpos&lt;traits&#x200b;::&#x200b;&#x200b;state_&shy;type&gt;</span><a class='hidden_link' href='#filebuf-4.sentence-1'>.</a></div> <div id='filebuf-4.sentence-2' class='sentence'>Otherwise the behavior is undefined<a class='hidden_link' href='#filebuf-4.sentence-2'>.</a></div></div><div class='para' id='filebuf-5'><div class='marginalizedparent'><a class='marginalized' href='#filebuf-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8529'>#</a></div><div id='filebuf-5.sentence-1' class='sentence'>In order to support file I/O and multibyte/wide character conversion,
conversions are performed using members of a facet, referred to as
<span class='texttt'>a_&shy;codecvt</span> in following sections, obtained as if by</div><pre class='codeblock'>
const codecvt&lt;charT, char, typename traits::state_type&gt;&amp; a_codecvt =
  use_facet&lt;codecvt&lt;charT, char, typename traits::state_type&gt;&gt;(getloc());</pre></div><div id='filebuf.cons' class='section'><h4 ><a class='secnum' href='#filebuf.cons' style='min-width:118pt'>30.9.2.1</a> <span class='texttt'>basic_&shy;filebuf</span> constructors <a class='abbr_ref' href='filebuf.cons'>[filebuf.cons]</a></h4><span class='indexparent'><a class='index' id='lib:basic_filebuf,constructor'></a></span><code class='itemdecl'>basic_filebuf();
</code><div class='itemdescr'></div><div class='para' id='filebuf.cons-1'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.cons-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8547'>#</a></div><div id='filebuf.cons-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Constructs an object of class
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;</span>,
initializing the base class with
<span class='texttt'>basic_&shy;streambuf&lt;charT, traits&gt;()</span> (<a href='streambuf.cons'>[streambuf.cons]</a>)<a class='hidden_link' href='#filebuf.cons-1.sentence-1'>.</a></div></div></div><div class='para' id='filebuf.cons-2'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.cons-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8554'>#</a></div><div id='filebuf.cons-2.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> 
<span class='texttt'>is_&shy;open() == false</span><a class='hidden_link' href='#filebuf.cons-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_filebuf,constructor_'></a></span><code class='itemdecl'>basic_filebuf(basic_filebuf&amp;&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='filebuf.cons-3'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.cons-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8565'>#</a></div><div id='filebuf.cons-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move constructs from the rvalue <span class='texttt'>rhs</span><a class='hidden_link' href='#filebuf.cons-3.sentence-1'>.</a></div> <div id='filebuf.cons-3.sentence-2' class='sentence'>It
is <span class='indexparent'><a class='index' id=':whether_sequence_pointers_are_copied_by_basic_filebuf_move_constructor'></a></span>implementation-defined whether the sequence pointers in <span class='texttt'>*this</span>
(<span class='texttt'>eback()</span>, <span class='texttt'>gptr()</span>, <span class='texttt'>egptr()</span>,
<span class='texttt'>pbase()</span>, <span class='texttt'>pptr()</span>, <span class='texttt'>epptr()</span>) obtain
the values which <span class='texttt'>rhs</span> had<a class='hidden_link' href='#filebuf.cons-3.sentence-2'>.</a></div> <div id='filebuf.cons-3.sentence-3' class='sentence'>Whether they do or not, <span class='texttt'>*this</span>
and <span class='texttt'>rhs</span> reference separate buffers (if any at all) after the
construction<a class='hidden_link' href='#filebuf.cons-3.sentence-3'>.</a></div> <div id='filebuf.cons-3.sentence-4' class='sentence'>Additionally <span class='texttt'>*this</span> references the file
which <span class='texttt'>rhs</span> did before the construction, and
<span class='texttt'>rhs</span> references no file after the construction<a class='hidden_link' href='#filebuf.cons-3.sentence-4'>.</a></div> <div id='filebuf.cons-3.sentence-5' class='sentence'>The
openmode, locale and any other state of <span class='texttt'>rhs</span> is also
copied<a class='hidden_link' href='#filebuf.cons-3.sentence-5'>.</a></div></div></div><div class='para' id='filebuf.cons-4'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.cons-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8579'>#</a></div><div id='filebuf.cons-4.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> Let <span class='texttt'>rhs_&shy;p</span> refer to the state of
<span class='texttt'>rhs</span> just prior to this construction and let <span class='texttt'>rhs_&shy;a</span>
refer to the state of <span class='texttt'>rhs</span> just after this construction<a class='hidden_link' href='#filebuf.cons-4.sentence-1'>.</a></div><div id='filebuf.cons-4.sentence-2' class='sentence'><ul class='itemize'><li id='filebuf.cons-4.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.1'>(4.1)</a></div><div id='filebuf.cons-4.1.sentence-1' class='sentence'><span class='texttt'>is_&shy;open() == rhs_&shy;p.is_&shy;open()</span></div></li><li id='filebuf.cons-4.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.2'>(4.2)</a></div><div id='filebuf.cons-4.2.sentence-1' class='sentence'><span class='texttt'>rhs_&shy;a.is_&shy;open() == false</span></div></li><li id='filebuf.cons-4.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.3'>(4.3)</a></div><div id='filebuf.cons-4.3.sentence-1' class='sentence'><span class='texttt'>gptr() - eback() == rhs_&shy;p.gptr() - rhs_&shy;p.eback()</span></div></li><li id='filebuf.cons-4.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.4'>(4.4)</a></div><div id='filebuf.cons-4.4.sentence-1' class='sentence'><span class='texttt'>egptr() - eback() == rhs_&shy;p.egptr() - rhs_&shy;p.eback()</span></div></li><li id='filebuf.cons-4.5'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.5'>(4.5)</a></div><div id='filebuf.cons-4.5.sentence-1' class='sentence'><span class='texttt'>pptr() - pbase() == rhs_&shy;p.pptr() - rhs_&shy;p.pbase()</span></div></li><li id='filebuf.cons-4.6'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.6'>(4.6)</a></div><div id='filebuf.cons-4.6.sentence-1' class='sentence'><span class='texttt'>epptr() - pbase() == rhs_&shy;p.epptr() - rhs_&shy;p.pbase()</span></div></li><li id='filebuf.cons-4.7'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.7'>(4.7)</a></div><div id='filebuf.cons-4.7.sentence-1' class='sentence'><span class='texttt'>if (eback()) eback() != rhs_&shy;a.eback()</span></div></li><li id='filebuf.cons-4.8'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.8'>(4.8)</a></div><div id='filebuf.cons-4.8.sentence-1' class='sentence'><span class='texttt'>if (gptr()) gptr() != rhs_&shy;a.gptr()</span></div></li><li id='filebuf.cons-4.9'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.9'>(4.9)</a></div><div id='filebuf.cons-4.9.sentence-1' class='sentence'><span class='texttt'>if (egptr()) egptr() != rhs_&shy;a.egptr()</span></div></li><li id='filebuf.cons-4.10'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.10'>(4.10)</a></div><div id='filebuf.cons-4.10.sentence-1' class='sentence'><span class='texttt'>if (pbase()) pbase() != rhs_&shy;a.pbase()</span></div></li><li id='filebuf.cons-4.11'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.11'>(4.11)</a></div><div id='filebuf.cons-4.11.sentence-1' class='sentence'><span class='texttt'>if (pptr()) pptr() != rhs_&shy;a.pptr()</span></div></li><li id='filebuf.cons-4.12'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.cons-4.12'>(4.12)</a></div><div id='filebuf.cons-4.12.sentence-1' class='sentence'><span class='texttt'>if (epptr()) epptr() != rhs_&shy;a.epptr()</span></div></li></ul></div></div></div><span class='indexparent'><a class='index' id='lib:basic_filebuf,destructor'></a></span><code class='itemdecl'>virtual ~basic_filebuf();
</code><div class='itemdescr'></div><div class='para' id='filebuf.cons-5'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.cons-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8606'>#</a></div><div id='filebuf.cons-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Destroys an object of class
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;</span><a class='hidden_link' href='#filebuf.cons-5.sentence-1'>.</a></div> <div id='filebuf.cons-5.sentence-2' class='sentence'>Calls
<span class='texttt'>close()</span><a class='hidden_link' href='#filebuf.cons-5.sentence-2'>.</a></div> <div id='filebuf.cons-5.sentence-3' class='sentence'>If an exception occurs during the destruction of the object, including the call to <span class='texttt'>close()</span>, the exception is caught but not rethrown (see <a href='res.on.exception.handling'>[res.on.exception.handling]</a>)<a class='hidden_link' href='#filebuf.cons-5.sentence-3'>.</a></div></div></div></div><div id='filebuf.assign' class='section'><h4 ><a class='secnum' href='#filebuf.assign' style='min-width:118pt'>30.9.2.2</a> Assign and swap <a class='abbr_ref' href='filebuf.assign'>[filebuf.assign]</a></h4><span class='indexparent'><a class='index' id='lib:operator=,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,operator='></a></span><code class='itemdecl'>basic_filebuf&amp; operator=(basic_filebuf&amp;&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='filebuf.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8623'>#</a></div><div id='filebuf.assign-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Calls <span class='texttt'>close()</span> then move assigns from <span class='texttt'>rhs</span><a class='hidden_link' href='#filebuf.assign-1.sentence-1'>.</a></div> <div id='filebuf.assign-1.sentence-2' class='sentence'>After the
move assignment <span class='texttt'>*this</span> has the observable state it would have had if it
had been move constructed from <span class='texttt'>rhs</span> (see <a href='filebuf.cons'>[filebuf.cons]</a>)<a class='hidden_link' href='#filebuf.assign-1.sentence-2'>.</a></div></div></div><div class='para' id='filebuf.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8628'>#</a></div><div id='filebuf.assign-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#filebuf.assign-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,swap'></a></span><code class='itemdecl'>void swap(basic_filebuf&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='filebuf.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8638'>#</a></div><div id='filebuf.assign-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Exchanges the state of <span class='texttt'>*this</span>
and <span class='texttt'>rhs</span><a class='hidden_link' href='#filebuf.assign-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_filebuf_'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,swap_'></a></span><code class='itemdecl'>template &lt;class charT, class traits&gt;
  void swap(basic_filebuf&lt;charT, traits&gt;&amp; x,
            basic_filebuf&lt;charT, traits&gt;&amp; y);
</code><div class='itemdescr'></div><div class='para' id='filebuf.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8651'>#</a></div><div id='filebuf.assign-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> As if by <span class='texttt'>x.swap(y)</span><a class='hidden_link' href='#filebuf.assign-4.sentence-1'>.</a></div></div></div></div><div id='filebuf.members' class='section'><h4 ><a class='secnum' href='#filebuf.members' style='min-width:118pt'>30.9.2.3</a> Member functions <a class='abbr_ref' href='filebuf.members'>[filebuf.members]</a></h4><span class='indexparent'><a class='index' id='lib:is_open,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,is_open'></a></span><code class='itemdecl'>bool is_open() const;
</code><div class='itemdescr'></div><div class='para' id='filebuf.members-1'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.members-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8663'>#</a></div><div id='filebuf.members-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>true</span>
if a previous call to
<span class='texttt'>open</span>
succeeded (returned a non-null value) and there has been no intervening
call to close<a class='hidden_link' href='#filebuf.members-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:open,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,open'></a></span><code class='itemdecl'>basic_filebuf* open(const char* s, ios_base::openmode mode);
basic_filebuf* open(const filesystem::path::value_type* s,
                    ios_base::openmode mode);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span></code><div class='itemdescr'></div><div class='para' id='filebuf.members-2'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.members-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8680'>#</a></div><div id='filebuf.members-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If
<span class='texttt'>is_&shy;open() != false</span>,
returns a null pointer<a class='hidden_link' href='#filebuf.members-2.sentence-1'>.</a></div> <div id='filebuf.members-2.sentence-2' class='sentence'>Otherwise,
initializes the
<span class='texttt'>filebuf</span>
as required<a class='hidden_link' href='#filebuf.members-2.sentence-2'>.</a></div> <div id='filebuf.members-2.sentence-3' class='sentence'>It then opens a file, if possible, whose name is the
<span class='textsc'>ntbs</span> <span class='texttt'>s</span>
(as if by calling
<span class='texttt'>fopen(s, modstr)</span>)<a class='hidden_link' href='#filebuf.members-2.sentence-3'>.</a></div> <div id='filebuf.members-2.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':NTBS'></a></span><span class='indexparent'><a class='index' id='lib:fopen_'></a></span>The <span class='textsc'>ntbs</span> <span class='texttt'>modstr</span> is determined from
<span class='texttt'>mode &amp; ~ios_&shy;base&#x200b;::&#x200b;ate</span>
as indicated in Table <a href='#tab:iostreams.file.open.modes'>117</a><a class='hidden_link' href='#filebuf.members-2.sentence-4'>.</a></div> <div id='filebuf.members-2.sentence-5' class='sentence'>If <span class='texttt'>mode</span> is not some combination of flags shown in the table then
the open fails<a class='hidden_link' href='#filebuf.members-2.sentence-5'>.</a></div><div class='numberedTable' id='tab:iostreams.file.open.modes'>Table <a href='#tab:iostreams.file.open.modes'>117</a> — File open modes<br><table ><tr class='rowsep'><td colspan='5' class='center'><div id='filebuf.members-2.sentence-6' class='sentence'><span class='texttt'>ios_&shy;base</span> flag combination</div></td><td class='left'><div id='filebuf.members-2.sentence-7' class='sentence'><span class='texttt'>stdio</span> equivalent</div></td></tr><tr ><td class='center'><div id='filebuf.members-2.sentence-8' class='sentence'><span class='texttt'>binary</span></div></td><td class='center'><div id='filebuf.members-2.sentence-9' class='sentence'><span class='texttt'>in</span></div></td><td class='center'><div id='filebuf.members-2.sentence-10' class='sentence'><span class='texttt'>out</span></div></td><td class='center'><div id='filebuf.members-2.sentence-11' class='sentence'><span class='texttt'>trunc</span></div></td><td class='center'><div id='filebuf.members-2.sentence-12' class='sentence'><span class='texttt'>app</span></div></td><td class='left'></td></tr><tr class='capsep'><td class='center'></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-13' class='sentence'>+</div></td><td class='center'></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-14' class='sentence'><span class='texttt'>"w"</span></div></td></tr><tr class='rowsep'><td class='center'></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-15' class='sentence'>+</div></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-16' class='sentence'>+</div></td><td class='left'><div id='filebuf.members-2.sentence-17' class='sentence'><span class='texttt'>"a"</span></div></td></tr><tr class='rowsep'><td class='center'></td><td class='center'></td><td class='center'></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-18' class='sentence'>+</div></td><td class='left'><div id='filebuf.members-2.sentence-19' class='sentence'><span class='texttt'>"a"</span></div></td></tr><tr class='rowsep'><td class='center'></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-20' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-21' class='sentence'>+</div></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-22' class='sentence'><span class='texttt'>"w"</span></div></td></tr><tr class='rowsep'><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-23' class='sentence'>+</div></td><td class='center'></td><td class='center'></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-24' class='sentence'><span class='texttt'>"r"</span></div></td></tr><tr class='rowsep'><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-25' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-26' class='sentence'>+</div></td><td class='center'></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-27' class='sentence'><span class='texttt'>"r+"</span></div></td></tr><tr class='rowsep'><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-28' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-29' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-30' class='sentence'>+</div></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-31' class='sentence'><span class='texttt'>"w+"</span></div></td></tr><tr class='rowsep'><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-32' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-33' class='sentence'>+</div></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-34' class='sentence'>+</div></td><td class='left'><div id='filebuf.members-2.sentence-35' class='sentence'><span class='texttt'>"a+"</span></div></td></tr><tr class='rowsep'><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-36' class='sentence'>+</div></td><td class='center'></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-37' class='sentence'>+</div></td><td class='left'><div id='filebuf.members-2.sentence-38' class='sentence'><span class='texttt'>"a+"</span></div></td></tr><tr class='capsep'><td class='center'><div id='filebuf.members-2.sentence-39' class='sentence'>+</div></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-40' class='sentence'>+</div></td><td class='center'></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-41' class='sentence'><span class='texttt'>"wb"</span></div></td></tr><tr class='rowsep'><td class='center'><div id='filebuf.members-2.sentence-42' class='sentence'>+</div></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-43' class='sentence'>+</div></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-44' class='sentence'>+</div></td><td class='left'><div id='filebuf.members-2.sentence-45' class='sentence'><span class='texttt'>"ab"</span></div></td></tr><tr class='rowsep'><td class='center'><div id='filebuf.members-2.sentence-46' class='sentence'>+</div></td><td class='center'></td><td class='center'></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-47' class='sentence'>+</div></td><td class='left'><div id='filebuf.members-2.sentence-48' class='sentence'><span class='texttt'>"ab"</span></div></td></tr><tr class='rowsep'><td class='center'><div id='filebuf.members-2.sentence-49' class='sentence'>+</div></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-50' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-51' class='sentence'>+</div></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-52' class='sentence'><span class='texttt'>"wb"</span></div></td></tr><tr class='rowsep'><td class='center'><div id='filebuf.members-2.sentence-53' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-54' class='sentence'>+</div></td><td class='center'></td><td class='center'></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-55' class='sentence'><span class='texttt'>"rb"</span></div></td></tr><tr class='rowsep'><td class='center'><div id='filebuf.members-2.sentence-56' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-57' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-58' class='sentence'>+</div></td><td class='center'></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-59' class='sentence'><span class='texttt'>"r+b"</span></div></td></tr><tr class='rowsep'><td class='center'><div id='filebuf.members-2.sentence-60' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-61' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-62' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-63' class='sentence'>+</div></td><td class='center'></td><td class='left'><div id='filebuf.members-2.sentence-64' class='sentence'><span class='texttt'>"w+b"</span></div></td></tr><tr class='rowsep'><td class='center'><div id='filebuf.members-2.sentence-65' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-66' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-67' class='sentence'>+</div></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-68' class='sentence'>+</div></td><td class='left'><div id='filebuf.members-2.sentence-69' class='sentence'><span class='texttt'>"a+b"</span></div></td></tr><tr class='rowsep'><td class='center'><div id='filebuf.members-2.sentence-70' class='sentence'>+</div></td><td class='center'><div id='filebuf.members-2.sentence-71' class='sentence'>+</div></td><td class='center'></td><td class='center'></td><td class='center'><div id='filebuf.members-2.sentence-72' class='sentence'>+</div></td><td class='left'><div id='filebuf.members-2.sentence-73' class='sentence'><span class='texttt'>"a+b"</span></div></td></tr></table></div></div></div><div class='para' id='filebuf.members-3'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.members-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8726'>#</a></div><div id='filebuf.members-3.sentence-1' class='sentence'>If the open operation succeeds and
<span class='texttt'>(mode &amp; ios_&shy;base&#x200b;::&#x200b;ate) != 0</span>,
positions the file to the end
(as if by calling
<span class='texttt'>fseek(file, 0, SEEK_&shy;END)</span>)<a class='hidden_link' href='#filebuf.members-3.sentence-1'>.</a><a class='footnotenum' href='#footnote-328'>328</a></div></div></div><div class='para' id='filebuf.members-4'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.members-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8744'>#</a></div><div id='filebuf.members-4.sentence-1' class='sentence'>If the repositioning operation fails, calls
<span class='texttt'>close()</span>
and returns a null pointer to indicate failure<a class='hidden_link' href='#filebuf.members-4.sentence-1'>.</a></div></div></div><div class='para' id='filebuf.members-5'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.members-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8749'>#</a></div><div id='filebuf.members-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>this</span>
if successful, a null pointer otherwise<a class='hidden_link' href='#filebuf.members-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:open,basic_filebuf_'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,open_'></a></span><code class='itemdecl'>basic_filebuf* open(const string&amp; s, ios_base::openmode mode);
basic_filebuf* open(const filesystem::path&amp; s, ios_base::openmode mode);
</code><div class='itemdescr'></div><div class='para' id='filebuf.members-6'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.members-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8762'>#</a></div><div id='filebuf.members-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>open(s.c_&shy;str(), mode);</span></div></div></div><span class='indexparent'><a class='index' id='lib:close,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,close'></a></span><code class='itemdecl'>basic_filebuf* close();
</code><div class='itemdescr'></div><div class='para' id='filebuf.members-7'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.members-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8773'>#</a></div><div id='filebuf.members-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If
<span class='texttt'>is_&shy;open() == false</span>,
returns a null pointer<a class='hidden_link' href='#filebuf.members-7.sentence-1'>.</a></div> <div id='filebuf.members-7.sentence-2' class='sentence'>If a put area exists, calls
<span class='texttt'>overflow(traits&#x200b;::&#x200b;&#x200b;eof())</span>
to flush characters<a class='hidden_link' href='#filebuf.members-7.sentence-2'>.</a></div> <div id='filebuf.members-7.sentence-3' class='sentence'>If the last virtual member function called on
<span class='texttt'>*this</span>
(between
<span class='texttt'>underflow</span>,
<span class='texttt'>overflow</span>,
<span class='texttt'>seekoff</span>,
and
<span class='texttt'>seekpos</span>)
was
<span class='texttt'>overflow</span>
then calls
<span class='texttt'>a_&shy;codecvt.unshift</span>
(possibly several times) to determine a termination sequence, inserts those
characters and calls
<span class='texttt'>overflow(traits&#x200b;::&#x200b;&#x200b;eof())</span>
again<a class='hidden_link' href='#filebuf.members-7.sentence-3'>.</a></div> <div id='filebuf.members-7.sentence-4' class='sentence'>Finally, regardless of whether any of the preceding calls fails or throws an
exception, the function closes the file
(as if by calling
<span class='indexparent'><a class='index' id='lib:fclose'></a></span><span class='texttt'>fclose(file)</span>)<a class='hidden_link' href='#filebuf.members-7.sentence-4'>.</a></div> <div id='filebuf.members-7.sentence-5' class='sentence'>If any of the calls made by the function, including <span class='texttt'>fclose</span>, fails,
<span class='texttt'>close</span> fails by returning a null pointer<a class='hidden_link' href='#filebuf.members-7.sentence-5'>.</a></div> <div id='filebuf.members-7.sentence-6' class='sentence'>If one of these calls throws an
exception, the exception is caught and rethrown after closing the file<a class='hidden_link' href='#filebuf.members-7.sentence-6'>.</a></div></div></div><div class='para' id='filebuf.members-8'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.members-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8806'>#</a></div><div id='filebuf.members-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>this</span>
on success, a null pointer otherwise<a class='hidden_link' href='#filebuf.members-8.sentence-1'>.</a></div></div></div><div class='para' id='filebuf.members-9'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.members-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8811'>#</a></div><div id='filebuf.members-9.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> 
<span class='texttt'>is_&shy;open() == false</span><a class='hidden_link' href='#filebuf.members-9.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-328'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-328'>328)</a></div><div id='footnote-328.sentence-1' class='sentence'>The macro
<span class='texttt'>SEEK_&shy;END</span>
is defined, and the function signatures
<span class='indexparent'><a class='index' id='lib:fopen'></a></span><span class='texttt'>fopen(const char*, const char*)</span>
and
<span class='texttt'>fseek(FILE*, long, int)</span>
<span class='indexparent'><a class='index' id='lib:fseek'></a></span>are declared, in
<span class='indexparent'><a class='index' id=':<cstdio>'></a></span><span class='indexparent'><a class='index' id='lib:<cstdio>'></a></span><a href='cstdio.syn'><span class='texttt'>&lt;cstdio&gt;</span></a><a class='hidden_link' href='#footnote-328.sentence-1'>.</a></div></div></div><div id='filebuf.virtuals' class='section'><h4 ><a class='secnum' href='#filebuf.virtuals' style='min-width:118pt'>30.9.2.4</a> Overridden virtual functions <a class='abbr_ref' href='filebuf.virtuals'>[filebuf.virtuals]</a></h4><span class='indexparent'><a class='index' id='lib:showmanyc,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,showmanyc'></a></span><code class='itemdecl'>streamsize showmanyc() override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8824'>#</a></div><div id='filebuf.virtuals-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Behaves the same as
<span class='texttt'>basic_&shy;streambuf&#x200b;::&#x200b;showmanyc()</span> (<a href='streambuf.virtuals'>[streambuf.virtuals]</a>)<a class='hidden_link' href='#filebuf.virtuals-1.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id='lib:showmanyc,basic_streambuf'></a></span></div></div><div class='para' id='filebuf.virtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8830'>#</a></div><div id='filebuf.virtuals-2.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
An
implementation might well provide an overriding definition for this function
signature if it can determine that more characters can be read from the input
sequence<a class='hidden_link' href='#filebuf.virtuals-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:underflow,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,underflow'></a></span><code class='itemdecl'>int_type underflow() override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8844'>#</a></div><div id='filebuf.virtuals-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Behaves according to the description of
<span class='texttt'>basic_&shy;streambuf&lt;charT, traits&gt;&#x200b;::&#x200b;underflow()</span>,
with the specialization that a sequence of characters is read from the input
sequence as if by reading from the associated file
into an internal buffer (<span class='texttt'>extern_&shy;buf</span>)
and then as if by doing:</div><pre class='codeblock'>
char   extern_buf[XSIZE];
char*  extern_end;
charT  intern_buf[ISIZE];
charT* intern_end;
codecvt_base::result r =
  a_codecvt.in(state, extern_buf, extern_buf+XSIZE, extern_end,
               intern_buf, intern_buf+ISIZE, intern_end);</pre><div id='filebuf.virtuals-3.sentence-2' class='sentence'>This shall be done in such a way that the class can recover the
position
(<span class='texttt'>fpos_&shy;t</span>)
corresponding to each character between
<span class='texttt'>intern_&shy;buf</span>
and
<span class='texttt'>intern_&shy;end</span><a class='hidden_link' href='#filebuf.virtuals-3.sentence-2'>.</a></div> <div id='filebuf.virtuals-3.sentence-3' class='sentence'>If the value of
<span class='texttt'>r</span>
indicates that
<span class='texttt'>a_&shy;codecvt.in()</span>
ran out of space in
<span class='texttt'>intern_&shy;buf</span>,
retry with a larger
<span class='texttt'>intern_&shy;buf</span><a class='hidden_link' href='#filebuf.virtuals-3.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:uflow,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,uflow'></a></span><code class='itemdecl'>int_type uflow() override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-4'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8886'>#</a></div><div id='filebuf.virtuals-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Behaves according to the description of
<span class='texttt'>basic_&shy;streambuf&lt;charT, traits&gt;&#x200b;::&#x200b;uflow()</span>,
with the specialization that a sequence of characters is read from the input
with the same method as used by
<span class='texttt'>underflow</span><a class='hidden_link' href='#filebuf.virtuals-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:pbackfail,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,pbackfail'></a></span><code class='itemdecl'>int_type pbackfail(int_type c = traits::eof()) override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-5'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8901'>#</a></div><div id='filebuf.virtuals-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Puts back the character designated by <span class='texttt'>c</span> to the input
sequence, if possible, in one of three ways:
<ul class='itemize'><li id='filebuf.virtuals-5.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.virtuals-5.1'>(5.1)</a></div><div id='filebuf.virtuals-5.1.sentence-1' class='sentence'>If
<span class='texttt'>traits&#x200b;::&#x200b;eq_&shy;int_&shy;type(c, traits&#x200b;::&#x200b;eof())</span>
returns
<span class='texttt'>false</span>
and
if the function makes a putback position available
and if
<span class='texttt'>traits&#x200b;::&#x200b;eq(to_&shy;char_&shy;type(c), gptr()[-1])</span>
returns
<span class='texttt'>true</span>,
decrements the next pointer for the input sequence,
<span class='texttt'>gptr()</span><a class='hidden_link' href='#filebuf.virtuals-5.1.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='filebuf.virtuals-5.1.sentence-2' class='sentence'>Returns:
<span class='texttt'>c</span><a class='hidden_link' href='#filebuf.virtuals-5.1.sentence-2'>.</a></div></li><li id='filebuf.virtuals-5.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.virtuals-5.2'>(5.2)</a></div><div id='filebuf.virtuals-5.2.sentence-1' class='sentence'>If
<span class='texttt'>traits&#x200b;::&#x200b;eq_&shy;int_&shy;type(c, traits&#x200b;::&#x200b;eof())</span>
returns
<span class='texttt'>false</span>
and
if the function makes a putback position available
and if the function is permitted to assign to the putback position,
decrements the next pointer for the input sequence,
and stores <span class='texttt'>c</span> there<a class='hidden_link' href='#filebuf.virtuals-5.2.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='filebuf.virtuals-5.2.sentence-2' class='sentence'>Returns:
<span class='texttt'>c</span><a class='hidden_link' href='#filebuf.virtuals-5.2.sentence-2'>.</a></div></li><li id='filebuf.virtuals-5.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.virtuals-5.3'>(5.3)</a></div><div id='filebuf.virtuals-5.3.sentence-1' class='sentence'>If
<span class='texttt'>traits&#x200b;::&#x200b;eq_&shy;int_&shy;type(c, traits&#x200b;::&#x200b;eof())</span>
returns
<span class='texttt'>true</span>,
and if either the input sequence has a putback position available or
the function makes a putback position available,
decrements the next pointer for the input sequence,
<span class='texttt'>gptr()</span><a class='hidden_link' href='#filebuf.virtuals-5.3.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='filebuf.virtuals-5.3.sentence-2' class='sentence'>Returns:
<span class='texttt'>traits&#x200b;::&#x200b;not_&shy;eof(c)</span><a class='hidden_link' href='#filebuf.virtuals-5.3.sentence-2'>.</a></div></li></ul></div></div></div><div class='para' id='filebuf.virtuals-6'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8951'>#</a></div><div id='filebuf.virtuals-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
As specified above, or
<span class='texttt'>traits&#x200b;::&#x200b;eof()</span>
to indicate failure<a class='hidden_link' href='#filebuf.virtuals-6.sentence-1'>.</a></div></div></div><div class='para' id='filebuf.virtuals-7'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8957'>#</a></div><div id='filebuf.virtuals-7.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
If
<span class='texttt'>is_&shy;open() == false</span>,
the function always fails<a class='hidden_link' href='#filebuf.virtuals-7.sentence-1'>.</a></div></div></div><div class='para' id='filebuf.virtuals-8'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8963'>#</a></div><div id='filebuf.virtuals-8.sentence-1' class='sentence'>The function does not put back a character directly to the input sequence<a class='hidden_link' href='#filebuf.virtuals-8.sentence-1'>.</a></div></div></div><div class='para' id='filebuf.virtuals-9'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8966'>#</a></div><div id='filebuf.virtuals-9.sentence-1' class='sentence'>If the function can succeed in more than one of these ways, it is
unspecified which way is chosen<a class='hidden_link' href='#filebuf.virtuals-9.sentence-1'>.</a></div> <div id='filebuf.virtuals-9.sentence-2' class='sentence'>The function can alter the number of putback positions available as a result of any call<a class='hidden_link' href='#filebuf.virtuals-9.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:overflow,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,overflow'></a></span><code class='itemdecl'>int_type overflow(int_type c = traits::eof()) override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-10'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L8978'>#</a></div><div id='filebuf.virtuals-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Behaves according to the description of
<span class='texttt'>basic_&shy;streambuf&lt;charT, traits&gt;&#x200b;::&#x200b;overflow(c)</span>,
except that the behavior of “consuming characters” is performed by first
converting as if by:</div><pre class='codeblock'>
charT* b = pbase();
charT* p = pptr();
charT* end;
char   xbuf[XSIZE];
char*  xbuf_end;
codecvt_base::result r =
  a_codecvt.out(state, b, p, end, xbuf, xbuf+XSIZE, xbuf_end);</pre><div id='filebuf.virtuals-10.sentence-2' class='sentence'>and then
<ul class='itemize'><li id='filebuf.virtuals-10.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.virtuals-10.1'>(10.1)</a></div><div id='filebuf.virtuals-10.1.sentence-1' class='sentence'>If <span class='texttt'>r == codecvt_&shy;base&#x200b;::&#x200b;error</span> then fail<a class='hidden_link' href='#filebuf.virtuals-10.1.sentence-1'>.</a></div></li><li id='filebuf.virtuals-10.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.virtuals-10.2'>(10.2)</a></div><div id='filebuf.virtuals-10.2.sentence-1' class='sentence'>If <span class='texttt'>r == codecvt_&shy;base&#x200b;::&#x200b;noconv</span> then output characters from
<span class='texttt'>b</span> up to (and not including) <span class='texttt'>p</span><a class='hidden_link' href='#filebuf.virtuals-10.2.sentence-1'>.</a></div></li><li id='filebuf.virtuals-10.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.virtuals-10.3'>(10.3)</a></div><div id='filebuf.virtuals-10.3.sentence-1' class='sentence'>If <span class='texttt'>r == codecvt_&shy;base&#x200b;::&#x200b;partial</span> then output to the file characters from
<span class='texttt'>xbuf</span> up to <span class='texttt'>xbuf_&shy;end</span>, and repeat using characters from
<span class='texttt'>end</span> to <span class='texttt'>p</span><a class='hidden_link' href='#filebuf.virtuals-10.3.sentence-1'>.</a></div> <div id='filebuf.virtuals-10.3.sentence-2' class='sentence'>If output fails, fail (without repeating)<a class='hidden_link' href='#filebuf.virtuals-10.3.sentence-2'>.</a></div></li><li id='filebuf.virtuals-10.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#filebuf.virtuals-10.4'>(10.4)</a></div><div id='filebuf.virtuals-10.4.sentence-1' class='sentence'>Otherwise output from <span class='texttt'>xbuf</span> to <span class='texttt'>xbuf_&shy;end</span>, and fail if output fails<a class='hidden_link' href='#filebuf.virtuals-10.4.sentence-1'>.</a></div> <div id='filebuf.virtuals-10.4.sentence-2' class='sentence'>At this point if <span class='texttt'>b != p</span> and <span class='texttt'>b == end</span> (<span class='texttt'>xbuf</span> isn't large
enough) then increase <span class='texttt'>XSIZE</span> and repeat from the beginning<a class='hidden_link' href='#filebuf.virtuals-10.4.sentence-2'>.</a></div></li></ul></div></div></div><div class='para' id='filebuf.virtuals-11'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9008'>#</a></div><div id='filebuf.virtuals-11.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>traits&#x200b;::&#x200b;not_&shy;eof(c)</span>
to indicate success, and
<span class='texttt'>traits&#x200b;::&#x200b;eof()</span>
to indicate failure<a class='hidden_link' href='#filebuf.virtuals-11.sentence-1'>.</a></div> <div id='filebuf.virtuals-11.sentence-2' class='sentence'>If
<span class='texttt'>is_&shy;open() == false</span>,
the function always fails<a class='hidden_link' href='#filebuf.virtuals-11.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:setbuf,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,setbuf'></a></span><code class='itemdecl'>basic_streambuf* setbuf(char_type* s, streamsize n) override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-12'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9025'>#</a></div><div id='filebuf.virtuals-12.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If
<span class='texttt'>setbuf(0, 0)</span>
is called on a stream before any I/O has occurred on that stream, the
stream becomes unbuffered<a class='hidden_link' href='#filebuf.virtuals-12.sentence-1'>.</a></div> <div id='filebuf.virtuals-12.sentence-2' class='sentence'>Otherwise the results are <span class='indexparent'><a class='index' id=':effect_of_calling_basic_filebuf::setbuf_with_nonzero_arguments'></a></span>implementation-defined<a class='hidden_link' href='#filebuf.virtuals-12.sentence-2'>.</a></div> <div id='filebuf.virtuals-12.sentence-3' class='sentence'>“Unbuffered” means that
<span class='texttt'>pbase()</span>
and
<span class='texttt'>pptr()</span>
always return null
and output to the file should appear as soon as possible<a class='hidden_link' href='#filebuf.virtuals-12.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:seekoff,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,seekoff'></a></span><code class='itemdecl'>pos_type seekoff(off_type off, ios_base::seekdir way,
                 ios_base::openmode which
                   = ios_base::in | ios_base::out) override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-13'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9049'>#</a></div><div id='filebuf.virtuals-13.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Let
<span class='texttt'>width</span>
denote
<span class='texttt'>a_&shy;codecvt.encoding()</span><a class='hidden_link' href='#filebuf.virtuals-13.sentence-1'>.</a></div> <div id='filebuf.virtuals-13.sentence-2' class='sentence'>If
<span class='texttt'>is_&shy;open() == false</span>,
or
<span class='texttt'>off != 0 &amp;&amp; width &lt;= 0</span>,
then the positioning operation fails<a class='hidden_link' href='#filebuf.virtuals-13.sentence-2'>.</a></div> <div id='filebuf.virtuals-13.sentence-3' class='sentence'>Otherwise, if
<span class='texttt'>way != basic_&shy;ios&#x200b;::&#x200b;cur</span>
or
<span class='texttt'>off != 0</span>,
and if the last operation was output,
then update the output sequence and write any unshift sequence<a class='hidden_link' href='#filebuf.virtuals-13.sentence-3'>.</a></div> <div id='filebuf.virtuals-13.sentence-4' class='sentence'>Next, seek to the new position: if
<span class='texttt'>width &gt; 0</span>,
call
<span class='texttt'>fseek(file, width * off, whence)</span>,
otherwise call
<span class='texttt'>fseek(file, 0, whence)</span><a class='hidden_link' href='#filebuf.virtuals-13.sentence-4'>.</a></div></div></div><div class='para' id='filebuf.virtuals-14'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9073'>#</a></div><div id='filebuf.virtuals-14.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
“The last operation was output” means either
the last virtual operation was overflow or
the put buffer is non-empty<a class='hidden_link' href='#filebuf.virtuals-14.sentence-1'>.</a></div> <div id='filebuf.virtuals-14.sentence-2' class='sentence'>“Write any unshift sequence” means,
if
<span class='texttt'>width</span>
if less than zero then call
<span class='texttt'>a_&shy;codecvt.unshift(state, xbuf, xbuf+XSIZE, xbuf_&shy;end)</span>
and output the resulting unshift sequence<a class='hidden_link' href='#filebuf.virtuals-14.sentence-2'>.</a></div> <div id='filebuf.virtuals-14.sentence-3' class='sentence'>The function determines one of three values for the
argument <span class='texttt'>whence</span>, of type
<span class='texttt'>int</span>,
as indicated in Table <a href='#tab:iostreams.seekoff.effects'>118</a><a class='hidden_link' href='#filebuf.virtuals-14.sentence-3'>.</a></div><div class='numberedTable' id='tab:iostreams.seekoff.effects'>Table <a href='#tab:iostreams.seekoff.effects'>118</a> — <span class='texttt'>seekoff</span> effects<br><table ><tr class='rowsep'><td colspan='1' class='center'><div id='filebuf.virtuals-14.sentence-4' class='sentence'><b><span class='texttt'>way</span> Value</b></div></td><td colspan='1' class='center'><div id='filebuf.virtuals-14.sentence-5' class='sentence'><b><span class='texttt'>stdio</span> Equivalent</b></div></td></tr><tr class='capsep'><td class='left'><div id='filebuf.virtuals-14.sentence-6' class='sentence'><span class='texttt'>basic_&shy;ios&#x200b;::&#x200b;beg</span></div></td><td class='left'><div id='filebuf.virtuals-14.sentence-7' class='sentence'><span class='texttt'>SEEK_&shy;SET</span></div></td></tr><tr ><td class='left'><div id='filebuf.virtuals-14.sentence-8' class='sentence'><span class='texttt'>basic_&shy;ios&#x200b;::&#x200b;cur</span></div></td><td class='left'><div id='filebuf.virtuals-14.sentence-9' class='sentence'><span class='texttt'>SEEK_&shy;CUR</span></div></td></tr><tr ><td class='left'><div id='filebuf.virtuals-14.sentence-10' class='sentence'><span class='texttt'>basic_&shy;ios&#x200b;::&#x200b;end</span></div></td><td class='left'><div id='filebuf.virtuals-14.sentence-11' class='sentence'><span class='texttt'>SEEK_&shy;END</span></div></td></tr></table></div></div></div><div class='para' id='filebuf.virtuals-15'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9096'>#</a></div><div id='filebuf.virtuals-15.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
A newly constructed
<span class='texttt'>pos_&shy;type</span>
object that stores the resultant
stream position, if possible<a class='hidden_link' href='#filebuf.virtuals-15.sentence-1'>.</a></div> <div id='filebuf.virtuals-15.sentence-2' class='sentence'>If the positioning operation fails, or
if the object cannot represent the resultant stream position,
returns
<span class='texttt'>pos_&shy;type(off_&shy;type(-1))</span><a class='hidden_link' href='#filebuf.virtuals-15.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:seekpos,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,seekpos'></a></span><code class='itemdecl'>pos_type seekpos(pos_type sp,
                 ios_base::openmode which
                   = ios_base::in | ios_base::out) override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-16'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9116'>#</a></div><div id='filebuf.virtuals-16.sentence-1' class='sentence'>Alters the file position, if possible, to correspond to the position
stored in <span class='texttt'>sp</span> (as described below)<a class='hidden_link' href='#filebuf.virtuals-16.sentence-1'>.</a></div> <div id='filebuf.virtuals-16.sentence-2' class='sentence'>Altering the file position performs as follows:
<ol class='enumerate'><li id='filebuf.virtuals-16.1'><a class='enumerated_item_num' href='#filebuf.virtuals-16.1'>1.</a><div id='filebuf.virtuals-16.1.sentence-1' class='sentence'>if
<span class='texttt'>(om &amp; ios_&shy;base&#x200b;::&#x200b;out) != 0</span>,
then update the output sequence and
write any unshift sequence;</div></li><li id='filebuf.virtuals-16.2'><a class='enumerated_item_num' href='#filebuf.virtuals-16.2'>2.</a><div id='filebuf.virtuals-16.2.sentence-1' class='sentence'>set the file position to <span class='texttt'>sp</span> as if by a call to <span class='texttt'>fsetpos</span>;</div></li><li id='filebuf.virtuals-16.3'><a class='enumerated_item_num' href='#filebuf.virtuals-16.3'>3.</a><div id='filebuf.virtuals-16.3.sentence-1' class='sentence'>if
<span class='texttt'>(om &amp; ios_&shy;base&#x200b;::&#x200b;in) != 0</span>,
then update the input sequence;</div></li></ol>
where <span class='texttt'>om</span> is the open mode passed to the last call to
<span class='texttt'>open()</span><a class='hidden_link' href='#filebuf.virtuals-16.sentence-2'>.</a></div> <div id='filebuf.virtuals-16.sentence-3' class='sentence'>The operation fails if
<span class='texttt'>is_&shy;open()</span>
returns <span class='texttt'>false</span><a class='hidden_link' href='#filebuf.virtuals-16.sentence-3'>.</a></div></div></div><div class='para' id='filebuf.virtuals-17'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9139'>#</a></div><div id='filebuf.virtuals-17.sentence-1' class='sentence'>If <span class='texttt'>sp</span> is an invalid stream position, or if the function positions
neither sequence, the positioning operation fails<a class='hidden_link' href='#filebuf.virtuals-17.sentence-1'>.</a></div> <div id='filebuf.virtuals-17.sentence-2' class='sentence'>If <span class='texttt'>sp</span> has not been obtained by a previous successful call to one of
the positioning functions
(<span class='texttt'>seekoff</span>
or
<span class='texttt'>seekpos</span>)
on the same file the effects are undefined<a class='hidden_link' href='#filebuf.virtuals-17.sentence-2'>.</a></div></div></div><div class='para' id='filebuf.virtuals-18'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9149'>#</a></div><div id='filebuf.virtuals-18.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>sp</span>
on success<a class='hidden_link' href='#filebuf.virtuals-18.sentence-1'>.</a></div> <div id='filebuf.virtuals-18.sentence-2' class='sentence'>Otherwise returns
<span class='texttt'>pos_&shy;type(off_&shy;type(-1))</span><a class='hidden_link' href='#filebuf.virtuals-18.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:sync,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,sync'></a></span><code class='itemdecl'>int sync() override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-19'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9163'>#</a></div><div id='filebuf.virtuals-19.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If a put area exists, calls
<span class='texttt'>filebuf&#x200b;::&#x200b;overflow</span>
to write the characters to the file,
then flushes the file as if by calling <span class='texttt'>fflush(file)</span><a class='hidden_link' href='#filebuf.virtuals-19.sentence-1'>.</a></div> <div id='filebuf.virtuals-19.sentence-2' class='sentence'>If a get area exists, the effect is <span class='indexparent'><a class='index' id=':effect_of_calling_basic_filebuf::sync_when_a_get_area_exists'></a></span>implementation-defined<a class='hidden_link' href='#filebuf.virtuals-19.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:imbue,basic_filebuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_filebuf,imbue'></a></span><code class='itemdecl'>void imbue(const locale&amp; loc) override;
</code><div class='itemdescr'></div><div class='para' id='filebuf.virtuals-20'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9179'>#</a></div><div id='filebuf.virtuals-20.sentence-1' class='sentence'><span class='textit'>Requires:</span> 
If the file is not positioned at its beginning and the encoding of the current
locale as determined by
<span class='texttt'>a_&shy;codecvt.encoding()</span>
is state-dependent (<a href='locale.codecvt.virtuals'>[locale.codecvt.virtuals]</a>)
then that facet is the same as
the corresponding facet of <span class='texttt'>loc</span><a class='hidden_link' href='#filebuf.virtuals-20.sentence-1'>.</a></div></div></div><div class='para' id='filebuf.virtuals-21'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9188'>#</a></div><div id='filebuf.virtuals-21.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Causes characters inserted or extracted after this call
to be converted according to <span class='texttt'>loc</span> until another call of
<span class='texttt'>imbue</span><a class='hidden_link' href='#filebuf.virtuals-21.sentence-1'>.</a></div></div></div><div class='para' id='filebuf.virtuals-22'><div class='marginalizedparent'><a class='marginalized' href='#filebuf.virtuals-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9194'>#</a></div><div id='filebuf.virtuals-22.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This may require reconversion of previously converted characters<a class='hidden_link' href='#filebuf.virtuals-22.sentence-1'>.</a></div> <div id='filebuf.virtuals-22.sentence-2' class='sentence'>This in turn may require the implementation to be able to reconstruct
the original contents of the file<a class='hidden_link' href='#filebuf.virtuals-22.sentence-2'>.</a></div></div></div></div></div><div id='ifstream' class='section'><h3 ><a class='secnum' href='#ifstream' style='min-width:103pt'>30.9.3</a> Class template <span class='texttt'>basic_&shy;ifstream</span> <a class='abbr_ref' href='ifstream'>[ifstream]</a></h3><span class='indexparent'><a class='index' id='lib:basic_ifstream'></a></span><pre class='codeblock'>
namespace std {
  template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
  class basic_ifstream : public basic_istream&lt;charT, traits&gt; {
  public:
    using char_type   = charT;
    using int_type    = typename traits::int_type;
    using pos_type    = typename traits::pos_type;
    using off_type    = typename traits::off_type;
    using traits_type = traits;

    <span class='comment'>// <a href='ifstream.cons'>[ifstream.cons]</a>, constructors
</span>    basic_ifstream();
    explicit basic_ifstream(const char* s,
                            ios_base::openmode mode = ios_base::in);
    explicit basic_ifstream(const filesystem::path::value_type* s,
                            ios_base::openmode mode = ios_base::in);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span>    explicit basic_ifstream(const string&amp; s,
                            ios_base::openmode mode = ios_base::in);
    explicit basic_ifstream(const filesystem::path&amp; s,
                            ios_base::openmode mode = ios_base::in);
    basic_ifstream(const basic_ifstream&amp; rhs) = delete;
    basic_ifstream(basic_ifstream&amp;&amp; rhs);

    <span class='comment'>// <a href='ifstream.assign'>[ifstream.assign]</a>, assign and swap
</span>    basic_ifstream&amp; operator=(const basic_ifstream&amp; rhs) = delete;
    basic_ifstream&amp; operator=(basic_ifstream&amp;&amp; rhs);
    void swap(basic_ifstream&amp; rhs);

    <span class='comment'>// <a href='ifstream.members'>[ifstream.members]</a>, members
</span>    basic_filebuf&lt;charT, traits&gt;* rdbuf() const;

    bool is_open() const;
    void open(const char* s, ios_base::openmode mode = ios_base::in);
    void open(const filesystem::path::value_type* s,
              ios_base::openmode mode = ios_base::in);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span>    void open(const string&amp; s, ios_base::openmode mode = ios_base::in);
    void open(const filesystem::path&amp; s, ios_base::openmode mode = ios_base::in);
    void close();
  private:
    basic_filebuf&lt;charT, traits&gt; sb; <span class='comment'>// <span class='textit'>exposition only</span>
</span>  };

  template &lt;class charT, class traits&gt;
    void swap(basic_ifstream&lt;charT, traits&gt;&amp; x,
              basic_ifstream&lt;charT, traits&gt;&amp; y);
}</pre><div class='para' id='ifstream-1'><div class='marginalizedparent'><a class='marginalized' href='#ifstream-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9253'>#</a></div><div id='ifstream-1.sentence-1' class='sentence'>The class
<span class='texttt'>basic_&shy;ifstream&lt;charT, traits&gt;</span>
supports reading from named files<a class='hidden_link' href='#ifstream-1.sentence-1'>.</a></div> <div id='ifstream-1.sentence-2' class='sentence'>It uses a
<span class='texttt'>basic_&shy;filebuf&lt;&#x200b;charT, traits&gt;</span>
object to control the associated
sequence<a class='hidden_link' href='#ifstream-1.sentence-2'>.</a></div> <div id='ifstream-1.sentence-3' class='sentence'>For the sake of exposition, the maintained data is presented here as:</div><div id='ifstream-1.sentence-4' class='sentence'><ul class='itemize'><li id='ifstream-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ifstream-1.1'>(1.1)</a></div><div id='ifstream-1.1.sentence-1' class='sentence'><span class='texttt'>sb</span>, the <span class='texttt'>filebuf</span> object<a class='hidden_link' href='#ifstream-1.1.sentence-1'>.</a></div></li></ul></div></div><div id='ifstream.cons' class='section'><h4 ><a class='secnum' href='#ifstream.cons' style='min-width:118pt'>30.9.3.1</a> <span class='texttt'>basic_&shy;ifstream</span> constructors <a class='abbr_ref' href='ifstream.cons'>[ifstream.cons]</a></h4><span class='indexparent'><a class='index' id='lib:basic_ifstream,constructor'></a></span><code class='itemdecl'>basic_ifstream();
</code><div class='itemdescr'></div><div class='para' id='ifstream.cons-1'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.cons-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9276'>#</a></div><div id='ifstream.cons-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Constructs an object of class
<span class='texttt'>basic_&shy;ifstream&lt;charT, traits&gt;</span>,
initializing the base class with
<span class='texttt'>basic_&shy;istream&lt;charT, traits&gt;(&amp;sb)</span> (<a href='istream.cons'>[istream.cons]</a>)
and initializing <span class='texttt'>sb</span> with
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;())</span> (<a href='filebuf.cons'>[filebuf.cons]</a>)<a class='hidden_link' href='#ifstream.cons-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_ifstream,constructor_'></a></span><code class='itemdecl'>explicit basic_ifstream(const char* s,
                        ios_base::openmode mode = ios_base::in);
explicit basic_ifstream(const filesystem::path::value_type* s,
                        ios_base::openmode mode = ios_base::in);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span></code><div class='itemdescr'></div><div class='para' id='ifstream.cons-2'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.cons-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9295'>#</a></div><div id='ifstream.cons-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Constructs an object of class
<span class='texttt'>basic_&shy;ifstream&lt;charT, traits&gt;</span>,
initializing the base class with
<span class='texttt'>basic_&shy;istream&lt;charT, traits&gt;(&amp;sb)</span> (<a href='istream.cons'>[istream.cons]</a>)
and initializing <span class='texttt'>sb</span> with
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;())</span> (<a href='filebuf.cons'>[filebuf.cons]</a>),
then calls
<span class='texttt'>rdbuf()-&gt;open(s, mode | ios_&shy;base&#x200b;::&#x200b;in)</span><a class='hidden_link' href='#ifstream.cons-2.sentence-1'>.</a></div> <div id='ifstream.cons-2.sentence-2' class='sentence'>If that function returns a null pointer, calls
<span class='texttt'>setstate(failbit)</span><a class='hidden_link' href='#ifstream.cons-2.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_ifstream,constructor__'></a></span><code class='itemdecl'>explicit basic_ifstream(const string&amp; s,
                        ios_base::openmode mode = ios_base::in);
explicit basic_ifstream(const filesystem::path&amp; s,
                        ios_base::openmode mode = ios_base::in);
</code><div class='itemdescr'></div><div class='para' id='ifstream.cons-3'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.cons-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9318'>#</a></div><div id='ifstream.cons-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> The same as <span class='texttt'>basic_&shy;ifstream(s.c_&shy;str(), mode)</span><a class='hidden_link' href='#ifstream.cons-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_ifstream,constructor___'></a></span><code class='itemdecl'>basic_ifstream(basic_ifstream&amp;&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='ifstream.cons-4'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.cons-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9328'>#</a></div><div id='ifstream.cons-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move constructs from the rvalue <span class='texttt'>rhs</span><a class='hidden_link' href='#ifstream.cons-4.sentence-1'>.</a></div> <div id='ifstream.cons-4.sentence-2' class='sentence'>This
is accomplished by move constructing the base class, and the contained
<span class='texttt'>basic_&shy;filebuf</span><a class='hidden_link' href='#ifstream.cons-4.sentence-2'>.</a></div> <div id='ifstream.cons-4.sentence-3' class='sentence'>Next
<span class='texttt'>basic_&shy;istream&lt;charT, traits&gt;&#x200b;::&#x200b;set_&shy;rdbuf(&amp;sb)</span> is called to install
the contained <span class='texttt'>basic_&shy;filebuf</span><a class='hidden_link' href='#ifstream.cons-4.sentence-3'>.</a></div></div></div></div><div id='ifstream.assign' class='section'><h4 ><a class='secnum' href='#ifstream.assign' style='min-width:118pt'>30.9.3.2</a> Assign and swap <a class='abbr_ref' href='ifstream.assign'>[ifstream.assign]</a></h4><span class='indexparent'><a class='index' id='lib:operator=,basic_ifstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream,operator='></a></span><code class='itemdecl'>basic_ifstream&amp; operator=(basic_ifstream&amp;&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='ifstream.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9344'>#</a></div><div id='ifstream.assign-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move assigns the base and members of <span class='texttt'>*this</span> from the base and corresponding
members of <span class='texttt'>rhs</span><a class='hidden_link' href='#ifstream.assign-1.sentence-1'>.</a></div></div></div><div class='para' id='ifstream.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9348'>#</a></div><div id='ifstream.assign-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#ifstream.assign-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_ifstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream,swap'></a></span><code class='itemdecl'>void swap(basic_ifstream&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='ifstream.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9358'>#</a></div><div id='ifstream.assign-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Exchanges the state of <span class='texttt'>*this</span>
and <span class='texttt'>rhs</span> by calling
<span class='texttt'>basic_&shy;istream&lt;charT, traits&gt;&#x200b;::&#x200b;swap(rhs)</span> and
<span class='texttt'>sb.swap(rhs.sb)</span><a class='hidden_link' href='#ifstream.assign-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_ifstream_'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream,swap_'></a></span><code class='itemdecl'>template &lt;class charT, class traits&gt;
  void swap(basic_ifstream&lt;charT, traits&gt;&amp; x,
            basic_ifstream&lt;charT, traits&gt;&amp; y);
</code><div class='itemdescr'></div><div class='para' id='ifstream.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9373'>#</a></div><div id='ifstream.assign-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> As if by <span class='texttt'>x.swap(y)</span><a class='hidden_link' href='#ifstream.assign-4.sentence-1'>.</a></div></div></div></div><div id='ifstream.members' class='section'><h4 ><a class='secnum' href='#ifstream.members' style='min-width:118pt'>30.9.3.3</a> Member functions <a class='abbr_ref' href='ifstream.members'>[ifstream.members]</a></h4><span class='indexparent'><a class='index' id='lib:rdbuf,basic_ifstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream,rdbuf'></a></span><code class='itemdecl'>basic_filebuf&lt;charT, traits&gt;* rdbuf() const;
</code><div class='itemdescr'></div><div class='para' id='ifstream.members-1'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.members-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9385'>#</a></div><div id='ifstream.members-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>const_&shy;cast&lt;basic_&shy;filebuf&lt;charT, traits&gt;*&gt;(&amp;sb)</span><a class='hidden_link' href='#ifstream.members-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:is_open,basic_ifstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream,is_open'></a></span><code class='itemdecl'>bool is_open() const;
</code><div class='itemdescr'></div><div class='para' id='ifstream.members-2'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.members-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9396'>#</a></div><div id='ifstream.members-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>rdbuf()-&gt;is_&shy;open()</span><a class='hidden_link' href='#ifstream.members-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:open,basic_ifstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream,open'></a></span><code class='itemdecl'>void open(const char* s, ios_base::openmode mode = ios_base::in);
void open(const filesystem::path::value_type* s,
          ios_base::openmode mode = ios_base::in);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span></code><div class='itemdescr'></div><div class='para' id='ifstream.members-3'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.members-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9409'>#</a></div><div id='ifstream.members-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Calls
<span class='texttt'>rdbuf()-&gt;open(s, mode | ios_&shy;base&#x200b;::&#x200b;in)</span><a class='hidden_link' href='#ifstream.members-3.sentence-1'>.</a></div> <div id='ifstream.members-3.sentence-2' class='sentence'>If that function does not return a null pointer
calls <span class='texttt'>clear()</span>,
otherwise calls
<span class='texttt'>setstate(failbit)</span>
(which may throw
<span class='texttt'>ios_&shy;base&#x200b;::&#x200b;failure</span>) (<a href='iostate.flags'>[iostate.flags]</a>)<a class='hidden_link' href='#ifstream.members-3.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:open,basic_ifstream_'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream,open_'></a></span><code class='itemdecl'>void open(const string&amp; s, ios_base::openmode mode = ios_base::in);
void open(const filesystem::path&amp; s, ios_base::openmode mode = ios_base::in);
</code><div class='itemdescr'></div><div class='para' id='ifstream.members-4'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.members-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9428'>#</a></div><div id='ifstream.members-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Calls <span class='texttt'>open(s.c_&shy;str(), mode)</span><a class='hidden_link' href='#ifstream.members-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:close,basic_ifstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ifstream,close'></a></span><code class='itemdecl'>void close();
</code><div class='itemdescr'></div><div class='para' id='ifstream.members-5'><div class='marginalizedparent'><a class='marginalized' href='#ifstream.members-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9438'>#</a></div><div id='ifstream.members-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Calls
<span class='texttt'>rdbuf()-&gt;close()</span>
and, if that function returns
a null pointer,
calls
<span class='texttt'>setstate(failbit)</span>
(which may throw
<span class='texttt'>ios_&shy;base&#x200b;::&#x200b;failure</span>) (<a href='iostate.flags'>[iostate.flags]</a>)<a class='hidden_link' href='#ifstream.members-5.sentence-1'>.</a></div></div></div></div></div><div id='ofstream' class='section'><h3 ><a class='secnum' href='#ofstream' style='min-width:103pt'>30.9.4</a> Class template <span class='texttt'>basic_&shy;ofstream</span> <a class='abbr_ref' href='ofstream'>[ofstream]</a></h3><span class='indexparent'><a class='index' id='lib:basic_ofstream'></a></span><pre class='codeblock'>
namespace std {
  template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
  class basic_ofstream : public basic_ostream&lt;charT, traits&gt; {
  public:
    using char_type   = charT;
    using int_type    = typename traits::int_type;
    using pos_type    = typename traits::pos_type;
    using off_type    = typename traits::off_type;
    using traits_type = traits;

    <span class='comment'>// <a href='ofstream.cons'>[ofstream.cons]</a>, constructors
</span>    basic_ofstream();
    explicit basic_ofstream(const char* s,
                            ios_base::openmode mode = ios_base::out);
    explicit basic_ofstream(const filesystem::path::value_type* s,
                            ios_base::openmode mode = ios_base::out);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span>    explicit basic_ofstream(const string&amp; s,
                            ios_base::openmode mode = ios_base::out);
    explicit basic_ofstream(const filesystem::path&amp; s,
                            ios_base::openmode mode = ios_base::out);
    basic_ofstream(const basic_ofstream&amp; rhs) = delete;
    basic_ofstream(basic_ofstream&amp;&amp; rhs);

    <span class='comment'>// <a href='ofstream.assign'>[ofstream.assign]</a>, assign and swap
</span>    basic_ofstream&amp; operator=(const basic_ofstream&amp; rhs) = delete;
    basic_ofstream&amp; operator=(basic_ofstream&amp;&amp; rhs);
    void swap(basic_ofstream&amp; rhs);

    <span class='comment'>// <a href='ofstream.members'>[ofstream.members]</a>, members
</span>    basic_filebuf&lt;charT, traits&gt;* rdbuf() const;

    bool is_open() const;
    void open(const char* s, ios_base::openmode mode = ios_base::out);
    void open(const filesystem::path::value_type* s,
              ios_base::openmode mode = ios_base::out);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span>    void open(const string&amp; s, ios_base::openmode mode = ios_base::out);
    void open(const filesystem::path&amp; s, ios_base::openmode mode = ios_base::out);
    void close();
  private:
    basic_filebuf&lt;charT, traits&gt; sb; <span class='comment'>// <span class='textit'>exposition only</span>
</span>  };

  template &lt;class charT, class traits&gt;
    void swap(basic_ofstream&lt;charT, traits&gt;&amp; x,
              basic_ofstream&lt;charT, traits&gt;&amp; y);
}</pre><div class='para' id='ofstream-1'><div class='marginalizedparent'><a class='marginalized' href='#ofstream-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9502'>#</a></div><div id='ofstream-1.sentence-1' class='sentence'>The class
<span class='texttt'>basic_&shy;ofstream&lt;charT, traits&gt;</span>
supports writing to named files<a class='hidden_link' href='#ofstream-1.sentence-1'>.</a></div> <div id='ofstream-1.sentence-2' class='sentence'>It uses a
<span class='texttt'>basic_&shy;filebuf&lt;&#x200b;charT, traits&gt;</span>
object to control the associated
sequence<a class='hidden_link' href='#ofstream-1.sentence-2'>.</a></div> <div id='ofstream-1.sentence-3' class='sentence'>For the sake of exposition, the maintained data is presented here as:
<ul class='itemize'><li id='ofstream-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ofstream-1.1'>(1.1)</a></div><div id='ofstream-1.1.sentence-1' class='sentence'><span class='texttt'>sb</span>, the <span class='texttt'>filebuf</span> object<a class='hidden_link' href='#ofstream-1.1.sentence-1'>.</a></div></li></ul></div></div><div id='ofstream.cons' class='section'><h4 ><a class='secnum' href='#ofstream.cons' style='min-width:118pt'>30.9.4.1</a> <span class='texttt'>basic_&shy;ofstream</span> constructors <a class='abbr_ref' href='ofstream.cons'>[ofstream.cons]</a></h4><span class='indexparent'><a class='index' id='lib:basic_ofstream,constructor'></a></span><code class='itemdecl'>basic_ofstream();
</code><div class='itemdescr'></div><div class='para' id='ofstream.cons-1'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.cons-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9524'>#</a></div><div id='ofstream.cons-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Constructs an object of class
<span class='texttt'>basic_&shy;ofstream&lt;charT, traits&gt;</span>,
initializing the base class with
<span class='texttt'>basic_&shy;ostream&lt;charT, traits&gt;(&amp;sb)</span> (<a href='ostream.cons'>[ostream.cons]</a>)
and initializing <span class='texttt'>sb</span> with
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;())</span> (<a href='filebuf.cons'>[filebuf.cons]</a>)<a class='hidden_link' href='#ofstream.cons-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_ofstream,constructor_'></a></span><code class='itemdecl'>explicit basic_ofstream(const char* s,
                        ios_base::openmode mode = ios_base::out);
explicit basic_ofstream(const filesystem::path::value_type* s,
                        ios_base::openmode mode = ios_base::out); <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span></code><div class='itemdescr'></div><div class='para' id='ofstream.cons-2'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.cons-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9543'>#</a></div><div id='ofstream.cons-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Constructs an object of class
<span class='texttt'>basic_&shy;ofstream&lt;charT, traits&gt;</span>,
initializing the base class with
<span class='texttt'>basic_&shy;ostream&lt;charT, traits&gt;(&amp;sb)</span> (<a href='ostream.cons'>[ostream.cons]</a>)
and initializing <span class='texttt'>sb</span> with
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;())</span> (<a href='filebuf.cons'>[filebuf.cons]</a>),
then calls
<span class='texttt'>rdbuf()-&gt;open(s, mode | ios_&shy;base&#x200b;::&#x200b;out)</span><a class='hidden_link' href='#ofstream.cons-2.sentence-1'>.</a></div> <div id='ofstream.cons-2.sentence-2' class='sentence'>If that function returns a null pointer, calls
<span class='texttt'>setstate(&#x200b;failbit)</span><a class='hidden_link' href='#ofstream.cons-2.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_ofstream,constructor__'></a></span><code class='itemdecl'>explicit basic_ofstream(const string&amp; s,
                        ios_base::openmode mode = ios_base::out);
explicit basic_ofstream(const filesystem::path&amp; s,
                        ios_base::openmode mode = ios_base::out);
</code><div class='itemdescr'></div><div class='para' id='ofstream.cons-3'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.cons-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9566'>#</a></div><div id='ofstream.cons-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> The same as <span class='texttt'>basic_&shy;ofstream(s.c_&shy;str(), mode)</span><a class='hidden_link' href='#ofstream.cons-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_ofstream,constructor___'></a></span><code class='itemdecl'>basic_ofstream(basic_ofstream&amp;&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='ofstream.cons-4'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.cons-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9576'>#</a></div><div id='ofstream.cons-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move constructs from the rvalue <span class='texttt'>rhs</span><a class='hidden_link' href='#ofstream.cons-4.sentence-1'>.</a></div> <div id='ofstream.cons-4.sentence-2' class='sentence'>This
is accomplished by move constructing the base class, and the contained
<span class='texttt'>basic_&shy;filebuf</span><a class='hidden_link' href='#ofstream.cons-4.sentence-2'>.</a></div> <div id='ofstream.cons-4.sentence-3' class='sentence'>Next
<span class='texttt'>basic_&shy;ostream&lt;charT, traits&gt;&#x200b;::&#x200b;set_&shy;rdbuf(&amp;sb)</span> is called to install
the contained <span class='texttt'>basic_&shy;filebuf</span><a class='hidden_link' href='#ofstream.cons-4.sentence-3'>.</a></div></div></div></div><div id='ofstream.assign' class='section'><h4 ><a class='secnum' href='#ofstream.assign' style='min-width:118pt'>30.9.4.2</a> Assign and swap <a class='abbr_ref' href='ofstream.assign'>[ofstream.assign]</a></h4><span class='indexparent'><a class='index' id='lib:operator=,basic_ofstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream,operator='></a></span><code class='itemdecl'>basic_ofstream&amp; operator=(basic_ofstream&amp;&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='ofstream.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9592'>#</a></div><div id='ofstream.assign-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move assigns the base and members of <span class='texttt'>*this</span> from the base and corresponding
members of <span class='texttt'>rhs</span><a class='hidden_link' href='#ofstream.assign-1.sentence-1'>.</a></div></div></div><div class='para' id='ofstream.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9596'>#</a></div><div id='ofstream.assign-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#ofstream.assign-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_ofstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream,swap'></a></span><code class='itemdecl'>void swap(basic_ofstream&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='ofstream.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9606'>#</a></div><div id='ofstream.assign-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Exchanges the state of <span class='texttt'>*this</span>
and <span class='texttt'>rhs</span> by calling
<span class='texttt'>basic_&shy;ostream&lt;charT, traits&gt;&#x200b;::&#x200b;swap(rhs)</span> and
<span class='texttt'>sb.swap(rhs.sb)</span><a class='hidden_link' href='#ofstream.assign-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_ofstream_'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream,swap_'></a></span><code class='itemdecl'>template &lt;class charT, class traits&gt;
  void swap(basic_ofstream&lt;charT, traits&gt;&amp; x,
            basic_ofstream&lt;charT, traits&gt;&amp; y);
</code><div class='itemdescr'></div><div class='para' id='ofstream.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9621'>#</a></div><div id='ofstream.assign-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> As if by <span class='texttt'>x.swap(y)</span><a class='hidden_link' href='#ofstream.assign-4.sentence-1'>.</a></div></div></div></div><div id='ofstream.members' class='section'><h4 ><a class='secnum' href='#ofstream.members' style='min-width:118pt'>30.9.4.3</a> Member functions <a class='abbr_ref' href='ofstream.members'>[ofstream.members]</a></h4><span class='indexparent'><a class='index' id='lib:rdbuf,basic_ofstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream,rdbuf'></a></span><code class='itemdecl'>basic_filebuf&lt;charT, traits&gt;* rdbuf() const;
</code><div class='itemdescr'></div><div class='para' id='ofstream.members-1'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.members-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9633'>#</a></div><div id='ofstream.members-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>const_&shy;cast&lt;basic_&shy;filebuf&lt;charT, traits&gt;*&gt;(&amp;sb)</span><a class='hidden_link' href='#ofstream.members-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:is_open,basic_ofstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream,is_open'></a></span><code class='itemdecl'>bool is_open() const;
</code><div class='itemdescr'></div><div class='para' id='ofstream.members-2'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.members-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9644'>#</a></div><div id='ofstream.members-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>rdbuf()-&gt;is_&shy;open()</span><a class='hidden_link' href='#ofstream.members-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:open,basic_ofstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream,open'></a></span><code class='itemdecl'>void open(const char* s, ios_base::openmode mode = ios_base::out);
void open(const filesystem::path::value_type* s,
          ios_base::openmode mode = ios_base::out);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span></code><div class='itemdescr'></div><div class='para' id='ofstream.members-3'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.members-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9657'>#</a></div><div id='ofstream.members-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Calls
<span class='texttt'>rdbuf()-&gt;open(s, mode | ios_&shy;base&#x200b;::&#x200b;out)</span><a class='hidden_link' href='#ofstream.members-3.sentence-1'>.</a></div> <div id='ofstream.members-3.sentence-2' class='sentence'>If that function does not return a null pointer
calls <span class='texttt'>clear()</span>,
otherwise calls
<span class='texttt'>setstate(&#x200b;failbit)</span>
(which may throw
<span class='texttt'>ios_&shy;base&#x200b;::&#x200b;failure</span>) (<a href='iostate.flags'>[iostate.flags]</a>)<a class='hidden_link' href='#ofstream.members-3.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:close,basic_ofstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream,close'></a></span><code class='itemdecl'>void close();
</code><div class='itemdescr'></div><div class='para' id='ofstream.members-4'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.members-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9675'>#</a></div><div id='ofstream.members-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Calls
<span class='texttt'>rdbuf()-&gt;close()</span>
and, if that function fails (returns a null pointer), calls
<span class='texttt'>setstate(&#x200b;failbit)</span>
(which may throw
<span class='texttt'>ios_&shy;base&#x200b;::&#x200b;failure</span>) (<a href='iostate.flags'>[iostate.flags]</a>)<a class='hidden_link' href='#ofstream.members-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:open,basic_ofstream_'></a></span><span class='indexparent'><a class='index' id='lib:basic_ofstream,open_'></a></span><code class='itemdecl'>void open(const string&amp; s, ios_base::openmode mode = ios_base::out);
void open(const filesystem::path&amp; s, ios_base::openmode mode = ios_base::out);
</code><div class='itemdescr'></div><div class='para' id='ofstream.members-5'><div class='marginalizedparent'><a class='marginalized' href='#ofstream.members-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9692'>#</a></div><div id='ofstream.members-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> Calls <span class='texttt'>open(s.c_&shy;str(), mode)</span><a class='hidden_link' href='#ofstream.members-5.sentence-1'>.</a></div></div></div></div></div><div id='fstream' class='section'><h3 ><a class='secnum' href='#fstream' style='min-width:103pt'>30.9.5</a> Class template <span class='texttt'>basic_&shy;fstream</span> <a class='abbr_ref' href='fstream'>[fstream]</a></h3><span class='indexparent'><a class='index' id='lib:basic_fstream'></a></span><pre class='codeblock'>
namespace std {
  template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt;
  class basic_fstream : public basic_iostream&lt;charT, traits&gt; {
  public:
    using char_type   = charT;
    using int_type    = typename traits::int_type;
    using pos_type    = typename traits::pos_type;
    using off_type    = typename traits::off_type;
    using traits_type = traits;

    <span class='comment'>// <a href='fstream.cons'>[fstream.cons]</a>, constructors
</span>    basic_fstream();
    explicit basic_fstream(
      const char* s,
      ios_base::openmode mode = ios_base::in | ios_base::out);
    explicit basic_fstream(
      const std::filesystem::path::value_type* s,
      ios_base::openmode mode = ios_base::in|ios_base::out);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span>    explicit basic_fstream(
      const string&amp; s,
      ios_base::openmode mode = ios_base::in | ios_base::out);
    explicit basic_fstream(
      const filesystem::path&amp; s,
      ios_base::openmode mode = ios_base::in | ios_base::out);
    basic_fstream(const basic_fstream&amp; rhs) = delete;
    basic_fstream(basic_fstream&amp;&amp; rhs);

    <span class='comment'>// <a href='fstream.assign'>[fstream.assign]</a>, assign and swap
</span>    basic_fstream&amp; operator=(const basic_fstream&amp; rhs) = delete;
    basic_fstream&amp; operator=(basic_fstream&amp;&amp; rhs);
    void swap(basic_fstream&amp; rhs);

    <span class='comment'>// <a href='fstream.members'>[fstream.members]</a>, members
</span>    basic_filebuf&lt;charT, traits&gt;* rdbuf() const;
    bool is_open() const;
    void open(
      const char* s,
      ios_base::openmode mode = ios_base::in | ios_base::out);
    void open(
      const std::filesystem::path::value_type* s,
      ios_base::openmode mode = ios_base::in|ios_base::out);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span>    void open(
      const string&amp; s,
      ios_base::openmode mode = ios_base::in | ios_base::out);
    void open(
      const filesystem::path&amp; s,
      ios_base::openmode mode = ios_base::in | ios_base::out);
    void close();

  private:
    basic_filebuf&lt;charT, traits&gt; sb; <span class='comment'>// <span class='textit'>exposition only</span>
</span>  };

  template &lt;class charT, class traits&gt;
    void swap(basic_fstream&lt;charT, traits&gt;&amp; x,
              basic_fstream&lt;charT, traits&gt;&amp; y);
}</pre><div class='para' id='fstream-1'><div class='marginalizedparent'><a class='marginalized' href='#fstream-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9759'>#</a></div><div id='fstream-1.sentence-1' class='sentence'>The
class template
<span class='texttt'>basic_&shy;fstream&lt;charT, traits&gt;</span>
supports reading and writing from named files<a class='hidden_link' href='#fstream-1.sentence-1'>.</a></div> <div id='fstream-1.sentence-2' class='sentence'>It uses a
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;</span>
object to control the associated sequences<a class='hidden_link' href='#fstream-1.sentence-2'>.</a></div> <div id='fstream-1.sentence-3' class='sentence'>For the sake of exposition, the maintained data is presented here as:
<ul class='itemize'><li id='fstream-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#fstream-1.1'>(1.1)</a></div><div id='fstream-1.1.sentence-1' class='sentence'><span class='texttt'>sb</span>, the <span class='texttt'>basic_&shy;filebuf</span> object<a class='hidden_link' href='#fstream-1.1.sentence-1'>.</a></div></li></ul></div></div><div id='fstream.cons' class='section'><h4 ><a class='secnum' href='#fstream.cons' style='min-width:118pt'>30.9.5.1</a> <span class='texttt'>basic_&shy;fstream</span> constructors <a class='abbr_ref' href='fstream.cons'>[fstream.cons]</a></h4><span class='indexparent'><a class='index' id='lib:basic_fstream,constructor'></a></span><code class='itemdecl'>basic_fstream();
</code><div class='itemdescr'></div><div class='para' id='fstream.cons-1'><div class='marginalizedparent'><a class='marginalized' href='#fstream.cons-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9781'>#</a></div><div id='fstream.cons-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Constructs an object of class
<span class='texttt'>basic_&shy;fstream&lt;charT, traits&gt;</span>,
initializing the base class with
<span class='texttt'>basic_&shy;iostream&lt;charT, traits&gt;(&amp;sb)</span> (<a href='iostream.cons'>[iostream.cons]</a>)
and initializing
<span class='texttt'>sb</span>
with
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;()</span><a class='hidden_link' href='#fstream.cons-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_fstream,constructor_'></a></span><code class='itemdecl'>explicit basic_fstream(
  const char* s,
  ios_base::openmode mode = ios_base::in | ios_base::out);
explicit basic_fstream(
  const filesystem::path::value_type* s,
  ios_base::openmode mode = ios_base::in | ios_base::out);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span></code><div class='itemdescr'></div><div class='para' id='fstream.cons-2'><div class='marginalizedparent'><a class='marginalized' href='#fstream.cons-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9804'>#</a></div><div id='fstream.cons-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Constructs an object of class
<span class='texttt'>basic_&shy;fstream&lt;charT, traits&gt;</span>,
initializing the base class with
<span class='texttt'>basic_&shy;iostream&lt;charT, traits&gt;(&amp;sb)</span> (<a href='iostream.cons'>[iostream.cons]</a>)
and initializing
<span class='texttt'>sb</span>
with
<span class='texttt'>basic_&shy;filebuf&lt;charT, traits&gt;()</span><a class='hidden_link' href='#fstream.cons-2.sentence-1'>.</a></div> <div id='fstream.cons-2.sentence-2' class='sentence'>Then calls
<span class='texttt'>rdbuf()-&gt;open(s, mode)</span><a class='hidden_link' href='#fstream.cons-2.sentence-2'>.</a></div> <div id='fstream.cons-2.sentence-3' class='sentence'>If that function returns a null pointer, calls
<span class='texttt'>setstate(failbit)</span><a class='hidden_link' href='#fstream.cons-2.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_fstream,constructor__'></a></span><code class='itemdecl'>explicit basic_fstream(
  const string&amp; s,
  ios_base::openmode mode = ios_base::in | ios_base::out);
explicit basic_fstream(
  const filesystem::path&amp; s,
  ios_base::openmode mode = ios_base::in | ios_base::out);
</code><div class='itemdescr'></div><div class='para' id='fstream.cons-3'><div class='marginalizedparent'><a class='marginalized' href='#fstream.cons-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9831'>#</a></div><div id='fstream.cons-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> The same as <span class='texttt'>basic_&shy;fstream(s.c_&shy;str(), mode)</span><a class='hidden_link' href='#fstream.cons-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_fstream,constructor___'></a></span><code class='itemdecl'>basic_fstream(basic_fstream&amp;&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='fstream.cons-4'><div class='marginalizedparent'><a class='marginalized' href='#fstream.cons-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9841'>#</a></div><div id='fstream.cons-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move constructs from the rvalue <span class='texttt'>rhs</span><a class='hidden_link' href='#fstream.cons-4.sentence-1'>.</a></div> <div id='fstream.cons-4.sentence-2' class='sentence'>This
is accomplished by move constructing the base class, and the contained
<span class='texttt'>basic_&shy;filebuf</span><a class='hidden_link' href='#fstream.cons-4.sentence-2'>.</a></div> <div id='fstream.cons-4.sentence-3' class='sentence'>Next
<span class='texttt'>basic_&shy;istream&lt;charT, traits&gt;&#x200b;::&#x200b;set_&shy;rdbuf(&amp;sb)</span> is called to install
the contained <span class='texttt'>basic_&shy;filebuf</span><a class='hidden_link' href='#fstream.cons-4.sentence-3'>.</a></div></div></div></div><div id='fstream.assign' class='section'><h4 ><a class='secnum' href='#fstream.assign' style='min-width:118pt'>30.9.5.2</a> Assign and swap <a class='abbr_ref' href='fstream.assign'>[fstream.assign]</a></h4><span class='indexparent'><a class='index' id='lib:operator=,basic_fstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream,operator='></a></span><code class='itemdecl'>basic_fstream&amp; operator=(basic_fstream&amp;&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='fstream.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#fstream.assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9857'>#</a></div><div id='fstream.assign-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move assigns the base and members of <span class='texttt'>*this</span> from the base and corresponding
members of <span class='texttt'>rhs</span><a class='hidden_link' href='#fstream.assign-1.sentence-1'>.</a></div></div></div><div class='para' id='fstream.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#fstream.assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9861'>#</a></div><div id='fstream.assign-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#fstream.assign-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_fstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream,swap'></a></span><code class='itemdecl'>void swap(basic_fstream&amp; rhs);
</code><div class='itemdescr'></div><div class='para' id='fstream.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#fstream.assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9871'>#</a></div><div id='fstream.assign-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Exchanges the state of <span class='texttt'>*this</span>
and <span class='texttt'>rhs</span> by calling
<span class='texttt'>basic_&shy;iostream&lt;charT,traits&gt;&#x200b;::&#x200b;swap(rhs)</span> and
<span class='texttt'>sb.swap(rhs.sb)</span><a class='hidden_link' href='#fstream.assign-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_fstream_'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream,swap_'></a></span><code class='itemdecl'>template &lt;class charT, class traits&gt;
  void swap(basic_fstream&lt;charT, traits&gt;&amp; x,
            basic_fstream&lt;charT, traits&gt;&amp; y);
</code><div class='itemdescr'></div><div class='para' id='fstream.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#fstream.assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9886'>#</a></div><div id='fstream.assign-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> As if by <span class='texttt'>x.swap(y)</span><a class='hidden_link' href='#fstream.assign-4.sentence-1'>.</a></div></div></div></div><div id='fstream.members' class='section'><h4 ><a class='secnum' href='#fstream.members' style='min-width:118pt'>30.9.5.3</a> Member functions <a class='abbr_ref' href='fstream.members'>[fstream.members]</a></h4><span class='indexparent'><a class='index' id='lib:rdbuf,basic_fstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream,rdbuf'></a></span><code class='itemdecl'>basic_filebuf&lt;charT, traits&gt;* rdbuf() const;
</code><div class='itemdescr'></div><div class='para' id='fstream.members-1'><div class='marginalizedparent'><a class='marginalized' href='#fstream.members-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9898'>#</a></div><div id='fstream.members-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>const_&shy;cast&lt;basic_&shy;filebuf&lt;charT, traits&gt;*&gt;(&amp;sb)</span><a class='hidden_link' href='#fstream.members-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:is_open,basic_fstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream,is_open'></a></span><code class='itemdecl'>bool is_open() const;
</code><div class='itemdescr'></div><div class='para' id='fstream.members-2'><div class='marginalizedparent'><a class='marginalized' href='#fstream.members-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9909'>#</a></div><div id='fstream.members-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>rdbuf()-&gt;is_&shy;open()</span><a class='hidden_link' href='#fstream.members-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:open,basic_fstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream,open'></a></span><code class='itemdecl'>void open(
  const char* s,
  ios_base::openmode mode = ios_base::in | ios_base::out);
void open(
  const filesystem::path::value_type* s,
  ios_base::openmode mode = ios_base::in | ios_base::out);  <span class='comment'>// wide systems only; see <a href='fstream.syn'>[fstream.syn]</a>
</span></code><div class='itemdescr'></div><div class='para' id='fstream.members-3'><div class='marginalizedparent'><a class='marginalized' href='#fstream.members-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9925'>#</a></div><div id='fstream.members-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Calls
<span class='texttt'>rdbuf()-&gt;open(s, mode)</span><a class='hidden_link' href='#fstream.members-3.sentence-1'>.</a></div> <div id='fstream.members-3.sentence-2' class='sentence'>If that function does not return a null pointer calls <span class='texttt'>clear()</span>,
otherwise calls
<span class='texttt'>setstate(failbit)</span>
(which may throw
<span class='texttt'>ios_&shy;base&#x200b;::&#x200b;failure</span>) (<a href='iostate.flags'>[iostate.flags]</a>)<a class='hidden_link' href='#fstream.members-3.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:open,basic_fstream_'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream,open_'></a></span><code class='itemdecl'>void open(
  const string&amp; s,
  ios_base::openmode mode = ios_base::in | ios_base::out);
void open(
  const filesystem::path&amp; s,
  ios_base::openmode mode = ios_base::in | ios_base::out);
</code><div class='itemdescr'></div><div class='para' id='fstream.members-4'><div class='marginalizedparent'><a class='marginalized' href='#fstream.members-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9947'>#</a></div><div id='fstream.members-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Calls <span class='texttt'>open(s.c_&shy;str(), mode)</span><a class='hidden_link' href='#fstream.members-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:close,basic_fstream'></a></span><span class='indexparent'><a class='index' id='lib:basic_fstream,close'></a></span><code class='itemdecl'>void close();
</code><div class='itemdescr'></div><div class='para' id='fstream.members-5'><div class='marginalizedparent'><a class='marginalized' href='#fstream.members-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a8b3d85744b0ee0bdaf100ded65ee1a76babe6ae/source/iostreams.tex#L9957'>#</a></div><div id='fstream.members-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Calls
<span class='texttt'>rdbuf()-&gt;close()</span>
and, if that function
returns a null pointer,
calls
<span class='texttt'>setstate(failbit)</span>
(which may throw
<span class='texttt'>ios_&shy;base&#x200b;::&#x200b;failure</span>) (<a href='iostate.flags'>[iostate.flags]</a>)<a class='hidden_link' href='#fstream.members-5.sentence-1'>.</a></div></div></div></div></div></div></body></html>