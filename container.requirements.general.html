<!DOCTYPE html><html lang='en'><head><title>[container.requirements.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>26</a> Containers library <a class='abbr_ref' href='./#containers'>[containers]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>26.2</a> Container requirements <a class='abbr_ref' href='container.requirements#general'>[container.requirements]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>26.2.1</a> General container requirements <a class='abbr_ref'>[container.requirements.general]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L40'>#</a></div><div id='1.sentence-1' class='sentence'>Containers are objects that store other objects<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>They control allocation and deallocation of these objects
through constructors, destructors, insert and erase operations<a class='hidden_link' href='#1.sentence-2'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L45'>#</a></div><div id='2.sentence-1' class='sentence'>All of the complexity requirements in this Clause are stated solely
in terms of the number of operations on the contained objects<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='2.sentence-2' class='sentence'>The copy constructor of type
<span class='texttt'>vector&lt;vector&lt;int&gt;&gt;</span>
has linear complexity,
even though the complexity of copying each contained
<span class='texttt'>vector&lt;int&gt;</span>
is itself linear<a class='hidden_link' href='#2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L57'>#</a></div><div id='3.sentence-1' class='sentence'>For the components affected by this subclause that declare an <span class='texttt'>allocator_&shy;type</span>,
objects stored in these components shall be constructed using the function
<a href='allocator.traits.members#:allocator_traits,construct'><span class='texttt'>allocator_&shy;traits&lt;allocator_&shy;type&gt;&#x200b;::&#x200b;rebind_&shy;traits&lt;U&gt;&#x200b;::&#x200b;&#x200b;construct</span></a>
and destroyed using the function
<a href='allocator.traits.members#:allocator_traits,destroy'><span class='texttt'>allocator_&shy;traits&lt;allocator_&shy;type&gt;&#x200b;::&#x200b;rebind_&shy;traits&lt;U&gt;&#x200b;::&#x200b;&#x200b;destroy</span></a>,
where <span class='texttt'>U</span> is either <span class='texttt'>allocator_&shy;type&#x200b;::&#x200b;value_&shy;type</span> or
an internal type used by the container<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>These functions are called only for the
container's element type, not for internal types used by the container<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-3' class='sentence'>This
means, for example, that a node-based container might need to construct nodes containing
aligned buffers and call <span class='texttt'>construct</span> to place the element into the buffer<a class='hidden_link' href='#3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L71'>#</a></div><div id='4.sentence-1' class='sentence'>In Tables <a href='#tab:containers.container.requirements'>83</a>,
<a href='#tab:containers.reversible.requirements'>84</a>, and
<a href='#tab:containers.optional.operations'>85</a>
<span class='texttt'>X</span> denotes a container class containing objects of type
<span class='texttt'>T</span>, <span class='texttt'>a</span> and <span class='texttt'>b</span>
denote values of type <span class='texttt'>X</span>, <span class='texttt'>u</span>
denotes an identifier, <span class='texttt'>r</span> denotes
a non-const value of type <span class='texttt'>X</span>, and <span class='texttt'>rv</span>
denotes a non-const rvalue of type <span class='texttt'>X</span><a class='hidden_link' href='#4.sentence-1'>.</a></div><div class='numberedTable' id='tab:containers.container.requirements'>Table <a href='#tab:containers.container.requirements'>83</a> — Container requirements<br><table ><tr class='rowsep'><td colspan='1' class='center'><div id='4.sentence-2' class='sentence'><b>Expression</b></div></td><td colspan='1' class='center'><div id='4.sentence-3' class='sentence'><b>Return type</b></div></td><td colspan='1' class='center'><div id='4.sentence-4' class='sentence'><b>Operational</b></div></td><td colspan='1' class='center'><div id='4.sentence-5' class='sentence'><b>Assertion/note</b></div></td><td colspan='1' class='center'><div id='4.sentence-6' class='sentence'><b>Complexity</b></div></td></tr><tr ><td class='left'></td><td class='left'></td><td colspan='1' class='center'><div id='4.sentence-7' class='sentence'><b>semantics</b></div></td><td colspan='1' class='center'><div id='4.sentence-8' class='sentence'><b>pre-/post-condition</b></div></td><td class='left'></td></tr><tr class='capsep'><td class='left'><div style='height:0.6em;display:block'></div><div id='4.sentence-9' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;value_&shy;type</span></div></td><td class='left'><div id='4.sentence-10' class='sentence'><span class='texttt'>T</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-11' class='sentence'><span class='textit'>Requires:</span> &nbsp;<span class='texttt'>T</span> is <span class='texttt'>Erasable</span> from <span class='texttt'>X</span> (see <a href='container.requirements.general'>[container.requirements.general]</a>, below)</div></td><td class='left'><div id='4.sentence-12' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-13' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;reference</span></div></td><td class='left'><div id='4.sentence-14' class='sentence'><span class='texttt'>T&amp;</span></div></td><td class='left'></td><td class='left'></td><td class='left'><div id='4.sentence-15' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-16' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;const_&shy;reference</span></div></td><td class='left'><div id='4.sentence-17' class='sentence'><span class='texttt'>const T&amp;</span></div></td><td class='left'></td><td class='left'></td><td class='left'><div id='4.sentence-18' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-19' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;iterator</span></div></td><td class='left'><div id='4.sentence-20' class='sentence'>iterator type whose value type is <span class='texttt'>T</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-21' class='sentence'>any iterator category
 that meets the forward iterator requirements<a class='hidden_link' href='#4.sentence-21'>.</a></div> <div id='4.sentence-22' class='sentence'>convertible to <span class='texttt'>X&#x200b;::&#x200b;const_&shy;iterator</span><a class='hidden_link' href='#4.sentence-22'>.</a></div></td><td class='left'><div id='4.sentence-23' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-24' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;const_&shy;iterator</span></div></td><td class='left'><div id='4.sentence-25' class='sentence'>constant iterator type whose value type is <span class='texttt'>T</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-26' class='sentence'>any iterator category
 that meets the forward iterator requirements<a class='hidden_link' href='#4.sentence-26'>.</a></div></td><td class='left'><div id='4.sentence-27' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-28' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;difference_&shy;type</span></div></td><td class='left'><div id='4.sentence-29' class='sentence'>signed integer type</div></td><td class='left'></td><td class='left'><div id='4.sentence-30' class='sentence'>is identical to the difference type of <span class='texttt'>X&#x200b;::&#x200b;iterator</span> and <span class='texttt'>X&#x200b;::&#x200b;const_&shy;iterator</span></div></td><td class='left'><div id='4.sentence-31' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-32' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;size_&shy;type</span></div></td><td class='left'><div id='4.sentence-33' class='sentence'>unsigned integer type</div></td><td class='left'></td><td class='left'><div id='4.sentence-34' class='sentence'><span class='texttt'>size_&shy;type</span> can represent any non-negative value of <span class='texttt'>difference_&shy;type</span></div></td><td class='left'><div id='4.sentence-35' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-36' class='sentence'><span class='texttt'>X u;</span></div></td><td class='left'></td><td class='left'></td><td class='left'><div id='4.sentence-37' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>u.empty()</span></div></td><td class='left'><div id='4.sentence-38' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-39' class='sentence'><span class='texttt'>X()</span></div></td><td class='left'></td><td class='left'></td><td class='left'><div id='4.sentence-40' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>X().empty()</span></div></td><td class='left'><div id='4.sentence-41' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-42' class='sentence'><span class='texttt'>X(a)</span></div></td><td class='left'></td><td class='left'></td><td class='left'><div id='4.sentence-43' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>T</span> is <span class='texttt'>CopyInsertable</span>
 into <span class='texttt'>X</span> (see below)<a class='hidden_link' href='#4.sentence-43'>.</a></div> <div id='4.sentence-44' class='sentence'><br/><span class='textit'>Postconditions:</span> <span class='texttt'>a == X(a)</span><a class='hidden_link' href='#4.sentence-44'>.</a></div></td><td class='left'><div id='4.sentence-45' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-46' class='sentence'><span class='texttt'>X u(a);</span><br/>
<span class='texttt'>X u = a;</span></div></td><td class='left'></td><td class='left'></td><td class='left'><div id='4.sentence-47' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>T</span> is <span class='texttt'>CopyInsertable</span>
 into <span class='texttt'>X</span> (see below)<a class='hidden_link' href='#4.sentence-47'>.</a></div> <div id='4.sentence-48' class='sentence'><br/>
 <span class='textit'>Postconditions:</span> <span class='texttt'>u == a</span></div></td><td class='left'><div id='4.sentence-49' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-50' class='sentence'><span class='texttt'>X u(rv);</span><br/>
<span class='texttt'>X u = rv;</span></div></td><td class='left'></td><td class='left'></td><td class='left'><div id='4.sentence-51' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>u</span> shall be equal to the value that <span class='texttt'>rv</span> had before this construction</div></td><td class='left'><div id='4.sentence-52' class='sentence'>(Note B)</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-53' class='sentence'><span class='texttt'>a = rv</span></div></td><td class='left'><div id='4.sentence-54' class='sentence'><span class='texttt'>X&amp;</span></div></td><td class='left'><div id='4.sentence-55' class='sentence'>All existing elements of <span class='texttt'>a</span> are either move assigned to or destroyed</div></td><td class='left'><div id='4.sentence-56' class='sentence'><span class='texttt'>a</span> shall be equal to the value that <span class='texttt'>rv</span>
  had before this assignment</div></td><td class='left'><div id='4.sentence-57' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-58' class='sentence'><span class='texttt'>(&amp;a)-&gt;~X()</span></div></td><td class='left'><div id='4.sentence-59' class='sentence'><span class='texttt'>void</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-60' class='sentence'>the destructor is applied to every element of <span class='texttt'>a</span>; any memory obtained is deallocated<a class='hidden_link' href='#4.sentence-60'>.</a></div></td><td class='left'><div id='4.sentence-61' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-62' class='sentence'><span class='texttt'>a.begin()</span></div></td><td class='left'><div id='4.sentence-63' class='sentence'><span class='texttt'>iterator</span>; <span class='texttt'>const_&shy;iterator</span> for constant <span class='texttt'>a</span></div></td><td class='left'></td><td class='left'></td><td class='left'><div id='4.sentence-64' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-65' class='sentence'><span class='texttt'>a.end()</span></div></td><td class='left'><div id='4.sentence-66' class='sentence'><span class='texttt'>iterator</span>; <span class='texttt'>const_&shy;iterator</span> for constant <span class='texttt'>a</span></div></td><td class='left'></td><td class='left'></td><td class='left'><div id='4.sentence-67' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-68' class='sentence'><span class='texttt'>a.cbegin()</span></div></td><td class='left'><div id='4.sentence-69' class='sentence'><span class='texttt'>const_&shy;iterator</span></div></td><td class='left'><div id='4.sentence-70' class='sentence'><span class='texttt'>const_&shy;cast&lt;&#x200b;X const&amp;&#x200b;&gt;(a)&#x200b;.begin();</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-71' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-72' class='sentence'><span class='texttt'>a.cend()</span></div></td><td class='left'><div id='4.sentence-73' class='sentence'><span class='texttt'>const_&shy;iterator</span></div></td><td class='left'><div id='4.sentence-74' class='sentence'><span class='texttt'>const_&shy;cast&lt;&#x200b;X const&amp;&#x200b;&gt;(a)&#x200b;.end();</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-75' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-76' class='sentence'><span class='texttt'>a == b</span></div></td><td class='left'><div id='4.sentence-77' class='sentence'>convertible to <span class='texttt'>bool</span></div></td><td class='left'><div id='4.sentence-78' class='sentence'><span class='texttt'>==</span> is an equivalence relation<a class='hidden_link' href='#4.sentence-78'>.</a></div> <div id='4.sentence-79' class='sentence'><span class='texttt'>equal(&#x200b;a.begin(), a.end(), b.begin(), b.end())</span></div></td><td class='left'><div id='4.sentence-80' class='sentence'><span class='textit'>Requires:</span> &nbsp;<span class='texttt'>T</span> is <span class='texttt'>EqualityComparable</span></div></td><td class='left'><div id='4.sentence-81' class='sentence'>Constant if <span class='texttt'>a.size() != b.size()</span>,
 linear otherwise</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-82' class='sentence'><span class='texttt'>a != b</span></div></td><td class='left'><div id='4.sentence-83' class='sentence'>convertible to <span class='texttt'>bool</span></div></td><td class='left'><div id='4.sentence-84' class='sentence'>Equivalent to <span class='texttt'>!(a == b)</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-85' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-86' class='sentence'><span class='texttt'>a.swap(b)</span></div></td><td class='left'><div id='4.sentence-87' class='sentence'><span class='texttt'>void</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-88' class='sentence'>exchanges the contents of <span class='texttt'>a</span> and <span class='texttt'>b</span></div></td><td class='left'><div id='4.sentence-89' class='sentence'>(Note A)</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-90' class='sentence'><span class='texttt'>swap(a, b)</span></div></td><td class='left'><div id='4.sentence-91' class='sentence'><span class='texttt'>void</span></div></td><td class='left'><div id='4.sentence-92' class='sentence'><span class='texttt'>a.swap(b)</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-93' class='sentence'>(Note A)</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-94' class='sentence'><span class='texttt'>r = a</span></div></td><td class='left'><div id='4.sentence-95' class='sentence'><span class='texttt'>X&amp;</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-96' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>r == a</span><a class='hidden_link' href='#4.sentence-96'>.</a></div></td><td class='left'><div id='4.sentence-97' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-98' class='sentence'><span class='texttt'>a.size()</span></div></td><td class='left'><div id='4.sentence-99' class='sentence'><span class='texttt'>size_&shy;type</span></div></td><td class='left'><div id='4.sentence-100' class='sentence'><span class='texttt'>distance(&#x200b;a.begin(), a.end())</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-101' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-102' class='sentence'><span class='texttt'>a.max_&shy;size()</span></div></td><td class='left'><div id='4.sentence-103' class='sentence'><span class='texttt'>size_&shy;type</span></div></td><td class='left'><div id='4.sentence-104' class='sentence'><span class='texttt'>distance(&#x200b;begin(), end())</span>
 for the largest possible container</div></td><td class='left'></td><td class='left'><div id='4.sentence-105' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='4.sentence-106' class='sentence'><span class='texttt'>a.empty()</span></div></td><td class='left'><div id='4.sentence-107' class='sentence'>convertible to <span class='texttt'>bool</span></div></td><td class='left'><div id='4.sentence-108' class='sentence'><span class='texttt'>a.begin() == a.end()</span></div></td><td class='left'></td><td class='left'><div id='4.sentence-109' class='sentence'>constant</div></td></tr></table></div><div id='4.sentence-110' class='sentence'>Those entries marked “(Note A)” or “(Note B)”
have linear complexity for <span class='texttt'>array</span> and have constant complexity
for all other standard containers<a class='hidden_link' href='#4.sentence-110'>.</a></div> <div id='4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-111' class='sentence'>The algorithm <span class='texttt'>equal()</span> is defined in <a href='algorithms'>[algorithms]</a><a class='hidden_link' href='#4.sentence-111'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L275'>#</a></div><div id='5.sentence-1' class='sentence'>The member function <span class='texttt'>size()</span> returns the number of elements in the container<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>The number of elements is defined by the rules of
constructors, inserts, and erases<a class='hidden_link' href='#5.sentence-2'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L280'>#</a></div><div id='6.sentence-1' class='sentence'><span class='texttt'>begin()</span>
returns an iterator referring to the first element in the container<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'><span class='texttt'>end()</span>
returns an iterator which is the past-the-end value for the container<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>If the container is empty, then
<span class='texttt'>begin() == end()</span><a class='hidden_link' href='#6.sentence-3'>.</a></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L288'>#</a></div><div id='7.sentence-1' class='sentence'>In the expressions
<pre class='codeblock'>
i == j
i != j
i &lt; j
i &lt;= j
i &gt;= j
i &gt; j
i - j</pre>
where <span class='texttt'>i</span> and <span class='texttt'>j</span> denote objects of a container's <span class='texttt'>iterator</span>
type, either or both may be replaced by an object of the container's
<span class='texttt'>const_&shy;iterator</span> type referring to the same element with no change in semantics<a class='hidden_link' href='#7.sentence-1'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L303'>#</a></div><div id='8.sentence-1' class='sentence'>Unless otherwise specified, all containers defined in this clause obtain memory
using an allocator (see <a href='allocator.requirements'>[allocator.requirements]</a>)<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='8.sentence-10' class='sentence'>In particular, containers and iterators do not store references
to allocated elements other than through the allocator's pointer type,
i.e., as objects of type <span class='texttt'>P</span> or
<span class='texttt'>pointer_&shy;traits&lt;P&gt;&#x200b;::&#x200b;template rebind&lt;<span class='textit'><span class='texttt'>unspecified</span></span>&gt;</span>,
where <span class='texttt'>P</span> is <span class='texttt'>allocator_&shy;traits&lt;allocator_&shy;type&gt;&#x200b;::&#x200b;pointer</span><a class='hidden_link' href='#8.sentence-10'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='8.sentence-2' class='sentence'>
Copy constructors for these container types obtain an allocator by calling
<span class='texttt'>allocator_&shy;traits&lt;allocator_&shy;type&gt;&#x200b;::&#x200b;select_&shy;on_&shy;container_&shy;copy_&shy;construction</span>
on the allocator belonging to the container being copied<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>Move constructors obtain an allocator by move construction from the allocator belonging to
the container being moved<a class='hidden_link' href='#8.sentence-3'>.</a></div> <div id='8.sentence-4' class='sentence'>Such move construction of the allocator shall not exit via an
exception<a class='hidden_link' href='#8.sentence-4'>.</a></div> <div id='8.sentence-5' class='sentence'>All other constructors for these container types take a
<span class='texttt'>const allocator_&shy;type&amp;</span> argument<a class='hidden_link' href='#8.sentence-5'>.</a></div> <div id='8.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#8.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='8.sentence-11' class='sentence'>If an invocation of a constructor uses the default value of an optional
allocator argument, then the <span class='texttt'>Allocator</span> type must support value-initialization<a class='hidden_link' href='#8.sentence-11'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='8.sentence-6' class='sentence'>
A copy of this allocator is used for any memory allocation and element construction
performed, by these constructors and by all member functions,
during the lifetime of each container object
or until the allocator is replaced<a class='hidden_link' href='#8.sentence-6'>.</a></div> <div id='8.sentence-7' class='sentence'>The allocator may be replaced only via assignment or
<span class='texttt'>swap()</span><a class='hidden_link' href='#8.sentence-7'>.</a></div> <div id='8.sentence-8' class='sentence'>Allocator replacement is performed by
copy assignment, move assignment, or swapping of the allocator only if
<span class='texttt'>allocator_&shy;traits&lt;allocator_&shy;type&gt;&#x200b;::&#x200b;propagate_&shy;on_&shy;container_&shy;copy_&shy;assignment&#x200b;::&#x200b;value</span>,
<span class='texttt'>allocator_&shy;traits&lt;allocator_&shy;type&gt;&#x200b;::&#x200b;propagate_&shy;on_&shy;container_&shy;move_&shy;assignment&#x200b;::&#x200b;value</span>,
or <span class='texttt'>allocator_&shy;traits&lt;allocator_&shy;type&gt;&#x200b;::&#x200b;propagate_&shy;on_&shy;container_&shy;swap&#x200b;::&#x200b;value</span> is <span class='texttt'>true</span>
within the implementation of the corresponding container operation<a class='hidden_link' href='#8.sentence-8'>.</a></div> <div id='8.sentence-9' class='sentence'>In all container types defined in this Clause, the member <span class='texttt'>get_&shy;allocator()</span>
returns a copy of the allocator used to construct the container or, if that allocator
has been replaced, a copy of the most recent replacement<a class='hidden_link' href='#8.sentence-9'>.</a></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L336'>#</a></div><div id='9.sentence-1' class='sentence'>The expression <span class='texttt'>a.swap(b)</span>, for containers <span class='texttt'>a</span> and <span class='texttt'>b</span> of a standard
container type other than <span class='texttt'>array</span>, shall exchange the values of <span class='texttt'>a</span> and
<span class='texttt'>b</span> without invoking any move, copy, or swap operations on the individual
container elements<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'>Lvalues of any <span class='texttt'>Compare</span>, <span class='texttt'>Pred</span>, or <span class='texttt'>Hash</span> types
belonging to <span class='texttt'>a</span> and <span class='texttt'>b</span> shall be swappable
and shall be exchanged by calling <span class='texttt'>swap</span>
as described in <a href='swappable.requirements'>[swappable.requirements]</a><a class='hidden_link' href='#9.sentence-2'>.</a></div> <div id='9.sentence-3' class='sentence'>If
<span class='texttt'>allocator_&shy;traits&lt;allocator_&shy;type&gt;&#x200b;::&#x200b;propagate_&shy;on_&shy;container_&shy;swap&#x200b;::&#x200b;value</span> is
<span class='texttt'>true</span>, then
lvalues of type <span class='texttt'>allocator_&shy;type</span> shall be swappable and
the allocators of <span class='texttt'>a</span> and <span class='texttt'>b</span> shall also be exchanged
by calling <span class='texttt'>swap</span> as described in <a href='swappable.requirements'>[swappable.requirements]</a><a class='hidden_link' href='#9.sentence-3'>.</a></div> <div id='9.sentence-4' class='sentence'>Otherwise, the allocators shall not be swapped, and the behavior is
undefined unless <span class='texttt'>a.get_&shy;allocator() == b.get_&shy;allocator()</span><a class='hidden_link' href='#9.sentence-4'>.</a></div> <div id='9.sentence-5' class='sentence'>Every iterator
referring to an element in one container before the swap shall refer to the same
element in the other container after the swap<a class='hidden_link' href='#9.sentence-5'>.</a></div> <div id='9.sentence-6' class='sentence'>It is unspecified whether an iterator
with value <span class='texttt'>a.end()</span> before the swap will have value <span class='texttt'>b.end()</span> after the
swap<a class='hidden_link' href='#9.sentence-6'>.</a></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L357'>#</a></div><div id='10.sentence-1' class='sentence'>If the iterator type of a container belongs to the bidirectional or
random access <a href='iterator.requirements'>iterator categories</a>,
the container is called
<a class='hidden_link' href='#def:reversible' id='def:reversible'><i>reversible</i></a>
and satisfies the additional requirements
in Table <a href='#tab:containers.reversible.requirements'>84</a><a class='hidden_link' href='#10.sentence-1'>.</a></div><div class='numberedTable' id='tab:containers.reversible.requirements'>Table <a href='#tab:containers.reversible.requirements'>84</a> — Reversible container requirements<br><table ><tr class='rowsep'><td colspan='1' class='center'><div id='10.sentence-2' class='sentence'><b>Expression</b></div></td><td colspan='1' class='center'><div id='10.sentence-3' class='sentence'><b>Return type</b></div></td><td colspan='1' class='center'><div id='10.sentence-4' class='sentence'><b>Assertion/note</b></div></td><td colspan='1' class='center'><div id='10.sentence-5' class='sentence'><b>Complexity</b></div></td></tr><tr ><td class='left'></td><td class='left'></td><td colspan='1' class='center'><div id='10.sentence-6' class='sentence'><b>pre-/post-condition</b></div></td><td class='left'></td></tr><tr class='capsep'><td class='left'><div id='10.sentence-7' class='sentence'>
<span class='texttt'>X&#x200b;::&#x200b;reverse_&shy;iterator</span></div></td><td class='left'><div id='10.sentence-8' class='sentence'>iterator type whose value type is <span class='texttt'>T</span></div></td><td class='left'><div id='10.sentence-9' class='sentence'><span class='texttt'>reverse_&shy;iterator&lt;iterator&gt;</span></div></td><td class='left'><div id='10.sentence-10' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='10.sentence-11' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;const_&shy;reverse_&shy;iterator</span></div></td><td class='left'><div id='10.sentence-12' class='sentence'>constant iterator type whose value type is <span class='texttt'>T</span></div></td><td class='left'><div id='10.sentence-13' class='sentence'><span class='texttt'>reverse_&shy;iterator&lt;const_&shy;iterator&gt;</span></div></td><td class='left'><div id='10.sentence-14' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='10.sentence-15' class='sentence'><span class='texttt'>a.rbegin()</span></div></td><td class='left'><div id='10.sentence-16' class='sentence'><span class='texttt'>reverse_&shy;iterator; const_&shy;reverse_&shy;iterator</span> for constant <span class='texttt'>a</span></div></td><td class='left'><div id='10.sentence-17' class='sentence'><span class='texttt'>reverse_&shy;iterator(end())</span></div></td><td class='left'><div id='10.sentence-18' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='10.sentence-19' class='sentence'><span class='texttt'>a.rend()</span></div></td><td class='left'><div id='10.sentence-20' class='sentence'><span class='texttt'>reverse_&shy;iterator; const_&shy;reverse_&shy;iterator</span> for constant <span class='texttt'>a</span></div></td><td class='left'><div id='10.sentence-21' class='sentence'><span class='texttt'>reverse_&shy;iterator(begin())</span></div></td><td class='left'><div id='10.sentence-22' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='10.sentence-23' class='sentence'><span class='texttt'>a.crbegin()</span></div></td><td class='left'><div id='10.sentence-24' class='sentence'><span class='texttt'>const_&shy;reverse_&shy;iterator</span></div></td><td class='left'><div id='10.sentence-25' class='sentence'><span class='texttt'>const_&shy;cast&lt;X const&amp;&gt;(a).rbegin()</span></div></td><td class='left'><div id='10.sentence-26' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='10.sentence-27' class='sentence'><span class='texttt'>a.crend()</span></div></td><td class='left'><div id='10.sentence-28' class='sentence'><span class='texttt'>const_&shy;reverse_&shy;iterator</span></div></td><td class='left'><div id='10.sentence-29' class='sentence'><span class='texttt'>const_&shy;cast&lt;X const&amp;&gt;(a).rend()</span></div></td><td class='left'><div id='10.sentence-30' class='sentence'>constant</div></td></tr></table></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L405'>#</a></div><div id='11.sentence-1' class='sentence'>Unless otherwise specified (see <a href='associative.reqmts.except'>[associative.reqmts.except]</a>, <a href='unord.req.except'>[unord.req.except]</a>, <a href='deque.modifiers'>[deque.modifiers]</a>, and
<a href='vector.modifiers'>[vector.modifiers]</a>)
all container types defined in this Clause meet
the following additional requirements:</div><div id='11.sentence-2' class='sentence'><ul class='itemize'><li id='11.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#11.1'>(11.1)</a></div><div id='11.1.sentence-1' class='sentence'>if an exception is thrown by an
<span class='texttt'>insert()</span> or <span class='texttt'>emplace()</span>
function while inserting a single element, that
function has no effects<a class='hidden_link' href='#11.1.sentence-1'>.</a></div></li><li id='11.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#11.2'>(11.2)</a></div><div id='11.2.sentence-1' class='sentence'>if an exception is thrown by a
<span class='texttt'>push_&shy;back()</span>,
<span class='texttt'>push_&shy;front()</span>,
<span class='texttt'>emplace_&shy;back()</span>, or <span class='texttt'>emplace_&shy;front()</span>
function, that function has no effects<a class='hidden_link' href='#11.2.sentence-1'>.</a></div></li><li id='11.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#11.3'>(11.3)</a></div><div id='11.3.sentence-1' class='sentence'>no
<span class='texttt'>erase()</span>,
<span class='texttt'>clear()</span>,
<span class='texttt'>pop_&shy;back()</span>
or
<span class='texttt'>pop_&shy;front()</span>
function throws an exception<a class='hidden_link' href='#11.3.sentence-1'>.</a></div></li><li id='11.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#11.4'>(11.4)</a></div><div id='11.4.sentence-1' class='sentence'>no copy constructor or assignment operator of a returned iterator
throws an exception<a class='hidden_link' href='#11.4.sentence-1'>.</a></div></li><li id='11.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#11.5'>(11.5)</a></div><div id='11.5.sentence-1' class='sentence'>no
<span class='texttt'>swap()</span>
function throws an exception<a class='hidden_link' href='#11.5.sentence-1'>.</a></div></li><li id='11.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#11.6'>(11.6)</a></div><div id='11.6.sentence-1' class='sentence'>no
<span class='texttt'>swap()</span>
function invalidates any references,
pointers, or iterators referring to the elements
of the containers being swapped<a class='hidden_link' href='#11.6.sentence-1'>.</a></div> <div id='11.6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#11.6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='11.6.sentence-2' class='sentence'>The <span class='texttt'>end()</span> iterator does not refer to any element, so it may be invalidated<a class='hidden_link' href='#11.6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L446'>#</a></div><div id='12.sentence-1' class='sentence'>Unless otherwise specified (either explicitly or by defining a
function in terms of other functions), invoking a container member
function or passing a container as an argument to a library function
shall not invalidate iterators to, or change the values of, objects
within that container<a class='hidden_link' href='#12.sentence-1'>.</a></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L453'>#</a></div><div id='13.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':container,contiguous'></a></span>A <a class='hidden_link' href='#def:contiguous_container' id='def:contiguous_container'><i >contiguous container</i></a>
is a container that supports <a href='random.access.iterators'>random access iterators</a>
and whose member types <span class='texttt'>iterator</span> and <span class='texttt'>const_&shy;iterator</span>
are <a href='iterator.requirements.general#def:contiguous_iterators'>contiguous iterators</a><a class='hidden_link' href='#13.sentence-1'>.</a></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L460'>#</a></div><div id='14.sentence-1' class='sentence'>Table <a href='#tab:containers.optional.operations'>85</a> lists operations that are provided
for some types of containers but not others<a class='hidden_link' href='#14.sentence-1'>.</a></div> <div id='14.sentence-2' class='sentence'>Those containers for which the
listed operations are provided shall implement the semantics described in
Table <a href='#tab:containers.optional.operations'>85</a> unless otherwise stated<a class='hidden_link' href='#14.sentence-2'>.</a></div><div class='numberedTable' id='tab:containers.optional.operations'>Table <a href='#tab:containers.optional.operations'>85</a> — Optional container operations<br><table ><tr class='rowsep'><td colspan='1' class='center'><div id='14.sentence-3' class='sentence'><b>Expression</b></div></td><td colspan='1' class='center'><div id='14.sentence-4' class='sentence'><b>Return type</b></div></td><td colspan='1' class='center'><div id='14.sentence-5' class='sentence'><b>Operational</b></div></td><td colspan='1' class='center'><div id='14.sentence-6' class='sentence'><b>Assertion/note</b></div></td><td colspan='1' class='center'><div id='14.sentence-7' class='sentence'><b>Complexity</b></div></td></tr><tr ><td class='left'></td><td class='left'></td><td colspan='1' class='center'><div id='14.sentence-8' class='sentence'><b>semantics</b></div></td><td colspan='1' class='center'><div id='14.sentence-9' class='sentence'><b>pre-/post-condition</b></div></td><td class='left'></td></tr><tr class='capsep'><td class='left'><div style='height:0.6em;display:block'></div><div id='14.sentence-10' class='sentence'><span class='texttt'>a &lt; b</span></div></td><td class='left'><div id='14.sentence-11' class='sentence'>convertible to <span class='texttt'>bool</span></div></td><td class='left'><div id='14.sentence-12' class='sentence'><span class='texttt'>lexicographical_&shy;compare( a.begin(), a.end(), b.begin(), b.end())</span></div></td><td class='left'><div id='14.sentence-13' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>&lt;</span> is defined for values of <span class='texttt'>T</span><a class='hidden_link' href='#14.sentence-13'>.</a></div> <div id='14.sentence-14' class='sentence'><span class='texttt'>&lt;</span> is a total ordering relationship<a class='hidden_link' href='#14.sentence-14'>.</a></div></td><td class='left'><div id='14.sentence-15' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='14.sentence-16' class='sentence'><span class='texttt'>a &gt; b</span></div></td><td class='left'><div id='14.sentence-17' class='sentence'>convertible to <span class='texttt'>bool</span></div></td><td class='left'><div id='14.sentence-18' class='sentence'><span class='texttt'>b &lt; a</span></div></td><td class='left'></td><td class='left'><div id='14.sentence-19' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='14.sentence-20' class='sentence'><span class='texttt'>a &lt;= b</span></div></td><td class='left'><div id='14.sentence-21' class='sentence'>convertible to <span class='texttt'>bool</span></div></td><td class='left'><div id='14.sentence-22' class='sentence'><span class='texttt'>!(a &gt; b)</span></div></td><td class='left'></td><td class='left'><div id='14.sentence-23' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='14.sentence-24' class='sentence'><span class='texttt'>a &gt;= b</span></div></td><td class='left'><div id='14.sentence-25' class='sentence'>convertible to <span class='texttt'>bool</span></div></td><td class='left'><div id='14.sentence-26' class='sentence'><span class='texttt'>!(a &lt; b)</span></div></td><td class='left'></td><td class='left'><div id='14.sentence-27' class='sentence'>linear</div></td></tr></table></div><div id='14.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#14.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='14.sentence-28' class='sentence'>The algorithm <span class='texttt'>lexicographical_&shy;compare()</span> is defined in <a href='algorithms'>[algorithms]</a><a class='hidden_link' href='#14.sentence-28'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L510'>#</a></div><div id='15.sentence-1' class='sentence'>All of the containers defined in this Clause and in <a href='basic.string'>[basic.string]</a> except <span class='texttt'>array</span>
meet the additional requirements of an allocator-aware container, as described in
Table <a href='#tab:containers.allocatoraware'>86</a><a class='hidden_link' href='#15.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='15.sentence-2' class='sentence'>Given an allocator type <span class='texttt'>A</span>
and given a container type <span class='texttt'>X</span> having a <span class='texttt'>value_&shy;type</span> identical to <span class='texttt'>T</span>
and an <span class='texttt'>allocator_&shy;type</span> identical to <span class='texttt'>allocator_&shy;traits&lt;A&gt;&#x200b;::&#x200b;rebind_&shy;alloc&lt;T&gt;</span>
and given an lvalue <span class='texttt'>m</span> of type <span class='texttt'>A</span>,
a pointer <span class='texttt'>p</span> of type <span class='texttt'>T*</span>,
an expression <span class='texttt'>v</span> of type (possibly <span class='texttt'>const</span>) <span class='texttt'>T</span>,
and an rvalue <span class='texttt'>rv</span> of type <span class='texttt'>T</span>,
the following terms are defined<a class='hidden_link' href='#15.sentence-2'>.</a></div> <div id='15.sentence-3' class='sentence'>If <span class='texttt'>X</span>
is not allocator-aware, the terms below are defined as if <span class='texttt'>A</span> were
<span class='texttt'>allocator&lt;T&gt;</span> — no allocator object needs to be created
and user specializations of <span class='texttt'>allocator&lt;T&gt;</span> are not instantiated:</div><div id='15.sentence-4' class='sentence'><ul class='itemize'><li id='15.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.1'>(15.1)</a></div><div id='15.1.sentence-1' class='sentence'><span class='texttt'>T</span> is <a class='hidden_link' href='#def:DefaultInsertable_into_X' id='def:DefaultInsertable_into_X'><i ><span class='texttt'>DefaultInsertable</span> into <span class='texttt'>X</span></i></a>
means that the following expression is well-formed:
<pre class='codeblock'>
allocator_traits&lt;A&gt;::construct(m, p)</pre></div></li><li id='15.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.2'>(15.2)</a></div><div id='15.2.sentence-1' class='sentence'>An element of <span class='texttt'>X</span> is <a class='hidden_link' href='#def:default-inserted' id='def:default-inserted'><i >default-inserted</i></a> if it is initialized
by evaluation of the expression
<pre class='codeblock'>
allocator_traits&lt;A&gt;::construct(m, p)</pre>
where <span class='texttt'>p</span> is the address of the uninitialized storage for the element
allocated within <span class='texttt'>X</span><a class='hidden_link' href='#15.2.sentence-1'>.</a></div></li><li id='15.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.3'>(15.3)</a></div><div id='15.3.sentence-1' class='sentence'><span class='texttt'>T</span> is <a class='hidden_link' href='#def:MoveInsertable_into_X' id='def:MoveInsertable_into_X'><i ><span class='texttt'>MoveInsertable</span> into <span class='texttt'>X</span></i></a>
means that the following expression
is well-formed:
<pre class='codeblock'>
allocator_traits&lt;A&gt;::construct(m, p, rv)</pre>
and its evaluation causes the following postcondition to hold: The value
of <span class='texttt'>*p</span> is equivalent to the value of <span class='texttt'>rv</span> before the evaluation<a class='hidden_link' href='#15.3.sentence-1'>.</a></div> <div id='15.3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#15.3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='15.3.sentence-2' class='sentence'><span class='texttt'>rv</span> remains a valid object<a class='hidden_link' href='#15.3.sentence-2'>.</a></div> <div id='15.3.sentence-3' class='sentence'>Its state is unspecified</div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='15.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.4'>(15.4)</a></div><div id='15.4.sentence-1' class='sentence'><span class='texttt'>T</span> is <a class='hidden_link' href='#def:CopyInsertable_into_X' id='def:CopyInsertable_into_X'><i ><span class='texttt'>CopyInsertable</span> into <span class='texttt'>X</span></i></a>
means that, in addition to <span class='texttt'>T</span> being <span class='texttt'>MoveInsertable</span> into
<span class='texttt'>X</span>, the following expression is well-formed:
<pre class='codeblock'>
allocator_traits&lt;A&gt;::construct(m, p, v)</pre>
and its evaluation causes the following postcondition to hold:
The value of <span class='texttt'>v</span> is unchanged and is equivalent to <span class='texttt'>*p</span><a class='hidden_link' href='#15.4.sentence-1'>.</a></div></li><li id='15.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.5'>(15.5)</a></div><div id='15.5.sentence-1' class='sentence'><span class='texttt'>T</span> is
<a class='hidden_link' href='#def:EmplaceConstructible_into_X_from_args' id='def:EmplaceConstructible_into_X_from_args'><i ><span class='texttt'>EmplaceConstructible</span> into <span class='texttt'>X</span> from <span class='texttt'>args</span></i></a>,
for zero
or more arguments <span class='texttt'>args</span>, means that the following expression is well-formed:
<pre class='codeblock'>
allocator_traits&lt;A&gt;::construct(m, p, args)</pre></div></li><li id='15.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.6'>(15.6)</a></div><div id='15.6.sentence-1' class='sentence'><span class='texttt'>T</span> is
<a class='hidden_link' href='#def:Erasable_from_X' id='def:Erasable_from_X'><i ><span class='texttt'>Erasable</span> from <span class='texttt'>X</span></i></a>
means that the following expression is well-formed:
<pre class='codeblock'>
allocator_traits&lt;A&gt;::destroy(m, p)</pre></div></li></ul></div><div id='15.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#15.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='15.sentence-5' class='sentence'>A container calls <span class='texttt'>allocator_&shy;traits&lt;A&gt;&#x200b;::&#x200b;construct(m, p, args)</span>
to construct an element at <span class='texttt'>p</span> using <span class='texttt'>args</span>,
with <span class='texttt'>m == get_&shy;allocator()</span><a class='hidden_link' href='#15.sentence-5'>.</a></div> <div id='15.sentence-6' class='sentence'>The default <span class='texttt'>construct</span> in <span class='texttt'>allocator</span> will
call <span class='texttt'>&#x200b;::&#x200b;new((void*)p) T(args)</span>,
but specialized allocators may choose a different definition<a class='hidden_link' href='#15.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L597'>#</a></div><div id='16.sentence-1' class='sentence'>In Table <a href='#tab:containers.allocatoraware'>86</a>, <span class='texttt'>X</span> denotes an allocator-aware container class
with a <span class='texttt'>value_&shy;type</span> of <span class='texttt'>T</span> using allocator of type <span class='texttt'>A</span>, <span class='texttt'>u</span> denotes a
variable,
<span class='texttt'>a</span> and <span class='texttt'>b</span> denote non-const lvalues of type <span class='texttt'>X</span>,
<span class='texttt'>t</span> denotes an lvalue or a const rvalue of type <span class='texttt'>X</span>, <span class='texttt'>rv</span> denotes a
non-const rvalue of type <span class='texttt'>X</span>, and <span class='texttt'>m</span> is a value of type <span class='texttt'>A</span><a class='hidden_link' href='#16.sentence-1'>.</a></div><div class='numberedTable' id='tab:containers.allocatoraware'>Table <a href='#tab:containers.allocatoraware'>86</a> — Allocator-aware container requirements<br><table ><tr class='rowsep'><td colspan='1' class='center'><div id='16.sentence-2' class='sentence'><b>Expression</b></div></td><td colspan='1' class='center'><div id='16.sentence-3' class='sentence'><b>Return type</b></div></td><td colspan='1' class='center'><div id='16.sentence-4' class='sentence'><b>Assertion/note</b></div></td><td colspan='1' class='center'><div id='16.sentence-5' class='sentence'><b>Complexity</b></div></td></tr><tr ><td class='left'></td><td class='left'></td><td colspan='1' class='center'><div id='16.sentence-6' class='sentence'><b>pre-/post-condition</b></div></td><td class='left'></td></tr><tr class='capsep'><td class='left'><div style='height:0.6em;display:block'></div><div id='16.sentence-7' class='sentence'><span class='texttt'>allocator_&shy;type</span></div></td><td class='left'><div id='16.sentence-8' class='sentence'><span class='texttt'>A</span></div></td><td class='left'><div id='16.sentence-9' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>allocator_&shy;type&#x200b;::&#x200b;value_&shy;type</span> is the same as <span class='texttt'>X&#x200b;::&#x200b;value_&shy;type</span><a class='hidden_link' href='#16.sentence-9'>.</a></div></td><td class='left'><div id='16.sentence-10' class='sentence'>compile time</div></td></tr><tr class='rowsep'><td class='left'><div id='16.sentence-11' class='sentence'><span class='texttt'>get_&shy;-</span> <span class='texttt'>allocator()</span></div></td><td class='left'><div id='16.sentence-12' class='sentence'><span class='texttt'>A</span></div></td><td class='left'></td><td class='left'><div id='16.sentence-13' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='16.sentence-14' class='sentence'><span class='texttt'>X()</span><br/>
<span class='texttt'>X u;</span></div></td><td class='left'></td><td class='left'><div id='16.sentence-15' class='sentence'><span class='textit'>Requires:</span> &nbsp;<span class='texttt'>A</span> is <span class='texttt'>DefaultConstructible</span><a class='hidden_link' href='#16.sentence-15'>.</a></div> <div id='16.sentence-16' class='sentence'><br/>
  <span class='textit'>Postconditions:</span> <span class='texttt'>u.empty()</span> returns <span class='texttt'>true</span>,
  <span class='texttt'>u.get_&shy;allocator() == A()</span></div></td><td class='left'><div id='16.sentence-17' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='16.sentence-18' class='sentence'><span class='texttt'>X(m)</span></div></td><td class='left'></td><td class='left'><div id='16.sentence-19' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>u.empty()</span> returns <span class='texttt'>true</span>,</div></td><td class='left'><div id='16.sentence-20' class='sentence'>constant</div></td></tr><tr ><td class='left'><div id='16.sentence-21' class='sentence'><span class='texttt'>X u(m);</span></div></td><td class='left'></td><td class='left'><div id='16.sentence-22' class='sentence'><span class='texttt'>u.get_&shy;allocator() == m</span></div></td><td class='left'></td></tr><tr class='rowsep'><td class='left'><div id='16.sentence-23' class='sentence'><span class='texttt'>X(t, m)</span><br/>
<span class='texttt'>X u(t, m);</span></div></td><td class='left'></td><td class='left'><div id='16.sentence-24' class='sentence'><span class='textit'>Requires:</span> &nbsp;<span class='texttt'>T</span> is <span class='texttt'>CopyInsertable</span> into <span class='texttt'>X</span><a class='hidden_link' href='#16.sentence-24'>.</a></div> <div id='16.sentence-25' class='sentence'><br/>
<span class='textit'>Postconditions:</span> <span class='texttt'>u == t</span>, <span class='texttt'>u.get_&shy;allocator() == m</span></div></td><td class='left'><div id='16.sentence-26' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='16.sentence-27' class='sentence'><span class='texttt'>X(rv)</span><br/>
<span class='texttt'>X u(rv);</span></div></td><td class='left'></td><td class='left'><div id='16.sentence-28' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>u</span> shall have the same elements as <span class='texttt'>rv</span> had before this
  construction; the value of <span class='texttt'>u.get_&shy;allocator()</span> shall be the same as the
  value of <span class='texttt'>rv.get_&shy;allocator()</span> before this construction<a class='hidden_link' href='#16.sentence-28'>.</a></div></td><td class='left'><div id='16.sentence-29' class='sentence'>constant</div></td></tr><tr class='rowsep'><td class='left'><div id='16.sentence-30' class='sentence'><span class='texttt'>X(rv, m)</span><br/>
<span class='texttt'>X u(rv, m);</span></div></td><td class='left'></td><td class='left'><div id='16.sentence-31' class='sentence'><span class='textit'>Requires:</span> &nbsp;<span class='texttt'>T</span> is
  <span class='texttt'>MoveInsertable</span> into <span class='texttt'>X</span><a class='hidden_link' href='#16.sentence-31'>.</a></div> <div id='16.sentence-32' class='sentence'><br/>
  <span class='textit'>Postconditions:</span> <span class='texttt'>u</span> shall have the same elements,
  or copies of the elements, that <span class='texttt'>rv</span> had before
  this construction, <span class='texttt'>u.get_&shy;allocator() == m</span></div></td><td class='left'><div id='16.sentence-33' class='sentence'>constant if <span class='texttt'>m ==</span> <span class='texttt'>rv.get_&shy;allocator()</span>, otherwise linear</div></td></tr><tr class='rowsep'><td class='left'><div id='16.sentence-34' class='sentence'><span class='texttt'>a = t</span></div></td><td class='left'><div id='16.sentence-35' class='sentence'><span class='texttt'>X&amp;</span></div></td><td class='left'><div id='16.sentence-36' class='sentence'><span class='textit'>Requires:</span> &nbsp;<span class='texttt'>T</span> is
  <span class='texttt'>CopyInsertable</span> into <span class='texttt'>X</span>
  and <span class='texttt'>CopyAssignable</span><a class='hidden_link' href='#16.sentence-36'>.</a></div> <div id='16.sentence-37' class='sentence'><br/>
  <span class='textit'>Postconditions:</span> <span class='texttt'>a == t</span></div></td><td class='left'><div id='16.sentence-38' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='16.sentence-39' class='sentence'><span class='texttt'>a = rv</span></div></td><td class='left'><div id='16.sentence-40' class='sentence'><span class='texttt'>X&amp;</span></div></td><td class='left'><div id='16.sentence-41' class='sentence'><span class='textit'>Requires:</span> &nbsp;If <span class='texttt'>allocator_&shy;-</span><br/>
  <span class='texttt'>traits&lt;allocator_&shy;type&gt;</span><br/>
  <span class='texttt'>&#x200b;::&#x200b;propagate_&shy;on_&shy;container_&shy;-</span><br/>
  <span class='texttt'>move_&shy;assignment&#x200b;::&#x200b;value</span> is<br/>
  <span class='texttt'>false</span>, <span class='texttt'>T</span> is
  <span class='texttt'>MoveInsertable</span> into <span class='texttt'>X</span> and
  <span class='texttt'>MoveAssignable</span><a class='hidden_link' href='#16.sentence-41'>.</a></div> <div id='16.sentence-42' class='sentence'>All existing elements of <span class='texttt'>a</span>
  are either move assigned to or destroyed<a class='hidden_link' href='#16.sentence-42'>.</a></div> <div id='16.sentence-43' class='sentence'><br/>
  <span class='textit'>Postconditions:</span> <span class='texttt'>a</span> shall be equal to the value that <span class='texttt'>rv</span> had before
  this assignment<a class='hidden_link' href='#16.sentence-43'>.</a></div></td><td class='left'><div id='16.sentence-44' class='sentence'>linear</div></td></tr><tr class='rowsep'><td class='left'><div id='16.sentence-45' class='sentence'><span class='texttt'>a.swap(b)</span></div></td><td class='left'><div id='16.sentence-46' class='sentence'><span class='texttt'>void</span></div></td><td class='left'><div id='16.sentence-47' class='sentence'>exchanges the contents of <span class='texttt'>a</span> and <span class='texttt'>b</span></div></td><td class='left'><div id='16.sentence-48' class='sentence'>constant</div></td></tr></table></div></div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/27331fd3a2c8b3b78223712d56bbd51be1c9159b/source/containers.tex#L703'>#</a></div><div id='17.sentence-1' class='sentence'>The behavior of certain container member functions and deduction guides
depends on whether types qualify as input iterators or allocators<a class='hidden_link' href='#17.sentence-1'>.</a></div> <div id='17.sentence-2' class='sentence'>The extent to which an implementation determines that a type cannot be an input
iterator is unspecified, except that as a minimum integral types shall not qualify
as input iterators<a class='hidden_link' href='#17.sentence-2'>.</a></div> <div id='17.sentence-3' class='sentence'>Likewise, the extent to which an implementation determines that a type cannot be
an allocator is unspecified, except that as a minimum a type <span class='texttt'>A</span> shall not qualify
as an allocator unless it satisfies both of the following conditions:</div><div id='17.sentence-4' class='sentence'><ul class='itemize'><li id='17.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.1'>(17.1)</a></div><div id='17.1.sentence-1' class='sentence'>The <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> <span class='texttt'>A&#x200b;::&#x200b;value_&shy;type</span>
is valid and denotes a type (<a href='temp.deduct'>[temp.deduct]</a>)<a class='hidden_link' href='#17.1.sentence-1'>.</a></div></li><li id='17.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.2'>(17.2)</a></div><div id='17.2.sentence-1' class='sentence'>The expression <span class='texttt'>declval&lt;A&amp;&gt;().allocate(size_&shy;t{})</span>
is well-formed when treated as an unevaluated operand<a class='hidden_link' href='#17.2.sentence-1'>.</a></div></li></ul></div></div></div></body></html>