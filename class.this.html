<!DOCTYPE html><html lang='en'><head><title>[class.this]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>12</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>12.2</a> Class members <a class='abbr_ref' href='class.mem#class.this'>[class.mem]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>12.2.2</a> Non-static member functions <a class='abbr_ref' href='class.mfct.non-static#class.this'>[class.mfct.non-static]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>12.2.2.1</a> The <span class='texttt'>this</span> pointer <a class='abbr_ref'>[class.this]</a></h4><div id='sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':this'></a></span>
<span class='indexparent'><a class='index' id=':member_function,this'></a></span></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/classes.tex#L1024'>#</a></div><div id='1.sentence-1' class='sentence'>In the body of a non-static <a href='class.mfct'>member function</a>, the
keyword <span class='texttt'>this</span> is a prvalue expression whose value is the
address of the object for which the function is called<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':this,type_of'></a></span>The type of <span class='texttt'>this</span> in a member function of a class <span class='texttt'>X</span> is
<span class='texttt'>X*</span><a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':member_function,const'></a></span>If the member function is declared <span class='texttt'>const</span>, the type of
<span class='texttt'>this</span> is <span class='texttt'>const</span> <span class='texttt'>X*</span>,
<span class='indexparent'><a class='index' id=':member_function,volatile'></a></span>if the member function is declared <span class='texttt'>volatile</span>, the type of
<span class='texttt'>this</span> is <span class='texttt'>volatile</span> <span class='texttt'>X*</span>, and if the member function
is declared <span class='texttt'>const</span> <span class='texttt'>volatile</span>, the type of <span class='texttt'>this</span> is
<span class='texttt'>const</span> <span class='texttt'>volatile</span> <span class='texttt'>X*</span><a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':member_function,const_'></a></span><div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-5' class='sentence'>Thus in a <span class='texttt'>const</span> member function, the object for which the function is
called is accessed through a <span class='texttt'>const</span> access path<a class='hidden_link' href='#1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> 
<div id='1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='1.sentence-6' class='sentence'><pre class='codeblock'>
struct s {
  int a;
  int f() const;
  int g() { return a++; }
  int h() const { return a++; } <span class='comment'>// error
</span>};

int s::f() const { return a; }</pre></div> <div id='1.sentence-7' class='sentence'>The <span class='texttt'>a++</span> in the body of <span class='texttt'>s&#x200b;::&#x200b;h</span> is ill-formed because it
tries to modify (a part of) the object for which <span class='texttt'>s&#x200b;::&#x200b;h()</span> is
called<a class='hidden_link' href='#1.sentence-7'>.</a></div> <div id='1.sentence-8' class='sentence'>This is not allowed in a <span class='texttt'>const</span> member function because
<span class='texttt'>this</span> is a pointer to <span class='texttt'>const</span>; that is, <span class='texttt'>*this</span> has
<span class='texttt'>const</span> type<a class='hidden_link' href='#1.sentence-8'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/classes.tex#L1063'>#</a></div><div id='2.sentence-1' class='sentence'>Similarly, <a href='dcl.type.cv'><span class='texttt'>volatile</span></a> semantics apply in
<span class='texttt'>volatile</span> member functions when accessing the object and its
non-static data members<a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/classes.tex#L1068'>#</a></div><div id='3.sentence-1' class='sentence'>A cv-qualified member function can be called on an
<a href='expr.ref'>object-expression</a> only if the object-expression is as
cv-qualified or less-cv-qualified than the member function<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'><div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='3.sentence-3' class='sentence'><pre class='codeblock'>
void k(s&amp; x, const s&amp; y) {
  x.f();
  x.g();
  y.f();
  y.g();                        <span class='comment'>// error
</span>}</pre></div> <div id='3.sentence-4' class='sentence'>The call <span class='texttt'>y.g()</span> is ill-formed because <span class='texttt'>y</span> is <span class='texttt'>const</span>
and <span class='texttt'>s&#x200b;::&#x200b;g()</span> is a non-<span class='texttt'>const</span> member function, that is,
<span class='texttt'>s&#x200b;::&#x200b;g()</span> is less-qualified than the object-expression <span class='texttt'>y</span><a class='hidden_link' href='#3.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/classes.tex#L1088'>#</a></div><div id='4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':const,constructor_and'></a></span><span class='indexparent'><a class='index' id=':const,destructor_and'></a></span><span class='indexparent'><a class='index' id=':volatile,constructor_and'></a></span><span class='indexparent'><a class='index' id=':volatile,destructor_and'></a></span><a href='class.ctor'>Constructors</a> and <a href='class.dtor'>destructors</a> shall
not be declared <span class='texttt'>const</span>, <span class='texttt'>volatile</span> or <span class='texttt'>const</span>
<span class='texttt'>volatile</span><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'><div id='4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-3' class='sentence'>However, these functions can be invoked to
create and destroy objects with cv-qualified types,
see <a href='class.ctor'>[class.ctor]</a> and <a href='class.dtor'>[class.dtor]</a><a class='hidden_link' href='#4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div></body></html>