<!DOCTYPE html><html lang='en'><head><title>[locale.stdcvt]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>22</a> Localization library <a class='abbr_ref' href='./#localization'>[localization]</a></h1><div id='locale.stdcvt'><h2 ><a class='secnum' style='min-width:88pt'>22.5</a> Standard code conversion facets <a class='abbr_ref'>[locale.stdcvt]</a></h2><div id='codecvt.syn'><h3 ><a class='secnum' href='#codecvt.syn' style='min-width:103pt'>22.5.1</a> Header <span class='texttt'>&lt;codecvt&gt;</span> synopsis <a class='abbr_ref' href='codecvt.syn'>[codecvt.syn]</a></h3><p ><span class='indexparent'><a class='index' id='codecvt'></a></span></p><pre class='codeblock'>
namespace std {
  enum codecvt_mode {
    consume_header = 4,
    generate_header = 2,
    little_endian = 1
  };

  template &lt;class Elem, unsigned long Maxcode = 0x10ffff, codecvt_mode Mode = (codecvt_mode)0&gt;
    class codecvt_utf8 : public codecvt&lt;Elem, char, mbstate_t&gt; {
    public:
      explicit codecvt_utf8(size_t refs = 0);
      ~codecvt_utf8();
    };

  template &lt;class Elem, unsigned long Maxcode = 0x10ffff, codecvt_mode Mode = (codecvt_mode)0&gt;
    class codecvt_utf16 : public codecvt&lt;Elem, char, mbstate_t&gt; {
    public:
      explicit codecvt_utf16(size_t refs = 0);
      ~codecvt_utf16();
    };

  template &lt;class Elem, unsigned long Maxcode = 0x10ffff, codecvt_mode Mode = (codecvt_mode)0&gt;
    class codecvt_utf8_utf16 : public codecvt&lt;Elem, char, mbstate_t&gt; {
    public:
      explicit codecvt_utf8_utf16(size_t refs = 0);
      ~codecvt_utf8_utf16();
    };
}</pre><div class='para' id='codecvt.syn-1'><div class='marginalizedparent'><a class='marginalized' href='#codecvt.syn-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/25fb80b3521531d71bb45c677ed9eace5b39f7ae/source/locales.tex#L5711'>#</a></div><p >The header <span class='texttt'>&lt;codecvt&gt;</span> provides code conversion facets for various character encodings.</p></div></div><div id='req'><h3 ><a class='secnum' href='#req' style='min-width:103pt'>22.5.2</a> Requirements <a class='abbr_ref' href='locale.stdcvt.req'>[locale.stdcvt.req]</a></h3><div class='para' id='req-1'><div class='marginalizedparent'><a class='marginalized' href='#req-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/25fb80b3521531d71bb45c677ed9eace5b39f7ae/source/locales.tex#L5716'>#</a></div><p >For each of the three code conversion facets <span class='texttt'>codecvt_&shy;utf8</span>,
<span class='texttt'>codecvt_&shy;utf16</span>, and <span class='texttt'>codecvt_&shy;utf8_&shy;utf16</span>:
</p><ul class='itemize'><li id='req-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-1.1'>(1.1)</a></div><p ><span class='texttt'>Elem</span> is the wide-character type, such as
  <span class='texttt'>wchar_&shy;t</span>, <span class='texttt'>char16_&shy;t</span>, or <span class='texttt'>char32_&shy;t</span>.
</p></li><li id='req-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-1.2'>(1.2)</a></div><p ><span class='texttt'>Maxcode</span> is the largest wide-character code that the facet
  will read or write without reporting a conversion error.
</p></li><li id='req-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-1.3'>(1.3)</a></div><p >If <span class='texttt'>(Mode &amp; consume_&shy;header)</span>, the facet shall consume an
  initial header sequence, if present, when reading a multibyte sequence
  to determine the endianness of the subsequent multibyte sequence to be read.
</p></li><li id='req-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-1.4'>(1.4)</a></div><p >If <span class='texttt'>(Mode &amp; generate_&shy;header)</span>, the facet shall generate an
  initial header sequence when writing a multibyte sequence to advertise
  the endianness of the subsequent multibyte sequence to be written.
</p></li><li id='req-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-1.5'>(1.5)</a></div><p >If <span class='texttt'>(Mode &amp; little_&shy;endian)</span>, the facet shall generate a
  multibyte sequence in little-endian order,
  as opposed to the default big-endian order.
</p></li></ul></div><div class='para' id='req-2'><div class='marginalizedparent'><a class='marginalized' href='#req-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/25fb80b3521531d71bb45c677ed9eace5b39f7ae/source/locales.tex#L5740'>#</a></div><p >For the facet <span class='texttt'>codecvt_&shy;utf8</span>:
</p><ul class='itemize'><li id='req-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-2.1'>(2.1)</a></div><p >The facet shall convert between UTF-8 multibyte sequences
  and UCS2 or UCS4 (depending on the size of <span class='texttt'>Elem</span>)
  within the program.
</p></li><li id='req-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-2.2'>(2.2)</a></div><p >Endianness shall not affect how multibyte sequences are read or written.
</p></li><li id='req-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-2.3'>(2.3)</a></div><p >The multibyte sequences may be written as either a text or a binary file.
</p></li></ul></div><div class='para' id='req-3'><div class='marginalizedparent'><a class='marginalized' href='#req-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/25fb80b3521531d71bb45c677ed9eace5b39f7ae/source/locales.tex#L5753'>#</a></div><p >For the facet <span class='texttt'>codecvt_&shy;utf16</span>:
</p><ul class='itemize'><li id='req-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-3.1'>(3.1)</a></div><p >The facet shall convert between UTF-16 multibyte sequences
  and UCS2 or UCS4 (depending on the size of <span class='texttt'>Elem</span>)
  within the program.
</p></li><li id='req-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-3.2'>(3.2)</a></div><p >Multibyte sequences shall be read or written
  according to the <span class='texttt'>Mode</span> flag, as set out above.
</p></li><li id='req-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-3.3'>(3.3)</a></div><p >The multibyte sequences may be written only as a binary file.
  Attempting to write to a text file produces undefined behavior.
</p></li></ul></div><div class='para' id='req-4'><div class='marginalizedparent'><a class='marginalized' href='#req-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/25fb80b3521531d71bb45c677ed9eace5b39f7ae/source/locales.tex#L5768'>#</a></div><p >For the facet <span class='texttt'>codecvt_&shy;utf8_&shy;utf16</span>:
</p><ul class='itemize'><li id='req-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-4.1'>(4.1)</a></div><p >The facet shall convert between UTF-8 multibyte sequences
  and UTF-16 (one or two 16-bit codes) within the program.
</p></li><li id='req-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-4.2'>(4.2)</a></div><p >Endianness shall not affect how multibyte sequences are read or written.
</p></li><li id='req-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#req-4.3'>(4.3)</a></div><p >The multibyte sequences may be written as either a text or a binary file.
</p></li></ul><p ><span class='textsc'>See also:</span> ISO/IEC 10646-1:1993.</p></div></div></div></div></body></html>