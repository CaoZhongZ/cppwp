<!DOCTYPE html><html lang='en'><head><title>[class.access]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>14</a> Member access control <a class='abbr_ref' href='./#class.access'>[class.access]</a></h1><div id='sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control'></a></span>


</div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L10'>#</a></div><div id='1.sentence-1' class='sentence'>A member of a class can be
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div><div id='1.1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':access_control,private'></a></span><span class='texttt'>private</span>;
that is, its name can be used only by members and friends
of the class in which it is declared<a class='hidden_link' href='#1.1.sentence-2'>.</a></div></li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div><div id='1.2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':access_control,protected'></a></span><span class='texttt'>protected</span>;
that is, its name can be used only by members and friends
of the class in which it is declared, by classes derived from that class, and by their
friends (see <a href='class.protected'>[class.protected]</a>)<a class='hidden_link' href='#1.2.sentence-3'>.</a></div></li><li id='1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.3'>(1.3)</a></div><div id='1.3.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':access_control,public'></a></span><span class='texttt'>public</span>;
that is, its name can be used anywhere without access restriction<a class='hidden_link' href='#1.3.sentence-4'>.</a></div></li></ul></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L30'>#</a></div><div id='2.sentence-1' class='sentence'>A member of a class can also access all the names to which the class has access<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>A local class of a member function may access
the same names that the member function itself may access<a class='hidden_link' href='#2.sentence-2'>.</a><a class='footnotenum' href='#footnote-113'>113</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L37'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,member_name'></a></span><span class='indexparent'><a class='index' id=':access_control,default'></a></span>Members of a class defined with the keyword
<span class='texttt'>class</span>
are
<span class='texttt'>private</span>
by default<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>Members of a class defined with the keywords
<span class='texttt'>struct</span>
or
<span class='texttt'>union</span>
are
<span class='texttt'>public</span>
by default<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'><div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='3.sentence-4' class='sentence'><pre class='codeblock'>
class X {
  int a;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private by default
</span>};

struct S {
  int a;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;a</span> is public by default
</span>};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L66'>#</a></div><div id='4.sentence-1' class='sentence'>Access control is applied uniformly to all names, whether the names are
referred to from declarations or expressions<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'><div id='4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-5' class='sentence'>Access control applies to names nominated by
<a href='class.friend'><span class='texttt'>friend</span>
declarations</a> and
<span class='grammarterm'>using-declaration</span><span class='textit'>s</span> (<a href='namespace.udecl'>[namespace.udecl]</a>)<a class='hidden_link' href='#4.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div> <div id='4.sentence-3' class='sentence'>
In the case of overloaded function names, access control is applied to
the function selected by overload resolution<a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'><div id='4.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#4.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-6' class='sentence'>Because access control applies to names, if access control is applied to a
typedef name, only the accessibility of the typedef name itself is considered<a class='hidden_link' href='#4.sentence-6'>.</a></div> <div id='4.sentence-7' class='sentence'>The accessibility of the entity referred to by the typedef is not considered<a class='hidden_link' href='#4.sentence-7'>.</a></div> <div id='4.sentence-8' class='sentence'>For example,</div><div id='4.sentence-9' class='sentence'><pre class='codeblock'>
class A {
  class B { };
public:
  typedef B BB;
};

void f() {
  A::BB x;          <span class='comment'>// OK, typedef name <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;BB</span> is public
</span>  A::B y;           <span class='comment'>// access error, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> is private
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L97'>#</a></div><div id='5.sentence-1' class='sentence'>It should be noted that it is
<a class='hidden_link' href='#def:access' id='def:access'><i>access</i></a>
to members and base classes that is controlled, not their
<a class='hidden_link' href='#def:visibility' id='def:visibility'><i>visibility</i></a><a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>Names of members are still visible, and implicit conversions to base
classes are still considered, when those members and base classes are
inaccessible<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>The interpretation of a given construct is
established without regard to access control<a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='5.sentence-4' class='sentence'>If the interpretation
established makes use of inaccessible member names or base classes,
the construct is ill-formed<a class='hidden_link' href='#5.sentence-4'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L111'>#</a></div><div id='6.sentence-1' class='sentence'>All access controls in Clause <a href='class.access'>[class.access]</a> affect the ability to access a class member
name from the declaration of a particular
entity, including parts of the declaration preceding the name of the entity
being declared and, if the entity is a class, the definitions of members of
the class appearing outside the class's <i ><a href='class.mem#nt:member-specification'>member-specification</a></i>.
<div id='6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-2' class='sentence'>This access also applies to implicit references to constructors,
conversion functions, and destructors<a class='hidden_link' href='#6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L120'>#</a></div><div id='7.sentence-1' class='sentence'><div id='7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='7.sentence-2' class='sentence'><pre class='codeblock'>
class A {
  typedef int I;    <span class='comment'>// private member
</span>  I f();
  friend I g(I);
  static I x;
  template&lt;int&gt; struct Q;
  template&lt;int&gt; friend struct R;
protected:
    struct B { };
};

A::I A::f() { return 0; }
A::I g(A::I p = A::x);
A::I g(A::I p) { return 0; }
A::I A::x = 0;
template&lt;A::I&gt; struct A::Q { };
template&lt;A::I&gt; struct R { };

struct D: A::B, A { };</pre></div> <div id='7.sentence-3' class='sentence'>Here, all the uses of
<span class='texttt'>A&#x200b;::&#x200b;I</span>
are well-formed because
<span class='texttt'>A&#x200b;::&#x200b;f</span>,
<span class='texttt'>A&#x200b;::&#x200b;x</span>, and <span class='texttt'>A&#x200b;::&#x200b;Q</span>
are members of class
<span class='texttt'>A</span>
and
<span class='texttt'>g</span>
and <span class='texttt'>R</span> are friends of class
<span class='texttt'>A</span><a class='hidden_link' href='#7.sentence-3'>.</a></div> <div id='7.sentence-4' class='sentence'>This implies, for example, that access checking on the first use of
<span class='texttt'>A&#x200b;::&#x200b;I</span>
must be deferred until it is determined that this use of
<span class='texttt'>A&#x200b;::&#x200b;I</span>
is as the return type of a member of class
<span class='texttt'>A</span><a class='hidden_link' href='#7.sentence-4'>.</a></div> <div id='7.sentence-5' class='sentence'>Similarly, the use of <span class='texttt'>A&#x200b;::&#x200b;B</span> as a
<span class='grammarterm'>base-specifier</span> is well-formed because <span class='texttt'>D</span>
is derived from <span class='texttt'>A</span>, so checking of <span class='grammarterm'>base-specifier</span><span class='textit'>s</span>
must be deferred until the entire <span class='grammarterm'>base-specifier-list</span> has been seen<a class='hidden_link' href='#7.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L167'>#</a></div><div id='8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':argument,access_checking_and_default'></a></span><span class='indexparent'><a class='index' id=':access_control,default_argument'></a></span>The names in a <a href='dcl.fct.default'>default argument</a> are
bound at the point of declaration, and access is checked at that
point rather than at any points of use of the default argument<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>Access checking for default arguments in function templates and in
member functions of class templates is performed as described in <a href='temp.inst'>[temp.inst]</a><a class='hidden_link' href='#8.sentence-2'>.</a></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L176'>#</a></div><div id='9.sentence-1' class='sentence'>The names in a default <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> (<a href='temp.param'>[temp.param]</a>)
have their access checked in the context in which they appear rather than at any
points of use of the default <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'><div id='9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='9.sentence-3' class='sentence'><pre class='codeblock'>
class B { };
template &lt;class T&gt; class C {
protected:
  typedef T TT;
};

template &lt;class U, class V = typename U::TT&gt;
class D : public U { };

D &lt;C&lt;B&gt; &gt;* d;       <span class='comment'>// access error, <span class='tcode_in_codeblock'>C&#x200b;::&#x200b;TT</span> is protected
</span></pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='footnote' id='footnote-113'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-113'>113)</a></div><div id='footnote-113.sentence-1' class='sentence'>Access
permissions are thus transitive and cumulative to nested
and local classes<a class='hidden_link' href='#footnote-113.sentence-1'>.</a></div></div><div id='spec' class='section'><h2 ><a class='secnum' href='#spec' style='min-width:88pt'>14.1</a> Access specifiers <a class='abbr_ref' href='class.access.spec'>[class.access.spec]</a></h2><div id='spec-sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_specifier'></a></span></div><div class='para' id='spec-1'><div class='marginalizedparent'><a class='marginalized' href='#spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L197'>#</a></div><div id='spec-1.sentence-1' class='sentence'>Member declarations can be labeled by an
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i>:</div><div id='spec-1.sentence-2' class='sentence'><pre class='ncbnftab'><i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i> <span class='terminal'>:</span> <i ><a href='class.mem#nt:member-specification'>member-specification</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre>An
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i>
specifies the access rules for members following it
until the end of the class or until another
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i>
is encountered<a class='hidden_link' href='#spec-1.sentence-2'>.</a></div> <div id='spec-1.sentence-3' class='sentence'><div id='spec-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#spec-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='spec-1.sentence-4' class='sentence'><pre class='codeblock'>
class X {
  int a;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private by default: <span class='tcode_in_codeblock'>class</span> used
</span>public:
  int b;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;b</span> is public
</span>  int c;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;c</span> is public
</span>};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='spec-2'><div class='marginalizedparent'><a class='marginalized' href='#spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L224'>#</a></div><div id='spec-2.sentence-1' class='sentence'>Any number of access specifiers is allowed and no particular order is required<a class='hidden_link' href='#spec-2.sentence-1'>.</a></div> <div id='spec-2.sentence-2' class='sentence'><div id='spec-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#spec-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='spec-2.sentence-3' class='sentence'><pre class='codeblock'>
struct S {
  int a;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;a</span> is public by default: <span class='tcode_in_codeblock'>struct</span> used
</span>protected:
  int b;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;b</span> is protected
</span>private:
  int c;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;c</span> is private
</span>public:
  int d;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;d</span> is public
</span>};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='spec-3'><div class='marginalizedparent'><a class='marginalized' href='#spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L241'>#</a></div><div id='spec-3.sentence-1' class='sentence'><div id='spec-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#spec-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='spec-3.sentence-2' class='sentence'>The effect of access control on the order of allocation
of data members is described in <a href='class.mem'>[class.mem]</a><a class='hidden_link' href='#spec-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='spec-4'><div class='marginalizedparent'><a class='marginalized' href='#spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L245'>#</a></div><div id='spec-4.sentence-1' class='sentence'>When a member is redeclared within its class definition,
the access specified at its redeclaration shall
be the same as at its initial declaration<a class='hidden_link' href='#spec-4.sentence-1'>.</a></div> <div id='spec-4.sentence-2' class='sentence'><div id='spec-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#spec-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='spec-4.sentence-3' class='sentence'><pre class='codeblock'>
struct S {
  class A;
  enum E : int;
private:
  class A { };        <span class='comment'>// error: cannot change access
</span>  enum E: int { e0 }; <span class='comment'>// error: cannot change access
</span>};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='spec-5'><div class='marginalizedparent'><a class='marginalized' href='#spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L262'>#</a></div><div id='spec-5.sentence-1' class='sentence'><div id='spec-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#spec-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='spec-5.sentence-3' class='sentence'>In a derived class, the lookup of a base class name will find the
injected-class-name instead of the name of the base class in the scope
in which it was declared<a class='hidden_link' href='#spec-5.sentence-3'>.</a></div> <div id='spec-5.sentence-4' class='sentence'>The injected-class-name might be less accessible
than the name of the base class in the scope in which it was declared<a class='hidden_link' href='#spec-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div> <div id='spec-5.sentence-2' class='sentence'><div id='spec-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#spec-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='spec-5.sentence-5' class='sentence'><pre class='codeblock'>
class A { };
class B : private A { };
class C : public B {
  A* p;             <span class='comment'>// error: injected-class-name <span class='tcode_in_codeblock'>A</span> is inaccessible
</span>  ::A* q;           <span class='comment'>// OK
</span>};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='base' class='section'><h2 ><a class='secnum' href='#base' style='min-width:88pt'>14.2</a> Accessibility of base classes and base class members <a class='abbr_ref' href='class.access.base'>[class.access.base]</a></h2><div id='base-sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,base_class'></a></span><span class='indexparent'><a class='index' id=':access_specifier_'></a></span><span class='indexparent'><a class='index' id=':base_class,private'></a></span><span class='indexparent'><a class='index' id=':base_class,protected'></a></span><span class='indexparent'><a class='index' id=':base_class,public'></a></span></div><div class='para' id='base-1'><div class='marginalizedparent'><a class='marginalized' href='#base-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L288'>#</a></div><div id='base-1.sentence-1' class='sentence'>If a class is declared to be a <a href='class.derived'>base class</a> for another class using the
<span class='texttt'>public</span>
access specifier, the
<span class='texttt'>public</span>
members of the base class are accessible as
<span class='texttt'>public</span>
members of the derived class and
<span class='texttt'>protected</span>
members of the base class are accessible as
<span class='texttt'>protected</span>
members of the derived class<a class='hidden_link' href='#base-1.sentence-1'>.</a></div> <div id='base-1.sentence-2' class='sentence'>If a class is declared to be a base class for another class using the
<span class='texttt'>protected</span>
access specifier, the
<span class='texttt'>public</span>
and
<span class='texttt'>protected</span>
members of the base class are accessible as
<span class='texttt'>protected</span>
members of the derived class<a class='hidden_link' href='#base-1.sentence-2'>.</a></div> <div id='base-1.sentence-3' class='sentence'>If a class is declared to be a base class for another class using the
<span class='texttt'>private</span>
access specifier, the
<span class='texttt'>public</span>
and
<span class='texttt'>protected</span>
members of the base class are accessible as
<span class='texttt'>private</span>
members of the derived class<a class='footnotenum' href='#footnote-114'>114</a><a class='hidden_link' href='#base-1.sentence-3'>.</a></div></div><div class='para' id='base-2'><div class='marginalizedparent'><a class='marginalized' href='#base-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L323'>#</a></div><div id='base-2.sentence-1' class='sentence'>In the absence of an
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i>
for a base class,
<span class='texttt'>public</span>
is assumed when the derived class is
defined with the <i ><a href='class#nt:class-key'>class-key</a></i>
<span class='texttt'>struct</span>
and
<span class='texttt'>private</span>
is assumed when the class is
defined with the <i ><a href='class#nt:class-key'>class-key</a></i>
<span class='texttt'>class</span><a class='hidden_link' href='#base-2.sentence-1'>.</a></div> <div id='base-2.sentence-2' class='sentence'><div id='base-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='base-2.sentence-3' class='sentence'><pre class='codeblock'>
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D1 : private B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D2 : public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D3 : B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };             <span class='comment'>// <span class='tcode_in_codeblock'>B</span> private by default
</span>struct D4 : public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct D5 : private B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct D6 : B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };            <span class='comment'>// <span class='tcode_in_codeblock'>B</span> public by default
</span>class D7 : protected B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct D8 : protected B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre></div> <div id='base-2.sentence-4' class='sentence'>Here
<span class='texttt'>B</span>
is a public base of
<span class='texttt'>D2</span>,
<span class='texttt'>D4</span>,
and
<span class='texttt'>D6</span>,
a private base of
<span class='texttt'>D1</span>,
<span class='texttt'>D3</span>,
and
<span class='texttt'>D5</span>,
and a protected base of
<span class='texttt'>D7</span>
and
<span class='texttt'>D8</span><a class='hidden_link' href='#base-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='base-3'><div class='marginalizedparent'><a class='marginalized' href='#base-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L368'>#</a></div><div id='base-3.sentence-1' class='sentence'><div id='base-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base-3.sentence-2' class='sentence'>A member of a private base class might be inaccessible as an inherited
member name, but accessible directly<a class='hidden_link' href='#base-3.sentence-2'>.</a></div> <div id='base-3.sentence-3' class='sentence'>Because of the rules on <a href='conv.ptr'>pointer conversions</a> and <a href='expr.cast'>explicit casts</a>, a conversion from a pointer to a derived class to a pointer
to an inaccessible base class might be ill-formed if an implicit conversion
is used, but well-formed if an explicit cast is used<a class='hidden_link' href='#base-3.sentence-3'>.</a></div> <div id='base-3.sentence-4' class='sentence'>For example,</div><div id='base-3.sentence-5' class='sentence'><pre class='codeblock'>
class B {
public:
  int mi;                       <span class='comment'>// non-static member
</span>  static int si;                <span class='comment'>// static member
</span>};
class D : private B {
};
class DD : public D {
  void f();
};

void DD::f() {
  mi = 3;                       <span class='comment'>// error: <span class='tcode_in_codeblock'>mi</span> is private in <span class='tcode_in_codeblock'>D</span>
</span>  si = 3;                       <span class='comment'>// error: <span class='tcode_in_codeblock'>si</span> is private in <span class='tcode_in_codeblock'>D</span>
</span>  ::B  b;
  b.mi = 3;                     <span class='comment'>// OK (<span class='tcode_in_codeblock'>b.mi</span> is different from <span class='tcode_in_codeblock'>this-&gt;mi</span>)
</span>  b.si = 3;                     <span class='comment'>// OK (<span class='tcode_in_codeblock'>b.si</span> is different from <span class='tcode_in_codeblock'>this-&gt;si</span>)
</span>  ::B::si = 3;                  <span class='comment'>// OK
</span>  ::B* bp1 = this;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> is a private base class
</span>  ::B* bp2 = (::B*)this;        <span class='comment'>// OK with cast
</span>  bp2-&gt;mi = 3;                  <span class='comment'>// OK: access through a pointer to <span class='tcode_in_codeblock'>B</span>.
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='base-4'><div class='marginalizedparent'><a class='marginalized' href='#base-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L403'>#</a></div><div id='base-4.sentence-1' class='sentence'>A base class
<span class='texttt'>B</span>
of
<span class='texttt'>N</span>
is
<a class='hidden_link' href='#def:accessible' id='def:accessible'><i>accessible</i></a>
at
<span class='textit'>R</span>,
if
<ul class='itemize'><li id='base-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base-4.1'>(4.1)</a></div><div id='base-4.1.sentence-3' class='sentence'>an invented public member of
<span class='texttt'>B</span>
would be a public member of
<span class='texttt'>N</span>, or</div></li><li id='base-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base-4.2'>(4.2)</a></div><div id='base-4.2.sentence-4' class='sentence'><span class='textit'>R</span>
occurs in a member or friend of class
<span class='texttt'>N</span>,
and an invented public member of
<span class='texttt'>B</span>
would be a private or protected member of
<span class='texttt'>N</span>, or</div></li><li id='base-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base-4.3'>(4.3)</a></div><div id='base-4.3.sentence-5' class='sentence'><span class='textit'>R</span>
occurs in a member or friend of a class
<span class='texttt'>P</span>
derived from
<span class='texttt'>N</span>,
and an invented public member of
<span class='texttt'>B</span>
would be a private or protected member of
<span class='texttt'>P</span>, or</div></li><li id='base-4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base-4.4'>(4.4)</a></div><div id='base-4.4.sentence-6' class='sentence'>there exists a class
<span class='texttt'>S</span>
such that
<span class='texttt'>B</span>
is a base class of
<span class='texttt'>S</span>
accessible at
<span class='textit'>R</span>
and
<span class='texttt'>S</span>
is a base class of
<span class='texttt'>N</span>
accessible at
<span class='textit'>R</span><a class='hidden_link' href='#base-4.4.sentence-6'>.</a></div></li></ul></div> <div id='base-4.sentence-2' class='sentence'><div id='base-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='base-4.sentence-7' class='sentence'><pre class='codeblock'>
class B {
public:
  int m;
};

class S: private B {
  friend class N;
};

class N: private S {
  void f() {
    B* p = this;    <span class='comment'>// OK because class <span class='tcode_in_codeblock'>S</span> satisfies the fourth condition above: <span class='tcode_in_codeblock'>B</span> is a base class of <span class='tcode_in_codeblock'>N</span>
</span>                    <span class='comment'>// accessible in <span class='tcode_in_codeblock'>f()</span> because <span class='tcode_in_codeblock'>B</span> is an accessible base class of <span class='tcode_in_codeblock'>S</span> and <span class='tcode_in_codeblock'>S</span> is an accessible
</span>                    <span class='comment'>// base class of <span class='tcode_in_codeblock'>N</span>.
</span>  }
};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='base-5'><div class='marginalizedparent'><a class='marginalized' href='#base-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L475'>#</a></div><div id='base-5.sentence-1' class='sentence'>If a base class is accessible, one can implicitly convert a pointer to
a derived class to a pointer to that base class (<a href='conv.ptr'>[conv.ptr]</a>, <a href='conv.mem'>[conv.mem]</a>)<a class='hidden_link' href='#base-5.sentence-1'>.</a></div> <div id='base-5.sentence-2' class='sentence'><div id='base-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base-5.sentence-7' class='sentence'>It follows that
members and friends of a class
<span class='texttt'>X</span>
can implicitly convert an
<span class='texttt'>X*</span>
to a pointer to a private or protected immediate base class of
<span class='texttt'>X</span><a class='hidden_link' href='#base-5.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div> <div id='base-5.sentence-3' class='sentence'>
The access to a member is affected by the class in which the member is
named<a class='hidden_link' href='#base-5.sentence-3'>.</a></div> <div id='base-5.sentence-4' class='sentence'>This naming class is the class in which the member name was looked
up and found<a class='hidden_link' href='#base-5.sentence-4'>.</a></div> <div id='base-5.sentence-5' class='sentence'><div id='base-5.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base-5.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base-5.sentence-8' class='sentence'>This class can be explicit, e.g., when a
<span class='grammarterm'>qualified-id</span>
is used, or implicit, e.g., when a <a href='expr.ref'>class member access</a> operator is used (including cases where an implicit
“<span class='texttt'>this-&gt;</span>”
is
added)<a class='hidden_link' href='#base-5.sentence-8'>.</a></div> <div id='base-5.sentence-9' class='sentence'>If both a class member access operator and a
<span class='grammarterm'>qualified-id</span>
are used to name the member (as in
<span class='texttt'>p-&gt;T&#x200b;::&#x200b;m</span>),
the class naming the member is the class denoted by the
<span class='grammarterm'>nested-name-specifier</span>
of the
<span class='grammarterm'>qualified-id</span>
(that is,
<span class='texttt'>T</span>)<a class='hidden_link' href='#base-5.sentence-9'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div> <div id='base-5.sentence-6' class='sentence'>
A member
<span class='texttt'>m</span>
is accessible at the point
<span class='textit'>R</span>
when named in class
<span class='texttt'>N</span>
if
<ul class='itemize'><li id='base-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base-5.1'>(5.1)</a></div><div id='base-5.1.sentence-10' class='sentence'><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is public, or</div></li><li id='base-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base-5.2'>(5.2)</a></div><div id='base-5.2.sentence-11' class='sentence'><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is private, and
<span class='textit'>R</span>
occurs in a member or friend of class
<span class='texttt'>N</span>,
or</div></li><li id='base-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base-5.3'>(5.3)</a></div><div id='base-5.3.sentence-12' class='sentence'><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is protected, and
<span class='textit'>R</span>
occurs in a member or friend of class
<span class='texttt'>N</span>,
or in a member of a class
<span class='texttt'>P</span>
derived from
<span class='texttt'>N</span>,
where
<span class='texttt'>m</span>
as a member of
<span class='texttt'>P</span>
is public, private, or protected, or</div></li><li id='base-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base-5.4'>(5.4)</a></div><div id='base-5.4.sentence-13' class='sentence'>there exists a base class
<span class='texttt'>B</span>
of
<span class='texttt'>N</span>
that is accessible at
<span class='textit'>R</span>,
and
<span class='texttt'>m</span>
is accessible at
<span class='textit'>R</span>
when named in class
<span class='texttt'>B</span><a class='hidden_link' href='#base-5.4.sentence-13'>.</a></div> <div id='base-5.4.sentence-14' class='sentence'><div id='base-5.4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base-5.4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='base-5.4.sentence-15' class='sentence'><pre class='codeblock'>
class B;
class A {
private:
  int i;
  friend void f(B*);
};
class B : public A { };
void f(B* p) {
  p-&gt;i = 1;         <span class='comment'>// OK: <span class='tcode_in_codeblock'>B*</span> can be implicitly converted to <span class='tcode_in_codeblock'>A*</span>, and <span class='tcode_in_codeblock'>f</span> has access to <span class='tcode_in_codeblock'>i</span> in <span class='tcode_in_codeblock'>A</span>
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></li></ul></div></div><div class='para' id='base-6'><div class='marginalizedparent'><a class='marginalized' href='#base-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L578'>#</a></div><div id='base-6.sentence-1' class='sentence'>If a class member access operator, including an implicit
“<span class='texttt'>this-&gt;</span>”,
is used to access a non-static data member or non-static
member function, the reference is ill-formed if the
left operand (considered as a pointer in the
“<span class='texttt'>.</span>”
operator case) cannot be implicitly converted to a
pointer to the naming class of the right operand<a class='hidden_link' href='#base-6.sentence-1'>.</a></div> <div id='base-6.sentence-2' class='sentence'><div id='base-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base-6.sentence-3' class='sentence'>This requirement is in addition to the requirement that
the member be accessible as named<a class='hidden_link' href='#base-6.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='footnote' id='footnote-114'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-114'>114)</a></div><div id='footnote-114.sentence-1' class='sentence'>As specified previously in Clause <a href='class.access'>[class.access]</a>,
private members of a base class remain inaccessible even to derived classes
unless
<span class='texttt'>friend</span>
declarations within the base class definition are used to grant access explicitly<a class='hidden_link' href='#footnote-114.sentence-1'>.</a></div></div></div><div id='class.friend' class='section'><h2 ><a class='secnum' href='#class.friend' style='min-width:88pt'>14.3</a> Friends <a class='abbr_ref' href='class.friend'>[class.friend]</a></h2><div id='class.friend-sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend_function,access_and'></a></span><span class='indexparent'><a class='index' id=':access_control,friend_function'></a></span></div><div class='para' id='class.friend-1'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L596'>#</a></div><div id='class.friend-1.sentence-1' class='sentence'>A friend of a class is a function or class that is
given permission to use the private and protected member names from the class<a class='hidden_link' href='#class.friend-1.sentence-1'>.</a></div> <div id='class.friend-1.sentence-2' class='sentence'>A class specifies its friends, if any, by way of friend declarations<a class='hidden_link' href='#class.friend-1.sentence-2'>.</a></div> <div id='class.friend-1.sentence-3' class='sentence'>Such declarations give special access rights to the friends, but they
do not make the nominated friends members of the befriending class<a class='hidden_link' href='#class.friend-1.sentence-3'>.</a></div> <div id='class.friend-1.sentence-4' class='sentence'><div id='class.friend-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.friend-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.friend-1.sentence-5' class='sentence'>The following example illustrates the differences between
members and friends:
<span class='indexparent'><a class='index' id=':friend_function,member_function_and'></a></span><span class='indexparent'><a class='index' id=':example,friend_function'></a></span><span class='indexparent'><a class='index' id=':example,member_function'></a></span>
<pre class='codeblock'>
class X {
  int a;
  friend void friend_set(X*, int);
public:
  void member_set(int);
};

void friend_set(X* p, int i) { p-&gt;a = i; }
void X::member_set(int i) { a = i; }

void f() {
  X obj;
  friend_set(&amp;obj,10);
  obj.member_set(10);
}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='class.friend-2'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L628'>#</a></div><div id='class.friend-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend,class_access_and'></a></span>Declaring a class to be a friend implies that the names of private and
protected members from the class granting friendship can be accessed in the
<i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i><span class='textit'>s</span> and member declarations of the befriended
class<a class='hidden_link' href='#class.friend-2.sentence-1'>.</a></div> <div id='class.friend-2.sentence-2' class='sentence'><div id='class.friend-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.friend-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.friend-2.sentence-6' class='sentence'><pre class='codeblock'>
class A {
  class B { };
  friend class X;
};

struct X : A::B {               <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to friend
</span>  A::B mx;                      <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to member of friend
</span>  class Y {
    A::B my;                    <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to nested member of friend
</span>  };
};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div> <div id='class.friend-2.sentence-3' class='sentence'><div id='class.friend-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.friend-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.friend-2.sentence-7' class='sentence'><pre class='codeblock'>
class X {
  enum { a=100 };
  friend class Y;
};

class Y {
  int v[X::a];                  <span class='comment'>// OK, <span class='tcode_in_codeblock'>Y</span> is a friend of <span class='tcode_in_codeblock'>X</span>
</span>};

class Z {
  int v[X::a];                  <span class='comment'>// error: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private
</span>};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div> <div id='class.friend-2.sentence-4' class='sentence'>A class shall not be defined in a friend declaration<a class='hidden_link' href='#class.friend-2.sentence-4'>.</a></div> <div id='class.friend-2.sentence-5' class='sentence'><div id='class.friend-2.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.friend-2.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.friend-2.sentence-8' class='sentence'><pre class='codeblock'>
class A {
  friend class B { };           <span class='comment'>// error: cannot define class in friend declaration
</span>};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='class.friend-3'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L675'>#</a></div><div id='class.friend-3.sentence-1' class='sentence'>A <span class='texttt'>friend</span> declaration that does not declare a function
shall have one of the following forms:</div><div id='class.friend-3.sentence-2' class='sentence'><pre class='ncsimplebnf'><span class='terminal'>friend</span> <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> <span class='terminal'>;</span>
<span class='terminal'>friend</span> <i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i> <span class='terminal'>;</span>
<span class='terminal'>friend</span> <i ><a href='temp.res#nt:typename-specifier'>typename-specifier</a></i> <span class='terminal'>;</span>
</pre><div id='class.friend-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.friend-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.friend-3.sentence-4' class='sentence'>A <span class='texttt'>friend</span> declaration may be the
<span class='grammarterm'>declaration</span> in a <span class='grammarterm'>template-declaration</span>
(Clause <a href='temp'>[temp]</a>, <a href='temp.friend'>[temp.friend]</a>)<a class='hidden_link' href='#class.friend-3.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  If the
type specifier in a <span class='texttt'>friend</span> declaration designates a (possibly
cv-qualified) class type, that class is declared as a friend; otherwise, the
<span class='texttt'>friend</span> declaration is ignored<a class='hidden_link' href='#class.friend-3.sentence-2'>.</a></div> <div id='class.friend-3.sentence-3' class='sentence'><div id='class.friend-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.friend-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.friend-3.sentence-5' class='sentence'><pre class='codeblock'>
class C;
typedef C Ct;

class X1 {
  friend C;                     <span class='comment'>// OK: <span class='tcode_in_codeblock'>class C</span> is a friend
</span>};

class X2 {
  friend Ct;                    <span class='comment'>// OK: <span class='tcode_in_codeblock'>class C</span> is a friend
</span>  friend D;                     <span class='comment'>// error: no type-name <span class='tcode_in_codeblock'>D</span> in scope
</span>  friend class D;               <span class='comment'>// OK: elaborated-type-specifier declares new class
</span>};

template &lt;typename T&gt; class R {
  friend T;
};

R&lt;C&gt; rc;                        <span class='comment'>// <span class='tcode_in_codeblock'>class C</span> is a friend of <span class='tcode_in_codeblock'>R&lt;C&gt;</span>
</span>R&lt;int&gt; Ri;                      <span class='comment'>// OK: <span class='tcode_in_codeblock'>"friend int;"</span> is ignored
</span></pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='class.friend-4'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L715'>#</a></div><div id='class.friend-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend_function,linkage_of'></a></span>A function first declared in a friend declaration
has the linkage of the namespace of which it is a member (<a href='basic.link'>[basic.link]</a>)<a class='hidden_link' href='#class.friend-4.sentence-1'>.</a></div> <div id='class.friend-4.sentence-2' class='sentence'>Otherwise, the function retains its previous linkage (<a href='dcl.stc'>[dcl.stc]</a>)<a class='hidden_link' href='#class.friend-4.sentence-2'>.</a></div></div><div class='para' id='class.friend-5'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L721'>#</a></div><div id='class.friend-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':declaration,overloaded_name_and_friend'></a></span>When a
<span class='texttt'>friend</span>
declaration refers to an overloaded name or operator, only the function specified
by the parameter types becomes a friend<a class='hidden_link' href='#class.friend-5.sentence-1'>.</a></div> <div id='class.friend-5.sentence-2' class='sentence'>A member function of a class
<span class='texttt'>X</span>
can be a friend of
a class
<span class='texttt'>Y</span><a class='hidden_link' href='#class.friend-5.sentence-2'>.</a></div> <div id='class.friend-5.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':member_function,friend'></a></span><div id='class.friend-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.friend-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.friend-5.sentence-4' class='sentence'><pre class='codeblock'>
class Y {
  friend char* X::foo(int);
  friend X::X(char);            <span class='comment'>// constructors can be friends
</span>  friend X::~X();               <span class='comment'>// destructors can be friends
</span>};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='class.friend-6'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L744'>#</a></div><div id='class.friend-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend_function,inline'></a></span>A function can be defined in a friend declaration of a class if and only if the
class is a non-local class (<a href='class.local'>[class.local]</a>), the function name is unqualified,
and the function has namespace scope<a class='hidden_link' href='#class.friend-6.sentence-1'>.</a></div> <div id='class.friend-6.sentence-2' class='sentence'><div id='class.friend-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.friend-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.friend-6.sentence-3' class='sentence'><pre class='codeblock'>
class M {
  friend void f() { }           <span class='comment'>// definition of global <span class='tcode_in_codeblock'>f</span>, a friend of <span class='tcode_in_codeblock'>M</span>,
</span>                                <span class='comment'>// not the definition of a member function
</span>};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='class.friend-7'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L759'>#</a></div><div id='class.friend-7.sentence-1' class='sentence'>Such a function is implicitly an <a href='dcl.inline#def:inline_function'>inline function</a><a class='hidden_link' href='#class.friend-7.sentence-1'>.</a></div> <div id='class.friend-7.sentence-2' class='sentence'>A
<span class='texttt'>friend</span>
function defined in a class is in the (lexical) scope of the class in which it is defined<a class='hidden_link' href='#class.friend-7.sentence-2'>.</a></div> <div id='class.friend-7.sentence-3' class='sentence'>A friend function defined outside the class is not (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>)<a class='hidden_link' href='#class.friend-7.sentence-3'>.</a></div></div><div class='para' id='class.friend-8'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L766'>#</a></div><div id='class.friend-8.sentence-1' class='sentence'>No
<i ><a href='dcl.stc#nt:storage-class-specifier'>storage-class-specifier</a></i>
shall appear in the
<i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i>
of a friend declaration<a class='hidden_link' href='#class.friend-8.sentence-1'>.</a></div></div><div class='para' id='class.friend-9'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L773'>#</a></div><div id='class.friend-9.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend,access_specifier_and'></a></span>A name nominated by a friend declaration shall be accessible in the scope of the
class containing the friend declaration<a class='hidden_link' href='#class.friend-9.sentence-1'>.</a></div> <div id='class.friend-9.sentence-2' class='sentence'>The meaning of the friend declaration is the same whether the friend declaration
appears in the
<span class='texttt'>private</span>,
<span class='texttt'>protected</span>
or
<span class='texttt'>public</span> (<a href='class.mem'>[class.mem]</a>)
portion of the class
<i ><a href='class.mem#nt:member-specification'>member-specification</a></i><a class='hidden_link' href='#class.friend-9.sentence-2'>.</a></div></div><div class='para' id='class.friend-10'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L786'>#</a></div><div id='class.friend-10.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend,inheritance_and'></a></span>Friendship is neither inherited nor transitive<a class='hidden_link' href='#class.friend-10.sentence-1'>.</a></div> <div id='class.friend-10.sentence-2' class='sentence'><div id='class.friend-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.friend-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.friend-10.sentence-3' class='sentence'><pre class='codeblock'>
class A {
  friend class B;
  int a;
};

class B {
  friend class C;
};

class C  {
  void f(A* p) {
    p-&gt;a++;         <span class='comment'>// error: <span class='tcode_in_codeblock'>C</span> is not a friend of <span class='tcode_in_codeblock'>A</span> despite being a friend of a friend
</span>  }
};

class D : public B  {
  void f(A* p) {
    p-&gt;a++;         <span class='comment'>// error: <span class='tcode_in_codeblock'>D</span> is not a friend of <span class='tcode_in_codeblock'>A</span> despite being derived from a friend
</span>  }
};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='class.friend-11'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L815'>#</a></div><div id='class.friend-11.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':local_class,friend'></a></span><span class='indexparent'><a class='index' id=':friend,local_class_and'></a></span>If a friend declaration appears in a <a href='class.local#def:local_class'>local class</a> and the
name specified is an unqualified name, a prior declaration is looked
up without considering scopes that are outside the innermost enclosing
non-class scope<a class='hidden_link' href='#class.friend-11.sentence-1'>.</a></div> <div id='class.friend-11.sentence-2' class='sentence'>For a friend function declaration, if there is no
prior declaration, the program is ill-formed<a class='hidden_link' href='#class.friend-11.sentence-2'>.</a></div> <div id='class.friend-11.sentence-3' class='sentence'>For a friend class
declaration, if there is no prior declaration, the class that is
specified belongs to the innermost enclosing non-class scope, but if it is
subsequently referenced, its name is not found by name lookup
until a matching declaration is provided in the innermost enclosing
non-class scope<a class='hidden_link' href='#class.friend-11.sentence-3'>.</a></div> <div id='class.friend-11.sentence-4' class='sentence'><div id='class.friend-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.friend-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.friend-11.sentence-5' class='sentence'><pre class='codeblock'>
class X;
void a();
void f() {
  class Y;
  extern void b();
  class A {
  friend class X;   <span class='comment'>// OK, but <span class='tcode_in_codeblock'>X</span> is a local class, not <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span>
</span>  friend class Y;   <span class='comment'>// OK
</span>  friend class Z;   <span class='comment'>// OK, introduces local class <span class='tcode_in_codeblock'>Z</span>
</span>  friend void a();  <span class='comment'>// error, <span class='tcode_in_codeblock'>&#x200b;::&#x200b;a</span> is not considered
</span>  friend void b();  <span class='comment'>// OK
</span>  friend void c();  <span class='comment'>// error
</span>  };
  X* px;            <span class='comment'>// OK, but <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span> is found
</span>  Z* pz;            <span class='comment'>// error, no <span class='tcode_in_codeblock'>Z</span> is found
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='class.protected' class='section'><h2 ><a class='secnum' href='#class.protected' style='min-width:88pt'>14.4</a> Protected member access <a class='abbr_ref' href='class.protected'>[class.protected]</a></h2><div id='class.protected-sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,protected_'></a></span></div><div class='para' id='class.protected-1'><div class='marginalizedparent'><a class='marginalized' href='#class.protected-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L855'>#</a></div><div id='class.protected-1.sentence-1' class='sentence'>An additional access check beyond those described earlier in Clause <a href='class.access'>[class.access]</a>
is applied when a non-static data member or non-static member function is a
protected member of its naming class (<a href='class.access.base'>[class.access.base]</a>)<a class='hidden_link' href='#class.protected-1.sentence-1'>.</a><a class='footnotenum' href='#footnote-115'>115</a></div> <div id='class.protected-1.sentence-2' class='sentence'>
As described earlier, access to a protected member is granted because the
reference occurs in a friend or member of some class <span class='texttt'>C</span><a class='hidden_link' href='#class.protected-1.sentence-2'>.</a></div> <div id='class.protected-1.sentence-3' class='sentence'>If the access is
to form a pointer to member (<a href='expr.unary.op'>[expr.unary.op]</a>), the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> shall denote <span class='texttt'>C</span> or a class derived from
<span class='texttt'>C</span><a class='hidden_link' href='#class.protected-1.sentence-3'>.</a></div> <div id='class.protected-1.sentence-4' class='sentence'>All other accesses involve a (possibly implicit)
<a href='expr.ref#def:object_expression'>object expression</a><a class='hidden_link' href='#class.protected-1.sentence-4'>.</a></div> <div id='class.protected-1.sentence-5' class='sentence'>In this case, the class of the object expression shall be
<span class='texttt'>C</span> or a class derived from <span class='texttt'>C</span><a class='hidden_link' href='#class.protected-1.sentence-5'>.</a></div> <div id='class.protected-1.sentence-6' class='sentence'><div id='class.protected-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.protected-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.protected-1.sentence-7' class='sentence'><pre class='codeblock'>
class B {
protected:
  int i;
  static int j;
};

class D1 : public B {
};

class D2 : public B {
  friend void fr(B*,D1*,D2*);
  void mem(B*,D1*);
};

void fr(B* pb, D1* p1, D2* p2) {
  pb-&gt;i = 1;                    <span class='comment'>// ill-formed
</span>  p1-&gt;i = 2;                    <span class='comment'>// ill-formed
</span>  p2-&gt;i = 3;                    <span class='comment'>// OK (access through a <span class='tcode_in_codeblock'>D2</span>)
</span>  p2-&gt;B::i = 4;                 <span class='comment'>// OK (access through a <span class='tcode_in_codeblock'>D2</span>, even though naming class is <span class='tcode_in_codeblock'>B</span>)
</span>  int B::* pmi_B = &amp;B::i;       <span class='comment'>// ill-formed
</span>  int B::* pmi_B2 = &amp;D2::i;     <span class='comment'>// OK (type of <span class='tcode_in_codeblock'>&amp;D2&#x200b;::&#x200b;i</span> is <span class='tcode_in_codeblock'>int B&#x200b;::&#x200b;*</span>)
</span>  B::j = 5;                     <span class='comment'>// ill-formed (not a friend of naming class <span class='tcode_in_codeblock'>B</span>)
</span>  D2::j = 6;                    <span class='comment'>// OK (because refers to static member)
</span>}

void D2::mem(B* pb, D1* p1) {
  pb-&gt;i = 1;                    <span class='comment'>// ill-formed
</span>  p1-&gt;i = 2;                    <span class='comment'>// ill-formed
</span>  i = 3;                        <span class='comment'>// OK (access through <span class='tcode_in_codeblock'>this</span>)
</span>  B::i = 4;                     <span class='comment'>// OK (access through <span class='tcode_in_codeblock'>this</span>, qualification ignored)
</span>  int B::* pmi_B = &amp;B::i;       <span class='comment'>// ill-formed
</span>  int B::* pmi_B2 = &amp;D2::i;     <span class='comment'>// OK
</span>  j = 5;                        <span class='comment'>// OK (because <span class='tcode_in_codeblock'>j</span> refers to static member)
</span>  B::j = 6;                     <span class='comment'>// OK (because <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;j</span> refers to static member)
</span>}

void g(B* pb, D1* p1, D2* p2) {
  pb-&gt;i = 1;                    <span class='comment'>// ill-formed
</span>  p1-&gt;i = 2;                    <span class='comment'>// ill-formed
</span>  p2-&gt;i = 3;                    <span class='comment'>// ill-formed
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='footnote' id='footnote-115'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-115'>115)</a></div><div id='footnote-115.sentence-1' class='sentence'>This
additional check does not apply to other members,
e.g., static data members or enumerator member constants<a class='hidden_link' href='#footnote-115.sentence-1'>.</a></div></div></div><div id='virt' class='section'><h2 ><a class='secnum' href='#virt' style='min-width:88pt'>14.5</a> Access to virtual functions <a class='abbr_ref' href='class.access.virt'>[class.access.virt]</a></h2><div id='virt-sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,virtual_function'></a></span></div><div class='para' id='virt-1'><div class='marginalizedparent'><a class='marginalized' href='#virt-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L918'>#</a></div><div id='virt-1.sentence-1' class='sentence'>The access rules (Clause <a href='class.access'>[class.access]</a>) for a virtual function are determined by its declaration
and are not affected by the rules for a function that later overrides it<a class='hidden_link' href='#virt-1.sentence-1'>.</a></div> <div id='virt-1.sentence-2' class='sentence'><div id='virt-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virt-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='virt-1.sentence-3' class='sentence'><pre class='codeblock'>
class B {
public:
  virtual int f();
};

class D : public B {
private:
  int f();
};

void f() {
  D d;
  B* pb = &amp;d;
  D* pd = &amp;d;

  pb-&gt;f();                      <span class='comment'>// OK: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f()</span> is public, <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f()</span> is invoked
</span>  pd-&gt;f();                      <span class='comment'>// error: <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f()</span> is private
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='virt-2'><div class='marginalizedparent'><a class='marginalized' href='#virt-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L945'>#</a></div><div id='virt-2.sentence-1' class='sentence'>Access is checked at the call point using the type of the expression used
to denote the object for which the member function is called
(<span class='texttt'>B*</span>
in the example above)<a class='hidden_link' href='#virt-2.sentence-1'>.</a></div> <div id='virt-2.sentence-2' class='sentence'>The access of the member function in the class in which it was defined
(<span class='texttt'>D</span>
in the example above) is in general not known<a class='hidden_link' href='#virt-2.sentence-2'>.</a></div></div></div><div id='class.paths' class='section'><h2 ><a class='secnum' href='#class.paths' style='min-width:88pt'>14.6</a> Multiple access <a class='abbr_ref' href='class.paths'>[class.paths]</a></h2><div id='class.paths-sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,multiple_access'></a></span></div><div class='para' id='class.paths-1'><div class='marginalizedparent'><a class='marginalized' href='#class.paths-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L957'>#</a></div><div id='class.paths-1.sentence-1' class='sentence'>If a name can be reached by several paths through a multiple inheritance
graph, the access is that of the path that gives most access<a class='hidden_link' href='#class.paths-1.sentence-1'>.</a></div> <div id='class.paths-1.sentence-2' class='sentence'><div id='class.paths-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.paths-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.paths-1.sentence-3' class='sentence'><pre class='codeblock'>
class W { public: void f(); };
class A : private virtual W { };
class B : public virtual W { };
class C : public A, public B {
  void f() { W::f(); }          <span class='comment'>// OK
</span>};</pre></div> <div id='class.paths-1.sentence-4' class='sentence'>Since
<span class='texttt'>W&#x200b;::&#x200b;f()</span>
is available to
<span class='texttt'>C&#x200b;::&#x200b;f()</span>
along the public path through
<span class='texttt'>B</span>,
access is allowed<a class='hidden_link' href='#class.paths-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='nest' class='section'><h2 ><a class='secnum' href='#nest' style='min-width:88pt'>14.7</a> Nested classes <a class='abbr_ref' href='class.access.nest'>[class.access.nest]</a></h2><div id='nest-sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,nested_class'></a></span><span class='indexparent'><a class='index' id=':member_function,nested_class'></a></span></div><div class='para' id='nest-1'><div class='marginalizedparent'><a class='marginalized' href='#nest-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8c005473ba69d52314d5c399c9c9adb6429cc7ed/source/access.tex#L984'>#</a></div><div id='nest-1.sentence-1' class='sentence'>A nested class is a member and as such has the same access rights as any other member<a class='hidden_link' href='#nest-1.sentence-1'>.</a></div> <div id='nest-1.sentence-2' class='sentence'>The members of an enclosing class have no special access to members of a nested
class; the usual <a href='class.access'>access rules</a> shall be obeyed<a class='hidden_link' href='#nest-1.sentence-2'>.</a></div> <div id='nest-1.sentence-3' class='sentence'><div id='nest-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#nest-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='nest-1.sentence-5' class='sentence'><span class='indexparent'><a class='index' id=':example,nested_class_definition'></a></span>
<pre class='codeblock'>
class E {
  int x;
  class B { };

  class I {
    B b;                        <span class='comment'>// OK: <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;I</span> can access <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;B</span>
</span>    int y;
    void f(E* p, int i) {
      p-&gt;x = i;                 <span class='comment'>// OK: <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;I</span> can access <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span>
</span>    }
  };

  int g(I* p) {
    return p-&gt;y;                <span class='comment'>// error: <span class='tcode_in_codeblock'>I&#x200b;::&#x200b;y</span> is private
</span>  }
};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div> <div id='nest-1.sentence-4' class='sentence'></div></div></div></div></body></html>