<!DOCTYPE html><html lang='en'><head><title>[class]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>10</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><span class='indexparent'><a class='index' id=':class'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L9'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':{},class_declaration'></a></span><span class='indexparent'><a class='index' id=':{},class_definition'></a></span><span class='indexparent'><a class='index' id=':type,class_and'></a></span>A class is a type<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Its name becomes a <i ><a href='class#nt:class-name'>class-name</a></i> (<a href='#name'>[class.name]</a>) within its
scope<a class='hidden_link' href='#1.sentence-2'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:class-name' id='nt:class-name'>class-name:</a>
&#9;<i ><a href='lex.name#nt:identifier'>identifier</a></i>
&#9;<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
</pre><div id='1.sentence-3' class='sentence'>A <i ><a href='class#nt:class-specifier'>class-specifier</a></i> or
an <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> is used to
make a <i ><a href='class#nt:class-name'>class-name</a></i><a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>An object of a class consists of a
(possibly empty) sequence of members and base class objects<a class='hidden_link' href='#1.sentence-4'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:class-specifier' id='nt:class-specifier'>class-specifier:</a>
&#9;<i ><a href='class#nt:class-head'>class-head</a></i> <span class='terminal'>{</span> <i ><a href='class.mem#nt:member-specification'>member-specification</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>}</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:class-head' id='nt:class-head'>class-head:</a>
&#9;<i ><a href='class#nt:class-key'>class-key</a></i> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class#nt:class-head-name'>class-head-name</a></i> <i ><a href='class#nt:class-virt-specifier'>class-virt-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:base-clause'>base-clause</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='class#nt:class-key'>class-key</a></i> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:base-clause'>base-clause</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:class-head-name' id='nt:class-head-name'>class-head-name:</a>
&#9;<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class#nt:class-name'>class-name</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:class-virt-specifier' id='nt:class-virt-specifier'>class-virt-specifier:</a>
&#9;<span class='terminal'>final</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:class-key' id='nt:class-key'>class-key:</a>
&#9;<span class='terminal'>class</span>
&#9;<span class='terminal'>struct</span>
&#9;<span class='terminal'>union</span>
</pre><div id='1.sentence-5' class='sentence'>A class declaration where the <i ><a href='class#nt:class-name'>class-name</a></i>
in the <i ><a href='class#nt:class-head-name'>class-head-name</a></i> is a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
shall be an explicit specialization (<a href='temp.expl.spec'>[temp.expl.spec]</a>) or
a partial specialization (<a href='temp.class.spec'>[temp.class.spec]</a>)<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>A <i ><a href='class#nt:class-specifier'>class-specifier</a></i> whose
<i ><a href='class#nt:class-head'>class-head</a></i> omits the
<i ><a href='class#nt:class-head-name'>class-head-name</a></i> defines an unnamed class<a class='hidden_link' href='#1.sentence-6'>.</a></div> <div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-7' class='sentence'>An unnamed class thus can't
be <span class='texttt'>final</span><a class='hidden_link' href='#1.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L67'>#</a></div><div id='2.sentence-1' class='sentence'>A <i ><a href='class#nt:class-name'>class-name</a></i> is inserted into the scope in which it is
declared immediately after the <i ><a href='class#nt:class-name'>class-name</a></i> is seen<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The
<i ><a href='class#nt:class-name'>class-name</a></i> is also inserted into the scope of the class
itself; this is known as the <a class='hidden_link' href='#def:injected-class-name' id='def:injected-class-name'><i >injected-class-name</i></a><a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>For purposes of access checking, the injected-class-name is treated as
if it were a public member name<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>A <i ><a href='class#nt:class-specifier'>class-specifier</a></i> is commonly referred to as a <a class='hidden_link' href='#def:definition,class' id='def:definition,class'><i >class
definition</i></a><a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='2.sentence-5' class='sentence'>A class is considered defined after the closing brace of its
<i ><a href='class#nt:class-specifier'>class-specifier</a></i> has been seen even though its member
functions are in general not yet defined<a class='hidden_link' href='#2.sentence-5'>.</a></div> <div id='2.sentence-6' class='sentence'>The optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> appertains to the class; the attributes in
the <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> are thereafter considered attributes of the class
whenever it is named<a class='hidden_link' href='#2.sentence-6'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L83'>#</a></div><div id='3.sentence-1' class='sentence'>If a <i ><a href='class#nt:class-head-name'>class-head-name</a></i> contains a <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>,
the <i ><a href='class#nt:class-specifier'>class-specifier</a></i> shall refer to a class that was
previously declared directly in the class or namespace to which the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> refers,
or in an element of the inline namespace set (<a href='namespace.def'>[namespace.def]</a>) of that namespace
(i.e., not merely inherited or
introduced by a <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>), and the
<i ><a href='class#nt:class-specifier'>class-specifier</a></i> shall appear in a namespace enclosing the
previous declaration<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>In such cases, the <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> of the
<i ><a href='class#nt:class-head-name'>class-head-name</a></i> of the
definition shall not begin with a <i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i><a class='hidden_link' href='#3.sentence-2'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L97'>#</a></div><div id='4.sentence-1' class='sentence'>If a class is marked with the <i ><a href='class#nt:class-virt-specifier'>class-virt-specifier</a></i> <span class='texttt'>final</span> and it appears
as a <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> in a <i ><a href='class.derived#nt:base-clause'>base-clause</a></i>,
the program is ill-formed<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Whenever a
<i ><a href='class#nt:class-key'>class-key</a></i> is followed by a <i ><a href='class#nt:class-head-name'>class-head-name</a></i>, the
<i ><a href='lex.name#nt:identifier'>identifier</a></i> <span class='texttt'>final</span>, and a colon or left brace, <span class='texttt'>final</span> is
interpreted as a <i ><a href='class#nt:class-virt-specifier'>class-virt-specifier</a></i><a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A;
struct A final {};      <span class='comment'>// OK: definition of <span class='tcode_in_codeblock'>struct A</span>,
</span>                        <span class='comment'>// not value-initialization of variable <span class='tcode_in_codeblock'>final</span>
</span>
struct X {
 struct C { constexpr operator int() { return 5; } };
 struct B final : C{};  <span class='comment'>// OK: definition of nested class <span class='tcode_in_codeblock'>B</span>,
</span>                        <span class='comment'>// not declaration of a bit-field member <span class='tcode_in_codeblock'>final</span>
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L117'>#</a></div><div id='5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='5.sentence-1' class='sentence'>Complete objects of class type have nonzero size<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>Base class subobjects and
members declared with the <span class='texttt'>no_&shy;unique_&shy;address</span> attribute (<a href='dcl.attr.nouniqueaddr'>[dcl.attr.nouniqueaddr]</a>)
are not so constrained<a class='hidden_link' href='#5.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L125'>#</a></div><div id='6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-1' class='sentence'>Class objects can be assigned (<a href='expr.ass'>[expr.ass]</a>, <a href='over.ass'>[over.ass]</a>, <a href='#copy.assign'>[class.copy.assign]</a>),
passed as arguments to functions (<a href='dcl.init'>[dcl.init]</a>, <a href='#copy.ctor'>[class.copy.ctor]</a>), and
returned by functions (except objects of classes for which copying or moving has
been restricted; see <a href='dcl.fct.def.delete'>[dcl.fct.def.delete]</a> and <a href='#access'>[class.access]</a>)<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>Other plausible operators, such as equality comparison,
can be defined by the user; see <a href='over.oper'>[over.oper]</a><a class='hidden_link' href='#6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L135'>#</a></div><div id='7.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:union' id='def:union'><i >union</i></a> is a class defined with the <i ><a href='class#nt:class-key'>class-key</a></i>
<span class='texttt'>union</span>;
it holds at most one data member at a time (<a href='#union'>[class.union]</a>)<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='7.sentence-2' class='sentence'>Aggregates of class type are described in <a href='dcl.init.aggr'>[dcl.init.aggr]</a><a class='hidden_link' href='#7.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='prop' class='section'><h2 ><a class='secnum' href='#prop' style='min-width:88pt'>10.1</a> Properties of classes <a class='abbr_ref' href='class.prop'>[class.prop]</a></h2><div class='para' id='prop-1'><div class='marginalizedparent'><a class='marginalized' href='#prop-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L145'>#</a></div><div id='prop-1.sentence-1' class='sentence'>A <span class='indexparent'><a class='index' id=':class,trivially_copyable'></a></span><span class='textit'>trivially copyable class</span> is a class:</div><div id='prop-1.sentence-2' class='sentence'><ul class='itemize'><li id='prop-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-1.1'>(1.1)</a></div><div id='prop-1.1.sentence-1' class='sentence'>where each copy constructor, move constructor, copy assignment operator,
and move assignment operator (<a href='#copy.ctor'>[class.copy.ctor]</a>, <a href='#copy.assign'>[class.copy.assign]</a>)
is either deleted or trivial,</div></li><li id='prop-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-1.2'>(1.2)</a></div><div id='prop-1.2.sentence-1' class='sentence'>that has at least one non-deleted copy constructor, move constructor,
copy assignment operator, or move assignment operator, and</div></li><li id='prop-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-1.3'>(1.3)</a></div><div id='prop-1.3.sentence-1' class='sentence'>that has a trivial, non-deleted <a href='#dtor'>destructor</a><a class='hidden_link' href='#prop-1.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='prop-2'><div class='marginalizedparent'><a class='marginalized' href='#prop-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L157'>#</a></div><div id='prop-2.sentence-1' class='sentence'>A <span class='indexparent'><a class='index' id=':class,trivial'></a></span><span class='textit'>trivial class</span> is a class that is trivially copyable and
has one or more default constructors (<a href='#default.ctor'>[class.default.ctor]</a>),
all of which are either trivial or deleted and
at least one of which is not deleted<a class='hidden_link' href='#prop-2.sentence-1'>.</a></div> <div id='prop-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#prop-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='prop-2.sentence-2' class='sentence'>In particular, a trivially copyable or trivial class does not have
virtual functions or virtual base classes<a class='hidden_link' href='#prop-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='prop-3'><div class='marginalizedparent'><a class='marginalized' href='#prop-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L165'>#</a></div><div id='prop-3.sentence-1' class='sentence'>A class <span class='texttt'>S</span> is a <span class='indexparent'><a class='index' id=':class,standard-layout'></a></span><span class='textit'>standard-layout class</span> if it:
<ul class='itemize'><li id='prop-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-3.1'>(3.1)</a></div><div id='prop-3.1.sentence-1' class='sentence'>has no non-static data members of type non-standard-layout class
(or array of such types) or reference,</div></li><li id='prop-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-3.2'>(3.2)</a></div><div id='prop-3.2.sentence-1' class='sentence'>has no <a href='#virtual'>virtual functions</a> and no
<a href='#mi'>virtual base classes</a>,</div></li><li id='prop-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-3.3'>(3.3)</a></div><div id='prop-3.3.sentence-1' class='sentence'>has the same <a href='#access'>access control</a>
for all non-static data members,</div></li><li id='prop-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-3.4'>(3.4)</a></div><div id='prop-3.4.sentence-1' class='sentence'>has no non-standard-layout base classes,</div></li><li id='prop-3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-3.5'>(3.5)</a></div><div id='prop-3.5.sentence-1' class='sentence'>has at most one base class subobject of any given type,</div></li><li id='prop-3.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-3.6'>(3.6)</a></div><div id='prop-3.6.sentence-1' class='sentence'>has all non-static data members and bit-fields in the class and
its base classes first declared in the same class, and</div></li><li id='prop-3.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#prop-3.7'>(3.7)</a></div><div id='prop-3.7.sentence-1' class='sentence'>has no element of the set <span class='math'><span class='mathalpha'>M</span>(<span class='mathtt'>S</span>)</span> of types
as a base class,
where for any type <span class='texttt'>X</span>, <span class='math'><span class='mathalpha'>M</span>(<span class='mathtt'>X</span>)</span> is defined as follows<a class='hidden_link' href='#prop-3.7.sentence-1'>.</a><a class='footnotenum' href='#footnote-107'>107</a></div> <div id='prop-3.7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#prop-3.7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='prop-3.7.sentence-2' class='sentence'><span class='math'><span class='mathalpha'>M</span>(<span class='mathtt'>X</span>)</span> is the set of the types of all non-base-class subobjects
that may be at a zero offset in <span class='texttt'>X</span><a class='hidden_link' href='#prop-3.7.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <div id='prop-3.7.sentence-3' class='sentence'><ul class='itemize'><li id='prop-3.7.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#prop-3.7.1'>(3.7.1)</a></div><div id='prop-3.7.1.sentence-1' class='sentence'>If <span class='texttt'>X</span> is a non-union class type with no (possibly
<a href='#derived'>inherited</a>) non-static data members, the set
<span class='math'><span class='mathalpha'>M</span>(<span class='mathtt'>X</span>)</span> is empty<a class='hidden_link' href='#prop-3.7.1.sentence-1'>.</a></div></li><li id='prop-3.7.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#prop-3.7.2'>(3.7.2)</a></div><div id='prop-3.7.2.sentence-1' class='sentence'>If <span class='texttt'>X</span> is a non-union class type with a non-static data
member of type <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{X}_0"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span>
that is either of zero size or
is the first non-static data member of <span class='texttt'>X</span>
(where said member may be an anonymous union),
the set <span class='math'><span class='mathalpha'>M</span>(<span class='mathtt'>X</span>)</span> consists of <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{X}_0"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span> and the elements of
<span class="mjx-chtml"><span class="mjx-math" aria-label="M(\mathtt{X}_0)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#prop-3.7.2.sentence-1'>.</a></div></li><li id='prop-3.7.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#prop-3.7.3'>(3.7.3)</a></div><div id='prop-3.7.3.sentence-1' class='sentence'>If <span class='texttt'>X</span> is a union type, the set <span class='math'><span class='mathalpha'>M</span>(<span class='mathtt'>X</span>)</span> is
the union of all <span class="mjx-chtml"><span class="mjx-math" aria-label="M(\mathtt{U}_i)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.298em; padding-right: 0.003em;">U</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> and the set containing all <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{U}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.298em; padding-right: 0.003em;">U</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>,
where each <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{U}_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.298em; padding-right: 0.003em;">U</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is the type of the <span class="mjx-chtml"><span class="mjx-math" aria-label="i^\text{th}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> non-static data member
of <span class='texttt'>X</span><a class='hidden_link' href='#prop-3.7.3.sentence-1'>.</a></div></li><li id='prop-3.7.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#prop-3.7.4'>(3.7.4)</a></div><div id='prop-3.7.4.sentence-1' class='sentence'>If <span class='texttt'>X</span> is an array type with element type <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{X}_e"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span></span></span></span></span>,
the set <span class='math'><span class='mathalpha'>M</span>(<span class='mathtt'>X</span>)</span> consists of <span class="mjx-chtml"><span class="mjx-math" aria-label="\mathtt{X}_e"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span></span></span></span></span>
and the elements of <span class="mjx-chtml"><span class="mjx-math" aria-label="M(\mathtt{X}_e)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#prop-3.7.4.sentence-1'>.</a></div></li><li id='prop-3.7.5'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#prop-3.7.5'>(3.7.5)</a></div><div id='prop-3.7.5.sentence-1' class='sentence'>If <span class='texttt'>X</span> is a non-class, non-array type, the set <span class='math'><span class='mathalpha'>M</span>(<span class='mathtt'>X</span>)</span> is empty<a class='hidden_link' href='#prop-3.7.5.sentence-1'>.</a></div></li></ul></div></li></ul></div></div><div class='para' id='prop-4'><div class='marginalizedparent'><a class='marginalized' href='#prop-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L219'>#</a></div><div id='prop-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#prop-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
   struct B { int i; };         <span class='comment'>// standard-layout class
</span>   struct C : B { };            <span class='comment'>// standard-layout class
</span>   struct D : C { };            <span class='comment'>// standard-layout class
</span>   struct E : D { char : 4; };  <span class='comment'>// not a standard-layout class
</span>
   struct Q {};
   struct S : Q { };
   struct T : Q { };
   struct U : S, T { };         <span class='comment'>// not a standard-layout class
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='prop-5'><div class='marginalizedparent'><a class='marginalized' href='#prop-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L234'>#</a></div><div id='prop-5.sentence-1' class='sentence'>A <span class='indexparent'><a class='index' id=':struct,standard-layout'></a></span><span class='textit'>standard-layout struct</span> is a standard-layout class
defined with the <i ><a href='class#nt:class-key'>class-key</a></i> <span class='texttt'>struct</span> or the
<i ><a href='class#nt:class-key'>class-key</a></i> <span class='texttt'>class</span><a class='hidden_link' href='#prop-5.sentence-1'>.</a></div> <div id='prop-5.sentence-2' class='sentence'>A <span class='indexparent'><a class='index' id=':union,standard-layout'></a></span><span class='textit'>standard-layout union</span> is a standard-layout class
defined with the
<i ><a href='class#nt:class-key'>class-key</a></i> <span class='texttt'>union</span><a class='hidden_link' href='#prop-5.sentence-2'>.</a></div></div><div class='para' id='prop-6'><div class='marginalizedparent'><a class='marginalized' href='#prop-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L242'>#</a></div><div id='prop-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#prop-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='prop-6.sentence-1' class='sentence'>Standard-layout classes are useful for communicating with
code written in other programming languages<a class='hidden_link' href='#prop-6.sentence-1'>.</a></div> <div id='prop-6.sentence-2' class='sentence'>Their layout is specified
in <a href='#mem'>[class.mem]</a><a class='hidden_link' href='#prop-6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='prop-7'><div class='marginalizedparent'><a class='marginalized' href='#prop-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L247'>#</a></div><div id='prop-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#prop-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct N {          <span class='comment'>// neither trivial nor standard-layout
</span>  int i;
  int j;
  virtual ~N();
};

struct T {          <span class='comment'>// trivial but not standard-layout
</span>  int i;
private:
  int j;
};

struct SL {         <span class='comment'>// standard-layout but not trivial
</span>  int i;
  int j;
  ~SL();
};

struct POD {        <span class='comment'>// both trivial and standard-layout
</span>  int i;
  int j;
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-107'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-107'>107)</a></div><div id='footnote-107.sentence-1' class='sentence'>This ensures that two subobjects that have the same class type and that
belong to the same most derived object are not allocated at the same
address (<a href='expr.eq'>[expr.eq]</a>)<a class='hidden_link' href='#footnote-107.sentence-1'>.</a></div></div></div><div id='name' class='section'><h2 ><a class='secnum' href='#name' style='min-width:88pt'>10.2</a> Class names <a class='abbr_ref' href='class.name'>[class.name]</a></h2><span class='indexparent'><a class='index' id=':definition,class_name_as_type'></a></span><span class='indexparent'><a class='index' id=':equivalence,type'></a></span><div class='para' id='name-1'><div class='marginalizedparent'><a class='marginalized' href='#name-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L280'>#</a></div><div id='name-1.sentence-1' class='sentence'>A class definition introduces a new type<a class='hidden_link' href='#name-1.sentence-1'>.</a></div> <div id='name-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#name-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X { int a; };
struct Y { int a; };
X a1;
Y a2;
int a3;</pre><div id='name-1.sentence-2' class='sentence'>declares three variables of three different types<a class='hidden_link' href='#name-1.sentence-2'>.</a></div> <div id='name-1.sentence-3' class='sentence'>This implies that</div><pre class='codeblock'>
a1 = a2;                        <span class='comment'>// error: <span class='tcode_in_codeblock'>Y</span> assigned to <span class='tcode_in_codeblock'>X</span>
</span>a1 = a3;                        <span class='comment'>// error: <span class='tcode_in_codeblock'>int</span> assigned to <span class='tcode_in_codeblock'>X</span>
</span></pre><div id='name-1.sentence-4' class='sentence'>are type mismatches, and that</div><pre class='codeblock'>
int f(X);
int f(Y);</pre><div id='name-1.sentence-5' class='sentence'><span class='indexparent'><a class='index' id=':overloading'></a></span>declare an <a href='over'>overloaded</a> function <span class='texttt'>f()</span> and not
simply a single function <span class='texttt'>f()</span> twice<a class='hidden_link' href='#name-1.sentence-5'>.</a></div> <div id='name-1.sentence-6' class='sentence'>For the same reason,</div><pre class='codeblock'>
struct S { int a; };
struct S { int a; };            <span class='comment'>// error, double definition
</span></pre><div id='name-1.sentence-7' class='sentence'>is ill-formed because it defines <span class='texttt'>S</span> twice<a class='hidden_link' href='#name-1.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='name-2'><div class='marginalizedparent'><a class='marginalized' href='#name-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L318'>#</a></div><div id='name-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':definition,scope_of_class'></a></span><span class='indexparent'><a class='index' id=':class_name,scope_of'></a></span>A class declaration introduces the class name into the scope where
<span class='indexparent'><a class='index' id=':name_hiding,class_definition'></a></span>it is declared and hides any
class, variable, function, or other declaration of that name in an
enclosing <a href='basic.scope'>scope</a><a class='hidden_link' href='#name-2.sentence-1'>.</a></div> <div id='name-2.sentence-2' class='sentence'>If a class name is declared in a
scope where a variable, function, or enumerator of the same name is also
declared, then when both declarations are in scope, the class can be
referred to only using an
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> (<a href='basic.lookup.elab'>[basic.lookup.elab]</a>)<a class='hidden_link' href='#name-2.sentence-2'>.</a></div> <div id='name-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#name-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct stat {
  <span class='comment'>// ...
</span>};

stat gstat;                     <span class='comment'>// use plain <span class='tcode_in_codeblock'>stat</span> to define variable
</span>
int stat(struct stat*);         <span class='comment'>// redeclare <span class='tcode_in_codeblock'>stat</span> as function
</span>
void f() {
  struct stat* ps;              <span class='comment'>// <span class='tcode_in_codeblock'>struct</span> prefix needed to name <span class='tcode_in_codeblock'>struct stat</span>
</span>  stat(ps);                     <span class='comment'>// call <span class='tcode_in_codeblock'>stat()</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='name-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':class_name,elaborated'></a></span><span class='indexparent'><a class='index' id=':declaration,forward_class'></a></span>A <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> consisting solely of <i ><a href='class#nt:class-key'>class-key</a></i>
<i ><a href='lex.name#nt:identifier'>identifier</a></i><span class='texttt'>;</span> is either a redeclaration of the name in the current scope
or a forward declaration of the identifier as a class name<a class='hidden_link' href='#name-2.sentence-3'>.</a></div> <div id='name-2.sentence-4' class='sentence'>It
introduces the class name into the current scope<a class='hidden_link' href='#name-2.sentence-4'>.</a></div> <div id='name-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#name-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct s { int a; };

void g() {
  struct s;                     <span class='comment'>// hide global <span class='tcode_in_codeblock'>struct s</span> with a block-scope declaration
</span>  s* p;                         <span class='comment'>// refer to local <span class='tcode_in_codeblock'>struct s</span>
</span>  struct s { char* p; };        <span class='comment'>// define local <span class='tcode_in_codeblock'>struct s</span>
</span>  struct s;                     <span class='comment'>// redeclaration, has no effect
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='name-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#name-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='name-2.sentence-5' class='sentence'>Such declarations allow definition of classes that refer to each other<a class='hidden_link' href='#name-2.sentence-5'>.</a></div> <div id='name-2.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#name-2.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class Vector;

class Matrix {
  <span class='comment'>// ...
</span>  friend Vector operator*(const Matrix&amp;, const Vector&amp;);
};

class Vector {
  <span class='comment'>// ...
</span>  friend Vector operator*(const Matrix&amp;, const Vector&amp;);
};</pre> <div id='name-2.sentence-6' class='sentence'>
Declaration of friends is described in <a href='#friend'>[class.friend]</a>,
operator functions in <a href='over.oper'>[over.oper]</a><a class='hidden_link' href='#name-2.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='name-3'><div class='marginalizedparent'><a class='marginalized' href='#name-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L385'>#</a></div><span class='indexparent'><a class='index' id=':class_name,elaborated_'></a></span><div id='name-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#name-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='name-3.sentence-1' class='sentence'>An <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> can also
be used as a <i ><a href='dcl.type#nt:type-specifier'>type-specifier</a></i> as part of a declaration<a class='hidden_link' href='#name-3.sentence-1'>.</a></div> <div id='name-3.sentence-2' class='sentence'>It
differs from a class declaration in that if a class of the elaborated
name is in scope the elaborated name will refer to it<a class='hidden_link' href='#name-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> 
<div id='name-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#name-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct s { int a; };

void g(int s) {
  struct s* p = new struct s;   <span class='comment'>// global <span class='tcode_in_codeblock'>s</span>
</span>  p-&gt;a = s;                     <span class='comment'>// parameter <span class='tcode_in_codeblock'>s</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='name-4'><div class='marginalizedparent'><a class='marginalized' href='#name-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L406'>#</a></div><span class='indexparent'><a class='index' id=':class_name,point_of_declaration'></a></span><div id='name-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#name-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='name-4.sentence-1' class='sentence'>The declaration of a class name takes effect immediately after the
<i ><a href='lex.name#nt:identifier'>identifier</a></i> is seen in the class definition or
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i><a class='hidden_link' href='#name-4.sentence-1'>.</a></div> <div id='name-4.sentence-2' class='sentence'>For example,</div><pre class='codeblock'>
class A * A;</pre><div id='name-4.sentence-3' class='sentence'>first specifies <span class='texttt'>A</span> to be the name of a class and then redefines
it as the name of a pointer to an object of that class<a class='hidden_link' href='#name-4.sentence-3'>.</a></div> <div id='name-4.sentence-4' class='sentence'>This means that
the elaborated form <span class='texttt'>class</span> <span class='texttt'>A</span> must be used to refer to the
class<a class='hidden_link' href='#name-4.sentence-4'>.</a></div> <div id='name-4.sentence-5' class='sentence'>Such artistry with names can be confusing and is best avoided<a class='hidden_link' href='#name-4.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='name-5'><div class='marginalizedparent'><a class='marginalized' href='#name-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L423'>#</a></div><div id='name-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':class_name,typedef'></a></span>A <i ><a href='dcl.typedef#nt:typedef-name'>typedef-name</a></i> that names a class type,
or a cv-qualified version thereof, is also a <i ><a href='class#nt:class-name'>class-name</a></i><a class='hidden_link' href='#name-5.sentence-1'>.</a></div> <div id='name-5.sentence-2' class='sentence'>If a
<i ><a href='dcl.typedef#nt:typedef-name'>typedef-name</a></i> that names a cv-qualified class type is used
where a <i ><a href='class#nt:class-name'>class-name</a></i> is required, the cv-qualifiers are
ignored<a class='hidden_link' href='#name-5.sentence-2'>.</a></div> <div id='name-5.sentence-3' class='sentence'>A <i ><a href='dcl.typedef#nt:typedef-name'>typedef-name</a></i> shall not be used as the
<i ><a href='lex.name#nt:identifier'>identifier</a></i> in a <i ><a href='class#nt:class-head'>class-head</a></i><a class='hidden_link' href='#name-5.sentence-3'>.</a></div></div></div><div id='mem' class='section'><h2 ><a class='secnum' href='#mem' style='min-width:88pt'>10.3</a> Class members <a class='abbr_ref' href='class.mem'>[class.mem]</a></h2><span class='indexparent'><a class='index' id=':declaration,member'></a></span><pre class='bnf'><a class='nontermdef' href='#nt:member-specification' id='nt:member-specification'>member-specification:</a>
&#9;<i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i> <i ><a href='class.mem#nt:member-specification'>member-specification</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i> <span class='terminal'>:</span> <i ><a href='class.mem#nt:member-specification'>member-specification</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:member-declaration' id='nt:member-declaration'>member-declaration:</a>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.mem#nt:member-declarator-list'>member-declarator-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>;</span>
&#9;<i ><a href='dcl.fct.def.general#nt:function-definition'>function-definition</a></i>
&#9;<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>
&#9;<i ><a href='dcl.dcl#nt:static_assert-declaration'>static_assert-declaration</a></i>
&#9;<i ><a href='temp#nt:template-declaration'>template-declaration</a></i>
&#9;<i ><a href='temp.deduct.guide#nt:deduction-guide'>deduction-guide</a></i>
&#9;<i ><a href='dcl.dcl#nt:alias-declaration'>alias-declaration</a></i>
&#9;<i ><a href='dcl.dcl#nt:empty-declaration'>empty-declaration</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:member-declarator-list' id='nt:member-declarator-list'>member-declarator-list:</a>
&#9;<i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i>
&#9;<i ><a href='class.mem#nt:member-declarator-list'>member-declarator-list</a></i> <span class='terminal'>,</span> <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:member-declarator' id='nt:member-declarator'>member-declarator:</a>
&#9;<i ><a href='dcl.decl#nt:declarator'>declarator</a></i> <i ><a href='class.mem#nt:virt-specifier-seq'>virt-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.mem#nt:pure-specifier'>pure-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='dcl.decl#nt:declarator'>declarator</a></i> <i ><a href='temp#nt:requires-clause'>requires-clause</a></i>
&#9;<i ><a href='dcl.decl#nt:declarator'>declarator</a></i> <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='lex.name#nt:identifier'>identifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>:</span> <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:virt-specifier-seq' id='nt:virt-specifier-seq'>virt-specifier-seq:</a>
&#9;<i ><a href='class.mem#nt:virt-specifier'>virt-specifier</a></i>
&#9;<i ><a href='class.mem#nt:virt-specifier-seq'>virt-specifier-seq</a></i> <i ><a href='class.mem#nt:virt-specifier'>virt-specifier</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:virt-specifier' id='nt:virt-specifier'>virt-specifier:</a>
&#9;<span class='terminal'>override</span>
&#9;<span class='terminal'>final</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:pure-specifier' id='nt:pure-specifier'>pure-specifier:</a>
&#9;<span class='terminal'>= 0</span>
</pre><div class='para' id='mem-1'><div class='marginalizedparent'><a class='marginalized' href='#mem-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L485'>#</a></div><div id='mem-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':definition,class_'></a></span>The <i ><a href='class.mem#nt:member-specification'>member-specification</a></i> in a class definition declares the
full set of members of the class; no member can be added elsewhere<a class='hidden_link' href='#mem-1.sentence-1'>.</a></div> <div id='mem-1.sentence-2' class='sentence'>A <a class='hidden_link' href='#def:direct_member' id='def:direct_member'><i >direct member</i></a> of a class <span class='texttt'>X</span> is a member of <span class='texttt'>X</span>
that was first declared within the <i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of <span class='texttt'>X</span>,
including anonymous union objects (<a href='#union.anon'>[class.union.anon]</a>) and direct members thereof<a class='hidden_link' href='#mem-1.sentence-2'>.</a></div> <div id='mem-1.sentence-3' class='sentence'>Members of a class are data members, <a href='#mfct'>member functions</a>,
nested types, enumerators,
and <a href='temp.mem'>member templates</a> and specializations thereof<a class='hidden_link' href='#mem-1.sentence-3'>.</a></div> <div id='mem-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-1.sentence-4' class='sentence'>A specialization of a static data member template is a static data member<a class='hidden_link' href='#mem-1.sentence-4'>.</a></div> <div id='mem-1.sentence-5' class='sentence'>A specialization of a member function template is a member function<a class='hidden_link' href='#mem-1.sentence-5'>.</a></div> <div id='mem-1.sentence-6' class='sentence'>A specialization of a member class template is a nested class<a class='hidden_link' href='#mem-1.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-2'><div class='marginalizedparent'><a class='marginalized' href='#mem-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L501'>#</a></div><div id='mem-2.sentence-1' class='sentence'>A <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i> does not declare new members of the class
if it is
<ul class='itemize'><li id='mem-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-2.1'>(2.1)</a></div><div id='mem-2.1.sentence-1' class='sentence'>a <a href='#friend'>friend declaration</a>,</div></li><li id='mem-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-2.2'>(2.2)</a></div><div id='mem-2.2.sentence-1' class='sentence'>a <i ><a href='dcl.dcl#nt:static_assert-declaration'>static_assert-declaration</a></i>,</div></li><li id='mem-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-2.3'>(2.3)</a></div><div id='mem-2.3.sentence-1' class='sentence'>a <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>, or</div></li><li id='mem-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-2.4'>(2.4)</a></div><div id='mem-2.4.sentence-1' class='sentence'>an <i ><a href='dcl.dcl#nt:empty-declaration'>empty-declaration</a></i><a class='hidden_link' href='#mem-2.4.sentence-1'>.</a></div></li></ul></div> <div id='mem-2.sentence-2' class='sentence'>
For any other <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i>,
each declared entity
that is not an <a href='#def:bit-field,unnamed'>unnamed bit-field</a>
is a member of the class,
and each such <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i>
shall either
declare at least one member name of the class
or declare at least one unnamed bit-field<a class='hidden_link' href='#mem-2.sentence-2'>.</a></div></div><div class='para' id='mem-3'><div class='marginalizedparent'><a class='marginalized' href='#mem-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L519'>#</a></div><div id='mem-3.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:data_member' id='def:data_member'><i >data member</i></a> is a non-function member introduced by a
<i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i><a class='hidden_link' href='#mem-3.sentence-1'>.</a></div> <div id='mem-3.sentence-2' class='sentence'>A <a class='hidden_link' href='#def:member_function' id='def:member_function'><i >member function</i></a> is a member that is a function<a class='hidden_link' href='#mem-3.sentence-2'>.</a></div> <div id='mem-3.sentence-3' class='sentence'>Nested types are classes (<a href='#name'>[class.name]</a>, <a href='#nest'>[class.nest]</a>) and
<a href='dcl.enum'>enumerations</a> declared in the class and arbitrary types
declared as members by use of a <a href='dcl.typedef'>typedef declaration</a>
or <i ><a href='dcl.dcl#nt:alias-declaration'>alias-declaration</a></i><a class='hidden_link' href='#mem-3.sentence-3'>.</a></div> <div id='mem-3.sentence-4' class='sentence'>The enumerators of an <a href='dcl.enum'>unscoped enumeration</a> defined in the class
are members of the class<a class='hidden_link' href='#mem-3.sentence-4'>.</a></div> <span class='indexparent'><a class='index' id=':member,static'></a></span><span class='indexparent'><a class='index' id=':member_function,static'></a></span><span class='indexparent'><a class='index' id=':data_member,static'></a></span></div><div class='para' id='mem-4'><div class='marginalizedparent'><a class='marginalized' href='#mem-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L533'>#</a></div><div id='mem-4.sentence-1' class='sentence'>A data member or member function
may be declared <span class='texttt'>static</span> in its <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i>,
in which case it is a <a class='hidden_link' href='#def:static_member' id='def:static_member'><i >static member</i></a> (see <a href='#static'>[class.static]</a>)
(a <a class='hidden_link' href='#def:static_data_member' id='def:static_data_member'><i >static data member</i></a> (<a href='#static.data'>[class.static.data]</a>) or
<a class='hidden_link' href='#def:static_member_function' id='def:static_member_function'><i >static member function</i></a> (<a href='#static.mfct'>[class.static.mfct]</a>), respectively)
of the class<a class='hidden_link' href='#mem-4.sentence-1'>.</a></div> <div id='mem-4.sentence-2' class='sentence'>Any other data member or member function is a <a class='hidden_link' href='#def:non-static_member' id='def:non-static_member'><i >non-static member</i></a>
(a <a class='hidden_link' href='#def:non-static_data_member' id='def:non-static_data_member'><i >non-static data member</i></a> or
<a class='hidden_link' href='#def:non-static_member_function' id='def:non-static_member_function'><i >non-static member function</i></a> (<a href='#mfct.non-static'>[class.mfct.non-static]</a>), respectively)<a class='hidden_link' href='#mem-4.sentence-2'>.</a></div> <div id='mem-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-4.sentence-3' class='sentence'>A non-static data member of non-reference
type is a <a href='intro.object#def:member_subobject'>member subobject</a> of a class object<a class='hidden_link' href='#mem-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-5'><div class='marginalizedparent'><a class='marginalized' href='#mem-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L546'>#</a></div><div id='mem-5.sentence-1' class='sentence'>A member shall not be declared twice in the
<i ><a href='class.mem#nt:member-specification'>member-specification</a></i>, except that
<ul class='itemize'><li id='mem-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-5.1'>(5.1)</a></div><div id='mem-5.1.sentence-1' class='sentence'>a nested class or member
class template can be declared and then later defined, and</div></li><li id='mem-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-5.2'>(5.2)</a></div><div id='mem-5.2.sentence-1' class='sentence'>an
enumeration can be introduced with an <i ><a href='dcl.enum#nt:opaque-enum-declaration'>opaque-enum-declaration</a></i> and later
redeclared with an <i ><a href='dcl.enum#nt:enum-specifier'>enum-specifier</a></i><a class='hidden_link' href='#mem-5.2.sentence-1'>.</a></div></li></ul></div> <div id='mem-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-5.sentence-2' class='sentence'>A single name can denote several member functions provided their types
are sufficiently different (<a href='over'>[over]</a>)<a class='hidden_link' href='#mem-5.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-6'><div class='marginalizedparent'><a class='marginalized' href='#mem-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L561'>#</a></div><div id='mem-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':completely_defined'></a></span>A <a class='hidden_link' href='#def:complete-class_context' id='def:complete-class_context'><i >complete-class context</i></a> of a class is a
<ul class='itemize'><li id='mem-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-6.1'>(6.1)</a></div><div id='mem-6.1.sentence-1' class='sentence'>function body (<a href='dcl.fct.def.general'>[dcl.fct.def.general]</a>),</div></li><li id='mem-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-6.2'>(6.2)</a></div><div id='mem-6.2.sentence-1' class='sentence'>default argument (<a href='dcl.fct.default'>[dcl.fct.default]</a>),</div></li><li id='mem-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-6.3'>(6.3)</a></div><div id='mem-6.3.sentence-1' class='sentence'><i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i>,</div></li><li id='mem-6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-6.4'>(6.4)</a></div><div id='mem-6.4.sentence-1' class='sentence'>contract condition (<a href='dcl.attr.contract'>[dcl.attr.contract]</a>), or</div></li><li id='mem-6.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-6.5'>(6.5)</a></div><div id='mem-6.5.sentence-1' class='sentence'>default member initializer</div></li></ul>
within the <i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of the class<a class='hidden_link' href='#mem-6.sentence-1'>.</a></div> <div id='mem-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-6.sentence-2' class='sentence'>A complete-class context of a nested class is also a complete-class
context of any enclosing class, if the nested class is defined within
the <i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of the enclosing class<a class='hidden_link' href='#mem-6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-7'><div class='marginalizedparent'><a class='marginalized' href='#mem-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L578'>#</a></div><div id='mem-7.sentence-1' class='sentence'>A class is considered a completely-defined object
type (<a href='basic.types'>[basic.types]</a>) (or complete type) at the closing <span class='texttt'>}</span> of
the <i ><a href='class#nt:class-specifier'>class-specifier</a></i><a class='hidden_link' href='#mem-7.sentence-1'>.</a></div> <div id='mem-7.sentence-2' class='sentence'>The class is regarded as complete within its complete-class contexts;
otherwise it is regarded as incomplete within its own class
<i ><a href='class.mem#nt:member-specification'>member-specification</a></i><a class='hidden_link' href='#mem-7.sentence-2'>.</a></div></div><div class='para' id='mem-8'><div class='marginalizedparent'><a class='marginalized' href='#mem-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L586'>#</a></div><div id='mem-8.sentence-1' class='sentence'>In a <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i>,
an <span class='texttt'>=</span> immediately following the <i ><a href='dcl.decl#nt:declarator'>declarator</a></i>
is interpreted as introducing a <i ><a href='class.mem#nt:pure-specifier'>pure-specifier</a></i>
if the <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> has function type,
otherwise it is interpreted as introducing
a <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i><a class='hidden_link' href='#mem-8.sentence-1'>.</a></div> <div id='mem-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  using T = void();
  T * p = 0;        <span class='comment'>// OK: <span class='grammarterm'>brace-or-equal-initializer</span>
</span>  virtual T f = 0;  <span class='comment'>// OK: <span class='grammarterm'>pure-specifier</span>
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-9'><div class='marginalizedparent'><a class='marginalized' href='#mem-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L603'>#</a></div><div id='mem-9.sentence-1' class='sentence'>In a <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i> for a bit-field,
the <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> is parsed as
the longest sequence of tokens
that could syntactically form a <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i><a class='hidden_link' href='#mem-9.sentence-1'>.</a></div> <div id='mem-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int a;
const int b = 0;
struct S {
  int x1 : 8 = 42;               <span class='comment'>// OK, <span class='tcode_in_codeblock'>"= 42"</span> is <span class='grammarterm'>brace-or-equal-initializer</span>
</span>  int x2 : 8 { 42 };             <span class='comment'>// OK, <span class='tcode_in_codeblock'>"{ 42 }"</span> is <span class='grammarterm'>brace-or-equal-initializer</span>
</span>  int y1 : true ? 8 : a = 42;    <span class='comment'>// OK, <span class='grammarterm'>brace-or-equal-initializer</span> is absent
</span>  int y2 : true ? 8 : b = 42;    <span class='comment'>// error: cannot assign to <span class='tcode_in_codeblock'>const int</span>
</span>  int y3 : (true ? 8 : b) = 42;  <span class='comment'>// OK, <span class='tcode_in_codeblock'>"= 42"</span> is <span class='grammarterm'>brace-or-equal-initializer</span>
</span>  int z : 1 || new int { 0 };    <span class='comment'>// OK, <span class='grammarterm'>brace-or-equal-initializer</span> is absent
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-10'><div class='marginalizedparent'><a class='marginalized' href='#mem-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L623'>#</a></div><div id='mem-10.sentence-1' class='sentence'>A <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i> shall appear only in the
declaration of a data member<a class='hidden_link' href='#mem-10.sentence-1'>.</a></div> <div id='mem-10.sentence-2' class='sentence'>(For static data members,
see <a href='#static.data'>[class.static.data]</a>; for non-static data members,
see <a href='#base.init'>[class.base.init]</a> and <a href='dcl.init.aggr'>[dcl.init.aggr]</a>)<a class='hidden_link' href='#mem-10.sentence-2'>.</a></div> <div id='mem-10.sentence-3' class='sentence'>A <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i> for a non-static data member
<span class='indexparent'><a class='index' id=':member,default_initializer'></a></span>specifies a <a class='hidden_link' href='#def:default_member_initializer' id='def:default_member_initializer'><i >default member initializer</i></a> for the member, and
shall not directly or indirectly cause the implicit definition of a
defaulted default constructor for the enclosing class or the
exception specification of that constructor<a class='hidden_link' href='#mem-10.sentence-3'>.</a></div></div><div class='para' id='mem-11'><div class='marginalizedparent'><a class='marginalized' href='#mem-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L635'>#</a></div><div id='mem-11.sentence-1' class='sentence'>A member shall not be declared with the <span class='texttt'>extern</span>
<i ><a href='dcl.stc#nt:storage-class-specifier'>storage-class-specifier</a></i><a class='hidden_link' href='#mem-11.sentence-1'>.</a></div> <div id='mem-11.sentence-2' class='sentence'>Within a class definition, a member shall not be declared with the <span class='texttt'>thread_&shy;local</span> <i ><a href='dcl.stc#nt:storage-class-specifier'>storage-class-specifier</a></i> unless also declared <span class='texttt'>static</span><a class='hidden_link' href='#mem-11.sentence-2'>.</a></div></div><div class='para' id='mem-12'><div class='marginalizedparent'><a class='marginalized' href='#mem-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L639'>#</a></div><div id='mem-12.sentence-1' class='sentence'>The <i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i> may be omitted in constructor, destructor,
and conversion function declarations only;
when declaring another kind of member the <i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i>
shall contain a <i ><a href='dcl.type#nt:type-specifier'>type-specifier</a></i> that is not a <i ><a href='dcl.decl#nt:cv-qualifier'>cv-qualifier</a></i><a class='hidden_link' href='#mem-12.sentence-1'>.</a></div> <div id='mem-12.sentence-2' class='sentence'>The
<i ><a href='class.mem#nt:member-declarator-list'>member-declarator-list</a></i> can be omitted only after a
<i ><a href='class#nt:class-specifier'>class-specifier</a></i> or an <i ><a href='dcl.enum#nt:enum-specifier'>enum-specifier</a></i> or in a
<a href='#friend'>friend declaration</a><a class='hidden_link' href='#mem-12.sentence-2'>.</a></div> <div id='mem-12.sentence-3' class='sentence'>A
<i ><a href='class.mem#nt:pure-specifier'>pure-specifier</a></i> shall be used only in the declaration of a
<a href='#virtual'>virtual function</a>
that is not a friend declaration<a class='hidden_link' href='#mem-12.sentence-3'>.</a></div></div><div class='para' id='mem-13'><div class='marginalizedparent'><a class='marginalized' href='#mem-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L652'>#</a></div><div id='mem-13.sentence-1' class='sentence'>The optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> in a <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i>
appertains to each of the entities declared by the <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i><span class='textit'>s</span>;
it shall not appear if the optional <i ><a href='class.mem#nt:member-declarator-list'>member-declarator-list</a></i> is omitted<a class='hidden_link' href='#mem-13.sentence-1'>.</a></div></div><div class='para' id='mem-14'><div class='marginalizedparent'><a class='marginalized' href='#mem-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L657'>#</a></div><div id='mem-14.sentence-1' class='sentence'>A <i ><a href='class.mem#nt:virt-specifier-seq'>virt-specifier-seq</a></i> shall contain at most one of each
<i ><a href='class.mem#nt:virt-specifier'>virt-specifier</a></i><a class='hidden_link' href='#mem-14.sentence-1'>.</a></div> <div id='mem-14.sentence-2' class='sentence'>A <i ><a href='class.mem#nt:virt-specifier-seq'>virt-specifier-seq</a></i>
shall appear only in the first declaration of a virtual member
function (<a href='#virtual'>[class.virtual]</a>)<a class='hidden_link' href='#mem-14.sentence-2'>.</a></div></div><div class='para' id='mem-15'><div class='marginalizedparent'><a class='marginalized' href='#mem-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L664'>#</a></div><div id='mem-15.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':class_object,member'></a></span>The type of a non-static data member shall not be an
incomplete type (<a href='basic.types'>[basic.types]</a>),
an abstract class type (<a href='#abstract'>[class.abstract]</a>),
or a (possibly multi-dimensional) array thereof<a class='hidden_link' href='#mem-15.sentence-1'>.</a></div> <div id='mem-15.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-15.sentence-2' class='sentence'>In particular, a class <span class='texttt'>C</span> cannot contain
a non-static member of class <span class='texttt'>C</span>,
but it can contain a pointer or reference to an object of class <span class='texttt'>C</span><a class='hidden_link' href='#mem-15.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-16'><div class='marginalizedparent'><a class='marginalized' href='#mem-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L676'>#</a></div><div id='mem-16.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-16.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-16.sentence-1' class='sentence'>See <a href='expr.prim.id'>[expr.prim.id]</a> for restrictions on the use of non-static data
members and non-static member functions<a class='hidden_link' href='#mem-16.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-17'><div class='marginalizedparent'><a class='marginalized' href='#mem-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L682'>#</a></div><div id='mem-17.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-17.sentence-1' class='sentence'>The type of a non-static member function is an ordinary function type,
and the type of a non-static data member is an ordinary object type<a class='hidden_link' href='#mem-17.sentence-1'>.</a></div> <div id='mem-17.sentence-2' class='sentence'>There are no special member function types or data member types<a class='hidden_link' href='#mem-17.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-18'><div class='marginalizedparent'><a class='marginalized' href='#mem-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L689'>#</a></div><div id='mem-18.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='mem-18.sentence-1' class='sentence'>A simple example of a class definition is
<pre class='codeblock'>
struct tnode {
  char tword[20];
  int count;
  tnode* left;
  tnode* right;
};</pre>
which contains an array of twenty characters, an integer, and two
pointers to objects of the same type<a class='hidden_link' href='#mem-18.sentence-1'>.</a></div> <div id='mem-18.sentence-2' class='sentence'>Once this definition has been
given, the declaration
<pre class='codeblock'>
tnode s, *sp;</pre>
declares <span class='texttt'>s</span> to be a <span class='texttt'>tnode</span> and <span class='texttt'>sp</span> to be a pointer
to a <span class='texttt'>tnode</span><a class='hidden_link' href='#mem-18.sentence-2'>.</a></div> <div id='mem-18.sentence-3' class='sentence'>With these declarations, <span class='texttt'>sp-&gt;count</span> refers to
the <span class='texttt'>count</span> member of the object to which <span class='texttt'>sp</span> points;
<span class='texttt'>s.left</span> refers to the <span class='texttt'>left</span> subtree pointer of the object
<span class='texttt'>s</span>; and <span class='texttt'>s.right-&gt;tword[0]</span> refers to the initial character
of the <span class='texttt'>tword</span> member of the <span class='texttt'>right</span> subtree of <span class='texttt'>s</span><a class='hidden_link' href='#mem-18.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-19'><div class='marginalizedparent'><a class='marginalized' href='#mem-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L714'>#</a></div><div id='mem-19.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':layout,class_object'></a></span>Non-static data members of a (non-union) class
with the same <a href='#access'>access control</a>
are allocated so that later
members have higher addresses within a class object<a class='hidden_link' href='#mem-19.sentence-1'>.</a></div> <div id='mem-19.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':allocation,unspecified'></a></span>The order of allocation of non-static data members
with different <a href='#access'>access control</a>
is unspecified<a class='hidden_link' href='#mem-19.sentence-2'>.</a></div> <div id='mem-19.sentence-3' class='sentence'>Implementation alignment requirements might cause two adjacent members
not to be allocated immediately after each other; so might requirements
for space for managing <a href='#virtual'>virtual functions</a> and
virtual <a href='#mi'>base classes</a><a class='hidden_link' href='#mem-19.sentence-3'>.</a></div></div><div class='para' id='mem-20'><div class='marginalizedparent'><a class='marginalized' href='#mem-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L729'>#</a></div><div id='mem-20.sentence-1' class='sentence'>If <span class='texttt'>T</span> is the name of a class, then each of the following shall
have a name different from <span class='texttt'>T</span>:</div><div id='mem-20.sentence-2' class='sentence'><ul class='itemize'><li id='mem-20.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-20.1'>(20.1)</a></div><div id='mem-20.1.sentence-1' class='sentence'>every static data member of class <span class='texttt'>T</span>;</div></li><li id='mem-20.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-20.2'>(20.2)</a></div><div id='mem-20.2.sentence-1' class='sentence'>every member function of class <span class='texttt'>T</span>
<div id='mem-20.2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-20.2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-20.2.sentence-2' class='sentence'>This restriction does not apply to <a href='#ctor'>constructors</a>,
which do not have names</div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> ;</div></li><li id='mem-20.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-20.3'>(20.3)</a></div><div id='mem-20.3.sentence-1' class='sentence'>every member of class <span class='texttt'>T</span> that is itself a type;</div></li><li id='mem-20.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-20.4'>(20.4)</a></div><div id='mem-20.4.sentence-1' class='sentence'>every member template of class <span class='texttt'>T</span>;</div></li><li id='mem-20.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-20.5'>(20.5)</a></div><div id='mem-20.5.sentence-1' class='sentence'>every enumerator of every member of class <span class='texttt'>T</span> that is an
unscoped enumerated type; and</div></li><li id='mem-20.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#mem-20.6'>(20.6)</a></div><div id='mem-20.6.sentence-1' class='sentence'>every member of every anonymous union that is a member of class
<span class='texttt'>T</span><a class='hidden_link' href='#mem-20.6.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='mem-21'><div class='marginalizedparent'><a class='marginalized' href='#mem-21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L753'>#</a></div><div id='mem-21.sentence-1' class='sentence'>In addition, if class <span class='texttt'>T</span> has a user-declared
<a href='#ctor'>constructor</a>, every non-static data member of class
<span class='texttt'>T</span> shall have a name different from <span class='texttt'>T</span><a class='hidden_link' href='#mem-21.sentence-1'>.</a></div></div><div class='para' id='mem-22'><div class='marginalizedparent'><a class='marginalized' href='#mem-22'>22</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L758'>#</a></div><div id='mem-22.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:common_initial_sequence' id='def:common_initial_sequence'><i >common initial sequence</i></a> of two standard-layout struct (<a href='#prop'>[class.prop]</a>)
types is the longest sequence of non-static data
members and bit-fields in declaration order, starting with the first
such entity in each of the structs, such that corresponding entities
have layout-compatible types,
either both entities are declared with
the <span class='texttt'>no_&shy;unique_&shy;address</span> attribute (<a href='dcl.attr.nouniqueaddr'>[dcl.attr.nouniqueaddr]</a>)
or neither is,
and either both entities are bit-fields with the same width
or neither is a bit-field<a class='hidden_link' href='#mem-22.sentence-1'>.</a></div> <div id='mem-22.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-22.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
  struct A { int a; char b; };
  struct B { const int b1; volatile char b2; };
  struct C { int c; unsigned : 0; char b; };
  struct D { int d; char b : 4; };
  struct E { unsigned int e; char b; };</pre> <div id='mem-22.sentence-2' class='sentence'>
The common initial sequence of <span class='texttt'>A</span> and <span class='texttt'>B</span> comprises all members
of either class<a class='hidden_link' href='#mem-22.sentence-2'>.</a></div> <div id='mem-22.sentence-3' class='sentence'>The common initial sequence of <span class='texttt'>A</span> and <span class='texttt'>C</span> and
of <span class='texttt'>A</span> and <span class='texttt'>D</span> comprises the first member in each case<a class='hidden_link' href='#mem-22.sentence-3'>.</a></div> <div id='mem-22.sentence-4' class='sentence'>The common initial sequence of <span class='texttt'>A</span> and <span class='texttt'>E</span> is empty<a class='hidden_link' href='#mem-22.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-23'><div class='marginalizedparent'><a class='marginalized' href='#mem-23'>23</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L783'>#</a></div><div id='mem-23.sentence-1' class='sentence'>Two standard-layout struct (<a href='#prop'>[class.prop]</a>) types are
<a class='hidden_link' href='#def:layout-compatible,class' id='def:layout-compatible,class'><i >layout-compatible classes</i></a> if
their common initial sequence comprises all members and bit-fields of
both classes (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#mem-23.sentence-1'>.</a></div></div><div class='para' id='mem-24'><div class='marginalizedparent'><a class='marginalized' href='#mem-24'>24</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L789'>#</a></div><div id='mem-24.sentence-1' class='sentence'>Two standard-layout unions are layout-compatible if they
have the same number of non-static data members and corresponding
non-static data members (in any order) have <a href='basic.types#def:layout-compatible'>layout-compatible
types</a><a class='hidden_link' href='#mem-24.sentence-1'>.</a></div></div><div class='para' id='mem-25'><div class='marginalizedparent'><a class='marginalized' href='#mem-25'>25</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L795'>#</a></div><div id='mem-25.sentence-1' class='sentence'>In a standard-layout union with an <a href='#def:active,union_member'>active member</a>
of struct type <span class='texttt'>T1</span>, it is permitted to read a non-static
data member <span class='texttt'>m</span> of another union member of struct type <span class='texttt'>T2</span>
provided <span class='texttt'>m</span> is part of the common initial sequence of <span class='texttt'>T1</span> and <span class='texttt'>T2</span>;
the behavior is as if the corresponding member of <span class='texttt'>T1</span> were nominated<a class='hidden_link' href='#mem-25.sentence-1'>.</a></div> <div id='mem-25.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mem-25.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct T1 { int a, b; };
struct T2 { int c; double d; };
union U { T1 t1; T2 t2; };
int f() {
  U u = { { 1, 2 } };   <span class='comment'>// active member is <span class='tcode_in_codeblock'>t1</span>
</span>  return u.t2.c;        <span class='comment'>// OK, as if <span class='tcode_in_codeblock'>u.t1.a</span> were nominated
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='mem-25.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-25.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-25.sentence-2' class='sentence'>Reading a volatile object through a glvalue of non-volatile type has
undefined behavior (<a href='dcl.type.cv'>[dcl.type.cv]</a>)<a class='hidden_link' href='#mem-25.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mem-26'><div class='marginalizedparent'><a class='marginalized' href='#mem-26'>26</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L817'>#</a></div><div id='mem-26.sentence-1' class='sentence'>If a standard-layout class object has any non-static data members, its address
is the same as the address of its first non-static data member
if that member is not a bit-field<a class='hidden_link' href='#mem-26.sentence-1'>.</a></div> <div id='mem-26.sentence-2' class='sentence'>Its
address is also the same as the address of each of its base class subobjects<a class='hidden_link' href='#mem-26.sentence-2'>.</a></div> <div id='mem-26.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-26.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-26.sentence-3' class='sentence'>There might therefore be unnamed padding within a standard-layout struct object
inserted by an implementation, but
not at its beginning, as necessary to achieve appropriate alignment<a class='hidden_link' href='#mem-26.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='mem-26.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mem-26.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-26.sentence-4' class='sentence'>The object and its first subobject are
pointer-interconvertible (<a href='basic.compound'>[basic.compound]</a>, <a href='expr.static.cast'>[expr.static.cast]</a>)<a class='hidden_link' href='#mem-26.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='mfct' class='section'><h3 ><a class='secnum' href='#mfct' style='min-width:103pt'>10.3.1</a> Member functions <a class='abbr_ref' href='class.mfct'>[class.mfct]</a></h3><span class='indexparent'><a class='index' id=':member_function,class'></a></span><div class='para' id='mfct-1'><div class='marginalizedparent'><a class='marginalized' href='#mfct-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L835'>#</a></div><div id='mfct-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member_function,inline'></a></span><span class='indexparent'><a class='index' id=':definition,member_function'></a></span>A member function may be <a href='dcl.fct.def'>defined</a> in its class
definition, in which case it is an <a href='dcl.inline#def:inline_function'>inline</a> member
function, or it may be defined outside of its class
definition if it has already been declared but not defined in its class
definition<a class='hidden_link' href='#mfct-1.sentence-1'>.</a></div> <div id='mfct-1.sentence-2' class='sentence'>A member function definition that appears outside of the
class definition shall appear in a namespace scope enclosing the class
definition<a class='hidden_link' href='#mfct-1.sentence-2'>.</a></div> <div id='mfct-1.sentence-3' class='sentence'>Except for member function definitions that appear outside
of a class definition, and except for explicit specializations of member
functions of class templates and member function
templates (<a href='temp.spec'>[temp.spec]</a>) appearing outside of the class definition, a
member function shall not be redeclared<a class='hidden_link' href='#mfct-1.sentence-3'>.</a></div></div><div class='para' id='mfct-2'><div class='marginalizedparent'><a class='marginalized' href='#mfct-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L850'>#</a></div><div id='mfct-2.sentence-1' class='sentence'>An inline member function (whether static or non-static) may
also be defined outside of its class definition provided either its
declaration in the class definition or its definition outside of the
class definition declares the function as <span class='texttt'>inline</span> or <span class='texttt'>constexpr</span><a class='hidden_link' href='#mfct-2.sentence-1'>.</a></div> <div id='mfct-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mfct-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mfct-2.sentence-2' class='sentence'>Member functions of a class in namespace scope have the linkage of that class<a class='hidden_link' href='#mfct-2.sentence-2'>.</a></div> <div id='mfct-2.sentence-3' class='sentence'>Member functions of a <a href='#local'>local class</a> have no linkage<a class='hidden_link' href='#mfct-2.sentence-3'>.</a></div> <div id='mfct-2.sentence-4' class='sentence'>See <a href='basic.link'>[basic.link]</a><a class='hidden_link' href='#mfct-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mfct-3'><div class='marginalizedparent'><a class='marginalized' href='#mfct-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L861'>#</a></div><div id='mfct-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mfct-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mfct-3.sentence-1' class='sentence'>There can be at most one definition of a non-inline member function in
a program<a class='hidden_link' href='#mfct-3.sentence-1'>.</a></div> <div id='mfct-3.sentence-2' class='sentence'>There may be more than one
inline member function definition in a program<a class='hidden_link' href='#mfct-3.sentence-2'>.</a></div> <div id='mfct-3.sentence-3' class='sentence'>See <a href='basic.def.odr'>[basic.def.odr]</a> and <a href='dcl.inline'>[dcl.inline]</a><a class='hidden_link' href='#mfct-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mfct-4'><div class='marginalizedparent'><a class='marginalized' href='#mfct-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L869'>#</a></div><div id='mfct-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator,scope_resolution'></a></span>If the definition of a member function is lexically outside its class
definition, the member function name shall be qualified by its class
name using the <span class='texttt'>&#x200b;::&#x200b;</span> operator<a class='hidden_link' href='#mfct-4.sentence-1'>.</a></div> <div id='mfct-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mfct-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mfct-4.sentence-2' class='sentence'>A name used in a member function definition (that is, in the
<i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> including the <a href='dcl.fct.default'>default
arguments</a> or in the member function body) is looked up
as described in <a href='basic.lookup'>[basic.lookup]</a><a class='hidden_link' href='#mfct-4.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='mfct-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mfct-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  typedef int T;
  static T count;
  void f(T);
};
void X::f(T t = count) { }</pre><div id='mfct-4.sentence-3' class='sentence'>The member function <span class='texttt'>f</span> of class <span class='texttt'>X</span> is defined in global
scope; the notation <span class='texttt'>X&#x200b;::&#x200b;f</span> specifies that the function <span class='texttt'>f</span>
is a member of class <span class='texttt'>X</span> and in the scope of class <span class='texttt'>X</span><a class='hidden_link' href='#mfct-4.sentence-3'>.</a></div> <div id='mfct-4.sentence-4' class='sentence'>In
the function definition, the parameter type <span class='texttt'>T</span> refers to the
typedef member <span class='texttt'>T</span> declared in class <span class='texttt'>X</span> and the default
argument <span class='texttt'>count</span> refers to the static data member <span class='texttt'>count</span>
declared in class <span class='texttt'>X</span><a class='hidden_link' href='#mfct-4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mfct-5'><div class='marginalizedparent'><a class='marginalized' href='#mfct-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L900'>#</a></div><div id='mfct-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mfct-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mfct-5.sentence-1' class='sentence'>A <span class='texttt'>static</span> local variable or local type in a member function always refers to
the same entity, whether or not the member function is inline<a class='hidden_link' href='#mfct-5.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mfct-6'><div class='marginalizedparent'><a class='marginalized' href='#mfct-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L906'>#</a></div><div id='mfct-6.sentence-1' class='sentence'>Previously declared member functions may be mentioned in friend declarations<a class='hidden_link' href='#mfct-6.sentence-1'>.</a></div></div><div class='para' id='mfct-7'><div class='marginalizedparent'><a class='marginalized' href='#mfct-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L909'>#</a></div><div id='mfct-7.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':local_class,member_function_in'></a></span>Member functions of a local class shall be defined inline in their class
definition, if they are defined at all<a class='hidden_link' href='#mfct-7.sentence-1'>.</a></div></div><div class='para' id='mfct-8'><div class='marginalizedparent'><a class='marginalized' href='#mfct-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L914'>#</a></div><div id='mfct-8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mfct-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mfct-8.sentence-1' class='sentence'>A member function can be declared (but not defined) using a typedef for
a function type<a class='hidden_link' href='#mfct-8.sentence-1'>.</a></div> <div id='mfct-8.sentence-2' class='sentence'>The resulting member function has exactly the same type
as it would have if the function declarator were provided explicitly,
see <a href='dcl.fct'>[dcl.fct]</a><a class='hidden_link' href='#mfct-8.sentence-2'>.</a></div> <div id='mfct-8.sentence-3' class='sentence'>For example,</div><pre class='codeblock'>
typedef void fv();
typedef void fvc() const;
struct S {
  fv memfunc1;      <span class='comment'>// equivalent to: <span class='tcode_in_codeblock'>void memfunc1();</span>
</span>  void memfunc2();
  fvc memfunc3;     <span class='comment'>// equivalent to: <span class='tcode_in_codeblock'>void memfunc3() const;</span>
</span>};
fv  S::* pmfv1 = &amp;S::memfunc1;
fv  S::* pmfv2 = &amp;S::memfunc2;
fvc S::* pmfv3 = &amp;S::memfunc3;</pre><div id='mfct-8.sentence-4' class='sentence'>Also see <a href='temp.arg'>[temp.arg]</a><a class='hidden_link' href='#mfct-8.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='mfct.non-static' class='section'><h3 ><a class='secnum' href='#mfct.non-static' style='min-width:103pt'>10.3.2</a> Non-static member functions <a class='abbr_ref' href='class.mfct.non-static'>[class.mfct.non-static]</a></h3><span class='indexparent'><a class='index' id=':member_function,non-static'></a></span><div class='para' id='mfct.non-static-1'><div class='marginalizedparent'><a class='marginalized' href='#mfct.non-static-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L940'>#</a></div><div id='mfct.non-static-1.sentence-1' class='sentence'>A non-static member function may be called for an object of
its class type, or for an object of a class <a href='#derived'>derived</a>
from its class type, using the
<a href='expr.ref'>class member access</a> syntax (<a href='over.match.call'>[over.match.call]</a>)<a class='hidden_link' href='#mfct.non-static-1.sentence-1'>.</a></div> <div id='mfct.non-static-1.sentence-2' class='sentence'>A non-static
member function may also be called directly using the function call
syntax (<a href='expr.call'>[expr.call]</a>, <a href='over.match.call'>[over.match.call]</a>) from within
the body of a member function of its class or of a class derived from
its class<a class='hidden_link' href='#mfct.non-static-1.sentence-2'>.</a></div></div><div class='para' id='mfct.non-static-2'><div class='marginalizedparent'><a class='marginalized' href='#mfct.non-static-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L950'>#</a></div><div id='mfct.non-static-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member_function,call_undefined'></a></span>If a non-static member function of a class <span class='texttt'>X</span> is called for an
object that is not of type <span class='texttt'>X</span>, or of a type derived from
<span class='texttt'>X</span>, the behavior is undefined<a class='hidden_link' href='#mfct.non-static-2.sentence-1'>.</a></div></div><div class='para' id='mfct.non-static-3'><div class='marginalizedparent'><a class='marginalized' href='#mfct.non-static-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L956'>#</a></div><div id='mfct.non-static-3.sentence-1' class='sentence'>When an <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> that is not part of a
<a href='expr.ref'>class member access</a> syntax and not used to form a
pointer to member (<a href='expr.unary.op'>[expr.unary.op]</a>) is used in
a member of class <span class='texttt'>X</span> in a context where <a href='expr.prim.this'><span class='texttt'>this</span></a> can be
used,
if <a href='basic.lookup'>name lookup</a> resolves the name in the
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> to a non-static non-type member of some class
<span class='texttt'>C</span>,
and if either the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is potentially evaluated or
<span class='texttt'>C</span> is <span class='texttt'>X</span> or a base class of <span class='texttt'>X</span>,
the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is transformed into a
<a href='expr.ref'>class member access</a> expression using
<a href='#this'><span class='texttt'>(*this)</span></a> as the <i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i>
to the left of the <span class='texttt'>.</span> operator<a class='hidden_link' href='#mfct.non-static-3.sentence-1'>.</a></div> <div id='mfct.non-static-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mfct.non-static-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mfct.non-static-3.sentence-4' class='sentence'>If <span class='texttt'>C</span> is not <span class='texttt'>X</span> or a base class of <span class='texttt'>X</span>, the class
member access expression is ill-formed<a class='hidden_link' href='#mfct.non-static-3.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='mfct.non-static-3.sentence-2' class='sentence'>
Similarly during name lookup, when an
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> used in the definition of a
member function for class <span class='texttt'>X</span> resolves to a static member,
an enumerator or a nested type of class <span class='texttt'>X</span> or of a base class of
<span class='texttt'>X</span>, the <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> is transformed into a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> in which the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> names the class of the member function<a class='hidden_link' href='#mfct.non-static-3.sentence-2'>.</a></div> <div id='mfct.non-static-3.sentence-3' class='sentence'>These transformations do not apply in the
template definition context (<a href='temp.dep.type'>[temp.dep.type]</a>)<a class='hidden_link' href='#mfct.non-static-3.sentence-3'>.</a></div> <div id='mfct.non-static-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mfct.non-static-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct tnode {
  char tword[20];
  int count;
  tnode* left;
  tnode* right;
  void set(const char*, tnode* l, tnode* r);
};

void tnode::set(const char* w, tnode* l, tnode* r) {
  count = strlen(w)+1;
  if (sizeof(tword)&lt;=count)
      perror("tnode string too long");
  strcpy(tword,w);
  left = l;
  right = r;
}

void f(tnode n1, tnode n2) {
  n1.set("abc",&amp;n2,0);
  n2.set("def",0,0);
}</pre><div id='mfct.non-static-3.sentence-5' class='sentence'>In the body of the member function <span class='texttt'>tnode&#x200b;::&#x200b;set</span>, the member names
<span class='texttt'>tword</span>, <span class='texttt'>count</span>, <span class='texttt'>left</span>, and <span class='texttt'>right</span> refer to
members of the object for which the function is called<a class='hidden_link' href='#mfct.non-static-3.sentence-5'>.</a></div> <div id='mfct.non-static-3.sentence-6' class='sentence'>Thus, in the
call <span class='texttt'>n1.set("abc",&amp;n2,0)</span>, <span class='texttt'>tword</span> refers to
<span class='texttt'>n1.tword</span>, and in the call <span class='texttt'>n2.set("def",0,0)</span>, it refers
to <span class='texttt'>n2.tword</span><a class='hidden_link' href='#mfct.non-static-3.sentence-6'>.</a></div> <div id='mfct.non-static-3.sentence-7' class='sentence'>The functions <span class='texttt'>strlen</span>, <span class='texttt'>perror</span>, and
<span class='texttt'>strcpy</span> are not members of the class <span class='texttt'>tnode</span> and should be
declared elsewhere<a class='hidden_link' href='#mfct.non-static-3.sentence-7'>.</a><a class='footnotenum' href='#footnote-108'>108</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mfct.non-static-4'><div class='marginalizedparent'><a class='marginalized' href='#mfct.non-static-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1020'>#</a></div><div id='mfct.non-static-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member_function,const'></a></span><span class='indexparent'><a class='index' id=':member_function,volatile'></a></span><span class='indexparent'><a class='index' id=':member_function,const_volatile'></a></span>A non-static member function may be declared <span class='texttt'>const</span>,
<span class='texttt'>volatile</span>, or <span class='texttt'>const</span> <span class='texttt'>volatile</span><a class='hidden_link' href='#mfct.non-static-4.sentence-1'>.</a></div> <div id='mfct.non-static-4.sentence-2' class='sentence'>These
<i ><a href='dcl.decl#nt:cv-qualifier'>cv-qualifier</a></i><span class='textit'>s</span> affect the type of the <a href='#this'><span class='texttt'>this</span>
pointer</a><a class='hidden_link' href='#mfct.non-static-4.sentence-2'>.</a></div> <div id='mfct.non-static-4.sentence-3' class='sentence'>They also affect the <a href='dcl.fct'>function
type</a> of the member function; a member function declared
<span class='texttt'>const</span> is a <a class='hidden_link' href='#def:const' id='def:const'><i>const</i></a> member function, a member function
declared <span class='texttt'>volatile</span> is a <a class='hidden_link' href='#def:volatile' id='def:volatile'><i>volatile</i></a> member function and a
member function declared <span class='texttt'>const</span> <span class='texttt'>volatile</span> is a
<a class='hidden_link' href='#def:const_volatile_member_function' id='def:const_volatile_member_function'><i >const volatile member function</i></a><a class='hidden_link' href='#mfct.non-static-4.sentence-3'>.</a></div> <div id='mfct.non-static-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mfct.non-static-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  void g() const;
  void h() const volatile;
};</pre><div id='mfct.non-static-4.sentence-4' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;g</span> is a const member function and <span class='texttt'>X&#x200b;::&#x200b;h</span> is a
const volatile member function<a class='hidden_link' href='#mfct.non-static-4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mfct.non-static-5'><div class='marginalizedparent'><a class='marginalized' href='#mfct.non-static-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1046'>#</a></div><div id='mfct.non-static-5.sentence-1' class='sentence'>A non-static member function may be declared with a <i ><a href='dcl.decl#nt:ref-qualifier'>ref-qualifier</a></i> (<a href='dcl.fct'>[dcl.fct]</a>); see <a href='over.match.funcs'>[over.match.funcs]</a><a class='hidden_link' href='#mfct.non-static-5.sentence-1'>.</a></div></div><div class='para' id='mfct.non-static-6'><div class='marginalizedparent'><a class='marginalized' href='#mfct.non-static-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1049'>#</a></div><div id='mfct.non-static-6.sentence-1' class='sentence'>A non-static member function may be declared
virtual (<a href='#virtual'>[class.virtual]</a>) or pure virtual (<a href='#abstract'>[class.abstract]</a>)<a class='hidden_link' href='#mfct.non-static-6.sentence-1'>.</a></div></div><div class='footnote' id='footnote-108'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-108'>108)</a></div><div id='footnote-108.sentence-1' class='sentence'>See, for example, <span class='texttt'>&lt;cstring&gt;</span> (<a href='c.strings'>[c.strings]</a>)<a class='hidden_link' href='#footnote-108.sentence-1'>.</a></div></div><div id='this' class='section'><h4 ><a class='secnum' href='#this' style='min-width:118pt'>10.3.2.1</a> The <span class='texttt'>this</span> pointer <a class='abbr_ref' href='class.this'>[class.this]</a></h4><span class='indexparent'><a class='index' id=':this'></a></span>
<span class='indexparent'><a class='index' id=':member_function,this'></a></span><div class='para' id='this-1'><div class='marginalizedparent'><a class='marginalized' href='#this-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1057'>#</a></div><div id='this-1.sentence-1' class='sentence'>In the body of a non-static (<a href='#mfct'>[class.mfct]</a>) member function, the
keyword <span class='texttt'>this</span> is a prvalue whose value is
a pointer to the object for which the function is called<a class='hidden_link' href='#this-1.sentence-1'>.</a></div> <div id='this-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':this,type_of'></a></span>The type of <span class='texttt'>this</span> in a member function of a class <span class='texttt'>X</span> is
<span class='texttt'>X*</span><a class='hidden_link' href='#this-1.sentence-2'>.</a></div> <div id='this-1.sentence-3' class='sentence'>If the member function is declared <span class='texttt'>const</span>, the type of
<span class='texttt'>this</span> is <span class='texttt'>const</span> <span class='texttt'>X*</span>,
if the member function is declared <span class='texttt'>volatile</span>, the type of
<span class='texttt'>this</span> is <span class='texttt'>volatile</span> <span class='texttt'>X*</span>, and if the member function
is declared <span class='texttt'>const</span> <span class='texttt'>volatile</span>, the type of <span class='texttt'>this</span> is
<span class='texttt'>const</span> <span class='texttt'>volatile</span> <span class='texttt'>X*</span><a class='hidden_link' href='#this-1.sentence-3'>.</a></div> <div id='this-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#this-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='this-1.sentence-4' class='sentence'>Thus in a const member function, the object for which the function is
called is accessed through a const access path<a class='hidden_link' href='#this-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='this-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#this-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct s {
  int a;
  int f() const;
  int g() { return a++; }
  int h() const { return a++; } <span class='comment'>// error
</span>};

int s::f() const { return a; }</pre><div id='this-1.sentence-5' class='sentence'>The <span class='texttt'>a++</span> in the body of <span class='texttt'>s&#x200b;::&#x200b;h</span> is ill-formed because it
tries to modify (a part of) the object for which <span class='texttt'>s&#x200b;::&#x200b;h()</span> is
called<a class='hidden_link' href='#this-1.sentence-5'>.</a></div> <div id='this-1.sentence-6' class='sentence'>This is not allowed in a const member function because
<span class='texttt'>this</span> is a pointer to <span class='texttt'>const</span>; that is, <span class='texttt'>*this</span> has
<span class='texttt'>const</span> type<a class='hidden_link' href='#this-1.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='this-2'><div class='marginalizedparent'><a class='marginalized' href='#this-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1093'>#</a></div><div id='this-2.sentence-1' class='sentence'>Similarly, <a href='dcl.type.cv'><span class='texttt'>volatile</span></a> semantics apply in
volatile member functions when accessing the object and its
non-static data members<a class='hidden_link' href='#this-2.sentence-1'>.</a></div></div><div class='para' id='this-3'><div class='marginalizedparent'><a class='marginalized' href='#this-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1098'>#</a></div><div id='this-3.sentence-1' class='sentence'>A cv-qualified member function can be called on an
<a href='expr.ref'>object-expression</a> only if the object-expression is as
cv-qualified or less-cv-qualified than the member function<a class='hidden_link' href='#this-3.sentence-1'>.</a></div> <div id='this-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#this-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
void k(s&amp; x, const s&amp; y) {
  x.f();
  x.g();
  y.f();
  y.g();                        <span class='comment'>// error
</span>}</pre><div id='this-3.sentence-2' class='sentence'>The call <span class='texttt'>y.g()</span> is ill-formed because <span class='texttt'>y</span> is <span class='texttt'>const</span>
and <span class='texttt'>s&#x200b;::&#x200b;g()</span> is a non-const member function, that is,
<span class='texttt'>s&#x200b;::&#x200b;g()</span> is less-qualified than the object-expression <span class='texttt'>y</span><a class='hidden_link' href='#this-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='this-4'><div class='marginalizedparent'><a class='marginalized' href='#this-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1118'>#</a></div><span class='indexparent'><a class='index' id=':const,constructor_and'></a></span><span class='indexparent'><a class='index' id=':const,destructor_and'></a></span><span class='indexparent'><a class='index' id=':volatile,constructor_and'></a></span><span class='indexparent'><a class='index' id=':volatile,destructor_and'></a></span><div id='this-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#this-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='this-4.sentence-1' class='sentence'><a href='#ctor'>Constructors</a> and <a href='#dtor'>destructors</a>
cannot be declared <span class='texttt'>const</span>, <span class='texttt'>volatile</span>, or <span class='texttt'>const</span>
<span class='texttt'>volatile</span><a class='hidden_link' href='#this-4.sentence-1'>.</a></div> <div id='this-4.sentence-2' class='sentence'>However, these functions can be invoked
to create and destroy objects with cv-qualified types;
see <a href='#ctor'>[class.ctor]</a> and <a href='#dtor'>[class.dtor]</a><a class='hidden_link' href='#this-4.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='special' class='section'><h3 ><a class='secnum' href='#special' style='min-width:103pt'>10.3.3</a> Special member functions <a class='abbr_ref' href='special'>[special]</a></h3><div class='para' id='special-1'><div class='marginalizedparent'><a class='marginalized' href='#special-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1140'>#</a></div><div id='special-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,default'></a></span><span class='indexparent'><a class='index' id=':constructor,copy'></a></span><span class='indexparent'><a class='index' id=':constructor,move'></a></span><span class='indexparent'><a class='index' id=':assignment_operator,copy'></a></span><span class='indexparent'><a class='index' id=':assignment_operator,move'></a></span>The default constructor (<a href='#default.ctor'>[class.default.ctor]</a>),
copy constructor, move constructor (<a href='#copy.ctor'>[class.copy.ctor]</a>),
copy assignment operator, move assignment operator (<a href='#copy.assign'>[class.copy.assign]</a>),
and destructor (<a href='#dtor'>[class.dtor]</a>) are
<a class='hidden_link' href='#def:special_member_functions' id='def:special_member_functions'><i>special member functions</i></a><a class='hidden_link' href='#special-1.sentence-1'>.</a></div> <div id='special-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#special-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='special-1.sentence-4' class='sentence'>The implementation will implicitly declare these member functions for some class
types when the program does not explicitly declare them<a class='hidden_link' href='#special-1.sentence-4'>.</a></div> <div id='special-1.sentence-5' class='sentence'>The implementation will implicitly define them
if they are odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>) or
needed for constant evaluation (<a href='expr.const'>[expr.const]</a>)<a class='hidden_link' href='#special-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='special-1.sentence-2' class='sentence'>
An implicitly-declared special member function is declared at the closing
<span class='texttt'>}</span> of the <i ><a href='class#nt:class-specifier'>class-specifier</a></i><a class='hidden_link' href='#special-1.sentence-2'>.</a></div> <div id='special-1.sentence-3' class='sentence'>Programs shall not define implicitly-declared special member functions<a class='hidden_link' href='#special-1.sentence-3'>.</a></div></div><div class='para' id='special-2'><div class='marginalizedparent'><a class='marginalized' href='#special-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1161'>#</a></div><div id='special-2.sentence-1' class='sentence'>Programs may explicitly refer to implicitly-declared special member functions<a class='hidden_link' href='#special-2.sentence-1'>.</a></div> <div id='special-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#special-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='special-2.sentence-2' class='sentence'>A program may explicitly call or form a pointer to member
to an implicitly-declared special member function<a class='hidden_link' href='#special-2.sentence-2'>.</a></div><pre class='codeblock'>
struct A { };                   <span class='comment'>// implicitly declared <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;operator=</span>
</span>struct B : A {
  B&amp; operator=(const B &amp;);
};
B&amp; B::operator=(const B&amp; s) {
  this-&gt;A::operator=(s);        <span class='comment'>// well-formed
</span>  return *this;
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='special-3'><div class='marginalizedparent'><a class='marginalized' href='#special-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1179'>#</a></div><div id='special-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#special-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='special-3.sentence-1' class='sentence'>The special member functions affect the way objects of class type are created,
copied, moved, and destroyed, and how values can be converted to values of other types<a class='hidden_link' href='#special-3.sentence-1'>.</a></div> <div id='special-3.sentence-2' class='sentence'>Often such special member functions are called implicitly<a class='hidden_link' href='#special-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='special-4'><div class='marginalizedparent'><a class='marginalized' href='#special-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1186'>#</a></div><div id='special-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,member_function_and'></a></span>Special member functions obey the usual access rules (<a href='#access'>[class.access]</a>)<a class='hidden_link' href='#special-4.sentence-1'>.</a></div> <div id='special-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#special-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='special-4.sentence-2' class='sentence'>Declaring a constructor protected
ensures that only derived classes and friends can create objects using it<a class='hidden_link' href='#special-4.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='special-5'><div class='marginalizedparent'><a class='marginalized' href='#special-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1194'>#</a></div><div id='special-5.sentence-1' class='sentence'>For a class, its non-static data members, its non-virtual direct base classes,
and, if the class is not abstract (<a href='#abstract'>[class.abstract]</a>), its virtual base
classes are called its <a class='hidden_link' href='#def:potentially_constructed_subobjects' id='def:potentially_constructed_subobjects'><i>potentially constructed subobjects</i></a><a class='hidden_link' href='#special-5.sentence-1'>.</a></div></div></div><div id='ctor' class='section'><h3 ><a class='secnum' href='#ctor' style='min-width:103pt'>10.3.4</a> Constructors <a class='abbr_ref' href='class.ctor'>[class.ctor]</a></h3><span class='indexparent'><a class='index' id=':constructor'></a></span><div class='para' id='ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#ctor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1203'>#</a></div><div id='ctor-1.sentence-1' class='sentence'>Constructors do not have names<a class='hidden_link' href='#ctor-1.sentence-1'>.</a></div> <div id='ctor-1.sentence-2' class='sentence'>In a declaration of a constructor, the <i ><a href='dcl.decl#nt:declarator'>declarator</a></i> is a
function declarator (<a href='dcl.fct'>[dcl.fct]</a>) of the form</div><pre class='ncbnf'><i ><a href='dcl.decl#nt:ptr-declarator'>ptr-declarator</a></i> <span class='terminal'>(</span> <i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> <span class='terminal'>)</span> <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><div id='ctor-1.sentence-3' class='sentence'>where the <i ><a href='dcl.decl#nt:ptr-declarator'>ptr-declarator</a></i> consists solely of an
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>, an optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i>,
and optional surrounding parentheses, and the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> has
one of the following forms:</div><div id='ctor-1.sentence-4' class='sentence'><ul class='itemize'><li id='ctor-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ctor-1.1'>(1.1)</a></div><div id='ctor-1.1.sentence-1' class='sentence'>in a <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i> that belongs to the
<i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of a class or class template
but is not a friend
declaration (<a href='#friend'>[class.friend]</a>), the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is the
injected-class-name (<a href='#class'>[class]</a>) of the immediately-enclosing entity or</div></li><li id='ctor-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ctor-1.2'>(1.2)</a></div><div id='ctor-1.2.sentence-1' class='sentence'>in a declaration at namespace scope or in a friend declaration, the
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> that names a
constructor (<a href='class.qual'>[class.qual]</a>)<a class='hidden_link' href='#ctor-1.2.sentence-1'>.</a></div></li></ul></div><div id='ctor-1.sentence-5' class='sentence'>The <i ><a href='class#nt:class-name'>class-name</a></i> shall not be a <i ><a href='dcl.typedef#nt:typedef-name'>typedef-name</a></i><a class='hidden_link' href='#ctor-1.sentence-5'>.</a></div> <div id='ctor-1.sentence-6' class='sentence'>In a constructor
declaration, each <i ><a href='dcl.spec#nt:decl-specifier'>decl-specifier</a></i> in the optional
<i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i> shall be <span class='texttt'>friend</span>, <span class='texttt'>inline</span>,
<span class='texttt'>constexpr</span>, or an <i ><a href='dcl.fct.spec#nt:explicit-specifier'>explicit-specifier</a></i><a class='hidden_link' href='#ctor-1.sentence-6'>.</a></div> <div id='ctor-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ctor-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  S();              <span class='comment'>// declares the constructor
</span>};

S::S() { }          <span class='comment'>// defines the constructor
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#ctor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1246'>#</a></div><div id='ctor-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,explicit_call'></a></span>A constructor is used to initialize objects of its class type<a class='hidden_link' href='#ctor-2.sentence-1'>.</a></div> <div id='ctor-2.sentence-2' class='sentence'>Because constructors do not have names, they are never found during
name lookup; however an explicit type conversion using the functional
notation (<a href='expr.type.conv'>[expr.type.conv]</a>) will cause a constructor to be called to
initialize an object<a class='hidden_link' href='#ctor-2.sentence-2'>.</a></div> <div id='ctor-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ctor-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ctor-2.sentence-3' class='sentence'>The syntax looks like an explicit call of the constructor<a class='hidden_link' href='#ctor-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='ctor-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ctor-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
complex zz = complex(1,2.3);
cprint( complex(7.8,1.2) );</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='ctor-2.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ctor-2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ctor-2.sentence-4' class='sentence'>For initialization of objects of class type see <a href='#init'>[class.init]</a><a class='hidden_link' href='#ctor-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#ctor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1266'>#</a></div><div id='ctor-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,unnamed'></a></span>An object created in this way is unnamed<a class='hidden_link' href='#ctor-3.sentence-1'>.</a></div> <div id='ctor-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ctor-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ctor-3.sentence-2' class='sentence'><a href='class.temporary'>[class.temporary]</a> describes the lifetime of temporary objects<a class='hidden_link' href='#ctor-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='ctor-3.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ctor-3.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ctor-3.sentence-3' class='sentence'>Explicit constructor calls do not yield lvalues, see <a href='basic.lval'>[basic.lval]</a><a class='hidden_link' href='#ctor-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#ctor-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1276'>#</a></div><div id='ctor-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ctor-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ctor-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member_function,constructor_and'></a></span>Some language constructs have special semantics when used during construction;
see <a href='#base.init'>[class.base.init]</a> and <a href='#cdtor'>[class.cdtor]</a><a class='hidden_link' href='#ctor-4.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#ctor-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1283'>#</a></div><div id='ctor-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':const,constructor_and_'></a></span><span class='indexparent'><a class='index' id=':volatile,constructor_and_'></a></span>A constructor can be invoked for a
<span class='texttt'>const</span>,
<span class='texttt'>volatile</span>
or
<span class='texttt'>const</span>
<span class='texttt'>volatile</span>
object<a class='hidden_link' href='#ctor-5.sentence-1'>.</a></div> <div id='ctor-5.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':restriction,constructor'></a></span><span class='texttt'>const</span>
and
<span class='texttt'>volatile</span>
semantics (<a href='dcl.type.cv'>[dcl.type.cv]</a>) are not applied on an object under construction<a class='hidden_link' href='#ctor-5.sentence-2'>.</a></div> <div id='ctor-5.sentence-3' class='sentence'>They come into effect when the constructor for the
most derived object (<a href='intro.object'>[intro.object]</a>) ends<a class='hidden_link' href='#ctor-5.sentence-3'>.</a></div></div><div class='para' id='ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#ctor-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1301'>#</a></div><div id='ctor-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':restriction,constructor_'></a></span>A
<span class='texttt'>return</span>
statement in the body of a constructor shall not specify a return value<a class='hidden_link' href='#ctor-6.sentence-1'>.</a></div> <div id='ctor-6.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':constructor,address_of'></a></span>The address of a constructor shall not be taken<a class='hidden_link' href='#ctor-6.sentence-2'>.</a></div></div><div id='default.ctor' class='section'><h4 ><a class='secnum' href='#default.ctor' style='min-width:118pt'>10.3.4.1</a> Default constructors <a class='abbr_ref' href='class.default.ctor'>[class.default.ctor]</a></h4><div class='para' id='default.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#default.ctor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1311'>#</a></div><div id='default.ctor-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,inheritance_of'></a></span><span class='indexparent'><a class='index' id=':constructor,non-trivial'></a></span>A <span class='indexparent'><a class='index' id=':constructor,default_'></a></span><span class='textit'>default constructor</span> for a class <span class='texttt'>X</span>
is a constructor of class <span class='texttt'>X</span>
for which each parameter
that is not a function parameter pack
has a default argument
(including the case of a constructor with no parameters)<a class='hidden_link' href='#default.ctor-1.sentence-1'>.</a></div> <div id='default.ctor-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':implicitly-declared_default_constructor'></a></span>If there is no user-declared constructor for class
<span class='texttt'>X</span>,
a non-explicit constructor having no parameters is implicitly declared
as defaulted (<a href='dcl.fct.def'>[dcl.fct.def]</a>)<a class='hidden_link' href='#default.ctor-1.sentence-2'>.</a></div> <div id='default.ctor-1.sentence-3' class='sentence'>An implicitly-declared default constructor is an
inline public member of its class<a class='hidden_link' href='#default.ctor-1.sentence-3'>.</a></div></div><div class='para' id='default.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#default.ctor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1328'>#</a></div><div id='default.ctor-2.sentence-1' class='sentence'>A defaulted default constructor for class <span class='texttt'>X</span> is defined as deleted if:</div><div id='default.ctor-2.sentence-2' class='sentence'><ul class='itemize'><li id='default.ctor-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-2.1'>(2.1)</a></div><div id='default.ctor-2.1.sentence-1' class='sentence'><span class='texttt'>X</span> is a union that has a variant member
with a non-trivial default constructor and
no variant member of <span class='texttt'>X</span> has a default member initializer,</div></li><li id='default.ctor-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-2.2'>(2.2)</a></div><div id='default.ctor-2.2.sentence-1' class='sentence'><span class='texttt'>X</span> is a non-union class that has a variant member <span class='texttt'>M</span>
with a non-trivial default constructor and
no variant member of the anonymous union containing <span class='texttt'>M</span>
has a default member initializer,</div></li><li id='default.ctor-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-2.3'>(2.3)</a></div><div id='default.ctor-2.3.sentence-1' class='sentence'>any non-static data member with no default member initializer (<a href='#mem'>[class.mem]</a>) is
of reference type,</div></li><li id='default.ctor-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-2.4'>(2.4)</a></div><div id='default.ctor-2.4.sentence-1' class='sentence'>any non-variant non-static data member of const-qualified type (or array
thereof) with no <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i> does not have a user-provided default constructor,</div></li><li id='default.ctor-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-2.5'>(2.5)</a></div><div id='default.ctor-2.5.sentence-1' class='sentence'><span class='texttt'>X</span> is a union and all of its variant members are of const-qualified
type (or array thereof),</div></li><li id='default.ctor-2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-2.6'>(2.6)</a></div><div id='default.ctor-2.6.sentence-1' class='sentence'><span class='texttt'>X</span> is a non-union class and all members of any anonymous union member are
of const-qualified type (or array thereof),</div></li><li id='default.ctor-2.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-2.7'>(2.7)</a></div><div id='default.ctor-2.7.sentence-1' class='sentence'>any potentially constructed subobject, except for a non-static data member
with a <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i>, has
class type <span class='texttt'>M</span> (or array thereof) and either <span class='texttt'>M</span>
has no default constructor or overload resolution (<a href='over.match'>[over.match]</a>)
as applied to find <span class='texttt'>M</span>'s corresponding
constructor results in an ambiguity or in a function that is deleted or
inaccessible from the defaulted default constructor, or</div></li><li id='default.ctor-2.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-2.8'>(2.8)</a></div><div id='default.ctor-2.8.sentence-1' class='sentence'>any potentially constructed subobject has a type
with a destructor that is deleted or inaccessible from the defaulted default
constructor<a class='hidden_link' href='#default.ctor-2.8.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='default.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#default.ctor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1366'>#</a></div><div id='default.ctor-3.sentence-1' class='sentence'>A default constructor is
<a class='hidden_link' href='#def:constructor,default,trivial' id='def:constructor,default,trivial'><i >trivial</i></a>
if it is not user-provided and if:</div><div id='default.ctor-3.sentence-2' class='sentence'><ul class='itemize'><li id='default.ctor-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-3.1'>(3.1)</a></div><div id='default.ctor-3.1.sentence-1' class='sentence'>its class has no virtual functions (<a href='#virtual'>[class.virtual]</a>) and no virtual base
classes (<a href='#mi'>[class.mi]</a>), and</div></li><li id='default.ctor-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-3.2'>(3.2)</a></div><div id='default.ctor-3.2.sentence-1' class='sentence'>no non-static data member of its class has
a default member initializer (<a href='#mem'>[class.mem]</a>), and</div></li><li id='default.ctor-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-3.3'>(3.3)</a></div><div id='default.ctor-3.3.sentence-1' class='sentence'>all the direct base classes of its class have trivial default constructors, and</div></li><li id='default.ctor-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#default.ctor-3.4'>(3.4)</a></div><div id='default.ctor-3.4.sentence-1' class='sentence'>for all the non-static data members of its class that are of class
type (or array thereof), each such class has a trivial default constructor<a class='hidden_link' href='#default.ctor-3.4.sentence-1'>.</a></div></li></ul></div><div id='default.ctor-3.sentence-3' class='sentence'>Otherwise, the default constructor is
<a class='hidden_link' href='#def:constructor,default,non-trivial' id='def:constructor,default,non-trivial'><i >non-trivial</i></a><a class='hidden_link' href='#default.ctor-3.sentence-3'>.</a></div></div><div class='para' id='default.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#default.ctor-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1390'>#</a></div><div id='default.ctor-4.sentence-1' class='sentence'>A default constructor
that is defaulted and not defined as deleted
is
<a class='hidden_link' href='#def:constructor,implicitly_defined' id='def:constructor,implicitly_defined'><i >implicitly defined</i></a>
when it is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>)
to create an object of its class type (<a href='intro.object'>[intro.object]</a>),
when it is needed for constant evaluation (<a href='expr.const'>[expr.const]</a>), or
when it is explicitly defaulted after its first declaration<a class='hidden_link' href='#default.ctor-4.sentence-1'>.</a></div> <div id='default.ctor-4.sentence-2' class='sentence'>The implicitly-defined default constructor performs the set of
initializations of the class that would be performed by a user-written default
constructor for that class with no
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i> and an empty
<i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i><a class='hidden_link' href='#default.ctor-4.sentence-2'>.</a></div> <div id='default.ctor-4.sentence-3' class='sentence'>If that user-written default constructor would be ill-formed,
the program is ill-formed<a class='hidden_link' href='#default.ctor-4.sentence-3'>.</a></div> <div id='default.ctor-4.sentence-4' class='sentence'>If that user-written default constructor would satisfy the requirements
of a constexpr constructor (<a href='dcl.constexpr'>[dcl.constexpr]</a>), the implicitly-defined
default constructor is <span class='texttt'>constexpr</span><a class='hidden_link' href='#default.ctor-4.sentence-4'>.</a></div> <div id='default.ctor-4.sentence-5' class='sentence'>Before the defaulted default constructor for a class is
implicitly defined,
all the non-user-provided default constructors for its base classes and
its non-static data members shall have been implicitly defined<a class='hidden_link' href='#default.ctor-4.sentence-5'>.</a></div> <div id='default.ctor-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#default.ctor-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='default.ctor-4.sentence-6' class='sentence'>An implicitly-declared default constructor has an
exception specification (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#default.ctor-4.sentence-6'>.</a></div> <div id='default.ctor-4.sentence-7' class='sentence'>An explicitly-defaulted definition might have an
implicit exception specification, see <a href='dcl.fct.def'>[dcl.fct.def]</a><a class='hidden_link' href='#default.ctor-4.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='default.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#default.ctor-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1420'>#</a></div><div id='default.ctor-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,implicitly_called'></a></span>Default constructors are called implicitly to create class objects of static, thread,
or automatic storage duration (<a href='basic.stc.static'>[basic.stc.static]</a>, <a href='basic.stc.thread'>[basic.stc.thread]</a>, <a href='basic.stc.auto'>[basic.stc.auto]</a>) defined
without an initializer (<a href='dcl.init'>[dcl.init]</a>),
are called to create class objects of dynamic storage duration (<a href='basic.stc.dynamic'>[basic.stc.dynamic]</a>) created by a
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
in which the
<i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i>
is omitted (<a href='expr.new'>[expr.new]</a>), or
are called when the explicit type conversion syntax (<a href='expr.type.conv'>[expr.type.conv]</a>) is
used<a class='hidden_link' href='#default.ctor-5.sentence-1'>.</a></div> <div id='default.ctor-5.sentence-2' class='sentence'>A program is ill-formed if the default constructor for an object
is implicitly used and the constructor is not accessible (<a href='#access'>[class.access]</a>)<a class='hidden_link' href='#default.ctor-5.sentence-2'>.</a></div></div><div class='para' id='default.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#default.ctor-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1435'>#</a></div><div id='default.ctor-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#default.ctor-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='default.ctor-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':order_of_execution,base_class_constructor'></a></span><span class='indexparent'><a class='index' id=':order_of_execution,member_constructor'></a></span><a href='#base.init'>[class.base.init]</a> describes the order in which constructors for base
classes and non-static data members are called and
describes how arguments can be specified for the calls to these constructors<a class='hidden_link' href='#default.ctor-6.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='copy.ctor' class='section'><h4 ><a class='secnum' href='#copy.ctor' style='min-width:118pt'>10.3.4.2</a> Copy/move constructors <a class='abbr_ref' href='class.copy.ctor'>[class.copy.ctor]</a></h4><div class='para' id='copy.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1446'>#</a></div><div id='copy.ctor-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,copy_'></a></span><span class='indexparent'><a class='index' id=':constructor,move_'></a></span>A non-template constructor for class
<span class='texttt'>X</span>
is
a
copy
constructor if its first parameter is of type
<span class='texttt'>X&amp;</span>,
<span class='texttt'>const X&amp;</span>,
<span class='texttt'>volatile X&amp;</span>
or
<span class='texttt'>const volatile X&amp;</span>,
and either there are no other parameters
or else all other parameters have default arguments (<a href='dcl.fct.default'>[dcl.fct.default]</a>)<a class='hidden_link' href='#copy.ctor-1.sentence-1'>.</a></div> <div id='copy.ctor-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.ctor-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='copy.ctor-1.sentence-2' class='sentence'><span class='texttt'>X&#x200b;::&#x200b;X(const X&amp;)</span>
and
<span class='texttt'>X&#x200b;::&#x200b;X(X&amp;,int=1)</span>
are copy constructors<a class='hidden_link' href='#copy.ctor-1.sentence-2'>.</a></div><pre class='codeblock'>
struct X {
  X(int);
  X(const X&amp;, int = 1);
};
X a(1);             <span class='comment'>// calls <span class='tcode_in_codeblock'>X(int);</span>
</span>X b(a, 0);          <span class='comment'>// calls <span class='tcode_in_codeblock'>X(const X&amp;, int);</span>
</span>X c = b;            <span class='comment'>// calls <span class='tcode_in_codeblock'>X(const X&amp;, int);</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1481'>#</a></div><div id='copy.ctor-2.sentence-1' class='sentence'>A non-template constructor for class <span class='texttt'>X</span> is a move constructor if its
first parameter is of type <span class='texttt'>X&amp;&amp;</span>, <span class='texttt'>const X&amp;&amp;</span>,
<span class='texttt'>volatile X&amp;&amp;</span>, or <span class='texttt'>const volatile X&amp;&amp;</span>, and either there are
no other parameters or else all other parameters have default
arguments (<a href='dcl.fct.default'>[dcl.fct.default]</a>)<a class='hidden_link' href='#copy.ctor-2.sentence-1'>.</a></div> <div id='copy.ctor-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.ctor-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='copy.ctor-2.sentence-2' class='sentence'><span class='texttt'>Y&#x200b;::&#x200b;Y(Y&amp;&amp;)</span> is a move constructor<a class='hidden_link' href='#copy.ctor-2.sentence-2'>.</a></div> <pre class='codeblock'>
struct Y {
  Y(const Y&amp;);
  Y(Y&amp;&amp;);
};
extern Y f(int);
Y d(f(1));          <span class='comment'>// calls <span class='tcode_in_codeblock'>Y(Y&amp;&amp;)</span>
</span>Y e = d;            <span class='comment'>// calls <span class='tcode_in_codeblock'>Y(const Y&amp;)</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1499'>#</a></div><div id='copy.ctor-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.ctor-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.ctor-3.sentence-1' class='sentence'>All forms of copy/move constructor may be declared for a class<a class='hidden_link' href='#copy.ctor-3.sentence-1'>.</a></div> <div id='copy.ctor-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.ctor-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  X(const X&amp;);
  X(X&amp;);            <span class='comment'>// OK
</span>  X(X&amp;&amp;);
  X(const X&amp;&amp;);     <span class='comment'>// OK, but possibly not sensible
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1515'>#</a></div><div id='copy.ctor-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.ctor-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.ctor-4.sentence-1' class='sentence'>If a class
<span class='texttt'>X</span>
only has a copy constructor with a parameter of type
<span class='texttt'>X&amp;</span>,
an initializer of type
<span class='texttt'>const</span>
<span class='texttt'>X</span>
or
<span class='texttt'>volatile</span>
<span class='texttt'>X</span>
cannot initialize an object of type
(possibly
cv-qualified)
<span class='texttt'>X</span><a class='hidden_link' href='#copy.ctor-4.sentence-1'>.</a></div> <div id='copy.ctor-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.ctor-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  X();              <span class='comment'>// default constructor
</span>  X(X&amp;);            <span class='comment'>// copy constructor with a non-const parameter
</span>};
const X cx;
X x = cx;           <span class='comment'>// error: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;X(X&amp;)</span> cannot copy <span class='tcode_in_codeblock'>cx</span> into <span class='tcode_in_codeblock'>x</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1544'>#</a></div><div id='copy.ctor-5.sentence-1' class='sentence'>A declaration of a constructor for a class
<span class='texttt'>X</span>
is ill-formed if its first parameter is of type (optionally cv-qualified)
<span class='texttt'>X</span>
and either there are no other parameters or else all other parameters have
default arguments<a class='hidden_link' href='#copy.ctor-5.sentence-1'>.</a></div> <div id='copy.ctor-5.sentence-2' class='sentence'>A member function template is never instantiated to
produce such a constructor signature<a class='hidden_link' href='#copy.ctor-5.sentence-2'>.</a></div> <div id='copy.ctor-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.ctor-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  template&lt;typename T&gt; S(T);
  S();
};

S g;

void h() {
  S a(g);           <span class='comment'>// does not instantiate the member template to produce <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;S&lt;S&gt;(S)</span>;
</span>                    <span class='comment'>// uses the implicitly declared copy constructor
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1569'>#</a></div><div id='copy.ctor-6.sentence-1' class='sentence'>If the class definition does not explicitly declare a copy constructor,
a non-explicit one is declared <a class='hidden_link' href='#def:constructor,copy,implicitly_declared' id='def:constructor,copy,implicitly_declared'><i >implicitly</i></a><a class='hidden_link' href='#copy.ctor-6.sentence-1'>.</a></div> <div id='copy.ctor-6.sentence-2' class='sentence'>If the class definition declares a move
constructor or move assignment operator, the implicitly declared copy
constructor is defined as deleted; otherwise, it is defined as
defaulted (<a href='dcl.fct.def'>[dcl.fct.def]</a>)<a class='hidden_link' href='#copy.ctor-6.sentence-2'>.</a></div> <div id='copy.ctor-6.sentence-3' class='sentence'>The latter case is deprecated if the class has a user-declared copy assignment
operator or a user-declared destructor  (<a href='depr.impldec'>[depr.impldec]</a>)<a class='hidden_link' href='#copy.ctor-6.sentence-3'>.</a></div></div><div class='para' id='copy.ctor-7'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1579'>#</a></div><div id='copy.ctor-7.sentence-1' class='sentence'>The implicitly-declared copy constructor for a class
<span class='texttt'>X</span>
will have the form</div><pre class='codeblock'>
X::X(const X&amp;)</pre><div id='copy.ctor-7.sentence-2' class='sentence'>if each potentially constructed subobject of a class type
<span class='texttt'>M</span>
(or array thereof)
has a copy constructor whose first parameter is of type
<span class='texttt'>const</span>
<span class='texttt'>M&amp;</span>
or
<span class='texttt'>const</span>
<span class='texttt'>volatile</span>
<span class='texttt'>M&amp;</span><a class='hidden_link' href='#copy.ctor-7.sentence-2'>.</a><a class='footnotenum' href='#footnote-109'>109</a></div> <div id='copy.ctor-7.sentence-3' class='sentence'>
Otherwise, the implicitly-declared copy constructor will have the form</div><pre class='codeblock'>
X::X(X&amp;)</pre></div><div class='para' id='copy.ctor-8'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1608'>#</a></div><div id='copy.ctor-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,move,implicitly_declared'></a></span>If the definition of a class <span class='texttt'>X</span> does not explicitly declare
a move constructor, a non-explicit one will be
implicitly declared as defaulted if and only if</div><div id='copy.ctor-8.sentence-2' class='sentence'><ul class='itemize'><li id='copy.ctor-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-8.1'>(8.1)</a></div><div id='copy.ctor-8.1.sentence-1' class='sentence'><span class='texttt'>X</span> does not have a user-declared copy constructor,</div></li><li id='copy.ctor-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-8.2'>(8.2)</a></div><div id='copy.ctor-8.2.sentence-1' class='sentence'><span class='texttt'>X</span> does not have a user-declared copy assignment operator,</div></li><li id='copy.ctor-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-8.3'>(8.3)</a></div><div id='copy.ctor-8.3.sentence-1' class='sentence'><span class='texttt'>X</span> does not have a user-declared move assignment operator, and</div></li><li id='copy.ctor-8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-8.4'>(8.4)</a></div><div id='copy.ctor-8.4.sentence-1' class='sentence'><span class='texttt'>X</span> does not have a user-declared destructor<a class='hidden_link' href='#copy.ctor-8.4.sentence-1'>.</a></div></li></ul></div><div id='copy.ctor-8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.ctor-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.ctor-8.sentence-3' class='sentence'>When the move constructor is not implicitly declared or explicitly supplied,
expressions that otherwise would have invoked the move constructor may instead invoke
a copy constructor<a class='hidden_link' href='#copy.ctor-8.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.ctor-9'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1632'>#</a></div><div id='copy.ctor-9.sentence-1' class='sentence'>The implicitly-declared move constructor for class <span class='texttt'>X</span> will have the form
<pre class='codeblock'>
X::X(X&amp;&amp;)</pre></div></div><div class='para' id='copy.ctor-10'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1638'>#</a></div><div id='copy.ctor-10.sentence-1' class='sentence'>An implicitly-declared copy/move constructor is an
inline public member of its class<a class='hidden_link' href='#copy.ctor-10.sentence-1'>.</a></div> <div id='copy.ctor-10.sentence-2' class='sentence'>A defaulted copy/&#x200b;move constructor for a class
  <span class='texttt'>X</span> is defined as deleted (<a href='dcl.fct.def.delete'>[dcl.fct.def.delete]</a>) if <span class='texttt'>X</span> has:
<ul class='itemize'><li id='copy.ctor-10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-10.1'>(10.1)</a></div><div id='copy.ctor-10.1.sentence-1' class='sentence'>a potentially constructed subobject type
  <span class='texttt'>M</span> (or array thereof) that cannot be copied/moved because
  overload resolution (<a href='over.match'>[over.match]</a>), as applied to find
  <span class='texttt'>M</span>'s
  corresponding constructor, results in an ambiguity or
  a function that is deleted or inaccessible from the
  defaulted constructor,</div></li><li id='copy.ctor-10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-10.2'>(10.2)</a></div><div id='copy.ctor-10.2.sentence-1' class='sentence'>a variant member whose corresponding constructor
  as selected by overload resolution is non-trivial,</div></li><li id='copy.ctor-10.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-10.3'>(10.3)</a></div><div id='copy.ctor-10.3.sentence-1' class='sentence'>any potentially constructed subobject of a type
  with a destructor that is deleted or inaccessible from the defaulted
  constructor, or,</div></li><li id='copy.ctor-10.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-10.4'>(10.4)</a></div><div id='copy.ctor-10.4.sentence-1' class='sentence'>for the copy constructor, a non-static data member of rvalue reference type<a class='hidden_link' href='#copy.ctor-10.4.sentence-1'>.</a></div></li></ul></div><div id='copy.ctor-10.sentence-3' class='sentence'>A defaulted move constructor that is defined as deleted is ignored by overload
resolution (<a href='over.match'>[over.match]</a>, <a href='over.over'>[over.over]</a>)<a class='hidden_link' href='#copy.ctor-10.sentence-3'>.</a></div> <div id='copy.ctor-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.ctor-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.ctor-10.sentence-4' class='sentence'>A deleted move constructor would otherwise interfere with initialization from
an rvalue which can use the copy constructor instead<a class='hidden_link' href='#copy.ctor-10.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.ctor-11'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1669'>#</a></div><div id='copy.ctor-11.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,copy,trivial'></a></span><span class='indexparent'><a class='index' id=':constructor,move,trivial'></a></span>A copy/move constructor for class
<span class='texttt'>X</span>
is
trivial
if it is not user-provided and if:</div><div id='copy.ctor-11.sentence-2' class='sentence'><ul class='itemize'><li id='copy.ctor-11.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-11.1'>(11.1)</a></div><div id='copy.ctor-11.1.sentence-1' class='sentence'>class
<span class='texttt'>X</span>
has no virtual functions (<a href='#virtual'>[class.virtual]</a>)
and no virtual base classes (<a href='#mi'>[class.mi]</a>), and</div></li><li id='copy.ctor-11.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-11.2'>(11.2)</a></div><div id='copy.ctor-11.2.sentence-1' class='sentence'>the constructor selected to copy/move each direct base class subobject is trivial, and</div></li><li id='copy.ctor-11.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-11.3'>(11.3)</a></div><div id='copy.ctor-11.3.sentence-1' class='sentence'>for each non-static data member of
<span class='texttt'>X</span>
that is of class type (or array thereof),
the constructor selected to copy/move that member is trivial;</div></li></ul></div><div id='copy.ctor-11.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':constructor,move,non-trivial'></a></span>otherwise the copy/move constructor is
<a class='hidden_link' href='#def:constructor,copy,nontrivial' id='def:constructor,copy,nontrivial'><i >non-trivial</i></a><a class='hidden_link' href='#copy.ctor-11.sentence-3'>.</a></div></div><div class='para' id='copy.ctor-12'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1699'>#</a></div><div id='copy.ctor-12.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,copy,implicitly_defined'></a></span><span class='indexparent'><a class='index' id=':constructor,move,implicitly_defined'></a></span>A copy/move constructor
that is defaulted and not defined as deleted
is
<a class='hidden_link' href='#def:implicitly_defined' id='def:implicitly_defined'><i>implicitly defined</i></a>
when it is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>),
when it is needed for constant evaluation (<a href='expr.const'>[expr.const]</a>), or
when it is explicitly defaulted after its first declaration<a class='hidden_link' href='#copy.ctor-12.sentence-1'>.</a></div> <div id='copy.ctor-12.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.ctor-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.ctor-12.sentence-3' class='sentence'>The copy/move constructor is implicitly defined even if the implementation elided
its odr-use (<a href='basic.def.odr'>[basic.def.odr]</a>, <a href='class.temporary'>[class.temporary]</a>)<a class='hidden_link' href='#copy.ctor-12.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='copy.ctor-12.sentence-2' class='sentence'>
If the implicitly-defined constructor would satisfy the requirements of a
constexpr constructor (<a href='dcl.constexpr'>[dcl.constexpr]</a>), the implicitly-defined
constructor is <span class='texttt'>constexpr</span><a class='hidden_link' href='#copy.ctor-12.sentence-2'>.</a></div></div><div class='para' id='copy.ctor-13'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1717'>#</a></div><div id='copy.ctor-13.sentence-1' class='sentence'>Before the defaulted copy/move constructor for a class is
implicitly defined,
all non-user-provided copy/move constructors for its
potentially constructed subobjects
shall have been implicitly defined<a class='hidden_link' href='#copy.ctor-13.sentence-1'>.</a></div> <div id='copy.ctor-13.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.ctor-13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.ctor-13.sentence-2' class='sentence'>An implicitly-declared copy/move constructor has an
implied exception specification (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#copy.ctor-13.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.ctor-14'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1728'>#</a></div><div id='copy.ctor-14.sentence-1' class='sentence'>The implicitly-defined copy/move constructor for a non-union class
<span class='texttt'>X</span>
performs a memberwise copy/move of its bases and members<a class='hidden_link' href='#copy.ctor-14.sentence-1'>.</a></div> <div id='copy.ctor-14.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.ctor-14.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.ctor-14.sentence-5' class='sentence'>Default member initializers of non-static data members are ignored<a class='hidden_link' href='#copy.ctor-14.sentence-5'>.</a></div> <div id='copy.ctor-14.sentence-6' class='sentence'>See also the example in <a href='#base.init'>[class.base.init]</a><a class='hidden_link' href='#copy.ctor-14.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='copy.ctor-14.sentence-2' class='sentence'>
The order of initialization is the same as the order of initialization of bases
and members in a user-defined constructor (see <a href='#base.init'>[class.base.init]</a>)<a class='hidden_link' href='#copy.ctor-14.sentence-2'>.</a></div> <div id='copy.ctor-14.sentence-3' class='sentence'>Let <span class='texttt'>x</span> be either the parameter of the constructor or, for the move constructor, an
xvalue referring to the parameter<a class='hidden_link' href='#copy.ctor-14.sentence-3'>.</a></div> <div id='copy.ctor-14.sentence-4' class='sentence'>Each base or non-static data member
is copied/moved in the manner appropriate to its type:</div><div id='copy.ctor-14.sentence-7' class='sentence'><ul class='itemize'><li id='copy.ctor-14.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-14.1'>(14.1)</a></div><div id='copy.ctor-14.1.sentence-1' class='sentence'>if the member is an array, each element is
direct-initialized with the corresponding subobject of <span class='texttt'>x</span>;</div></li><li id='copy.ctor-14.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-14.2'>(14.2)</a></div><div id='copy.ctor-14.2.sentence-1' class='sentence'>if a member <span class='texttt'>m</span> has rvalue reference type <span class='texttt'>T&amp;&amp;</span>, it is direct-initialized with
<span class='texttt'>static_&shy;cast&lt;T&amp;&amp;&gt;(x.m)</span>;</div></li><li id='copy.ctor-14.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.ctor-14.3'>(14.3)</a></div><div id='copy.ctor-14.3.sentence-1' class='sentence'>otherwise, the base or member is direct-initialized with the corresponding base or member of <span class='texttt'>x</span><a class='hidden_link' href='#copy.ctor-14.3.sentence-1'>.</a></div></li></ul></div><div id='copy.ctor-14.sentence-8' class='sentence'><span class='indexparent'><a class='index' id=':initialization,virtual_base_class'></a></span>Virtual base class subobjects shall be initialized only once by
the implicitly-defined copy/move constructor (see <a href='#base.init'>[class.base.init]</a>)<a class='hidden_link' href='#copy.ctor-14.sentence-8'>.</a></div></div><div class='para' id='copy.ctor-15'><div class='marginalizedparent'><a class='marginalized' href='#copy.ctor-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1757'>#</a></div><div id='copy.ctor-15.sentence-1' class='sentence'>The implicitly-defined copy/move constructor for a union
<span class='texttt'>X</span> copies the object representation (<a href='basic.types'>[basic.types]</a>) of <span class='texttt'>X</span><a class='hidden_link' href='#copy.ctor-15.sentence-1'>.</a></div> </div><div class='footnote' id='footnote-109'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-109'>109)</a></div><div id='footnote-109.sentence-1' class='sentence'>This implies that the reference parameter of the
implicitly-declared copy constructor
cannot bind to a
<span class='texttt'>volatile</span>
lvalue; see <a href='diff.class'>[diff.class]</a><a class='hidden_link' href='#footnote-109.sentence-1'>.</a></div></div></div></div><div id='copy.assign' class='section'><h3 ><a class='secnum' href='#copy.assign' style='min-width:103pt'>10.3.5</a> Copy/move assignment operator <a class='abbr_ref' href='class.copy.assign'>[class.copy.assign]</a></h3><div class='para' id='copy.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1765'>#</a></div><div id='copy.assign-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':assignment_operator,copy_'></a></span><span class='indexparent'><a class='index' id=':assignment_operator,move_'></a></span>A user-declared <a class='hidden_link' href='#def:copy' id='def:copy'><i>copy</i></a> assignment operator <span class='texttt'>X&#x200b;::&#x200b;operator=</span> is a
non-static non-template member function of class <span class='texttt'>X</span> with exactly one
parameter of type <span class='texttt'>X</span>, <span class='texttt'>X&amp;</span>, <span class='texttt'>const</span> <span class='texttt'>X&amp;</span>,
<span class='texttt'>volatile</span> <span class='texttt'>X&amp;</span> or <span class='texttt'>const</span> <span class='texttt'>volatile</span>
<span class='texttt'>X&amp;</span><a class='hidden_link' href='#copy.assign-1.sentence-1'>.</a><a class='footnotenum' href='#footnote-110'>110</a></div> <div id='copy.assign-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.assign-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.assign-1.sentence-2' class='sentence'>An overloaded assignment operator must be declared to have only one parameter;
see <a href='over.ass'>[over.ass]</a><a class='hidden_link' href='#copy.assign-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='copy.assign-1.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.assign-1.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.assign-1.sentence-3' class='sentence'>More than one form of copy assignment operator may be declared for a class<a class='hidden_link' href='#copy.assign-1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='copy.assign-1.note-3' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.assign-1.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.assign-1.sentence-4' class='sentence'>If a class
<span class='texttt'>X</span>
only has a copy assignment operator with a parameter of type
<span class='texttt'>X&amp;</span>,
an expression of type const
<span class='texttt'>X</span>
cannot be assigned to an object of type
<span class='texttt'>X</span><a class='hidden_link' href='#copy.assign-1.sentence-4'>.</a></div> <div id='copy.assign-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.assign-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  X();
  X&amp; operator=(X&amp;);
};
const X cx;
X x;
void f() {
  x = cx;           <span class='comment'>// error: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;operator=(X&amp;)</span> cannot assign <span class='tcode_in_codeblock'>cx</span> into <span class='tcode_in_codeblock'>x</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1815'>#</a></div><div id='copy.assign-2.sentence-1' class='sentence'>If the class definition does not explicitly declare a copy assignment operator,
one is declared <a class='hidden_link' href='#def:assignment_operator,copy,implicitly_declared' id='def:assignment_operator,copy,implicitly_declared'><i >implicitly</i></a><a class='hidden_link' href='#copy.assign-2.sentence-1'>.</a></div> <div id='copy.assign-2.sentence-2' class='sentence'>If the class definition declares a move
constructor or move assignment operator, the implicitly declared copy
assignment operator is defined as deleted; otherwise, it is defined as
defaulted (<a href='dcl.fct.def'>[dcl.fct.def]</a>)<a class='hidden_link' href='#copy.assign-2.sentence-2'>.</a></div> <div id='copy.assign-2.sentence-3' class='sentence'>The latter case is deprecated if the class has a user-declared copy constructor
or a user-declared destructor  (<a href='depr.impldec'>[depr.impldec]</a>)<a class='hidden_link' href='#copy.assign-2.sentence-3'>.</a></div> <div id='copy.assign-2.sentence-4' class='sentence'>The implicitly-declared copy assignment operator for a class
<span class='texttt'>X</span>
will have the form</div><pre class='codeblock'>
X&amp; X::operator=(const X&amp;)</pre><div id='copy.assign-2.sentence-5' class='sentence'>if</div><div id='copy.assign-2.sentence-6' class='sentence'><ul class='itemize'><li id='copy.assign-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-2.1'>(2.1)</a></div><div id='copy.assign-2.1.sentence-1' class='sentence'>each direct base class
<span class='texttt'>B</span>
of
<span class='texttt'>X</span>
has a copy assignment operator whose parameter is of type
<span class='texttt'>const</span>
<span class='texttt'>B&amp;</span>,
<span class='texttt'>const</span>
<span class='texttt'>volatile</span>
<span class='texttt'>B&amp;</span>
or
<span class='texttt'>B</span>,
and</div></li><li id='copy.assign-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-2.2'>(2.2)</a></div><div id='copy.assign-2.2.sentence-1' class='sentence'>for all the non-static data members of
<span class='texttt'>X</span>
that are of a class type
<span class='texttt'>M</span>
(or array thereof),
each such class type has a copy assignment operator whose parameter is of type
<span class='texttt'>const</span>
<span class='texttt'>M&amp;</span>,
<span class='texttt'>const</span>
<span class='texttt'>volatile</span>
<span class='texttt'>M&amp;</span>
or
<span class='texttt'>M</span><a class='hidden_link' href='#copy.assign-2.2.sentence-1'>.</a><a class='footnotenum' href='#footnote-111'>111</a></div></li></ul></div><div id='copy.assign-2.sentence-7' class='sentence'>Otherwise, the implicitly-declared copy
assignment operator
will have the form</div><pre class='codeblock'>
X&amp; X::operator=(X&amp;)</pre></div><div class='para' id='copy.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1876'>#</a></div><div id='copy.assign-3.sentence-1' class='sentence'>A user-declared move assignment operator <span class='texttt'>X&#x200b;::&#x200b;operator=</span> is
a non-static non-template member function of class <span class='texttt'>X</span> with exactly
one parameter of type <span class='texttt'>X&amp;&amp;</span>, <span class='texttt'>const X&amp;&amp;</span>, <span class='texttt'>volatile X&amp;&amp;</span>, or
<span class='texttt'>const volatile X&amp;&amp;</span><a class='hidden_link' href='#copy.assign-3.sentence-1'>.</a></div> <div id='copy.assign-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.assign-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.assign-3.sentence-2' class='sentence'>An overloaded assignment operator must be
declared to have only one parameter; see <a href='over.ass'>[over.ass]</a><a class='hidden_link' href='#copy.assign-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  
<div id='copy.assign-3.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.assign-3.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.assign-3.sentence-3' class='sentence'>More
than one form of move assignment operator may be declared for a class<a class='hidden_link' href='#copy.assign-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1885'>#</a></div><div id='copy.assign-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':assignment_operator,move,implicitly_declared'></a></span>If the definition of a class <span class='texttt'>X</span> does not explicitly declare a
move assignment operator, one
will be implicitly declared as defaulted if and only if</div><div id='copy.assign-4.sentence-2' class='sentence'><ul class='itemize'><li id='copy.assign-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-4.1'>(4.1)</a></div><div id='copy.assign-4.1.sentence-1' class='sentence'><span class='texttt'>X</span> does not have a user-declared copy constructor,</div></li><li id='copy.assign-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-4.2'>(4.2)</a></div><div id='copy.assign-4.2.sentence-1' class='sentence'><span class='texttt'>X</span> does not have a user-declared move constructor,</div></li><li id='copy.assign-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-4.3'>(4.3)</a></div><div id='copy.assign-4.3.sentence-1' class='sentence'><span class='texttt'>X</span> does not have a user-declared copy assignment operator, and</div></li><li id='copy.assign-4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-4.4'>(4.4)</a></div><div id='copy.assign-4.4.sentence-1' class='sentence'><span class='texttt'>X</span> does not have a user-declared destructor<a class='hidden_link' href='#copy.assign-4.4.sentence-1'>.</a></div></li></ul></div><div id='copy.assign-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.assign-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='copy.assign-4.sentence-3' class='sentence'>The class definition
<pre class='codeblock'>
struct S {
  int a;
  S&amp; operator=(const S&amp;) = default;
};</pre></div><div id='copy.assign-4.sentence-4' class='sentence'>will not have a default move assignment operator implicitly declared because the
copy assignment operator has been user-declared<a class='hidden_link' href='#copy.assign-4.sentence-4'>.</a></div> <div id='copy.assign-4.sentence-5' class='sentence'>The move assignment operator may
be explicitly defaulted<a class='hidden_link' href='#copy.assign-4.sentence-5'>.</a></div><pre class='codeblock'>
struct S {
  int a;
  S&amp; operator=(const S&amp;) = default;
  S&amp; operator=(S&amp;&amp;) = default;
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.assign-5'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1926'>#</a></div><div id='copy.assign-5.sentence-1' class='sentence'>The implicitly-declared move assignment operator for a class <span class='texttt'>X</span> will have the form
<pre class='codeblock'>
X&amp; X::operator=(X&amp;&amp;);</pre></div></div><div class='para' id='copy.assign-6'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1932'>#</a></div><div id='copy.assign-6.sentence-1' class='sentence'>The implicitly-declared copy/move assignment operator for class
<span class='texttt'>X</span>
has the return type
<span class='texttt'>X&amp;</span>;
it returns the object for which the assignment operator is invoked, that is,
the object assigned to<a class='hidden_link' href='#copy.assign-6.sentence-1'>.</a></div> <div id='copy.assign-6.sentence-2' class='sentence'>An implicitly-declared copy/move assignment operator is an
inline public member of its class<a class='hidden_link' href='#copy.assign-6.sentence-2'>.</a></div></div><div class='para' id='copy.assign-7'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1942'>#</a></div><div id='copy.assign-7.sentence-1' class='sentence'>A defaulted copy/move assignment operator for
class <span class='texttt'>X</span> is defined as deleted if <span class='texttt'>X</span> has:
<ul class='itemize'><li id='copy.assign-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-7.1'>(7.1)</a></div><div id='copy.assign-7.1.sentence-1' class='sentence'>a variant member with a non-trivial corresponding assignment operator and
  <span class='texttt'>X</span> is a union-like class, or</div></li><li id='copy.assign-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-7.2'>(7.2)</a></div><div id='copy.assign-7.2.sentence-1' class='sentence'>a non-static data member of <span class='texttt'>const</span> non-class
  type (or array thereof), or</div></li><li id='copy.assign-7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-7.3'>(7.3)</a></div><div id='copy.assign-7.3.sentence-1' class='sentence'>a non-static data member of reference type, or</div></li><li id='copy.assign-7.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-7.4'>(7.4)</a></div><div id='copy.assign-7.4.sentence-1' class='sentence'>a direct non-static data member of class type <span class='texttt'>M</span>
  (or array thereof) or a direct base class <span class='texttt'>M</span>
  that cannot be copied/moved because overload resolution
  (<a href='over.match'>[over.match]</a>), as applied to find <span class='texttt'>M</span>'s corresponding
  assignment operator, results in an ambiguity or
  a function that is deleted or inaccessible from the
  defaulted assignment operator<a class='hidden_link' href='#copy.assign-7.4.sentence-1'>.</a></div></li></ul></div><div id='copy.assign-7.sentence-2' class='sentence'>A defaulted move assignment operator that is defined as deleted is ignored by
overload resolution (<a href='over.match'>[over.match]</a>, <a href='over.over'>[over.over]</a>)<a class='hidden_link' href='#copy.assign-7.sentence-2'>.</a></div></div><div class='para' id='copy.assign-8'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1966'>#</a></div><div id='copy.assign-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':assignment_operator,copy,hidden'></a></span><span class='indexparent'><a class='index' id=':assignment_operator,move,hidden'></a></span>Because a copy/move assignment operator is implicitly declared for a class
if not declared by the user,
a base class copy/move assignment operator is always hidden
by the corresponding assignment operator of a derived class (<a href='over.ass'>[over.ass]</a>)<a class='hidden_link' href='#copy.assign-8.sentence-1'>.</a></div> <div id='copy.assign-8.sentence-2' class='sentence'>A
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i> that brings in from a base class an assignment operator
with a parameter type that could be that of a
copy/move assignment operator for the
derived class is not considered an explicit declaration of such an
operator and does not suppress the implicit declaration of the derived class
operator;
the operator introduced by the
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>
is hidden by the implicitly-declared operator in the derived
class<a class='hidden_link' href='#copy.assign-8.sentence-2'>.</a></div></div><div class='para' id='copy.assign-9'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L1985'>#</a></div><div id='copy.assign-9.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':assignment_operator,copy,trivial'></a></span><span class='indexparent'><a class='index' id=':assignment_operator,move,trivial'></a></span>A copy/move assignment operator for class
<span class='texttt'>X</span>
is
trivial
if it is not user-provided and if:</div><div id='copy.assign-9.sentence-2' class='sentence'><ul class='itemize'><li id='copy.assign-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-9.1'>(9.1)</a></div><div id='copy.assign-9.1.sentence-1' class='sentence'>class
<span class='texttt'>X</span>
has no virtual functions (<a href='#virtual'>[class.virtual]</a>)
and no virtual base classes (<a href='#mi'>[class.mi]</a>), and</div></li><li id='copy.assign-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-9.2'>(9.2)</a></div><div id='copy.assign-9.2.sentence-1' class='sentence'>the assignment operator selected to copy/move each direct
base class subobject is trivial, and</div></li><li id='copy.assign-9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-9.3'>(9.3)</a></div><div id='copy.assign-9.3.sentence-1' class='sentence'>for each non-static data member of
<span class='texttt'>X</span>
that is of class type (or array thereof),
the assignment operator selected to copy/move that member is trivial;</div></li></ul></div><div id='copy.assign-9.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':assignment_operator,move,non-trivial'></a></span>otherwise the copy/move assignment operator is
<a class='hidden_link' href='#def:assignment_operator,copy,non-trivial' id='def:assignment_operator,copy,non-trivial'><i >non-trivial</i></a><a class='hidden_link' href='#copy.assign-9.sentence-3'>.</a></div></div><div class='para' id='copy.assign-10'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2015'>#</a></div><div id='copy.assign-10.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':assignment_operator,copy,implicitly_defined'></a></span><span class='indexparent'><a class='index' id=':assignment_operator,move,implicitly_defined'></a></span>A copy/move assignment operator for a class <span class='texttt'>X</span>
that is defaulted and not defined as deleted
is
<a class='hidden_link' href='#def:implicitly_defined' id='def:implicitly_defined'><i>implicitly defined</i></a>
when it is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>)
(e.g., when it is selected by overload resolution
to assign to an object of its class type),
when it is needed for constant evaluation (<a href='expr.const'>[expr.const]</a>), or
when it is explicitly defaulted after its first declaration<a class='hidden_link' href='#copy.assign-10.sentence-1'>.</a></div> <div id='copy.assign-10.sentence-2' class='sentence'>The implicitly-defined copy/move assignment operator is <span class='texttt'>constexpr</span> if
<ul class='itemize'><li id='copy.assign-10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-10.1'>(10.1)</a></div><div id='copy.assign-10.1.sentence-1' class='sentence'><span class='texttt'>X</span> is a literal type, and</div></li><li id='copy.assign-10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-10.2'>(10.2)</a></div><div id='copy.assign-10.2.sentence-1' class='sentence'>the assignment operator selected to copy/move each direct base class subobject
is a constexpr function, and</div></li><li id='copy.assign-10.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-10.3'>(10.3)</a></div><div id='copy.assign-10.3.sentence-1' class='sentence'>for each non-static data member of <span class='texttt'>X</span> that is of class type (or array
thereof), the assignment operator selected to copy/move that member is a
constexpr function<a class='hidden_link' href='#copy.assign-10.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='copy.assign-11'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2042'>#</a></div><div id='copy.assign-11.sentence-1' class='sentence'>Before the defaulted copy/move assignment operator for a class is
implicitly defined,
all non-user-provided copy/move assignment operators for
its direct base classes and
its non-static data members shall have been implicitly defined<a class='hidden_link' href='#copy.assign-11.sentence-1'>.</a></div> <div id='copy.assign-11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.assign-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.assign-11.sentence-2' class='sentence'>An implicitly-declared copy/move assignment operator has an
implied exception specification (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#copy.assign-11.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.assign-12'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2053'>#</a></div><div id='copy.assign-12.sentence-1' class='sentence'>The implicitly-defined copy/move assignment operator for a
non-union class <span class='texttt'>X</span> performs memberwise copy/move assignment of its subobjects<a class='hidden_link' href='#copy.assign-12.sentence-1'>.</a></div> <div id='copy.assign-12.sentence-2' class='sentence'>The direct
base classes of <span class='texttt'>X</span> are assigned first, in the order of their declaration in the
<i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>, and then the immediate non-static data members of
<span class='texttt'>X</span> are assigned, in the order in which they were declared in the class
definition<a class='hidden_link' href='#copy.assign-12.sentence-2'>.</a></div> <div id='copy.assign-12.sentence-3' class='sentence'>Let <span class='texttt'>x</span> be either the parameter of the function or, for the move operator, an
xvalue referring to the parameter<a class='hidden_link' href='#copy.assign-12.sentence-3'>.</a></div> <div id='copy.assign-12.sentence-4' class='sentence'>Each subobject is assigned in the manner appropriate to its type:</div><div id='copy.assign-12.sentence-5' class='sentence'><ul class='itemize'><li id='copy.assign-12.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-12.1'>(12.1)</a></div><div id='copy.assign-12.1.sentence-1' class='sentence'>if the subobject is of class type,
as if by a call to <span class='texttt'>operator=</span> with the subobject as the object expression
and the corresponding subobject of <span class='texttt'>x</span> as a single function argument
(as if by explicit qualification; that is,
ignoring any possible virtual overriding functions in more derived classes);</div></li><li id='copy.assign-12.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-12.2'>(12.2)</a></div><div id='copy.assign-12.2.sentence-1' class='sentence'>if the subobject is an array, each element is assigned,
in the manner appropriate to the element type;</div></li><li id='copy.assign-12.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.assign-12.3'>(12.3)</a></div><div id='copy.assign-12.3.sentence-1' class='sentence'>if the subobject is of scalar type,
the built-in assignment operator is used<a class='hidden_link' href='#copy.assign-12.3.sentence-1'>.</a></div></li></ul></div><div id='copy.assign-12.sentence-6' class='sentence'><span class='indexparent'><a class='index' id=':assignment_operator,copy,virtual_bases_and'></a></span>It is unspecified whether subobjects representing virtual base classes
are assigned more than once by the implicitly-defined copy/move assignment
operator<a class='hidden_link' href='#copy.assign-12.sentence-6'>.</a></div> <div id='copy.assign-12.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.assign-12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct V { };
struct A : virtual V { };
struct B : virtual V { };
struct C : B, A { };</pre><div id='copy.assign-12.sentence-7' class='sentence'>It is unspecified whether the virtual base class subobject
<span class='texttt'>V</span>
is assigned twice by the implicitly-defined copy/move assignment operator for
<span class='texttt'>C</span><a class='hidden_link' href='#copy.assign-12.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.assign-13'><div class='marginalizedparent'><a class='marginalized' href='#copy.assign-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2098'>#</a></div><div id='copy.assign-13.sentence-1' class='sentence'>The implicitly-defined copy assignment operator for a
union <span class='texttt'>X</span> copies the object representation (<a href='basic.types'>[basic.types]</a>) of <span class='texttt'>X</span><a class='hidden_link' href='#copy.assign-13.sentence-1'>.</a></div> </div><div class='footnote' id='footnote-110'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-110'>110)</a></div><div id='footnote-110.sentence-1' class='sentence'>Because a template assignment operator or an assignment
operator taking an rvalue reference parameter is never a copy assignment
operator, the presence of such an assignment operator does not suppress the
implicit declaration of a copy assignment operator<a class='hidden_link' href='#footnote-110.sentence-1'>.</a></div> <div id='footnote-110.sentence-2' class='sentence'>Such assignment operators
participate in overload resolution with other assignment operators, including
copy assignment operators, and, if selected, will be used to assign an object<a class='hidden_link' href='#footnote-110.sentence-2'>.</a></div></div><div class='footnote' id='footnote-111'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-111'>111)</a></div><div id='footnote-111.sentence-1' class='sentence'>This implies that the reference parameter of the
implicitly-declared copy assignment operator cannot bind to a
<span class='texttt'>volatile</span>
lvalue; see <a href='diff.class'>[diff.class]</a><a class='hidden_link' href='#footnote-111.sentence-1'>.</a></div></div></div><div id='dtor' class='section'><h3 ><a class='secnum' href='#dtor' style='min-width:103pt'>10.3.6</a> Destructors <a class='abbr_ref' href='class.dtor'>[class.dtor]</a></h3><span class='indexparent'><a class='index' id=':destructor'></a></span><div class='para' id='dtor-1'><div class='marginalizedparent'><a class='marginalized' href='#dtor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2108'>#</a></div><div id='dtor-1.sentence-1' class='sentence'>In a declaration of a destructor, the <i ><a href='dcl.decl#nt:declarator'>declarator</a></i> is a
function declarator (<a href='dcl.fct'>[dcl.fct]</a>) of the form</div><pre class='ncbnf'><i ><a href='dcl.decl#nt:ptr-declarator'>ptr-declarator</a></i> <span class='terminal'>(</span> <i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> <span class='terminal'>)</span> <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><div id='dtor-1.sentence-2' class='sentence'>where the <i ><a href='dcl.decl#nt:ptr-declarator'>ptr-declarator</a></i> consists solely of an
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>, an optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i>,
and optional surrounding parentheses, and the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> has
one of the following forms:</div><div id='dtor-1.sentence-3' class='sentence'><ul class='itemize'><li id='dtor-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-1.1'>(1.1)</a></div><div id='dtor-1.1.sentence-1' class='sentence'>in a <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i> that belongs to the
<i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of a class or class template
but is not a friend
declaration (<a href='#friend'>[class.friend]</a>), the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is
<span class='texttt'>~</span><i ><a href='class#nt:class-name'>class-name</a></i> and the <i ><a href='class#nt:class-name'>class-name</a></i> is the
injected-class-name (<a href='#class'>[class]</a>) of the immediately-enclosing entity or</div></li><li id='dtor-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-1.2'>(1.2)</a></div><div id='dtor-1.2.sentence-1' class='sentence'>in a declaration at namespace scope or in a friend declaration, the
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
<span class='texttt'>~</span><i ><a href='class#nt:class-name'>class-name</a></i> and the <i ><a href='class#nt:class-name'>class-name</a></i> names the
same class as the <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><a class='hidden_link' href='#dtor-1.2.sentence-1'>.</a></div></li></ul></div><div id='dtor-1.sentence-4' class='sentence'>The <i ><a href='class#nt:class-name'>class-name</a></i> shall not be a <i ><a href='dcl.typedef#nt:typedef-name'>typedef-name</a></i><a class='hidden_link' href='#dtor-1.sentence-4'>.</a></div> <div id='dtor-1.sentence-5' class='sentence'>A
destructor shall take no arguments (<a href='dcl.fct'>[dcl.fct]</a>)<a class='hidden_link' href='#dtor-1.sentence-5'>.</a></div> <div id='dtor-1.sentence-6' class='sentence'>Each <i ><a href='dcl.spec#nt:decl-specifier'>decl-specifier</a></i> of the <i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i>
of a destructor declaration (if any) shall be <span class='texttt'>friend</span>, <span class='texttt'>inline</span>, or
<span class='texttt'>virtual</span><a class='hidden_link' href='#dtor-1.sentence-6'>.</a></div></div><div class='para' id='dtor-2'><div class='marginalizedparent'><a class='marginalized' href='#dtor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2143'>#</a></div><div id='dtor-2.sentence-1' class='sentence'>A destructor is used to destroy objects of its class type<a class='hidden_link' href='#dtor-2.sentence-1'>.</a></div> <div id='dtor-2.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':restriction,destructor'></a></span>The address of a destructor shall not be taken<a class='hidden_link' href='#dtor-2.sentence-2'>.</a></div> <div id='dtor-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':const,destructor_and_'></a></span><span class='indexparent'><a class='index' id=':volatile,destructor_and_'></a></span>A destructor can be invoked for a
<span class='texttt'>const</span>,
<span class='texttt'>volatile</span>
or
<span class='texttt'>const</span>
<span class='texttt'>volatile</span>
object<a class='hidden_link' href='#dtor-2.sentence-3'>.</a></div> <div id='dtor-2.sentence-4' class='sentence'><span class='texttt'>const</span>
and
<span class='texttt'>volatile</span>
semantics (<a href='dcl.type.cv'>[dcl.type.cv]</a>) are not applied on an object under destruction<a class='hidden_link' href='#dtor-2.sentence-4'>.</a></div> <div id='dtor-2.sentence-5' class='sentence'>They stop being in effect when the destructor for the
most derived object (<a href='intro.object'>[intro.object]</a>) starts<a class='hidden_link' href='#dtor-2.sentence-5'>.</a></div></div><div class='para' id='dtor-3'><div class='marginalizedparent'><a class='marginalized' href='#dtor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2163'>#</a></div><div id='dtor-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dtor-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dtor-3.sentence-1' class='sentence'>A declaration of a destructor that does not have a <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i>
has the same exception specification as if it had been implicitly declared (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#dtor-3.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dtor-4'><div class='marginalizedparent'><a class='marginalized' href='#dtor-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2169'>#</a></div><div id='dtor-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':destructor,default'></a></span>If a class has no user-declared
destructor, a destructor is implicitly
declared as defaulted (<a href='dcl.fct.def'>[dcl.fct.def]</a>)<a class='hidden_link' href='#dtor-4.sentence-1'>.</a></div> <div id='dtor-4.sentence-2' class='sentence'>An implicitly-declared destructor is an
inline public member of its class<a class='hidden_link' href='#dtor-4.sentence-2'>.</a></div></div><div class='para' id='dtor-5'><div class='marginalizedparent'><a class='marginalized' href='#dtor-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2178'>#</a></div><div id='dtor-5.sentence-1' class='sentence'>A defaulted destructor for a class
  <span class='texttt'>X</span> is defined as deleted if:
<ul class='itemize'><li id='dtor-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-5.1'>(5.1)</a></div><div id='dtor-5.1.sentence-1' class='sentence'><span class='texttt'>X</span> is a union-like class that has a variant
  member with a non-trivial destructor,</div></li><li id='dtor-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-5.2'>(5.2)</a></div><div id='dtor-5.2.sentence-1' class='sentence'>any potentially constructed subobject has class type
  <span class='texttt'>M</span> (or array thereof) and
  <span class='texttt'>M</span> has a deleted destructor or a destructor
  that is inaccessible from the defaulted destructor,</div></li><li id='dtor-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-5.3'>(5.3)</a></div><div id='dtor-5.3.sentence-1' class='sentence'>or, for a virtual destructor, lookup of the non-array deallocation
  function results in an ambiguity or in a function that is deleted or
  inaccessible from the defaulted destructor<a class='hidden_link' href='#dtor-5.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='dtor-6'><div class='marginalizedparent'><a class='marginalized' href='#dtor-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2195'>#</a></div><div id='dtor-6.sentence-1' class='sentence'>A destructor is trivial if it is not user-provided and if:</div><div id='dtor-6.sentence-2' class='sentence'><ul class='itemize'><li id='dtor-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-6.1'>(6.1)</a></div><div id='dtor-6.1.sentence-1' class='sentence'>the destructor is not <span class='texttt'>virtual</span>,</div></li><li id='dtor-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-6.2'>(6.2)</a></div><div id='dtor-6.2.sentence-1' class='sentence'>all of the direct base classes of its class have trivial destructors, and</div></li><li id='dtor-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-6.3'>(6.3)</a></div><div id='dtor-6.3.sentence-1' class='sentence'>for all of the non-static data members of its class that are of class
type (or array thereof), each such class has a trivial destructor<a class='hidden_link' href='#dtor-6.3.sentence-1'>.</a></div></li></ul></div><div id='dtor-6.sentence-3' class='sentence'>Otherwise, the destructor is
<a class='hidden_link' href='#def:destructor,non-trivial' id='def:destructor,non-trivial'><i >non-trivial</i></a><a class='hidden_link' href='#dtor-6.sentence-3'>.</a></div></div><div class='para' id='dtor-7'><div class='marginalizedparent'><a class='marginalized' href='#dtor-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2210'>#</a></div><div id='dtor-7.sentence-1' class='sentence'>A destructor
that is defaulted and not defined as deleted
is
<a class='hidden_link' href='#def:destructor,implicitly_defined' id='def:destructor,implicitly_defined'><i >implicitly defined</i></a>
when it is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>)
or when it is explicitly defaulted after its first declaration<a class='hidden_link' href='#dtor-7.sentence-1'>.</a></div></div><div class='para' id='dtor-8'><div class='marginalizedparent'><a class='marginalized' href='#dtor-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2218'>#</a></div><div id='dtor-8.sentence-1' class='sentence'>Before the
defaulted destructor for a class is implicitly defined, all the non-user-provided
destructors for its base classes and its non-static data members shall have been
implicitly defined<a class='hidden_link' href='#dtor-8.sentence-1'>.</a></div></div><div class='para' id='dtor-9'><div class='marginalizedparent'><a class='marginalized' href='#dtor-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2224'>#</a></div><div id='dtor-9.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':order_of_execution,destructor'></a></span><span class='indexparent'><a class='index' id=':order_of_execution,base_class_destructor'></a></span><span class='indexparent'><a class='index' id=':order_of_execution,member_destructor'></a></span>After executing the body of the destructor and destroying
any automatic objects allocated within the body, a
destructor for class
<span class='texttt'>X</span>
calls the destructors for
<span class='texttt'>X</span>'s
direct non-variant non-static data members, the destructors for
<span class='texttt'>X</span>'s
non-virtual direct base classes and, if
<span class='texttt'>X</span>
is the most derived class (<a href='#base.init'>[class.base.init]</a>),
its destructor calls the destructors for
<span class='texttt'>X</span>'s
virtual base classes<a class='hidden_link' href='#dtor-9.sentence-1'>.</a></div> <div id='dtor-9.sentence-2' class='sentence'>All destructors are called as if they were referenced with a qualified name,
that is, ignoring any possible virtual overriding destructors in more
derived classes<a class='hidden_link' href='#dtor-9.sentence-2'>.</a></div> <div id='dtor-9.sentence-3' class='sentence'>Bases and members are destroyed in the reverse order of the completion of
their constructor (see <a href='#base.init'>[class.base.init]</a>)<a class='hidden_link' href='#dtor-9.sentence-3'>.</a></div> <div id='dtor-9.sentence-4' class='sentence'>A
<span class='texttt'>return</span>
statement (<a href='stmt.return'>[stmt.return]</a>) in a destructor might not directly return to the
caller; before transferring control to the caller, the destructors for the
members and bases are called<a class='hidden_link' href='#dtor-9.sentence-4'>.</a></div> <div id='dtor-9.sentence-5' class='sentence'><span class='indexparent'><a class='index' id=':order_of_execution,destructor_and_array'></a></span>Destructors for elements of an array are called in reverse order of their
construction (see <a href='#init'>[class.init]</a>)<a class='hidden_link' href='#dtor-9.sentence-5'>.</a></div></div><div class='para' id='dtor-10'><div class='marginalizedparent'><a class='marginalized' href='#dtor-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2256'>#</a></div><div id='dtor-10.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':destructor,virtual'></a></span><span class='indexparent'><a class='index' id=':destructor,pure_virtual'></a></span>A destructor can be declared
<span class='texttt'>virtual</span> (<a href='#virtual'>[class.virtual]</a>)
or pure
<span class='texttt'>virtual</span> (<a href='#abstract'>[class.abstract]</a>);
if any objects of that class or any derived class are created in the program,
the destructor shall be defined<a class='hidden_link' href='#dtor-10.sentence-1'>.</a></div> <div id='dtor-10.sentence-2' class='sentence'>If a class has a base class with a virtual destructor, its  destructor
(whether user- or implicitly-declared) is virtual<a class='hidden_link' href='#dtor-10.sentence-2'>.</a></div></div><div class='para' id='dtor-11'><div class='marginalizedparent'><a class='marginalized' href='#dtor-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2268'>#</a></div><div id='dtor-11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dtor-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dtor-11.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member_function,destructor_and'></a></span>Some language constructs have special semantics when used during destruction;
see <a href='#cdtor'>[class.cdtor]</a><a class='hidden_link' href='#dtor-11.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dtor-12'><div class='marginalizedparent'><a class='marginalized' href='#dtor-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2275'>#</a></div><div id='dtor-12.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':destructor,implicit_call'></a></span><span class='indexparent'><a class='index' id=':destructor,program_termination_and'></a></span>A destructor is invoked implicitly</div><div id='dtor-12.sentence-2' class='sentence'><ul class='itemize'><li id='dtor-12.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-12.1'>(12.1)</a></div><div id='dtor-12.1.sentence-1' class='sentence'>

for a constructed object with static storage duration (<a href='basic.stc.static'>[basic.stc.static]</a>) at program termination (<a href='basic.start.term'>[basic.start.term]</a>),</div></li><li id='dtor-12.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-12.2'>(12.2)</a></div><div id='dtor-12.2.sentence-1' class='sentence'>for a constructed object with thread storage duration (<a href='basic.stc.thread'>[basic.stc.thread]</a>) at thread exit,</div></li><li id='dtor-12.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-12.3'>(12.3)</a></div><div id='dtor-12.3.sentence-1' class='sentence'>for a constructed object with automatic storage duration (<a href='basic.stc.auto'>[basic.stc.auto]</a>) when the block in which an object is created exits (<a href='stmt.dcl'>[stmt.dcl]</a>),</div></li><li id='dtor-12.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dtor-12.4'>(12.4)</a></div><div id='dtor-12.4.sentence-1' class='sentence'>for a constructed temporary object when its lifetime ends (<a href='conv.rval'>[conv.rval]</a>, <a href='class.temporary'>[class.temporary]</a>)<a class='hidden_link' href='#dtor-12.4.sentence-1'>.</a></div></li></ul></div><div id='dtor-12.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':delete,destructor_and'></a></span><span class='indexparent'><a class='index' id=':destructor,explicit_call'></a></span>In each case, the context of the invocation is the context of the construction of
the object<a class='hidden_link' href='#dtor-12.sentence-3'>.</a></div> <div id='dtor-12.sentence-4' class='sentence'>A destructor may also be invoked implicitly through use of a
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> for a constructed object allocated
by a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>; the context of the invocation is the
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i><a class='hidden_link' href='#dtor-12.sentence-4'>.</a></div> <div id='dtor-12.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dtor-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dtor-12.sentence-8' class='sentence'>An array of class type contains several subobjects for each of which
the destructor is invoked<a class='hidden_link' href='#dtor-12.sentence-8'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='dtor-12.sentence-5' class='sentence'>
A destructor can also be invoked explicitly<a class='hidden_link' href='#dtor-12.sentence-5'>.</a></div> <div id='dtor-12.sentence-6' class='sentence'>A destructor is <a class='hidden_link' href='#def:potentially_invoked' id='def:potentially_invoked'><i>potentially invoked</i></a>
if it is invoked or as specified in <a href='expr.new'>[expr.new]</a>, <a href='dcl.init.aggr'>[dcl.init.aggr]</a>,
<a href='#base.init'>[class.base.init]</a>, and <a href='except.throw'>[except.throw]</a><a class='hidden_link' href='#dtor-12.sentence-6'>.</a></div> <div id='dtor-12.sentence-7' class='sentence'>A program is ill-formed if a destructor that is potentially invoked is deleted
or not accessible from the context of the invocation<a class='hidden_link' href='#dtor-12.sentence-7'>.</a></div></div><div class='para' id='dtor-13'><div class='marginalizedparent'><a class='marginalized' href='#dtor-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2306'>#</a></div><div id='dtor-13.sentence-1' class='sentence'>At the point of definition of a virtual destructor (including an implicit
definition (<a href='#dtor'>[class.dtor]</a>)), the non-array deallocation function is
determined as if for the expression <span class='texttt'>delete this</span> appearing in a
non-virtual destructor of the destructor's class (see <a href='expr.delete'>[expr.delete]</a>)<a class='hidden_link' href='#dtor-13.sentence-1'>.</a></div> <div id='dtor-13.sentence-2' class='sentence'>If the lookup fails or if the deallocation function has
a deleted definition (<a href='dcl.fct.def'>[dcl.fct.def]</a>), the program is ill-formed<a class='hidden_link' href='#dtor-13.sentence-2'>.</a></div> <div id='dtor-13.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dtor-13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dtor-13.sentence-3' class='sentence'>This assures that a deallocation function corresponding to the dynamic type of an
object is available for the
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i> (<a href='#free'>[class.free]</a>)<a class='hidden_link' href='#dtor-13.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dtor-14'><div class='marginalizedparent'><a class='marginalized' href='#dtor-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2319'>#</a></div><div id='dtor-14.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':destructor,explicit_call_'></a></span>In an explicit destructor call, the destructor is specified by a
<span class='texttt'>~</span>
followed by a
<i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i> or <i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i>
that denotes the destructor's class type<a class='hidden_link' href='#dtor-14.sentence-1'>.</a></div> <div id='dtor-14.sentence-2' class='sentence'>The invocation of a destructor is subject to the usual rules for member
functions (<a href='#mfct'>[class.mfct]</a>);
that is, if the object is not of the destructor's class type and
not of a class derived from the destructor's class type (including when
the destructor is invoked via a null pointer value), the program has
undefined behavior<a class='hidden_link' href='#dtor-14.sentence-2'>.</a></div> <div id='dtor-14.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dtor-14.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dtor-14.sentence-3' class='sentence'>Invoking <span class='texttt'>delete</span> on a null pointer does not call the
destructor; see <a href='expr.delete'>[expr.delete]</a><a class='hidden_link' href='#dtor-14.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='dtor-14.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dtor-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B {
  virtual ~B() { }
};
struct D : B {
  ~D() { }
};

D D_object;
typedef B B_alias;
B* B_ptr = &amp;D_object;

void f() {
  D_object.B::~B();             <span class='comment'>// calls <span class='tcode_in_codeblock'>B</span>'s destructor
</span>  B_ptr-&gt;~B();                  <span class='comment'>// calls <span class='tcode_in_codeblock'>D</span>'s destructor
</span>  B_ptr-&gt;~B_alias();            <span class='comment'>// calls <span class='tcode_in_codeblock'>D</span>'s destructor
</span>  B_ptr-&gt;B_alias::~B();         <span class='comment'>// calls <span class='tcode_in_codeblock'>B</span>'s destructor
</span>  B_ptr-&gt;B_alias::~B_alias();   <span class='comment'>// calls <span class='tcode_in_codeblock'>B</span>'s destructor
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='dtor-14.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dtor-14.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dtor-14.sentence-4' class='sentence'>An explicit destructor call must always be written using
a member access operator (<a href='expr.ref'>[expr.ref]</a>) or a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>;
in particular, the
<i ><a href='expr.unary#nt:unary-expression'>unary-expression</a></i>
<span class='texttt'>~X()</span>
in a member function is not an explicit destructor call (<a href='expr.unary.op'>[expr.unary.op]</a>)<a class='hidden_link' href='#dtor-14.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dtor-15'><div class='marginalizedparent'><a class='marginalized' href='#dtor-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2366'>#</a></div><div id='dtor-15.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dtor-15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dtor-15.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,destructor_and_placement_of'></a></span>Explicit calls of destructors are rarely needed<a class='hidden_link' href='#dtor-15.sentence-1'>.</a></div> <div id='dtor-15.sentence-2' class='sentence'>One use of such calls is for objects placed at specific
addresses using a placement
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i><a class='hidden_link' href='#dtor-15.sentence-2'>.</a></div> <div id='dtor-15.sentence-3' class='sentence'>Such use of explicit placement and destruction of objects can be necessary
to cope with dedicated hardware resources and for writing memory management
facilities<a class='hidden_link' href='#dtor-15.sentence-3'>.</a></div> <div id='dtor-15.sentence-4' class='sentence'>For example,
<pre class='codeblock'>
void* operator new(std::size_t, void* p) { return p; }
struct X {
  X(int);
  ~X();
};
void f(X* p);

void g() {                      <span class='comment'>// rare, specialized use:
</span>  char* buf = new char[sizeof(X)];
  X* p = new(buf) X(222);       <span class='comment'>// use <span class='tcode_in_codeblock'>buf[]</span> and initialize
</span>  f(p);
  p-&gt;X::~X();                   <span class='comment'>// cleanup
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dtor-16'><div class='marginalizedparent'><a class='marginalized' href='#dtor-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2394'>#</a></div><div id='dtor-16.sentence-1' class='sentence'>Once a destructor is invoked for an object, the object no longer exists;
the behavior is undefined if the destructor is invoked
for an object whose lifetime has ended (<a href='basic.life'>[basic.life]</a>)<a class='hidden_link' href='#dtor-16.sentence-1'>.</a></div> <div id='dtor-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#dtor-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='dtor-16.sentence-2' class='sentence'>If the destructor for an automatic object is explicitly invoked,
and the block is subsequently left in a manner that would ordinarily
invoke implicit destruction of the object, the behavior is undefined<a class='hidden_link' href='#dtor-16.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='dtor-17'><div class='marginalizedparent'><a class='marginalized' href='#dtor-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2404'>#</a></div><div id='dtor-17.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#dtor-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dtor-17.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':fundamental_type,destructor_and'></a></span>The notation for explicit call of a destructor can be used for any scalar type
name (<a href='expr.pseudo'>[expr.pseudo]</a>)<a class='hidden_link' href='#dtor-17.sentence-1'>.</a></div> <div id='dtor-17.sentence-2' class='sentence'>Allowing this makes it possible to write code without having to know if a
destructor exists for a given type<a class='hidden_link' href='#dtor-17.sentence-2'>.</a></div> <div id='dtor-17.sentence-3' class='sentence'>For example:
<pre class='codeblock'>
typedef int I;
I* p;
p-&gt;I::~I();</pre></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='conv' class='section'><h3 ><a class='secnum' href='#conv' style='min-width:103pt'>10.3.7</a> Conversions <a class='abbr_ref' href='class.conv'>[class.conv]</a></h3><div class='para' id='conv-1'><div class='marginalizedparent'><a class='marginalized' href='#conv-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2421'>#</a></div><div id='conv-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,class'></a></span><span class='indexparent'><a class='index' id=':conversion,implicit'></a></span>Type conversions of class objects can be specified by constructors and
by conversion functions<a class='hidden_link' href='#conv-1.sentence-1'>.</a></div> <div id='conv-1.sentence-2' class='sentence'>These conversions are called
<a class='hidden_link' href='#def:conversion,user-defined' id='def:conversion,user-defined'><i >user-defined conversions</i></a>
and are used for implicit type conversions (<a href='conv'>[conv]</a>),
for initialization (<a href='dcl.init'>[dcl.init]</a>),
and for explicit type conversions (<a href='expr.cast'>[expr.cast]</a>, <a href='expr.static.cast'>[expr.static.cast]</a>)<a class='hidden_link' href='#conv-1.sentence-2'>.</a></div></div><div class='para' id='conv-2'><div class='marginalizedparent'><a class='marginalized' href='#conv-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2434'>#</a></div><div id='conv-2.sentence-1' class='sentence'>User-defined conversions are applied only where they are unambiguous (<a href='#member.lookup'>[class.member.lookup]</a>, <a href='#conv.fct'>[class.conv.fct]</a>)<a class='hidden_link' href='#conv-2.sentence-1'>.</a></div> <div id='conv-2.sentence-2' class='sentence'>Conversions obey the access control rules (<a href='#access'>[class.access]</a>)<a class='hidden_link' href='#conv-2.sentence-2'>.</a></div> <div id='conv-2.sentence-3' class='sentence'>Access control is applied after ambiguity resolution (<a href='basic.lookup'>[basic.lookup]</a>)<a class='hidden_link' href='#conv-2.sentence-3'>.</a></div></div><div class='para' id='conv-3'><div class='marginalizedparent'><a class='marginalized' href='#conv-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2439'>#</a></div><div id='conv-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#conv-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='conv-3.sentence-1' class='sentence'>See <a href='over.match'>[over.match]</a> for a discussion of the use of conversions in function calls
as well as examples below<a class='hidden_link' href='#conv-3.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='conv-4'><div class='marginalizedparent'><a class='marginalized' href='#conv-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2445'>#</a></div><div id='conv-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,implicit_user-defined'></a></span>At most one user-defined conversion (constructor or conversion function)
is implicitly applied to a single value<a class='hidden_link' href='#conv-4.sentence-1'>.</a></div> <div id='conv-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#conv-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  operator int();
};

struct Y {
  operator X();
};

Y a;
int b = a;          <span class='comment'>// error, <span class='tcode_in_codeblock'>a.operator X().operator int()</span> not tried
</span>int c = X(a);       <span class='comment'>// OK: <span class='tcode_in_codeblock'>a.operator X().operator int()</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='conv-5'><div class='marginalizedparent'><a class='marginalized' href='#conv-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2465'>#</a></div><div id='conv-5.sentence-1' class='sentence'>User-defined conversions are used implicitly only if they are unambiguous<a class='hidden_link' href='#conv-5.sentence-1'>.</a></div> <div id='conv-5.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':name_hiding,user-defined_conversion_and'></a></span>A conversion function in a derived class does not hide a conversion function
in a base class unless the two functions convert to the same type<a class='hidden_link' href='#conv-5.sentence-2'>.</a></div> <div id='conv-5.sentence-3' class='sentence'>Function overload resolution (<a href='over.match.best'>[over.match.best]</a>) selects the best
conversion function to perform the conversion<a class='hidden_link' href='#conv-5.sentence-3'>.</a></div> <div id='conv-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#conv-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  operator int();
};

struct Y : X {
    operator char();
};

void f(Y&amp; a) {
  if (a) {          <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;operator int()</span> or <span class='tcode_in_codeblock'>Y&#x200b;::&#x200b;operator char()</span>
</span>  }
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='conv.ctor' class='section'><h4 ><a class='secnum' href='#conv.ctor' style='min-width:118pt'>10.3.7.1</a> Conversion by constructor <a class='abbr_ref' href='class.conv.ctor'>[class.conv.ctor]</a></h4><span class='indexparent'><a class='index' id=':conversion,user-defined_'></a></span><div class='para' id='conv.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#conv.ctor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2492'>#</a></div><div id='conv.ctor-1.sentence-1' class='sentence'>A constructor that is not explicit (<a href='dcl.fct.spec'>[dcl.fct.spec]</a>)
specifies a conversion from
the types of its parameters (if any)
to the type of its class<a class='hidden_link' href='#conv.ctor-1.sentence-1'>.</a></div> <div id='conv.ctor-1.sentence-2' class='sentence'>Such a constructor is called a
<span class='indexparent'><a class='index' id=':constructor,converting'></a></span><span class='textit'>converting constructor</span><a class='hidden_link' href='#conv.ctor-1.sentence-2'>.</a></div> <div id='conv.ctor-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#conv.ctor-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <span class='indexparent'><a class='index' id=':Jessie'></a></span><pre class='codeblock'>
struct X {
    X(int);
    X(const char*, int =0);
    X(int, int);
};

void f(X arg) {
  X a = 1;          <span class='comment'>// <span class='tcode_in_codeblock'>a = X(1)</span>
</span>  X b = "Jessie";   <span class='comment'>// <span class='tcode_in_codeblock'>b = X("Jessie",0)</span>
</span>  a = 2;            <span class='comment'>// <span class='tcode_in_codeblock'>a = X(2)</span>
</span>  f(3);             <span class='comment'>// <span class='tcode_in_codeblock'>f(X(3))</span>
</span>  f({1, 2});        <span class='comment'>// <span class='tcode_in_codeblock'>f(X(1,2))</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='conv.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#conv.ctor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2519'>#</a></div><div id='conv.ctor-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#conv.ctor-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='conv.ctor-2.sentence-1' class='sentence'>An explicit constructor constructs objects just like non-explicit
constructors, but does so only where the direct-initialization syntax (<a href='dcl.init'>[dcl.init]</a>)
or where casts (<a href='expr.static.cast'>[expr.static.cast]</a>, <a href='expr.cast'>[expr.cast]</a>) are explicitly
used; see also <a href='over.match.copy'>[over.match.copy]</a><a class='hidden_link' href='#conv.ctor-2.sentence-1'>.</a></div> <div id='conv.ctor-2.sentence-2' class='sentence'>A default constructor may be an explicit constructor; such a constructor
will be used to perform default-initialization
or value-initialization (<a href='dcl.init'>[dcl.init]</a>)<a class='hidden_link' href='#conv.ctor-2.sentence-2'>.</a></div> <div id='conv.ctor-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#conv.ctor-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct Z {
  explicit Z();
  explicit Z(int);
  explicit Z(int, int);
};

Z a;                            <span class='comment'>// OK: default-initialization performed
</span>Z b{};                          <span class='comment'>// OK: direct initialization syntax used
</span>Z c = {};                       <span class='comment'>// error: copy-list-initialization
</span>Z a1 = 1;                       <span class='comment'>// error: no implicit conversion
</span>Z a3 = Z(1);                    <span class='comment'>// OK: direct initialization syntax used
</span>Z a2(1);                        <span class='comment'>// OK: direct initialization syntax used
</span>Z* p = new Z(1);                <span class='comment'>// OK: direct initialization syntax used
</span>Z a4 = (Z)1;                    <span class='comment'>// OK: explicit cast used
</span>Z a5 = static_cast&lt;Z&gt;(1);       <span class='comment'>// OK: explicit cast used
</span>Z a6 = { 3, 4 };                <span class='comment'>// error: no implicit conversion
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='conv.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#conv.ctor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2550'>#</a></div><div id='conv.ctor-3.sentence-1' class='sentence'>A non-explicit copy/move constructor (<a href='#copy.ctor'>[class.copy.ctor]</a>) is
a converting constructor<a class='hidden_link' href='#conv.ctor-3.sentence-1'>.</a></div> <div id='conv.ctor-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#conv.ctor-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='conv.ctor-3.sentence-2' class='sentence'>An implicitly-declared copy/move constructor is not an explicit constructor;
it may be called for implicit type conversions<a class='hidden_link' href='#conv.ctor-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='conv.fct' class='section'><h4 ><a class='secnum' href='#conv.fct' style='min-width:118pt'>10.3.7.2</a> Conversion functions <a class='abbr_ref' href='class.conv.fct'>[class.conv.fct]</a></h4><span class='indexparent'><a class='index' id=':function,conversion'></a></span><span class='indexparent'><a class='index' id=':conversion,user-defined__'></a></span><div class='para' id='conv.fct-1'><div class='marginalizedparent'><a class='marginalized' href='#conv.fct-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2563'>#</a></div><div id='conv.fct-1.sentence-1' class='sentence'>A member function of a class <span class='texttt'>X</span> having no parameters with a name of the form</div><pre class='bnf'><a class='nontermdef' href='#nt:conversion-function-id' id='nt:conversion-function-id'>conversion-function-id:</a>
&#9;<span class='terminal'><i ><a href='over.oper#nt:operator'>operator</a></i></span> <i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:conversion-type-id' id='nt:conversion-type-id'>conversion-type-id:</a>
&#9;<i ><a href='dcl.type#nt:type-specifier-seq'>type-specifier-seq</a></i> <i ><a href='class.conv.fct#nt:conversion-declarator'>conversion-declarator</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:conversion-declarator' id='nt:conversion-declarator'>conversion-declarator:</a>
&#9;<i ><a href='dcl.decl#nt:ptr-operator'>ptr-operator</a></i> <i ><a href='class.conv.fct#nt:conversion-declarator'>conversion-declarator</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><div id='conv.fct-1.sentence-2' class='sentence'>specifies a conversion from
<span class='texttt'>X</span>
to the type specified by the
<i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i><a class='hidden_link' href='#conv.fct-1.sentence-2'>.</a></div> <div id='conv.fct-1.sentence-3' class='sentence'>Such functions are called <a class='hidden_link' href='#def:conversion_function' id='def:conversion_function'><i >conversion functions</i></a><a class='hidden_link' href='#conv.fct-1.sentence-3'>.</a></div> <div id='conv.fct-1.sentence-4' class='sentence'>A <i ><a href='dcl.spec#nt:decl-specifier'>decl-specifier</a></i> in the <i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i>
of a conversion function (if any) shall be neither
a <i ><a href='dcl.type#nt:defining-type-specifier'>defining-type-specifier</a></i> nor <span class='texttt'>static</span><a class='hidden_link' href='#conv.fct-1.sentence-4'>.</a></div> <div id='conv.fct-1.sentence-5' class='sentence'><span class='indexparent'><a class='index' id=':conversion,type_of'></a></span>The type of the conversion function (<a href='dcl.fct'>[dcl.fct]</a>) is
“function taking no parameter returning
<i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i>”<a class='hidden_link' href='#conv.fct-1.sentence-5'>.</a></div> <div id='conv.fct-1.sentence-6' class='sentence'>A conversion function is never used to convert a (possibly cv-qualified) object
to the (possibly cv-qualified) same object type (or a reference to it),
to a (possibly cv-qualified) base class of that type (or a reference to it),
or to (possibly cv-qualified) void<a class='hidden_link' href='#conv.fct-1.sentence-6'>.</a><a class='footnotenum' href='#footnote-112'>112</a></div> <div id='conv.fct-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#conv.fct-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  operator int();
  operator auto() -&gt; short;     <span class='comment'>// error: trailing return type
</span>};

void f(X a) {
  int i = int(a);
  i = (int)a;
  i = a;
}</pre> <div id='conv.fct-1.sentence-7' class='sentence'>
In all three cases the value assigned will be converted by
<span class='texttt'>X&#x200b;::&#x200b;operator int()</span><a class='hidden_link' href='#conv.fct-1.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='conv.fct-2'><div class='marginalizedparent'><a class='marginalized' href='#conv.fct-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2618'>#</a></div><div id='conv.fct-2.sentence-1' class='sentence'>A conversion function may be explicit (<a href='dcl.fct.spec'>[dcl.fct.spec]</a>), in which case it is only considered as a user-defined conversion for direct-initialization (<a href='dcl.init'>[dcl.init]</a>)<a class='hidden_link' href='#conv.fct-2.sentence-1'>.</a></div> <div id='conv.fct-2.sentence-2' class='sentence'>Otherwise, user-defined conversions are not restricted to use in assignments and initializations<a class='hidden_link' href='#conv.fct-2.sentence-2'>.</a></div> <div id='conv.fct-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#conv.fct-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class Y { };
struct Z {
  explicit operator Y() const;
};

void h(Z z) {
  Y y1(z);          <span class='comment'>// OK: direct-initialization
</span>  Y y2 = z;         <span class='comment'>// ill-formed: copy-initialization
</span>  Y y3 = (Y)z;      <span class='comment'>// OK: cast notation
</span>}

void g(X a, X b) {
  int i = (a) ? 1+a : 0;
  int j = (a&amp;&amp;b) ? a+b : i;
  if (a) {
  }
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='conv.fct-3'><div class='marginalizedparent'><a class='marginalized' href='#conv.fct-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2642'>#</a></div><div id='conv.fct-3.sentence-1' class='sentence'>The
<i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i>
shall not represent a function type nor an array type<a class='hidden_link' href='#conv.fct-3.sentence-1'>.</a></div> <div id='conv.fct-3.sentence-2' class='sentence'>The
<i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i>
in a
<i ><a href='class.conv.fct#nt:conversion-function-id'>conversion-function-id</a></i>
is the longest sequence of
tokens that could possibly form a <i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i><a class='hidden_link' href='#conv.fct-3.sentence-2'>.</a></div> <div id='conv.fct-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#conv.fct-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='conv.fct-3.sentence-3' class='sentence'>This prevents ambiguities between the declarator operator <span class='texttt'>*</span> and its expression
counterparts<a class='hidden_link' href='#conv.fct-3.sentence-3'>.</a></div> <div id='conv.fct-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#conv.fct-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
&amp;ac.operator int*i; <span class='comment'>// syntax error:
</span>                    <span class='comment'>// parsed as: <span class='tcode_in_codeblock'>&amp;(ac.operator int *)i</span>
</span>                    <span class='comment'>// not as: <span class='tcode_in_codeblock'>&amp;(ac.operator int)*i</span>
</span></pre> <div id='conv.fct-3.sentence-5' class='sentence'>
The <span class='texttt'>*</span> is the pointer declarator and not the multiplication operator<a class='hidden_link' href='#conv.fct-3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='conv.fct-3.sentence-4' class='sentence'>
This rule also prevents ambiguities for attributes<a class='hidden_link' href='#conv.fct-3.sentence-4'>.</a></div> <div id='conv.fct-3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#conv.fct-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
operator int [[noreturn]] ();   <span class='comment'>// error: <span class='tcode_in_codeblock'>noreturn</span> attribute applied to a type
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='conv.fct-4'><div class='marginalizedparent'><a class='marginalized' href='#conv.fct-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2671'>#</a></div><div id='conv.fct-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,inheritance_of_user-defined'></a></span>Conversion functions are inherited<a class='hidden_link' href='#conv.fct-4.sentence-1'>.</a></div></div><div class='para' id='conv.fct-5'><div class='marginalizedparent'><a class='marginalized' href='#conv.fct-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2675'>#</a></div><div id='conv.fct-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,virtual_user-defined'></a></span>Conversion functions can be virtual<a class='hidden_link' href='#conv.fct-5.sentence-1'>.</a></div></div><div class='para' id='conv.fct-6'><div class='marginalizedparent'><a class='marginalized' href='#conv.fct-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2679'>#</a></div><div id='conv.fct-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,deduced_return_type_of_user-defined'></a></span>A conversion function template shall not have a
deduced return type (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>)<a class='hidden_link' href='#conv.fct-6.sentence-1'>.</a></div> <div id='conv.fct-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#conv.fct-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  operator auto() const { return 10; }      <span class='comment'>// OK
</span>  template&lt;class T&gt;
  operator auto() const { return 1.2; }     <span class='comment'>// error: conversion function template
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-112'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-112'>112)</a></div><div id='footnote-112.sentence-1' class='sentence'>These conversions are considered
as standard conversions for the purposes of overload resolution (<a href='over.best.ics'>[over.best.ics]</a>, <a href='over.ics.ref'>[over.ics.ref]</a>) and therefore initialization (<a href='dcl.init'>[dcl.init]</a>) and explicit casts (<a href='expr.static.cast'>[expr.static.cast]</a>)<a class='hidden_link' href='#footnote-112.sentence-1'>.</a></div> <div id='footnote-112.sentence-2' class='sentence'>A conversion to <span class='texttt'>void</span> does not invoke any conversion function (<a href='expr.static.cast'>[expr.static.cast]</a>)<a class='hidden_link' href='#footnote-112.sentence-2'>.</a></div> <div id='footnote-112.sentence-3' class='sentence'>Even though never directly called to perform a conversion,
such conversion functions can be declared and can potentially
be reached through a call to a virtual conversion function in a base class<a class='hidden_link' href='#footnote-112.sentence-3'>.</a></div></div></div></div><div id='static' class='section'><h3 ><a class='secnum' href='#static' style='min-width:103pt'>10.3.8</a> Static members <a class='abbr_ref' href='class.static'>[class.static]</a></h3><span class='indexparent'><a class='index' id=':member,static_'></a></span><div class='para' id='static-1'><div class='marginalizedparent'><a class='marginalized' href='#static-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2696'>#</a></div><div id='static-1.sentence-1' class='sentence'>A static member <span class='texttt'>s</span> of class <span class='texttt'>X</span> may be referred to
using the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> expression <span class='texttt'>X&#x200b;::&#x200b;s</span>; it is not
necessary to use the class member access syntax (<a href='expr.ref'>[expr.ref]</a>) to
refer to a static member<a class='hidden_link' href='#static-1.sentence-1'>.</a></div> <div id='static-1.sentence-2' class='sentence'>A static member may be
referred to using the class member access syntax, in which case the
object expression is evaluated<a class='hidden_link' href='#static-1.sentence-2'>.</a></div> <div id='static-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#static-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct process {
  static void reschedule();
};
process&amp; g();

void f() {
  process::reschedule();        <span class='comment'>// OK: no object necessary
</span>  g().reschedule();             <span class='comment'>// <span class='tcode_in_codeblock'>g()</span> is called
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='static-2'><div class='marginalizedparent'><a class='marginalized' href='#static-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2718'>#</a></div><div id='static-2.sentence-1' class='sentence'>A static member may be referred to directly in the scope of its
class or in the scope of a class derived (<a href='#derived'>[class.derived]</a>)
from its class; in this case, the static member is referred to
as if a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> expression was used, with the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> of the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> naming
the class scope from which the static member is referenced<a class='hidden_link' href='#static-2.sentence-1'>.</a></div> <div id='static-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#static-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int g();
struct X {
  static int g();
};
struct Y : X {
  static int i;
};
int Y::i = g();                 <span class='comment'>// equivalent to <span class='tcode_in_codeblock'>Y&#x200b;::&#x200b;g();</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='static-3'><div class='marginalizedparent'><a class='marginalized' href='#static-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2739'>#</a></div><div id='static-3.sentence-1' class='sentence'>If an <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> is used in the
definition of a static member following the member's
<i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i>, and name lookup (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>)
finds that the <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> refers to a static
member, enumerator, or nested type of the member's class (or of a base
class of the member's class), the <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> is
transformed into a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> expression in which the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> names the class scope from which the
member is referenced<a class='hidden_link' href='#static-3.sentence-1'>.</a></div> <div id='static-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#static-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='static-3.sentence-2' class='sentence'>See <a href='expr.prim.id'>[expr.prim.id]</a> for restrictions on the use of non-static data
members and non-static member functions<a class='hidden_link' href='#static-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='static-4'><div class='marginalizedparent'><a class='marginalized' href='#static-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2755'>#</a></div><div id='static-4.sentence-1' class='sentence'>Static members obey the usual class member access rules (<a href='#access'>[class.access]</a>)<a class='hidden_link' href='#static-4.sentence-1'>.</a></div> <div id='static-4.sentence-2' class='sentence'>When used in the declaration of a class
member, the <span class='texttt'>static</span> specifier shall only be used in the member
declarations that appear within the <i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of
the class definition<a class='hidden_link' href='#static-4.sentence-2'>.</a></div> <div id='static-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#static-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='static-4.sentence-3' class='sentence'>It cannot be specified in member declarations that appear in namespace scope<a class='hidden_link' href='#static-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='static.mfct' class='section'><h4 ><a class='secnum' href='#static.mfct' style='min-width:118pt'>10.3.8.1</a> Static member functions <a class='abbr_ref' href='class.static.mfct'>[class.static.mfct]</a></h4><span class='indexparent'><a class='index' id=':member_function,static_'></a></span><div class='para' id='static.mfct-1'><div class='marginalizedparent'><a class='marginalized' href='#static.mfct-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2768'>#</a></div><div id='static.mfct-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#static.mfct-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='static.mfct-1.sentence-1' class='sentence'>The rules described in <a href='#mfct'>[class.mfct]</a> apply to static member
functions<a class='hidden_link' href='#static.mfct-1.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='static.mfct-2'><div class='marginalizedparent'><a class='marginalized' href='#static.mfct-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2774'>#</a></div><div id='static.mfct-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#static.mfct-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='static.mfct-2.sentence-4' class='sentence'>A static member function does not have a <span class='texttt'>this</span>
pointer (<a href='#this'>[class.this]</a>)<a class='hidden_link' href='#static.mfct-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='static.mfct-2.sentence-1' class='sentence'>
A static member function shall not be <span class='texttt'>virtual</span><a class='hidden_link' href='#static.mfct-2.sentence-1'>.</a></div> <div id='static.mfct-2.sentence-2' class='sentence'>There
shall not be a static and a non-static member function with the
same name and the same parameter types (<a href='over.load'>[over.load]</a>)<a class='hidden_link' href='#static.mfct-2.sentence-2'>.</a></div> <div id='static.mfct-2.sentence-3' class='sentence'>A
static member function shall not be declared <span class='texttt'>const</span>,
<span class='texttt'>volatile</span>, or <span class='texttt'>const volatile</span><a class='hidden_link' href='#static.mfct-2.sentence-3'>.</a></div></div></div><div id='static.data' class='section'><h4 ><a class='secnum' href='#static.data' style='min-width:118pt'>10.3.8.2</a> Static data members <a class='abbr_ref' href='class.static.data'>[class.static.data]</a></h4><span class='indexparent'><a class='index' id=':member_data,static'></a></span><div class='para' id='static.data-1'><div class='marginalizedparent'><a class='marginalized' href='#static.data-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2788'>#</a></div><div id='static.data-1.sentence-1' class='sentence'>A static data member is not part of the subobjects of a class<a class='hidden_link' href='#static.data-1.sentence-1'>.</a></div> <div id='static.data-1.sentence-2' class='sentence'>If a
static data member is declared <span class='texttt'>thread_&shy;local</span> there is one copy of
the member per thread<a class='hidden_link' href='#static.data-1.sentence-2'>.</a></div> <div id='static.data-1.sentence-3' class='sentence'>If a static data member is not declared
<span class='texttt'>thread_&shy;local</span> there is one copy of the data member that is shared by all
the objects of the class<a class='hidden_link' href='#static.data-1.sentence-3'>.</a></div></div><div class='para' id='static.data-2'><div class='marginalizedparent'><a class='marginalized' href='#static.data-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2795'>#</a></div><div id='static.data-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,static_member'></a></span><span class='indexparent'><a class='index' id=':definition,static_member'></a></span>The declaration of a non-inline
static data member in its class definition
is not a definition and may be of an incomplete type other than
<span class='mathit'>cv</span> <span class='texttt'>void</span><a class='hidden_link' href='#static.data-2.sentence-1'>.</a></div> <div id='static.data-2.sentence-2' class='sentence'>The definition for a static data
member that is not defined inline in the class definition
shall appear in a namespace scope enclosing the member's class
definition<a class='hidden_link' href='#static.data-2.sentence-2'>.</a></div> <div id='static.data-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':operator_use,scope_resolution'></a></span>In the definition at namespace scope, the name of the static
data member shall be qualified by its class name using the <span class='texttt'>&#x200b;::&#x200b;</span>
operator<a class='hidden_link' href='#static.data-2.sentence-3'>.</a></div> <div id='static.data-2.sentence-4' class='sentence'>The <i ><a href='dcl.init#nt:initializer'>initializer</a></i> expression in the definition of a
static data member is in the scope of its
class (<a href='basic.scope.class'>[basic.scope.class]</a>)<a class='hidden_link' href='#static.data-2.sentence-4'>.</a></div> <div id='static.data-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#static.data-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class process {
  static process* run_chain;
  static process* running;
};

process* process::running = get_main();
process* process::run_chain = running;</pre><div id='static.data-2.sentence-5' class='sentence'>The static data member <span class='texttt'>run_&shy;chain</span> of class
<span class='texttt'>process</span> is defined in global scope; the notation
<span class='texttt'>process&#x200b;::&#x200b;run_&shy;chain</span> specifies that the member <span class='texttt'>run_&shy;chain</span>
is a member of class <span class='texttt'>process</span> and in the scope of class
<span class='texttt'>process</span><a class='hidden_link' href='#static.data-2.sentence-5'>.</a></div> <div id='static.data-2.sentence-6' class='sentence'>In the static data member definition, the
<i ><a href='dcl.init#nt:initializer'>initializer</a></i> expression refers to the static data
member <span class='texttt'>running</span> of class <span class='texttt'>process</span><a class='hidden_link' href='#static.data-2.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='static.data-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#static.data-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='static.data-2.sentence-7' class='sentence'>Once the static data member has been defined, it exists even if
no objects of its class have been created<a class='hidden_link' href='#static.data-2.sentence-7'>.</a></div> <div id='static.data-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#static.data-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='static.data-2.sentence-8' class='sentence'>In the example above, <span class='texttt'>run_&shy;chain</span> and <span class='texttt'>running</span> exist even
if no objects of class <span class='texttt'>process</span> are created by the program<a class='hidden_link' href='#static.data-2.sentence-8'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='static.data-3'><div class='marginalizedparent'><a class='marginalized' href='#static.data-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2841'>#</a></div><div id='static.data-3.sentence-1' class='sentence'>If a non-volatile non-inline <span class='texttt'>const</span> static data member is
of integral or enumeration type,
its declaration in the class definition can specify a
<i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i> in which every
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i> that is an <i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i>
is a constant expression (<a href='expr.const'>[expr.const]</a>)<a class='hidden_link' href='#static.data-3.sentence-1'>.</a></div> <div id='static.data-3.sentence-2' class='sentence'>The member shall still be defined in a namespace scope if
it is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>) in the program and the
namespace scope definition shall not contain an <i ><a href='dcl.init#nt:initializer'>initializer</a></i><a class='hidden_link' href='#static.data-3.sentence-2'>.</a></div> <div id='static.data-3.sentence-3' class='sentence'>An inline static data member may be defined in the class definition
and may specify a <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i><a class='hidden_link' href='#static.data-3.sentence-3'>.</a></div> <div id='static.data-3.sentence-4' class='sentence'>If the
member is declared with the <span class='texttt'>constexpr</span> specifier, it may be
redeclared in namespace scope with no initializer (this usage is
deprecated; see <a href='depr.static_constexpr'>[depr.static_constexpr]</a>)<a class='hidden_link' href='#static.data-3.sentence-4'>.</a></div> <div id='static.data-3.sentence-5' class='sentence'>Declarations of other
static data members shall not specify a <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i><a class='hidden_link' href='#static.data-3.sentence-5'>.</a></div></div><div class='para' id='static.data-4'><div class='marginalizedparent'><a class='marginalized' href='#static.data-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2858'>#</a></div><div id='static.data-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#static.data-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='static.data-4.sentence-2' class='sentence'>There shall be exactly one definition of a static data member
that is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>) in a program; no diagnostic is required<a class='hidden_link' href='#static.data-4.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='static.data-4.sentence-1' class='sentence'>
Unnamed classes and classes contained directly
or indirectly within unnamed classes shall not contain static
data members<a class='hidden_link' href='#static.data-4.sentence-1'>.</a></div></div><div class='para' id='static.data-5'><div class='marginalizedparent'><a class='marginalized' href='#static.data-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2867'>#</a></div><div id='static.data-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#static.data-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='static.data-5.sentence-1' class='sentence'>Static data members of a class in namespace scope have the linkage of that class (<a href='basic.link'>[basic.link]</a>)<a class='hidden_link' href='#static.data-5.sentence-1'>.</a></div> <div id='static.data-5.sentence-2' class='sentence'>A local class cannot have static data members (<a href='#local'>[class.local]</a>)<a class='hidden_link' href='#static.data-5.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='static.data-6'><div class='marginalizedparent'><a class='marginalized' href='#static.data-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2872'>#</a></div><div id='static.data-6.sentence-1' class='sentence'>Static data members are initialized and destroyed exactly like
non-local variables (<a href='basic.start.static'>[basic.start.static]</a>, <a href='basic.start.dynamic'>[basic.start.dynamic]</a>,
<a href='basic.start.term'>[basic.start.term]</a>)<a class='hidden_link' href='#static.data-6.sentence-1'>.</a></div></div><div class='para' id='static.data-7'><div class='marginalizedparent'><a class='marginalized' href='#static.data-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2877'>#</a></div><div id='static.data-7.sentence-1' class='sentence'>A static data member shall not be
<span class='texttt'>mutable</span> (<a href='dcl.stc'>[dcl.stc]</a>)<a class='hidden_link' href='#static.data-7.sentence-1'>.</a></div></div></div></div><div id='bit' class='section'><h3 ><a class='secnum' href='#bit' style='min-width:103pt'>10.3.9</a> Bit-fields <a class='abbr_ref' href='class.bit'>[class.bit]</a></h3><span class='indexparent'><a class='index' id=':bit-field'></a></span><div class='para' id='bit-1'><div class='marginalizedparent'><a class='marginalized' href='#bit-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2884'>#</a></div><div id='bit-1.sentence-1' class='sentence'>A <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i> of the form</div><pre class='ncsimplebnf'><i ><a href='lex.name#nt:identifier'>identifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>:</span> <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><div id='bit-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id='::,bit-field_declaration'></a></span><span class='indexparent'><a class='index' id=':declaration,bit-field'></a></span>specifies a bit-field;
its length is set off from the bit-field name by a colon<a class='hidden_link' href='#bit-1.sentence-2'>.</a></div> <div id='bit-1.sentence-3' class='sentence'>The optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> appertains to the entity being declared<a class='hidden_link' href='#bit-1.sentence-3'>.</a></div> <div id='bit-1.sentence-4' class='sentence'>The bit-field
attribute is not part of the type of the class member<a class='hidden_link' href='#bit-1.sentence-4'>.</a></div> <div id='bit-1.sentence-5' class='sentence'>The
<i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> shall be an integral constant expression
with a value greater than or equal to zero<a class='hidden_link' href='#bit-1.sentence-5'>.</a></div> <div id='bit-1.sentence-6' class='sentence'>The
value of the integral constant expression may
be larger than the number of bits in the object
representation (<a href='basic.types'>[basic.types]</a>) of the bit-field's type; in such
cases the extra bits are padding bits (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#bit-1.sentence-6'>.</a></div> <div id='bit-1.sentence-7' class='sentence'><span class='indexparent'><a class='index' id=':allocation,implementation-defined_bit-field'></a></span>Allocation of bit-fields within a class object is
<span class='indexparent'><a class='index' id=':allocation_of_bit-fields_within_a_class_object'></a></span>implementation-defined<a class='hidden_link' href='#bit-1.sentence-7'>.</a></div> <div id='bit-1.sentence-8' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,implementation-defined_alignment_of'></a></span>Alignment of bit-fields is <span class='indexparent'><a class='index' id=':alignment_of_bit-fields_within_a_class_object'></a></span>implementation-defined<a class='hidden_link' href='#bit-1.sentence-8'>.</a></div> <div id='bit-1.sentence-9' class='sentence'><span class='indexparent'><a class='index' id=':layout,bit-field'></a></span>Bit-fields are packed into some addressable allocation unit<a class='hidden_link' href='#bit-1.sentence-9'>.</a></div> <div id='bit-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#bit-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='bit-1.sentence-10' class='sentence'>Bit-fields straddle allocation units on some machines and not on others<a class='hidden_link' href='#bit-1.sentence-10'>.</a></div> <div id='bit-1.sentence-11' class='sentence'>Bit-fields are assigned right-to-left on some machines, left-to-right on
others<a class='hidden_link' href='#bit-1.sentence-11'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='bit-2'><div class='marginalizedparent'><a class='marginalized' href='#bit-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2915'>#</a></div><div id='bit-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,unnamed'></a></span>A declaration for a bit-field that omits the <i ><a href='lex.name#nt:identifier'>identifier</a></i>
declares an <a class='hidden_link' href='#def:unnamed_bit-field' id='def:unnamed_bit-field'><i >unnamed bit-field</i></a><a class='hidden_link' href='#bit-2.sentence-1'>.</a></div> <div id='bit-2.sentence-2' class='sentence'>Unnamed bit-fields are not
members and cannot be initialized<a class='hidden_link' href='#bit-2.sentence-2'>.</a></div> <div id='bit-2.sentence-3' class='sentence'>An unnamed bit-field shall not be declared with a cv-qualified type<a class='hidden_link' href='#bit-2.sentence-3'>.</a></div> <div id='bit-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#bit-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='bit-2.sentence-6' class='sentence'>An unnamed bit-field is useful for padding to conform to
externally-imposed layouts<a class='hidden_link' href='#bit-2.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='bit-2.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,zero_width_of'></a></span><span class='indexparent'><a class='index' id=':bit-field,alignment_of'></a></span>As a special case, an unnamed bit-field with a width of zero specifies
alignment of the next bit-field at an allocation unit boundary<a class='hidden_link' href='#bit-2.sentence-4'>.</a></div> <div id='bit-2.sentence-5' class='sentence'>Only
when declaring an unnamed bit-field may the value of the
<i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> be equal to zero<a class='hidden_link' href='#bit-2.sentence-5'>.</a></div></div><div class='para' id='bit-3'><div class='marginalizedparent'><a class='marginalized' href='#bit-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2932'>#</a></div><div id='bit-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,type_of'></a></span>A bit-field shall not be a static member<a class='hidden_link' href='#bit-3.sentence-1'>.</a></div> <div id='bit-3.sentence-2' class='sentence'>A bit-field shall have
integral or enumeration type (<a href='basic.fundamental'>[basic.fundamental]</a>)<a class='hidden_link' href='#bit-3.sentence-2'>.</a></div> <div id='bit-3.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':Boolean'></a></span>A <span class='texttt'>bool</span> value can successfully be stored in a bit-field of any
nonzero size<a class='hidden_link' href='#bit-3.sentence-3'>.</a></div> <div id='bit-3.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,address_of'></a></span>The address-of operator <span class='texttt'>&amp;</span> shall not be applied to a bit-field,
so there are no pointers to bit-fields<a class='hidden_link' href='#bit-3.sentence-4'>.</a></div> <div id='bit-3.sentence-5' class='sentence'><span class='indexparent'><a class='index' id=':restriction,bit-field'></a></span><span class='indexparent'><a class='index' id=':restriction,address_of_bit-field'></a></span><span class='indexparent'><a class='index' id=':restriction,pointer_to_bit-field'></a></span>A non-const reference shall not be bound to a
bit-field (<a href='dcl.init.ref'>[dcl.init.ref]</a>)<a class='hidden_link' href='#bit-3.sentence-5'>.</a></div> <div id='bit-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#bit-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='bit-3.sentence-6' class='sentence'>If the initializer for a reference of type <span class='texttt'>const</span> <span class='texttt'>T&amp;</span> is
an lvalue that refers to a bit-field, the reference is bound to a
temporary initialized to hold the value of the bit-field; the reference
is not bound to the bit-field directly<a class='hidden_link' href='#bit-3.sentence-6'>.</a></div> <div id='bit-3.sentence-7' class='sentence'>See <a href='dcl.init.ref'>[dcl.init.ref]</a><a class='hidden_link' href='#bit-3.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='bit-4'><div class='marginalizedparent'><a class='marginalized' href='#bit-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2954'>#</a></div><div id='bit-4.sentence-1' class='sentence'>If the value <span class='texttt'>true</span> or <span class='texttt'>false</span> is stored into a bit-field of
type <span class='texttt'>bool</span> of any size (including a one bit bit-field), the
original <span class='texttt'>bool</span> value and the value of the bit-field shall compare
equal<a class='hidden_link' href='#bit-4.sentence-1'>.</a></div> <div id='bit-4.sentence-2' class='sentence'>If the value of an enumerator is stored into a bit-field of the
same enumeration type and the number of bits in the bit-field is large
enough to hold all the values of that enumeration type (<a href='dcl.enum'>[dcl.enum]</a>),
the original enumerator value and the value of the bit-field shall
compare equal<a class='hidden_link' href='#bit-4.sentence-2'>.</a></div> <div id='bit-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#bit-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
enum BOOL { FALSE=0, TRUE=1 };
struct A {
  BOOL b:1;
};
A a;
void f() {
  a.b = TRUE;
  if (a.b == TRUE)              <span class='comment'>// yields <span class='tcode_in_codeblock'>true</span>
</span>    { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='nest' class='section'><h3 ><a class='secnum' href='#nest' style='min-width:103pt'>10.3.10</a> Nested class declarations <a class='abbr_ref' href='class.nest'>[class.nest]</a></h3><span class='indexparent'><a class='index' id=':definition,nested_class'></a></span><div class='para' id='nest-1'><div class='marginalizedparent'><a class='marginalized' href='#nest-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L2983'>#</a></div><div id='nest-1.sentence-1' class='sentence'>A class can be declared within another class<a class='hidden_link' href='#nest-1.sentence-1'>.</a></div> <div id='nest-1.sentence-2' class='sentence'>A class declared within
another is called a <span class='indexparent'><a class='index' id=':class,nested'></a></span><span class='textit'>nested class</span><a class='hidden_link' href='#nest-1.sentence-2'>.</a></div> <div id='nest-1.sentence-3' class='sentence'>The name of a nested class
is local to its enclosing class<a class='hidden_link' href='#nest-1.sentence-3'>.</a></div> <div id='nest-1.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':nested_class,scope_of'></a></span>The nested class is in the scope of its enclosing class<a class='hidden_link' href='#nest-1.sentence-4'>.</a></div> <div id='nest-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#nest-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='nest-1.sentence-5' class='sentence'>See <a href='expr.prim.id'>[expr.prim.id]</a> for restrictions on the use of non-static data
members and non-static member functions<a class='hidden_link' href='#nest-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <div id='nest-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#nest-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int x;
int y;

struct enclose {
  int x;
  static int s;

  struct inner {
    void f(int i) {
      int a = sizeof(x);        <span class='comment'>// OK: operand of sizeof is an unevaluated operand
</span>      x = i;                    <span class='comment'>// error: assign to <span class='tcode_in_codeblock'>enclose&#x200b;::&#x200b;x</span>
</span>      s = i;                    <span class='comment'>// OK: assign to <span class='tcode_in_codeblock'>enclose&#x200b;::&#x200b;s</span>
</span>      ::x = i;                  <span class='comment'>// OK: assign to global <span class='tcode_in_codeblock'>x</span>
</span>      y = i;                    <span class='comment'>// OK: assign to global <span class='tcode_in_codeblock'>y</span>
</span>    }
    void g(enclose* p, int i) {
      p-&gt;x = i;                 <span class='comment'>// OK: assign to <span class='tcode_in_codeblock'>enclose&#x200b;::&#x200b;x</span>
</span>    }
  };
};

inner* p = 0;                   <span class='comment'>// error: <span class='tcode_in_codeblock'>inner</span> not in scope
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='nest-2'><div class='marginalizedparent'><a class='marginalized' href='#nest-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3021'>#</a></div><div id='nest-2.sentence-1' class='sentence'>Member functions and static data members of a nested class can be
defined in a namespace scope enclosing the definition of their class<a class='hidden_link' href='#nest-2.sentence-1'>.</a></div> <div id='nest-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#nest-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct enclose {
  struct inner {
    static int x;
    void f(int i);
  };
};

int enclose::inner::x = 1;

void enclose::inner::f(int i) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='nest-3'><div class='marginalizedparent'><a class='marginalized' href='#nest-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3039'>#</a></div><div id='nest-3.sentence-1' class='sentence'>If class <span class='texttt'>X</span> is defined in a namespace scope, a nested class
<span class='texttt'>Y</span> may be declared in class <span class='texttt'>X</span> and later defined in the
definition of class <span class='texttt'>X</span> or be later defined in a namespace scope
enclosing the definition of class <span class='texttt'>X</span><a class='hidden_link' href='#nest-3.sentence-1'>.</a></div> <div id='nest-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#nest-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class E {
  class I1;                     <span class='comment'>// forward declaration of nested class
</span>  class I2;
  class I1 { };                 <span class='comment'>// definition of nested class
</span>};
class E::I2 { };                <span class='comment'>// definition of nested class
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='nest-4'><div class='marginalizedparent'><a class='marginalized' href='#nest-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3055'>#</a></div><div id='nest-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend_function,nested_class'></a></span>Like a member function, a friend function (<a href='#friend'>[class.friend]</a>) defined
within a nested class is in the lexical scope of that class; it obeys
the same rules for name binding as a static member function of that
class (<a href='#static'>[class.static]</a>), but it has no special access rights to
members of an enclosing class<a class='hidden_link' href='#nest-4.sentence-1'>.</a></div></div></div><div id='nested.type' class='section'><h3 ><a class='secnum' href='#nested.type' style='min-width:103pt'>10.3.11</a> Nested type names <a class='abbr_ref' href='class.nested.type'>[class.nested.type]</a></h3><span class='indexparent'><a class='index' id=':type_name,nested'></a></span><span class='indexparent'><a class='index' id=':type_name,nested,scope_of'></a></span><div class='para' id='nested.type-1'><div class='marginalizedparent'><a class='marginalized' href='#nested.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3067'>#</a></div><div id='nested.type-1.sentence-1' class='sentence'>Type names obey exactly the same scope rules as other names<a class='hidden_link' href='#nested.type-1.sentence-1'>.</a></div> <div id='nested.type-1.sentence-2' class='sentence'>In
particular, type names defined within a class definition cannot be used
outside their class without qualification<a class='hidden_link' href='#nested.type-1.sentence-2'>.</a></div> <div id='nested.type-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#nested.type-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  typedef int I;
  class Y { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  I a;
};

I b;                            <span class='comment'>// error
</span>Y c;                            <span class='comment'>// error
</span>X::Y d;                         <span class='comment'>// OK
</span>X::I e;                         <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  </div></div></div><div id='union' class='section'><h2 ><a class='secnum' href='#union' style='min-width:88pt'>10.4</a> Unions <a class='abbr_ref' href='class.union'>[class.union]</a></h2><span class='indexparent'><a class='index' id=':union'></a></span><div class='para' id='union-1'><div class='marginalizedparent'><a class='marginalized' href='#union-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3090'>#</a></div><div id='union-1.sentence-1' class='sentence'>In a union,
a non-static data member is <a class='hidden_link' href='#def:active,union_member' id='def:active,union_member'><i >active</i></a>
if its name refers to an object
whose lifetime has begun and has not ended (<a href='basic.life'>[basic.life]</a>)<a class='hidden_link' href='#union-1.sentence-1'>.</a></div> <div id='union-1.sentence-2' class='sentence'>At most one of the non-static data members of an object of union type
can be active at any
time, that is, the value of at most one of the non-static data members can be
stored in a union at any time<a class='hidden_link' href='#union-1.sentence-2'>.</a></div> <div id='union-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#union-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='union-1.sentence-3' class='sentence'>One special guarantee is made in order to
simplify the use of unions: If a standard-layout union contains several standard-layout
structs that share a common initial sequence (<a href='#mem'>[class.mem]</a>), and
if a non-static data member of an object of this standard-layout union type
is active and is one of the standard-layout structs,
it is permitted to inspect the common initial sequence
of any of the standard-layout struct members;
see <a href='#mem'>[class.mem]</a><a class='hidden_link' href='#union-1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='union-2'><div class='marginalizedparent'><a class='marginalized' href='#union-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3108'>#</a></div><div id='union-2.sentence-1' class='sentence'>The size of a union is sufficient to contain the largest
of its non-static data members<a class='hidden_link' href='#union-2.sentence-1'>.</a></div> <div id='union-2.sentence-2' class='sentence'>Each non-static data member is allocated
as if it were the sole member of a non-union class<a class='hidden_link' href='#union-2.sentence-2'>.</a></div> <div id='union-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#union-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='union-2.sentence-3' class='sentence'>A union object and its non-static data members are
pointer-interconvertible (<a href='basic.compound'>[basic.compound]</a>, <a href='expr.static.cast'>[expr.static.cast]</a>)<a class='hidden_link' href='#union-2.sentence-3'>.</a></div> <div id='union-2.sentence-4' class='sentence'>As a consequence, all non-static data members of a
union object have the same address<a class='hidden_link' href='#union-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='union-3'><div class='marginalizedparent'><a class='marginalized' href='#union-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3119'>#</a></div><div id='union-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member_function,union'></a></span><span class='indexparent'><a class='index' id=':constructor,union'></a></span><span class='indexparent'><a class='index' id=':destructor,union'></a></span>A union can have member functions (including constructors and destructors),
<span class='indexparent'><a class='index' id=':restriction,union'></a></span>but it shall not have virtual (<a href='#virtual'>[class.virtual]</a>) functions<a class='hidden_link' href='#union-3.sentence-1'>.</a></div> <div id='union-3.sentence-2' class='sentence'>A union shall not have
base classes<a class='hidden_link' href='#union-3.sentence-2'>.</a></div> <div id='union-3.sentence-3' class='sentence'>A union shall not be used as a base class<a class='hidden_link' href='#union-3.sentence-3'>.</a></div> <div id='union-3.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':restriction,union_'></a></span>If a union contains a non-static data member of
reference type the program is ill-formed<a class='hidden_link' href='#union-3.sentence-4'>.</a></div> <div id='union-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#union-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='union-3.sentence-5' class='sentence'>Absent default member initializers (<a href='#mem'>[class.mem]</a>),
if any non-static data member of a union has a non-trivial
default constructor (<a href='#default.ctor'>[class.default.ctor]</a>),
copy constructor, move constructor (<a href='#copy.ctor'>[class.copy.ctor]</a>),
copy assignment operator, move assignment operator (<a href='#copy.assign'>[class.copy.assign]</a>),
or destructor (<a href='#dtor'>[class.dtor]</a>), the corresponding member function
of the union must be user-provided or it will
be implicitly deleted (<a href='dcl.fct.def.delete'>[dcl.fct.def.delete]</a>) for the union<a class='hidden_link' href='#union-3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='union-4'><div class='marginalizedparent'><a class='marginalized' href='#union-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3139'>#</a></div><div id='union-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#union-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='union-4.sentence-1' class='sentence'>Consider the following union:</div><pre class='codeblock'>
union U {
  int i;
  float f;
  std::string s;
};</pre><div id='union-4.sentence-2' class='sentence'>Since <span class='texttt'>std&#x200b;::&#x200b;string</span> (<a href='string.classes'>[string.classes]</a>) declares non-trivial versions of all of the special
member functions, <span class='texttt'>U</span> will have an implicitly deleted default constructor,
copy/move constructor,
copy/move assignment operator, and destructor<a class='hidden_link' href='#union-4.sentence-2'>.</a></div> <div id='union-4.sentence-3' class='sentence'>To use <span class='texttt'>U</span>, some or all of these member functions
must be user-provided<a class='hidden_link' href='#union-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='union-5'><div class='marginalizedparent'><a class='marginalized' href='#union-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3157'>#</a></div><div id='union-5.sentence-1' class='sentence'>When the left operand of an assignment operator
involves a member access expression (<a href='expr.ref'>[expr.ref]</a>)
that nominates a union member,
it may begin the lifetime of that union member,
as described below<a class='hidden_link' href='#union-5.sentence-1'>.</a></div> <div id='union-5.sentence-2' class='sentence'>For an expression <span class='texttt'>E</span>,
define the set <span class='math'><span class='mathalpha'>S</span>(<span class='mathtt'>E</span>)</span>
of subexpressions of <span class='texttt'>E</span>
as follows:
<ul class='itemize'><li id='union-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#union-5.1'>(5.1)</a></div><div id='union-5.1.sentence-1' class='sentence'>If <span class='texttt'>E</span> is of the form <span class='texttt'>A.B</span>,
<span class='math'><span class='mathalpha'>S</span>(<span class='mathtt'>E</span>)</span> contains the elements of <span class='math'><span class='mathalpha'>S</span>(<span class='mathtt'>A</span>)</span>,
and also contains <span class='texttt'>A.B</span>
if <span class='texttt'>B</span> names a union member of a non-class, non-array type,
or of a class type with a trivial default constructor that is not deleted,
or an array of such types<a class='hidden_link' href='#union-5.1.sentence-1'>.</a></div></li><li id='union-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#union-5.2'>(5.2)</a></div><div id='union-5.2.sentence-1' class='sentence'>If <span class='texttt'>E</span> is of the form <span class='texttt'>A[B]</span>
and is interpreted as a built-in array subscripting operator,
<span class='math'><span class='mathalpha'>S</span>(<span class='mathtt'>E</span>)</span> is <span class='math'><span class='mathalpha'>S</span>(<span class='mathtt'>A</span>)</span> if <span class='texttt'>A</span> is of array type,
<span class='math'><span class='mathalpha'>S</span>(<span class='mathtt'>B</span>)</span> if <span class='texttt'>B</span> is of array type,
and empty otherwise<a class='hidden_link' href='#union-5.2.sentence-1'>.</a></div></li><li id='union-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#union-5.3'>(5.3)</a></div><div id='union-5.3.sentence-1' class='sentence'>Otherwise, <span class='math'><span class='mathalpha'>S</span>(<span class='mathtt'>E</span>)</span> is empty<a class='hidden_link' href='#union-5.3.sentence-1'>.</a></div></li></ul></div> <div id='union-5.sentence-3' class='sentence'>
In an assignment expression of the form <span class='texttt'>E1 = E2</span>
that uses either the built-in assignment operator (<a href='expr.ass'>[expr.ass]</a>)
or a trivial assignment operator (<a href='#copy.assign'>[class.copy.assign]</a>),
for each element <span class='texttt'>X</span> of <span class='math'><span class='mathalpha'>S</span>(</span><span class='texttt'>E1</span><span class='math'>)</span>,
if modification of <span class='texttt'>X</span> would have undefined behavior under <a href='basic.life'>[basic.life]</a>,
an object of the type of <span class='texttt'>X</span> is implicitly created
in the nominated storage;
no initialization is performed and
the beginning of its lifetime is sequenced after
the value computation of the left and right operands
and before the assignment<a class='hidden_link' href='#union-5.sentence-3'>.</a></div> <div id='union-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#union-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='union-5.sentence-4' class='sentence'>This ends the lifetime of the previously-active
member of the union, if any (<a href='basic.life'>[basic.life]</a>)<a class='hidden_link' href='#union-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='union-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#union-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
union A { int x; int y[4]; };
struct B { A a; };
union C { B b; int k; };
int f() {
  C c;                  <span class='comment'>// does not start lifetime of any union member
</span>  c.b.a.y[3] = 4;       <span class='comment'>// OK: <span class='math'><span class='mathalpha'>S</span>(</span><span class='tcode_in_codeblock'>c.b.a.y[3]</span><span class='math'>)</span> contains <span class='tcode_in_codeblock'>c.b</span> and <span class='tcode_in_codeblock'>c.b.a.y</span>;
</span>                        <span class='comment'>// creates objects to hold union members <span class='tcode_in_codeblock'>c.b</span> and <span class='tcode_in_codeblock'>c.b.a.y</span>
</span>  return c.b.a.y[3];    <span class='comment'>// OK: <span class='tcode_in_codeblock'>c.b.a.y</span> refers to newly created object (see <a href='basic.life'>[basic.life]</a>)
</span>}

struct X { const int a; int b; };
union Y { X x; int k; };
void g() {
  Y y = { { 1, 2 } };   <span class='comment'>// OK, <span class='tcode_in_codeblock'>y.x</span> is active union member (<a href='#mem'>[class.mem]</a>)
</span>  int n = y.x.a;
  y.k = 4;              <span class='comment'>// OK: ends lifetime of <span class='tcode_in_codeblock'>y.x</span>, <span class='tcode_in_codeblock'>y.k</span> is active member of union
</span>  y.x.b = n;            <span class='comment'>// undefined behavior: <span class='tcode_in_codeblock'>y.x.b</span> modified outside its lifetime,
</span>                        <span class='comment'>// <span class='math'><span class='mathalpha'>S</span>(</span><span class='tcode_in_codeblock'>y.x.b</span><span class='math'>)</span> is empty because <span class='tcode_in_codeblock'>X</span>'s default constructor is deleted,
</span>                        <span class='comment'>// so union member <span class='tcode_in_codeblock'>y.x</span>'s lifetime does not implicitly start
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='union-6'><div class='marginalizedparent'><a class='marginalized' href='#union-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3224'>#</a></div><div id='union-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#union-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='union-6.sentence-1' class='sentence'>In general, one must use explicit destructor calls and placement
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i> to change the active member of a union<a class='hidden_link' href='#union-6.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='union-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#union-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='union-6.sentence-2' class='sentence'>Consider an object <span class='texttt'>u</span> of a <span class='texttt'>union</span> type <span class='texttt'>U</span> having non-static data members
<span class='texttt'>m</span> of type <span class='texttt'>M</span> and <span class='texttt'>n</span> of type <span class='texttt'>N</span><a class='hidden_link' href='#union-6.sentence-2'>.</a></div> <div id='union-6.sentence-3' class='sentence'>If <span class='texttt'>M</span> has a non-trivial
destructor and <span class='texttt'>N</span> has a non-trivial constructor (for instance, if they declare or inherit
virtual functions), the active member of <span class='texttt'>u</span> can be safely switched from <span class='texttt'>m</span> to
<span class='texttt'>n</span> using the destructor and placement <i ><a href='expr.new#nt:new-expression'>new-expression</a></i> as follows:</div><pre class='codeblock'>
u.m.~M();
new (&amp;u.n) N;</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='union.anon' class='section'><h3 ><a class='secnum' href='#union.anon' style='min-width:103pt'>10.4.1</a> Anonymous unions <a class='abbr_ref' href='class.union.anon'>[class.union.anon]</a></h3><span class='indexparent'><a class='index' id=':union,anonymous'></a></span><div class='para' id='union.anon-1'><div class='marginalizedparent'><a class='marginalized' href='#union.anon-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3243'>#</a></div><div id='union.anon-1.sentence-1' class='sentence'>A union of the form</div><pre class='ncsimplebnf'><span class='terminal'>union</span> <span class='terminal'>{</span> <i ><a href='class.mem#nt:member-specification'>member-specification</a></i> <span class='terminal'>}</span> <span class='terminal'>;</span>
</pre><div id='union.anon-1.sentence-2' class='sentence'>is called an <a class='hidden_link' href='#def:anonymous_union' id='def:anonymous_union'><i >anonymous union</i></a>; it defines an unnamed type and
an unnamed object of that type called an <a class='hidden_link' href='#def:anonymous_union_object' id='def:anonymous_union_object'><i >anonymous union object</i></a><a class='hidden_link' href='#union.anon-1.sentence-2'>.</a></div> <div id='union.anon-1.sentence-3' class='sentence'>Each <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i> in the <i ><a href='class.mem#nt:member-specification'>member-specification</a></i>
of an anonymous union shall either define a non-static data member or be a
<i ><a href='dcl.dcl#nt:static_assert-declaration'>static_assert-declaration</a></i><a class='hidden_link' href='#union.anon-1.sentence-3'>.</a></div> <div id='union.anon-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#union.anon-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='union.anon-1.sentence-6' class='sentence'>Nested types, anonymous unions, and functions cannot be declared within an anonymous
union<a class='hidden_link' href='#union.anon-1.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='union.anon-1.sentence-4' class='sentence'>
The names of the members of an anonymous union shall be distinct from
the names of any other entity in the scope in which the anonymous union
is declared<a class='hidden_link' href='#union.anon-1.sentence-4'>.</a></div> <div id='union.anon-1.sentence-5' class='sentence'>For the purpose of name lookup, after the anonymous union
definition, the members of the anonymous union are considered to have
been defined in the scope in which the anonymous union is declared<a class='hidden_link' href='#union.anon-1.sentence-5'>.</a></div> <span class='indexparent'><a class='index' id=':initialization,union'></a></span><div id='union.anon-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#union.anon-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
void f() {
  union { int a; const char* p; };
  a = 1;
  p = "Jennifer";
}</pre><div id='union.anon-1.sentence-7' class='sentence'>Here <span class='texttt'>a</span> and <span class='texttt'>p</span> are used like ordinary (non-member)
variables, but since they are union members they have the same address<a class='hidden_link' href='#union.anon-1.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='union.anon-2'><div class='marginalizedparent'><a class='marginalized' href='#union.anon-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3279'>#</a></div><div id='union.anon-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':union,global_anonymous'></a></span><span class='indexparent'><a class='index' id=':scope,anonymous_union_at_namespace'></a></span>Anonymous unions declared in a named namespace or in the global
namespace shall be declared <span class='texttt'>static</span><a class='hidden_link' href='#union.anon-2.sentence-1'>.</a></div> <div id='union.anon-2.sentence-2' class='sentence'>Anonymous unions declared at
block scope shall be declared with any storage class allowed for a
block-scope variable, or with no storage class<a class='hidden_link' href='#union.anon-2.sentence-2'>.</a></div> <div id='union.anon-2.sentence-3' class='sentence'>A storage class is not
allowed in a declaration of an anonymous union in a class scope<a class='hidden_link' href='#union.anon-2.sentence-3'>.</a></div> <div id='union.anon-2.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':access_control,anonymous_union'></a></span><span class='indexparent'><a class='index' id=':restriction,anonymous_union'></a></span>An anonymous union shall not have private or protected
members (<a href='#access'>[class.access]</a>)<a class='hidden_link' href='#union.anon-2.sentence-4'>.</a></div> <div id='union.anon-2.sentence-5' class='sentence'>An anonymous union shall not have
member functions<a class='hidden_link' href='#union.anon-2.sentence-5'>.</a></div></div><div class='para' id='union.anon-3'><div class='marginalizedparent'><a class='marginalized' href='#union.anon-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3293'>#</a></div><div id='union.anon-3.sentence-1' class='sentence'>A union for which objects, pointers, or references are declared is not an anonymous union<a class='hidden_link' href='#union.anon-3.sentence-1'>.</a></div> <div id='union.anon-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#union.anon-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
void f() {
  union { int aa; char* p; } obj, *ptr = &amp;obj;
  aa = 1;           <span class='comment'>// error
</span>  ptr-&gt;aa = 1;      <span class='comment'>// OK
</span>}</pre><div id='union.anon-3.sentence-2' class='sentence'>The assignment to plain <span class='texttt'>aa</span> is ill-formed since the member name
is not visible outside the union, and even if it were visible, it is not
associated with any particular object<a class='hidden_link' href='#union.anon-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='union.anon-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#union.anon-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='union.anon-3.sentence-3' class='sentence'>Initialization of unions with no user-declared constructors is described
in <a href='dcl.init.aggr'>[dcl.init.aggr]</a><a class='hidden_link' href='#union.anon-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='union.anon-4'><div class='marginalizedparent'><a class='marginalized' href='#union.anon-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3314'>#</a></div><div id='union.anon-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':class,union-like'></a></span><span class='indexparent'><a class='index' id=':class,variant_member_of'></a></span>A <a class='hidden_link' href='#def:union-like_class' id='def:union-like_class'><i >union-like class</i></a> is a union or a class that has an anonymous union as a direct
member<a class='hidden_link' href='#union.anon-4.sentence-1'>.</a></div> <div id='union.anon-4.sentence-2' class='sentence'>A union-like class <span class='texttt'>X</span> has a set of <a class='hidden_link' href='#def:variant_member' id='def:variant_member'><i >variant members</i></a><a class='hidden_link' href='#union.anon-4.sentence-2'>.</a></div> <div id='union.anon-4.sentence-3' class='sentence'>If <span class='texttt'>X</span> is a union, a non-static data member of <span class='texttt'>X</span> that is not an anonymous
union is a variant member of <span class='texttt'>X</span><a class='hidden_link' href='#union.anon-4.sentence-3'>.</a></div> <div id='union.anon-4.sentence-4' class='sentence'>In addition, a non-static data member of an
anonymous union that is a member of <span class='texttt'>X</span> is also a variant member of <span class='texttt'>X</span><a class='hidden_link' href='#union.anon-4.sentence-4'>.</a></div> <div id='union.anon-4.sentence-5' class='sentence'>At most one variant member of a union may have a default member initializer<a class='hidden_link' href='#union.anon-4.sentence-5'>.</a></div> <div id='union.anon-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#union.anon-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
union U {
  int x = 0;
  union {
    int k;
  };
  union {
    int z;
    int y = 1;      <span class='comment'>// error: initialization for second variant member of <span class='tcode_in_codeblock'>U</span>
</span>  };
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='local' class='section'><h2 ><a class='secnum' href='#local' style='min-width:88pt'>10.5</a> Local class declarations <a class='abbr_ref' href='class.local'>[class.local]</a></h2><span class='indexparent'><a class='index' id=':declaration,local_class'></a></span><span class='indexparent'><a class='index' id=':definition,local_class'></a></span><div class='para' id='local-1'><div class='marginalizedparent'><a class='marginalized' href='#local-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3343'>#</a></div><div id='local-1.sentence-1' class='sentence'>A class can be declared within a function definition; such a class is
called a <span class='indexparent'><a class='index' id=':class,local'></a></span><span class='textit'>local class</span><a class='hidden_link' href='#local-1.sentence-1'>.</a></div> <div id='local-1.sentence-2' class='sentence'>The name of a local class is local to
its enclosing scope<a class='hidden_link' href='#local-1.sentence-2'>.</a></div> <div id='local-1.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':local_class,scope_of'></a></span>The local class is in the scope of the enclosing scope, and has the same
access to names outside the function as does the enclosing function<a class='hidden_link' href='#local-1.sentence-3'>.</a></div> <div id='local-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#local-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='local-1.sentence-4' class='sentence'>A declaration in a local class
cannot odr-use (<a href='basic.def.odr'>[basic.def.odr]</a>)
a local entity
from an
enclosing scope<a class='hidden_link' href='#local-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='local-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#local-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int x;
void f() {
  static int s;
  int x;
  const int N = 5;
  extern int q();
  int arr[2];
  auto [y, z] = arr;

  struct local {
    int g() { return x; }       <span class='comment'>// error: odr-use of non-odr-usable variable <span class='tcode_in_codeblock'>x</span>
</span>    int h() { return s; }       <span class='comment'>// OK
</span>    int k() { return ::x; }     <span class='comment'>// OK
</span>    int l() { return q(); }     <span class='comment'>// OK
</span>    int m() { return N; }       <span class='comment'>// OK: not an odr-use
</span>    int* n() { return &amp;N; }     <span class='comment'>// error: odr-use of non-odr-usable variable <span class='tcode_in_codeblock'>N</span>
</span>    int p() { return y; }       <span class='comment'>// error: odr-use of non-odr-usable structured binding <span class='tcode_in_codeblock'>y</span>
</span>  };
}

local* p = 0;                   <span class='comment'>// error: <span class='tcode_in_codeblock'>local</span> not in scope
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='local-2'><div class='marginalizedparent'><a class='marginalized' href='#local-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3383'>#</a></div><div id='local-2.sentence-1' class='sentence'>An enclosing function has no special access to members of the local
class; it obeys the usual access rules (<a href='#access'>[class.access]</a>)<a class='hidden_link' href='#local-2.sentence-1'>.</a></div> <div id='local-2.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':member_function,local_class'></a></span>Member functions of a local class shall be defined within their class
definition, if they are defined at all<a class='hidden_link' href='#local-2.sentence-2'>.</a></div></div><div class='para' id='local-3'><div class='marginalizedparent'><a class='marginalized' href='#local-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3390'>#</a></div><div id='local-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':nested_class,local_class'></a></span>If class <span class='texttt'>X</span> is a local class a nested class <span class='texttt'>Y</span> may be
declared in class <span class='texttt'>X</span> and later defined in the definition of class
<span class='texttt'>X</span> or be later defined in the same scope as the definition of
class <span class='texttt'>X</span><a class='hidden_link' href='#local-3.sentence-1'>.</a></div> <div id='local-3.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':restriction,local_class'></a></span>A class nested within
a local class is a local class<a class='hidden_link' href='#local-3.sentence-2'>.</a></div></div><div class='para' id='local-4'><div class='marginalizedparent'><a class='marginalized' href='#local-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3400'>#</a></div><div id='local-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':restriction,static_member_local_class'></a></span>A local class shall not have static data members<a class='hidden_link' href='#local-4.sentence-1'>.</a></div></div></div><div id='derived' class='section'><h2 ><a class='secnum' href='#derived' style='min-width:88pt'>10.6</a> Derived classes <a class='abbr_ref' href='class.derived'>[class.derived]</a></h2><span class='indexparent'><a class='index' id=':derived_class'></a></span>

<div class='para' id='derived-1'><div class='marginalizedparent'><a class='marginalized' href='#derived-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3411'>#</a></div><div id='derived-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':base_class'></a></span><span class='indexparent'><a class='index' id=':inheritance'></a></span><span class='indexparent'><a class='index' id=':multiple_inheritance'></a></span>A list of base classes can be specified in a class definition using
the notation:</div><pre class='bnf'><a class='nontermdef' href='#nt:base-clause' id='nt:base-clause'>base-clause:</a>
&#9;<span class='terminal'>:</span> <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:base-specifier-list' id='nt:base-specifier-list'>base-specifier-list:</a>
&#9;<i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i> <span class='terminal'>,</span> <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:base-specifier' id='nt:base-specifier'>base-specifier:</a>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>virtual</span> <i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i> <span class='terminal'>virtual</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:class-or-decltype' id='nt:class-or-decltype'>class-or-decltype:</a>
&#9;<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class#nt:class-name'>class-name</a></i>
&#9;<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> <span class='terminal'>template</span> <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
&#9;<i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:access-specifier' id='nt:access-specifier'>access-specifier:</a>
&#9;<span class='terminal'>private</span>
&#9;<span class='terminal'>protected</span>
&#9;<span class='terminal'>public</span>
</pre><div id='derived-1.sentence-2' class='sentence'>The optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> appertains to the <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i><a class='hidden_link' href='#derived-1.sentence-2'>.</a></div></div><div class='para' id='derived-2'><div class='marginalizedparent'><a class='marginalized' href='#derived-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3455'>#</a></div><div id='derived-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':type,incomplete'></a></span>A <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> shall denote
a class type that is not
an incompletely defined class (<a href='#class'>[class]</a>)<a class='hidden_link' href='#derived-2.sentence-1'>.</a></div> <div id='derived-2.sentence-2' class='sentence'>The class denoted by the <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> of
a <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> is called a
<span class='indexparent'><a class='index' id=':base_class,direct'></a></span><span class='textit'>direct base class</span>
for the class being defined<a class='hidden_link' href='#derived-2.sentence-2'>.</a></div> <div id='derived-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':base_class_'></a></span>During the lookup for a base class name, non-type names are
ignored (<a href='basic.scope.hiding'>[basic.scope.hiding]</a>)<a class='hidden_link' href='#derived-2.sentence-3'>.</a></div> <div id='derived-2.sentence-4' class='sentence'>If the name found is not a
<i ><a href='class#nt:class-name'>class-name</a></i>, the program is ill-formed<a class='hidden_link' href='#derived-2.sentence-4'>.</a></div> <div id='derived-2.sentence-5' class='sentence'>A class <span class='texttt'>B</span> is a
base class of a class <span class='texttt'>D</span> if it is a direct base class of
<span class='texttt'>D</span> or a direct base class of one of <span class='texttt'>D</span>'s base classes<a class='hidden_link' href='#derived-2.sentence-5'>.</a></div> <div id='derived-2.sentence-6' class='sentence'>A class is an <span class='indexparent'><a class='index' id=':base_class,indirect'></a></span><span class='textit'>indirect base class</span> of another if it is a base
class but not a direct base class<a class='hidden_link' href='#derived-2.sentence-6'>.</a></div> <div id='derived-2.sentence-7' class='sentence'>A class is said to be (directly or
indirectly) <a class='hidden_link' href='#def:derived' id='def:derived'><i>derived</i></a> from its (direct or indirect) base
classes<a class='hidden_link' href='#derived-2.sentence-7'>.</a></div> <div id='derived-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#derived-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='derived-2.sentence-12' class='sentence'>See <a href='#access'>[class.access]</a> for the meaning of
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i><a class='hidden_link' href='#derived-2.sentence-12'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='derived-2.sentence-8' class='sentence'><span class='indexparent'><a class='index' id=':access_control,base_class_member'></a></span>Unless redeclared in the derived class, members of a base class are also
considered to be members of the derived class<a class='hidden_link' href='#derived-2.sentence-8'>.</a></div> <div id='derived-2.sentence-9' class='sentence'>Members of a base class other than constructors are said to be
<a class='hidden_link' href='#def:inheritance_' id='def:inheritance_'><i >inherited</i></a>
by the derived class<a class='hidden_link' href='#derived-2.sentence-9'>.</a></div> <div id='derived-2.sentence-10' class='sentence'>Constructors of a base class
can also be inherited as described in <a href='namespace.udecl'>[namespace.udecl]</a><a class='hidden_link' href='#derived-2.sentence-10'>.</a></div> <div id='derived-2.sentence-11' class='sentence'>Inherited members can be referred to in
expressions in the same manner as other members of the derived class,
unless their names are hidden or ambiguous (<a href='#member.lookup'>[class.member.lookup]</a>)<a class='hidden_link' href='#derived-2.sentence-11'>.</a></div> <span class='indexparent'><a class='index' id=':operator,scope_resolution_'></a></span><div id='derived-2.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#derived-2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='derived-2.sentence-13' class='sentence'>The scope resolution operator <span class='texttt'>&#x200b;::&#x200b;</span> (<a href='expr.prim.id.qual'>[expr.prim.id.qual]</a>) can be used
to refer to a direct or indirect base member explicitly<a class='hidden_link' href='#derived-2.sentence-13'>.</a></div> <div id='derived-2.sentence-14' class='sentence'>This allows
access to a name that has been redeclared in the derived class<a class='hidden_link' href='#derived-2.sentence-14'>.</a></div> <div id='derived-2.sentence-15' class='sentence'>A
derived class can itself serve as a base class subject to access
control; see <a href='#access.base'>[class.access.base]</a><a class='hidden_link' href='#derived-2.sentence-15'>.</a></div> <div id='derived-2.sentence-16' class='sentence'>A pointer to a derived class can be
implicitly converted to a pointer to an accessible unambiguous base
class (<a href='conv.ptr'>[conv.ptr]</a>)<a class='hidden_link' href='#derived-2.sentence-16'>.</a></div> <div id='derived-2.sentence-17' class='sentence'>An lvalue of a derived class type can be bound
to a reference to an accessible unambiguous base
class (<a href='dcl.init.ref'>[dcl.init.ref]</a>)<a class='hidden_link' href='#derived-2.sentence-17'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='derived-3'><div class='marginalizedparent'><a class='marginalized' href='#derived-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3502'>#</a></div><div id='derived-3.sentence-1' class='sentence'>The <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i> specifies the type of the
<a class='hidden_link' href='#def:base_class_subobjects' id='def:base_class_subobjects'><i>base class subobjects</i></a> contained in an
object of the derived class type<a class='hidden_link' href='#derived-3.sentence-1'>.</a></div> <div id='derived-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#derived-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct Base {
  int a, b, c;
};</pre><pre class='codeblock'>
struct Derived : Base {
  int b;
};</pre><pre class='codeblock'>
struct Derived2 : Derived {
  int c;
};</pre><div id='derived-3.sentence-2' class='sentence'>Here, an object of class <span class='texttt'>Derived2</span> will have a subobject of class
<span class='texttt'>Derived</span> which in turn will have a subobject of class
<span class='texttt'>Base</span><a class='hidden_link' href='#derived-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='derived-4'><div class='marginalizedparent'><a class='marginalized' href='#derived-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3530'>#</a></div><div id='derived-4.sentence-1' class='sentence'>A <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> followed by an ellipsis is a pack
expansion (<a href='temp.variadic'>[temp.variadic]</a>)<a class='hidden_link' href='#derived-4.sentence-1'>.</a></div></div><div class='para' id='derived-5'><div class='marginalizedparent'><a class='marginalized' href='#derived-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3534'>#</a></div><div id='derived-5.sentence-1' class='sentence'>The order in which the base class subobjects are allocated in the most
derived object (<a href='intro.object'>[intro.object]</a>) is unspecified<a class='hidden_link' href='#derived-5.sentence-1'>.</a></div> <div id='derived-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#derived-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='derived-5.sentence-2' class='sentence'>A derived class and its base class subobjects can be represented by a
directed acyclic graph (DAG) where an arrow means “directly derived
from”<a class='hidden_link' href='#derived-5.sentence-2'>.</a></div> <div id='derived-5.sentence-3' class='sentence'>An arrow need not have a physical representation in memory<a class='hidden_link' href='#derived-5.sentence-3'>.</a></div> <div id='derived-5.sentence-4' class='sentence'>A DAG of subobjects is often referred to as a “subobject lattice”<a class='hidden_link' href='#derived-5.sentence-4'>.</a></div><div class='figure' id='fig:dag'><svg width="114pt" height="182pt"
 viewBox="0.00 0.00 114.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>dag</title>
<!-- Base -->
<g class="node">
<title>Base</title>
<text text-anchor="middle" x="53" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">Base</text>
</g>
<!-- Derived1 -->
<g class="node">
<title>Derived1</title>
<text text-anchor="middle" x="53" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">Derived1</text>
</g>
<!-- Derived1&#45;&gt;Base -->
<g class="edge">
<title>Derived1&#45;&gt;Base</title>
<path fill="none" stroke="#000000" d="M53,-104.3034C53,-112.0173 53,-121.2875 53,-129.8876"/>
<polygon fill="#000000" stroke="#000000" points="49.5001,-129.8956 53,-139.8957 56.5001,-129.8957 49.5001,-129.8956"/>
</g>
<!-- Derived2 -->
<g class="node">
<title>Derived2</title>
<text text-anchor="middle" x="53" y="-10.8" font-family="Times,serif" font-size="24.00" fill="#000000">Derived2</text>
</g>
<!-- Derived2&#45;&gt;Derived1 -->
<g class="edge">
<title>Derived2&#45;&gt;Derived1</title>
<path fill="none" stroke="#000000" d="M53,-34.3034C53,-42.0173 53,-51.2875 53,-59.8876"/>
<polygon fill="#000000" stroke="#000000" points="49.5001,-59.8956 53,-69.8957 56.5001,-59.8957 49.5001,-59.8956"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:dag'>2</a> — Directed acyclic graph</div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='derived-6'><div class='marginalizedparent'><a class='marginalized' href='#derived-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3552'>#</a></div><div id='derived-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#derived-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='derived-6.sentence-1' class='sentence'>Initialization of objects representing base classes can be specified in
constructors; see <a href='#base.init'>[class.base.init]</a><a class='hidden_link' href='#derived-6.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='derived-7'><div class='marginalizedparent'><a class='marginalized' href='#derived-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3558'>#</a></div><div id='derived-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#derived-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='derived-7.sentence-1' class='sentence'>A base class subobject might have a layout (<a href='basic.stc'>[basic.stc]</a>) different
from the layout of a most derived object of the same type<a class='hidden_link' href='#derived-7.sentence-1'>.</a></div> <div id='derived-7.sentence-2' class='sentence'>A base class
subobject might have a polymorphic behavior (<a href='#cdtor'>[class.cdtor]</a>)
different from the polymorphic behavior of a most derived object of the
same type<a class='hidden_link' href='#derived-7.sentence-2'>.</a></div> <div id='derived-7.sentence-3' class='sentence'>A base class subobject may be of zero size (<a href='#class'>[class]</a>);
however, two subobjects that have the same class type and that belong to
the same most derived object must not be allocated at the same
address (<a href='expr.eq'>[expr.eq]</a>)<a class='hidden_link' href='#derived-7.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='mi' class='section'><h3 ><a class='secnum' href='#mi' style='min-width:103pt'>10.6.1</a> Multiple base classes <a class='abbr_ref' href='class.mi'>[class.mi]</a></h3><span class='indexparent'><a class='index' id=':multiple_inheritance_'></a></span><span class='indexparent'><a class='index' id=':base_class__'></a></span><div class='para' id='mi-1'><div class='marginalizedparent'><a class='marginalized' href='#mi-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3574'>#</a></div><div id='mi-1.sentence-1' class='sentence'>A class can be derived from any number of base classes<a class='hidden_link' href='#mi-1.sentence-1'>.</a></div> <div id='mi-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mi-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mi-1.sentence-2' class='sentence'>The use of more than one direct base class is often called multiple inheritance<a class='hidden_link' href='#mi-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='mi-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mi-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D : public A, public B, public C { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mi-2'><div class='marginalizedparent'><a class='marginalized' href='#mi-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3588'>#</a></div><span class='indexparent'><a class='index' id=':layout,class_object_'></a></span><span class='indexparent'><a class='index' id=':initialization,order_of'></a></span><div id='mi-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mi-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mi-2.sentence-1' class='sentence'>The order of derivation is not significant except as specified by the
semantics of initialization by constructor (<a href='#base.init'>[class.base.init]</a>),
cleanup (<a href='#dtor'>[class.dtor]</a>), and storage
layout (<a href='#mem'>[class.mem]</a>, <a href='#access.spec'>[class.access.spec]</a>)<a class='hidden_link' href='#mi-2.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mi-3'><div class='marginalizedparent'><a class='marginalized' href='#mi-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3598'>#</a></div><div id='mi-3.sentence-1' class='sentence'>A class shall not be specified as a direct base class of a derived class
more than once<a class='hidden_link' href='#mi-3.sentence-1'>.</a></div> <div id='mi-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mi-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mi-3.sentence-2' class='sentence'>A class can be an indirect base class more than once and can be a direct
and an indirect base class<a class='hidden_link' href='#mi-3.sentence-2'>.</a></div> <div id='mi-3.sentence-3' class='sentence'>There are limited things that can be done
with such a class<a class='hidden_link' href='#mi-3.sentence-3'>.</a></div> <div id='mi-3.sentence-4' class='sentence'>The non-static data members and member functions of
the direct base class cannot be referred to in the scope of the derived
class<a class='hidden_link' href='#mi-3.sentence-4'>.</a></div> <div id='mi-3.sentence-5' class='sentence'>However, the static members, enumerations and types can be
unambiguously referred to<a class='hidden_link' href='#mi-3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='mi-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#mi-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Y : public X, public X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };             <span class='comment'>// ill-formed
</span></pre> <pre class='codeblock'>
class L { public: int next;  <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class A : public L { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B : public L { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C : public A, public B { void f(); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };   <span class='comment'>// well-formed
</span>class D : public A, public L { void f(); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };   <span class='comment'>// well-formed
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mi-4'><div class='marginalizedparent'><a class='marginalized' href='#mi-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3624'>#</a></div><div id='mi-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':base_class,virtual'></a></span>A base class specifier that does not contain the keyword
<span class='texttt'>virtual</span> specifies a <span class='indexparent'><a class='index' id=':base_class,non-virtual'></a></span><span class='textit'>non-virtual base class</span><a class='hidden_link' href='#mi-4.sentence-1'>.</a></div> <div id='mi-4.sentence-2' class='sentence'>A base
class specifier that contains the keyword <span class='texttt'>virtual</span> specifies a
<span class='indexparent'><a class='index' id=':base_class,virtual_'></a></span><span class='textit'>virtual base class</span><a class='hidden_link' href='#mi-4.sentence-2'>.</a></div> <div id='mi-4.sentence-3' class='sentence'>For each distinct occurrence of a
non-virtual base class in the class lattice of the most derived class,
the most derived object (<a href='intro.object'>[intro.object]</a>) shall contain a
corresponding distinct base class subobject of that type<a class='hidden_link' href='#mi-4.sentence-3'>.</a></div> <div id='mi-4.sentence-4' class='sentence'>For each
distinct base class that is specified virtual, the most derived object
shall contain a single base class subobject of that type<a class='hidden_link' href='#mi-4.sentence-4'>.</a></div></div><div class='para' id='mi-5'><div class='marginalizedparent'><a class='marginalized' href='#mi-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3636'>#</a></div><div id='mi-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mi-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mi-5.sentence-1' class='sentence'>For an object of class type <span class='texttt'>C</span>, each distinct occurrence of a
(non-virtual) base class <span class='texttt'>L</span> in the class lattice of <span class='texttt'>C</span>
corresponds one-to-one with a distinct <span class='texttt'>L</span> subobject within the
object of type <span class='texttt'>C</span><a class='hidden_link' href='#mi-5.sentence-1'>.</a></div> <div id='mi-5.sentence-2' class='sentence'>Given the class <span class='texttt'>C</span> defined above, an
object of class <span class='texttt'>C</span> will have two subobjects of class <span class='texttt'>L</span> as
shown in Figure <a href='#fig:nonvirt'>[fig:nonvirt]</a><a class='hidden_link' href='#mi-5.sentence-2'>.</a></div><div class='figure' id='fig:nonvirt'><svg width="224pt" height="182pt"
 viewBox="0.00 0.00 224.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>nonvirt</title>
<!-- L1 -->
<g class="node">
<title>L1</title>
<text text-anchor="middle" x="27" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">L</text>
</g>
<!-- L2 -->
<g class="node">
<title>L2</title>
<text text-anchor="middle" x="189" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">L</text>
</g>
<!-- A -->
<g class="node">
<title>A</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">A</text>
</g>
<!-- A&#45;&gt;L1 -->
<g class="edge">
<title>A&#45;&gt;L1</title>
<path fill="none" stroke="#000000" d="M27,-104.3034C27,-112.0173 27,-121.2875 27,-129.8876"/>
<polygon fill="#000000" stroke="#000000" points="23.5001,-129.8956 27,-139.8957 30.5001,-129.8957 23.5001,-129.8956"/>
</g>
<!-- B -->
<g class="node">
<title>B</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">B</text>
</g>
<!-- B&#45;&gt;L2 -->
<g class="edge">
<title>B&#45;&gt;L2</title>
<path fill="none" stroke="#000000" d="M189,-104.3034C189,-112.0173 189,-121.2875 189,-129.8876"/>
<polygon fill="#000000" stroke="#000000" points="185.5001,-129.8956 189,-139.8957 192.5001,-129.8957 185.5001,-129.8956"/>
</g>
<!-- C -->
<g class="node">
<title>C</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00" fill="#000000">C</text>
</g>
<!-- C&#45;&gt;A -->
<g class="edge">
<title>C&#45;&gt;A</title>
<path fill="none" stroke="#000000" d="M87.9775,-34.3034C77.8744,-43.0345 65.464,-53.7595 54.4825,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="52.0698,-60.7088 46.7922,-69.8957 56.6468,-66.0052 52.0698,-60.7088"/>
</g>
<!-- C&#45;&gt;B -->
<g class="edge">
<title>C&#45;&gt;B</title>
<path fill="none" stroke="#000000" d="M128.0225,-34.3034C138.1256,-43.0345 150.536,-53.7595 161.5175,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="159.3532,-66.0052 169.2078,-69.8957 163.9302,-60.7088 159.3532,-66.0052"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:nonvirt'>3</a> — Non-virtual base</div><div id='mi-5.sentence-3' class='sentence'>In such lattices, explicit qualification can be used to specify which
subobject is meant<a class='hidden_link' href='#mi-5.sentence-3'>.</a></div> <div id='mi-5.sentence-4' class='sentence'>The body of function <span class='texttt'>C&#x200b;::&#x200b;f</span> could refer to the
member <span class='texttt'>next</span> of each <span class='texttt'>L</span> subobject:
<pre class='codeblock'>
void C::f() { A::next = B::next; }      <span class='comment'>// well-formed
</span></pre>
Without the <span class='texttt'>A&#x200b;::&#x200b;</span> or <span class='texttt'>B&#x200b;::&#x200b;</span> qualifiers, the definition of
<span class='texttt'>C&#x200b;::&#x200b;f</span> above would be ill-formed because of
ambiguity (<a href='#member.lookup'>[class.member.lookup]</a>)<a class='hidden_link' href='#mi-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mi-6'><div class='marginalizedparent'><a class='marginalized' href='#mi-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3662'>#</a></div><div id='mi-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mi-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mi-6.sentence-1' class='sentence'>In contrast, consider the case with a virtual base class:
<pre class='codeblock'>
class V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class A : virtual public V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B : virtual public V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C : public A, public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre>
<div class='figure' id='fig:virt'><svg width="224pt" height="182pt"
 viewBox="0.00 0.00 224.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virt</title>
<!-- V -->
<g class="node">
<title>V</title>
<text text-anchor="middle" x="108" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">V</text>
</g>
<!-- A -->
<g class="node">
<title>A</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">A</text>
</g>
<!-- A&#45;&gt;V -->
<g class="edge">
<title>A&#45;&gt;V</title>
<path fill="none" stroke="#000000" d="M47.0225,-104.3034C57.1256,-113.0345 69.536,-123.7595 80.5175,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="78.3532,-136.0052 88.2078,-139.8957 82.9302,-130.7088 78.3532,-136.0052"/>
</g>
<!-- B -->
<g class="node">
<title>B</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">B</text>
</g>
<!-- B&#45;&gt;V -->
<g class="edge">
<title>B&#45;&gt;V</title>
<path fill="none" stroke="#000000" d="M168.9775,-104.3034C158.8744,-113.0345 146.464,-123.7595 135.4825,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="133.0698,-130.7088 127.7922,-139.8957 137.6468,-136.0052 133.0698,-130.7088"/>
</g>
<!-- C -->
<g class="node">
<title>C</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00" fill="#000000">C</text>
</g>
<!-- C&#45;&gt;A -->
<g class="edge">
<title>C&#45;&gt;A</title>
<path fill="none" stroke="#000000" d="M87.9775,-34.3034C77.8744,-43.0345 65.464,-53.7595 54.4825,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="52.0698,-60.7088 46.7922,-69.8957 56.6468,-66.0052 52.0698,-60.7088"/>
</g>
<!-- C&#45;&gt;B -->
<g class="edge">
<title>C&#45;&gt;B</title>
<path fill="none" stroke="#000000" d="M128.0225,-34.3034C138.1256,-43.0345 150.536,-53.7595 161.5175,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="159.3532,-66.0052 169.2078,-69.8957 163.9302,-60.7088 159.3532,-66.0052"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:virt'>4</a> — Virtual base</div>
For an object <span class='texttt'>c</span> of class type <span class='texttt'>C</span>, a single subobject of
type <span class='texttt'>V</span> is shared by every base class subobject of <span class='texttt'>c</span> that has a
<span class='texttt'>virtual</span> base class of type <span class='texttt'>V</span><a class='hidden_link' href='#mi-6.sentence-1'>.</a></div> <div id='mi-6.sentence-2' class='sentence'>Given the class <span class='texttt'>C</span>
defined above, an object of class <span class='texttt'>C</span> will have one subobject of
class <span class='texttt'>V</span>, as shown in Figure <a href='#fig:virt'>[fig:virt]</a><a class='hidden_link' href='#mi-6.sentence-2'>.</a></div> <span class='indexparent'><a class='index' id=':DAG,multiple_inheritance'></a></span><span class='indexparent'><a class='index' id=':DAG,virtual_base_class'></a></span> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='mi-7'><div class='marginalizedparent'><a class='marginalized' href='#mi-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3685'>#</a></div><div id='mi-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#mi-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mi-7.sentence-1' class='sentence'>A class can have both virtual and non-virtual base classes of a given
type<a class='hidden_link' href='#mi-7.sentence-1'>.</a></div> <pre class='codeblock'>
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class X : virtual public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Y : virtual public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Z : public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class AA : public X, public Y, public Z { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre> <div id='mi-7.sentence-2' class='sentence'>
For an object of class <span class='texttt'>AA</span>, all <span class='texttt'>virtual</span> occurrences of
base class <span class='texttt'>B</span> in the class lattice of <span class='texttt'>AA</span> correspond to a
single <span class='texttt'>B</span> subobject within the object of type <span class='texttt'>AA</span>, and
every other occurrence of a (non-virtual) base class <span class='texttt'>B</span> in the
class lattice of <span class='texttt'>AA</span> corresponds one-to-one with a distinct
<span class='texttt'>B</span> subobject within the object of type <span class='texttt'>AA</span><a class='hidden_link' href='#mi-7.sentence-2'>.</a></div> <div id='mi-7.sentence-3' class='sentence'>Given the
class <span class='texttt'>AA</span> defined above, class <span class='texttt'>AA</span> has two subobjects of
class <span class='texttt'>B</span>: <span class='texttt'>Z</span>'s <span class='texttt'>B</span> and the virtual <span class='texttt'>B</span> shared
by <span class='texttt'>X</span> and <span class='texttt'>Y</span>, as shown in Figure <a href='#fig:virtnonvirt'>[fig:virtnonvirt]</a><a class='hidden_link' href='#mi-7.sentence-3'>.</a></div><span class='indexparent'><a class='index' id=':DAG,virtual_base_class_'></a></span><span class='indexparent'><a class='index' id=':DAG,non-virtual_base_class'></a></span><span class='indexparent'><a class='index' id=':DAG,multiple_inheritance_'></a></span><div class='figure' id='fig:virtnonvirt'><svg width="386pt" height="182pt"
 viewBox="0.00 0.00 386.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virtnonvirt</title>
<!-- B1 -->
<g class="node">
<title>B1</title>
<text text-anchor="middle" x="108" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">B</text>
</g>
<!-- B2 -->
<g class="node">
<title>B2</title>
<text text-anchor="middle" x="351" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">B</text>
</g>
<!-- AA -->
<g class="node">
<title>AA</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00" fill="#000000">AA</text>
</g>
<!-- X -->
<g class="node">
<title>X</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">X</text>
</g>
<!-- AA&#45;&gt;X -->
<g class="edge">
<title>AA&#45;&gt;X</title>
<path fill="none" stroke="#000000" d="M87.9775,-34.3034C77.8744,-43.0345 65.464,-53.7595 54.4825,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="52.0698,-60.7088 46.7922,-69.8957 56.6468,-66.0052 52.0698,-60.7088"/>
</g>
<!-- Y -->
<g class="node">
<title>Y</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">Y</text>
</g>
<!-- AA&#45;&gt;Y -->
<g class="edge">
<title>AA&#45;&gt;Y</title>
<path fill="none" stroke="#000000" d="M128.0225,-34.3034C138.1256,-43.0345 150.536,-53.7595 161.5175,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="159.3532,-66.0052 169.2078,-69.8957 163.9302,-60.7088 159.3532,-66.0052"/>
</g>
<!-- Z -->
<g class="node">
<title>Z</title>
<text text-anchor="middle" x="351" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">Z</text>
</g>
<!-- AA&#45;&gt;Z -->
<g class="edge">
<title>AA&#45;&gt;Z</title>
<path fill="none" stroke="#000000" d="M135.4028,-24.8938C179.0896,-37.4785 264.596,-62.11 313.7812,-76.2785"/>
<polygon fill="#000000" stroke="#000000" points="313.1192,-79.7301 323.6973,-79.135 315.0569,-73.0036 313.1192,-79.7301"/>
</g>
<!-- X&#45;&gt;B1 -->
<g class="edge">
<title>X&#45;&gt;B1</title>
<path fill="none" stroke="#000000" d="M47.0225,-104.3034C57.1256,-113.0345 69.536,-123.7595 80.5175,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="78.3532,-136.0052 88.2078,-139.8957 82.9302,-130.7088 78.3532,-136.0052"/>
</g>
<!-- Y&#45;&gt;B1 -->
<g class="edge">
<title>Y&#45;&gt;B1</title>
<path fill="none" stroke="#000000" d="M168.9775,-104.3034C158.8744,-113.0345 146.464,-123.7595 135.4825,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="133.0698,-130.7088 127.7922,-139.8957 137.6468,-136.0052 133.0698,-130.7088"/>
</g>
<!-- Z&#45;&gt;B2 -->
<g class="edge">
<title>Z&#45;&gt;B2</title>
<path fill="none" stroke="#000000" d="M351,-104.3034C351,-112.0173 351,-121.2875 351,-129.8876"/>
<polygon fill="#000000" stroke="#000000" points="347.5001,-129.8956 351,-139.8957 354.5001,-129.8957 347.5001,-129.8956"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:virtnonvirt'>5</a> — Virtual and non-virtual base</div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='virtual' class='section'><h3 ><a class='secnum' href='#virtual' style='min-width:103pt'>10.6.2</a> Virtual functions <a class='abbr_ref' href='class.virtual'>[class.virtual]</a></h3><span class='indexparent'><a class='index' id=':function,virtual'></a></span><span class='indexparent'><a class='index' id=':type,polymorphic'></a></span><div class='para' id='virtual-1'><div class='marginalizedparent'><a class='marginalized' href='#virtual-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3720'>#</a></div><div id='virtual-1.sentence-1' class='sentence'>A non-static member function is a <span class='indexparent'><a class='index' id=':function,virtual_'></a></span><span class='textit'>virtual function</span>
if it is first declared with the keyword <span class='texttt'>virtual</span> or
if it overrides a virtual member function declared in a base class
(see below)<a class='hidden_link' href='#virtual-1.sentence-1'>.</a><a class='footnotenum' href='#footnote-113'>113</a></div> <div id='virtual-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#virtual-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='virtual-1.sentence-3' class='sentence'>Virtual functions support dynamic binding and object-oriented
programming<a class='hidden_link' href='#virtual-1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='virtual-1.sentence-2' class='sentence'> A class that declares or inherits a virtual function is
called a <span class='indexparent'><a class='index' id=':class,polymorphic'></a></span><span class='textit'>polymorphic class</span><a class='hidden_link' href='#virtual-1.sentence-2'>.</a></div></div><div class='para' id='virtual-2'><div class='marginalizedparent'><a class='marginalized' href='#virtual-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3732'>#</a></div><div id='virtual-2.sentence-1' class='sentence'>If a virtual member function <span class='texttt'>vf</span> is declared in a class
<span class='texttt'>Base</span> and in a class <span class='texttt'>Derived</span>, derived directly or
indirectly from <span class='texttt'>Base</span>, a member function <span class='texttt'>vf</span> with the same
name, parameter-type-list (<a href='dcl.fct'>[dcl.fct]</a>), cv-qualification, and ref-qualifier
(or absence of same) as <span class='texttt'>Base&#x200b;::&#x200b;vf</span> is declared,
then <span class='texttt'>Derived&#x200b;::&#x200b;vf</span> <a class='hidden_link' href='#def:overrides' id='def:overrides'><i>overrides</i></a><a class='footnotenum' href='#footnote-114'>114</a>
<span class='texttt'>Base&#x200b;::&#x200b;vf</span><a class='hidden_link' href='#virtual-2.sentence-1'>.</a></div> <div id='virtual-2.sentence-2' class='sentence'>For convenience we say that any virtual function
overrides itself<a class='hidden_link' href='#virtual-2.sentence-2'>.</a></div> <div id='virtual-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':overrider,final'></a></span>A virtual member function <span class='texttt'>C&#x200b;::&#x200b;vf</span> of a class object <span class='texttt'>S</span> is a <a class='hidden_link' href='#def:final_overrider' id='def:final_overrider'><i >final
overrider</i></a> unless the most derived class (<a href='intro.object'>[intro.object]</a>) of which <span class='texttt'>S</span> is a
base class subobject (if any) declares or inherits another member function that overrides
<span class='texttt'>vf</span><a class='hidden_link' href='#virtual-2.sentence-3'>.</a></div> <div id='virtual-2.sentence-4' class='sentence'>In a derived class, if a virtual member function of a base class subobject
has more than one final overrider the program is ill-formed<a class='hidden_link' href='#virtual-2.sentence-4'>.</a></div> <div id='virtual-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  virtual void f();
};
struct B : virtual A {
  virtual void f();
};
struct C : B , virtual A {
  using A::f;
};

void foo() {
  C c;
  c.f();              <span class='comment'>// calls <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f</span>, the final overrider
</span>  c.C::f();           <span class='comment'>// calls <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span> because of the using-declaration
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='virtual-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { virtual void f(); };
struct B : A { };
struct C : A { void f(); };
struct D : B, C { };  <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span> and <span class='tcode_in_codeblock'>C&#x200b;::&#x200b;f</span> are the final overriders
</span>                      <span class='comment'>// for the <span class='tcode_in_codeblock'>B</span> and <span class='tcode_in_codeblock'>C</span> subobjects, respectively
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-3'><div class='marginalizedparent'><a class='marginalized' href='#virtual-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3781'>#</a></div><div id='virtual-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#virtual-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='virtual-3.sentence-1' class='sentence'>A virtual member function does not have to be visible to be overridden,
for example,
<pre class='codeblock'>
struct B {
  virtual void f();
};
struct D : B {
  void f(int);
};
struct D2 : D {
  void f();
};</pre>
the function <span class='texttt'>f(int)</span> in class <span class='texttt'>D</span> hides the virtual
function <span class='texttt'>f()</span> in its base class <span class='texttt'>B</span>; <span class='texttt'>D&#x200b;::&#x200b;f(int)</span> is
not a virtual function<a class='hidden_link' href='#virtual-3.sentence-1'>.</a></div> <div id='virtual-3.sentence-2' class='sentence'>However, <span class='texttt'>f()</span> declared in class
<span class='texttt'>D2</span> has the same name and the same parameter list as
<span class='texttt'>B&#x200b;::&#x200b;f()</span>, and therefore is a virtual function that overrides the
function <span class='texttt'>B&#x200b;::&#x200b;f()</span> even though <span class='texttt'>B&#x200b;::&#x200b;f()</span> is not visible in
class <span class='texttt'>D2</span><a class='hidden_link' href='#virtual-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-4'><div class='marginalizedparent'><a class='marginalized' href='#virtual-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3805'>#</a></div><div id='virtual-4.sentence-1' class='sentence'>If a virtual function <span class='texttt'>f</span> in some class <span class='texttt'>B</span> is marked with the
<i ><a href='class.mem#nt:virt-specifier'>virt-specifier</a></i> <span class='texttt'>final</span> and in a class <span class='texttt'>D</span> derived from <span class='texttt'>B</span>
a function <span class='texttt'>D&#x200b;::&#x200b;f</span> overrides <span class='texttt'>B&#x200b;::&#x200b;f</span>, the program is ill-formed<a class='hidden_link' href='#virtual-4.sentence-1'>.</a></div> <div id='virtual-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B {
  virtual void f() const final;
};

struct D : B {
  void f() const;     <span class='comment'>// error: <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f</span> attempts to override <span class='tcode_in_codeblock'>final</span> <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f</span>
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-5'><div class='marginalizedparent'><a class='marginalized' href='#virtual-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3820'>#</a></div><div id='virtual-5.sentence-1' class='sentence'>If a virtual function is marked with the <i ><a href='class.mem#nt:virt-specifier'>virt-specifier</a></i> <span class='texttt'>override</span> and
does not override a member function of a base class, the program is ill-formed<a class='hidden_link' href='#virtual-5.sentence-1'>.</a></div> <div id='virtual-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B {
  virtual void f(int);
};

struct D : B {
  virtual void f(long) override;  <span class='comment'>// error: wrong signature overriding <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f</span>
</span>  virtual void f(int) override;   <span class='comment'>// OK
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-6'><div class='marginalizedparent'><a class='marginalized' href='#virtual-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3835'>#</a></div><div id='virtual-6.sentence-1' class='sentence'>A virtual function shall not have a trailing <i ><a href='temp#nt:requires-clause'>requires-clause</a></i> (<a href='dcl.decl'>[dcl.decl]</a>)<a class='hidden_link' href='#virtual-6.sentence-1'>.</a></div> <div id='virtual-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  virtual void f() requires true; <span class='comment'>// error: virtual function cannot be constrained (<a href='temp.constr.decl'>[temp.constr.decl]</a>)
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-7'><div class='marginalizedparent'><a class='marginalized' href='#virtual-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3845'>#</a></div><div id='virtual-7.sentence-1' class='sentence'>Even though destructors are not inherited, a destructor in a derived
class overrides a base class destructor declared virtual;
see <a href='#dtor'>[class.dtor]</a> and <a href='#free'>[class.free]</a><a class='hidden_link' href='#virtual-7.sentence-1'>.</a></div></div><div class='para' id='virtual-8'><div class='marginalizedparent'><a class='marginalized' href='#virtual-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3850'>#</a></div><div id='virtual-8.sentence-1' class='sentence'>The return type of an overriding function shall be either identical to
the return type of the overridden function or <a class='hidden_link' href='#def:return_type,covariant' id='def:return_type,covariant'><i >covariant</i></a> with
the classes of the functions<a class='hidden_link' href='#virtual-8.sentence-1'>.</a></div> <div id='virtual-8.sentence-2' class='sentence'>If a function <span class='texttt'>D&#x200b;::&#x200b;f</span> overrides a
function <span class='texttt'>B&#x200b;::&#x200b;f</span>, the return types of the functions are covariant
if they satisfy the following criteria:
<ul class='itemize'><li id='virtual-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#virtual-8.1'>(8.1)</a></div><div id='virtual-8.1.sentence-1' class='sentence'>both are pointers to classes, both are lvalue references to
classes, or both are rvalue references to classes<a class='footnotenum' href='#footnote-115'>115</a></div></li><li id='virtual-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#virtual-8.2'>(8.2)</a></div><div id='virtual-8.2.sentence-1' class='sentence'>the class in the return type of <span class='texttt'>B&#x200b;::&#x200b;f</span> is the same class as
the class in the return type of <span class='texttt'>D&#x200b;::&#x200b;f</span>, or is an unambiguous and
accessible direct or indirect base class of the class in the return type
of <span class='texttt'>D&#x200b;::&#x200b;f</span></div></li><li id='virtual-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#virtual-8.3'>(8.3)</a></div><div id='virtual-8.3.sentence-1' class='sentence'>both pointers or references have the same cv-qualification and the
class type in the return type of <span class='texttt'>D&#x200b;::&#x200b;f</span> has the same
cv-qualification as or less cv-qualification than the class type in the
return type of <span class='texttt'>B&#x200b;::&#x200b;f</span><a class='hidden_link' href='#virtual-8.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='virtual-9'><div class='marginalizedparent'><a class='marginalized' href='#virtual-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3873'>#</a></div><div id='virtual-9.sentence-1' class='sentence'>If the class type in the covariant return type of <span class='texttt'>D&#x200b;::&#x200b;f</span> differs from that of
<span class='texttt'>B&#x200b;::&#x200b;f</span>, the class type in the return type of <span class='texttt'>D&#x200b;::&#x200b;f</span> shall be
complete at the point of declaration of <span class='texttt'>D&#x200b;::&#x200b;f</span> or shall be the
class type <span class='texttt'>D</span><a class='hidden_link' href='#virtual-9.sentence-1'>.</a></div> <div id='virtual-9.sentence-2' class='sentence'>When the overriding function is called as the
final overrider of the overridden function, its result is converted to
the type returned by the (statically chosen) overridden
function (<a href='expr.call'>[expr.call]</a>)<a class='hidden_link' href='#virtual-9.sentence-2'>.</a></div> <div id='virtual-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B { };
class D : private B { friend class Derived; };
struct Base {
  virtual void vf1();
  virtual void vf2();
  virtual void vf3();
  virtual B*   vf4();
  virtual B*   vf5();
  void f();
};

struct No_good : public Base {
  D*  vf4();        <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> (base class of <span class='tcode_in_codeblock'>D</span>) inaccessible
</span>};

class A;
struct Derived : public Base {
    void vf1();     <span class='comment'>// virtual and overrides <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;vf1()</span>
</span>    void vf2(int);  <span class='comment'>// not virtual, hides <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;vf2()</span>
</span>    char vf3();     <span class='comment'>// error: invalid difference in return type only
</span>    D*   vf4();     <span class='comment'>// OK: returns pointer to derived class
</span>    A*   vf5();     <span class='comment'>// error: returns pointer to incomplete class
</span>    void f();
};

void g() {
  Derived d;
  Base* bp = &amp;d;                <span class='comment'>// standard conversion:
</span>                                <span class='comment'>// <span class='tcode_in_codeblock'>Derived*</span> to <span class='tcode_in_codeblock'>Base*</span>
</span>  bp-&gt;vf1();                    <span class='comment'>// calls <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;vf1()</span>
</span>  bp-&gt;vf2();                    <span class='comment'>// calls <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;vf2()</span>
</span>  bp-&gt;f();                      <span class='comment'>// calls <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;f()</span> (not virtual)
</span>  B*  p = bp-&gt;vf4();            <span class='comment'>// calls <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;vf4()</span> and converts the
</span>                                <span class='comment'>// result to <span class='tcode_in_codeblock'>B*</span>
</span>  Derived*  dp = &amp;d;
  D*  q = dp-&gt;vf4();            <span class='comment'>// calls <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;vf4()</span> and does not
</span>                                <span class='comment'>// convert the result to <span class='tcode_in_codeblock'>B*</span>
</span>  dp-&gt;vf2();                    <span class='comment'>// ill-formed: argument mismatch
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-10'><div class='marginalizedparent'><a class='marginalized' href='#virtual-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3925'>#</a></div><div id='virtual-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#virtual-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='virtual-10.sentence-1' class='sentence'>The interpretation of the call of a virtual function depends on the type
of the object for which it is called (the dynamic type), whereas the
interpretation of a call of a non-virtual member function depends only
on the type of the pointer or reference denoting that object (the static
type) (<a href='expr.call'>[expr.call]</a>)<a class='hidden_link' href='#virtual-10.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-11'><div class='marginalizedparent'><a class='marginalized' href='#virtual-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3934'>#</a></div><div id='virtual-11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#virtual-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='virtual-11.sentence-1' class='sentence'>The <span class='texttt'>virtual</span> specifier implies membership, so a virtual function
cannot be a non-member (<a href='dcl.fct.spec'>[dcl.fct.spec]</a>) function<a class='hidden_link' href='#virtual-11.sentence-1'>.</a></div> <div id='virtual-11.sentence-2' class='sentence'>Nor can a virtual
function be a static member, since a virtual function call relies on a
specific object for determining which function to invoke<a class='hidden_link' href='#virtual-11.sentence-2'>.</a></div> <div id='virtual-11.sentence-3' class='sentence'>A virtual
function declared in one class can be declared a friend (<a href='#friend'>[class.friend]</a>) in
another class<a class='hidden_link' href='#virtual-11.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-12'><div class='marginalizedparent'><a class='marginalized' href='#virtual-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3944'>#</a></div><div id='virtual-12.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':definition,virtual_function'></a></span>A virtual function declared in a class shall be defined, or declared
pure (<a href='#abstract'>[class.abstract]</a>) in that class, or both; no diagnostic is
required (<a href='basic.def.odr'>[basic.def.odr]</a>)<a class='hidden_link' href='#virtual-12.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id=':friend,virtual_and'></a></span></div><div class='para' id='virtual-13'><div class='marginalizedparent'><a class='marginalized' href='#virtual-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3951'>#</a></div><span class='indexparent'><a class='index' id=':multiple_inheritance,virtual_and'></a></span><div id='virtual-13.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='virtual-13.sentence-1' class='sentence'>Here are some uses of virtual functions with multiple base classes:
<pre class='codeblock'>
struct A {
  virtual void f();
};

struct B1 : A {                 <span class='comment'>// note non-virtual derivation
</span>  void f();
};

struct B2 : A {
  void f();
};

struct D : B1, B2 {             <span class='comment'>// <span class='tcode_in_codeblock'>D</span> has two separate <span class='tcode_in_codeblock'>A</span> subobjects
</span>};

void foo() {
  D   d;
<span class='comment'>//<span class='tcode_in_codeblock'>   A*  ap = &amp;d;</span>                  // would be ill-formed: ambiguous
</span>  B1*  b1p = &amp;d;
  A*   ap = b1p;
  D*   dp = &amp;d;
  ap-&gt;f();                      <span class='comment'>// calls <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;B1&#x200b;::&#x200b;f</span>
</span>  dp-&gt;f();                      <span class='comment'>// ill-formed: ambiguous
</span>}</pre>
In class <span class='texttt'>D</span> above there are two occurrences of class <span class='texttt'>A</span>
and hence two occurrences of the virtual member function <span class='texttt'>A&#x200b;::&#x200b;f</span><a class='hidden_link' href='#virtual-13.sentence-1'>.</a></div> <div id='virtual-13.sentence-2' class='sentence'>The final overrider of <span class='texttt'>B1&#x200b;::&#x200b;A&#x200b;::&#x200b;f</span> is <span class='texttt'>B1&#x200b;::&#x200b;f</span> and the final
overrider of <span class='texttt'>B2&#x200b;::&#x200b;A&#x200b;::&#x200b;f</span> is <span class='texttt'>B2&#x200b;::&#x200b;f</span><a class='hidden_link' href='#virtual-13.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-14'><div class='marginalizedparent'><a class='marginalized' href='#virtual-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L3987'>#</a></div><div id='virtual-14.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='virtual-14.sentence-1' class='sentence'>The following example shows a function that does not have a unique final
overrider:
<pre class='codeblock'>
struct A {
  virtual void f();
};

struct VB1 : virtual A {        <span class='comment'>// note virtual derivation
</span>  void f();
};

struct VB2 : virtual A {
  void f();
};

struct Error : VB1, VB2 {       <span class='comment'>// ill-formed
</span>};

struct Okay : VB1, VB2 {
  void f();
};</pre>
Both <span class='texttt'>VB1&#x200b;::&#x200b;f</span> and <span class='texttt'>VB2&#x200b;::&#x200b;f</span> override <span class='texttt'>A&#x200b;::&#x200b;f</span> but there
is no overrider of both of them in class <span class='texttt'>Error</span><a class='hidden_link' href='#virtual-14.sentence-1'>.</a></div> <div id='virtual-14.sentence-2' class='sentence'>This example is
therefore ill-formed<a class='hidden_link' href='#virtual-14.sentence-2'>.</a></div> <div id='virtual-14.sentence-3' class='sentence'>Class <span class='texttt'>Okay</span> is well-formed, however,
because <span class='texttt'>Okay&#x200b;::&#x200b;f</span> is a final overrider<a class='hidden_link' href='#virtual-14.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-15'><div class='marginalizedparent'><a class='marginalized' href='#virtual-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4017'>#</a></div><div id='virtual-15.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='virtual-15.sentence-1' class='sentence'>The following example uses the well-formed classes from above<a class='hidden_link' href='#virtual-15.sentence-1'>.</a></div> <pre class='codeblock'>
struct VB1a : virtual A {       <span class='comment'>// does not declare <span class='tcode_in_codeblock'>f</span>
</span>};

struct Da : VB1a, VB2 {
};

void foe() {
  VB1a*  vb1ap = new Da;
  vb1ap-&gt;f();                   <span class='comment'>// calls <span class='tcode_in_codeblock'>VB2&#x200b;::&#x200b;f</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-16'><div class='marginalizedparent'><a class='marginalized' href='#virtual-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4034'>#</a></div><div id='virtual-16.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator,scope_resolution__'></a></span><span class='indexparent'><a class='index' id=':virtual_function_call'></a></span>Explicit qualification with the scope operator (<a href='expr.prim.id.qual'>[expr.prim.id.qual]</a>)
suppresses the virtual call mechanism<a class='hidden_link' href='#virtual-16.sentence-1'>.</a></div> <div id='virtual-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B { public: virtual void f(); };
class D : public B { public: void f(); };

void D::f() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> B::f(); }</pre><div id='virtual-16.sentence-2' class='sentence'>Here, the function call in
<span class='texttt'>D&#x200b;::&#x200b;f</span>
really does call
<span class='texttt'>B&#x200b;::&#x200b;f</span>
and not
<span class='texttt'>D&#x200b;::&#x200b;f</span><a class='hidden_link' href='#virtual-16.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='virtual-17'><div class='marginalizedparent'><a class='marginalized' href='#virtual-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4055'>#</a></div><div id='virtual-17.sentence-1' class='sentence'>A function with a deleted definition (<a href='dcl.fct.def'>[dcl.fct.def]</a>) shall
not override a function that does not have a deleted definition<a class='hidden_link' href='#virtual-17.sentence-1'>.</a></div> <div id='virtual-17.sentence-2' class='sentence'>Likewise,
a function that does not have a deleted definition shall not override a
function with a deleted definition<a class='hidden_link' href='#virtual-17.sentence-2'>.</a></div> </div><div class='para' id='virtual-18'><div class='marginalizedparent'><a class='marginalized' href='#virtual-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4062'>#</a></div><div id='virtual-18.sentence-1' class='sentence'>If an overriding function specifies contract conditions (<a href='dcl.attr.contract'>[dcl.attr.contract]</a>),
it shall specify the same list of contract conditions as
its overridden functions;
no diagnostic is required
if corresponding conditions will always evaluate to the same value<a class='hidden_link' href='#virtual-18.sentence-1'>.</a></div> <div id='virtual-18.sentence-2' class='sentence'>Otherwise, it is considered to have
the list of contract conditions from one of its overridden functions;
the names in the contract conditions are bound,
and the semantic constraints are checked,
at the point where the contract conditions appear<a class='hidden_link' href='#virtual-18.sentence-2'>.</a></div> <div id='virtual-18.sentence-3' class='sentence'>Given a virtual function <span class='texttt'>f</span>
with a contract condition that odr-uses <span class='texttt'>*this</span> (<a href='basic.def.odr'>[basic.def.odr]</a>),
the class of which <span class='texttt'>f</span> is a direct member
shall be be an unambiguous and accessible base class of any class
in which <span class='texttt'>f</span> is overridden<a class='hidden_link' href='#virtual-18.sentence-3'>.</a></div> <div id='virtual-18.sentence-4' class='sentence'>If a function overrides more than one function,
all of the overridden functions shall have
the same list of contract conditions (<a href='dcl.attr.contract'>[dcl.attr.contract]</a>);
no diagnostic is required
if corresponding conditions will always evaluate to the same value<a class='hidden_link' href='#virtual-18.sentence-4'>.</a></div> <div id='virtual-18.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#virtual-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  virtual void g() [[expects: x == 0]];
  int x = 42;
};

int x = 42;
struct B {
  virtual void g() [[expects: x == 0]];
}

struct C : A, B {
  virtual void g();             <span class='comment'>// error: preconditions of overridden functions are not the same
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-113'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-113'>113)</a></div><div id='footnote-113.sentence-1' class='sentence'>The use of the <span class='texttt'>virtual</span> specifier in the
declaration of an overriding function is valid but redundant (has empty
semantics)<a class='hidden_link' href='#footnote-113.sentence-1'>.</a></div></div><div class='footnote' id='footnote-114'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-114'>114)</a></div><div id='footnote-114.sentence-1' class='sentence'>A function
with the same name but a different parameter list (<a href='over'>[over]</a>)
as a virtual function is not necessarily virtual and
does not override<a class='hidden_link' href='#footnote-114.sentence-1'>.</a></div> <div id='footnote-114.sentence-2' class='sentence'>Access control (<a href='#access'>[class.access]</a>) is not considered in
determining overriding<a class='hidden_link' href='#footnote-114.sentence-2'>.</a></div></div><div class='footnote' id='footnote-115'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-115'>115)</a></div><div id='footnote-115.sentence-1' class='sentence'>Multi-level pointers to classes or references to multi-level pointers to
classes are not allowed<a class='hidden_link' href='#footnote-115.sentence-1'>.</a></div></div></div><div id='abstract' class='section'><h3 ><a class='secnum' href='#abstract' style='min-width:103pt'>10.6.3</a> Abstract classes <a class='abbr_ref' href='class.abstract'>[class.abstract]</a></h3><div class='para' id='abstract-1'><div class='marginalizedparent'><a class='marginalized' href='#abstract-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4103'>#</a></div><div id='abstract-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#abstract-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='abstract-1.sentence-1' class='sentence'>The abstract class mechanism supports the notion of a general concept,
such as a <span class='texttt'>shape</span>, of which only more concrete variants, such as
<span class='texttt'>circle</span> and <span class='texttt'>square</span>, can actually be used<a class='hidden_link' href='#abstract-1.sentence-1'>.</a></div> <div id='abstract-1.sentence-2' class='sentence'>An abstract
class can also be used to define an interface for which derived classes
provide a variety of implementations<a class='hidden_link' href='#abstract-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='abstract-2'><div class='marginalizedparent'><a class='marginalized' href='#abstract-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4112'>#</a></div><div id='abstract-2.sentence-1' class='sentence'>A virtual function is specified as
a <a class='hidden_link' href='#def:function,virtual,pure' id='def:function,virtual,pure'><i >pure virtual function</i></a> by using a
<i ><a href='class.mem#nt:pure-specifier'>pure-specifier</a></i> in the function declaration
in the class definition<a class='hidden_link' href='#abstract-2.sentence-1'>.</a></div> <div id='abstract-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#abstract-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='abstract-2.sentence-4' class='sentence'>Such a function might be inherited: see below<a class='hidden_link' href='#abstract-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='abstract-2.sentence-2' class='sentence'>
A class is an <span class='indexparent'><a class='index' id=':class,abstract'></a></span><span class='textit'>abstract class</span>
if it has at least one pure virtual function<a class='hidden_link' href='#abstract-2.sentence-2'>.</a></div> <div id='abstract-2.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#abstract-2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='abstract-2.sentence-5' class='sentence'>An abstract class can be used only as a base class of some other class;
no objects of an abstract class can be created
except as subobjects of a class
derived from it (<a href='basic.def'>[basic.def]</a>, <a href='#mem'>[class.mem]</a>)<a class='hidden_link' href='#abstract-2.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='abstract-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':definition,pure_virtual_function'></a></span>A pure virtual function need be defined only if called with, or as if
with (<a href='#dtor'>[class.dtor]</a>), the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
syntax (<a href='expr.prim.id.qual'>[expr.prim.id.qual]</a>)<a class='hidden_link' href='#abstract-2.sentence-3'>.</a></div> <div id='abstract-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#abstract-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class point { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class shape {                   <span class='comment'>// abstract class
</span>  point center;
public:
  point where() { return center; }
  void move(point p) { center=p; draw(); }
  virtual void rotate(int) = 0; <span class='comment'>// pure virtual
</span>  virtual void draw() = 0;      <span class='comment'>// pure virtual
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='abstract-2.note-3' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#abstract-2.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='abstract-2.sentence-6' class='sentence'>A function declaration cannot provide both a <i ><a href='class.mem#nt:pure-specifier'>pure-specifier</a></i>
and a definition</div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='abstract-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#abstract-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct C {
  virtual void f() = 0 { };     <span class='comment'>// ill-formed
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='abstract-3'><div class='marginalizedparent'><a class='marginalized' href='#abstract-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4157'>#</a></div><div id='abstract-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#abstract-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='abstract-3.sentence-1' class='sentence'>An abstract class type cannot be used
as a parameter or return type of
a function being defined (<a href='dcl.fct'>[dcl.fct]</a>) or called (<a href='expr.call'>[expr.call]</a>),
except as specified in <a href='dcl.type.simple'>[dcl.type.simple]</a><a class='hidden_link' href='#abstract-3.sentence-1'>.</a></div> <div id='abstract-3.sentence-2' class='sentence'>Further, an abstract class type cannot be used as
the type of an explicit type conversion (<a href='expr.static.cast'>[expr.static.cast]</a>,
<a href='expr.reinterpret.cast'>[expr.reinterpret.cast]</a>, <a href='expr.const.cast'>[expr.const.cast]</a>),
because the resulting prvalue would be of abstract class type (<a href='basic.lval'>[basic.lval]</a>)<a class='hidden_link' href='#abstract-3.sentence-2'>.</a></div> <div id='abstract-3.sentence-3' class='sentence'>However, pointers and references to abstract class types
can appear in such contexts<a class='hidden_link' href='#abstract-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='abstract-4'><div class='marginalizedparent'><a class='marginalized' href='#abstract-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4171'>#</a></div><div id='abstract-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':function,virtual,pure_'></a></span>A class is abstract if it contains or inherits at least one pure virtual
function for which the final overrider is pure virtual<a class='hidden_link' href='#abstract-4.sentence-1'>.</a></div> <div id='abstract-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#abstract-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class ab_circle : public shape {
  int radius;
public:
  void rotate(int) { }
  <span class='comment'>// <span class='tcode_in_codeblock'>ab_&shy;circle&#x200b;::&#x200b;draw()</span> is a pure virtual
</span>};</pre><div id='abstract-4.sentence-2' class='sentence'>Since <span class='texttt'>shape&#x200b;::&#x200b;draw()</span> is a pure virtual function
<span class='texttt'>ab_&shy;circle&#x200b;::&#x200b;draw()</span> is a pure virtual by default<a class='hidden_link' href='#abstract-4.sentence-2'>.</a></div> <div id='abstract-4.sentence-3' class='sentence'>The alternative
declaration,
<pre class='codeblock'>
class circle : public shape {
  int radius;
public:
  void rotate(int) { }
  void draw();                  <span class='comment'>// a definition is required somewhere
</span>};</pre>
would make class <span class='texttt'>circle</span> non-abstract and a definition of
<span class='texttt'>circle&#x200b;::&#x200b;draw()</span> must be provided<a class='hidden_link' href='#abstract-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='abstract-5'><div class='marginalizedparent'><a class='marginalized' href='#abstract-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4200'>#</a></div><div id='abstract-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#abstract-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='abstract-5.sentence-1' class='sentence'>An abstract class can be derived from a class that is not abstract, and
a pure virtual function may override a virtual function which is not
pure<a class='hidden_link' href='#abstract-5.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='abstract-6'><div class='marginalizedparent'><a class='marginalized' href='#abstract-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4207'>#</a></div><div id='abstract-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':class,constructor_and_abstract'></a></span>Member functions can be called from a constructor (or destructor) of an
abstract class;
<span class='indexparent'><a class='index' id=':virtual_function_call,undefined_pure'></a></span>the effect of making a virtual call (<a href='#virtual'>[class.virtual]</a>) to a pure
virtual function directly or indirectly for the object being created (or
destroyed) from such a constructor (or destructor) is undefined<a class='hidden_link' href='#abstract-6.sentence-1'>.</a></div> </div></div></div><div id='member.lookup' class='section'><h2 ><a class='secnum' href='#member.lookup' style='min-width:88pt'>10.7</a> Member name lookup <a class='abbr_ref' href='class.member.lookup'>[class.member.lookup]</a></h2><span class='indexparent'><a class='index' id=':lookup,member_name'></a></span><span class='indexparent'><a class='index' id=':ambiguity,base_class_member'></a></span><span class='indexparent'><a class='index' id=':ambiguity,member_access'></a></span><div class='para' id='member.lookup-1'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4222'>#</a></div><div id='member.lookup-1.sentence-1' class='sentence'>Member name lookup determines the meaning of a name
(<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>) in a class scope (<a href='basic.scope.class'>[basic.scope.class]</a>)<a class='hidden_link' href='#member.lookup-1.sentence-1'>.</a></div> <div id='member.lookup-1.sentence-2' class='sentence'>Name lookup can result in an ambiguity, in which case the
program is ill-formed<a class='hidden_link' href='#member.lookup-1.sentence-2'>.</a></div> <div id='member.lookup-1.sentence-3' class='sentence'>For an <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>, name lookup
begins in the class scope of <span class='texttt'>this</span>; for a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>, name lookup begins in the scope of the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><a class='hidden_link' href='#member.lookup-1.sentence-3'>.</a></div> <div id='member.lookup-1.sentence-4' class='sentence'>Name lookup takes place before access
control (<a href='basic.lookup'>[basic.lookup]</a>, <a href='#access'>[class.access]</a>)<a class='hidden_link' href='#member.lookup-1.sentence-4'>.</a></div></div><div class='para' id='member.lookup-2'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4232'>#</a></div><div id='member.lookup-2.sentence-1' class='sentence'>The following steps define the result of name lookup for a member name
<span class='texttt'>f</span> in a class scope <span class='texttt'>C</span><a class='hidden_link' href='#member.lookup-2.sentence-1'>.</a></div></div><div class='para' id='member.lookup-3'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4236'>#</a></div><div id='member.lookup-3.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:lookup_set' id='def:lookup_set'><i>lookup set</i></a> for <span class='texttt'>f</span> in <span class='texttt'>C</span>, called <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>,
consists of two component sets: the <a class='hidden_link' href='#def:declaration_set' id='def:declaration_set'><i>declaration set</i></a>, a set of
members named <span class='texttt'>f</span>; and the <a class='hidden_link' href='#def:subobject_set' id='def:subobject_set'><i>subobject set</i></a>, a set of
subobjects where declarations of these members (possibly including
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i><span class='textit'>s</span>) were found<a class='hidden_link' href='#member.lookup-3.sentence-1'>.</a></div> <div id='member.lookup-3.sentence-2' class='sentence'>In the declaration set,
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i><span class='textit'>s</span> are replaced by the
set of designated members that are not hidden or overridden by members of the
derived class (<a href='namespace.udecl'>[namespace.udecl]</a>),
and type declarations (including injected-class-names) are
replaced by the types they designate<a class='hidden_link' href='#member.lookup-3.sentence-2'>.</a></div> <div id='member.lookup-3.sentence-3' class='sentence'><span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is calculated as follows:</div></div><div class='para' id='member.lookup-4'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4248'>#</a></div><div id='member.lookup-4.sentence-1' class='sentence'>If <span class='texttt'>C</span> contains a declaration of the name <span class='texttt'>f</span>, the
declaration set contains every declaration of <span class='texttt'>f</span> declared in
<span class='texttt'>C</span> that satisfies the requirements of the language construct in
which the lookup occurs<a class='hidden_link' href='#member.lookup-4.sentence-1'>.</a></div> <div id='member.lookup-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#member.lookup-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='member.lookup-4.sentence-3' class='sentence'>Looking up a name in an
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> (<a href='basic.lookup.elab'>[basic.lookup.elab]</a>) or
<i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i>, for instance,
ignores all non-type declarations, while looking up a name in a
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> (<a href='basic.lookup.qual'>[basic.lookup.qual]</a>) ignores
function, variable, and enumerator declarations<a class='hidden_link' href='#member.lookup-4.sentence-3'>.</a></div> <div id='member.lookup-4.sentence-4' class='sentence'>As another example,
looking up a name in a
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i> includes the
declaration of a class or enumeration that would ordinarily be hidden by
another declaration of that name in the same scope<a class='hidden_link' href='#member.lookup-4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='member.lookup-4.sentence-2' class='sentence'>
If the resulting declaration set is not empty, the subobject set
contains <span class='texttt'>C</span> itself, and calculation is complete<a class='hidden_link' href='#member.lookup-4.sentence-2'>.</a></div></div><div class='para' id='member.lookup-5'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4268'>#</a></div><div id='member.lookup-5.sentence-1' class='sentence'>Otherwise (i.e., <span class='texttt'>C</span> does not contain a declaration of <span class='texttt'>f</span>
or the resulting declaration set is empty), <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is initially empty<a class='hidden_link' href='#member.lookup-5.sentence-1'>.</a></div> <div id='member.lookup-5.sentence-2' class='sentence'>If <span class='texttt'>C</span> has base classes, calculate the lookup set for <span class='texttt'>f</span> in
each direct base class subobject <span class="mjx-chtml"><span class="mjx-math" aria-label="B_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>, and merge each such lookup set
<span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,B_i)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> in turn into <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#member.lookup-5.sentence-2'>.</a></div></div><div class='para' id='member.lookup-6'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4275'>#</a></div><div id='member.lookup-6.sentence-1' class='sentence'>The following steps define the result of merging lookup set <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,B_i)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>
into the intermediate <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>:</div><div id='member.lookup-6.sentence-2' class='sentence'><ul class='itemize'><li id='member.lookup-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#member.lookup-6.1'>(6.1)</a></div><div id='member.lookup-6.1.sentence-1' class='sentence'>If each of the subobject members of <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,B_i)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a base class
subobject of at least one of the subobject members of <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>, or if
<span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,B_i)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is empty, <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is unchanged and the merge is complete<a class='hidden_link' href='#member.lookup-6.1.sentence-1'>.</a></div> <div id='member.lookup-6.1.sentence-2' class='sentence'>Conversely, if each of the subobject members of <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a base class
subobject of at least one of the subobject members of <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,B_i)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>, or if
<span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is empty, the new <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a copy of <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,B_i)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#member.lookup-6.1.sentence-2'>.</a></div></li><li id='member.lookup-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#member.lookup-6.2'>(6.2)</a></div><div id='member.lookup-6.2.sentence-1' class='sentence'>Otherwise, if the declaration sets of <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,B_i)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>
differ, the merge is ambiguous: the new <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a lookup set with an
invalid declaration set and the union of the subobject sets<a class='hidden_link' href='#member.lookup-6.2.sentence-1'>.</a></div> <div id='member.lookup-6.2.sentence-2' class='sentence'>In
subsequent merges, an invalid declaration set is considered different
from any other<a class='hidden_link' href='#member.lookup-6.2.sentence-2'>.</a></div></li><li id='member.lookup-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#member.lookup-6.3'>(6.3)</a></div><div id='member.lookup-6.3.sentence-1' class='sentence'>Otherwise, the new <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a lookup set with the shared set of
declarations and the union of the subobject sets<a class='hidden_link' href='#member.lookup-6.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='member.lookup-7'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4297'>#</a></div><div id='member.lookup-7.sentence-1' class='sentence'>The result of name lookup for <span class='texttt'>f</span> in <span class='texttt'>C</span> is the declaration
set of <span class="mjx-chtml"><span class="mjx-math" aria-label="S(f,C)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#member.lookup-7.sentence-1'>.</a></div> <div id='member.lookup-7.sentence-2' class='sentence'>If it is an invalid set, the program is ill-formed<a class='hidden_link' href='#member.lookup-7.sentence-2'>.</a></div> <div id='member.lookup-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#member.lookup-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { int x; };                    <span class='comment'>// S(x,A) = { { <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>A</span> } }
</span>struct B { float x; };                  <span class='comment'>// S(x,B) = { { <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>B</span> } }
</span>struct C: public A, public B { };       <span class='comment'>// S(x,C) = { invalid, { <span class='tcode_in_codeblock'>A</span> in <span class='tcode_in_codeblock'>C</span>, <span class='tcode_in_codeblock'>B</span> in <span class='tcode_in_codeblock'>C</span> } }
</span>struct D: public virtual C { };         <span class='comment'>// S(x,D) = S(x,C)
</span>struct E: public virtual C { char x; }; <span class='comment'>// S(x,E) = { { <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>E</span> } }
</span>struct F: public D, public E { };       <span class='comment'>// S(x,F) = S(x,E)
</span>int main() {
  F f;
  f.x = 0;                              <span class='comment'>// OK, lookup finds <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span>
</span>}</pre><div id='member.lookup-7.sentence-3' class='sentence'><span class="mjx-chtml"><span class="mjx-math" aria-label="S(x,F)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.106em;">F</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is unambiguous because the <span class='texttt'>A</span> and <span class='texttt'>B</span> base
class subobjects of <span class='texttt'>D</span> are also base class subobjects of <span class='texttt'>E</span>, so
<span class="mjx-chtml"><span class="mjx-math" aria-label="S(x,D)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">D</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is discarded in the first merge step<a class='hidden_link' href='#member.lookup-7.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='member.lookup-8'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4319'>#</a></div><div id='member.lookup-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,overload_resolution_and'></a></span>If the name of an overloaded function is unambiguously found,
overload resolution (<a href='over.match'>[over.match]</a>) also takes place before access
control<a class='hidden_link' href='#member.lookup-8.sentence-1'>.</a></div> <div id='member.lookup-8.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':overloading,resolution,scoping_ambiguity'></a></span>Ambiguities can often be resolved by qualifying a name with its class name<a class='hidden_link' href='#member.lookup-8.sentence-2'>.</a></div> <div id='member.lookup-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#member.lookup-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  int f();
};</pre> <pre class='codeblock'>
struct B {
  int f();
};</pre> <pre class='codeblock'>
struct C : A, B {
  int f() { return A::f() + B::f(); }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='member.lookup-9'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4346'>#</a></div><div id='member.lookup-9.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#member.lookup-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='member.lookup-9.sentence-1' class='sentence'>A static member, a nested type or an enumerator defined in a base class
<span class='texttt'>T</span> can unambiguously be found even if an object has more than one
base class subobject of type <span class='texttt'>T</span><a class='hidden_link' href='#member.lookup-9.sentence-1'>.</a></div> <div id='member.lookup-9.sentence-2' class='sentence'>Two base class subobjects share
the non-static member subobjects of their common virtual base classes<a class='hidden_link' href='#member.lookup-9.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='member.lookup-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#member.lookup-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct V {
  int v;
};
struct A {
  int a;
  static int   s;
  enum { e };
};
struct B : A, virtual V { };
struct C : A, virtual V { };
struct D : B, C { };

void f(D* pd) {
  pd-&gt;v++;          <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>v</span> (virtual)
</span>  pd-&gt;s++;          <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>s</span> (static)
</span>  int i = pd-&gt;e;    <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>e</span> (enumerator)
</span>  pd-&gt;a++;          <span class='comment'>// error, ambiguous: two <span class='tcode_in_codeblock'>a</span>s in <span class='tcode_in_codeblock'>D</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='member.lookup-10'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4376'>#</a></div><div id='member.lookup-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#member.lookup-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='member.lookup-10.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':dominance,virtual_base_class'></a></span>When virtual base classes are used, a hidden declaration can be reached
along a path through the subobject lattice that does not pass through
the hiding declaration<a class='hidden_link' href='#member.lookup-10.sentence-1'>.</a></div> <div id='member.lookup-10.sentence-2' class='sentence'>This is not an ambiguity<a class='hidden_link' href='#member.lookup-10.sentence-2'>.</a></div> <div id='member.lookup-10.sentence-3' class='sentence'>The identical use with
non-virtual base classes is an ambiguity; in that case there is no
unique instance of the name that hides all the others<a class='hidden_link' href='#member.lookup-10.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='member.lookup-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#member.lookup-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct V { int f();  int x; };
struct W { int g();  int y; };
struct B : virtual V, W {
  int f();  int x;
  int g();  int y;
};
struct C : virtual V, W { };

struct D : B, C { void glorp(); };</pre><div class='figure' id='fig:name'><svg width="386pt" height="182pt"
 viewBox="0.00 0.00 386.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virt</title>
<!-- W1 -->
<g class="node">
<title>W1</title>
<text text-anchor="middle" x="27" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">W</text>
</g>
<!-- V -->
<g class="node">
<title>V</title>
<text text-anchor="middle" x="189" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">V</text>
</g>
<!-- W2 -->
<g class="node">
<title>W2</title>
<text text-anchor="middle" x="351" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">W</text>
</g>
<!-- B -->
<g class="node">
<title>B</title>
<text text-anchor="middle" x="108" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">B</text>
</g>
<!-- B&#45;&gt;W1 -->
<g class="edge">
<title>B&#45;&gt;W1</title>
<path fill="none" stroke="#000000" d="M87.9775,-104.3034C77.8744,-113.0345 65.464,-123.7595 54.4825,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="52.0698,-130.7088 46.7922,-139.8957 56.6468,-136.0052 52.0698,-130.7088"/>
</g>
<!-- B&#45;&gt;V -->
<g class="edge">
<title>B&#45;&gt;V</title>
<path fill="none" stroke="#000000" d="M128.0225,-104.3034C138.1256,-113.0345 150.536,-123.7595 161.5175,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="159.3532,-136.0052 169.2078,-139.8957 163.9302,-130.7088 159.3532,-136.0052"/>
</g>
<!-- C -->
<g class="node">
<title>C</title>
<text text-anchor="middle" x="270" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">C</text>
</g>
<!-- C&#45;&gt;V -->
<g class="edge">
<title>C&#45;&gt;V</title>
<path fill="none" stroke="#000000" d="M249.9775,-104.3034C239.8744,-113.0345 227.464,-123.7595 216.4825,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="214.0698,-130.7088 208.7922,-139.8957 218.6468,-136.0052 214.0698,-130.7088"/>
</g>
<!-- C&#45;&gt;W2 -->
<g class="edge">
<title>C&#45;&gt;W2</title>
<path fill="none" stroke="#000000" d="M290.0225,-104.3034C300.1256,-113.0345 312.536,-123.7595 323.5175,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="321.3532,-136.0052 331.2078,-139.8957 325.9302,-130.7088 321.3532,-136.0052"/>
</g>
<!-- D -->
<g class="node">
<title>D</title>
<text text-anchor="middle" x="189" y="-10.8" font-family="Times,serif" font-size="24.00" fill="#000000">D</text>
</g>
<!-- D&#45;&gt;B -->
<g class="edge">
<title>D&#45;&gt;B</title>
<path fill="none" stroke="#000000" d="M168.9775,-34.3034C158.8744,-43.0345 146.464,-53.7595 135.4825,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="133.0698,-60.7088 127.7922,-69.8957 137.6468,-66.0052 133.0698,-60.7088"/>
</g>
<!-- D&#45;&gt;C -->
<g class="edge">
<title>D&#45;&gt;C</title>
<path fill="none" stroke="#000000" d="M209.0225,-34.3034C219.1256,-43.0345 231.536,-53.7595 242.5175,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="240.3532,-66.0052 250.2078,-69.8957 244.9302,-60.7088 240.3532,-66.0052"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:name'>6</a> — Name lookup</div><div id='member.lookup-10.sentence-4' class='sentence'>The names declared in <span class='texttt'>V</span> and the left-hand instance of <span class='texttt'>W</span>
are hidden by those in <span class='texttt'>B</span>, but the names declared in the
right-hand instance of <span class='texttt'>W</span> are not hidden at all<a class='hidden_link' href='#member.lookup-10.sentence-4'>.</a></div> <pre class='codeblock'>
void D::glorp() {
  x++;              <span class='comment'>// OK: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;x</span> hides <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;x</span>
</span>  f();              <span class='comment'>// OK: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f()</span> hides <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;f()</span>
</span>  y++;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;y</span> and <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>W&#x200b;::&#x200b;y</span>
</span>  g();              <span class='comment'>// error: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;g()</span> and <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>W&#x200b;::&#x200b;g()</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <span class='indexparent'><a class='index' id=':ambiguity,class_conversion'></a></span></div><div class='para' id='member.lookup-11'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4418'>#</a></div><div id='member.lookup-11.sentence-1' class='sentence'>An explicit or implicit conversion from a pointer to or
an expression designating an object
of a
derived class to a pointer or reference to one of its base classes shall
unambiguously refer to a unique object representing the base class<a class='hidden_link' href='#member.lookup-11.sentence-1'>.</a></div> <div id='member.lookup-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#member.lookup-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct V { };
struct A { };
struct B : A, virtual V { };
struct C : A, virtual V { };
struct D : B, C { };

void g() {
  D d;
  B* pb = &amp;d;
  A* pa = &amp;d;       <span class='comment'>// error, ambiguous: <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>A</span> or <span class='tcode_in_codeblock'>B</span>'s <span class='tcode_in_codeblock'>A</span>?
</span>  V* pv = &amp;d;       <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>V</span> subobject
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='member.lookup-12'><div class='marginalizedparent'><a class='marginalized' href='#member.lookup-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4441'>#</a></div><div id='member.lookup-12.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#member.lookup-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='member.lookup-12.sentence-1' class='sentence'>Even if the result of name lookup is unambiguous, use of a name found in
multiple subobjects might still be
ambiguous (<a href='conv.mem'>[conv.mem]</a>, <a href='expr.ref'>[expr.ref]</a>, <a href='#access.base'>[class.access.base]</a>)<a class='hidden_link' href='#member.lookup-12.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='member.lookup-12.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#member.lookup-12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B1 {
  void f();
  static void f(int);
  int i;
};
struct B2 {
  void f(double);
};
struct I1: B1 { };
struct I2: B1 { };

struct D: I1, I2, B2 {
  using B1::f;
  using B2::f;
  void g() {
    f();                        <span class='comment'>// Ambiguous conversion of <span class='tcode_in_codeblock'>this</span>
</span>    f(0);                       <span class='comment'>// Unambiguous (static)
</span>    f(0.0);                     <span class='comment'>// Unambiguous (only one <span class='tcode_in_codeblock'>B2</span>)
</span>    int B1::* mpB1 = &amp;D::i;     <span class='comment'>// Unambiguous
</span>    int D::* mpD = &amp;D::i;       <span class='comment'>// Ambiguous conversion
</span>  }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='access' class='section'><h2 ><a class='secnum' href='#access' style='min-width:88pt'>10.8</a> Member access control <a class='abbr_ref' href='class.access'>[class.access]</a></h2><span class='indexparent'><a class='index' id=':access_control'></a></span>


<div class='para' id='access-1'><div class='marginalizedparent'><a class='marginalized' href='#access-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4480'>#</a></div><div id='access-1.sentence-1' class='sentence'>A member of a class can be
<ul class='itemize'><li id='access-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access-1.1'>(1.1)</a></div><div id='access-1.1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,private'></a></span>private;
that is, its name can be used only by members and friends
of the class in which it is declared<a class='hidden_link' href='#access-1.1.sentence-1'>.</a></div></li><li id='access-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access-1.2'>(1.2)</a></div><div id='access-1.2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,protected'></a></span>protected;
that is, its name can be used only by members and friends
of the class in which it is declared, by classes derived from that class, and by their
friends (see <a href='#protected'>[class.protected]</a>)<a class='hidden_link' href='#access-1.2.sentence-1'>.</a></div></li><li id='access-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access-1.3'>(1.3)</a></div><div id='access-1.3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,public'></a></span>public;
that is, its name can be used anywhere without access restriction<a class='hidden_link' href='#access-1.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='access-2'><div class='marginalizedparent'><a class='marginalized' href='#access-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4500'>#</a></div><div id='access-2.sentence-1' class='sentence'>A member of a class can also access all the names to which the class has access<a class='hidden_link' href='#access-2.sentence-1'>.</a></div> <div id='access-2.sentence-2' class='sentence'>A local class of a member function may access
the same names that the member function itself may access<a class='hidden_link' href='#access-2.sentence-2'>.</a><a class='footnotenum' href='#footnote-116'>116</a></div></div><div class='para' id='access-3'><div class='marginalizedparent'><a class='marginalized' href='#access-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4507'>#</a></div><div id='access-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,member_name'></a></span><span class='indexparent'><a class='index' id=':access_control,default'></a></span>Members of a class defined with the keyword
<span class='texttt'>class</span>
are
<span class='texttt'>private</span>
by default<a class='hidden_link' href='#access-3.sentence-1'>.</a></div> <div id='access-3.sentence-2' class='sentence'>Members of a class defined with the keywords
<span class='texttt'>struct</span> or <span class='texttt'>union</span>
are public by default<a class='hidden_link' href='#access-3.sentence-2'>.</a></div> <div id='access-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X {
  int a;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private by default
</span>};

struct S {
  int a;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;a</span> is public by default
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access-4'><div class='marginalizedparent'><a class='marginalized' href='#access-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4532'>#</a></div><div id='access-4.sentence-1' class='sentence'>Access control is applied uniformly to all names, whether the names are
referred to from declarations or expressions<a class='hidden_link' href='#access-4.sentence-1'>.</a></div> <div id='access-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access-4.sentence-3' class='sentence'>Access control applies to names nominated by
friend declarations (<a href='#friend'>[class.friend]</a>) and
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i><span class='textit'>s</span><a class='hidden_link' href='#access-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='access-4.sentence-2' class='sentence'>
In the case of overloaded function names, access control is applied to
the function selected by overload resolution<a class='hidden_link' href='#access-4.sentence-2'>.</a></div> <div id='access-4.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access-4.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access-4.sentence-4' class='sentence'>Because access control applies to names, if access control is applied to a
typedef name, only the accessibility of the typedef name itself is considered<a class='hidden_link' href='#access-4.sentence-4'>.</a></div> <div id='access-4.sentence-5' class='sentence'>The accessibility of the entity referred to by the typedef is not considered<a class='hidden_link' href='#access-4.sentence-5'>.</a></div> <div id='access-4.sentence-6' class='sentence'>For example,</div><pre class='codeblock'>
class A {
  class B { };
public:
  typedef B BB;
};

void f() {
  A::BB x;          <span class='comment'>// OK, typedef name <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;BB</span> is public
</span>  A::B y;           <span class='comment'>// access error, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> is private
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access-5'><div class='marginalizedparent'><a class='marginalized' href='#access-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4562'>#</a></div><div id='access-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access-5.sentence-3' class='sentence'>Access to members and base classes is controlled, not their
visibility (<a href='basic.scope.hiding'>[basic.scope.hiding]</a>)<a class='hidden_link' href='#access-5.sentence-3'>.</a></div> <div id='access-5.sentence-4' class='sentence'>Names of members are still visible, and implicit conversions to base
classes are still considered, when those members and base classes are
inaccessible<a class='hidden_link' href='#access-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='access-5.sentence-1' class='sentence'>
The interpretation of a given construct is
established without regard to access control<a class='hidden_link' href='#access-5.sentence-1'>.</a></div> <div id='access-5.sentence-2' class='sentence'>If the interpretation
established makes use of inaccessible member names or base classes,
the construct is ill-formed<a class='hidden_link' href='#access-5.sentence-2'>.</a></div></div><div class='para' id='access-6'><div class='marginalizedparent'><a class='marginalized' href='#access-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4576'>#</a></div><div id='access-6.sentence-1' class='sentence'>All access controls in <a href='#access'>[class.access]</a> affect the ability to access a class member
name from the declaration of a particular
entity, including parts of the declaration preceding the name of the entity
being declared and, if the entity is a class, the definitions of members of
the class appearing outside the class's <i ><a href='class.mem#nt:member-specification'>member-specification</a></i>.
<div id='access-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access-6.sentence-2' class='sentence'>This access also applies to implicit references to constructors,
conversion functions, and destructors<a class='hidden_link' href='#access-6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='access-7'><div class='marginalizedparent'><a class='marginalized' href='#access-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4585'>#</a></div><div id='access-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A {
  typedef int I;    <span class='comment'>// private member
</span>  I f();
  friend I g(I);
  static I x;
  template&lt;int&gt; struct Q;
  template&lt;int&gt; friend struct R;
protected:
    struct B { };
};

A::I A::f() { return 0; }
A::I g(A::I p = A::x);
A::I g(A::I p) { return 0; }
A::I A::x = 0;
template&lt;A::I&gt; struct A::Q { };
template&lt;A::I&gt; struct R { };

struct D: A::B, A { };</pre><div id='access-7.sentence-1' class='sentence'>Here, all the uses of
<span class='texttt'>A&#x200b;::&#x200b;I</span>
are well-formed because
<span class='texttt'>A&#x200b;::&#x200b;f</span>,
<span class='texttt'>A&#x200b;::&#x200b;x</span>, and <span class='texttt'>A&#x200b;::&#x200b;Q</span>
are members of class
<span class='texttt'>A</span>
and
<span class='texttt'>g</span>
and <span class='texttt'>R</span> are friends of class
<span class='texttt'>A</span><a class='hidden_link' href='#access-7.sentence-1'>.</a></div> <div id='access-7.sentence-2' class='sentence'>This implies, for example, that access checking on the first use of
<span class='texttt'>A&#x200b;::&#x200b;I</span>
must be deferred until it is determined that this use of
<span class='texttt'>A&#x200b;::&#x200b;I</span>
is as the return type of a member of class
<span class='texttt'>A</span><a class='hidden_link' href='#access-7.sentence-2'>.</a></div> <div id='access-7.sentence-3' class='sentence'>Similarly, the use of <span class='texttt'>A&#x200b;::&#x200b;B</span> as a
<i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> is well-formed because <span class='texttt'>D</span>
is derived from <span class='texttt'>A</span>, so checking of <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i><span class='textit'>s</span>
must be deferred until the entire <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i> has been seen<a class='hidden_link' href='#access-7.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access-8'><div class='marginalizedparent'><a class='marginalized' href='#access-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4632'>#</a></div><div id='access-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':argument,access_checking_and_default'></a></span><span class='indexparent'><a class='index' id=':access_control,default_argument'></a></span>The names in a default argument (<a href='dcl.fct.default'>[dcl.fct.default]</a>) are
bound at the point of declaration, and access is checked at that
point rather than at any points of use of the default argument<a class='hidden_link' href='#access-8.sentence-1'>.</a></div> <div id='access-8.sentence-2' class='sentence'>Access checking for default arguments in function templates and in
member functions of class templates is performed as described in <a href='temp.inst'>[temp.inst]</a><a class='hidden_link' href='#access-8.sentence-2'>.</a></div></div><div class='para' id='access-9'><div class='marginalizedparent'><a class='marginalized' href='#access-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4641'>#</a></div><div id='access-9.sentence-1' class='sentence'>The names in a default <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> (<a href='temp.param'>[temp.param]</a>)
have their access checked in the context in which they appear rather than at any
points of use of the default <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><a class='hidden_link' href='#access-9.sentence-1'>.</a></div> <div id='access-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B { };
template &lt;class T&gt; class C {
protected:
  typedef T TT;
};

template &lt;class U, class V = typename U::TT&gt;
class D : public U { };

D &lt;C&lt;B&gt; &gt;* d;       <span class='comment'>// access error, <span class='tcode_in_codeblock'>C&#x200b;::&#x200b;TT</span> is protected
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-116'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-116'>116)</a></div><div id='footnote-116.sentence-1' class='sentence'>Access
permissions are thus transitive and cumulative to nested
and local classes<a class='hidden_link' href='#footnote-116.sentence-1'>.</a></div></div><div id='access.spec' class='section'><h3 ><a class='secnum' href='#access.spec' style='min-width:103pt'>10.8.1</a> Access specifiers <a class='abbr_ref' href='class.access.spec'>[class.access.spec]</a></h3><span class='indexparent'><a class='index' id=':access_specifier'></a></span><div class='para' id='access.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#access.spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4662'>#</a></div><div id='access.spec-1.sentence-1' class='sentence'>Member declarations can be labeled by an
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i>
(<a href='#derived'>[class.derived]</a>):</div><pre class='ncsimplebnf'><i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i> <span class='terminal'>:</span> <i ><a href='class.mem#nt:member-specification'>member-specification</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><div id='access.spec-1.sentence-2' class='sentence'>An
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i>
specifies the access rules for members following it
until the end of the class or until another
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i>
is encountered<a class='hidden_link' href='#access.spec-1.sentence-2'>.</a></div> <div id='access.spec-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access.spec-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X {
  int a;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private by default: <span class='tcode_in_codeblock'>class</span> used
</span>public:
  int b;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;b</span> is public
</span>  int c;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;c</span> is public
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access.spec-2'><div class='marginalizedparent'><a class='marginalized' href='#access.spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4689'>#</a></div><div id='access.spec-2.sentence-1' class='sentence'>Any number of access specifiers is allowed and no particular order is required<a class='hidden_link' href='#access.spec-2.sentence-1'>.</a></div> <div id='access.spec-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access.spec-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  int a;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;a</span> is public by default: <span class='tcode_in_codeblock'>struct</span> used
</span>protected:
  int b;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;b</span> is protected
</span>private:
  int c;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;c</span> is private
</span>public:
  int d;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;d</span> is public
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access.spec-3'><div class='marginalizedparent'><a class='marginalized' href='#access.spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4706'>#</a></div><div id='access.spec-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access.spec-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access.spec-3.sentence-1' class='sentence'>The effect of access control on the order of allocation
of data members is described in <a href='#mem'>[class.mem]</a><a class='hidden_link' href='#access.spec-3.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access.spec-4'><div class='marginalizedparent'><a class='marginalized' href='#access.spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4710'>#</a></div><div id='access.spec-4.sentence-1' class='sentence'>When a member is redeclared within its class definition,
the access specified at its redeclaration shall
be the same as at its initial declaration<a class='hidden_link' href='#access.spec-4.sentence-1'>.</a></div> <div id='access.spec-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access.spec-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  class A;
  enum E : int;
private:
  class A { };        <span class='comment'>// error: cannot change access
</span>  enum E: int { e0 }; <span class='comment'>// error: cannot change access
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access.spec-5'><div class='marginalizedparent'><a class='marginalized' href='#access.spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4727'>#</a></div><div id='access.spec-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access.spec-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access.spec-5.sentence-1' class='sentence'>In a derived class, the lookup of a base class name will find the
injected-class-name instead of the name of the base class in the scope
in which it was declared<a class='hidden_link' href='#access.spec-5.sentence-1'>.</a></div> <div id='access.spec-5.sentence-2' class='sentence'>The injected-class-name might be less accessible
than the name of the base class in the scope in which it was declared<a class='hidden_link' href='#access.spec-5.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <div id='access.spec-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access.spec-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A { };
class B : private A { };
class C : public B {
  A* p;             <span class='comment'>// error: injected-class-name <span class='tcode_in_codeblock'>A</span> is inaccessible
</span>  ::A* q;           <span class='comment'>// OK
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='access.base' class='section'><h3 ><a class='secnum' href='#access.base' style='min-width:103pt'>10.8.2</a> Accessibility of base classes and base class members <a class='abbr_ref' href='class.access.base'>[class.access.base]</a></h3><span class='indexparent'><a class='index' id=':access_control,base_class'></a></span><span class='indexparent'><a class='index' id=':access_specifier_'></a></span><span class='indexparent'><a class='index' id=':base_class,private'></a></span><span class='indexparent'><a class='index' id=':base_class,protected'></a></span><span class='indexparent'><a class='index' id=':base_class,public'></a></span><div class='para' id='access.base-1'><div class='marginalizedparent'><a class='marginalized' href='#access.base-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4753'>#</a></div><div id='access.base-1.sentence-1' class='sentence'>If a class is declared to be a base class (<a href='#derived'>[class.derived]</a>) for another class using the
<span class='texttt'>public</span>
access specifier, the
public members of the base class are accessible as
public members of the derived class and
protected members of the base class are accessible as
protected members of the derived class<a class='hidden_link' href='#access.base-1.sentence-1'>.</a></div> <div id='access.base-1.sentence-2' class='sentence'>If a class is declared to be a base class for another class using the
<span class='texttt'>protected</span>
access specifier, the
public and protected members of the base class are accessible as
protected members of the derived class<a class='hidden_link' href='#access.base-1.sentence-2'>.</a></div> <div id='access.base-1.sentence-3' class='sentence'>If a class is declared to be a base class for another class using the
private
access specifier, the
public and protected
members of the base class are accessible as private
members of the derived class<a class='hidden_link' href='#access.base-1.sentence-3'>.</a><a class='footnotenum' href='#footnote-117'>117</a></div></div><div class='para' id='access.base-2'><div class='marginalizedparent'><a class='marginalized' href='#access.base-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4776'>#</a></div><div id='access.base-2.sentence-1' class='sentence'>In the absence of an
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i>
for a base class,
<span class='texttt'>public</span>
is assumed when the derived class is
defined with the <i ><a href='class#nt:class-key'>class-key</a></i>
<span class='texttt'>struct</span>
and
<span class='texttt'>private</span>
is assumed when the class is
defined with the <i ><a href='class#nt:class-key'>class-key</a></i>
<span class='texttt'>class</span><a class='hidden_link' href='#access.base-2.sentence-1'>.</a></div> <div id='access.base-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access.base-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D1 : private B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D2 : public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D3 : B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };             <span class='comment'>// <span class='tcode_in_codeblock'>B</span> private by default
</span>struct D4 : public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct D5 : private B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct D6 : B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };            <span class='comment'>// <span class='tcode_in_codeblock'>B</span> public by default
</span>class D7 : protected B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct D8 : protected B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre><div id='access.base-2.sentence-2' class='sentence'>Here
<span class='texttt'>B</span>
is a public base of
<span class='texttt'>D2</span>,
<span class='texttt'>D4</span>,
and
<span class='texttt'>D6</span>,
a private base of
<span class='texttt'>D1</span>,
<span class='texttt'>D3</span>,
and
<span class='texttt'>D5</span>,
and a protected base of
<span class='texttt'>D7</span>
and
<span class='texttt'>D8</span><a class='hidden_link' href='#access.base-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access.base-3'><div class='marginalizedparent'><a class='marginalized' href='#access.base-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4821'>#</a></div><div id='access.base-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access.base-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access.base-3.sentence-1' class='sentence'>A member of a private base class might be inaccessible as an inherited
member name, but accessible directly<a class='hidden_link' href='#access.base-3.sentence-1'>.</a></div> <div id='access.base-3.sentence-2' class='sentence'>Because of the rules on pointer conversions (<a href='conv.ptr'>[conv.ptr]</a>) and explicit casts (<a href='expr.cast'>[expr.cast]</a>), a conversion from a pointer to a derived class to a pointer
to an inaccessible base class might be ill-formed if an implicit conversion
is used, but well-formed if an explicit cast is used<a class='hidden_link' href='#access.base-3.sentence-2'>.</a></div> <div id='access.base-3.sentence-3' class='sentence'>For example,</div><pre class='codeblock'>
class B {
public:
  int mi;                       <span class='comment'>// non-static member
</span>  static int si;                <span class='comment'>// static member
</span>};
class D : private B {
};
class DD : public D {
  void f();
};

void DD::f() {
  mi = 3;                       <span class='comment'>// error: <span class='tcode_in_codeblock'>mi</span> is private in <span class='tcode_in_codeblock'>D</span>
</span>  si = 3;                       <span class='comment'>// error: <span class='tcode_in_codeblock'>si</span> is private in <span class='tcode_in_codeblock'>D</span>
</span>  ::B  b;
  b.mi = 3;                     <span class='comment'>// OK (<span class='tcode_in_codeblock'>b.mi</span> is different from <span class='tcode_in_codeblock'>this-&gt;mi</span>)
</span>  b.si = 3;                     <span class='comment'>// OK (<span class='tcode_in_codeblock'>b.si</span> is different from <span class='tcode_in_codeblock'>this-&gt;si</span>)
</span>  ::B::si = 3;                  <span class='comment'>// OK
</span>  ::B* bp1 = this;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> is a private base class
</span>  ::B* bp2 = (::B*)this;        <span class='comment'>// OK with cast
</span>  bp2-&gt;mi = 3;                  <span class='comment'>// OK: access through a pointer to <span class='tcode_in_codeblock'>B</span>.
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access.base-4'><div class='marginalizedparent'><a class='marginalized' href='#access.base-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4856'>#</a></div><div id='access.base-4.sentence-1' class='sentence'>A base class
<span class='texttt'>B</span>
of
<span class='texttt'>N</span>
is
<a class='hidden_link' href='#def:accessible' id='def:accessible'><i >accessible</i></a>
at
<span class='textit'>R</span>,
if
<ul class='itemize'><li id='access.base-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access.base-4.1'>(4.1)</a></div><div id='access.base-4.1.sentence-1' class='sentence'>an invented public member of
<span class='texttt'>B</span>
would be a public member of
<span class='texttt'>N</span>, or</div></li><li id='access.base-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access.base-4.2'>(4.2)</a></div><div id='access.base-4.2.sentence-1' class='sentence'><span class='textit'>R</span>
occurs in a member or friend of class
<span class='texttt'>N</span>,
and an invented public member of
<span class='texttt'>B</span>
would be a private or protected member of
<span class='texttt'>N</span>, or</div></li><li id='access.base-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access.base-4.3'>(4.3)</a></div><div id='access.base-4.3.sentence-1' class='sentence'><span class='textit'>R</span>
occurs in a member or friend of a class
<span class='texttt'>P</span>
derived from
<span class='texttt'>N</span>,
and an invented public member of
<span class='texttt'>B</span>
would be a private or protected member of
<span class='texttt'>P</span>, or</div></li><li id='access.base-4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access.base-4.4'>(4.4)</a></div><div id='access.base-4.4.sentence-1' class='sentence'>there exists a class
<span class='texttt'>S</span>
such that
<span class='texttt'>B</span>
is a base class of
<span class='texttt'>S</span>
accessible at
<span class='textit'>R</span>
and
<span class='texttt'>S</span>
is a base class of
<span class='texttt'>N</span>
accessible at
<span class='textit'>R</span><a class='hidden_link' href='#access.base-4.4.sentence-1'>.</a></div></li></ul></div><div id='access.base-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access.base-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B {
public:
  int m;
};

class S: private B {
  friend class N;
};

class N: private S {
  void f() {
    B* p = this;    <span class='comment'>// OK because class <span class='tcode_in_codeblock'>S</span> satisfies the fourth condition above: <span class='tcode_in_codeblock'>B</span> is a base class of <span class='tcode_in_codeblock'>N</span>
</span>                    <span class='comment'>// accessible in <span class='tcode_in_codeblock'>f()</span> because <span class='tcode_in_codeblock'>B</span> is an accessible base class of <span class='tcode_in_codeblock'>S</span> and <span class='tcode_in_codeblock'>S</span> is an accessible
</span>                    <span class='comment'>// base class of <span class='tcode_in_codeblock'>N</span>.
</span>  }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access.base-5'><div class='marginalizedparent'><a class='marginalized' href='#access.base-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L4928'>#</a></div><div id='access.base-5.sentence-1' class='sentence'>If a base class is accessible, one can implicitly convert a pointer to
a derived class to a pointer to that base class (<a href='conv.ptr'>[conv.ptr]</a>, <a href='conv.mem'>[conv.mem]</a>)<a class='hidden_link' href='#access.base-5.sentence-1'>.</a></div> <div id='access.base-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access.base-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access.base-5.sentence-5' class='sentence'>It follows that
members and friends of a class
<span class='texttt'>X</span>
can implicitly convert an
<span class='texttt'>X*</span>
to a pointer to a private or protected immediate base class of
<span class='texttt'>X</span><a class='hidden_link' href='#access.base-5.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='access.base-5.sentence-2' class='sentence'>
The access to a member is affected by the class in which the member is
named<a class='hidden_link' href='#access.base-5.sentence-2'>.</a></div> <div id='access.base-5.sentence-3' class='sentence'>This naming class is the class in which the member name was looked
up and found<a class='hidden_link' href='#access.base-5.sentence-3'>.</a></div> <div id='access.base-5.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access.base-5.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access.base-5.sentence-6' class='sentence'>This class can be explicit, e.g., when a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
is used, or implicit, e.g., when a class member access operator (<a href='expr.ref'>[expr.ref]</a>) is used (including cases where an implicit
“<span class='texttt'>this-&gt;</span>”
is
added)<a class='hidden_link' href='#access.base-5.sentence-6'>.</a></div> <div id='access.base-5.sentence-7' class='sentence'>If both a class member access operator and a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
are used to name the member (as in
<span class='texttt'>p-&gt;T&#x200b;::&#x200b;m</span>),
the class naming the member is the class denoted by the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
of the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
(that is,
<span class='texttt'>T</span>)<a class='hidden_link' href='#access.base-5.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='access.base-5.sentence-4' class='sentence'>
A member
<span class='texttt'>m</span>
is accessible at the point
<span class='textit'>R</span>
when named in class
<span class='texttt'>N</span>
if
<ul class='itemize'><li id='access.base-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access.base-5.1'>(5.1)</a></div><div id='access.base-5.1.sentence-1' class='sentence'><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is public, or</div></li><li id='access.base-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access.base-5.2'>(5.2)</a></div><div id='access.base-5.2.sentence-1' class='sentence'><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is private, and
<span class='textit'>R</span>
occurs in a member or friend of class
<span class='texttt'>N</span>,
or</div></li><li id='access.base-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access.base-5.3'>(5.3)</a></div><div id='access.base-5.3.sentence-1' class='sentence'><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is protected, and
<span class='textit'>R</span>
occurs in a member or friend of class
<span class='texttt'>N</span>,
or in a member of a class
<span class='texttt'>P</span>
derived from
<span class='texttt'>N</span>,
where
<span class='texttt'>m</span>
as a member of
<span class='texttt'>P</span>
is public, private, or protected, or</div></li><li id='access.base-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#access.base-5.4'>(5.4)</a></div><div id='access.base-5.4.sentence-1' class='sentence'>there exists a base class
<span class='texttt'>B</span>
of
<span class='texttt'>N</span>
that is accessible at
<span class='textit'>R</span>,
and
<span class='texttt'>m</span>
is accessible at
<span class='textit'>R</span>
when named in class
<span class='texttt'>B</span><a class='hidden_link' href='#access.base-5.4.sentence-1'>.</a></div> <div id='access.base-5.4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access.base-5.4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B;
class A {
private:
  int i;
  friend void f(B*);
};
class B : public A { };
void f(B* p) {
  p-&gt;i = 1;         <span class='comment'>// OK: <span class='tcode_in_codeblock'>B*</span> can be implicitly converted to <span class='tcode_in_codeblock'>A*</span>, and <span class='tcode_in_codeblock'>f</span> has access to <span class='tcode_in_codeblock'>i</span> in <span class='tcode_in_codeblock'>A</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div></div><div class='para' id='access.base-6'><div class='marginalizedparent'><a class='marginalized' href='#access.base-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5031'>#</a></div><div id='access.base-6.sentence-1' class='sentence'>If a class member access operator, including an implicit
“<span class='texttt'>this-&gt;</span>”,
is used to access a non-static data member or non-static
member function, the reference is ill-formed if the
left operand (considered as a pointer in the
“<span class='texttt'>.</span>”
operator case) cannot be implicitly converted to a
pointer to the naming class of the right operand<a class='hidden_link' href='#access.base-6.sentence-1'>.</a></div> <div id='access.base-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#access.base-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='access.base-6.sentence-2' class='sentence'>This requirement is in addition to the requirement that
the member be accessible as named<a class='hidden_link' href='#access.base-6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-117'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-117'>117)</a></div><div id='footnote-117.sentence-1' class='sentence'>As specified previously in <a href='#access'>[class.access]</a>,
private members of a base class remain inaccessible even to derived classes
unless friend
declarations within the base class definition are used to grant access explicitly<a class='hidden_link' href='#footnote-117.sentence-1'>.</a></div></div></div><div id='friend' class='section'><h3 ><a class='secnum' href='#friend' style='min-width:103pt'>10.8.3</a> Friends <a class='abbr_ref' href='class.friend'>[class.friend]</a></h3><span class='indexparent'><a class='index' id=':friend_function,access_and'></a></span><span class='indexparent'><a class='index' id=':access_control,friend_function'></a></span><div class='para' id='friend-1'><div class='marginalizedparent'><a class='marginalized' href='#friend-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5049'>#</a></div><div id='friend-1.sentence-1' class='sentence'>A friend of a class is a function or class that is
given permission to use the private and protected member names from the class<a class='hidden_link' href='#friend-1.sentence-1'>.</a></div> <div id='friend-1.sentence-2' class='sentence'>A class specifies its friends, if any, by way of friend declarations<a class='hidden_link' href='#friend-1.sentence-2'>.</a></div> <div id='friend-1.sentence-3' class='sentence'>Such declarations give special access rights to the friends, but they
do not make the nominated friends members of the befriending class<a class='hidden_link' href='#friend-1.sentence-3'>.</a></div> <div id='friend-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='friend-1.sentence-4' class='sentence'>The following example illustrates the differences between
members and friends:
<span class='indexparent'><a class='index' id=':friend_function,member_function_and'></a></span>
<pre class='codeblock'>
class X {
  int a;
  friend void friend_set(X*, int);
public:
  void member_set(int);
};

void friend_set(X* p, int i) { p-&gt;a = i; }
void X::member_set(int i) { a = i; }

void f() {
  X obj;
  friend_set(&amp;obj,10);
  obj.member_set(10);
}</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-2'><div class='marginalizedparent'><a class='marginalized' href='#friend-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5079'>#</a></div><div id='friend-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend,class_access_and'></a></span>Declaring a class to be a friend implies that the names of private and
protected members from the class granting friendship can be accessed in the
<i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i><span class='textit'>s</span> and member declarations of the befriended
class<a class='hidden_link' href='#friend-2.sentence-1'>.</a></div> <div id='friend-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A {
  class B { };
  friend class X;
};

struct X : A::B {               <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to friend
</span>  A::B mx;                      <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to member of friend
</span>  class Y {
    A::B my;                    <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to nested member of friend
</span>  };
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='friend-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X {
  enum { a=100 };
  friend class Y;
};

class Y {
  int v[X::a];                  <span class='comment'>// OK, <span class='tcode_in_codeblock'>Y</span> is a friend of <span class='tcode_in_codeblock'>X</span>
</span>};

class Z {
  int v[X::a];                  <span class='comment'>// error: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='friend-2.sentence-2' class='sentence'>A class shall not be defined in a friend declaration<a class='hidden_link' href='#friend-2.sentence-2'>.</a></div> <div id='friend-2.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-2.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A {
  friend class B { };           <span class='comment'>// error: cannot define class in friend declaration
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-3'><div class='marginalizedparent'><a class='marginalized' href='#friend-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5126'>#</a></div><div id='friend-3.sentence-1' class='sentence'>A friend declaration that does not declare a function
shall have one of the following forms:</div><pre class='ncsimplebnf'><span class='terminal'>friend</span> <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> <span class='terminal'>;</span>
<span class='terminal'>friend</span> <i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i> <span class='terminal'>;</span>
<span class='terminal'>friend</span> <i ><a href='temp.res#nt:typename-specifier'>typename-specifier</a></i> <span class='terminal'>;</span>
</pre><div id='friend-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#friend-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='friend-3.sentence-3' class='sentence'>A friend declaration may be the
<i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> in a <i ><a href='temp#nt:template-declaration'>template-declaration</a></i>
(<a href='temp'>[temp]</a>, <a href='temp.friend'>[temp.friend]</a>)<a class='hidden_link' href='#friend-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='friend-3.sentence-2' class='sentence'> If the
type specifier in a <span class='texttt'>friend</span> declaration designates a (possibly
cv-qualified) class type, that class is declared as a friend; otherwise, the
friend declaration is ignored<a class='hidden_link' href='#friend-3.sentence-2'>.</a></div> <div id='friend-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class C;
typedef C Ct;

class X1 {
  friend C;                     <span class='comment'>// OK: <span class='tcode_in_codeblock'>class C</span> is a friend
</span>};

class X2 {
  friend Ct;                    <span class='comment'>// OK: <span class='tcode_in_codeblock'>class C</span> is a friend
</span>  friend D;                     <span class='comment'>// error: no type-name <span class='tcode_in_codeblock'>D</span> in scope
</span>  friend class D;               <span class='comment'>// OK: elaborated-type-specifier declares new class
</span>};

template &lt;typename T&gt; class R {
  friend T;
};

R&lt;C&gt; rc;                        <span class='comment'>// <span class='tcode_in_codeblock'>class C</span> is a friend of <span class='tcode_in_codeblock'>R&lt;C&gt;</span>
</span>R&lt;int&gt; Ri;                      <span class='comment'>// OK: <span class='tcode_in_codeblock'>"friend int;"</span> is ignored
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-4'><div class='marginalizedparent'><a class='marginalized' href='#friend-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5166'>#</a></div><div id='friend-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend_function,linkage_of'></a></span>A function first declared in a friend declaration
has the linkage of the namespace of which it is a member (<a href='basic.link'>[basic.link]</a>)<a class='hidden_link' href='#friend-4.sentence-1'>.</a></div> <div id='friend-4.sentence-2' class='sentence'>Otherwise, the function retains its previous linkage (<a href='dcl.stc'>[dcl.stc]</a>)<a class='hidden_link' href='#friend-4.sentence-2'>.</a></div></div><div class='para' id='friend-5'><div class='marginalizedparent'><a class='marginalized' href='#friend-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5172'>#</a></div><div id='friend-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':declaration,overloaded_name_and_friend'></a></span>When a friend
declaration refers to an overloaded name or operator, only the function specified
by the parameter types becomes a friend<a class='hidden_link' href='#friend-5.sentence-1'>.</a></div> <div id='friend-5.sentence-2' class='sentence'>A member function of a class
<span class='texttt'>X</span>
can be a friend of
a class
<span class='texttt'>Y</span><a class='hidden_link' href='#friend-5.sentence-2'>.</a></div> <span class='indexparent'><a class='index' id=':member_function,friend'></a></span><div id='friend-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class Y {
  friend char* X::foo(int);
  friend X::X(char);            <span class='comment'>// constructors can be friends
</span>  friend X::~X();               <span class='comment'>// destructors can be friends
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-6'><div class='marginalizedparent'><a class='marginalized' href='#friend-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5194'>#</a></div><div id='friend-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend_function,inline'></a></span>A function can be defined in a friend declaration of a class if and only if the
class is a non-local class (<a href='#local'>[class.local]</a>), the function name is unqualified,
and the function has namespace scope<a class='hidden_link' href='#friend-6.sentence-1'>.</a></div> <div id='friend-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class M {
  friend void f() { }           <span class='comment'>// definition of global <span class='tcode_in_codeblock'>f</span>, a friend of <span class='tcode_in_codeblock'>M</span>,
</span>                                <span class='comment'>// not the definition of a member function
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-7'><div class='marginalizedparent'><a class='marginalized' href='#friend-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5209'>#</a></div><div id='friend-7.sentence-1' class='sentence'>Such a function is implicitly an inline function (<a href='dcl.inline'>[dcl.inline]</a>)<a class='hidden_link' href='#friend-7.sentence-1'>.</a></div> <div id='friend-7.sentence-2' class='sentence'>A friend
function defined in a class is in the (lexical) scope of the class in which it is defined<a class='hidden_link' href='#friend-7.sentence-2'>.</a></div> <div id='friend-7.sentence-3' class='sentence'>A friend function defined outside the class is not (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>)<a class='hidden_link' href='#friend-7.sentence-3'>.</a></div></div><div class='para' id='friend-8'><div class='marginalizedparent'><a class='marginalized' href='#friend-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5215'>#</a></div><div id='friend-8.sentence-1' class='sentence'>No
<i ><a href='dcl.stc#nt:storage-class-specifier'>storage-class-specifier</a></i>
shall appear in the
<i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i>
of a friend declaration<a class='hidden_link' href='#friend-8.sentence-1'>.</a></div></div><div class='para' id='friend-9'><div class='marginalizedparent'><a class='marginalized' href='#friend-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5222'>#</a></div><div id='friend-9.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend,access_specifier_and'></a></span>A name nominated by a friend declaration shall be accessible in the scope of the
class containing the friend declaration<a class='hidden_link' href='#friend-9.sentence-1'>.</a></div> <div id='friend-9.sentence-2' class='sentence'>The meaning of the friend declaration is the same whether the friend declaration
appears in the private, protected, or public (<a href='#mem'>[class.mem]</a>)
portion of the class
<i ><a href='class.mem#nt:member-specification'>member-specification</a></i><a class='hidden_link' href='#friend-9.sentence-2'>.</a></div></div><div class='para' id='friend-10'><div class='marginalizedparent'><a class='marginalized' href='#friend-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5231'>#</a></div><div id='friend-10.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend,inheritance_and'></a></span>Friendship is neither inherited nor transitive<a class='hidden_link' href='#friend-10.sentence-1'>.</a></div> <div id='friend-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A {
  friend class B;
  int a;
};

class B {
  friend class C;
};

class C  {
  void f(A* p) {
    p-&gt;a++;         <span class='comment'>// error: <span class='tcode_in_codeblock'>C</span> is not a friend of <span class='tcode_in_codeblock'>A</span> despite being a friend of a friend
</span>  }
};

class D : public B  {
  void f(A* p) {
    p-&gt;a++;         <span class='comment'>// error: <span class='tcode_in_codeblock'>D</span> is not a friend of <span class='tcode_in_codeblock'>A</span> despite being derived from a friend
</span>  }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='friend-11'><div class='marginalizedparent'><a class='marginalized' href='#friend-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5260'>#</a></div><div id='friend-11.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':local_class,friend'></a></span><span class='indexparent'><a class='index' id=':friend,local_class_and'></a></span>If a friend declaration appears in a local class (<a href='#local'>[class.local]</a>) and the
name specified is an unqualified name, a prior declaration is looked
up without considering scopes that are outside the innermost enclosing
non-class scope<a class='hidden_link' href='#friend-11.sentence-1'>.</a></div> <div id='friend-11.sentence-2' class='sentence'>For a friend function declaration, if there is no
prior declaration, the program is ill-formed<a class='hidden_link' href='#friend-11.sentence-2'>.</a></div> <div id='friend-11.sentence-3' class='sentence'>For a friend class
declaration, if there is no prior declaration, the class that is
specified belongs to the innermost enclosing non-class scope, but if it is
subsequently referenced, its name is not found by name lookup
until a matching declaration is provided in the innermost enclosing
non-class scope<a class='hidden_link' href='#friend-11.sentence-3'>.</a></div> <div id='friend-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#friend-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X;
void a();
void f() {
  class Y;
  extern void b();
  class A {
  friend class X;   <span class='comment'>// OK, but <span class='tcode_in_codeblock'>X</span> is a local class, not <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span>
</span>  friend class Y;   <span class='comment'>// OK
</span>  friend class Z;   <span class='comment'>// OK, introduces local class <span class='tcode_in_codeblock'>Z</span>
</span>  friend void a();  <span class='comment'>// error, <span class='tcode_in_codeblock'>&#x200b;::&#x200b;a</span> is not considered
</span>  friend void b();  <span class='comment'>// OK
</span>  friend void c();  <span class='comment'>// error
</span>  };
  X* px;            <span class='comment'>// OK, but <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span> is found
</span>  Z* pz;            <span class='comment'>// error, no <span class='tcode_in_codeblock'>Z</span> is found
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='protected' class='section'><h3 ><a class='secnum' href='#protected' style='min-width:103pt'>10.8.4</a> Protected member access <a class='abbr_ref' href='class.protected'>[class.protected]</a></h3><span class='indexparent'><a class='index' id=':access_control,protected_'></a></span><div class='para' id='protected-1'><div class='marginalizedparent'><a class='marginalized' href='#protected-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5300'>#</a></div><div id='protected-1.sentence-1' class='sentence'>An additional access check beyond those described earlier in <a href='#access'>[class.access]</a>
is applied when a non-static data member or non-static member function is a
protected member of its naming class (<a href='#access.base'>[class.access.base]</a>)<a class='hidden_link' href='#protected-1.sentence-1'>.</a><a class='footnotenum' href='#footnote-118'>118</a></div> <div id='protected-1.sentence-2' class='sentence'>
As described earlier, access to a protected member is granted because the
reference occurs in a friend or member of some class <span class='texttt'>C</span><a class='hidden_link' href='#protected-1.sentence-2'>.</a></div> <div id='protected-1.sentence-3' class='sentence'>If the access is
to form a pointer to member (<a href='expr.unary.op'>[expr.unary.op]</a>), the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> shall denote <span class='texttt'>C</span> or a class derived from
<span class='texttt'>C</span><a class='hidden_link' href='#protected-1.sentence-3'>.</a></div> <div id='protected-1.sentence-4' class='sentence'>All other accesses involve a (possibly implicit) object
expression (<a href='expr.ref'>[expr.ref]</a>)<a class='hidden_link' href='#protected-1.sentence-4'>.</a></div> <div id='protected-1.sentence-5' class='sentence'>In this case, the class of the object expression shall be
<span class='texttt'>C</span> or a class derived from <span class='texttt'>C</span><a class='hidden_link' href='#protected-1.sentence-5'>.</a></div> <div id='protected-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#protected-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B {
protected:
  int i;
  static int j;
};

class D1 : public B {
};

class D2 : public B {
  friend void fr(B*,D1*,D2*);
  void mem(B*,D1*);
};

void fr(B* pb, D1* p1, D2* p2) {
  pb-&gt;i = 1;                    <span class='comment'>// ill-formed
</span>  p1-&gt;i = 2;                    <span class='comment'>// ill-formed
</span>  p2-&gt;i = 3;                    <span class='comment'>// OK (access through a <span class='tcode_in_codeblock'>D2</span>)
</span>  p2-&gt;B::i = 4;                 <span class='comment'>// OK (access through a <span class='tcode_in_codeblock'>D2</span>, even though naming class is <span class='tcode_in_codeblock'>B</span>)
</span>  int B::* pmi_B = &amp;B::i;       <span class='comment'>// ill-formed
</span>  int B::* pmi_B2 = &amp;D2::i;     <span class='comment'>// OK (type of <span class='tcode_in_codeblock'>&amp;D2&#x200b;::&#x200b;i</span> is <span class='tcode_in_codeblock'>int B&#x200b;::&#x200b;*</span>)
</span>  B::j = 5;                     <span class='comment'>// ill-formed (not a friend of naming class <span class='tcode_in_codeblock'>B</span>)
</span>  D2::j = 6;                    <span class='comment'>// OK (because refers to static member)
</span>}

void D2::mem(B* pb, D1* p1) {
  pb-&gt;i = 1;                    <span class='comment'>// ill-formed
</span>  p1-&gt;i = 2;                    <span class='comment'>// ill-formed
</span>  i = 3;                        <span class='comment'>// OK (access through <span class='tcode_in_codeblock'>this</span>)
</span>  B::i = 4;                     <span class='comment'>// OK (access through <span class='tcode_in_codeblock'>this</span>, qualification ignored)
</span>  int B::* pmi_B = &amp;B::i;       <span class='comment'>// ill-formed
</span>  int B::* pmi_B2 = &amp;D2::i;     <span class='comment'>// OK
</span>  j = 5;                        <span class='comment'>// OK (because <span class='tcode_in_codeblock'>j</span> refers to static member)
</span>  B::j = 6;                     <span class='comment'>// OK (because <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;j</span> refers to static member)
</span>}

void g(B* pb, D1* p1, D2* p2) {
  pb-&gt;i = 1;                    <span class='comment'>// ill-formed
</span>  p1-&gt;i = 2;                    <span class='comment'>// ill-formed
</span>  p2-&gt;i = 3;                    <span class='comment'>// ill-formed
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-118'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-118'>118)</a></div><div id='footnote-118.sentence-1' class='sentence'>This
additional check does not apply to other members,
e.g., static data members or enumerator member constants<a class='hidden_link' href='#footnote-118.sentence-1'>.</a></div></div></div><div id='access.virt' class='section'><h3 ><a class='secnum' href='#access.virt' style='min-width:103pt'>10.8.5</a> Access to virtual functions <a class='abbr_ref' href='class.access.virt'>[class.access.virt]</a></h3><span class='indexparent'><a class='index' id=':access_control,virtual_function'></a></span><div class='para' id='access.virt-1'><div class='marginalizedparent'><a class='marginalized' href='#access.virt-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5363'>#</a></div><div id='access.virt-1.sentence-1' class='sentence'>The access rules (<a href='#access'>[class.access]</a>) for a virtual function are determined by its declaration
and are not affected by the rules for a function that later overrides it<a class='hidden_link' href='#access.virt-1.sentence-1'>.</a></div> <div id='access.virt-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access.virt-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B {
public:
  virtual int f();
};

class D : public B {
private:
  int f();
};

void f() {
  D d;
  B* pb = &amp;d;
  D* pd = &amp;d;

  pb-&gt;f();                      <span class='comment'>// OK: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f()</span> is public, <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f()</span> is invoked
</span>  pd-&gt;f();                      <span class='comment'>// error: <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f()</span> is private
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='access.virt-2'><div class='marginalizedparent'><a class='marginalized' href='#access.virt-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5390'>#</a></div><div id='access.virt-2.sentence-1' class='sentence'>Access is checked at the call point using the type of the expression used
to denote the object for which the member function is called
(<span class='texttt'>B*</span>
in the example above)<a class='hidden_link' href='#access.virt-2.sentence-1'>.</a></div> <div id='access.virt-2.sentence-2' class='sentence'>The access of the member function in the class in which it was defined
(<span class='texttt'>D</span>
in the example above) is in general not known<a class='hidden_link' href='#access.virt-2.sentence-2'>.</a></div></div></div><div id='paths' class='section'><h3 ><a class='secnum' href='#paths' style='min-width:103pt'>10.8.6</a> Multiple access <a class='abbr_ref' href='class.paths'>[class.paths]</a></h3><span class='indexparent'><a class='index' id=':access_control,multiple_access'></a></span><div class='para' id='paths-1'><div class='marginalizedparent'><a class='marginalized' href='#paths-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5402'>#</a></div><div id='paths-1.sentence-1' class='sentence'>If a name can be reached by several paths through a multiple inheritance
graph, the access is that of the path that gives most access<a class='hidden_link' href='#paths-1.sentence-1'>.</a></div> <div id='paths-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#paths-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class W { public: void f(); };
class A : private virtual W { };
class B : public virtual W { };
class C : public A, public B {
  void f() { W::f(); }          <span class='comment'>// OK
</span>};</pre><div id='paths-1.sentence-2' class='sentence'>Since
<span class='texttt'>W&#x200b;::&#x200b;f()</span>
is available to
<span class='texttt'>C&#x200b;::&#x200b;f()</span>
along the public path through
<span class='texttt'>B</span>,
access is allowed<a class='hidden_link' href='#paths-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='access.nest' class='section'><h3 ><a class='secnum' href='#access.nest' style='min-width:103pt'>10.8.7</a> Nested classes <a class='abbr_ref' href='class.access.nest'>[class.access.nest]</a></h3><span class='indexparent'><a class='index' id=':access_control,nested_class'></a></span><span class='indexparent'><a class='index' id=':member_function,nested_class'></a></span><div class='para' id='access.nest-1'><div class='marginalizedparent'><a class='marginalized' href='#access.nest-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5429'>#</a></div><div id='access.nest-1.sentence-1' class='sentence'>A nested class is a member and as such has the same access rights as any other member<a class='hidden_link' href='#access.nest-1.sentence-1'>.</a></div> <div id='access.nest-1.sentence-2' class='sentence'>The members of an enclosing class have no special access to members of a nested
class; the usual access rules (<a href='#access'>[class.access]</a>) shall be obeyed<a class='hidden_link' href='#access.nest-1.sentence-2'>.</a></div> <div id='access.nest-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#access.nest-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class E {
  int x;
  class B { };

  class I {
    B b;                        <span class='comment'>// OK: <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;I</span> can access <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;B</span>
</span>    int y;
    void f(E* p, int i) {
      p-&gt;x = i;                 <span class='comment'>// OK: <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;I</span> can access <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span>
</span>    }
  };

  int g(I* p) {
    return p-&gt;y;                <span class='comment'>// error: <span class='tcode_in_codeblock'>I&#x200b;::&#x200b;y</span> is private
</span>  }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  </div></div></div><div id='init' class='section'><h2 ><a class='secnum' href='#init' style='min-width:88pt'>10.9</a> Initialization <a class='abbr_ref' href='class.init'>[class.init]</a></h2><span class='indexparent'><a class='index' id=':initialization,class_object'></a></span><span class='indexparent'><a class='index' id=':initialization,default_constructor_and'></a></span><span class='indexparent'><a class='index' id=':initialization,constructor_and'></a></span><div class='para' id='init-1'><div class='marginalizedparent'><a class='marginalized' href='#init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5460'>#</a></div><div id='init-1.sentence-1' class='sentence'>When no initializer is specified for an object of (possibly
cv-qualified) class type (or array thereof), or the initializer has
the form
<span class='texttt'>()</span>,
the object is initialized as specified in <a href='dcl.init'>[dcl.init]</a><a class='hidden_link' href='#init-1.sentence-1'>.</a></div></div><div class='para' id='init-2'><div class='marginalizedparent'><a class='marginalized' href='#init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5467'>#</a></div><div id='init-2.sentence-1' class='sentence'>An object of class type (or array thereof) can be explicitly initialized;
see <a href='#expl.init'>[class.expl.init]</a> and <a href='#base.init'>[class.base.init]</a><a class='hidden_link' href='#init-2.sentence-1'>.</a></div></div><div class='para' id='init-3'><div class='marginalizedparent'><a class='marginalized' href='#init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5471'>#</a></div><div id='init-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':order_of_execution,constructor_and_array'></a></span>When an array of class objects is initialized
(either explicitly or implicitly) and the elements are initialized by constructor,
the constructor shall be called for each element of the array,
following the subscript order; see <a href='dcl.array'>[dcl.array]</a><a class='hidden_link' href='#init-3.sentence-1'>.</a></div> <div id='init-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#init-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='init-3.sentence-2' class='sentence'>Destructors for the array elements are called in reverse order of their
construction<a class='hidden_link' href='#init-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='expl.init' class='section'><h3 ><a class='secnum' href='#expl.init' style='min-width:103pt'>10.9.1</a> Explicit initialization <a class='abbr_ref' href='class.expl.init'>[class.expl.init]</a></h3><span class='indexparent'><a class='index' id=':initialization,explicit'></a></span><span class='indexparent'><a class='index' id=':initialization,constructor_and_'></a></span><div class='para' id='expl.init-1'><div class='marginalizedparent'><a class='marginalized' href='#expl.init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5486'>#</a></div><div id='expl.init-1.sentence-1' class='sentence'>An object of class type can be initialized with a parenthesized
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>,
where the
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
is construed as an argument list for a constructor
that is called to initialize the object<a class='hidden_link' href='#expl.init-1.sentence-1'>.</a></div> <div id='expl.init-1.sentence-2' class='sentence'>Alternatively, a single
<i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i>
can be specified as an
<i ><a href='dcl.init#nt:initializer'>initializer</a></i>
using the
<span class='texttt'>=</span>
form of initialization<a class='hidden_link' href='#expl.init-1.sentence-2'>.</a></div> <div id='expl.init-1.sentence-3' class='sentence'>Either direct-initialization semantics or copy-initialization semantics apply;
see <a href='dcl.init'>[dcl.init]</a><a class='hidden_link' href='#expl.init-1.sentence-3'>.</a></div> <div id='expl.init-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.init-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct complex {
  complex();
  complex(double);
  complex(double,double);
};

complex sqrt(complex,complex);

complex a(1);                   <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex(double)</span> with argument <span class='tcode_in_codeblock'>1</span>
</span>complex b = a;                  <span class='comment'>// initialized as a copy of <span class='tcode_in_codeblock'>a</span>
</span>complex c = complex(1,2);       <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex(double,double)</span> with arguments <span class='tcode_in_codeblock'>1</span> and <span class='tcode_in_codeblock'>2</span>
</span>complex d = sqrt(b,c);          <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>sqrt(complex,complex)</span> with <span class='tcode_in_codeblock'>d</span> as its result object
</span>complex e;                      <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex()</span>
</span>complex f = 3;                  <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex(double)</span> with argument <span class='tcode_in_codeblock'>3</span>
</span>complex g = { 1, 2 };           <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex(double, double)</span> with arguments <span class='tcode_in_codeblock'>1</span> and <span class='tcode_in_codeblock'>2</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expl.init-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expl.init-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.init-1.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':initialization,overloaded_assignment_and'></a></span>Overloading of the assignment operator (<a href='over.ass'>[over.ass]</a>)
has no effect on initialization<a class='hidden_link' href='#expl.init-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.init-2'><div class='marginalizedparent'><a class='marginalized' href='#expl.init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5527'>#</a></div><div id='expl.init-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,array_of_class_objects'></a></span><span class='indexparent'><a class='index' id=':constructor,array_of_class_objects_and'></a></span>An object of class type can also be initialized by a
<i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i><a class='hidden_link' href='#expl.init-2.sentence-1'>.</a></div> <div id='expl.init-2.sentence-2' class='sentence'>List-initialization semantics apply;
see <a href='dcl.init'>[dcl.init]</a> and <a href='dcl.init.list'>[dcl.init.list]</a><a class='hidden_link' href='#expl.init-2.sentence-2'>.</a></div> <div id='expl.init-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#expl.init-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
complex v[6] = { 1, complex(1,2), complex(), 2 };</pre><div id='expl.init-2.sentence-3' class='sentence'>Here,
<span class='texttt'>complex&#x200b;::&#x200b;complex(double)</span>
is called for the initialization of
<span class='texttt'>v[0]</span>
and
<span class='texttt'>v[3]</span>,
<span class='texttt'>complex&#x200b;::&#x200b;complex(&#x200b;double, double)</span>
is called for the initialization of
<span class='texttt'>v[1]</span>,
<span class='texttt'>complex&#x200b;::&#x200b;complex()</span>
is called for the initialization
<span class='texttt'>v[2]</span>,
<span class='texttt'>v[4]</span>,
and
<span class='texttt'>v[5]</span><a class='hidden_link' href='#expl.init-2.sentence-3'>.</a></div> <div id='expl.init-2.sentence-4' class='sentence'>For another example,</div><pre class='codeblock'>
struct X {
  int i;
  float f;
  complex c;
} x = { 99, 88.8, 77.7 };</pre><div id='expl.init-2.sentence-5' class='sentence'>Here,
<span class='texttt'>x.i</span>
is initialized with 99,
<span class='texttt'>x.f</span>
is initialized with 88.8, and
<span class='texttt'>complex&#x200b;::&#x200b;complex(double)</span>
is called for the initialization of
<span class='texttt'>x.c</span><a class='hidden_link' href='#expl.init-2.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='expl.init-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expl.init-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.init-2.sentence-6' class='sentence'>Braces can be elided in the
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
for any aggregate, even if the aggregate has members of a class type with
user-defined type conversions; see <a href='dcl.init.aggr'>[dcl.init.aggr]</a><a class='hidden_link' href='#expl.init-2.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.init-3'><div class='marginalizedparent'><a class='marginalized' href='#expl.init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5579'>#</a></div><div id='expl.init-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expl.init-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.init-3.sentence-1' class='sentence'>If
<span class='texttt'>T</span>
is a class type with no default constructor,
any declaration of an object of type
<span class='texttt'>T</span>
(or array thereof) is ill-formed if no
<i ><a href='dcl.init#nt:initializer'>initializer</a></i>
is explicitly specified (see <a href='#init'>[class.init]</a> and <a href='dcl.init'>[dcl.init]</a>)<a class='hidden_link' href='#expl.init-3.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='expl.init-4'><div class='marginalizedparent'><a class='marginalized' href='#expl.init-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5591'>#</a></div><div id='expl.init-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#expl.init-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.init-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':order_of_execution,constructor_and_static_objects'></a></span>The order in which objects with static or thread storage duration
are initialized is described in <a href='basic.start.dynamic'>[basic.start.dynamic]</a> and <a href='stmt.dcl'>[stmt.dcl]</a><a class='hidden_link' href='#expl.init-4.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='base.init' class='section'><h3 ><a class='secnum' href='#base.init' style='min-width:103pt'>10.9.2</a> Initializing bases and members <a class='abbr_ref' href='class.base.init'>[class.base.init]</a></h3><span class='indexparent'><a class='index' id=':initialization,base_class'></a></span><span class='indexparent'><a class='index' id=':initialization,member'></a></span><div class='para' id='base.init-1'><div class='marginalizedparent'><a class='marginalized' href='#base.init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5602'>#</a></div><div id='base.init-1.sentence-1' class='sentence'>In the definition of a constructor for a class,
initializers for direct and virtual base class subobjects and
non-static data members can be specified by a
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>,
which has the form</div><pre class='bnf'><a class='nontermdef' href='#nt:ctor-initializer' id='nt:ctor-initializer'>ctor-initializer:</a>
&#9;<span class='terminal'>:</span> <i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:mem-initializer-list' id='nt:mem-initializer-list'>mem-initializer-list:</a>
&#9;<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i> <span class='terminal'>,</span> <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:mem-initializer' id='nt:mem-initializer'>mem-initializer:</a>
&#9;<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> <span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
&#9;<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:mem-initializer-id' id='nt:mem-initializer-id'>mem-initializer-id:</a>
&#9;<i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
&#9;<i ><a href='lex.name#nt:identifier'>identifier</a></i>
</pre></div><div class='para' id='base.init-2'><div class='marginalizedparent'><a class='marginalized' href='#base.init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5632'>#</a></div><div id='base.init-2.sentence-1' class='sentence'>In a <i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> an initial unqualified
<i ><a href='lex.name#nt:identifier'>identifier</a></i> is looked up in the scope of the constructor's class
and, if not found in that scope, it is looked up in the scope containing the
constructor's definition<a class='hidden_link' href='#base.init-2.sentence-1'>.</a></div> <div id='base.init-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base.init-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base.init-2.sentence-3' class='sentence'>If the constructor's class contains a member with the same name as a direct
or virtual base class of the class, a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
naming the member or base class and composed of a single identifier
refers to the class member<a class='hidden_link' href='#base.init-2.sentence-3'>.</a></div> <div id='base.init-2.sentence-4' class='sentence'>A
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
for the hidden base class may be specified using a qualified name<a class='hidden_link' href='#base.init-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='base.init-2.sentence-2' class='sentence'>
Unless the
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
names the constructor's class,
a non-static data member of the constructor's class, or
a direct or virtual base of that class,
the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is ill-formed<a class='hidden_link' href='#base.init-2.sentence-2'>.</a></div></div><div class='para' id='base.init-3'><div class='marginalizedparent'><a class='marginalized' href='#base.init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5656'>#</a></div><div id='base.init-3.sentence-1' class='sentence'>A
<i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i>
can initialize a base class using any <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> that denotes that base class type<a class='hidden_link' href='#base.init-3.sentence-1'>.</a></div> <div id='base.init-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { A(); };
typedef A global_A;
struct B { };
struct C: public A, public B { C(); };
C::C(): global_A() { }          <span class='comment'>// mem-initializer for base <span class='tcode_in_codeblock'>A</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-4'><div class='marginalizedparent'><a class='marginalized' href='#base.init-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5671'>#</a></div><div id='base.init-4.sentence-1' class='sentence'>If a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
is ambiguous because it designates both a direct non-virtual base class and
an inherited virtual base class, the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is ill-formed<a class='hidden_link' href='#base.init-4.sentence-1'>.</a></div> <div id='base.init-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { A(); };
struct B: public virtual A { };
struct C: public A, public B { C(); };
C::C(): A() { }                 <span class='comment'>// ill-formed: which <span class='tcode_in_codeblock'>A</span>?
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-5'><div class='marginalizedparent'><a class='marginalized' href='#base.init-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5688'>#</a></div><div id='base.init-5.sentence-1' class='sentence'>A
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>
may initialize a variant member of the
constructor's class<a class='hidden_link' href='#base.init-5.sentence-1'>.</a></div> <div id='base.init-5.sentence-2' class='sentence'>If a
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>
specifies more than one
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
for the same member or for the same base class,
the
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>
is ill-formed<a class='hidden_link' href='#base.init-5.sentence-2'>.</a></div></div><div class='para' id='base.init-6'><div class='marginalizedparent'><a class='marginalized' href='#base.init-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5702'>#</a></div><div id='base.init-6.sentence-1' class='sentence'>A <i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i> can delegate to another
constructor of the constructor's class using any
<i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> that denotes the constructor's class itself<a class='hidden_link' href='#base.init-6.sentence-1'>.</a></div> <div id='base.init-6.sentence-2' class='sentence'>If a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> designates the constructor's class,
it shall be the only <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>; the constructor
is a <a class='hidden_link' href='#def:delegating_constructor' id='def:delegating_constructor'><i>delegating constructor</i></a>, and the constructor selected by the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> is the <a class='hidden_link' href='#def:target_constructor' id='def:target_constructor'><i>target constructor</i></a><a class='hidden_link' href='#base.init-6.sentence-2'>.</a></div> <div id='base.init-6.sentence-3' class='sentence'>The target constructor is selected by overload resolution<a class='hidden_link' href='#base.init-6.sentence-3'>.</a></div> <div id='base.init-6.sentence-4' class='sentence'>Once the target constructor returns, the body of the delegating constructor
is executed<a class='hidden_link' href='#base.init-6.sentence-4'>.</a></div> <div id='base.init-6.sentence-5' class='sentence'>If a constructor delegates to itself directly or indirectly,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#base.init-6.sentence-5'>.</a></div> <div id='base.init-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct C {
  C( int ) { }                  <span class='comment'>// #1: non-delegating constructor
</span>  C(): C(42) { }                <span class='comment'>// #2: delegates to #1
</span>  C( char c ) : C(42.0) { }     <span class='comment'>// #3: ill-formed due to recursion with #4
</span>  C( double d ) : C('a') { }    <span class='comment'>// #4: ill-formed due to recursion with #3
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-7'><div class='marginalizedparent'><a class='marginalized' href='#base.init-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5725'>#</a></div><div id='base.init-7.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,base_class_'></a></span><span class='indexparent'><a class='index' id=':initialization,member_object'></a></span>The
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
or <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
in a
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is used to initialize the
designated subobject (or, in the case of a delegating constructor, the complete class object)
according to the initialization rules of <a href='dcl.init'>[dcl.init]</a> for direct-initialization<a class='hidden_link' href='#base.init-7.sentence-1'>.</a></div> <div id='base.init-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B1 { B1(int); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct B2 { B2(int); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct D : B1, B2 {
  D(int);
  B1 b;
  const int c;
};

D::D(int a) : B2(a+1), B1(a+2), c(a+3), b(a+4) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
D d(10);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='base.init-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base.init-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base.init-7.sentence-3' class='sentence'>
The initialization
performed by each <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
constitutes a full-expression (<a href='intro.execution'>[intro.execution]</a>)<a class='hidden_link' href='#base.init-7.sentence-3'>.</a></div> <div id='base.init-7.sentence-4' class='sentence'>Any expression in
a
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is evaluated as part of the full-expression that performs the initialization<a class='hidden_link' href='#base.init-7.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='base.init-7.sentence-2' class='sentence'>
A <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> where the <i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> denotes
a virtual base class is ignored during execution of a constructor of any class that is
not the most derived class<a class='hidden_link' href='#base.init-7.sentence-2'>.</a></div></div><div class='para' id='base.init-8'><div class='marginalizedparent'><a class='marginalized' href='#base.init-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5764'>#</a></div><div id='base.init-8.sentence-1' class='sentence'>A temporary expression bound to a reference member in a <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is ill-formed<a class='hidden_link' href='#base.init-8.sentence-1'>.</a></div> <div id='base.init-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  A() : v(42) { }   <span class='comment'>// error
</span>  const int&amp; v;
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-9'><div class='marginalizedparent'><a class='marginalized' href='#base.init-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5776'>#</a></div><div id='base.init-9.sentence-1' class='sentence'>In a non-delegating constructor, if
a given potentially constructed subobject is not designated by a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
(including the case where there is no
<i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i>
because the constructor has no
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>),
then</div><div id='base.init-9.sentence-2' class='sentence'><ul class='itemize'><li id='base.init-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base.init-9.1'>(9.1)</a></div><div id='base.init-9.1.sentence-1' class='sentence'>if the entity is a non-static data member that has
a default member initializer (<a href='#mem'>[class.mem]</a>) and either</div><div id='base.init-9.1.sentence-2' class='sentence'><ul class='itemize'><li id='base.init-9.1.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#base.init-9.1.1'>(9.1.1)</a></div><div id='base.init-9.1.1.sentence-1' class='sentence'>the constructor's class is a union (<a href='#union'>[class.union]</a>), and no other variant
member of that union is designated by a <i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> or</div></li><li id='base.init-9.1.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#base.init-9.1.2'>(9.1.2)</a></div><div id='base.init-9.1.2.sentence-1' class='sentence'>the constructor's class is not a union, and, if the entity is a member of an
anonymous union, no other member of that union is designated by a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>,</div></li></ul></div><div id='base.init-9.1.sentence-3' class='sentence'>the entity is initialized from its default member initializer
as specified in <a href='dcl.init'>[dcl.init]</a>;</div></li><li id='base.init-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base.init-9.2'>(9.2)</a></div><div id='base.init-9.2.sentence-1' class='sentence'>otherwise, if the entity is an anonymous union or a variant member (<a href='#union.anon'>[class.union.anon]</a>), no initialization is performed;</div></li><li id='base.init-9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base.init-9.3'>(9.3)</a></div><div id='base.init-9.3.sentence-1' class='sentence'>otherwise, the entity is default-initialized (<a href='dcl.init'>[dcl.init]</a>)<a class='hidden_link' href='#base.init-9.3.sentence-1'>.</a></div></li></ul></div><div id='base.init-9.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base.init-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base.init-9.sentence-4' class='sentence'>An abstract class (<a href='#abstract'>[class.abstract]</a>) is never a most derived
class, thus its constructors never initialize virtual base classes, therefore the
corresponding <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i><span class='textit'>s</span> may be omitted<a class='hidden_link' href='#base.init-9.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='base.init-9.sentence-3' class='sentence'>
An attempt to initialize more than one non-static data member of a union renders the
program ill-formed<a class='hidden_link' href='#base.init-9.sentence-3'>.</a></div> <span class='indexparent'><a class='index' id=':initialization,const_member'></a></span><span class='indexparent'><a class='index' id=':initialization,reference_member'></a></span><div id='base.init-9.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base.init-9.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base.init-9.sentence-5' class='sentence'>After the call to a constructor for class
<span class='texttt'>X</span>
for an object with automatic or dynamic storage duration
has completed, if
the constructor was not invoked as part of value-initialization and
a member of
<span class='texttt'>X</span>
is neither initialized nor
given a value
during execution of the <i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i> of the body of the constructor,
the member has an indeterminate value<a class='hidden_link' href='#base.init-9.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> 
<div id='base.init-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  A();
};

struct B {
  B(int);
};

struct C {
  C() { }               <span class='comment'>// initializes members as follows:
</span>  A a;                  <span class='comment'>// OK: calls <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;A()</span>
</span>  const B b;            <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> has no default constructor
</span>  int i;                <span class='comment'>// OK: <span class='tcode_in_codeblock'>i</span> has indeterminate value
</span>  int j = 5;            <span class='comment'>// OK: <span class='tcode_in_codeblock'>j</span> has the value <span class='tcode_in_codeblock'>5</span>
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-10'><div class='marginalizedparent'><a class='marginalized' href='#base.init-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5847'>#</a></div><div id='base.init-10.sentence-1' class='sentence'>If a given non-static data member has both a default member initializer
and a <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>, the initialization specified by the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> is performed, and the non-static data member's
default member initializer is ignored<a class='hidden_link' href='#base.init-10.sentence-1'>.</a></div> <div id='base.init-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='base.init-10.sentence-2' class='sentence'>Given
<pre class='codeblock'>
struct A {
  int i = /* some integer expression with side effects */ ;
  A(int arg) : i(arg) { }
  <span class='comment'>// ...
</span>};</pre></div><div id='base.init-10.sentence-3' class='sentence'>the <span class='texttt'>A(int)</span> constructor will simply initialize <span class='texttt'>i</span> to the value of
<span class='texttt'>arg</span>, and the
<span class='indexparent'><a class='index' id=':side_effects'></a></span>side effects in <span class='texttt'>i</span>'s default member initializer
will not take place<a class='hidden_link' href='#base.init-10.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-11'><div class='marginalizedparent'><a class='marginalized' href='#base.init-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5871'>#</a></div><div id='base.init-11.sentence-1' class='sentence'>A temporary expression bound to a reference member from a
default member initializer is ill-formed<a class='hidden_link' href='#base.init-11.sentence-1'>.</a></div> <div id='base.init-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  A() = default;        <span class='comment'>// OK
</span>  A(int v) : v(v) { }   <span class='comment'>// OK
</span>  const int&amp; v = 42;    <span class='comment'>// OK
</span>};
A a1;                   <span class='comment'>// error: ill-formed binding of temporary to reference
</span>A a2(1);                <span class='comment'>// OK, unfortunately
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-12'><div class='marginalizedparent'><a class='marginalized' href='#base.init-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5886'>#</a></div><div id='base.init-12.sentence-1' class='sentence'>In a non-delegating constructor, the destructor for each potentially constructed
subobject of class type is potentially invoked (<a href='#dtor'>[class.dtor]</a>)<a class='hidden_link' href='#base.init-12.sentence-1'>.</a></div> <div id='base.init-12.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base.init-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base.init-12.sentence-2' class='sentence'>This provision ensures that destructors can be called for fully-constructed
subobjects in case an exception is thrown (<a href='except.ctor'>[except.ctor]</a>)<a class='hidden_link' href='#base.init-12.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-13'><div class='marginalizedparent'><a class='marginalized' href='#base.init-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5892'>#</a></div><div id='base.init-13.sentence-1' class='sentence'>In a non-delegating constructor, initialization
proceeds in the following order:
<ul class='itemize'><li id='base.init-13.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base.init-13.1'>(13.1)</a></div><div id='base.init-13.1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,order_of_virtual_base_class'></a></span>First, and only for the constructor of the most derived class (<a href='intro.object'>[intro.object]</a>),
virtual base classes are initialized in the order they appear on a
depth-first left-to-right traversal of the directed acyclic graph of
base classes,
where “left-to-right” is the order of appearance of the base classes
in the derived class
<i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i><a class='hidden_link' href='#base.init-13.1.sentence-1'>.</a></div></li><li id='base.init-13.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base.init-13.2'>(13.2)</a></div><div id='base.init-13.2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,order_of_base_class'></a></span>Then, direct base classes are initialized in declaration order
as they appear in the
<i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>
(regardless of the order of the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i><span class='textit'>s</span>)<a class='hidden_link' href='#base.init-13.2.sentence-1'>.</a></div></li><li id='base.init-13.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base.init-13.3'>(13.3)</a></div><div id='base.init-13.3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,order_of_member'></a></span>Then, non-static data members are initialized in the order
they were declared in the class definition
(again regardless of the order of the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i><span class='textit'>s</span>)<a class='hidden_link' href='#base.init-13.3.sentence-1'>.</a></div></li><li id='base.init-13.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#base.init-13.4'>(13.4)</a></div><div id='base.init-13.4.sentence-1' class='sentence'>Finally, the <i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i> of the constructor
body  is executed<a class='hidden_link' href='#base.init-13.4.sentence-1'>.</a></div></li></ul></div><div id='base.init-13.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base.init-13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base.init-13.sentence-2' class='sentence'>The declaration order is mandated to ensure that base and member
subobjects are destroyed in the reverse order of initialization<a class='hidden_link' href='#base.init-13.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-14'><div class='marginalizedparent'><a class='marginalized' href='#base.init-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5928'>#</a></div><div id='base.init-14.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct V {
  V();
  V(int);
};

struct A : virtual V {
  A();
  A(int);
};

struct B : virtual V {
  B();
  B(int);
};

struct C : A, B, virtual V {
  C();
  C(int);
};

A::A(int i) : V(i) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
B::B(int i) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
C::C(int i) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

V v(1);             <span class='comment'>// use <span class='tcode_in_codeblock'>V(int)</span>
</span>A a(2);             <span class='comment'>// use <span class='tcode_in_codeblock'>V(int)</span>
</span>B b(3);             <span class='comment'>// use <span class='tcode_in_codeblock'>V()</span>
</span>C c(4);             <span class='comment'>// use <span class='tcode_in_codeblock'>V()</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-15'><div class='marginalizedparent'><a class='marginalized' href='#base.init-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L5962'>#</a></div><div id='base.init-15.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initializer,scope_of_member'></a></span>Names in the
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
or <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
of a
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
are evaluated in the scope of the constructor for which the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is specified<a class='hidden_link' href='#base.init-15.sentence-1'>.</a></div> <div id='base.init-15.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X {
  int a;
  int b;
  int i;
  int j;
public:
  const int&amp; r;
  X(int i): r(a), b(i), i(i), j(this-&gt;i) { }
};</pre><div id='base.init-15.sentence-2' class='sentence'>initializes
<span class='texttt'>X&#x200b;::&#x200b;r</span>
to refer to
<span class='texttt'>X&#x200b;::&#x200b;a</span>,
initializes
<span class='texttt'>X&#x200b;::&#x200b;b</span>
with the value of the constructor parameter
<span class='texttt'>i</span>,
initializes
<span class='texttt'>X&#x200b;::&#x200b;i</span>
with the value of the constructor parameter
<span class='texttt'>i</span>,
and initializes
<span class='texttt'>X&#x200b;::&#x200b;j</span>
with the value of
<span class='texttt'>X&#x200b;::&#x200b;i</span>;
this takes place each time an object of class
<span class='texttt'>X</span>
is created<a class='hidden_link' href='#base.init-15.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='base.init-15.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base.init-15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base.init-15.sentence-3' class='sentence'>Because the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
are evaluated in the scope of the constructor, the
<span class='texttt'>this</span>
pointer can be used in the
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
of a
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
to refer to the object being initialized<a class='hidden_link' href='#base.init-15.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-16'><div class='marginalizedparent'><a class='marginalized' href='#base.init-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6018'>#</a></div><div id='base.init-16.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,member_function_call_during'></a></span>Member functions (including virtual member functions, <a href='#virtual'>[class.virtual]</a>) can be
called for an object under construction<a class='hidden_link' href='#base.init-16.sentence-1'>.</a></div> <div id='base.init-16.sentence-2' class='sentence'>Similarly, an object under construction can be the operand of the
<span class='texttt'>typeid</span>
operator (<a href='expr.typeid'>[expr.typeid]</a>) or of a
<span class='texttt'>dynamic_&shy;cast</span> (<a href='expr.dynamic.cast'>[expr.dynamic.cast]</a>)<a class='hidden_link' href='#base.init-16.sentence-2'>.</a></div> <div id='base.init-16.sentence-3' class='sentence'>However, if these operations are performed in a
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>
(or in a function called directly or indirectly from a
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>)
before all the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i><span class='textit'>s</span>
for base classes have completed, the program has undefined behavior<a class='hidden_link' href='#base.init-16.sentence-3'>.</a></div> <div id='base.init-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A {
public:
  A(int);
};

class B : public A {
  int j;
public:
  int f();
  B() : A(f()),     <span class='comment'>// undefined: calls member function but base <span class='tcode_in_codeblock'>A</span> not yet initialized
</span>  j(f()) { }        <span class='comment'>// well-defined: bases are all initialized
</span>};

class C {
public:
  C(int);
};

class D : public B, C {
  int i;
public:
  D() : C(f()),     <span class='comment'>// undefined: calls member function but base <span class='tcode_in_codeblock'>C</span> not yet initialized
</span>  i(f()) { }        <span class='comment'>// well-defined: bases are all initialized
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-17'><div class='marginalizedparent'><a class='marginalized' href='#base.init-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6062'>#</a></div><div id='base.init-17.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#base.init-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='base.init-17.sentence-1' class='sentence'><a href='#cdtor'>[class.cdtor]</a> describes the result of virtual function calls,
<span class='texttt'>typeid</span>
and
<span class='texttt'>dynamic_&shy;cast</span>s
during construction for the well-defined cases;
that is, describes the
<a class='hidden_link' href='#def:polymorphic_behavior' id='def:polymorphic_behavior'><i>polymorphic behavior</i></a>
of an object under construction<a class='hidden_link' href='#base.init-17.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='base.init-18'><div class='marginalizedparent'><a class='marginalized' href='#base.init-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6074'>#</a></div><div id='base.init-18.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initializer,pack_expansion'></a></span>A <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> followed by an ellipsis is
a pack expansion (<a href='temp.variadic'>[temp.variadic]</a>) that initializes the base
classes specified by a pack expansion in the <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>
for the class<a class='hidden_link' href='#base.init-18.sentence-1'>.</a></div> <div id='base.init-18.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#base.init-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class... Mixins&gt;
class X : public Mixins... {
public:
  X(const Mixins&amp;... mixins) : Mixins(mixins)... { }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='inhctor.init' class='section'><h3 ><a class='secnum' href='#inhctor.init' style='min-width:103pt'>10.9.3</a> Initialization by inherited constructor <a class='abbr_ref' href='class.inhctor.init'>[class.inhctor.init]</a></h3><span class='indexparent'><a class='index' id=':initialization,by_inherited_constructor'></a></span><div class='para' id='inhctor.init-1'><div class='marginalizedparent'><a class='marginalized' href='#inhctor.init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6094'>#</a></div><div id='inhctor.init-1.sentence-1' class='sentence'>When a constructor for type <span class='texttt'>B</span> is invoked
to initialize an object of a different type <span class='texttt'>D</span>
(that is, when the constructor was inherited (<a href='namespace.udecl'>[namespace.udecl]</a>)),
initialization proceeds as if a defaulted default constructor
were used to initialize the <span class='texttt'>D</span> object and
each base class subobject from which the constructor was inherited,
except that the <span class='texttt'>B</span> subobject is initialized
by the invocation of the inherited constructor<a class='hidden_link' href='#inhctor.init-1.sentence-1'>.</a></div> <div id='inhctor.init-1.sentence-2' class='sentence'>The complete initialization is considered to be a single function call;
in particular, the initialization of the inherited constructor's parameters
is sequenced before the initialization of any part of the <span class='texttt'>D</span> object<a class='hidden_link' href='#inhctor.init-1.sentence-2'>.</a></div> <div id='inhctor.init-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inhctor.init-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B1 {
  B1(int, ...) { }
};

struct B2 {
  B2(double) { }
};

int get();

struct D1 : B1 {
  using B1::B1;     <span class='comment'>// inherits <span class='tcode_in_codeblock'>B1(int, ...)</span>
</span>  int x;
  int y = get();
};

void test() {
  D1 d(2, 3, 4);    <span class='comment'>// OK: <span class='tcode_in_codeblock'>B1</span> is initialized by calling <span class='tcode_in_codeblock'>B1(2, 3, 4)</span>,
</span>                    <span class='comment'>// then <span class='tcode_in_codeblock'>d.x</span> is default-initialized (no initialization is performed),
</span>                    <span class='comment'>// then <span class='tcode_in_codeblock'>d.y</span> is initialized by calling <span class='tcode_in_codeblock'>get()</span>
</span>  D1 e;             <span class='comment'>// error: <span class='tcode_in_codeblock'>D1</span> has a deleted default constructor
</span>}

struct D2 : B2 {
  using B2::B2;
  B1 b;
};

D2 f(1.0);          <span class='comment'>// error: <span class='tcode_in_codeblock'>B1</span> has a deleted default constructor
</span>
struct W { W(int); };
struct X : virtual W { using W::W; X() = delete; };
struct Y : X { using X::X; };
struct Z : Y, virtual W { using Y::Y; };
Z z(0);             <span class='comment'>// OK: initialization of <span class='tcode_in_codeblock'>Y</span> does not invoke default constructor of <span class='tcode_in_codeblock'>X</span>
</span>
template&lt;class T&gt; struct Log : T {
  using T::T;       <span class='comment'>// inherits all constructors from class <span class='tcode_in_codeblock'>T</span>
</span>  ~Log() { std::clog &lt;&lt; "Destroying wrapper" &lt;&lt; std::endl; }
};</pre> <div id='inhctor.init-1.sentence-3' class='sentence'>
Class template <span class='texttt'>Log</span> wraps any class and forwards all of its constructors,
while writing a message to the standard log
whenever an object of class <span class='texttt'>Log</span> is destroyed<a class='hidden_link' href='#inhctor.init-1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inhctor.init-2'><div class='marginalizedparent'><a class='marginalized' href='#inhctor.init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6154'>#</a></div><div id='inhctor.init-2.sentence-1' class='sentence'>If the constructor was inherited from multiple base class subobjects
of type <span class='texttt'>B</span>, the program is ill-formed<a class='hidden_link' href='#inhctor.init-2.sentence-1'>.</a></div> <div id='inhctor.init-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#inhctor.init-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { A(int); };
struct B : A { using A::A; };

struct C1 : B { using B::B; };
struct C2 : B { using B::B; };

struct D1 : C1, C2 {
  using C1::C1;
  using C2::C2;
};

struct V1 : virtual B { using B::B; };
struct V2 : virtual B { using B::B; };

struct D2 : V1, V2 {
  using V1::V1;
  using V2::V2;
};

D1 d1(0);           <span class='comment'>// ill-formed: ambiguous
</span>D2 d2(0);           <span class='comment'>// OK: initializes virtual <span class='tcode_in_codeblock'>B</span> base class, which initializes the <span class='tcode_in_codeblock'>A</span> base class
</span>                    <span class='comment'>// then initializes the <span class='tcode_in_codeblock'>V1</span> and <span class='tcode_in_codeblock'>V2</span> base classes as if by a defaulted default constructor
</span>
struct M { M(); M(int); };
struct N : M { using M::M; };
struct O : M {};
struct P : N, O { using N::N; using O::O; };
P p(0);             <span class='comment'>// OK: use <span class='tcode_in_codeblock'>M(0)</span> to initialize <span class='tcode_in_codeblock'>N</span>'s base class,
</span>                    <span class='comment'>// use <span class='tcode_in_codeblock'>M()</span> to initialize <span class='tcode_in_codeblock'>O</span>'s base class
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='inhctor.init-3'><div class='marginalizedparent'><a class='marginalized' href='#inhctor.init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6191'>#</a></div><div id='inhctor.init-3.sentence-1' class='sentence'>When an object is initialized by an inherited constructor,
initialization of the object is complete
when the initialization of all subobjects is complete<a class='hidden_link' href='#inhctor.init-3.sentence-1'>.</a></div> </div></div><div id='cdtor' class='section'><h3 ><a class='secnum' href='#cdtor' style='min-width:103pt'>10.9.4</a> Construction and destruction <a class='abbr_ref' href='class.cdtor'>[class.cdtor]</a></h3><span class='indexparent'><a class='index' id=':construction'></a></span><span class='indexparent'><a class='index' id=':destruction'></a></span><div class='para' id='cdtor-1'><div class='marginalizedparent'><a class='marginalized' href='#cdtor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6201'>#</a></div><div id='cdtor-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':construction,member_access'></a></span><span class='indexparent'><a class='index' id=':destruction,member_access'></a></span>For an object with a non-trivial constructor, referring to any non-static member
or base class of the object before the constructor begins execution results in
undefined behavior<a class='hidden_link' href='#cdtor-1.sentence-1'>.</a></div> <div id='cdtor-1.sentence-2' class='sentence'>For an object with a non-trivial destructor, referring to
any non-static member or base class of the object after the destructor finishes
execution results in undefined behavior<a class='hidden_link' href='#cdtor-1.sentence-2'>.</a></div> <div id='cdtor-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#cdtor-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X { int i; };
struct Y : X { Y(); };                  <span class='comment'>// non-trivial
</span>struct A { int a; };
struct B : public A { int j; Y y; };    <span class='comment'>// non-trivial
</span>
extern B bobj;
B* pb = &amp;bobj;                          <span class='comment'>// OK
</span>int* p1 = &amp;bobj.a;                      <span class='comment'>// undefined, refers to base class member
</span>int* p2 = &amp;bobj.y.i;                    <span class='comment'>// undefined, refers to member's member
</span>
A* pa = &amp;bobj;                          <span class='comment'>// undefined, upcast to a base class type
</span>B bobj;                                 <span class='comment'>// definition of <span class='tcode_in_codeblock'>bobj</span>
</span>
extern X xobj;
int* p3 = &amp;xobj.i;                      <span class='comment'>// OK, <span class='tcode_in_codeblock'>X</span> is a trivial class
</span>X xobj;</pre> <div id='cdtor-1.sentence-3' class='sentence'>
For another example,
<pre class='codeblock'>
struct W { int j; };
struct X : public virtual W { };
struct Y {
  int* p;
  X x;
  Y() : p(&amp;x.j) {   <span class='comment'>// undefined, <span class='tcode_in_codeblock'>x</span> is not yet constructed
</span>    }
};</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='cdtor-2'><div class='marginalizedparent'><a class='marginalized' href='#cdtor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6241'>#</a></div><div id='cdtor-2.sentence-1' class='sentence'>During the construction of an object,
if the value of the object or any of its subobjects is
accessed through a glvalue that is not obtained, directly or indirectly, from
the constructor's
<span class='texttt'>this</span>
pointer, the value of the object or subobject thus obtained is unspecified<a class='hidden_link' href='#cdtor-2.sentence-1'>.</a></div> <div id='cdtor-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#cdtor-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct C;
void no_opt(C*);

struct C {
  int c;
  C() : c(0) { no_opt(this); }
};

const C cobj;

void no_opt(C* cptr) {
  int i = cobj.c * 100;         <span class='comment'>// value of <span class='tcode_in_codeblock'>cobj.c</span> is unspecified
</span>  cptr-&gt;c = 1;
  cout &lt;&lt; cobj.c * 100          <span class='comment'>// value of <span class='tcode_in_codeblock'>cobj.c</span> is unspecified
</span>       &lt;&lt; '\n';
}

extern struct D d;
struct D {
  D(int a) : a(a), b(d.a) {}
  int a, b;
};
D d = D(1);                     <span class='comment'>// value of <span class='tcode_in_codeblock'>d.b</span> is unspecified
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='cdtor-3'><div class='marginalizedparent'><a class='marginalized' href='#cdtor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6277'>#</a></div><div id='cdtor-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':construction,pointer_to_member_or_base'></a></span><span class='indexparent'><a class='index' id=':destruction,pointer_to_member_or_base'></a></span>To explicitly or implicitly convert a pointer (a glvalue) referring to
an object of class
<span class='texttt'>X</span>
to a pointer (reference) to a direct or indirect base class
<span class='texttt'>B</span>
of
<span class='texttt'>X</span>,
the construction of
<span class='texttt'>X</span>
and the construction of all of its direct or indirect bases that directly or
indirectly derive from
<span class='texttt'>B</span>
shall have started and the destruction of these classes shall not have
completed, otherwise the conversion results in undefined behavior<a class='hidden_link' href='#cdtor-3.sentence-1'>.</a></div> <div id='cdtor-3.sentence-2' class='sentence'>To form a pointer to (or access the value of) a direct non-static member of
an object
<span class='texttt'>obj</span>,
the construction of
<span class='texttt'>obj</span>
shall have started and its destruction shall not have completed,
otherwise the computation of the pointer value (or accessing the member
value) results in undefined behavior<a class='hidden_link' href='#cdtor-3.sentence-2'>.</a></div> <div id='cdtor-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#cdtor-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { };
struct B : virtual A { };
struct C : B { };
struct D : virtual A { D(A*); };
struct X { X(A*); };

struct E : C, D, X {
  E() : D(this),    <span class='comment'>// undefined: upcast from <span class='tcode_in_codeblock'>E*</span> to <span class='tcode_in_codeblock'>A*</span> might use path <span class='tcode_in_codeblock'>E*</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>D*</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>A*</span>
</span>                    <span class='comment'>// but <span class='tcode_in_codeblock'>D</span> is not constructed
</span>
                    <span class='comment'>// “<span class='tcode_in_codeblock'>D((C*)this)</span>” would be defined: <span class='tcode_in_codeblock'>E*</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>C*</span> is defined because <span class='tcode_in_codeblock'>E()</span> has started,
</span>                    <span class='comment'>// and <span class='tcode_in_codeblock'>C*</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>A*</span> is defined because <span class='tcode_in_codeblock'>C</span> is fully constructed
</span>
  X(this) {}        <span class='comment'>// defined: upon construction of <span class='tcode_in_codeblock'>X</span>, <span class='tcode_in_codeblock'>C/B/D/A</span> sublattice is fully constructed
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='cdtor-4'><div class='marginalizedparent'><a class='marginalized' href='#cdtor-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6322'>#</a></div><div id='cdtor-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':virtual_function_call,constructor_and'></a></span><span class='indexparent'><a class='index' id=':virtual_function_call,destructor_and'></a></span><span class='indexparent'><a class='index' id=':construction,virtual_function_call'></a></span><span class='indexparent'><a class='index' id=':destruction,virtual_function_call'></a></span>Member functions, including virtual functions (<a href='#virtual'>[class.virtual]</a>), can be called
during construction or destruction (<a href='#base.init'>[class.base.init]</a>)<a class='hidden_link' href='#cdtor-4.sentence-1'>.</a></div> <div id='cdtor-4.sentence-2' class='sentence'>When a virtual function is called directly or indirectly from a constructor
or from a destructor,
including during the construction or destruction of the class's non-static data
members,
and the object to which the call applies is the object (call it <span class='texttt'>x</span>) under construction or
destruction,
the function called is the
final overrider in the constructor's or destructor's class and not one
overriding it in a more-derived class<a class='hidden_link' href='#cdtor-4.sentence-2'>.</a></div> <div id='cdtor-4.sentence-3' class='sentence'>If the virtual function call uses an explicit class member access (<a href='expr.ref'>[expr.ref]</a>)
and the object expression refers to
the complete object of <span class='texttt'>x</span> or one of that object's base class subobjects
but not <span class='texttt'>x</span> or one of its base class subobjects, the behavior
is undefined<a class='hidden_link' href='#cdtor-4.sentence-3'>.</a></div> <div id='cdtor-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#cdtor-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct V {
  virtual void f();
  virtual void g();
};

struct A : virtual V {
  virtual void f();
};

struct B : virtual V {
  virtual void g();
  B(V*, A*);
};

struct D : A, B {
  virtual void f();
  virtual void g();
  D() : B((A*)this, this) { }
};

B::B(V* v, A* a) {
  f();              <span class='comment'>// calls <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;f</span>, not <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>
</span>  g();              <span class='comment'>// calls <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;g</span>, not <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;g</span>
</span>  v-&gt;g();           <span class='comment'>// <span class='tcode_in_codeblock'>v</span> is base of <span class='tcode_in_codeblock'>B</span>, the call is well-defined, calls <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;g</span>
</span>  a-&gt;f();           <span class='comment'>// undefined behavior, <span class='tcode_in_codeblock'>a</span>'s type not a base of <span class='tcode_in_codeblock'>B</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='cdtor-5'><div class='marginalizedparent'><a class='marginalized' href='#cdtor-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6375'>#</a></div><div id='cdtor-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':construction,typeid_operator'></a></span><span class='indexparent'><a class='index' id=':destruction,typeid_operator'></a></span><span class='indexparent'><a class='index' id=':typeid,construction_and'></a></span><span class='indexparent'><a class='index' id=':typeid,destruction_and'></a></span>The
<span class='texttt'>typeid</span>
operator (<a href='expr.typeid'>[expr.typeid]</a>) can be used during construction or destruction (<a href='#base.init'>[class.base.init]</a>)<a class='hidden_link' href='#cdtor-5.sentence-1'>.</a></div> <div id='cdtor-5.sentence-2' class='sentence'>When
<span class='texttt'>typeid</span>
is used in a constructor (including the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> or default member initializer (<a href='#mem'>[class.mem]</a>)
for a non-static data member)
or in a destructor, or used in a function called (directly or indirectly) from
a constructor or destructor, if the operand of
<span class='texttt'>typeid</span>
refers to the object under construction or destruction,
<span class='texttt'>typeid</span>
yields the
<span class='texttt'>std&#x200b;::&#x200b;type_&shy;info</span>
object representing the constructor or destructor's class<a class='hidden_link' href='#cdtor-5.sentence-2'>.</a></div> <div id='cdtor-5.sentence-3' class='sentence'>If the operand of
<span class='texttt'>typeid</span>
refers to the object under construction or destruction and the static type of
the operand is neither the constructor or destructor's class nor one of its
bases, the behavior is undefined<a class='hidden_link' href='#cdtor-5.sentence-3'>.</a></div></div><div class='para' id='cdtor-6'><div class='marginalizedparent'><a class='marginalized' href='#cdtor-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6402'>#</a></div><div id='cdtor-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':construction,dynamic_cast_and'></a></span><span class='indexparent'><a class='index' id=':destruction,dynamic_cast_and'></a></span><span class='indexparent'><a class='index' id=':cast,dynamic,construction_and'></a></span><span class='indexparent'><a class='index' id=':cast,dynamic,destruction_and'></a></span><span class='texttt'>dynamic_&shy;cast</span>s (<a href='expr.dynamic.cast'>[expr.dynamic.cast]</a>) can be used during construction
or destruction (<a href='#base.init'>[class.base.init]</a>)<a class='hidden_link' href='#cdtor-6.sentence-1'>.</a></div> <div id='cdtor-6.sentence-2' class='sentence'>When a
<span class='texttt'>dynamic_&shy;cast</span>
is used in a constructor (including the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> or default member initializer
for a non-static data member)
or in a destructor, or used in a function called (directly or indirectly) from
a constructor or destructor, if the operand of the
<span class='texttt'>dynamic_&shy;cast</span>
refers to the object under construction or destruction, this object is
considered to be a most derived object that has the type of the constructor or
destructor's class<a class='hidden_link' href='#cdtor-6.sentence-2'>.</a></div> <div id='cdtor-6.sentence-3' class='sentence'>If the operand of the
<span class='texttt'>dynamic_&shy;cast</span>
refers to the object under construction or destruction and the static type of
the operand is not a pointer to or object of the constructor or destructor's
own class or one of its bases, the
<span class='texttt'>dynamic_&shy;cast</span>
results in undefined behavior<a class='hidden_link' href='#cdtor-6.sentence-3'>.</a></div> <div id='cdtor-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#cdtor-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct V {
  virtual void f();
};

struct A : virtual V { };

struct B : virtual V {
  B(V*, A*);
};

struct D : A, B {
  D() : B((A*)this, this) { }
};

B::B(V* v, A* a) {
  typeid(*this);                <span class='comment'>// <span class='tcode_in_codeblock'>type_&shy;info</span> for <span class='tcode_in_codeblock'>B</span>
</span>  typeid(*v);                   <span class='comment'>// well-defined: <span class='tcode_in_codeblock'>*v</span> has type <span class='tcode_in_codeblock'>V</span>, a base of <span class='tcode_in_codeblock'>B</span> yields <span class='tcode_in_codeblock'>type_&shy;info</span> for <span class='tcode_in_codeblock'>B</span>
</span>  typeid(*a);                   <span class='comment'>// undefined behavior: type <span class='tcode_in_codeblock'>A</span> not a base of <span class='tcode_in_codeblock'>B</span>
</span>  dynamic_cast&lt;B*&gt;(v);          <span class='comment'>// well-defined: <span class='tcode_in_codeblock'>v</span> of type <span class='tcode_in_codeblock'>V*</span>, <span class='tcode_in_codeblock'>V</span> base of <span class='tcode_in_codeblock'>B</span> results in <span class='tcode_in_codeblock'>B*</span>
</span>  dynamic_cast&lt;B*&gt;(a);          <span class='comment'>// undefined behavior, <span class='tcode_in_codeblock'>a</span> has type <span class='tcode_in_codeblock'>A*</span>, <span class='tcode_in_codeblock'>A</span> not a base of <span class='tcode_in_codeblock'>B</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  </div></div><div id='copy.elision' class='section'><h3 ><a class='secnum' href='#copy.elision' style='min-width:103pt'>10.9.5</a> Copy/move elision <a class='abbr_ref' href='class.copy.elision'>[class.copy.elision]</a></h3><div class='para' id='copy.elision-1'><div class='marginalizedparent'><a class='marginalized' href='#copy.elision-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6456'>#</a></div><div id='copy.elision-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':temporary,elimination_of'></a></span><span class='indexparent'><a class='index' id=':constructor,copy,elision'></a></span><span class='indexparent'><a class='index' id=':constructor,move,elision'></a></span>When certain criteria are met, an implementation is
allowed to omit the copy/move construction of a class object,
even if the constructor selected for the copy/move operation and/or the
destructor for the object have
<span class='indexparent'><a class='index' id=':side_effects_'></a></span>side effects<a class='hidden_link' href='#copy.elision-1.sentence-1'>.</a></div> <div id='copy.elision-1.sentence-2' class='sentence'>In such cases, the
implementation treats the source and target of the
omitted copy/move operation as simply two different ways of
referring to the same object<a class='hidden_link' href='#copy.elision-1.sentence-2'>.</a></div> <div id='copy.elision-1.sentence-3' class='sentence'>If the first parameter of the
selected constructor is an rvalue reference to the object's type,
the destruction of that object occurs when the target would have been destroyed;
otherwise, the destruction occurs at the later of the times when the
two objects would have been destroyed without the
optimization<a class='hidden_link' href='#copy.elision-1.sentence-3'>.</a><a class='footnotenum' href='#footnote-119'>119</a></div> <div id='copy.elision-1.sentence-4' class='sentence'>
This elision of copy/move operations, called
<span class='indexparent'><a class='index' id=':constructor,copy,elision_'></a></span><span class='indexparent'><a class='index' id=':constructor,move,elision_'></a></span><a class='hidden_link' href='#def:copy_elision' id='def:copy_elision'><i>copy elision</i></a>,
is permitted in the
following circumstances (which may be combined to
eliminate multiple copies):</div><div id='copy.elision-1.sentence-5' class='sentence'><ul class='itemize'><li id='copy.elision-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.elision-1.1'>(1.1)</a></div><div id='copy.elision-1.1.sentence-1' class='sentence'>in a <span class='texttt'>return</span> statement in a function with a class return type,
when the <i ><a href='expr.comma#nt:expression'>expression</a></i> is the name of a non-volatile
automatic object (other than a function parameter or a variable
introduced by the <i ><a href='except#nt:exception-declaration'>exception-declaration</a></i> of a
<i ><a href='except#nt:handler'>handler</a></i> (<a href='except.handle'>[except.handle]</a>))
with the same type (ignoring cv-qualification) as
the function return type, the copy/move operation can be
omitted by constructing the automatic object directly
into the function call's return object</div></li><li id='copy.elision-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.elision-1.2'>(1.2)</a></div><div id='copy.elision-1.2.sentence-1' class='sentence'>in a <i ><a href='expr.throw#nt:throw-expression'>throw-expression</a></i>, when the operand
is the name of a non-volatile automatic object
(other than a function or catch-clause parameter)
whose scope does not extend beyond the end of the innermost enclosing
<i ><a href='except#nt:try-block'>try-block</a></i> (if there is one), the copy/move operation from the
operand to the exception object (<a href='except.throw'>[except.throw]</a>) can be omitted by
constructing the automatic object directly into the exception object</div></li><li id='copy.elision-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.elision-1.3'>(1.3)</a></div><div id='copy.elision-1.3.sentence-1' class='sentence'>when the <i ><a href='except#nt:exception-declaration'>exception-declaration</a></i> of an
exception handler (<a href='except'>[except]</a>) declares an object of the same
type (except for cv-qualification) as the exception
object (<a href='except.throw'>[except.throw]</a>), the copy operation can be omitted by treating
the <i ><a href='except#nt:exception-declaration'>exception-declaration</a></i> as an alias for the exception
object if the meaning of the program will be unchanged except for the execution
of constructors and destructors for the object declared by the
<i ><a href='except#nt:exception-declaration'>exception-declaration</a></i><a class='hidden_link' href='#copy.elision-1.3.sentence-1'>.</a></div> <div id='copy.elision-1.3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.elision-1.3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.elision-1.3.sentence-2' class='sentence'>There cannot be a move from the exception object because it is
always an lvalue<a class='hidden_link' href='#copy.elision-1.3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul>
Copy elision is required
where an expression is evaluated in a context
requiring a constant expression (<a href='expr.const'>[expr.const]</a>)
and in constant initialization (<a href='basic.start.static'>[basic.start.static]</a>)<a class='hidden_link' href='#copy.elision-1.sentence-5'>.</a></div> <div id='copy.elision-1.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.elision-1.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.elision-1.sentence-6' class='sentence'>Copy elision might not be performed
if the same expression
is evaluated in another context<a class='hidden_link' href='#copy.elision-1.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.elision-2'><div class='marginalizedparent'><a class='marginalized' href='#copy.elision-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6526'>#</a></div><div id='copy.elision-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.elision-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class Thing {
public:
  Thing();
  ~Thing();
  Thing(const Thing&amp;);
};

Thing f() {
  Thing t;
  return t;
}

Thing t2 = f();

struct A {
  void *p;
  constexpr A(): p(this) {}
};

constexpr A g() {
  A a;
  return a;
}

constexpr A a;          <span class='comment'>// well-formed, <span class='tcode_in_codeblock'>a.p</span> points to <span class='tcode_in_codeblock'>a</span>
</span>constexpr A b = g();    <span class='comment'>// well-formed, <span class='tcode_in_codeblock'>b.p</span> points to <span class='tcode_in_codeblock'>b</span>
</span>
void h() {
  A c = g();            <span class='comment'>// well-formed, <span class='tcode_in_codeblock'>c.p</span> may point to <span class='tcode_in_codeblock'>c</span> or to an ephemeral temporary
</span>}</pre> <div id='copy.elision-2.sentence-1' class='sentence'>
Here the criteria for elision can
eliminate
the copying of the local automatic object
<span class='texttt'>t</span>
into the result object for the function call
<span class='texttt'>f()</span>,
which is the global object
<span class='texttt'>t2</span><a class='hidden_link' href='#copy.elision-2.sentence-1'>.</a></div> <div id='copy.elision-2.sentence-2' class='sentence'>Effectively, the construction of the local object
<span class='texttt'>t</span>
can be viewed as directly initializing the global
object
<span class='texttt'>t2</span>,
and that object's destruction will occur at program
exit<a class='hidden_link' href='#copy.elision-2.sentence-2'>.</a></div> <div id='copy.elision-2.sentence-3' class='sentence'>Adding a move constructor to <span class='texttt'>Thing</span> has the same effect, but it is the
move construction from the local automatic object to <span class='texttt'>t2</span> that is elided<a class='hidden_link' href='#copy.elision-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.elision-3'><div class='marginalizedparent'><a class='marginalized' href='#copy.elision-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6579'>#</a></div><div id='copy.elision-3.sentence-1' class='sentence'>In the following copy-initialization contexts, a move operation might be used instead of a copy operation:
<ul class='itemize'><li id='copy.elision-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.elision-3.1'>(3.1)</a></div><div id='copy.elision-3.1.sentence-1' class='sentence'>If the <i ><a href='expr.comma#nt:expression'>expression</a></i> in a <span class='texttt'>return</span> statement (<a href='stmt.return'>[stmt.return]</a>)
is a (possibly parenthesized) <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
that names an object with automatic storage duration declared in the body
or <i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> of the innermost enclosing
function or <i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i>, or</div></li><li id='copy.elision-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#copy.elision-3.2'>(3.2)</a></div><div id='copy.elision-3.2.sentence-1' class='sentence'>if the operand of a <i ><a href='expr.throw#nt:throw-expression'>throw-expression</a></i>
is the name of a non-volatile automatic object
(other than a function or catch-clause parameter)
whose scope does not extend beyond the end of the innermost enclosing
<i ><a href='except#nt:try-block'>try-block</a></i> (if there is one),</div></li></ul>
overload resolution to select the constructor
for the copy is first performed as if the object were designated by an
rvalue<a class='hidden_link' href='#copy.elision-3.sentence-1'>.</a></div> <div id='copy.elision-3.sentence-2' class='sentence'>If the first overload resolution fails or was not performed,
or if the type of the first parameter of the selected
constructor is not an rvalue reference to the object's type (possibly cv-qualified),
overload resolution is performed again, considering the object as an lvalue<a class='hidden_link' href='#copy.elision-3.sentence-2'>.</a></div> <div id='copy.elision-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#copy.elision-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='copy.elision-3.sentence-3' class='sentence'>This two-stage overload resolution must be performed regardless
of whether copy elision will occur<a class='hidden_link' href='#copy.elision-3.sentence-3'>.</a></div> <div id='copy.elision-3.sentence-4' class='sentence'>It determines the constructor to be called if
elision is not performed, and the selected constructor must be accessible even if
the call is elided<a class='hidden_link' href='#copy.elision-3.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='copy.elision-4'><div class='marginalizedparent'><a class='marginalized' href='#copy.elision-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6608'>#</a></div><div id='copy.elision-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#copy.elision-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class Thing {
public:
  Thing();
  ~Thing();
  Thing(Thing&amp;&amp;);
private:
  Thing(const Thing&amp;);
};

Thing f(bool b) {
  Thing t;
  if (b)
    throw t;            <span class='comment'>// OK: <span class='tcode_in_codeblock'>Thing(Thing&amp;&amp;)</span> used (or elided) to throw <span class='tcode_in_codeblock'>t</span>
</span>  return t;             <span class='comment'>// OK: <span class='tcode_in_codeblock'>Thing(Thing&amp;&amp;)</span> used (or elided) to return <span class='tcode_in_codeblock'>t</span>
</span>}

Thing t2 = f(false);    <span class='comment'>// OK: no extra copy/move performed, <span class='tcode_in_codeblock'>t2</span> constructed by call to <span class='tcode_in_codeblock'>f</span>
</span>
struct Weird {
  Weird();
  Weird(Weird&amp;);
};

Weird g() {
  Weird w;
  return w;             <span class='comment'>// OK: first overload resolution fails, second overload resolution selects <span class='tcode_in_codeblock'>Weird(Weird&amp;)</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-119'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-119'>119)</a></div><div id='footnote-119.sentence-1' class='sentence'>Because only one object is destroyed instead of two,
and one copy/move constructor
is not executed, there is still one object destroyed for each one constructed<a class='hidden_link' href='#footnote-119.sentence-1'>.</a></div></div></div></div><div id='compare' class='section'><h2 ><a class='secnum' href='#compare' style='min-width:88pt'>10.10</a> Comparisons <a class='abbr_ref' href='class.compare'>[class.compare]</a></h2><div id='compare.default' class='section'><h3 ><a class='secnum' href='#compare.default' style='min-width:103pt'>10.10.1</a> Defaulted comparison operator functions <a class='abbr_ref' href='class.compare.default'>[class.compare.default]</a></h3><div class='para' id='compare.default-1'><div class='marginalizedparent'><a class='marginalized' href='#compare.default-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6645'>#</a></div><div id='compare.default-1.sentence-1' class='sentence'>A defaulted comparison operator function (<a href='expr.spaceship'>[expr.spaceship]</a>, <a href='expr.rel'>[expr.rel]</a>, <a href='expr.eq'>[expr.eq]</a>)
for some class <span class='texttt'>C</span>
shall be a non-template function
declared in the <i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of <span class='texttt'>C</span>
that is
<ul class='itemize'><li id='compare.default-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#compare.default-1.1'>(1.1)</a></div><div id='compare.default-1.1.sentence-1' class='sentence'>a non-static member of <span class='texttt'>C</span> having one parameter of type <span class='texttt'>const C&amp;</span>, or</div></li><li id='compare.default-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#compare.default-1.2'>(1.2)</a></div><div id='compare.default-1.2.sentence-1' class='sentence'>a friend of <span class='texttt'>C</span> having two parameters of type <span class='texttt'>const C&amp;</span><a class='hidden_link' href='#compare.default-1.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='compare.default-2'><div class='marginalizedparent'><a class='marginalized' href='#compare.default-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6656'>#</a></div><div id='compare.default-2.sentence-1' class='sentence'>A three-way comparison operator for a class type <span class='texttt'>C</span>
is a <span class='indexparent'><a class='index' id=':operator,structural_comparison'></a></span><span class='textit'>structural comparison operator</span>
if it is defined as defaulted in the definition of <span class='texttt'>C</span>,
and all three-way comparison operators it invokes
are structural comparison operators<a class='hidden_link' href='#compare.default-2.sentence-1'>.</a></div> <div id='compare.default-2.sentence-2' class='sentence'>A type <span class='texttt'>T</span>
has <span class='indexparent'><a class='index' id=':equality,strong_structural'></a></span><span class='textit'>strong structural equality</span>
if, for a glvalue <span class='texttt'>x</span> of type <span class='texttt'>const T</span>,
<span class='texttt'>x &lt;=&gt; x</span> is a valid expression
of type <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering</span> or <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;equality</span>
and either does not invoke a three-way comparison operator
or invokes a structural comparison operator<a class='hidden_link' href='#compare.default-2.sentence-2'>.</a></div></div></div><div id='spaceship' class='section'><h3 ><a class='secnum' href='#spaceship' style='min-width:103pt'>10.10.2</a> Three-way comparison <a class='abbr_ref' href='class.spaceship'>[class.spaceship]</a></h3><span class='indexparent'><a class='index' id=':operator,three-way_comparison,defaulted'></a></span><div class='para' id='spaceship-1'><div class='marginalizedparent'><a class='marginalized' href='#spaceship-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6675'>#</a></div><div id='spaceship-1.sentence-1' class='sentence'>The direct base class subobjects of <span class='texttt'>C</span>,
in the order of their declaration in the <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i> of <span class='texttt'>C</span>,
followed by the non-static data members of <span class='texttt'>C</span>,
in the order of their declaration in the <i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of <span class='texttt'>C</span>,
form a list of subobjects<a class='hidden_link' href='#spaceship-1.sentence-1'>.</a></div> <div id='spaceship-1.sentence-2' class='sentence'>In that list, any subobject of array type is recursively expanded
to the sequence of its elements, in the order of increasing subscript<a class='hidden_link' href='#spaceship-1.sentence-2'>.</a></div> <div id='spaceship-1.sentence-3' class='sentence'>Let <span class='texttt'>x</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> be an lvalue denoting the <span class="mjx-chtml"><span class="mjx-math" aria-label="i^\text{th}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> element
in the expanded list of subobjects for an object <span class='texttt'>x</span>
(of length <span class='math'><span class='mathalpha'>n</span></span>),
where <span class='texttt'>x</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is
formed by a sequence of
derived-to-base conversions (<a href='over.best.ics'>[over.best.ics]</a>),
class member access expressions (<a href='expr.ref'>[expr.ref]</a>), and
array subscript expressions (<a href='expr.sub'>[expr.sub]</a>) applied to <span class='texttt'>x</span><a class='hidden_link' href='#spaceship-1.sentence-3'>.</a></div> <div id='spaceship-1.sentence-4' class='sentence'>The type of the expression <span class='texttt'>x</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> <span class='texttt'>&lt;=&gt;</span> <span class='texttt'>x</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
is denoted by <span class='texttt'>R</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span><a class='hidden_link' href='#spaceship-1.sentence-4'>.</a></div> <div id='spaceship-1.sentence-5' class='sentence'>It is unspecified
whether virtual base class subobjects are compared more than once<a class='hidden_link' href='#spaceship-1.sentence-5'>.</a></div></div><div class='para' id='spaceship-2'><div class='marginalizedparent'><a class='marginalized' href='#spaceship-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6696'>#</a></div><div id='spaceship-2.sentence-1' class='sentence'>If the declared return type
of a defaulted three-way comparison operator function
is <span class='texttt'>auto</span>,
then the return type is deduced as
the common comparison type (see below) of
<span class='texttt'>R</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_0"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span>, <span class='texttt'>R</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>&hellip;</span>, <span class='texttt'>R</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_{n-1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span><a class='hidden_link' href='#spaceship-2.sentence-1'>.</a></div> <div id='spaceship-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#spaceship-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='spaceship-2.sentence-3' class='sentence'>Otherwise,
the program will be ill-formed
if the expression <span class='texttt'>x</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> <span class='texttt'>&lt;=&gt;</span> <span class='texttt'>x</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
is not implicitly convertible to the declared return type for any <span class='math'><span class='mathalpha'>i</span></span><a class='hidden_link' href='#spaceship-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='spaceship-2.sentence-2' class='sentence'>
If the return type is deduced as <span class='texttt'>void</span>,
the operator function is defined as deleted<a class='hidden_link' href='#spaceship-2.sentence-2'>.</a></div></div><div class='para' id='spaceship-3'><div class='marginalizedparent'><a class='marginalized' href='#spaceship-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6712'>#</a></div><div id='spaceship-3.sentence-1' class='sentence'>The return value <span class='texttt'>V</span> of type <span class='texttt'>R</span>
of the defaulted three-way comparison operator function
with parameters <span class='texttt'>x</span> and <span class='texttt'>y</span> of the same type
is determined by comparing corresponding elements
<span class='texttt'>x</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> and <span class='texttt'>y</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
in the expanded lists of subobjects for <span class='texttt'>x</span> and <span class='texttt'>y</span>
until the first index <span class='math'><span class='mathalpha'>i</span></span>
where <span class='texttt'>x</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> <span class='texttt'>&lt;=&gt;</span> <span class='texttt'>y</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
yields a result value <span class='texttt'>v</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> where <span class='texttt'>v</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i \mathrel{\texttt{!=}} 0"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.298em;">!=</span></span></span></span></span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span>,
contextually converted to <span class='texttt'>bool</span>, yields <span class='texttt'>true</span>;
<span class='texttt'>V</span> is <span class='texttt'>v</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> converted to <span class='texttt'>R</span><a class='hidden_link' href='#spaceship-3.sentence-1'>.</a></div> <div id='spaceship-3.sentence-2' class='sentence'>If no such index exists, <span class='texttt'>V</span> is
<span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering&#x200b;::&#x200b;equal</span> converted to <span class='texttt'>R</span><a class='hidden_link' href='#spaceship-3.sentence-2'>.</a></div></div><div class='para' id='spaceship-4'><div class='marginalizedparent'><a class='marginalized' href='#spaceship-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6727'>#</a></div><div id='spaceship-4.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:common_comparison_type' id='def:common_comparison_type'><i >common comparison type</i></a> <span class='texttt'>U</span>
of a possibly-empty list of <span class='math'><span class='mathalpha'>n</span></span> types
<span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_0"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span>, <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>&hellip;</span>, <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_{n-1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span>
is defined as follows:</div><div id='spaceship-4.sentence-2' class='sentence'><ul class='itemize'><li id='spaceship-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spaceship-4.1'>(4.1)</a></div><div id='spaceship-4.1.sentence-1' class='sentence'>If any <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
is not a comparison category type (<a href='cmp.categories'>[cmp.categories]</a>),
<span class='texttt'>U</span> is <span class='texttt'>void</span><a class='hidden_link' href='#spaceship-4.1.sentence-1'>.</a></div></li><li id='spaceship-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spaceship-4.2'>(4.2)</a></div><div id='spaceship-4.2.sentence-1' class='sentence'>Otherwise, if
at least one <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>std&#x200b;::&#x200b;weak_&shy;equality</span>, or
at least one <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;equality</span> and
at least one <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_j"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span> is <span class='texttt'>std&#x200b;::&#x200b;partial_&shy;ordering</span> or
                              <span class='texttt'>std&#x200b;::&#x200b;weak_&shy;ordering</span>,
<span class='texttt'>U</span> is <span class='texttt'>std&#x200b;::&#x200b;weak_&shy;equality</span> (<a href='cmp.weakeq'>[cmp.weakeq]</a>)<a class='hidden_link' href='#spaceship-4.2.sentence-1'>.</a></div></li><li id='spaceship-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spaceship-4.3'>(4.3)</a></div><div id='spaceship-4.3.sentence-1' class='sentence'>Otherwise, if at least one <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;equality</span>,
<span class='texttt'>U</span> is <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;equality</span> (<a href='cmp.strongeq'>[cmp.strongeq]</a>)<a class='hidden_link' href='#spaceship-4.3.sentence-1'>.</a></div></li><li id='spaceship-4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spaceship-4.4'>(4.4)</a></div><div id='spaceship-4.4.sentence-1' class='sentence'>Otherwise, if at least one <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>std&#x200b;::&#x200b;partial_&shy;ordering</span>,
<span class='texttt'>U</span> is <span class='texttt'>std&#x200b;::&#x200b;partial_&shy;ordering</span> (<a href='cmp.partialord'>[cmp.partialord]</a>)<a class='hidden_link' href='#spaceship-4.4.sentence-1'>.</a></div></li><li id='spaceship-4.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spaceship-4.5'>(4.5)</a></div><div id='spaceship-4.5.sentence-1' class='sentence'>Otherwise, if at least one <span class='texttt'>T</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>std&#x200b;::&#x200b;weak_&shy;ordering</span>,
<span class='texttt'>U</span> is <span class='texttt'>std&#x200b;::&#x200b;weak_&shy;ordering</span> (<a href='cmp.weakord'>[cmp.weakord]</a>)<a class='hidden_link' href='#spaceship-4.5.sentence-1'>.</a></div></li><li id='spaceship-4.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spaceship-4.6'>(4.6)</a></div><div id='spaceship-4.6.sentence-1' class='sentence'>Otherwise, <span class='texttt'>U</span> is <span class='texttt'>std&#x200b;::&#x200b;strong_&shy;ordering</span> (<a href='cmp.strongord'>[cmp.strongord]</a>)<a class='hidden_link' href='#spaceship-4.6.sentence-1'>.</a></div> <div id='spaceship-4.6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#spaceship-4.6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='spaceship-4.6.sentence-2' class='sentence'>In particular, this is the result when <span class='math'><span class='mathalpha'>n</span></span> is 0<a class='hidden_link' href='#spaceship-4.6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div></div></div><div id='rel.eq' class='section'><h3 ><a class='secnum' href='#rel.eq' style='min-width:103pt'>10.10.3</a> Other comparison operators <a class='abbr_ref' href='class.rel.eq'>[class.rel.eq]</a></h3><span class='indexparent'><a class='index' id=':operator,relational,defaulted'></a></span><span class='indexparent'><a class='index' id=':operator,equality,defaulted'></a></span><span class='indexparent'><a class='index' id=':operator,inequality,defaulted'></a></span><div class='para' id='rel.eq-1'><div class='marginalizedparent'><a class='marginalized' href='#rel.eq-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6771'>#</a></div><div id='rel.eq-1.sentence-1' class='sentence'>A defaulted relational (<a href='expr.rel'>[expr.rel]</a>) or equality (<a href='expr.eq'>[expr.eq]</a>) operator function
for some operator <span class='texttt'>@</span>
shall have a declared return type <span class='texttt'>bool</span><a class='hidden_link' href='#rel.eq-1.sentence-1'>.</a></div></div><div class='para' id='rel.eq-2'><div class='marginalizedparent'><a class='marginalized' href='#rel.eq-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6776'>#</a></div><div id='rel.eq-2.sentence-1' class='sentence'>The operator function with parameters <span class='texttt'>x</span> and <span class='texttt'>y</span>
is defined as deleted if</div><div id='rel.eq-2.sentence-2' class='sentence'><ul class='itemize'><li id='rel.eq-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#rel.eq-2.1'>(2.1)</a></div><div id='rel.eq-2.1.sentence-1' class='sentence'>overload resolution (<a href='over.match'>[over.match]</a>),
as applied to <span class='texttt'>x &lt;=&gt; y</span>
(also considering synthesized candidates with reversed order of parameters (<a href='over.match.oper'>[over.match.oper]</a>)),
results in an ambiguity
or a function that is deleted or inaccessible from the operator function,
or</div></li><li id='rel.eq-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#rel.eq-2.2'>(2.2)</a></div><div id='rel.eq-2.2.sentence-1' class='sentence'>the operator <span class='texttt'>@</span>
cannot be applied to the return type of <span class='texttt'>x &lt;=&gt; y</span> or <span class='texttt'>y &lt;=&gt; x</span><a class='hidden_link' href='#rel.eq-2.2.sentence-1'>.</a></div></li></ul></div><div id='rel.eq-2.sentence-3' class='sentence'>Otherwise, the operator function yields
<span class='texttt'>x &lt;=&gt; y @ 0</span>
if an <span class='texttt'>operator&lt;=&gt;</span>
with the original order of parameters was selected, or
<span class='texttt'>0 @ y &lt;=&gt; x</span>
otherwise<a class='hidden_link' href='#rel.eq-2.sentence-3'>.</a></div></div><div class='para' id='rel.eq-3'><div class='marginalizedparent'><a class='marginalized' href='#rel.eq-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6801'>#</a></div><div id='rel.eq-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#rel.eq-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct C {
  friend std::strong_equality operator&lt;=&gt;(const C&amp;, const C&amp;);
  friend bool operator==(const C&amp; x, const C&amp; y) = default; <span class='comment'>// OK, returns <span class='tcode_in_codeblock'>x &lt;=&gt; y == 0</span>
</span>  bool operator&lt;(const C&amp;) = default;                       <span class='comment'>// OK, function is deleted
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='free' class='section'><h2 ><a class='secnum' href='#free' style='min-width:88pt'>10.11</a> Free store <a class='abbr_ref' href='class.free'>[class.free]</a></h2><span class='indexparent'><a class='index' id=':free_store'></a></span><div class='para' id='free-1'><div class='marginalizedparent'><a class='marginalized' href='#free-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6815'>#</a></div><div id='free-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':new,type_of'></a></span>
Any allocation function for a class
<span class='texttt'>T</span>
is a static member (even if not explicitly declared
<span class='texttt'>static</span>)<a class='hidden_link' href='#free-1.sentence-1'>.</a></div></div><div class='para' id='free-2'><div class='marginalizedparent'><a class='marginalized' href='#free-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6822'>#</a></div><div id='free-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#free-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class Arena;
struct B {
  void* operator new(std::size_t, Arena*);
};
struct D1 : B {
};

Arena*  ap;
void foo(int i) {
  new (ap) D1;      <span class='comment'>// calls <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;operator new(std&#x200b;::&#x200b;size_&shy;t, Arena*)</span>
</span>  new D1[i];        <span class='comment'>// calls <span class='tcode_in_codeblock'>&#x200b;::&#x200b;operator new[](std&#x200b;::&#x200b;size_&shy;t)</span>
</span>  new D1;           <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>&#x200b;::&#x200b;operator new(std&#x200b;::&#x200b;size_&shy;t)</span> hidden
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='free-3'><div class='marginalizedparent'><a class='marginalized' href='#free-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6841'>#</a></div><div id='free-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':delete'></a></span>When an object is deleted with a
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>,
a deallocation function
<span class='indexparent'><a class='index' id=':function,deallocation'></a></span>(<span class='texttt'>operator delete()</span>
<span class='indexparent'><a class='index' id=':operator_delete'></a></span>for non-array objects or
<span class='texttt'>operator delete[]()</span>
<span class='indexparent'><a class='index' id=':operator_delete_'></a></span>for arrays) is (implicitly) called to reclaim the storage occupied by
the object (<a href='basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a>)<a class='hidden_link' href='#free-3.sentence-1'>.</a></div></div><div class='para' id='free-4'><div class='marginalizedparent'><a class='marginalized' href='#free-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6855'>#</a></div><div id='free-4.sentence-1' class='sentence'>Class-specific deallocation function lookup is a part of general deallocation
function lookup (<a href='expr.delete'>[expr.delete]</a>) and occurs as follows<a class='hidden_link' href='#free-4.sentence-1'>.</a></div> <div id='free-4.sentence-2' class='sentence'>If the <i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>
is used to deallocate a class object whose static type has a virtual
destructor, the deallocation function is the one selected at the point
of definition of the dynamic type's virtual
destructor (<a href='#dtor'>[class.dtor]</a>)<a class='hidden_link' href='#free-4.sentence-2'>.</a><a class='footnotenum' href='#footnote-120'>120</a></div> <div id='free-4.sentence-3' class='sentence'>
Otherwise, if the
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>
is used to deallocate an object of class
<span class='texttt'>T</span>
or array thereof,
the deallocation function's name is looked up in the scope of
<span class='texttt'>T</span><a class='hidden_link' href='#free-4.sentence-3'>.</a></div> <div id='free-4.sentence-4' class='sentence'>If this lookup fails to find the name, general deallocation function
lookup (<a href='expr.delete'>[expr.delete]</a>) continues<a class='hidden_link' href='#free-4.sentence-4'>.</a></div> <div id='free-4.sentence-5' class='sentence'>If the result of the lookup is ambiguous or inaccessible, or if the lookup
selects a placement deallocation function, the program is ill-formed<a class='hidden_link' href='#free-4.sentence-5'>.</a></div></div><div class='para' id='free-5'><div class='marginalizedparent'><a class='marginalized' href='#free-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6879'>#</a></div><div id='free-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':delete,type_of'></a></span>Any deallocation function for a class
<span class='texttt'>X</span>
is a static member (even if not explicitly declared
<span class='texttt'>static</span>)<a class='hidden_link' href='#free-5.sentence-1'>.</a></div> <div id='free-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#free-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X {
  void operator delete(void*);
  void operator delete[](void*, std::size_t);
};

class Y {
  void operator delete(void*, std::size_t);
  void operator delete[](void*);
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='free-6'><div class='marginalizedparent'><a class='marginalized' href='#free-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6899'>#</a></div><div id='free-6.sentence-1' class='sentence'>Since member allocation and deallocation functions are
<span class='texttt'>static</span>
they cannot be virtual<a class='hidden_link' href='#free-6.sentence-1'>.</a></div> <div id='free-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#free-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='free-6.sentence-2' class='sentence'>However, when the
<i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
of a
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>
refers to an object of class type,
because the deallocation function actually called is looked up in the scope of
the class that is the dynamic type of the object
if the destructor is virtual, the effect is the same in that case<a class='hidden_link' href='#free-6.sentence-2'>.</a></div> <div id='free-6.sentence-3' class='sentence'>For example,
<pre class='codeblock'>
struct B {
  virtual ~B();
  void operator delete(void*, std::size_t);
};

struct D : B {
  void operator delete(void*);
};

struct E : B {
  void log_deletion();
  void operator delete(E *p, std::destroying_delete_t) {
    p-&gt;log_deletion();
    p-&gt;~E();
    ::operator delete(p);
  }
};

void f() {
  B* bp = new D;
  delete bp;        <span class='comment'>// 1: uses <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;operator delete(void*)</span>
</span>  bp = new E;
  delete bp;        <span class='comment'>// 2: uses <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;operator delete(E*, std&#x200b;::&#x200b;destroying_&shy;delete_&shy;t)</span>
</span>}</pre>
Here, storage for the object of class
<span class='texttt'>D</span>
is deallocated by
<span class='texttt'>D&#x200b;::&#x200b;operator delete()</span>,
and
the object of class <span class='texttt'>E</span> is destroyed
and its storage is deallocated
by <span class='texttt'>E&#x200b;::&#x200b;operator delete()</span>,
due to the virtual destructor<a class='hidden_link' href='#free-6.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='free-6.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#free-6.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='free-6.sentence-4' class='sentence'>Virtual destructors have no effect on the deallocation function actually
called when the
<i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
of a
<i ><a href='expr.delete#nt:delete-expression'>delete-expression</a></i>
refers to an array of objects of class type<a class='hidden_link' href='#free-6.sentence-4'>.</a></div> <div id='free-6.sentence-5' class='sentence'>For example,
<pre class='codeblock'>
struct B {
  virtual ~B();
  void operator delete[](void*, std::size_t);
};

struct D : B {
  void operator delete[](void*, std::size_t);
};

void f(int i) {
  D* dp = new D[i];
  delete [] dp;     <span class='comment'>// uses <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;operator delete[](void*, std&#x200b;::&#x200b;size_&shy;t)</span>
</span>  B* bp = new D[i];
  delete[] bp;      <span class='comment'>// undefined behavior
</span>}</pre></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='free-7'><div class='marginalizedparent'><a class='marginalized' href='#free-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6976'>#</a></div><div id='free-7.sentence-1' class='sentence'>Access to the deallocation function is checked statically<a class='hidden_link' href='#free-7.sentence-1'>.</a></div> <div id='free-7.sentence-2' class='sentence'>Hence, even though a different one might actually be executed,
the statically visible deallocation function is required to be accessible<a class='hidden_link' href='#free-7.sentence-2'>.</a></div> <div id='free-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#free-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='free-7.sentence-3' class='sentence'>For the call on line “// 1” above,
if
<span class='texttt'>B&#x200b;::&#x200b;operator delete()</span>
had been private, the delete expression would have been ill-formed<a class='hidden_link' href='#free-7.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='free-8'><div class='marginalizedparent'><a class='marginalized' href='#free-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/classes.tex#L6987'>#</a></div><div id='free-8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#free-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='free-8.sentence-1' class='sentence'>If a deallocation function has no explicit <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i>, it
has a non-throwing exception specification (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#free-8.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-120'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-120'>120)</a></div><div id='footnote-120.sentence-1' class='sentence'>A similar provision is not needed for
the array version of <span class='texttt'>operator</span> <span class='texttt'>delete</span> because <a href='expr.delete'>[expr.delete]</a>
requires that in this situation, the static type of the object to be deleted be
the same as its dynamic type<a class='hidden_link' href='#footnote-120.sentence-1'>.</a></div></div></div></div></body></html>