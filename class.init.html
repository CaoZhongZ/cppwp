<!DOCTYPE html><html lang='en'><head><title>[class.init]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>15</a> Special member functions <a class='abbr_ref' href='./#special'>[special]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>15.6</a> Initialization <a class='abbr_ref'>[class.init]</a></h2><span class='indexparent'><a class='index' id=':initialization,class_object'></a></span><span class='indexparent'><a class='index' id=':initialization,default_constructor_and'></a></span><span class='indexparent'><a class='index' id=':initialization,constructor_and'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1499'>#</a></div><div id='1.sentence-1' class='sentence'>When no initializer is specified for an object of (possibly
cv-qualified) class type (or array thereof), or the initializer has
the form
<span class='texttt'>()</span>,
the object is initialized as specified in <a href='dcl.init'>[dcl.init]</a><a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1506'>#</a></div><div id='2.sentence-1' class='sentence'>An object of class type (or array thereof) can be explicitly initialized;
see <a href='class.expl.init'>[class.expl.init]</a> and <a href='class.base.init'>[class.base.init]</a><a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1510'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':order_of_execution,constructor_and_array'></a></span>When an array of class objects is initialized
(either explicitly or implicitly) and the elements are initialized by constructor,
the constructor shall be called for each element of the array,
following the subscript order; see <a href='dcl.array'>[dcl.array]</a><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'>Destructors for the array elements are called in reverse order of their
construction<a class='hidden_link' href='#3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='class.expl.init' class='section'><h3 ><a class='secnum' href='#class.expl.init' style='min-width:103pt'>15.6.1</a> Explicit initialization <a class='abbr_ref' href='class.expl.init'>[class.expl.init]</a></h3><span class='indexparent'><a class='index' id=':initialization,explicit'></a></span><span class='indexparent'><a class='index' id=':initialization,constructor_and_'></a></span><div class='para' id='class.expl.init-1'><div class='marginalizedparent'><a class='marginalized' href='#class.expl.init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1525'>#</a></div><div id='class.expl.init-1.sentence-1' class='sentence'>An object of class type can be initialized with a parenthesized
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>,
where the
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
is construed as an argument list for a constructor
that is called to initialize the object<a class='hidden_link' href='#class.expl.init-1.sentence-1'>.</a></div> <div id='class.expl.init-1.sentence-2' class='sentence'>Alternatively, a single
<i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i>
can be specified as an
<i ><a href='dcl.init#nt:initializer'>initializer</a></i>
using the
<span class='texttt'>=</span>
form of initialization<a class='hidden_link' href='#class.expl.init-1.sentence-2'>.</a></div> <div id='class.expl.init-1.sentence-3' class='sentence'>Either direct-initialization semantics or copy-initialization semantics apply;
see <a href='dcl.init'>[dcl.init]</a><a class='hidden_link' href='#class.expl.init-1.sentence-3'>.</a></div> <div id='class.expl.init-1.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':example,constructor_and_initialization'></a></span><div id='class.expl.init-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.expl.init-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct complex {
  complex();
  complex(double);
  complex(double,double);
};

complex sqrt(complex,complex);

complex a(1);                   <span class='comment'>// initialize by a call of <span class='tcode_in_codeblock'>complex(double)</span>
</span>complex b = a;                  <span class='comment'>// initialize by a copy of <span class='tcode_in_codeblock'>a</span>
</span>complex c = complex(1,2);       <span class='comment'>// construct <span class='tcode_in_codeblock'>complex(1,2)</span> using <span class='tcode_in_codeblock'>complex(double,double)</span>,
</span>                                <span class='comment'>// copy/move it into <span class='tcode_in_codeblock'>c</span>
</span>complex d = sqrt(b,c);          <span class='comment'>// call <span class='tcode_in_codeblock'>sqrt(complex,complex)</span> and copy/move the result into <span class='tcode_in_codeblock'>d</span>
</span>complex e;                      <span class='comment'>// initialize by a call of <span class='tcode_in_codeblock'>complex()</span>
</span>complex f = 3;                  <span class='comment'>// construct <span class='tcode_in_codeblock'>complex(3)</span> using <span class='tcode_in_codeblock'>complex(double)</span>, copy/move it into <span class='tcode_in_codeblock'>f</span>
</span>complex g = { 1, 2 };           <span class='comment'>// initialize by a call of <span class='tcode_in_codeblock'>complex(double, double)</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> 
<div id='class.expl.init-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.expl.init-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.expl.init-1.sentence-5' class='sentence'><span class='indexparent'><a class='index' id=':initialization,overloaded_assignment_and'></a></span><a href='over.ass'>Overloading of the assignment operator</a>
has no effect on initialization<a class='hidden_link' href='#class.expl.init-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='class.expl.init-2'><div class='marginalizedparent'><a class='marginalized' href='#class.expl.init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1568'>#</a></div><div id='class.expl.init-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,array_of_class_objects'></a></span><span class='indexparent'><a class='index' id=':constructor,array_of_class_objects_and'></a></span>An object of class type can also be initialized by a
<i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i><a class='hidden_link' href='#class.expl.init-2.sentence-1'>.</a></div> <div id='class.expl.init-2.sentence-2' class='sentence'>List-initialization semantics apply;
see <a href='dcl.init'>[dcl.init]</a> and <a href='dcl.init.list'>[dcl.init.list]</a><a class='hidden_link' href='#class.expl.init-2.sentence-2'>.</a></div> <div id='class.expl.init-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.expl.init-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
complex v[6] = { 1, complex(1,2), complex(), 2 };</pre><div id='class.expl.init-2.sentence-3' class='sentence'>Here,
<span class='texttt'>complex&#x200b;::&#x200b;complex(double)</span>
is called for the initialization of
<span class='texttt'>v[0]</span>
and
<span class='texttt'>v[3]</span>,
<span class='texttt'>complex&#x200b;::&#x200b;complex(&#x200b;double, double)</span>
is called for the initialization of
<span class='texttt'>v[1]</span>,
<span class='texttt'>complex&#x200b;::&#x200b;complex()</span>
is called for the initialization
<span class='texttt'>v[2]</span>,
<span class='texttt'>v[4]</span>,
and
<span class='texttt'>v[5]</span><a class='hidden_link' href='#class.expl.init-2.sentence-3'>.</a></div> <div id='class.expl.init-2.sentence-4' class='sentence'>For another example,</div><pre class='codeblock'>
struct X {
  int i;
  float f;
  complex c;
} x = { 99, 88.8, 77.7 };</pre><div id='class.expl.init-2.sentence-5' class='sentence'>Here,
<span class='texttt'>x.i</span>
is initialized with 99,
<span class='texttt'>x.f</span>
is initialized with 88.8, and
<span class='texttt'>complex&#x200b;::&#x200b;complex(double)</span>
is called for the initialization of
<span class='texttt'>x.c</span><a class='hidden_link' href='#class.expl.init-2.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.expl.init-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.expl.init-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.expl.init-2.sentence-6' class='sentence'>Braces can be elided in the
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
for any aggregate, even if the aggregate has members of a class type with
user-defined type conversions; see <a href='dcl.init.aggr'>[dcl.init.aggr]</a><a class='hidden_link' href='#class.expl.init-2.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.expl.init-3'><div class='marginalizedparent'><a class='marginalized' href='#class.expl.init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1620'>#</a></div><div id='class.expl.init-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.expl.init-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.expl.init-3.sentence-1' class='sentence'>If
<span class='texttt'>T</span>
is a class type with no default constructor,
any declaration of an object of type
<span class='texttt'>T</span>
(or array thereof) is ill-formed if no
<i ><a href='dcl.init#nt:initializer'>initializer</a></i>
is explicitly specified (see <a href='class.init'>[class.init]</a> and <a href='dcl.init'>[dcl.init]</a>)<a class='hidden_link' href='#class.expl.init-3.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.expl.init-4'><div class='marginalizedparent'><a class='marginalized' href='#class.expl.init-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1632'>#</a></div><div id='class.expl.init-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.expl.init-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.expl.init-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':order_of_execution,constructor_and_static_objects'></a></span>The order in which objects with static or thread storage duration
are initialized is described in <a href='basic.start.dynamic'>[basic.start.dynamic]</a> and <a href='stmt.dcl'>[stmt.dcl]</a><a class='hidden_link' href='#class.expl.init-4.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='class.base.init' class='section'><h3 ><a class='secnum' href='#class.base.init' style='min-width:103pt'>15.6.2</a> Initializing bases and members <a class='abbr_ref' href='class.base.init'>[class.base.init]</a></h3><span class='indexparent'><a class='index' id=':initialization,base_class'></a></span><span class='indexparent'><a class='index' id=':initialization,member'></a></span><div class='para' id='class.base.init-1'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1643'>#</a></div><div id='class.base.init-1.sentence-1' class='sentence'>In the definition of a constructor for a class,
initializers for direct and virtual base class subobjects and
non-static data members can be specified by a
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>,
which has the form</div><pre class='bnf'><a class='nontermdef' id='nt:ctor-initializer'>ctor-initializer:</a>
&#9;<span class='terminal'>:</span> <i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i>
</pre><pre class='bnf'><a class='nontermdef' id='nt:mem-initializer-list'>mem-initializer-list:</a>
&#9;<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i> <span class='terminal'>,</span> <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' id='nt:mem-initializer'>mem-initializer:</a>
&#9;<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> <span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
&#9;<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
</pre><pre class='bnf'><a class='nontermdef' id='nt:mem-initializer-id'>mem-initializer-id:</a>
&#9;<i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
&#9;<i ><a href='lex.name#nt:identifier'>identifier</a></i>
</pre></div><div class='para' id='class.base.init-2'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1673'>#</a></div><div id='class.base.init-2.sentence-1' class='sentence'>In a <i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> an initial unqualified
<i ><a href='lex.name#nt:identifier'>identifier</a></i> is looked up in the scope of the constructor's class
and, if not found in that scope, it is looked up in the scope containing the
constructor's definition<a class='hidden_link' href='#class.base.init-2.sentence-1'>.</a></div> <div id='class.base.init-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.base.init-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.base.init-2.sentence-3' class='sentence'>If the constructor's class contains a member with the same name as a direct
or virtual base class of the class, a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
naming the member or base class and composed of a single identifier
refers to the class member<a class='hidden_link' href='#class.base.init-2.sentence-3'>.</a></div> <div id='class.base.init-2.sentence-4' class='sentence'>A
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
for the hidden base class may be specified using a qualified name<a class='hidden_link' href='#class.base.init-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.base.init-2.sentence-2' class='sentence'>
Unless the
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
names the constructor's class,
a non-static data member of the constructor's class, or
a direct or virtual base of that class,
the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is ill-formed<a class='hidden_link' href='#class.base.init-2.sentence-2'>.</a></div></div><div class='para' id='class.base.init-3'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1697'>#</a></div><div id='class.base.init-3.sentence-1' class='sentence'>A
<i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i>
can initialize a base class using any <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> that denotes that base class type<a class='hidden_link' href='#class.base.init-3.sentence-1'>.</a></div> <div id='class.base.init-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { A(); };
typedef A global_A;
struct B { };
struct C: public A, public B { C(); };
C::C(): global_A() { }          <span class='comment'>// mem-initializer for base <span class='tcode_in_codeblock'>A</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-4'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1712'>#</a></div><div id='class.base.init-4.sentence-1' class='sentence'>If a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
is ambiguous because it designates both a direct non-virtual base class and
an inherited virtual base class, the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is ill-formed<a class='hidden_link' href='#class.base.init-4.sentence-1'>.</a></div> <div id='class.base.init-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { A(); };
struct B: public virtual A { };
struct C: public A, public B { C(); };
C::C(): A() { }                 <span class='comment'>// ill-formed: which <span class='tcode_in_codeblock'>A</span>?
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-5'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1729'>#</a></div><div id='class.base.init-5.sentence-1' class='sentence'>A
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>
may initialize a variant member of the
constructor's class<a class='hidden_link' href='#class.base.init-5.sentence-1'>.</a></div> <div id='class.base.init-5.sentence-2' class='sentence'>If a
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>
specifies more than one
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
for the same member or for the same base class,
the
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>
is ill-formed<a class='hidden_link' href='#class.base.init-5.sentence-2'>.</a></div></div><div class='para' id='class.base.init-6'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1743'>#</a></div><div id='class.base.init-6.sentence-1' class='sentence'>A <i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i> can delegate to another
constructor of the constructor's class using any
<i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> that denotes the constructor's class itself<a class='hidden_link' href='#class.base.init-6.sentence-1'>.</a></div> <div id='class.base.init-6.sentence-2' class='sentence'>If a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> designates the constructor's class,
it shall be the only <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>; the constructor
is a <a class='hidden_link' href='#def:delegating_constructor' id='def:delegating_constructor'><i>delegating constructor</i></a>, and the constructor selected by the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> is the <a class='hidden_link' href='#def:target_constructor' id='def:target_constructor'><i>target constructor</i></a><a class='hidden_link' href='#class.base.init-6.sentence-2'>.</a></div> <div id='class.base.init-6.sentence-3' class='sentence'>The target constructor is selected by overload resolution<a class='hidden_link' href='#class.base.init-6.sentence-3'>.</a></div> <div id='class.base.init-6.sentence-4' class='sentence'>Once the target constructor returns, the body of the delegating constructor
is executed<a class='hidden_link' href='#class.base.init-6.sentence-4'>.</a></div> <div id='class.base.init-6.sentence-5' class='sentence'>If a constructor delegates to itself directly or indirectly,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#class.base.init-6.sentence-5'>.</a></div> <div id='class.base.init-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct C {
  C( int ) { }                  <span class='comment'>// #1: non-delegating constructor
</span>  C(): C(42) { }                <span class='comment'>// #2: delegates to #1
</span>  C( char c ) : C(42.0) { }     <span class='comment'>// #3: ill-formed due to recursion with #4
</span>  C( double d ) : C('a') { }    <span class='comment'>// #4: ill-formed due to recursion with #3
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-7'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1766'>#</a></div><div id='class.base.init-7.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,base_class_'></a></span><span class='indexparent'><a class='index' id=':initialization,member_object'></a></span>The
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
or <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
in a
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is used to initialize the
designated subobject (or, in the case of a delegating constructor, the complete class object)
according to the initialization rules of <a href='dcl.init'>[dcl.init]</a> for direct-initialization<a class='hidden_link' href='#class.base.init-7.sentence-1'>.</a></div> <div id='class.base.init-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B1 { B1(int); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct B2 { B2(int); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
struct D : B1, B2 {
  D(int);
  B1 b;
  const int c;
};

D::D(int a) : B2(a+1), B1(a+2), c(a+3), b(a+4) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
D d(10);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.base.init-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.base.init-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.base.init-7.sentence-3' class='sentence'>The initialization
performed by each <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
constitutes a <a href='intro.execution#def:full-expression'>full-expression</a><a class='hidden_link' href='#class.base.init-7.sentence-3'>.</a></div> <div id='class.base.init-7.sentence-4' class='sentence'>Any expression in
a
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is evaluated as part of the full-expression that performs the initialization<a class='hidden_link' href='#class.base.init-7.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.base.init-7.sentence-2' class='sentence'>
A <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> where the <i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> denotes
a virtual base class is ignored during execution of a constructor of any class that is
not the most derived class<a class='hidden_link' href='#class.base.init-7.sentence-2'>.</a></div></div><div class='para' id='class.base.init-8'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1804'>#</a></div><div id='class.base.init-8.sentence-1' class='sentence'>A temporary expression bound to a reference member in a <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is ill-formed<a class='hidden_link' href='#class.base.init-8.sentence-1'>.</a></div> <div id='class.base.init-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  A() : v(42) { }   <span class='comment'>// error
</span>  const int&amp; v;
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-9'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1816'>#</a></div><div id='class.base.init-9.sentence-1' class='sentence'>In a non-delegating constructor, if
a given potentially constructed subobject is not designated by a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>
(including the case where there is no
<i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i>
because the constructor has no
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>),
then
<ul class='itemize'><li id='class.base.init-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.base.init-9.1'>(9.1)</a></div><div id='class.base.init-9.1.sentence-1' class='sentence'>if the entity is a non-static data member that has
a <a href='class.mem#def:default_member_initializer'>default member initializer</a> and either</div><div id='class.base.init-9.1.sentence-2' class='sentence'><ul class='itemize'><li id='class.base.init-9.1.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#class.base.init-9.1.1'>(9.1.1)</a></div><div id='class.base.init-9.1.1.sentence-1' class='sentence'>the constructor's class is a <a href='class.union'>union</a>, and no other variant
member of that union is designated by a <i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> or</div></li><li id='class.base.init-9.1.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#class.base.init-9.1.2'>(9.1.2)</a></div><div id='class.base.init-9.1.2.sentence-1' class='sentence'>the constructor's class is not a union, and, if the entity is a member of an
anonymous union, no other member of that union is designated by a
<i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i>,</div></li></ul>
the entity is initialized from its default member initializer
as specified in <a href='dcl.init'>[dcl.init]</a>;</div></li><li id='class.base.init-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.base.init-9.2'>(9.2)</a></div><div id='class.base.init-9.2.sentence-1' class='sentence'>otherwise, if the entity is an anonymous union or a variant member (<a href='class.union.anon'>[class.union.anon]</a>), no initialization is performed;</div></li><li id='class.base.init-9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.base.init-9.3'>(9.3)</a></div><div id='class.base.init-9.3.sentence-1' class='sentence'>otherwise, the entity is <a href='dcl.init#def:default-initialization'>default-initialized</a><a class='hidden_link' href='#class.base.init-9.3.sentence-1'>.</a></div></li></ul></div><div id='class.base.init-9.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.base.init-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.base.init-9.sentence-4' class='sentence'>An <a href='class.abstract'>abstract class</a> is never a most derived class, thus its constructors never initialize virtual base classes, therefore the
corresponding <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i><span class='textit'>s</span> may be omitted<a class='hidden_link' href='#class.base.init-9.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.base.init-9.sentence-2' class='sentence'>
An attempt to initialize more than one non-static data member of a union renders the
program ill-formed<a class='hidden_link' href='#class.base.init-9.sentence-2'>.</a></div> <div id='class.base.init-9.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':initialization,const_member'></a></span><span class='indexparent'><a class='index' id=':initialization,reference_member'></a></span><div id='class.base.init-9.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.base.init-9.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.base.init-9.sentence-5' class='sentence'>After the call to a constructor for class
<span class='texttt'>X</span>
for an object with automatic or dynamic storage duration
has completed, if
the constructor was not invoked as part of value-initialization and
a member of
<span class='texttt'>X</span>
is neither initialized nor
given a value
during execution of the <i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i> of the body of the constructor,
the member has an indeterminate value<a class='hidden_link' href='#class.base.init-9.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> 
<div id='class.base.init-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  A();
};

struct B {
  B(int);
};

struct C {
  C() { }               <span class='comment'>// initializes members as follows:
</span>  A a;                  <span class='comment'>// OK: calls <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;A()</span>
</span>  const B b;            <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> has no default constructor
</span>  int i;                <span class='comment'>// OK: <span class='tcode_in_codeblock'>i</span> has indeterminate value
</span>  int j = 5;            <span class='comment'>// OK: <span class='tcode_in_codeblock'>j</span> has the value <span class='tcode_in_codeblock'>5</span>
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='class.base.init-10'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1885'>#</a></div><div id='class.base.init-10.sentence-1' class='sentence'>If a given non-static data member has both a default member initializer
and a <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>, the initialization specified by the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> is performed, and the non-static data member's
default member initializer is ignored<a class='hidden_link' href='#class.base.init-10.sentence-1'>.</a></div> <div id='class.base.init-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.base.init-10.sentence-2' class='sentence'>Given
<pre class='codeblock'>
struct A {
  int i = /* some integer expression with side effects */ ;
  A(int arg) : i(arg) { }
  <span class='comment'>// ...
</span>};</pre>
the <span class='texttt'>A(int)</span> constructor will simply initialize <span class='texttt'>i</span> to the value of
<span class='texttt'>arg</span>, and the
<span class='indexparent'><a class='index' id=':side_effects'></a></span>side effects in <span class='texttt'>i</span>'s default member initializer
will not take place<a class='hidden_link' href='#class.base.init-10.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-11'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1908'>#</a></div><div id='class.base.init-11.sentence-1' class='sentence'>A temporary expression bound to a reference member from a
default member initializer is ill-formed<a class='hidden_link' href='#class.base.init-11.sentence-1'>.</a></div> <div id='class.base.init-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  A() = default;        <span class='comment'>// OK
</span>  A(int v) : v(v) { }   <span class='comment'>// OK
</span>  const int&amp; v = 42;    <span class='comment'>// OK
</span>};
A a1;                   <span class='comment'>// error: ill-formed binding of temporary to reference
</span>A a2(1);                <span class='comment'>// OK, unfortunately
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-12'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1923'>#</a></div><div id='class.base.init-12.sentence-1' class='sentence'>In a non-delegating constructor, the destructor for each potentially constructed
subobject of class type is <a href='class.dtor#def:potentially_invoked'>potentially invoked</a><a class='hidden_link' href='#class.base.init-12.sentence-1'>.</a></div> <div id='class.base.init-12.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.base.init-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.base.init-12.sentence-2' class='sentence'>This provision ensures that destructors can be called for fully-constructed
subobjects in case an exception is thrown (<a href='except.ctor'>[except.ctor]</a>)<a class='hidden_link' href='#class.base.init-12.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-13'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1929'>#</a></div><div id='class.base.init-13.sentence-1' class='sentence'>In a non-delegating constructor, initialization
proceeds in the following order:
<ul class='itemize'><li id='class.base.init-13.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.base.init-13.1'>(13.1)</a></div><div id='class.base.init-13.1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,order_of_virtual_base_class'></a></span>First, and only for the constructor of the <a href='intro.object#def:most_derived_class'>most derived class</a>,
virtual base classes are initialized in the order they appear on a
depth-first left-to-right traversal of the directed acyclic graph of
base classes,
where “left-to-right” is the order of appearance of the base classes
in the derived class
<i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i><a class='hidden_link' href='#class.base.init-13.1.sentence-1'>.</a></div></li><li id='class.base.init-13.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.base.init-13.2'>(13.2)</a></div><div id='class.base.init-13.2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,order_of_base_class'></a></span>Then, direct base classes are initialized in declaration order
as they appear in the
<i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>
(regardless of the order of the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i><span class='textit'>s</span>)<a class='hidden_link' href='#class.base.init-13.2.sentence-1'>.</a></div></li><li id='class.base.init-13.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.base.init-13.3'>(13.3)</a></div><div id='class.base.init-13.3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,order_of_member'></a></span>Then, non-static data members are initialized in the order
they were declared in the class definition
(again regardless of the order of the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i><span class='textit'>s</span>)<a class='hidden_link' href='#class.base.init-13.3.sentence-1'>.</a></div></li><li id='class.base.init-13.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.base.init-13.4'>(13.4)</a></div><div id='class.base.init-13.4.sentence-1' class='sentence'>Finally, the <i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i> of the constructor
body  is executed<a class='hidden_link' href='#class.base.init-13.4.sentence-1'>.</a></div></li></ul></div><div id='class.base.init-13.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.base.init-13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.base.init-13.sentence-2' class='sentence'>The declaration order is mandated to ensure that base and member
subobjects are destroyed in the reverse order of initialization<a class='hidden_link' href='#class.base.init-13.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-14'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1965'>#</a></div><div id='class.base.init-14.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct V {
  V();
  V(int);
};

struct A : virtual V {
  A();
  A(int);
};

struct B : virtual V {
  B();
  B(int);
};

struct C : A, B, virtual V {
  C();
  C(int);
};

A::A(int i) : V(i) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
B::B(int i) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
C::C(int i) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

V v(1);             <span class='comment'>// use <span class='tcode_in_codeblock'>V(int)</span>
</span>A a(2);             <span class='comment'>// use <span class='tcode_in_codeblock'>V(int)</span>
</span>B b(3);             <span class='comment'>// use <span class='tcode_in_codeblock'>V()</span>
</span>C c(4);             <span class='comment'>// use <span class='tcode_in_codeblock'>V()</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-15'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L1999'>#</a></div><div id='class.base.init-15.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initializer,scope_of_member'></a></span>Names in the
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
or <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
of a
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
are evaluated in the scope of the constructor for which the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
is specified<a class='hidden_link' href='#class.base.init-15.sentence-1'>.</a></div> <div id='class.base.init-15.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X {
  int a;
  int b;
  int i;
  int j;
public:
  const int&amp; r;
  X(int i): r(a), b(i), i(i), j(this-&gt;i) { }
};</pre><div id='class.base.init-15.sentence-2' class='sentence'>initializes
<span class='texttt'>X&#x200b;::&#x200b;r</span>
to refer to
<span class='texttt'>X&#x200b;::&#x200b;a</span>,
initializes
<span class='texttt'>X&#x200b;::&#x200b;b</span>
with the value of the constructor parameter
<span class='texttt'>i</span>,
initializes
<span class='texttt'>X&#x200b;::&#x200b;i</span>
with the value of the constructor parameter
<span class='texttt'>i</span>,
and initializes
<span class='texttt'>X&#x200b;::&#x200b;j</span>
with the value of
<span class='texttt'>X&#x200b;::&#x200b;i</span>;
this takes place each time an object of class
<span class='texttt'>X</span>
is created<a class='hidden_link' href='#class.base.init-15.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.base.init-15.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.base.init-15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.base.init-15.sentence-3' class='sentence'>Because the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
are evaluated in the scope of the constructor, the
<span class='texttt'>this</span>
pointer can be used in the
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
of a
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i>
to refer to the object being initialized<a class='hidden_link' href='#class.base.init-15.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-16'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L2055'>#</a></div><div id='class.base.init-16.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,member_function_call_during'></a></span>Member functions (including <a href='class.virtual'>virtual member functions</a>) can be
called for an object under construction<a class='hidden_link' href='#class.base.init-16.sentence-1'>.</a></div> <div id='class.base.init-16.sentence-2' class='sentence'>Similarly, an object under construction can be the operand of the
<a href='expr.typeid'><span class='texttt'>typeid</span> operator</a> or of a
<a href='expr.dynamic.cast'><span class='texttt'>dynamic_&shy;cast</span></a><a class='hidden_link' href='#class.base.init-16.sentence-2'>.</a></div> <div id='class.base.init-16.sentence-3' class='sentence'>However, if these operations are performed in a
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>
(or in a function called directly or indirectly from a
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i>)
before all the
<i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i><span class='textit'>s</span>
for base classes have completed, the program has undefined behavior<a class='hidden_link' href='#class.base.init-16.sentence-3'>.</a></div> <div id='class.base.init-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A {
public:
  A(int);
};

class B : public A {
  int j;
public:
  int f();
  B() : A(f()),     <span class='comment'>// undefined: calls member function but base <span class='tcode_in_codeblock'>A</span> not yet initialized
</span>  j(f()) { }        <span class='comment'>// well-defined: bases are all initialized
</span>};

class C {
public:
  C(int);
};

class D : public B, C {
  int i;
public:
  D() : C(f()),     <span class='comment'>// undefined: calls member function but base <span class='tcode_in_codeblock'>C</span> not yet initialized
</span>  i(f()) { }        <span class='comment'>// well-defined: bases are all initialized
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-17'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L2098'>#</a></div><div id='class.base.init-17.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.base.init-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.base.init-17.sentence-1' class='sentence'><a href='class.cdtor'>[class.cdtor]</a> describes the result of virtual function calls,
<span class='texttt'>typeid</span>
and
<span class='texttt'>dynamic_&shy;cast</span>s
during construction for the well-defined cases;
that is, describes the
<a class='hidden_link' href='#def:polymorphic_behavior' id='def:polymorphic_behavior'><i>polymorphic behavior</i></a>
of an object under construction<a class='hidden_link' href='#class.base.init-17.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.base.init-18'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L2110'>#</a></div><div id='class.base.init-18.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initializer,pack_expansion'></a></span>A <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> followed by an ellipsis is
a <a href='temp.variadic#def:pack_expansion'>pack expansion</a> that initializes the base
classes specified by a pack expansion in the <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>
for the class<a class='hidden_link' href='#class.base.init-18.sentence-1'>.</a></div> <div id='class.base.init-18.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.base.init-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class... Mixins&gt;
class X : public Mixins... {
public:
  X(const Mixins&amp;... mixins) : Mixins(mixins)... { }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='class.inhctor.init' class='section'><h3 ><a class='secnum' href='#class.inhctor.init' style='min-width:103pt'>15.6.3</a> Initialization by inherited constructor <a class='abbr_ref' href='class.inhctor.init'>[class.inhctor.init]</a></h3><span class='indexparent'><a class='index' id=':initialization,by_inherited_constructor'></a></span><div class='para' id='class.inhctor.init-1'><div class='marginalizedparent'><a class='marginalized' href='#class.inhctor.init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L2130'>#</a></div><div id='class.inhctor.init-1.sentence-1' class='sentence'>When a constructor for type <span class='texttt'>B</span> is invoked
to initialize an object of a different type <span class='texttt'>D</span>
(that is, when the constructor was <a href='namespace.udecl#def:inherits'>inherited</a>),
initialization proceeds as if a defaulted default constructor
were used to initialize the <span class='texttt'>D</span> object and
each base class subobject from which the constructor was inherited,
except that the <span class='texttt'>B</span> subobject is initialized
by the invocation of the inherited constructor<a class='hidden_link' href='#class.inhctor.init-1.sentence-1'>.</a></div> <div id='class.inhctor.init-1.sentence-2' class='sentence'>The complete initialization is considered to be a single function call;
in particular, the initialization of the inherited constructor's parameters
is sequenced before the initialization of any part of the <span class='texttt'>D</span> object<a class='hidden_link' href='#class.inhctor.init-1.sentence-2'>.</a></div> <div id='class.inhctor.init-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.inhctor.init-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B1 {
  B1(int, ...) { }
};

struct B2 {
  B2(double) { }
};

int get();

struct D1 : B1 {
  using B1::B1;     <span class='comment'>// inherits <span class='tcode_in_codeblock'>B1(int, ...)</span>
</span>  int x;
  int y = get();
};

void test() {
  D1 d(2, 3, 4);    <span class='comment'>// OK: <span class='tcode_in_codeblock'>B1</span> is initialized by calling <span class='tcode_in_codeblock'>B1(2, 3, 4)</span>,
</span>                    <span class='comment'>// then <span class='tcode_in_codeblock'>d.x</span> is default-initialized (no initialization is performed),
</span>                    <span class='comment'>// then <span class='tcode_in_codeblock'>d.y</span> is initialized by calling <span class='tcode_in_codeblock'>get()</span>
</span>  D1 e;             <span class='comment'>// error: <span class='tcode_in_codeblock'>D1</span> has a deleted default constructor
</span>}

struct D2 : B2 {
  using B2::B2;
  B1 b;
};

D2 f(1.0);          <span class='comment'>// error: <span class='tcode_in_codeblock'>B1</span> has a deleted default constructor
</span>
struct W { W(int); };
struct X : virtual W { using W::W; X() = delete; };
struct Y : X { using X::X; };
struct Z : Y, virtual W { using Y::Y; };
Z z(0);             <span class='comment'>// OK: initialization of <span class='tcode_in_codeblock'>Y</span> does not invoke default constructor of <span class='tcode_in_codeblock'>X</span>
</span>
template&lt;class T&gt; struct Log : T {
  using T::T;       <span class='comment'>// inherits all constructors from class <span class='tcode_in_codeblock'>T</span>
</span>  ~Log() { std::clog &lt;&lt; "Destroying wrapper" &lt;&lt; std::endl; }
};</pre> <div id='class.inhctor.init-1.sentence-3' class='sentence'>
Class template <span class='texttt'>Log</span> wraps any class and forwards all of its constructors,
while writing a message to the standard log
whenever an object of class <span class='texttt'>Log</span> is destroyed<a class='hidden_link' href='#class.inhctor.init-1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.inhctor.init-2'><div class='marginalizedparent'><a class='marginalized' href='#class.inhctor.init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L2190'>#</a></div><div id='class.inhctor.init-2.sentence-1' class='sentence'>If the constructor was inherited from multiple base class subobjects
of type <span class='texttt'>B</span>, the program is ill-formed<a class='hidden_link' href='#class.inhctor.init-2.sentence-1'>.</a></div> <div id='class.inhctor.init-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.inhctor.init-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { A(int); };
struct B : A { using A::A; };

struct C1 : B { using B::B; };
struct C2 : B { using B::B; };

struct D1 : C1, C2 {
  using C1::C1;
  using C2::C2;
};

struct V1 : virtual B { using B::B; };
struct V2 : virtual B { using B::B; };

struct D2 : V1, V2 {
  using V1::V1;
  using V2::V2;
};

D1 d1(0);       <span class='comment'>// ill-formed: ambiguous
</span>D2 d2(0);       <span class='comment'>// OK: initializes virtual <span class='tcode_in_codeblock'>B</span> base class, which initializes the <span class='tcode_in_codeblock'>A</span> base class
</span>                <span class='comment'>// then initializes the <span class='tcode_in_codeblock'>V1</span> and <span class='tcode_in_codeblock'>V2</span> base classes as if by a defaulted default constructor
</span>
struct M { M(); M(int); };
struct N : M { using M::M; };
struct O : M {};
struct P : N, O { using N::N; using O::O; };
P p(0);             <span class='comment'>// OK: use <span class='tcode_in_codeblock'>M(0)</span> to initialize <span class='tcode_in_codeblock'>N</span>'s base class,
</span>                    <span class='comment'>// use <span class='tcode_in_codeblock'>M()</span> to initialize <span class='tcode_in_codeblock'>O</span>'s base class
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.inhctor.init-3'><div class='marginalizedparent'><a class='marginalized' href='#class.inhctor.init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be5c14cf44a6e6ea7348e65dbf99e3a8152c28ac/source/special.tex#L2227'>#</a></div><div id='class.inhctor.init-3.sentence-1' class='sentence'>When an object is initialized by an inherited constructor,
initialization of the object is complete
when the initialization of all subobjects is complete<a class='hidden_link' href='#class.inhctor.init-3.sentence-1'>.</a></div> </div></div></div></body></html>