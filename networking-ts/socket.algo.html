<!DOCTYPE html><html lang='en'><head><title>[socket.algo]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><div id='socket.algo'><h1 ><a class='secnum' style='min-width:73pt'>20</a> Socket algorithms <a class='abbr_ref' href='./#socket.algo'>[socket.algo]</a></h1><div id='connect'><h2 ><a class='secnum' href='#connect' style='min-width:88pt'>20.1</a> Synchronous connect operations <a class='abbr_ref' href='socket.algo.connect'>[socket.algo.connect]</a></h2><p ><code class='itemdecl'>
template&lt;class Protocol, class EndpointSequence&gt;
  typename Protocol::endpoint connect(basic_socket&lt;Protocol&gt;&amp; s,
                                      const EndpointSequence&amp; endpoints);
template&lt;class Protocol, class EndpointSequence&gt;
  typename Protocol::endpoint connect(basic_socket&lt;Protocol&gt;&amp; s,
                                      const EndpointSequence&amp; endpoints,
                                      error_code&amp; ec);
</code></p><div class='itemdescr'></div><div class='para' id='connect-1'><div class='marginalizedparent'><a class='marginalized' href='#connect-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>connect(s, endpoints, [](auto, auto){ return true; }, ec)</span>.
</p></div></div><p ><code class='itemdecl'>
template&lt;class Protocol, class EndpointSequence, class ConnectCondition&gt;
  typename Protocol::endpoint connect(basic_socket&lt;Protocol&gt;&amp; s,
                                      const EndpointSequence&amp; endpoints,
                                      ConnectCondition c);
template&lt;class Protocol, class EndpointSequence, class ConnectCondition&gt;
  typename Protocol::endpoint connect(basic_socket&lt;Protocol&gt;&amp; s,
                                      const EndpointSequence&amp; endpoints,
                                      ConnectCondition c, error_code&amp; ec);
</code></p><div class='itemdescr'></div><div class='para' id='connect-2'><div class='marginalizedparent'><a class='marginalized' href='#connect-2'>2</a></div><div class='itemdescr'><p ><i>Effects:</i> Performs <span class='texttt'>ec.clear()</span>, then finds the first element <span class='texttt'>ep</span> in the sequence <span class='texttt'>endpoints</span> for which:
</p><ul class='itemize'><li id='connect-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-2.1'>(2.1)</a></div><p ><span class='texttt'>c(ec, ep)</span> yields <span class='texttt'>true</span>;
</p></li><li id='connect-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-2.2'>(2.2)</a></div><p ><span class='texttt'>s.close(ec)</span> succeeds;
</p></li><li id='connect-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-2.3'>(2.3)</a></div><p ><span class='texttt'>s.open(ep.protocol(), ec)</span> succeeds; and
</p></li><li id='connect-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-2.4'>(2.4)</a></div><p ><span class='texttt'>s.connect(ep, ec)</span> succeeds.
</p></li></ul></div></div><div class='para' id='connect-3'><div class='marginalizedparent'><a class='marginalized' href='#connect-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>typename Protocol::endpoint()</span> if no such element is found, otherwise <span class='texttt'>ep</span>.</p></div></div><div class='para' id='connect-4'><div class='marginalizedparent'><a class='marginalized' href='#connect-4'>4</a></div><div class='itemdescr'><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='connect-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-4.1'>(4.1)</a></div><p ><span class='texttt'>socket_errc::not_found</span> — if <span class='texttt'>endpoints.empty()</span> or if the function object <span class='texttt'>c</span> returned <span class='texttt'>false</span> for all elements in the sequence.
</p></li></ul></div></div><p ><code class='itemdecl'>
template&lt;class Protocol, class InputIterator&gt;
  InputIterator connect(basic_socket&lt;Protocol&gt;&amp; s,
                        InputIterator first, InputIterator last);
template&lt;class Protocol, class InputIterator&gt;
  InputIterator connect(basic_socket&lt;Protocol&gt;&amp; s,
                        InputIterator first, InputIterator last,
                        error_code&amp; ec);
</code></p><div class='itemdescr'></div><div class='para' id='connect-5'><div class='marginalizedparent'><a class='marginalized' href='#connect-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>connect(s, first, last, [](auto, auto){ return true; }, ec)</span>.
</p></div></div><p ><code class='itemdecl'>
template&lt;class Protocol, class InputIterator, class ConnectCondition&gt;
  InputIterator connect(basic_socket&lt;Protocol&gt;&amp; s,
                        InputIterator first, InputIterator last,
                        ConnectCondition c);
template&lt;class Protocol, class InputIterator, class ConnectCondition&gt;
  InputIterator connect(basic_socket&lt;Protocol&gt;&amp; s,
                        InputIterator first, InputIterator last,
                        ConnectCondition c, error_code&amp; ec);
</code></p><div class='itemdescr'></div><div class='para' id='connect-6'><div class='marginalizedparent'><a class='marginalized' href='#connect-6'>6</a></div><div class='itemdescr'><p ><i>Effects:</i> Performs <span class='texttt'>ec.clear()</span>, then finds the first iterator <span class='texttt'>i</span> in the range <span class='texttt'>[first, last)</span> for which:
</p><ul class='itemize'><li id='connect-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-6.1'>(6.1)</a></div><p ><span class='texttt'>c(ec, *i)</span> yields <span class='texttt'>true</span>;
</p></li><li id='connect-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-6.2'>(6.2)</a></div><p ><span class='texttt'>s.close(ec)</span> succeeds;
</p></li><li id='connect-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-6.3'>(6.3)</a></div><p ><span class='texttt'>s.open(typename Protocol::endpoint(*i).protocol(), ec)</span> succeeds; and
</p></li><li id='connect-6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-6.4'>(6.4)</a></div><p ><span class='texttt'>s.connect(*i, ec)</span> succeeds.
</p></li></ul></div></div><div class='para' id='connect-7'><div class='marginalizedparent'><a class='marginalized' href='#connect-7'>7</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>last</span> if no such iterator is found, otherwise <span class='texttt'>i</span>.</p></div></div><div class='para' id='connect-8'><div class='marginalizedparent'><a class='marginalized' href='#connect-8'>8</a></div><div class='itemdescr'><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='connect-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#connect-8.1'>(8.1)</a></div><p ><span class='texttt'>socket_errc::not_found</span> — if <span class='texttt'>first == last</span> or if the function object <span class='texttt'>c</span> returned <span class='texttt'>false</span> for all iterators in the range.
</p></li></ul></div></div></div><div id='async.connect'><h2 ><a class='secnum' href='#async.connect' style='min-width:88pt'>20.2</a> Asynchronous connect operations <a class='abbr_ref' href='socket.algo.async.connect'>[socket.algo.async.connect]</a></h2><p ><code class='itemdecl'>
template&lt;class Protocol, class EndpointSequence, class CompletionToken&gt;
  <i><span class='texttt'>DEDUCED</span></i> async_connect(basic_socket&lt;Protocol&gt;&amp; s,
                        const EndpointSequence&amp; endpoints,
                        CompletionToken&amp;&amp; token);
</code></p><div class='itemdescr'></div><div class='para' id='async.connect-1'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i>
</p><pre class='codeblock'>
async_connect(s, endpoints, [](auto, auto){ return true; }, forward&lt;CompletionToken&gt;(token))
</pre></div></div><p ><code class='itemdecl'>
template&lt;class Protocol, class EndpointSequence,
  class ConnectCondition, class CompletionToken&gt;
    <i><span class='texttt'>DEDUCED</span></i> async_connect(basic_socket&lt;Protocol&gt;&amp; s,
                          const EndpointSequence&amp; endpoints,
                          ConnectCondition c,
                          CompletionToken&amp;&amp; token);
</code></p><div class='itemdescr'></div><div class='para' id='async.connect-2'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-2'>2</a></div><div class='itemdescr'><p >A composed asynchronous operation (<a href='async.reqmts.async.composed'>[async.reqmts.async.composed]</a>).</p></div></div><div class='para' id='async.connect-3'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-3'>3</a></div><div class='itemdescr'><p ><i>Completion signature:</i> <span class='texttt'>void(error_code ec, typename Protocol::endpoint ep)</span>.</p></div></div><div class='para' id='async.connect-4'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-4'>4</a></div><div class='itemdescr'><p ><i>Effects:</i> Performs <span class='texttt'>ec.clear()</span>, then finds the first element <span class='texttt'>ep</span> in the sequence <span class='texttt'>endpoints</span> for which:
</p><ul class='itemize'><li id='async.connect-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-4.1'>(4.1)</a></div><p ><span class='texttt'>c(ec, ep)</span> yields <span class='texttt'>true</span>;
</p></li><li id='async.connect-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-4.2'>(4.2)</a></div><p ><span class='texttt'>s.close(ec)</span> succeeds;
</p></li><li id='async.connect-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-4.3'>(4.3)</a></div><p ><span class='texttt'>s.open(ep.protocol(), ec)</span> succeeds; and
</p></li><li id='async.connect-4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-4.4'>(4.4)</a></div><p >the asynchronous operation <span class='texttt'>s.async_connect(ep, <i><span class='texttt'>unspecified</span></i>)</span> succeeds.
</p></li></ul></div></div><div class='para' id='async.connect-5'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-5'>5</a></div><div class='itemdescr'><p ><span class='texttt'>ec</span> is updated with the result of the <span class='texttt'>s.async_connect(ep, <i><span class='texttt'>unspecified</span></i>)</span> operation, if any. If no such element is found, or if the operation fails with one of the error conditions listed below, <span class='texttt'>ep</span> is set to <span class='texttt'>typename Protocol::endpoint()</span>. [&nbsp;<i>Note:</i> The underlying <span class='texttt'>close</span>, <span class='texttt'>open</span>, and <span class='texttt'>async_connect</span> operations are performed sequentially. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div></div><div class='para' id='async.connect-6'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-6'>6</a></div><div class='itemdescr'><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='async.connect-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-6.1'>(6.1)</a></div><p ><span class='texttt'>socket_errc::not_found</span> — if <span class='texttt'>endpoints.empty()</span> or if the function object <span class='texttt'>c</span> returned <span class='texttt'>false</span> for all elements in the sequence.
</p></li><li id='async.connect-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-6.2'>(6.2)</a></div><p ><span class='texttt'>errc::operation_canceled</span> — if <span class='texttt'>s.is_open() == false</span> immediately following an <span class='texttt'>async_connect</span> operation on the underlying socket.
</p></li></ul></div></div><p ><code class='itemdecl'>
template&lt;class Protocol, class InputIterator, class CompletionToken&gt;
  <i><span class='texttt'>DEDUCED</span></i> async_connect(basic_socket&lt;Protocol&gt;&amp; s,
                        InputIterator first, InputIterator last,
                        CompletionToken&amp;&amp; token);
</code></p><div class='itemdescr'></div><div class='para' id='async.connect-7'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-7'>7</a></div><div class='itemdescr'><p ><i>Returns:</i>
</p><pre class='codeblock'>
async_connect(s, first, last, [](auto, auto){ return true; },
              forward&lt;CompletionToken&gt;(token))
</pre></div></div><p ><code class='itemdecl'>
template&lt;class Protocol, class InputIterator,
  class ConnectCondition, class CompletionToken&gt;
    <i><span class='texttt'>DEDUCED</span></i> async_connect(basic_socket&lt;Protocol&gt;&amp; s,
                          InputIterator first, InputIterator last,
                          ConnectCondition c,
                          CompletionToken&amp;&amp; token);
</code></p><div class='itemdescr'></div><div class='para' id='async.connect-8'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-8'>8</a></div><div class='itemdescr'><p >A composed asynchronous operation (<a href='async.reqmts.async.composed'>[async.reqmts.async.composed]</a>).</p></div></div><div class='para' id='async.connect-9'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-9'>9</a></div><div class='itemdescr'><p ><i>Completion signature:</i> <span class='texttt'>void(error_code ec, InputIterator i)</span>.</p></div></div><div class='para' id='async.connect-10'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-10'>10</a></div><div class='itemdescr'><p ><i>Effects:</i> Performs <span class='texttt'>ec.clear()</span>, then finds the first iterator <span class='texttt'>i</span> in the range <span class='texttt'>[first, last)</span> for which:
</p><ul class='itemize'><li id='async.connect-10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-10.1'>(10.1)</a></div><p ><span class='texttt'>c(ec, *i)</span> yields <span class='texttt'>true</span>;
</p></li><li id='async.connect-10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-10.2'>(10.2)</a></div><p ><span class='texttt'>s.close(ec)</span> succeeds;
</p></li><li id='async.connect-10.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-10.3'>(10.3)</a></div><p ><span class='texttt'>s.open(typename Protocol::endpoint(*i).protocol(), ec)</span> succeeds; and
</p></li><li id='async.connect-10.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-10.4'>(10.4)</a></div><p >the asynchronous operation <span class='texttt'>s.async_connect(*i, <i><span class='texttt'>unspecified</span></i>)</span> succeeds.
</p></li></ul></div></div><div class='para' id='async.connect-11'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-11'>11</a></div><div class='itemdescr'><p ><span class='texttt'>ec</span> is updated with the result of the <span class='texttt'>s.async_connect(*i, <i><span class='texttt'>unspecified</span></i>)</span> operation, if any. If no such iterator is found, or if the operation fails with one of the error conditions listed below, <span class='texttt'>i</span> is set to <span class='texttt'>last</span>. [&nbsp;<i>Note:</i> The underlying <span class='texttt'>close</span>, <span class='texttt'>open</span>, and <span class='texttt'>async_connect</span> operations are performed sequentially. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div></div><div class='para' id='async.connect-12'><div class='marginalizedparent'><a class='marginalized' href='#async.connect-12'>12</a></div><div class='itemdescr'><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='async.connect-12.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-12.1'>(12.1)</a></div><p ><span class='texttt'>socket_errc::not_found</span> — if <span class='texttt'>first == last</span> or if the function object <span class='texttt'>c</span> returned <span class='texttt'>false</span> for all iterators in the range.
</p></li><li id='async.connect-12.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#async.connect-12.2'>(12.2)</a></div><p ><span class='texttt'>errc::operation_canceled</span> — if <span class='texttt'>s.is_open() == false</span> immediately following an <span class='texttt'>async_connect</span> operation on the underlying socket.
</p></li></ul></div></div></div></div></div></body></html>