<!DOCTYPE html><html lang='en'><head><title>[internet.endpoint]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>21</a> Internet protocol <a class='abbr_ref' href='./#internet'>[internet]</a></h1><div id='internet.endpoint'><h2 ><a class='secnum' style='min-width:88pt'>21.13</a> Class template <span class='texttt'>ip::basic_endpoint</span> <a class='abbr_ref'>[internet.endpoint]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >An object of type <span class='texttt'>basic_endpoint&lt;InternetProtocol&gt;</span> represents a protocol-specific endpoint, where an endpoint consists of an IP address and port number. Endpoints may be used to identify sources and destinations for socket connections and datagrams.</p><pre class='codeblock'>
namespace std {
namespace experimental {
namespace net {
inline namespace v1 {
namespace ip {

  template&lt;class InternetProtocol&gt;
  class basic_endpoint
  {
  public:
    <span class='comment'>// types:
</span>    using protocol_type = InternetProtocol;

    <span class='comment'>// <a href='internet.endpoint.cons'>[internet.endpoint.cons]</a>, constructors:
</span>    constexpr basic_endpoint() noexcept;
    constexpr basic_endpoint(const protocol_type&amp; proto,
                             port_type port_num) noexcept;
    constexpr basic_endpoint(const ip::address&amp; addr,
                             port_type port_num) noexcept;

    <span class='comment'>// <a href='internet.endpoint.members'>[internet.endpoint.members]</a>, members:
</span>    constexpr protocol_type protocol() const noexcept;
    constexpr ip::address address() const noexcept;
    void address(const ip::address&amp; addr) noexcept;
    constexpr port_type port() const noexcept;
    void port(port_type port_num) noexcept;
  };

  <span class='comment'>// <a href='internet.endpoint.comparisons'>[internet.endpoint.comparisons]</a>, basic_endpoint comparisons:
</span>  template&lt;class InternetProtocol&gt;
    constexpr bool operator==(const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                              const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
  template&lt;class InternetProtocol&gt;
    constexpr bool operator!=(const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                              const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
  template&lt;class InternetProtocol&gt;
    constexpr bool operator&lt; (const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                              const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
  template&lt;class InternetProtocol&gt;
    constexpr bool operator&gt; (const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                              const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
  template&lt;class InternetProtocol&gt;
    constexpr bool operator&lt;=(const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                              const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
  template&lt;class InternetProtocol&gt;
    constexpr bool operator&gt;=(const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                              const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;

  <span class='comment'>// <a href='internet.endpoint.io'>[internet.endpoint.io]</a>, basic_endpoint I/O:
</span>  template&lt;class CharT, class Traits, class InternetProtocol&gt;
    basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(
      basic_ostream&lt;CharT, Traits&gt;&amp; os,
      const basic_endpoint&lt;InternetProtocol&gt;&amp; ep);

} <span class='comment'>// namespace ip
</span>} <span class='comment'>// inline namespace v1
</span>} <span class='comment'>// namespace net
</span>} <span class='comment'>// namespace experimental
</span>} <span class='comment'>// namespace std
</span></pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >Instances of the <span class='texttt'>basic_endpoint</span> class template meet the requirements for an <span class='texttt'>Endpoint</span> (<a href='socket.reqmts.endpoint'>[socket.reqmts.endpoint]</a>).</p><p ><span class='indexparent'><a class='index' id='extensible_implementation,basic_endpoint'></a></span><span class='indexparent'><a class='index' id='basic_endpoint,extensible_implementation'></a></span></p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p >Extensible implementations provide the following member functions:</p><pre class='codeblock'>
namespace std {
namespace experimental {
namespace net {
inline namespace v1 {
namespace ip {

  template&lt;class InternetProtocol&gt;
  class basic_endpoint
  {
  public:
    void* data() noexcept;
    const void* data() const noexcept;
    constexpr size_t size() const noexcept;
    void resize(size_t s);
    constexpr size_t capacity() const noexcept;
    <i>// remainder unchanged</i>
  private:
    union
    {
      sockaddr_in v4_;
      sockaddr_in6 v6_;
    } data_; <span class='comment'>// <i>exposition only</i>
</span>  };

} <span class='comment'>// namespace ip
</span>} <span class='comment'>// inline namespace v1
</span>} <span class='comment'>// namespace net
</span>} <span class='comment'>// namespace experimental
</span>} <span class='comment'>// namespace std
</span></pre></div><div id='cons'><h3 ><a class='secnum' href='#cons' style='min-width:103pt'>21.13.1</a> <span class='texttt'>ip::basic_endpoint</span> constructors <a class='abbr_ref' href='internet.endpoint.cons'>[internet.endpoint.cons]</a></h3><p ><code class='itemdecl'>
constexpr basic_endpoint() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>this-&gt;address() == ip::address()</span> and <span class='texttt'>port() == 0</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr basic_endpoint(const protocol_type&amp; proto,
                         port_type port_num) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><p ><i>Requires:</i> <span class='texttt'>proto == protocol_type::v4() || proto == protocol_type::v6()</span>.</p></div></div><div class='para' id='cons-3'><div class='marginalizedparent'><a class='marginalized' href='#cons-3'>3</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
</p><ul class='itemize'><li id='cons-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#cons-3.1'>(3.1)</a></div><p >If <span class='texttt'>proto == protocol_type::v6()</span>, <span class='texttt'>this-&gt;address() == ip::address_v6()</span>; otherwise,<br/>
<span class='texttt'>this-&gt;address() == ip::address_v4()</span>.
</p></li><li id='cons-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#cons-3.2'>(3.2)</a></div><p ><span class='texttt'>port() == port_num</span>.
</p></li></ul></div></div><p ><code class='itemdecl'>
constexpr basic_endpoint(const ip::address&amp; addr,
                         port_type port_num) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-4'><div class='marginalizedparent'><a class='marginalized' href='#cons-4'>4</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>this-&gt;address() == addr</span> and <span class='texttt'>port() == port_num</span>.
</p></div></div></div><div id='members'><h3 ><a class='secnum' href='#members' style='min-width:103pt'>21.13.2</a> <span class='texttt'>ip::basic_endpoint</span> members <a class='abbr_ref' href='internet.endpoint.members'>[internet.endpoint.members]</a></h3><p ><code class='itemdecl'>
constexpr protocol_type protocol() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-1'><div class='marginalizedparent'><a class='marginalized' href='#members-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>protocol_type::v6()</span> if the expression <span class='texttt'>this-&gt;address().is_v6()</span> is <span class='texttt'>true</span>, otherwise <span class='texttt'>protocol_type::v4()</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr ip::address address() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-2'><div class='marginalizedparent'><a class='marginalized' href='#members-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> The address associated with the endpoint.
</p></div></div><p ><code class='itemdecl'>
void address(const ip::address&amp; addr) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-3'><div class='marginalizedparent'><a class='marginalized' href='#members-3'>3</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>this-&gt;address() == addr</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr port_type port() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-4'><div class='marginalizedparent'><a class='marginalized' href='#members-4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i> The port number associated with the endpoint.
</p></div></div><p ><code class='itemdecl'>
void port(port_type port_num) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-5'><div class='marginalizedparent'><a class='marginalized' href='#members-5'>5</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>port() == port_num</span>.
</p></div></div></div><div id='comparisons'><h3 ><a class='secnum' href='#comparisons' style='min-width:103pt'>21.13.3</a> <span class='texttt'>ip::basic_endpoint</span> comparisons <a class='abbr_ref' href='internet.endpoint.comparisons'>[internet.endpoint.comparisons]</a></h3><p ><code class='itemdecl'>
template&lt;class InternetProtocol&gt;
  constexpr bool operator==(const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                            const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-1'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>a.address() == b.address() &amp;&amp; a.port() == b.port())</span>.
</p></div></div><p ><code class='itemdecl'>
template&lt;class InternetProtocol&gt;
  constexpr bool operator!=(const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                            const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-2'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(a == b)</span>.
</p></div></div><p ><code class='itemdecl'>
template&lt;class InternetProtocol&gt;
  constexpr bool operator&lt; (const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                            const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-3'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>tie(a.address(), a.port()) &lt; tie(b.address(), b.port())</span>.
</p></div></div><p ><code class='itemdecl'>
template&lt;class InternetProtocol&gt;
  constexpr bool operator&gt; (const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                            const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-4'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>b &lt; a</span>.
</p></div></div><p ><code class='itemdecl'>
template&lt;class InternetProtocol&gt;
  constexpr bool operator&lt;=(const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                            const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-5'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(b &lt; a)</span>.
</p></div></div><p ><code class='itemdecl'>
template&lt;class InternetProtocol&gt;
  constexpr bool operator&gt;=(const basic_endpoint&lt;InternetProtocol&gt;&amp; a,
                            const basic_endpoint&lt;InternetProtocol&gt;&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-6'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-6'>6</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(a &lt; b)</span>.
</p></div></div></div><div id='io'><h3 ><a class='secnum' href='#io' style='min-width:103pt'>21.13.4</a> <span class='texttt'>ip::basic_endpoint</span> I/O <a class='abbr_ref' href='internet.endpoint.io'>[internet.endpoint.io]</a></h3><p ><code class='itemdecl'>
template&lt;class CharT, class Traits, class InternetProtocol&gt;
  basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(
    basic_ostream&lt;CharT, Traits&gt;&amp; os,
    const basic_endpoint&lt;InternetProtocol&gt;&amp; ep);
</code></p><div class='itemdescr'></div><div class='para' id='io-1'><div class='marginalizedparent'><a class='marginalized' href='#io-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i> Outputs a representation of the endpoint to the stream, as if it were implemented as follows:
</p><pre class='codeblock'>
basic_ostringstream&lt;CharT, Traits&gt; ss;
if (ep.protocol() == basic_endpoint&lt;InternetProtocol&gt;::protocol_type::v6())
  ss &lt;&lt; "[" &lt;&lt; ep.address() &lt;&lt; "]";
else
  ss &lt;&lt; ep.address();
ss &lt;&lt; ":" &lt;&lt; ep.port();
os &lt;&lt; ss.str();
</pre></div></div><div class='para' id='io-2'><div class='marginalizedparent'><a class='marginalized' href='#io-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>os</span>.
</p></div></div><div class='para' id='io-3'><div class='marginalizedparent'><a class='marginalized' href='#io-3'>3</a></div><p >[&nbsp;<i>Note:</i> The representation of the endpoint when it contains an IP version 6 address is based on [RFC2732]. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div></div><div id='extensible'><h3 ><a class='secnum' href='#extensible' style='min-width:103pt'>21.13.5</a> <span class='texttt'>ip::basic_endpoint</span> members (extensible implementations) <a class='abbr_ref' href='internet.endpoint.extensible'>[internet.endpoint.extensible]</a></h3><p ><code class='itemdecl'>
void* data() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='extensible-1'><div class='marginalizedparent'><a class='marginalized' href='#extensible-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>addressof(data_)</span>.
</p></div></div><p ><code class='itemdecl'>
const void* data() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='extensible-2'><div class='marginalizedparent'><a class='marginalized' href='#extensible-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>addressof(data_)</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr size_t size() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='extensible-3'><div class='marginalizedparent'><a class='marginalized' href='#extensible-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>sizeof(sockaddr_in6)</span> if <span class='texttt'>protocol().family() == AF_INET6</span>, otherwise <span class='texttt'>sizeof(sockaddr_in)</span>.
</p></div></div><p ><code class='itemdecl'>
void resize(size_t s);
</code></p><div class='itemdescr'></div><div class='para' id='extensible-4'><div class='marginalizedparent'><a class='marginalized' href='#extensible-4'>4</a></div><div class='itemdescr'><p ><i>Remarks:</i> <span class='texttt'>length_error</span> if either of the following conditions is <span class='texttt'>true</span>:
</p><ul class='itemize'><li id='extensible-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#extensible-4.1'>(4.1)</a></div><p ><span class='texttt'>protocol().family() == AF_INET6 &amp;&amp; s != sizeof(sockaddr_in6)</span>,
</p></li><li id='extensible-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#extensible-4.2'>(4.2)</a></div><p ><span class='texttt'>protocol().family() == AF_INET4 &amp;&amp; s != sizeof(sockaddr_in)</span>.
</p></li></ul></div></div><p ><code class='itemdecl'>
constexpr size_t capacity() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='extensible-5'><div class='marginalizedparent'><a class='marginalized' href='#extensible-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>sizeof(data_)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='basic_resolver_entry'></a></span></p></div></div></div></body></html>