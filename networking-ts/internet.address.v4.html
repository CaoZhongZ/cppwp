<!DOCTYPE html><html lang='en'><head><title>[internet.address.v4]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>21</a> Internet protocol <a class='abbr_ref' href='./#internet'>[internet]</a></h1><div id='internet.address.v4'><h2 ><a class='secnum' style='min-width:88pt'>21.5</a> Class <span class='texttt'>ip::address_v4</span> <a class='abbr_ref'>[internet.address.v4]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >The class <span class='texttt'>address_v4</span> is a representation of an IPv4 address.</p><p ><span class='indexparent'><a class='index' id='address_v4'></a></span></p><pre class='codeblock'>
namespace std {
namespace experimental {
namespace net {
inline namespace v1 {
namespace ip {

  class address_v4
  {
  public:
    <span class='comment'>// types:
</span>    using uint_type = uint_least32_t;
    struct bytes_type;

    <span class='comment'>// constructors:
</span>    constexpr address_v4() noexcept;
    constexpr address_v4(const address_v4&amp; a) noexcept;
    constexpr address_v4(const bytes_type&amp; bytes);
    explicit constexpr address_v4(uint_type val);

    <span class='comment'>// assignment:
</span>    address_v4&amp; operator=(const address_v4&amp; a) noexcept;

    <span class='comment'>// members:
</span>    constexpr bool is_unspecified() const noexcept;
    constexpr bool is_loopback() const noexcept;
    constexpr bool is_multicast() const noexcept;
    constexpr bytes_type to_bytes() const noexcept;
    constexpr uint_type to_uint() const noexcept;
    template&lt;class Allocator = allocator&lt;char&gt;&gt;
      basic_string&lt;char, char_traits&lt;char&gt;, Allocator&gt;
        to_string(const Allocator&amp; a = Allocator()) const;

    <span class='comment'>// static members:
</span>    static constexpr address_v4 any() noexcept;
    static constexpr address_v4 loopback() noexcept;
    static constexpr address_v4 broadcast() noexcept;
  };

  <span class='comment'>// address_v4 comparisons:
</span>  constexpr bool operator==(const address_v4&amp; a, const address_v4&amp; b) noexcept;
  constexpr bool operator!=(const address_v4&amp; a, const address_v4&amp; b) noexcept;
  constexpr bool operator&lt; (const address_v4&amp; a, const address_v4&amp; b) noexcept;
  constexpr bool operator&gt; (const address_v4&amp; a, const address_v4&amp; b) noexcept;
  constexpr bool operator&lt;=(const address_v4&amp; a, const address_v4&amp; b) noexcept;
  constexpr bool operator&gt;=(const address_v4&amp; a, const address_v4&amp; b) noexcept;

  <span class='comment'>// address_v4 creation:
</span>  constexpr address_v4 make_address_v4(const address_v4::bytes_type&amp; bytes);
  constexpr address_v4 make_address_v4(address_v4::uint_type val);
  constexpr address_v4 make_address_v4(v4_mapped_t, const address_v6&amp; a);
  address_v4 make_address_v4(const char* str);
  address_v4 make_address_v4(const char* str, error_code&amp; ec) noexcept;
  address_v4 make_address_v4(const string&amp; str);
  address_v4 make_address_v4(const string&amp; str, error_code&amp; ec) noexcept;
  address_v4 make_address_v4(string_view str);
  address_v4 make_address_v4(string_view str, error_code&amp; ec) noexcept;

  <span class='comment'>// address_v4 I/O:
</span>  template&lt;class CharT, class Traits&gt;
    basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(
      basic_ostream&lt;CharT, Traits&gt;&amp; os, const address_v4&amp; addr);

} <span class='comment'>// namespace ip
</span>} <span class='comment'>// inline namespace v1
</span>} <span class='comment'>// namespace net
</span>} <span class='comment'>// namespace experimental
</span>} <span class='comment'>// namespace std
</span></pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p ><span class='texttt'>address_v4</span> satisfies the requirements for <span class='texttt'>Destructible</span> (C++Std &sect;<a href='../n4140/destructible'>[destructible]</a>), <span class='texttt'>CopyConstructible</span> (C++Std &sect;<a href='../n4140/copyconstructible'>[copyconstructible]</a>), and <span class='texttt'>CopyAssignable</span> (C++Std &sect;<a href='../n4140/copyassignable'>[copyassignable]</a>).</p></div><div id='bytes'><h3 ><a class='secnum' href='#bytes' style='min-width:103pt'>21.5.1</a> Struct <span class='texttt'>ip::address_v4::bytes_type</span> <a class='abbr_ref' href='internet.address.v4.bytes'>[internet.address.v4.bytes]</a></h3><p ><span class='indexparent'><a class='index' id='bytes_type,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,bytes_type'></a></span></p><pre class='codeblock'>
namespace std {
namespace experimental {
namespace net {
inline namespace v1 {
namespace ip {

  struct address_v4::bytes_type : array&lt;unsigned char, 4&gt;
  {
    template&lt;class... T&gt; explicit constexpr bytes_type(T... t)
      : array&lt;unsigned char, 4&gt;{{static_cast&lt;unsigned char&gt;(t)...}} {}
  };

} <span class='comment'>// namespace ip
</span>} <span class='comment'>// inline namespace v1
</span>} <span class='comment'>// namespace net
</span>} <span class='comment'>// namespace experimental
</span>} <span class='comment'>// namespace std
</span></pre><div class='para' id='bytes-1'><div class='marginalizedparent'><a class='marginalized' href='#bytes-1'>1</a></div><p >The <span class='texttt'>ip::address_v4::bytes_type</span> type is a standard-layout struct that provides a byte-level representation of an IPv4 address in network byte order.</p><p ><span class='indexparent'><a class='index' id='address_v4,constructor'></a></span></p></div></div><div id='cons'><h3 ><a class='secnum' href='#cons' style='min-width:103pt'>21.5.2</a> <span class='texttt'>ip::address_v4</span> constructors <a class='abbr_ref' href='internet.address.v4.cons'>[internet.address.v4.cons]</a></h3><p ><code class='itemdecl'>
constexpr address_v4() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>to_bytes()</span> yields <span class='texttt'>{0, 0, 0, 0}</span> and <span class='texttt'>to_uint() == 0</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr address_v4(const bytes_type&amp; bytes);
</code></p><div class='itemdescr'></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><p ><i>Remarks:</i> <span class='texttt'>out_of_range</span> if any element of <span class='texttt'>bytes</span> is not in the range <span class='texttt'>[0, 0xFF]</span>. [&nbsp;<i>Note:</i> For implementations where <span class='texttt'>numeric_limits&lt;unsigned char&gt;::max() == 0xFF</span>, no out-of-range detection is needed. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div></div><div class='para' id='cons-3'><div class='marginalizedparent'><a class='marginalized' href='#cons-3'>3</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>to_bytes() == bytes</span> and <span class='texttt'>to_uint() == (bytes[0] &lt;&lt; 24) | (bytes[1] &lt;&lt; 16) | (bytes[2] &lt;&lt; 8) | bytes[3]</span>.
</p></div></div><p ><code class='itemdecl'>
explicit constexpr address_v4(address_v4::uint_type val);
</code></p><div class='itemdescr'></div><div class='para' id='cons-4'><div class='marginalizedparent'><a class='marginalized' href='#cons-4'>4</a></div><div class='itemdescr'><p ><i>Remarks:</i> <span class='texttt'>out_of_range</span> if <span class='texttt'>val</span> is not in the range <span class='texttt'>[0, 0xFFFFFFFF]</span>. [&nbsp;<i>Note:</i> For implementations where <span class='texttt'>numeric_limits&lt;address_v4::uint_type&gt;::max() == 0xFFFFFFFF</span>, no out-of-range detection is needed. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div></div><div class='para' id='cons-5'><div class='marginalizedparent'><a class='marginalized' href='#cons-5'>5</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>to_uint() == val</span> and <span class='texttt'>to_bytes()</span> is <span class='texttt'>{ (val &gt;&gt; 24) &amp; 0xFF, (val &gt;&gt; 16) &amp; 0xFF, (val &gt;&gt; 8) &amp; 0xFF, val &amp; 0xFF }</span>.
</p></div></div></div><div id='members'><h3 ><a class='secnum' href='#members' style='min-width:103pt'>21.5.3</a> <span class='texttt'>ip::address_v4</span> members <a class='abbr_ref' href='internet.address.v4.members'>[internet.address.v4.members]</a></h3><p ><span class='indexparent'><a class='index' id='is_unspecified,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,is_unspecified'></a></span><code class='itemdecl'>
constexpr bool is_unspecified() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-1'><div class='marginalizedparent'><a class='marginalized' href='#members-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>to_uint() == 0</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='is_loopback,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,is_loopback'></a></span><code class='itemdecl'>
constexpr bool is_loopback() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-2'><div class='marginalizedparent'><a class='marginalized' href='#members-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>(to_uint() &amp; 0xFF000000) == 0x7F000000</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='is_multicast,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,is_multicast'></a></span><code class='itemdecl'>
constexpr bool is_multicast() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-3'><div class='marginalizedparent'><a class='marginalized' href='#members-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>(to_uint() &amp; 0xF0000000) == 0xE0000000</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='to_bytes,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,to_bytes'></a></span><code class='itemdecl'>
constexpr bytes_type to_bytes() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-4'><div class='marginalizedparent'><a class='marginalized' href='#members-4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i> A representation of the address in network byte order (<a href='defs.net.byte.order'>[defs.net.byte.order]</a>).
</p></div></div><p ><span class='indexparent'><a class='index' id='to_uint,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,to_uint'></a></span><code class='itemdecl'>
constexpr address_v4::uint_type to_uint() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-5'><div class='marginalizedparent'><a class='marginalized' href='#members-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i> A representation of the address in host byte order (<a href='defs.host.byte.order'>[defs.host.byte.order]</a>).
</p></div></div><p ><span class='indexparent'><a class='index' id='to_string,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,to_string'></a></span><code class='itemdecl'>
template&lt;class Allocator = allocator&lt;char&gt;&gt;
  basic_string&lt;char, char_traits&lt;char&gt;, Allocator&gt;
    to_string(const Allocator&amp; a = Allocator()) const;
</code></p><div class='itemdescr'></div><div class='para' id='members-6'><div class='marginalizedparent'><a class='marginalized' href='#members-6'>6</a></div><div class='itemdescr'><p ><i>Returns:</i> If successful, the textual representation of the address, determined as if by POSIX <span class='texttt'>inet_ntop</span> when invoked with address family <span class='texttt'>AF_INET</span>. Otherwise <span class='texttt'>basic_string&lt;char, char_traits&lt;char&gt;, Allocator&gt;(a)</span>.
</p></div></div></div><div id='static'><h3 ><a class='secnum' href='#static' style='min-width:103pt'>21.5.4</a> <span class='texttt'>ip::address_v4</span> static members <a class='abbr_ref' href='internet.address.v4.static'>[internet.address.v4.static]</a></h3><p ><span class='indexparent'><a class='index' id='any,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,any'></a></span><code class='itemdecl'>
static constexpr address_v4 any() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='static-1'><div class='marginalizedparent'><a class='marginalized' href='#static-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>address_v4()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='loopback,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,loopback'></a></span><code class='itemdecl'>
static constexpr address_v4 loopback() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='static-2'><div class='marginalizedparent'><a class='marginalized' href='#static-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>address_v4(0x7F000001)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='multicast,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,multicast'></a></span><code class='itemdecl'>
static constexpr address_v4 broadcast() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='static-3'><div class='marginalizedparent'><a class='marginalized' href='#static-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>address_v4(0xFFFFFFFF)</span>.
</p></div></div></div><div id='comparisons'><h3 ><a class='secnum' href='#comparisons' style='min-width:103pt'>21.5.5</a> <span class='texttt'>ip::address_v4</span> comparisons <a class='abbr_ref' href='internet.address.v4.comparisons'>[internet.address.v4.comparisons]</a></h3><p ><span class='indexparent'><a class='index' id='operator==,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,operator=='></a></span><code class='itemdecl'>
constexpr bool operator==(const address_v4&amp; a, const address_v4&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-1'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>a.to_uint() == b.to_uint()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator!=,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,operator!='></a></span><code class='itemdecl'>
constexpr bool operator!=(const address_v4&amp; a, const address_v4&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-2'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(a == b)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator<,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,operator<'></a></span><code class='itemdecl'>
constexpr bool operator&lt; (const address_v4&amp; a, const address_v4&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-3'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>a.to_uint() &lt; b.to_uint()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator>,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,operator>'></a></span><code class='itemdecl'>
constexpr bool operator&gt; (const address_v4&amp; a, const address_v4&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-4'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>b &lt; a</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator<=,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,operator<='></a></span><code class='itemdecl'>
constexpr bool operator&lt;=(const address_v4&amp; a, const address_v4&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-5'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(b &lt; a)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator>=,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,operator>='></a></span><code class='itemdecl'>
constexpr bool operator&gt;=(const address_v4&amp; a, const address_v4&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-6'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-6'>6</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(a &lt; b)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='make_address_v4'></a></span></p></div><div id='creation'><h3 ><a class='secnum' href='#creation' style='min-width:103pt'>21.5.6</a> <span class='texttt'>ip::address_v4</span> creation <a class='abbr_ref' href='internet.address.v4.creation'>[internet.address.v4.creation]</a></h3><p ><code class='itemdecl'>
constexpr address_v4 make_address_v4(const address_v4::bytes_type&amp; bytes);
</code></p><div class='itemdescr'></div><div class='para' id='creation-1'><div class='marginalizedparent'><a class='marginalized' href='#creation-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>address_v4(bytes)</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr address_v4 make_address_v4(address_v4::uint_type val);
</code></p><div class='itemdescr'></div><div class='para' id='creation-2'><div class='marginalizedparent'><a class='marginalized' href='#creation-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>address_v4(val)</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr address_v4 make_address_v4(v4_mapped_t, const address_v6&amp; a);
</code></p><div class='itemdescr'></div><div class='para' id='creation-3'><div class='marginalizedparent'><a class='marginalized' href='#creation-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> An <span class='texttt'>address_v4</span> object corresponding to the IPv4-mapped IPv6 address, as if computed by the following method:
</p><pre class='codeblock'>
address_v6::bytes_type v6b = a.to_bytes();
address_v4::bytes_type v4b(v6b[12], v6b[13], v6b[14], v6b[15]);
return address_v4(v4b);
</pre></div></div><div class='para' id='creation-4'><div class='marginalizedparent'><a class='marginalized' href='#creation-4'>4</a></div><div class='itemdescr'><p ><i>Remarks:</i> <span class='texttt'>bad_address_cast</span> if <span class='texttt'>a.is_v4_mapped()</span> is <span class='texttt'>false</span>.
</p></div></div><p ><code class='itemdecl'>
address_v4 make_address_v4(const char* str);
address_v4 make_address_v4(const char* str, error_code&amp; ec) noexcept;
address_v4 make_address_v4(const string&amp; str);
address_v4 make_address_v4(const string&amp; str, error_code&amp; ec) noexcept;
address_v4 make_address_v4(string_view str);
address_v4 make_address_v4(string_view str, error_code&amp; ec) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='creation-5'><div class='marginalizedparent'><a class='marginalized' href='#creation-5'>5</a></div><div class='itemdescr'><p ><i>Effects:</i> Converts a textual representation of an address into a corresponding <span class='texttt'>address_v4</span> value, as if by POSIX <span class='texttt'>inet_pton</span> when invoked with address family <span class='texttt'>AF_INET</span>.</p></div></div><div class='para' id='creation-6'><div class='marginalizedparent'><a class='marginalized' href='#creation-6'>6</a></div><div class='itemdescr'><p ><i>Returns:</i> If successful, an <span class='texttt'>address_v4</span> value corresponding to the string <span class='texttt'>str</span>. Otherwise <span class='texttt'>address_v4()</span>.</p></div></div><div class='para' id='creation-7'><div class='marginalizedparent'><a class='marginalized' href='#creation-7'>7</a></div><div class='itemdescr'><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='creation-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#creation-7.1'>(7.1)</a></div><p ><span class='texttt'>errc::invalid_argument</span> — if <span class='texttt'>str</span> is not a valid textual representation of an IPv4 address.
</p></li></ul></div></div></div><div id='io'><h3 ><a class='secnum' href='#io' style='min-width:103pt'>21.5.7</a> <span class='texttt'>ip::address_v4</span> I/O <a class='abbr_ref' href='internet.address.v4.io'>[internet.address.v4.io]</a></h3><p ><span class='indexparent'><a class='index' id='operator<<,address_v4'></a></span><span class='indexparent'><a class='index' id='address_v4,operator<<'></a></span><code class='itemdecl'>
template&lt;class CharT, class Traits&gt;
  basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(
    basic_ostream&lt;CharT, Traits&gt;&amp; os, const address_v4&amp; addr);
</code></p><div class='itemdescr'></div><div class='para' id='io-1'><div class='marginalizedparent'><a class='marginalized' href='#io-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>os &lt;&lt; addr.to_string().c_str()</span>.
</p></div></div></div></div></div></body></html>