<!DOCTYPE html><html lang='en'><head><title>[err.report.sync]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>9</a> Error reporting <a class='abbr_ref' href='./#err.report'>[err.report]</a></h1><div id='err.report.sync'><h2 ><a class='secnum' style='min-width:88pt'>9.1</a> Synchronous operations <a class='abbr_ref'>[err.report.sync]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >Most synchronous network library functions provide two overloads, one that throws an exception to report system errors, and another that sets an <span class='texttt'>error_code</span> (C++ 2014 [syserr]).</p><p >[&nbsp;<i>Note:</i> This supports two common use cases:
</p><ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div><p >Uses where system errors are truly exceptional and indicate a serious failure. Throwing an exception is the most appropriate response.
</p></li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div><p >Uses where system errors are routine and do not necessarily represent failure. Returning an error code is the most appropriate response. This allows application specific error handling, including simply ignoring the error.
</p></li></ul><p ><i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >Functions not having an argument of type <span class='texttt'>error_code&amp;</span> report errors as follows, unless otherwise specified:</p><ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><p >When a call by the implementation to an operating system or other underlying API results in an error that prevents the function from meeting its specifications, the function exits via an exception of a type that would match a handler of type <span class='texttt'>system_error</span>.</p></li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><p >Destructors throw nothing.
</p></li></ul></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p >Functions having an argument of type <span class='texttt'>error_code&amp;</span> report errors as follows, unless otherwise specified:</p><ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div><p >If a call by the implementation to an operating system or other underlying API results in an error that prevents the function from meeting its specifications, the <span class='texttt'>error_code&amp;</span> argument <span class='texttt'>ec</span> is set as appropriate for the specific error. Otherwise, the <span class='texttt'>ec</span> argument is set such that <span class='texttt'>!ec</span> is <span class='texttt'>true</span>.
</p></li></ul></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><p >Where a function is specified as two overloads, with and without an argument of type <span class='texttt'>error_code&amp;</span>:</p><pre class='codeblock'>
<i>R f</i>(<i>A1</i> a1, <i>A2</i> a2, ..., <i>AN</i> aN);
<i>R f</i>(<i>A1</i> a1, <i>A2</i> a2, ..., <i>AN</i> aN, error_code&amp; ec);
</pre></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><p >then, when R is non-<span class='texttt'>void</span>, the effects of the first overload are as if:</p><pre class='codeblock'>
error_code ec;
<i>R</i> r(<i>f</i>(a1, a2, ..., aN, ec));
if (ec) throw system_error(ec, S);
return r;
</pre></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><p >otherwise, when R is <span class='texttt'>void</span>, the effects of the first overload are as if:</p><pre class='codeblock'>
error_code ec;
<i>f</i>(a1, a2, ..., aN, ec);
if (ec) throw system_error(ec, S);
</pre></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><p >except that the type thrown may differ as specified above. <span class='texttt'>S</span> is an <span class='textsc'>ntbs</span> indicating where the exception was thrown. [&nbsp;<i>Note:</i> A possible value for <span class='texttt'>S</span> is <span class='texttt'>__func__</span>. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><p >For both overloads, failure to allocate storage is reported by throwing an exception as described in the C++ standard (C++ 2014 [res.on.exception.handling]).</p></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><p >In this document, when a type requirement is specified using two function call expressions <i>f</i>, with and without an argument <span class='texttt'>ec</span> of type <span class='texttt'>error_code</span>:</p><pre class='codeblock'>
<i>f</i>(a1, a2, ..., aN)
<i>f</i>(a1, a2, ..., aN, ec)
</pre><p >then the effects of the first call expression of <i>f</i> shall be as described for the first overload above.</p></div></div></div></body></html>