<!DOCTYPE html><html lang='en'><head><title>[async.reqmts.async.completion]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>13</a> Asynchronous model <a class='abbr_ref' href='./#async'>[async]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>13.2</a> Requirements <a class='abbr_ref' href='async.reqmts#async.completion'>[async.reqmts]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>13.2.7</a> Requirements on asynchronous operations <a class='abbr_ref' href='async.reqmts.async#completion'>[async.reqmts.async]</a></h3><div id='async.reqmts.async.completion'><h4 ><a class='secnum' style='min-width:118pt'>13.2.7.12</a> Execution of completion handler on completion of asynchronous operation <a class='abbr_ref'>[async.reqmts.async.completion]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >Let <span class='texttt'>Args...</span> be the argument types of the completion signature <span class='texttt'>Signature</span> and let <i>N</i> be <span class='texttt'>sizeof...(Args)</span>. Let <i>i</i> be in the range <span class='texttt'>[0, <i>N</i>)</span>. Let <span class='texttt'>T</span><span class='math'><sub ><span class='mathalpha'>i</span></sub></span> be the <span class='math'><span class='mathalpha'>i</span><sup ><span class='text'>th</span></sup></span> type in <span class='texttt'>Args...</span> and let <span class='texttt'>t</span><span class='math'><sub ><span class='mathalpha'>i</span></sub></span> be the <span class='math'><span class='mathalpha'>i</span><sup ><span class='text'>th</span></sup></span> completion handler argument associated with <span class='texttt'>T</span><span class='math'><sub ><span class='mathalpha'>i</span></sub></span>.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >Let <span class='texttt'>f</span> be a function object, callable as <span class='texttt'>f()</span>, that invokes <span class='texttt'>completion_handler</span> as if by <span class='texttt'>completion_handler(forward&lt;T<span class='math'><sub >0</sub></span>&gt;(t<span class='math'><sub >0</sub></span>), ..., forward&lt;T<span class='math'><sub ><span class='mathalpha'>N</span>-1</sub></span>&gt;(t<span class='math'><sub ><span class='mathalpha'>N</span>-1</sub></span>))</span>.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p >If an asynchronous operation completes immediately (that is, within the thread of execution calling the initiating function, and before the initiating function returns), the completion handler shall be submitted for execution as if by performing <span class='texttt'>ex2.post(std::move(f), alloc2)</span>. Otherwise, the completion handler shall be submitted for execution as if by performing <span class='texttt'>ex2.dispatch(std::move(f), alloc2)</span>.</p></div></div></div></body></html>