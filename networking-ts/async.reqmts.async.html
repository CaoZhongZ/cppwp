<!DOCTYPE html><html lang='en'><head><title>[async.reqmts.async]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>13</a> Asynchronous model <a class='abbr_ref' href='./#async'>[async]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>13.2</a> Requirements <a class='abbr_ref' href='async.reqmts#async'>[async.reqmts]</a></h2><div id='async.reqmts.async'><h3 ><a class='secnum' style='min-width:103pt'>13.2.7</a> Requirements on asynchronous operations <a class='abbr_ref'>[async.reqmts.async]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >This subclause uses the names <span class='texttt'>Alloc1</span>, <span class='texttt'>Alloc2</span>, <span class='texttt'>alloc1</span>, <span class='texttt'>alloc2</span>, <span class='texttt'>Args</span>, <span class='texttt'>CompletionHandler</span>, <span class='texttt'>completion_handler</span>, <span class='texttt'>Executor1</span>, <span class='texttt'>Executor2</span>, <span class='texttt'>ex1</span>, <span class='texttt'>ex2</span>, <span class='texttt'>f</span>, <i>i</i>, <i>N</i>, <span class='texttt'>Signature</span>, <span class='texttt'>token</span>, <span class='texttt'>T</span><span class='math'><sub ><span class='mathalpha'>i</span></sub></span>, <span class='texttt'>t</span><span class='math'><sub ><span class='mathalpha'>i</span></sub></span>, <span class='texttt'>work1</span>, and <span class='texttt'>work2</span> as placeholders for specifying the requirements below.</p></div><div id='concepts'><h4 ><a class='secnum' href='#concepts' style='min-width:118pt'>13.2.7.1</a> General asynchronous operation concepts <a class='abbr_ref' href='async.reqmts.async.concepts'>[async.reqmts.async.concepts]</a></h4><div class='para' id='concepts-1'><div class='marginalizedparent'><a class='marginalized' href='#concepts-1'>1</a></div><p >An initiating function is a function which may be called to start an asynchronous operation. A completion handler is a function object that will be invoked, at most once, with the result of the asynchronous operation.</p></div><div class='para' id='concepts-2'><div class='marginalizedparent'><a class='marginalized' href='#concepts-2'>2</a></div><p >The life cycle of an asynchronous operation is comprised of the following events and phases:</p><ul class='itemize'><li id='concepts-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#concepts-2.1'>(2.1)</a></div><p >Event 1: The asynchronous operation is started by a call to the initiating function.</p></li><li id='concepts-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#concepts-2.2'>(2.2)</a></div><p >Phase 1: The asynchronous operation is now outstanding.</p></li><li id='concepts-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#concepts-2.3'>(2.3)</a></div><p >Event 2: The externally observable side effects of the asynchronous operation, if any, are fully established. The completion handler is submitted to an executor.</p></li><li id='concepts-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#concepts-2.4'>(2.4)</a></div><p >Phase 2: The asynchronous operation is now completed.</p></li><li id='concepts-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#concepts-2.5'>(2.5)</a></div><p >Event 3: The completion handler is called with the result of the asynchronous operation.
</p></li></ul></div><div class='para' id='concepts-3'><div class='marginalizedparent'><a class='marginalized' href='#concepts-3'>3</a></div><p >In this document, all functions with the prefix <span class='texttt'>async_</span> are initiating functions.</p></div></div><div id='token'><h4 ><a class='secnum' href='#token' style='min-width:118pt'>13.2.7.2</a> Completion tokens and handlers <a class='abbr_ref' href='async.reqmts.async.token'>[async.reqmts.async.token]</a></h4><p ><span class='indexparent'><a class='index' id='initiating_function'></a></span></p><div class='para' id='token-1'><div class='marginalizedparent'><a class='marginalized' href='#token-1'>1</a></div><p >Initiating functions:</p><ul class='itemize'><li id='token-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#token-1.1'>(1.1)</a></div><p >are function templates with template parameter <span class='texttt'>CompletionToken</span>;</p><p ><span class='indexparent'><a class='index' id='completion_token'></a></span></p></li><li id='token-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#token-1.2'>(1.2)</a></div><p >accept, as the final parameter, a completion token object <span class='texttt'>token</span> of type <span class='texttt'>CompletionToken</span>;</p><p ><span class='indexparent'><a class='index' id='completion_signature'></a></span></p></li><li id='token-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#token-1.3'>(1.3)</a></div><p >specify a completion signature, which is a call signature (<span class='CppXref'>func.def</span>) <span class='texttt'>Signature</span> that determines the arguments to the completion handler.
</p></li></ul><p ><span class='indexparent'><a class='index' id='completion_handler'></a></span></p></div><div class='para' id='token-2'><div class='marginalizedparent'><a class='marginalized' href='#token-2'>2</a></div><p >An initiating function determines the type <span class='texttt'>CompletionHandler</span> of its
completion handler function object by performing
<span class='texttt'>typename async_result&lt;decay_t&lt;CompletionToken&gt;, Signature&gt;::completion_handler_type</span>.
The completion handler object <span class='texttt'>completion_handler</span> is initialized with
<span class='texttt'>std::forward&lt;CompletionToken&gt;(token)</span>.
[&nbsp;<i>Note:</i> No other requirements are placed on the type <span class='texttt'>CompletionToken</span>. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='token-3'><div class='marginalizedparent'><a class='marginalized' href='#token-3'>3</a></div><p >The type <span class='texttt'>CompletionHandler</span> shall satisfy the requirements of <span class='texttt'>Destructible</span> (<span class='CppXref'>destructible</span>) and <span class='texttt'>MoveConstructible</span> (<span class='CppXref'>moveconstructible</span>), and be callable with the specified call signature.</p></div><div class='para' id='token-4'><div class='marginalizedparent'><a class='marginalized' href='#token-4'>4</a></div><p >In this document, all initiating functions specify a
<span class='completionsig'></span> element that defines the call signature <span class='texttt'>Signature</span>.
The <span class='completionsig'></span> elements in this document have named
parameters, and the results of an asynchronous operation are specified in
terms of these names.</p></div></div><div id='return.type'><h4 ><a class='secnum' href='#return.type' style='min-width:118pt'>13.2.7.3</a> Deduction of initiating function return type <a class='abbr_ref' href='async.reqmts.async.return.type'>[async.reqmts.async.return.type]</a></h4><p ><span class='indexparent'><a class='index' id='initiating_function,deduction_of_return_type'></a></span></p><div class='para' id='return.type-1'><div class='marginalizedparent'><a class='marginalized' href='#return.type-1'>1</a></div><p >The return type of an initiating function is <span class='texttt'>typename async_result&lt;decay_t&lt;CompletionToken&gt;, Signature&gt;::return_type</span>.</p></div><div class='para' id='return.type-2'><div class='marginalizedparent'><a class='marginalized' href='#return.type-2'>2</a></div><p >For the sake of exposition, this document sometimes annotates functions with a return type <span class='DEDUCED'></span>. For every function declaration that returns <span class='DEDUCED'></span>, the meaning is equivalent to specifying the return type as <span class='texttt'>typename async_result&lt;decay_t&lt;CompletionToken&gt;, Signature&gt;::return_type</span>.</p></div></div><div id='return.value'><h4 ><a class='secnum' href='#return.value' style='min-width:118pt'>13.2.7.4</a> Production of initiating function return value <a class='abbr_ref' href='async.reqmts.async.return.value'>[async.reqmts.async.return.value]</a></h4><p ><span class='indexparent'><a class='index' id='initiating_function,production_of_return_value'></a></span></p><div class='para' id='return.value-1'><div class='marginalizedparent'><a class='marginalized' href='#return.value-1'>1</a></div><p >An initiating function produces its return type as follows:</p><ul class='itemize'><li id='return.value-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#return.value-1.1'>(1.1)</a></div><p >constructing an object <span class='texttt'>result</span> of type <span class='texttt'>async_result&lt;decay_t&lt;CompletionToken&gt;, Signature&gt;</span>, initialized as <span class='texttt'>result(completion_handler)</span>; and</p></li><li id='return.value-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#return.value-1.2'>(1.2)</a></div><p >using <span class='texttt'>result.get()</span> as the operand of the return statement.
</p></li></ul></div><div class='para' id='return.value-2'><div class='marginalizedparent'><a class='marginalized' href='#return.value-2'>2</a></div><p >[&nbsp;<i>Example:</i> Given an asynchronous operation with Completion signature <span class='texttt'>void(R1 r1, R2 r2)</span>, an initiating function meeting these requirements may be implemented as follows:</p><pre class='codeblock'>
template&lt;class CompletionToken&gt;
auto async_xyz(T1 t1, T2 t2, CompletionToken&amp;&amp; token){
  typename async_result&lt;decay_t&lt;CompletionToken&gt;, void(R1, R2)&gt;::completion_handler_type
    completion_handler(forward&lt;CompletionToken&gt;(token));

  async_result&lt;decay_t&lt;CompletionToken&gt;, void(R1, R2)&gt; result(completion_handler);

  <span class='comment'>// initiate the operation and cause completion_handler to be invoked with
</span>  <span class='comment'>// the result
</span>
  return result.get();
}
</pre></div><div class='para' id='return.value-3'><div class='marginalizedparent'><a class='marginalized' href='#return.value-3'>3</a></div><p >For convenience, initiating functions may be implemented using the <span class='texttt'>async_completion</span> template:</p><pre class='codeblock'>
template&lt;class CompletionToken&gt;
auto async_xyz(T1 t1, T2 t2, CompletionToken&amp;&amp; token){
  async_completion&lt;CompletionToken, void(R1, R2)&gt; init(token);

  <span class='comment'>// initiate the operation and cause init.completion_handler to be invoked
</span>  <span class='comment'>// with the result
</span>
  return init.result.get();
}
</pre><p ><i>&nbsp;â€”&nbsp;end example</i>&nbsp;]</p></div></div><div id='lifetime'><h4 ><a class='secnum' href='#lifetime' style='min-width:118pt'>13.2.7.5</a> Lifetime of initiating function arguments <a class='abbr_ref' href='async.reqmts.async.lifetime'>[async.reqmts.async.lifetime]</a></h4><p ><span class='indexparent'><a class='index' id='initiating_function,lifetime_of_arguments'></a></span></p><div class='para' id='lifetime-1'><div class='marginalizedparent'><a class='marginalized' href='#lifetime-1'>1</a></div><p >Unless otherwise specified, the lifetime of arguments to initiating functions shall be treated as follows:</p><ul class='itemize'><li id='lifetime-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#lifetime-1.1'>(1.1)</a></div><p >If the parameter has a pointer type or has a type of lvalue reference to non-const, the implementation may assume the validity of the pointee or referent, respectively, until the completion handler is invoked. [&nbsp;<i>Note:</i> In other words, the program is responsible for guaranteeing the validity of the argument until the completion handler is invoked. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;]</p></li><li id='lifetime-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#lifetime-1.2'>(1.2)</a></div><p >Otherwise, the implementation does not assume the validity of the argument after the initiating function completes. [&nbsp;<i>Note:</i> In other words, the program is not required to guarantee the validity of the argument after the initiating function completes. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;] The implementation may make copies of the argument, and all copies shall be destroyed no later than immediately after invocation of the completion handler.
</p></li></ul></div></div><div id='non.blocking'><h4 ><a class='secnum' href='#non.blocking' style='min-width:118pt'>13.2.7.6</a> Non-blocking requirements on initiating functions <a class='abbr_ref' href='async.reqmts.async.non.blocking'>[async.reqmts.async.non.blocking]</a></h4><p ><span class='indexparent'><a class='index' id='initiating_function,non-blocking_requirements'></a></span></p><div class='para' id='non.blocking-1'><div class='marginalizedparent'><a class='marginalized' href='#non.blocking-1'>1</a></div><p >An initiating function shall not block (<span class='CppXref'>defns.block</span>) the calling thread pending completion of the outstanding operation.</p></div><div class='para' id='non.blocking-2'><div class='marginalizedparent'><a class='marginalized' href='#non.blocking-2'>2</a></div><p >[&nbsp;<i>Note:</i> Initiating functions can still block the calling thread for other reasons. For example, if an initiating function locks a mutex in order to synchronize access to shared data. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;]</p></div></div><div id='assoc.exec'><h4 ><a class='secnum' href='#assoc.exec' style='min-width:118pt'>13.2.7.7</a> Associated executor <a class='abbr_ref' href='async.reqmts.async.assoc.exec'>[async.reqmts.async.assoc.exec]</a></h4><p ><span class='indexparent'><a class='index' id='associated_executor'></a></span></p><div class='para' id='assoc.exec-1'><div class='marginalizedparent'><a class='marginalized' href='#assoc.exec-1'>1</a></div><p >Certain objects that participate in asynchronous operations have an associated executor. These are obtained as specified below.</p></div></div><div id='io.exec'><h4 ><a class='secnum' href='#io.exec' style='min-width:118pt'>13.2.7.8</a> I/O executor <a class='abbr_ref' href='async.reqmts.async.io.exec'>[async.reqmts.async.io.exec]</a></h4><p ><span class='indexparent'><a class='index' id='system_executor'></a></span></p><div class='para' id='io.exec-1'><div class='marginalizedparent'><a class='marginalized' href='#io.exec-1'>1</a></div><p >An asynchronous operation has an associated executor satisfying the <span class='texttt'>Executor</span> (<a href='async.reqmts.executor'>[async.reqmts.executor]</a>) requirements. If not otherwise specified by the asynchronous operation, this associated executor is an object of type <span class='texttt'>system_executor</span>.</p></div><div class='para' id='io.exec-2'><div class='marginalizedparent'><a class='marginalized' href='#io.exec-2'>2</a></div><p >All asynchronous operations in this document have an associated executor object that is determined as follows:</p><ul class='itemize'><li id='io.exec-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#io.exec-2.1'>(2.1)</a></div><p >If the initiating function is a member function, the associated executor is that returned by the <span class='texttt'>get_executor</span> member function on the same object.</p></li><li id='io.exec-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#io.exec-2.2'>(2.2)</a></div><p >If the initiating function is not a member function, the associated executor is that returned by the <span class='texttt'>get_executor</span> member function of the first argument to the initiating function.
</p></li></ul></div><div class='para' id='io.exec-3'><div class='marginalizedparent'><a class='marginalized' href='#io.exec-3'>3</a></div><p >Let <span class='texttt'>Executor1</span> be the type of the associated executor. Let <span class='texttt'>ex1</span> be a value of type <span class='texttt'>Executor1</span>, representing the associated executor object obtained as described above.</p></div></div><div id='handler.exec'><h4 ><a class='secnum' href='#handler.exec' style='min-width:118pt'>13.2.7.9</a> Completion handler executor <a class='abbr_ref' href='async.reqmts.async.handler.exec'>[async.reqmts.async.handler.exec]</a></h4><div class='para' id='handler.exec-1'><div class='marginalizedparent'><a class='marginalized' href='#handler.exec-1'>1</a></div><p >A completion handler object of type <span class='texttt'>CompletionHandler</span>
has an associated executor
satisfying the Executor requirements (<a href='async.reqmts.executor'>[async.reqmts.executor]</a>).
The type of this associated executor is
<span class='texttt'>associated_executor_t&lt;CompletionHandler, Executor1&gt;</span>.
Let <span class='texttt'>Executor2</span> be the type
<span class='texttt'>associated_executor_t&lt;CompletionHandler, Executor1&gt;</span>.
Let <span class='texttt'>ex2</span> be a value of type <span class='texttt'>Executor2</span>
obtained by performing <span class='texttt'>get_associated_executor(completion_handler, ex1)</span>.</p></div></div><div id='work'><h4 ><a class='secnum' href='#work' style='min-width:118pt'>13.2.7.10</a> Outstanding work <a class='abbr_ref' href='async.reqmts.async.work'>[async.reqmts.async.work]</a></h4><p ><span class='indexparent'><a class='index' id='outstanding_work'></a></span></p><div class='para' id='work-1'><div class='marginalizedparent'><a class='marginalized' href='#work-1'>1</a></div><p >Until the asynchronous operation has completed, the asynchronous operation shall maintain:</p><ul class='itemize'><li id='work-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#work-1.1'>(1.1)</a></div><p >an object <span class='texttt'>work1</span> of type <span class='texttt'>executor_work_guard&lt;Executor1&gt;</span>, initialized as <span class='texttt'>work1(ex1)</span>, and where <span class='texttt'>work1.owns_work() == true</span>; and</p></li><li id='work-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#work-1.2'>(1.2)</a></div><p >an object <span class='texttt'>work2</span> of type <span class='texttt'>executor_work_guard&lt;Executor2&gt;</span>, initialized as <span class='texttt'>work2(ex2)</span>, and where <span class='texttt'>work2.owns_work() == true</span>.
</p></li></ul></div></div><div id='alloc'><h4 ><a class='secnum' href='#alloc' style='min-width:118pt'>13.2.7.11</a> Allocation of intermediate storage <a class='abbr_ref' href='async.reqmts.async.alloc'>[async.reqmts.async.alloc]</a></h4><div class='para' id='alloc-1'><div class='marginalizedparent'><a class='marginalized' href='#alloc-1'>1</a></div><p >Asynchronous operations may allocate memory. [&nbsp;<i>Note:</i> Such as a data structure to store copies of the <span class='texttt'>completion_handler</span> object and the initiating function's arguments. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='alloc-2'><div class='marginalizedparent'><a class='marginalized' href='#alloc-2'>2</a></div><p >Let <span class='texttt'>Alloc1</span> be a type, satisfying the <span class='texttt'>ProtoAllocator</span> (<a href='async.reqmts.proto.allocator'>[async.reqmts.proto.allocator]</a>) requirements, that represents the asynchronous operation's default allocation strategy. [&nbsp;<i>Note:</i> Typically <span class='texttt'>allocator&lt;void&gt;</span>. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;] Let <span class='texttt'>alloc1</span> be a value of type <span class='texttt'>Alloc1</span>.</p></div><div class='para' id='alloc-3'><div class='marginalizedparent'><a class='marginalized' href='#alloc-3'>3</a></div><p >A completion handler object of type <span class='texttt'>CompletionHandler</span> has an associated allocator object <span class='texttt'>alloc2</span> of type <span class='texttt'>Alloc2</span> satisfying the <span class='texttt'>ProtoAllocator</span> (<a href='async.reqmts.proto.allocator'>[async.reqmts.proto.allocator]</a>) requirements. The type <span class='texttt'>Alloc2</span> is <span class='texttt'>associated_allocator_t&lt;CompletionHandler, Alloc1&gt;</span>. Let <span class='texttt'>alloc2</span> be a value of type <span class='texttt'>Alloc2</span> obtained by performing <span class='texttt'>get_associated_allocator(completion_handler, alloc1)</span>.</p></div><div class='para' id='alloc-4'><div class='marginalizedparent'><a class='marginalized' href='#alloc-4'>4</a></div><p >The asynchronous operations defined in this document:</p><ul class='itemize'><li id='alloc-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#alloc-4.1'>(4.1)</a></div><p >If required, allocate memory using only the completion handler's associated allocator.</p></li><li id='alloc-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#alloc-4.2'>(4.2)</a></div><p >Prior to completion handler execution, deallocate any memory allocated using the completion handler's associated allocator.
</p></li></ul></div><div class='para' id='alloc-5'><div class='marginalizedparent'><a class='marginalized' href='#alloc-5'>5</a></div><p >[&nbsp;<i>Note:</i> The implementation can perform operating system or underlying API calls that perform memory allocations not using the associated allocator. Invocations of the allocator functions do not introduce data races (see <span class='CppXref'>res.on.data.races</span>). <i>&nbsp;â€”&nbsp;end note</i>&nbsp;]</p></div></div><div id='completion'><h4 ><a class='secnum' href='#completion' style='min-width:118pt'>13.2.7.12</a> Execution of completion handler on completion of asynchronous operation <a class='abbr_ref' href='async.reqmts.async.completion'>[async.reqmts.async.completion]</a></h4><div class='para' id='completion-1'><div class='marginalizedparent'><a class='marginalized' href='#completion-1'>1</a></div><p >Let <span class='texttt'>Args...</span> be the argument types of the completion signature <span class='texttt'>Signature</span> and let <i>N</i> be <span class='texttt'>sizeof...(Args)</span>. Let <i>i</i> be in the range <span class='texttt'>[0, <i>N</i>)</span>. Let <span class='texttt'>T</span><span class='math'><sub ><span class='mathalpha'>i</span></sub></span> be the <span class='math'><span class='mathalpha'>i</span><sup ><span class='text'>th</span></sup></span> type in <span class='texttt'>Args...</span> and let <span class='texttt'>t</span><span class='math'><sub ><span class='mathalpha'>i</span></sub></span> be the <span class='math'><span class='mathalpha'>i</span><sup ><span class='text'>th</span></sup></span> completion handler argument associated with <span class='texttt'>T</span><span class='math'><sub ><span class='mathalpha'>i</span></sub></span>.</p></div><div class='para' id='completion-2'><div class='marginalizedparent'><a class='marginalized' href='#completion-2'>2</a></div><p >Let <span class='texttt'>f</span> be a function object, callable as <span class='texttt'>f()</span>, that invokes <span class='texttt'>completion_handler</span> as if by <span class='texttt'>completion_handler(forward&lt;T<span class='math'><sub >0</sub></span>&gt;(t<span class='math'><sub >0</sub></span>), ..., forward&lt;T<span class='math'><sub ><span class='mathalpha'>N</span>-1</sub></span>&gt;(t<span class='math'><sub ><span class='mathalpha'>N</span>-1</sub></span>))</span>.</p></div><div class='para' id='completion-3'><div class='marginalizedparent'><a class='marginalized' href='#completion-3'>3</a></div><p >If an asynchronous operation completes immediately (that is, within the thread of execution calling the initiating function, and before the initiating function returns), the completion handler shall be submitted for execution as if by performing <span class='texttt'>ex2.post(std::move(f), alloc2)</span>. Otherwise, the completion handler shall be submitted for execution as if by performing <span class='texttt'>ex2.dispatch(std::move(f), alloc2)</span>.</p></div></div><div id='exceptions'><h4 ><a class='secnum' href='#exceptions' style='min-width:118pt'>13.2.7.13</a> Completion handlers and exceptions <a class='abbr_ref' href='async.reqmts.async.exceptions'>[async.reqmts.async.exceptions]</a></h4><div class='para' id='exceptions-1'><div class='marginalizedparent'><a class='marginalized' href='#exceptions-1'>1</a></div><p >Completion handlers are permitted to throw exceptions. The effect of any exception propagated from the execution of a completion handler is determined by the executor which is executing the completion handler.</p></div></div><div id='composed'><h4 ><a class='secnum' href='#composed' style='min-width:118pt'>13.2.7.14</a> Composed asynchronous operations <a class='abbr_ref' href='async.reqmts.async.composed'>[async.reqmts.async.composed]</a></h4><div class='para' id='composed-1'><div class='marginalizedparent'><a class='marginalized' href='#composed-1'>1</a></div><p >In this document, a <a class='hidden_link' href='#def:composed_asynchronous_operation' id='def:composed_asynchronous_operation'><i>composed asynchronous operation</i></a> is an asynchronous operation that is implemented in terms of zero or more intermediate calls to other asynchronous operations. The intermediate asynchronous operations are performed sequentially. [&nbsp;<i>Note:</i> That is, the completion handler of an intermediate operation initiates the next operation in the sequence. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;]</p><p >An intermediate operation's completion handler shall have an associated executor that is either:</p><ul class='itemize'><li id='composed-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#composed-1.1'>(1.1)</a></div><p >the type <span class='texttt'>Executor2</span> and object <span class='texttt'>ex2</span> obtained from the completion handler type <span class='texttt'>CompletionHandler</span> and object <span class='texttt'>completion_handler</span>; or</p></li><li id='composed-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#composed-1.2'>(1.2)</a></div><p >an object of an unspecified type satisfying the Executor requirements (<a href='async.reqmts.executor'>[async.reqmts.executor]</a>), that delegates executor operations to the type <span class='texttt'>Executor2</span> and object <span class='texttt'>ex2</span>.
</p></li></ul><p >An intermediate operation's completion handler shall have an associated allocator that is either:</p><ul class='itemize'><li id='composed-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#composed-1.3'>(1.3)</a></div><p >the type <span class='texttt'>Alloc2</span> and object <span class='texttt'>alloc2</span> obtained from the completion handler type <span class='texttt'>CompletionHandler</span> and object <span class='texttt'>completion_handler</span>; or</p></li><li id='composed-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#composed-1.4'>(1.4)</a></div><p >an object of an unspecified type satisfying the ProtoAllocator requirements (<a href='async.reqmts.proto.allocator'>[async.reqmts.proto.allocator]</a>), that delegates allocator operations to the type <span class='texttt'>Alloc2</span> and object <span class='texttt'>alloc2</span>.
</p></li></ul></div></div></div></div></body></html>