<!DOCTYPE html><html lang='en'><head><title>[internet.network.v4]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>21</a> Internet protocol <a class='abbr_ref' href='./#internet'>[internet]</a></h1><div id='internet.network.v4'><h2 ><a class='secnum' style='min-width:88pt'>21.11</a> Class template <span class='texttt'>ip::network_v4</span> <a class='abbr_ref'>[internet.network.v4]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >The class <span class='texttt'>network_v4</span> provides the ability to use and manipulate IPv4 network addresses.</p><pre class='codeblock'>
namespace std {
namespace experimental {
namespace net {
inline namespace v1 {
namespace ip {

  class network_v4
  {
  public:
    <span class='comment'>// constructors:
</span>    constexpr network_v4() noexcept;
    constexpr network_v4(const address_v4&amp; addr, int prefix_len);
    constexpr network_v4(const address_v4&amp; addr, const address_v4&amp; mask);

    <span class='comment'>// members:
</span>    constexpr address_v4 address() const noexcept;
    constexpr int prefix_length() const noexcept;
    constexpr address_v4 netmask() const noexcept;
    constexpr address_v4 network() const noexcept;
    constexpr address_v4 broadcast() const noexcept;
    address_v4_range hosts() const noexcept;
    constexpr network_v4 canonical() const noexcept;
    constexpr bool is_host() const noexcept;
    constexpr bool is_subnet_of(const network_v4&amp; other) const noexcept;
    template&lt;class Allocator = allocator&lt;char&gt;&gt;
      basic_string&lt;char, char_traits&lt;char&gt;, Allocator&gt;
        to_string(const Allocator&amp; a = Allocator()) const;
  };

  <span class='comment'>// network_v4 comparisons:
</span>  constexpr bool operator==(const network_v4&amp; a, const network_v4&amp; b) noexcept;
  constexpr bool operator!=(const network_v4&amp; a, const network_v4&amp; b) noexcept;

  <span class='comment'>// network_v4 creation:
</span>  constexpr network_v4 make_network_v4(const address_v4&amp; addr, int prefix_len);
  constexpr network_v4 make_network_v4(const address_v4&amp; addr, const address_v4&amp; mask);
  network_v4 make_network_v4(const char* str);
  network_v4 make_network_v4(const char* str, error_code&amp; ec) noexcept;
  network_v4 make_network_v4(const string&amp; str);
  network_v4 make_network_v4(const string&amp; str, error_code&amp; ec) noexcept;
  network_v4 make_network_v4(string_view str);
  network_v4 make_network_v4(string_view str, error_code&amp; ec) noexcept;

  <span class='comment'>// network_v4 I/O:
</span>  template&lt;class CharT, class Traits&gt;
    basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(
      basic_ostream&lt;CharT, Traits&gt;&amp; os, const network_v4&amp; net);

} <span class='comment'>// namespace ip
</span>} <span class='comment'>// inline namespace v1
</span>} <span class='comment'>// namespace net
</span>} <span class='comment'>// namespace experimental
</span>} <span class='comment'>// namespace std
</span></pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p ><span class='texttt'>network_v4</span> satisfies the requirements for <span class='texttt'>Destructible</span> (C++Std &sect;<a href='../n4140/destructible'>[destructible]</a>), <span class='texttt'>CopyConstructible</span> (C++Std &sect;<a href='../n4140/copyconstructible'>[copyconstructible]</a>), and <span class='texttt'>CopyAssignable</span> (C++Std &sect;<a href='../n4140/copyassignable'>[copyassignable]</a>).</p></div><div id='cons'><h3 ><a class='secnum' href='#cons' style='min-width:103pt'>21.11.1</a> <span class='texttt'>ip::network_v4</span> constructors <a class='abbr_ref' href='internet.network.v4.cons'>[internet.network.v4.cons]</a></h3><p ><code class='itemdecl'>
constexpr network_v4() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>this-&gt;address().is_unspecified() == true</span> and <span class='texttt'>prefix_length() == 0</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr network_v4(const address_v4&amp; addr, int prefix_len);
</code></p><div class='itemdescr'></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>this-&gt;address() == addr</span> and <span class='texttt'>prefix_length() == prefix_len</span>.</p></div></div><div class='para' id='cons-3'><div class='marginalizedparent'><a class='marginalized' href='#cons-3'>3</a></div><div class='itemdescr'><p ><i>Remarks:</i> <span class='texttt'>out_of_range</span> if <span class='texttt'>prefix_len &lt; 0</span> or <span class='texttt'>prefix_len &gt; 32</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr network_v4(const address_v4&amp; addr, const address_v4&amp; mask);
</code></p><div class='itemdescr'></div><div class='para' id='cons-4'><div class='marginalizedparent'><a class='marginalized' href='#cons-4'>4</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>this-&gt;address() == addr</span> and <span class='texttt'>prefix_length()</span> is equal to the number of contiguous non-zero bits in <span class='texttt'>mask</span>.</p></div></div><div class='para' id='cons-5'><div class='marginalizedparent'><a class='marginalized' href='#cons-5'>5</a></div><div class='itemdescr'><p ><i>Remarks:</i> <span class='texttt'>invalid_argument</span> if <span class='texttt'>mask</span> contains non-contiguous non-zero bits, or if the most significant bit is zero and any other bits are non-zero.
</p></div></div></div><div id='members'><h3 ><a class='secnum' href='#members' style='min-width:103pt'>21.11.2</a> <span class='texttt'>ip::network_v4</span> members <a class='abbr_ref' href='internet.network.v4.members'>[internet.network.v4.members]</a></h3><p ><code class='itemdecl'>
constexpr address_v4 address() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-1'><div class='marginalizedparent'><a class='marginalized' href='#members-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> The address specified when the <span class='texttt'>network_v4</span> object was constructed.
</p></div></div><p ><code class='itemdecl'>
constexpr int prefix_length() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-2'><div class='marginalizedparent'><a class='marginalized' href='#members-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> The prefix length of the network.
</p></div></div><p ><code class='itemdecl'>
constexpr address_v4 netmask() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-3'><div class='marginalizedparent'><a class='marginalized' href='#members-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> An <span class='texttt'>address_v4</span> object with <span class='texttt'>prefix_length()</span> contiguous non-zero bits set, starting from the most significant bit in network byte order. All other bits are zero.
</p></div></div><p ><code class='itemdecl'>
constexpr address_v4 network() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-4'><div class='marginalizedparent'><a class='marginalized' href='#members-4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i> An <span class='texttt'>address_v4</span> object with the first <span class='texttt'>prefix_length()</span> bits, starting from the most significant bit in network byte order, set to the corresponding bit value of <span class='texttt'>this-&gt;address()</span>. All other bits are zero.
</p></div></div><p ><code class='itemdecl'>
constexpr address_v4 broadcast() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-5'><div class='marginalizedparent'><a class='marginalized' href='#members-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i> An <span class='texttt'>address_v4</span> object with the first <span class='texttt'>prefix_length()</span> bits, starting from the most significant bit in network byte order, set to the corresponding bit value of <span class='texttt'>this-&gt;address()</span>. All other bits are non-zero.
</p></div></div><p ><code class='itemdecl'>
address_v4_range hosts() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-6'><div class='marginalizedparent'><a class='marginalized' href='#members-6'>6</a></div><div class='itemdescr'><p ><i>Returns:</i> If <span class='texttt'>is_host() == true</span>, an <span class='texttt'>address_v4_range</span> object representing the single address <span class='texttt'>this-&gt;address()</span>. Otherwise, an <span class='texttt'>address_v4_range</span> object representing the range of unique host IP addresses in the network.</p></div></div><div class='para' id='members-7'><div class='marginalizedparent'><a class='marginalized' href='#members-7'>7</a></div><div class='itemdescr'><p >[&nbsp;<i>Note:</i> For IPv4, the network address and the broadcast address are not included in the range of host IP addresses. For example, given a network <span class='texttt'>192.168.1.0/24</span>, the range returned by <span class='texttt'>hosts()</span> is from <span class='texttt'>192.168.1.1</span> to <span class='texttt'>192.168.1.254</span> inclusive, and neither <span class='texttt'>192.168.1.0</span> nor the broadcast address <span class='texttt'>192.168.1.255</span> are in the range. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;]
</p></div></div><p ><code class='itemdecl'>
constexpr network_v4 canonical() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-8'><div class='marginalizedparent'><a class='marginalized' href='#members-8'>8</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>network_v4(network(), prefix_length())</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr bool is_host() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-9'><div class='marginalizedparent'><a class='marginalized' href='#members-9'>9</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>prefix_length() == 32</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr bool is_subnet_of(const network_v4&amp; other) const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-10'><div class='marginalizedparent'><a class='marginalized' href='#members-10'>10</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>true</span> if <span class='texttt'>other.prefix_length() &lt; prefix_length()</span> and <span class='texttt'>network_v4(this-&gt;address(), other.prefix_length()).canonical() == other.canonical()</span>, otherwise <span class='texttt'>false</span>.
</p></div></div><p ><code class='itemdecl'>
template&lt;class Allocator = allocator&lt;char&gt;&gt;
  basic_string&lt;char, char_traits&lt;char&gt;, Allocator&gt;
    to_string(const Allocator&amp; a = Allocator()) const;
</code></p><div class='itemdescr'></div><div class='para' id='members-11'><div class='marginalizedparent'><a class='marginalized' href='#members-11'>11</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>this-&gt;address().to_string(a) + "/" + std::to_string(prefix_length())</span>.
</p></div></div></div><div id='comparisons'><h3 ><a class='secnum' href='#comparisons' style='min-width:103pt'>21.11.3</a> <span class='texttt'>ip::network_v4</span> comparisons <a class='abbr_ref' href='internet.network.v4.comparisons'>[internet.network.v4.comparisons]</a></h3><p ><code class='itemdecl'>
constexpr bool operator==(const network_v4&amp; a, const network_v4&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-1'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>true</span> if <span class='texttt'>a.address() == b.address()</span> and <span class='texttt'>a.prefix_length() == b.prefix_length()</span>, otherwise <span class='texttt'>false</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr bool operator!=(const network_v4&amp; a, const network_v4&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-2'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(a == b)</span>.
</p></div></div></div><div id='creation'><h3 ><a class='secnum' href='#creation' style='min-width:103pt'>21.11.4</a> <span class='texttt'>ip::network_v4</span> creation <a class='abbr_ref' href='internet.network.v4.creation'>[internet.network.v4.creation]</a></h3><p ><code class='itemdecl'>
constexpr network_v4 make_network_v4(const address_v4&amp; addr, int prefix_len);
</code></p><div class='itemdescr'></div><div class='para' id='creation-1'><div class='marginalizedparent'><a class='marginalized' href='#creation-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>network_v4(addr, prefix_len)</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr network_v4 make_network_v4(const address_v4&amp; addr, const address_v4&amp; mask);
</code></p><div class='itemdescr'></div><div class='para' id='creation-2'><div class='marginalizedparent'><a class='marginalized' href='#creation-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>network_v4(addr, mask)</span>.
</p></div></div><p ><code class='itemdecl'>
network_v4 make_network_v4(const char* str);
network_v4 make_network_v4(const char* str, error_code&amp; ec) noexcept;
network_v4 make_network_v4(const string&amp; str);
network_v4 make_network_v4(const string&amp; str, error_code&amp; ec) noexcept;
network_v4 make_network_v4(string_view str);
network_v4 make_network_v4(string_view str, error_code&amp; ec) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='creation-3'><div class='marginalizedparent'><a class='marginalized' href='#creation-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> If <span class='texttt'>str</span> contains a value of the form address <span class='texttt'>'/'</span> prefix-length, a <span class='texttt'>network_v4</span> object constructed with the result of applying <span class='texttt'>make_address_v4()</span> to the address portion of the string, and the result of converting prefix-length to an integer of type <span class='texttt'>int</span>. Otherwise returns <span class='texttt'>network_v4()</span> and sets <span class='texttt'>ec</span> to reflect the error.</p></div></div><div class='para' id='creation-4'><div class='marginalizedparent'><a class='marginalized' href='#creation-4'>4</a></div><div class='itemdescr'><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='creation-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#creation-4.1'>(4.1)</a></div><p ><span class='texttt'>errc::invalid_argument</span> â€” if <span class='texttt'>str</span> is not a valid textual representation of an IPv4 address and prefix length.
</p></li></ul></div></div></div><div id='io'><h3 ><a class='secnum' href='#io' style='min-width:103pt'>21.11.5</a> <span class='texttt'>ip::network_v4</span> I/O <a class='abbr_ref' href='internet.network.v4.io'>[internet.network.v4.io]</a></h3><p ><code class='itemdecl'>
template&lt;class CharT, class Traits&gt;
  basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(
    basic_ostream&lt;CharT, Traits&gt;&amp; os, const network_v4&amp; net);
</code></p><div class='itemdescr'></div><div class='para' id='io-1'><div class='marginalizedparent'><a class='marginalized' href='#io-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>os &lt;&lt; net.to_string().c_str()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='network_v6'></a></span></p></div></div></div></body></html>