<!DOCTYPE html><html lang='en'><head><title>[internet.address]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>21</a> Internet protocol <a class='abbr_ref' href='./#internet'>[internet]</a></h1><div id='internet.address'><h2 ><a class='secnum' style='min-width:88pt'>21.4</a> Class <span class='texttt'>ip::address</span> <a class='abbr_ref'>[internet.address]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >The class <span class='texttt'>address</span> is a version-independent representation for an IP address. An object of class <span class='texttt'>address</span> holds either an IPv4 address, an IPv6 address, or no valid address.</p><p ><span class='indexparent'><a class='index' id='address'></a></span><span class='indexparent'><a class='index' id='address,is_v4'></a></span><span class='indexparent'><a class='index' id='address,is_v6'></a></span><span class='indexparent'><a class='index' id='address,to_v4'></a></span><span class='indexparent'><a class='index' id='address,to_v6'></a></span><span class='indexparent'><a class='index' id='address,is_unspecified'></a></span><span class='indexparent'><a class='index' id='address,is_loopback'></a></span><span class='indexparent'><a class='index' id='address,is_multicast'></a></span><span class='indexparent'><a class='index' id='address,to_string'></a></span></p><pre class='codeblock'>
namespace std {
namespace experimental {
namespace net {
inline namespace v1 {
namespace ip {

  class address
  {
  public:
    <span class='comment'>// constructors:
</span>    constexpr address() noexcept;
    constexpr address(const address&amp; a) noexcept;
    constexpr address(const address_v4&amp; a) noexcept;
    constexpr address(const address_v6&amp; a) noexcept;

    <span class='comment'>// assignment:
</span>    address&amp; operator=(const address&amp; a) noexcept;
    address&amp; operator=(const address_v4&amp; a) noexcept;
    address&amp; operator=(const address_v6&amp; a) noexcept;

    <span class='comment'>// members:
</span>    constexpr bool is_v4() const noexcept;
    constexpr bool is_v6() const noexcept;
    constexpr address_v4 to_v4() const;
    constexpr address_v6 to_v6() const;
    constexpr bool is_unspecified() const noexcept;
    constexpr bool is_loopback() const noexcept;
    constexpr bool is_multicast() const noexcept;
    template&lt;class Allocator = allocator&lt;char&gt;&gt;
      basic_string&lt;char, char_traits&lt;char&gt;, Allocator&gt;
        to_string(const Allocator&amp; a = Allocator()) const;

  private:
    address_v4 v4_; <span class='comment'>// <i>exposition only</i>
</span>    address_v6 v6_; <span class='comment'>// <i>exposition only</i>
</span>  };

  <span class='comment'>// address comparisons:
</span>  constexpr bool operator==(const address&amp; a, const address&amp; b) noexcept;
  constexpr bool operator!=(const address&amp; a, const address&amp; b) noexcept;
  constexpr bool operator&lt; (const address&amp; a, const address&amp; b) noexcept;
  constexpr bool operator&gt; (const address&amp; a, const address&amp; b) noexcept;
  constexpr bool operator&lt;=(const address&amp; a, const address&amp; b) noexcept;
  constexpr bool operator&gt;=(const address&amp; a, const address&amp; b) noexcept;

  <span class='comment'>// address creation:
</span>  address make_address(const char* str);
  address make_address(const char* str, error_code&amp; ec) noexcept;
  address make_address(const string&amp; str);
  address make_address(const string&amp; str, error_code&amp; ec) noexcept;
  address make_address(string_view str);
  address make_address(string_view str, error_code&amp; ec) noexcept;

  <span class='comment'>// address I/O:
</span>  template&lt;class CharT, class Traits&gt;
    basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(
      basic_ostream&lt;CharT, Traits&gt;&amp; os, const address&amp; addr);

} <span class='comment'>// namespace ip
</span>} <span class='comment'>// inline namespace v1
</span>} <span class='comment'>// namespace net
</span>} <span class='comment'>// namespace experimental
</span>} <span class='comment'>// namespace std
</span></pre><p ><span class='indexparent'><a class='index' id='address'></a></span></p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p ><span class='texttt'>address</span> satisfies the requirements for <span class='texttt'>Destructible</span> (C++Std &sect;<a href='../n4140/destructible'>[destructible]</a>), <span class='texttt'>CopyConstructible</span> (C++Std &sect;<a href='../n4140/copyconstructible'>[copyconstructible]</a>), and <span class='texttt'>CopyAssignable</span> (C++Std &sect;<a href='../n4140/copyassignable'>[copyassignable]</a>).</p><p ><span class='indexparent'><a class='index' id='address,constructor'></a></span></p></div><div id='cons'><h3 ><a class='secnum' href='#cons' style='min-width:103pt'>21.4.1</a> <span class='texttt'>ip::address</span> constructors <a class='abbr_ref' href='internet.address.cons'>[internet.address.cons]</a></h3><p ><code class='itemdecl'>
constexpr address() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>is_v4() == true</span>, <span class='texttt'>is_v6() == false</span>, and <span class='texttt'>is_unspecified() == true</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr address(const address_v4&amp; a) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><p ><i>Effects:</i> Initializes <span class='texttt'>v4_</span> with <span class='texttt'>a</span>.</p></div></div><div class='para' id='cons-3'><div class='marginalizedparent'><a class='marginalized' href='#cons-3'>3</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>is_v4() == true</span> and <span class='texttt'>is_v6() == false</span>.
</p></div></div><p ><code class='itemdecl'>
constexpr address(const address_v6&amp; a) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-4'><div class='marginalizedparent'><a class='marginalized' href='#cons-4'>4</a></div><div class='itemdescr'><p ><i>Effects:</i> Initializes <span class='texttt'>v6_</span> with <span class='texttt'>a</span>.</p></div></div><div class='para' id='cons-5'><div class='marginalizedparent'><a class='marginalized' href='#cons-5'>5</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>is_v4() == false</span> and <span class='texttt'>is_v6() == true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator=,address'></a></span><span class='indexparent'><a class='index' id='address,operator='></a></span></p></div><div id='assign'><h3 ><a class='secnum' href='#assign' style='min-width:103pt'>21.4.2</a> <span class='texttt'>ip::address</span> assignment <a class='abbr_ref' href='internet.address.assign'>[internet.address.assign]</a></h3><p ><code class='itemdecl'>
address&amp; operator=(const address_v4&amp; a) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='assign-1'><div class='marginalizedparent'><a class='marginalized' href='#assign-1'>1</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>is_v4() == true</span> and <span class='texttt'>is_v6() == false</span> and <span class='texttt'>to_v4() == a</span>.</p></div></div><div class='para' id='assign-2'><div class='marginalizedparent'><a class='marginalized' href='#assign-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>*this</span>
</p></div></div><p ><code class='itemdecl'>
address&amp; operator=(const address_v6&amp; a) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='assign-3'><div class='marginalizedparent'><a class='marginalized' href='#assign-3'>3</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>is_v4() == false</span> and <span class='texttt'>is_v6() == true</span> and <span class='texttt'>to_v6() == a</span>.</p></div></div><div class='para' id='assign-4'><div class='marginalizedparent'><a class='marginalized' href='#assign-4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>*this</span>
</p></div></div></div><div id='members'><h3 ><a class='secnum' href='#members' style='min-width:103pt'>21.4.3</a> <span class='texttt'>ip::address</span> members <a class='abbr_ref' href='internet.address.members'>[internet.address.members]</a></h3><p ><span class='indexparent'><a class='index' id='is_v4,address'></a></span><span class='indexparent'><a class='index' id='address,is_v4'></a></span><code class='itemdecl'>
constexpr bool is_v4() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-1'><div class='marginalizedparent'><a class='marginalized' href='#members-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>true</span> if the object contains an IP version 4 address, otherwise <span class='texttt'>false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='is_v6,address'></a></span><span class='indexparent'><a class='index' id='address,is_v6'></a></span><code class='itemdecl'>
constexpr bool is_v6() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-2'><div class='marginalizedparent'><a class='marginalized' href='#members-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>true</span> if the object contains an IP version 6 address, otherwise <span class='texttt'>false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='to_v4,address'></a></span><span class='indexparent'><a class='index' id='address,to_v4'></a></span><code class='itemdecl'>
constexpr address_v4 to_v4() const;
</code></p><div class='itemdescr'></div><div class='para' id='members-3'><div class='marginalizedparent'><a class='marginalized' href='#members-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>v4_</span>.</p></div></div><div class='para' id='members-4'><div class='marginalizedparent'><a class='marginalized' href='#members-4'>4</a></div><div class='itemdescr'><p ><i>Remarks:</i> <span class='texttt'>bad_address_cast</span> if <span class='texttt'>is_v4() == false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='to_v6,address'></a></span><span class='indexparent'><a class='index' id='address,to_v6'></a></span><code class='itemdecl'>
constexpr address_v6 to_v6() const;
</code></p><div class='itemdescr'></div><div class='para' id='members-5'><div class='marginalizedparent'><a class='marginalized' href='#members-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>v6_</span>.</p></div></div><div class='para' id='members-6'><div class='marginalizedparent'><a class='marginalized' href='#members-6'>6</a></div><div class='itemdescr'><p ><i>Remarks:</i> <span class='texttt'>bad_address_cast</span> if <span class='texttt'>is_v6() == false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='is_unspecified,address'></a></span><span class='indexparent'><a class='index' id='address,is_unspecified'></a></span><code class='itemdecl'>
constexpr bool is_unspecified() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-7'><div class='marginalizedparent'><a class='marginalized' href='#members-7'>7</a></div><div class='itemdescr'><p ><i>Returns:</i> If <span class='texttt'>is_v4()</span>, returns <span class='texttt'>v4_.is_unspecified()</span>. Otherwise returns <span class='texttt'>v6_.is_unspecified()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='is_loopback,address'></a></span><span class='indexparent'><a class='index' id='address,is_loopback'></a></span><code class='itemdecl'>
constexpr bool is_loopback() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-8'><div class='marginalizedparent'><a class='marginalized' href='#members-8'>8</a></div><div class='itemdescr'><p ><i>Returns:</i> If <span class='texttt'>is_v4()</span>, returns <span class='texttt'>v4_.is_loopback()</span>. Otherwise returns <span class='texttt'>v6_.is_loopback()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='is_multicast,address'></a></span><span class='indexparent'><a class='index' id='address,is_multicast'></a></span><code class='itemdecl'>
constexpr bool is_multicast() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='members-9'><div class='marginalizedparent'><a class='marginalized' href='#members-9'>9</a></div><div class='itemdescr'><p ><i>Returns:</i> If <span class='texttt'>is_v4()</span>, returns <span class='texttt'>v4_.is_multicast()</span>. Otherwise returns <span class='texttt'>v6_.is_multicast()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='to_string,address'></a></span><span class='indexparent'><a class='index' id='address,to_string'></a></span><code class='itemdecl'>
template&lt;class Allocator = allocator&lt;char&gt;&gt;
  basic_string&lt;char, char_traits&lt;char&gt;, Allocator&gt;
    to_string(const Allocator&amp; a = Allocator()) const;
</code></p><div class='itemdescr'></div><div class='para' id='members-10'><div class='marginalizedparent'><a class='marginalized' href='#members-10'>10</a></div><div class='itemdescr'><p ><i>Returns:</i> If <span class='texttt'>is_v4()</span>, returns <span class='texttt'>v4_.to_string(a)</span>. Otherwise returns <span class='texttt'>v6_.to_string(a)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator==,address'></a></span><span class='indexparent'><a class='index' id='address,operator=='></a></span></p></div><div id='comparisons'><h3 ><a class='secnum' href='#comparisons' style='min-width:103pt'>21.4.4</a> <span class='texttt'>ip::address</span> comparisons <a class='abbr_ref' href='internet.address.comparisons'>[internet.address.comparisons]</a></h3><p ><code class='itemdecl'>
constexpr bool operator==(const address&amp; a, const address&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-1'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i>
</p><ul class='itemize'><li id='comparisons-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#comparisons-1.1'>(1.1)</a></div><p >if <span class='texttt'>a.is_v4() != b.is_v4()</span>, <span class='texttt'>false</span>;
</p></li><li id='comparisons-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#comparisons-1.2'>(1.2)</a></div><p >if <span class='texttt'>a.is_v4()</span>, the result of <span class='texttt'>a.v4_ == b.v4_</span>;
</p></li><li id='comparisons-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#comparisons-1.3'>(1.3)</a></div><p >otherwise, the result of <span class='texttt'>a.v6_ == b.v6_</span>.
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='operator!=,address'></a></span><span class='indexparent'><a class='index' id='address,operator!='></a></span><code class='itemdecl'>
constexpr bool operator!=(const address&amp; a, const address&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-2'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(a == b)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator<,address'></a></span><span class='indexparent'><a class='index' id='address,operator<'></a></span><code class='itemdecl'>
constexpr bool operator&lt; (const address&amp; a, const address&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-3'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i>
</p><ul class='itemize'><li id='comparisons-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#comparisons-3.1'>(3.1)</a></div><p >if <span class='texttt'>a.is_v4() &amp;&amp; !b.is_v4()</span>, <span class='texttt'>true</span>;
</p></li><li id='comparisons-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#comparisons-3.2'>(3.2)</a></div><p >if <span class='texttt'>!a.is_v4() &amp;&amp; b.is_v4()</span>, <span class='texttt'>false</span>;
</p></li><li id='comparisons-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#comparisons-3.3'>(3.3)</a></div><p >if <span class='texttt'>a.is_v4()</span>, the result of <span class='texttt'>a.v4_ &lt; b.v4_</span>;
</p></li><li id='comparisons-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#comparisons-3.4'>(3.4)</a></div><p >otherwise, the result of <span class='texttt'>a.v6_ &lt; b.v6_</span>.
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='operator>,address'></a></span><span class='indexparent'><a class='index' id='address,operator>'></a></span><code class='itemdecl'>
constexpr bool operator&gt; (const address&amp; a, const address&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-4'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>b &lt; a</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator<=,address'></a></span><span class='indexparent'><a class='index' id='address,operator<='></a></span><code class='itemdecl'>
constexpr bool operator&lt;=(const address&amp; a, const address&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-5'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(b &lt; a)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator>=,address'></a></span><span class='indexparent'><a class='index' id='address,operator>='></a></span><code class='itemdecl'>
constexpr bool operator&gt;=(const address&amp; a, const address&amp; b) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='comparisons-6'><div class='marginalizedparent'><a class='marginalized' href='#comparisons-6'>6</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>!(a &lt; b)</span>.
</p></div></div></div><div id='creation'><h3 ><a class='secnum' href='#creation' style='min-width:103pt'>21.4.5</a> <span class='texttt'>ip::address</span> creation <a class='abbr_ref' href='internet.address.creation'>[internet.address.creation]</a></h3><p ><span class='indexparent'><a class='index' id='make_address'></a></span><code class='itemdecl'>
address make_address(const char* str);
address make_address(const char* str, error_code&amp; ec) noexcept;
address make_address(const string&amp; str);
address make_address(const string&amp; str, error_code&amp; ec) noexcept;
address make_address(string_view str);
address make_address(string_view str, error_code&amp; ec) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='creation-1'><div class='marginalizedparent'><a class='marginalized' href='#creation-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i> Converts a textual representation of an address into an object of class <span class='texttt'>address</span>, as if by calling:
</p><pre class='codeblock'>
address a;
address_v6 v6a = make_address_v6(str, ec);
if (!ec)
  a = v6a;
else{
  address_v4 v4a = make_address_v4(str, ec);
  if (!ec)
    a = v4a;
}
</pre></div></div><div class='para' id='creation-2'><div class='marginalizedparent'><a class='marginalized' href='#creation-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>a</span>.
</p></div></div></div><div id='io'><h3 ><a class='secnum' href='#io' style='min-width:103pt'>21.4.6</a> <span class='texttt'>ip::address</span> I/O <a class='abbr_ref' href='internet.address.io'>[internet.address.io]</a></h3><p ><span class='indexparent'><a class='index' id='operator<<,address'></a></span><span class='indexparent'><a class='index' id='address,operator<<'></a></span><code class='itemdecl'>
template&lt;class CharT, class Traits&gt;
  basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(
    basic_ostream&lt;CharT, Traits&gt;&amp; os, const address&amp; addr);
</code></p><div class='itemdescr'></div><div class='para' id='io-1'><div class='marginalizedparent'><a class='marginalized' href='#io-1'>1</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>os &lt;&lt; addr.to_string().c_str()</span>.
</p></div></div></div></div></div></body></html>