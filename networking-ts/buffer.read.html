<!DOCTYPE html><html lang='en'><head><title>[buffer.read]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Buffer-oriented streams <a class='abbr_ref' href='./#buffer.stream'>[buffer.stream]</a></h1><div id='buffer.read'><h2 ><a class='secnum' style='min-width:88pt'>17.5</a> Synchronous read operations <a class='abbr_ref'>[buffer.read]</a></h2><p ><span class='indexparent'><a class='index' id='read'></a></span><code class='itemdecl'>
template&lt;class SyncReadStream, class MutableBufferSequence&gt;
  size_t read(SyncReadStream&amp; stream,
              const MutableBufferSequence&amp; buffers);
template&lt;class SyncReadStream, class MutableBufferSequence&gt;
  size_t read(SyncReadStream&amp; stream,
              const MutableBufferSequence&amp; buffers, error_code&amp; ec);
template&lt;class SyncReadStream, class MutableBufferSequence,
  class CompletionCondition&gt;
    size_t read(SyncReadStream&amp; stream,
                const MutableBufferSequence&amp; buffers,
                CompletionCondition completion_condition);
template&lt;class SyncReadStream, class MutableBufferSequence,
  class CompletionCondition&gt;
    size_t read(SyncReadStream&amp; stream,
                const MutableBufferSequence&amp; buffers,
                CompletionCondition completion_condition,
                error_code&amp; ec);
</code></p><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><p >A read operation (<a href='buffer.reqmts.read.write'>[buffer.reqmts.read.write]</a>).</p></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><p ><i>Effects:</i> Clears <span class='texttt'>ec</span>, then reads data from the buffer-oriented synchronous read stream (<a href='buffer.stream.reqmts.syncreadstream'>[buffer.stream.reqmts.syncreadstream]</a>) object <span class='texttt'>stream</span> by performing zero or more calls to the stream's <span class='texttt'>read_some</span> member function.</p></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><p >The <span class='texttt'>completion_condition</span> parameter specifies a completion condition to be called prior to each call to the stream's <span class='texttt'>read_some</span> member function. The completion condition is passed the <span class='texttt'>error_code</span> value from the most recent <span class='texttt'>read_some</span> call, and the total number of bytes transferred in the synchronous read operation so far. The completion condition return value specifies the maximum number of bytes to be read on the subsequent <span class='texttt'>read_some</span> call. Overloads where a completion condition is not specified behave as if called with an object of class <span class='texttt'>transfer_all</span>.</p></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><p >The synchronous read operation continues until:</p><ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div><p >the total number of bytes transferred is equal to <span class='texttt'>buffer_size(buffers)</span>; or
</p></li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div><p >the completion condition returns <span class='texttt'>0</span>.
</p></li></ul></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><p >On return, <span class='texttt'>ec</span> contains the <span class='texttt'>error_code</span> value from the most recent <span class='texttt'>read_some</span> call.</p></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><p ><i>Returns:</i> The total number of bytes transferred in the synchronous read operation.</p></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><p ><i>Remarks:</i> This function shall not participate in overload resolution unless <span class='texttt'>is_mutable_buffer_sequence_v&lt;MutableBufferSequence&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='read'></a></span><code class='itemdecl'>
template&lt;class SyncReadStream, class DynamicBuffer&gt;
  size_t read(SyncReadStream&amp; stream, DynamicBuffer&amp;&amp; b);
template&lt;class SyncReadStream, class DynamicBuffer&gt;
  size_t read(SyncReadStream&amp; stream, DynamicBuffer&amp;&amp; b, error_code&amp; ec);
template&lt;class SyncReadStream, class DynamicBuffer,
  class CompletionCondition&gt;
    size_t read(SyncReadStream&amp; stream, DynamicBuffer&amp;&amp; b,
                CompletionCondition completion_condition);
template&lt;class SyncReadStream, class DynamicBuffer,
  class CompletionCondition&gt;
    size_t read(SyncReadStream&amp; stream, DynamicBuffer&amp;&amp; b,
                CompletionCondition completion_condition,
                error_code&amp; ec);
</code></p><div class='itemdescr'></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><p ><i>Effects:</i> Clears <span class='texttt'>ec</span>, then reads data from the synchronous read stream (<a href='buffer.stream.reqmts.syncreadstream'>[buffer.stream.reqmts.syncreadstream]</a>) object <span class='texttt'>stream</span> by performing zero or more calls to the stream's <span class='texttt'>read_some</span> member function.</p></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><p >Data is placed into the dynamic buffer (<a href='buffer.reqmts.dynamicbuffer'>[buffer.reqmts.dynamicbuffer]</a>) object <span class='texttt'>b</span>. A mutable buffer sequence (<a href='buffer.reqmts.mutablebuffersequence'>[buffer.reqmts.mutablebuffersequence]</a>) is obtained prior to each <span class='texttt'>read_some</span> call using <span class='texttt'>b.prepare(N)</span>, where <span class='texttt'>N</span> is an unspecified value less than or equal to <span class='texttt'>b.max_size() - b.size()</span>. [&nbsp;<i>Note:</i> Implementations are encouraged to use <span class='texttt'>b.capacity()</span> when determining <span class='texttt'>N</span>, to minimize the number of <span class='texttt'>read_some</span> calls performed on the stream. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;] After each <span class='texttt'>read_some</span> call, the implementation performs <span class='texttt'>b.commit(n)</span>, where <span class='texttt'>n</span> is the return value from <span class='texttt'>read_some</span>.</p></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><p >The <span class='texttt'>completion_condition</span> parameter specifies a completion condition to be called prior to each call to the stream's <span class='texttt'>read_some</span> member function. The completion condition is passed the <span class='texttt'>error_code</span> value from the most recent <span class='texttt'>read_some</span> call, and the total number of bytes transferred in the synchronous read operation so far. The completion condition return value specifies the maximum number of bytes to be read on the subsequent <span class='texttt'>read_some</span> call. Overloads where a completion condition is not specified behave as if called with an object of class <span class='texttt'>transfer_all</span>.</p></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='itemdescr'><p >The synchronous read operation continues until:</p><ul class='itemize'><li id='11.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#11.1'>(11.1)</a></div><p ><span class='texttt'>b.size() == b.max_size()</span>; or
</p></li><li id='11.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#11.2'>(11.2)</a></div><p >the completion condition returns <span class='texttt'>0</span>.
</p></li></ul></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='itemdescr'><p >On return, <span class='texttt'>ec</span> contains the <span class='texttt'>error_code</span> value from the most recent <span class='texttt'>read_some</span> call.</p></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='itemdescr'><p ><i>Returns:</i> The total number of bytes transferred in the synchronous read operation.</p></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='itemdescr'><p ><i>Remarks:</i> This function shall not participate in overload resolution unless <span class='texttt'>is_dynamic_buffer_v&lt;DynamicBuffer&gt;</span> is <span class='texttt'>true</span>.
</p></div></div></div></div></body></html>