<!DOCTYPE html><html lang='en'><head><title>[socket.streambuf.cons]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>19</a> Socket iostreams <a class='abbr_ref' href='./#socket.iostreams'>[socket.iostreams]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>19.1</a> Class template <span class='texttt'>basic_socket_streambuf</span> <a class='abbr_ref' href='socket.streambuf#cons'>[socket.streambuf]</a></h2><div id='socket.streambuf.cons'><h3 ><a class='secnum' style='min-width:103pt'>19.1.1</a> <span class='texttt'>basic_socket_streambuf</span> constructors <a class='abbr_ref'>[socket.streambuf.cons]</a></h3><p ><code class='itemdecl'>
basic_socket_streambuf();
</code></p><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i> Initializes <span class='texttt'>socket_</span> with <span class='texttt'>ctx</span>, where <span class='texttt'>ctx</span> is an unspecified object of class <span class='texttt'>io_context</span>.</p></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>expiry() == time_point::max()</span>.
</p></div></div><p ><code class='itemdecl'>
explicit basic_socket_streambuf(basic_stream_socket&lt;protocol_type&gt; s);
</code></p><div class='itemdescr'></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><p ><i>Effects:</i> Initializes <span class='texttt'>socket_</span> with <span class='texttt'>std::move(s)</span>.</p></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>expiry() == time_point::max()</span>.
</p></div></div><p ><code class='itemdecl'>
basic_socket_streambuf(basic_socket_streambuf&amp;&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><p ><i>Effects:</i> Move constructs from the rvalue <span class='texttt'>rhs</span>. It is <span class='indexparent'><a class='index' id='whether_the_sequence_pointers_in_basic_socket_streambuf_obtain_the_source_object&#39;s_values_after_move-construction'></a></span>implementation-defined whether the sequence pointers in <span class='texttt'>*this</span> (<span class='texttt'>eback()</span>, <span class='texttt'>gptr()</span>, <span class='texttt'>egptr()</span>, <span class='texttt'>pbase()</span>, <span class='texttt'>pptr()</span>, <span class='texttt'>epptr()</span>) obtain the values which <span class='texttt'>rhs</span> had. Whether they do or not, <span class='texttt'>*this</span> and <span class='texttt'>rhs</span> reference separate buffers (if any at all) after the construction. Additionally <span class='texttt'>*this</span> references the socket which <span class='texttt'>rhs</span> did before the construction, and <span class='texttt'>rhs</span> references no open socket after the construction.</p></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><p ><i>Postconditions:</i> Let <span class='texttt'>rhs_p</span> refer to the state of <span class='texttt'>rhs</span> just prior to this construction and let <span class='texttt'>rhs_a</span> refer to the state of <span class='texttt'>rhs</span> just after this construction.
</p><ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.1'>(6.1)</a></div><p ><span class='texttt'>is_open() == rhs_p.is_open()</span>
</p></li><li id='6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.2'>(6.2)</a></div><p ><span class='texttt'>rhs_a.is_open() == false</span>
</p></li><li id='6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.3'>(6.3)</a></div><p ><span class='texttt'>expiry() == rhs_p.expiry()</span>
</p></li><li id='6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.4'>(6.4)</a></div><p ><span class='texttt'>rhs_a.expiry() == time_point::max()</span>
</p></li><li id='6.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.5'>(6.5)</a></div><p ><span class='texttt'>gptr() - eback() == rhs_p.gptr() - rhs_p.eback()</span>
</p></li><li id='6.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.6'>(6.6)</a></div><p ><span class='texttt'>egptr() - eback() == rhs_p.egptr() - rhs_p.eback()</span>
</p></li><li id='6.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.7'>(6.7)</a></div><p ><span class='texttt'>ptr() - pbase() == rhs_p.pptr() - rhs_p.pbase()</span>
</p></li><li id='6.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.8'>(6.8)</a></div><p ><span class='texttt'>pptr() - pbase() == rhs_p.epptr() - rhs_p.pbase()</span>
</p></li><li id='6.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.9'>(6.9)</a></div><p ><span class='texttt'>if (eback()) eback() != rhs_a.eback()</span>
</p></li><li id='6.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.10'>(6.10)</a></div><p ><span class='texttt'>if (gptr()) gptr() != rhs_a.gptr()</span>
</p></li><li id='6.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.11'>(6.11)</a></div><p ><span class='texttt'>if (egptr()) egptr() != rhs_a.egptr()</span>
</p></li><li id='6.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.12'>(6.12)</a></div><p ><span class='texttt'>if (pbase()) pbase() != rhs_a.pbase()</span>
</p></li><li id='6.13'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.13'>(6.13)</a></div><p ><span class='texttt'>if (pptr()) pptr() != rhs_a.pptr()</span>
</p></li><li id='6.14'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.14'>(6.14)</a></div><p ><span class='texttt'>if (epptr()) epptr() != rhs_a.epptr()</span>
</p></li></ul></div></div><p ><code class='itemdecl'>
virtual ~basic_socket_streambuf();
</code></p><div class='itemdescr'></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><p ><i>Effects:</i> If a put area exists, calls <span class='texttt'>overflow(traits_type::eof())</span> to flush characters. [&nbsp;<i>Note:</i> The socket is closed by the <span class='texttt'>basic_stream_socket&lt;protocol_type&gt;</span> destructor. <i>&nbsp;â€”&nbsp;end note</i>&nbsp;]
</p></div></div><p ><code class='itemdecl'>
basic_socket_streambuf&amp; operator=(basic_socket_streambuf&amp;&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><p ><i>Effects:</i> Calls <span class='texttt'>this-&gt;close()</span> then move assigns from <span class='texttt'>rhs</span>. After the move assignment <span class='texttt'>*this</span> has the observable state it would have had if it had been move constructed from <span class='texttt'>rhs</span>.</p></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>*this</span>.
</p></div></div></div></div></body></html>