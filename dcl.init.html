<!DOCTYPE html><html lang='en'><head><title>[dcl.init]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>11</a> Declarators <a class='abbr_ref' href='./#dcl.decl'>[dcl.decl]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>11.6</a> Initializers <a class='abbr_ref'>[dcl.init]</a></h2><span class='indexparent'><a class='index' id=':initialization'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2347'>#</a></div><div id='1.sentence-1' class='sentence'>The process of initialization described in this subclause applies to
all initializations regardless of syntactic context, including the
initialization of a function parameter (<a href='expr.call'>[expr.call]</a>), the
initialization of a return value (<a href='stmt.return'>[stmt.return]</a>), or when an
initializer follows a declarator<a class='hidden_link' href='#1.sentence-1'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:initializer' id='nt:initializer'>initializer:</a>
&#9;<i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i>
&#9;<span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i> <span class='terminal'>)</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:brace-or-equal-initializer' id='nt:brace-or-equal-initializer'>brace-or-equal-initializer:</a>
&#9;<span class='terminal'>=</span> <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i>
&#9;<i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:initializer-clause' id='nt:initializer-clause'>initializer-clause:</a>
&#9;<i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i>
&#9;<i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:braced-init-list' id='nt:braced-init-list'>braced-init-list:</a>
&#9;<span class='terminal'>{</span> <i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i> <span class='terminal'>,</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>}</span>
&#9;<span class='terminal'>{</span> <i ><a href='dcl.init#nt:designated-initializer-list'>designated-initializer-list</a></i> <span class='terminal'>,</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>}</span>
&#9;<span class='terminal'>{</span> <span class='terminal'>}</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:initializer-list' id='nt:initializer-list'>initializer-list:</a>
&#9;<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i> <span class='terminal'>,</span> <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:designated-initializer-list' id='nt:designated-initializer-list'>designated-initializer-list:</a>
&#9;<i ><a href='dcl.init#nt:designated-initializer-clause'>designated-initializer-clause</a></i>
&#9;<i ><a href='dcl.init#nt:designated-initializer-list'>designated-initializer-list</a></i> <span class='terminal'>,</span> <i ><a href='dcl.init#nt:designated-initializer-clause'>designated-initializer-clause</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:designated-initializer-clause' id='nt:designated-initializer-clause'>designated-initializer-clause:</a>
&#9;<i ><a href='dcl.init#nt:designator'>designator</a></i> <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:designator' id='nt:designator'>designator:</a>
&#9;<span class='terminal'>.</span> <i ><a href='lex.name#nt:identifier'>identifier</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:expr-or-braced-init-list' id='nt:expr-or-braced-init-list'>expr-or-braced-init-list:</a>
&#9;<i ><a href='expr.comma#nt:expression'>expression</a></i>
&#9;<i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
</pre><div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-2' class='sentence'>The rules in this subclause apply even if the grammar permits only
the <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i> form
of <i ><a href='dcl.init#nt:initializer'>initializer</a></i> in a given context<a class='hidden_link' href='#1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2413'>#</a></div><div id='2.sentence-1' class='sentence'>Except for objects declared with the <span class='texttt'>constexpr</span> specifier, for which see <a href='dcl.constexpr'>[dcl.constexpr]</a>,
an <i ><a href='dcl.init#nt:initializer'>initializer</a></i> in the definition of a variable can consist of
arbitrary
<span class='indexparent'><a class='index' id=':initialization,automatic_object'></a></span><span class='indexparent'><a class='index' id=':initialization,static_object'></a></span>expressions involving literals and previously declared
variables and functions,
regardless of the variable's storage duration<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int f(int);
int a = 2;
int b = f(a);
int c(b);</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2432'>#</a></div><div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-1' class='sentence'>Default arguments are more restricted; see <a href='dcl.fct.default'>[dcl.fct.default]</a><a class='hidden_link' href='#3.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2437'>#</a></div><div id='4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-1' class='sentence'>The order of initialization of variables with static storage duration is described in <a href='basic.start'>[basic.start]</a>
and <a href='stmt.dcl'>[stmt.dcl]</a><a class='hidden_link' href='#4.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2443'>#</a></div><div id='5.sentence-1' class='sentence'>A declaration of a block-scope variable with external or internal
linkage that has an <i ><a href='dcl.init#nt:initializer'>initializer</a></i> is ill-formed<a class='hidden_link' href='#5.sentence-1'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2447'>#</a></div><div id='6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,static_object_'></a></span><span class='indexparent'><a class='index' id=':initialization,default'></a></span><span class='indexparent'><a class='index' id=':variable,indeterminate_uninitialized'></a></span><span class='indexparent'><a class='index' id=':initialization,zero-initialization'></a></span>To
<a class='hidden_link' href='#def:zero-initialization' id='def:zero-initialization'><i >zero-initialize</i></a>
an object or reference of type
<span class='texttt'>T</span>
means:</div><div id='6.sentence-2' class='sentence'><ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.1'>(6.1)</a></div><div id='6.1.sentence-1' class='sentence'>if
<span class='texttt'>T</span>
is a <a href='basic.types#def:scalar_type'>scalar type</a>, the
object
is initialized to the value obtained by converting the integer literal <span class='texttt'>0</span>
(zero) to
<span class='texttt'>T</span>;<a class='footnotenum' href='#footnote-105'>105</a></div></li><li id='6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.2'>(6.2)</a></div><div id='6.2.sentence-1' class='sentence'>if
<span class='texttt'>T</span>
is a (possibly cv-qualified) non-union class type,
its padding bits (<a href='basic.types'>[basic.types]</a>) are initialized to zero bits and
each non-static data member,
each non-virtual base class subobject, and,
if the object is not a base class subobject,
each virtual base class subobject
is zero-initialized;</div></li><li id='6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.3'>(6.3)</a></div><div id='6.3.sentence-1' class='sentence'>if
<span class='texttt'>T</span>
is a (possibly cv-qualified) union type,
its padding bits (<a href='basic.types'>[basic.types]</a>) are initialized to zero bits and
the
object's first non-static named
data member
is zero-initialized;</div></li><li id='6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.4'>(6.4)</a></div><div id='6.4.sentence-1' class='sentence'>if
<span class='texttt'>T</span>
is an array type,
each element is zero-initialized;</div></li><li id='6.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.5'>(6.5)</a></div><div id='6.5.sentence-1' class='sentence'>if
<span class='texttt'>T</span>
is a reference type, no initialization is performed<a class='hidden_link' href='#6.5.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2504'>#</a></div><div id='7.sentence-1' class='sentence'>To
<a class='hidden_link' href='#def:default-initialization' id='def:default-initialization'><i >default-initialize</i></a>
an object of type
<span class='texttt'>T</span>
means:</div><div id='7.sentence-2' class='sentence'><ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.1'>(7.1)</a></div><div id='7.1.sentence-1' class='sentence'>If
<span class='texttt'>T</span>
is a (possibly cv-qualified) <a href='class'>class type</a>,
constructors are considered<a class='hidden_link' href='#7.1.sentence-1'>.</a></div> <div id='7.1.sentence-2' class='sentence'>The applicable constructors are
enumerated (<a href='over.match.ctor'>[over.match.ctor]</a>), and the best one for the
<i ><a href='dcl.init#nt:initializer'>initializer</a></i> <span class='texttt'>()</span> is chosen through
<a href='over.match'>overload resolution</a><a class='hidden_link' href='#7.1.sentence-2'>.</a></div> <div id='7.1.sentence-3' class='sentence'>The constructor thus selected
is called, with an empty argument list, to initialize the object<a class='hidden_link' href='#7.1.sentence-3'>.</a></div></li><li id='7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.2'>(7.2)</a></div><div id='7.2.sentence-1' class='sentence'>If
<span class='texttt'>T</span>
is an array type, each element is default-initialized<a class='hidden_link' href='#7.2.sentence-1'>.</a></div></li><li id='7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.3'>(7.3)</a></div><div id='7.3.sentence-1' class='sentence'>Otherwise,
no initialization is performed<a class='hidden_link' href='#7.3.sentence-1'>.</a></div></li></ul></div><div id='7.sentence-3' class='sentence'>A class type <span class='texttt'>T</span> is <a class='hidden_link' href='#def:const-default-constructible' id='def:const-default-constructible'><i >const-default-constructible</i></a> if
default-initialization of <span class='texttt'>T</span> would invoke
a user-provided constructor of <span class='texttt'>T</span> (not inherited from a base class)
or if</div><div id='7.sentence-4' class='sentence'><ul class='itemize'><li id='7.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.4'>(7.4)</a></div><div id='7.4.sentence-1' class='sentence'>each direct non-variant non-static data member <span class='texttt'>M</span> of <span class='texttt'>T</span>
has a default member initializer
or, if <span class='texttt'>M</span> is of class type <span class='texttt'>X</span> (or array thereof),
<span class='texttt'>X</span> is const-default-constructible,</div></li><li id='7.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.5'>(7.5)</a></div><div id='7.5.sentence-1' class='sentence'>if <span class='texttt'>T</span> is a union with at least one non-static data member,
exactly one variant member has a default member initializer,</div></li><li id='7.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.6'>(7.6)</a></div><div id='7.6.sentence-1' class='sentence'>if <span class='texttt'>T</span> is not a union,
for each anonymous union member with at least one non-static data member (if any),
exactly one non-static data member has a default member initializer, and</div></li><li id='7.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.7'>(7.7)</a></div><div id='7.7.sentence-1' class='sentence'>each potentially constructed base class of <span class='texttt'>T</span> is const-default-constructible<a class='hidden_link' href='#7.7.sentence-1'>.</a></div></li></ul></div><div id='7.sentence-5' class='sentence'>If a program calls for the default-initialization of an object of a
const-qualified type <span class='texttt'>T</span>,
<span class='texttt'>T</span> shall be a const-default-constructible class type or array thereof<a class='hidden_link' href='#7.sentence-5'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2558'>#</a></div><div id='8.sentence-1' class='sentence'>To
<a class='hidden_link' href='#def:value-initialization' id='def:value-initialization'><i >value-initialize</i></a>
an object of type
<span class='texttt'>T</span>
means:</div><div id='8.sentence-2' class='sentence'><ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.1'>(8.1)</a></div><div id='8.1.sentence-1' class='sentence'>if
<span class='texttt'>T</span>
is a (possibly cv-qualified) <a href='class'>class type</a> with
either no default constructor (<a href='class.ctor'>[class.ctor]</a>) or a default
constructor that is user-provided or deleted, then the object is default-initialized;</div></li><li id='8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.2'>(8.2)</a></div><div id='8.2.sentence-1' class='sentence'>if
<span class='texttt'>T</span>
is a (possibly cv-qualified) class type without a
user-provided or deleted default constructor,
then the object is zero-initialized and the semantic constraints for
default-initialization are checked, and if <span class='texttt'>T</span> has a
non-trivial default constructor, the object is default-initialized;</div></li><li id='8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.3'>(8.3)</a></div><div id='8.3.sentence-1' class='sentence'>if
<span class='texttt'>T</span>
is an array type, then each element is value-initialized;</div></li><li id='8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.4'>(8.4)</a></div><div id='8.4.sentence-1' class='sentence'>otherwise, the object is zero-initialized<a class='hidden_link' href='#8.4.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2591'>#</a></div><div id='9.sentence-1' class='sentence'>A program that calls for default-initialization
or value-initialization
of an entity
of reference type is ill-formed<a class='hidden_link' href='#9.sentence-1'>.</a></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2597'>#</a></div><div id='10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-1' class='sentence'>Every
object of static storage duration is
zero-initialized at program startup before any other initialization
takes place<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>In some cases, additional initialization is done later<a class='hidden_link' href='#10.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2605'>#</a></div><div id='11.sentence-1' class='sentence'>An object whose initializer is an empty set of parentheses, i.e.,
<span class='texttt'>()</span>,
shall be
value-initialized<a class='hidden_link' href='#11.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><span class='indexparent'><a class='index' id=':ambiguity,function_declaration'></a></span><div id='11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='11.sentence-2' class='sentence'>Since
<span class='texttt'>()</span>
is not permitted by the syntax for
<i ><a href='dcl.init#nt:initializer'>initializer</a></i>,
<pre class='codeblock'>
X a();</pre>
is not the declaration of an object of class
<span class='texttt'>X</span>,
but the declaration of a function taking no argument and returning an
<span class='texttt'>X</span><a class='hidden_link' href='#11.sentence-2'>.</a></div> <div id='11.sentence-3' class='sentence'>The form
<span class='texttt'>()</span>
is permitted in certain other initialization contexts (<a href='expr.new'>[expr.new]</a>,
<a href='expr.type.conv'>[expr.type.conv]</a>, <a href='class.base.init'>[class.base.init]</a>)<a class='hidden_link' href='#11.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2630'>#</a></div><div id='12.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':value,indeterminate'></a></span><span class='indexparent'><a class='index' id=':indeterminate_value'></a></span>If no initializer is specified for an object, the object is default-initialized<a class='hidden_link' href='#12.sentence-1'>.</a></div> <div id='12.sentence-2' class='sentence'>When storage for an object with automatic or dynamic storage duration
is obtained, the object has an <a class='hidden_link' href='#def:indeterminate_value' id='def:indeterminate_value'><i>indeterminate value</i></a>, and if
no initialization is performed for the object, that object retains an
indeterminate value until that value is replaced (<a href='expr.ass'>[expr.ass]</a>)<a class='hidden_link' href='#12.sentence-2'>.</a></div> <div id='12.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='12.sentence-4' class='sentence'>Objects with static or thread storage duration are zero-initialized,
see <a href='basic.start.static'>[basic.start.static]</a><a class='hidden_link' href='#12.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='12.sentence-3' class='sentence'>
If an indeterminate value is produced by an evaluation, the behavior is
undefined except in the following cases:</div><div id='12.sentence-5' class='sentence'><ul class='itemize'><li id='12.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.1'>(12.1)</a></div><div id='12.1.sentence-1' class='sentence'>If an indeterminate value of unsigned
<a href='basic.fundamental#def:type,narrow_character'>narrow character type</a>
or <span class='texttt'>std&#x200b;::&#x200b;byte</span> type (<a href='cstddef.syn'>[cstddef.syn]</a>) is produced by the evaluation of:
<ul class='itemize'><li id='12.1.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#12.1.1'>(12.1.1)</a></div><div id='12.1.1.sentence-1' class='sentence'>the second or third operand of a <a href='expr.cond'>conditional expression</a>,</div></li><li id='12.1.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#12.1.2'>(12.1.2)</a></div><div id='12.1.2.sentence-1' class='sentence'>the right operand of a <a href='expr.comma'>comma expression</a>,</div></li><li id='12.1.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#12.1.3'>(12.1.3)</a></div><div id='12.1.3.sentence-1' class='sentence'>the operand of a cast or conversion (<a href='conv.integral'>[conv.integral]</a>,
<a href='expr.type.conv'>[expr.type.conv]</a>, <a href='expr.static.cast'>[expr.static.cast]</a>, <a href='expr.cast'>[expr.cast]</a>) to an
unsigned narrow character type
or <span class='texttt'>std&#x200b;::&#x200b;byte</span> type (<a href='cstddef.syn'>[cstddef.syn]</a>), or</div></li><li id='12.1.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#12.1.4'>(12.1.4)</a></div><div id='12.1.4.sentence-1' class='sentence'>a <a href='expr.prop#def:discarded-value_expression'>discarded-value expression</a>,</div></li></ul>
then the result of the operation is an indeterminate value<a class='hidden_link' href='#12.1.sentence-1'>.</a></div></li><li id='12.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.2'>(12.2)</a></div><div id='12.2.sentence-1' class='sentence'>If an indeterminate value of
unsigned narrow character type
or <span class='texttt'>std&#x200b;::&#x200b;byte</span> type
is produced by the evaluation of the right
operand of a simple <a href='expr.ass'>assignment operator</a> whose first operand
is an lvalue of
unsigned narrow character type
or <span class='texttt'>std&#x200b;::&#x200b;byte</span> type,
an indeterminate value replaces
the value of the object referred to by the left operand<a class='hidden_link' href='#12.2.sentence-1'>.</a></div></li><li id='12.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.3'>(12.3)</a></div><div id='12.3.sentence-1' class='sentence'>If an indeterminate value of unsigned narrow character type is produced by the
evaluation of the initialization expression when initializing an object of
unsigned narrow character type, that object is initialized to an indeterminate
value<a class='hidden_link' href='#12.3.sentence-1'>.</a></div></li><li id='12.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.4'>(12.4)</a></div><div id='12.4.sentence-1' class='sentence'>If an indeterminate value of
unsigned narrow character type
or <span class='texttt'>std&#x200b;::&#x200b;byte</span> type
is produced by the
evaluation of the initialization expression when initializing an object of
<span class='texttt'>std&#x200b;::&#x200b;byte</span> type, that object is initialized to an indeterminate
value<a class='hidden_link' href='#12.4.sentence-1'>.</a></div></li></ul></div> <div id='12.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
  int f(bool b) {
    unsigned char c;
    unsigned char d = c;        <span class='comment'>// OK, <span class='tcode_in_codeblock'>d</span> has an indeterminate value
</span>    int e = d;                  <span class='comment'>// undefined behavior
</span>    return b ? d : 0;           <span class='comment'>// undefined behavior if <span class='tcode_in_codeblock'>b</span> is <span class='tcode_in_codeblock'>true</span>
</span>  }</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2698'>#</a></div><div id='13.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,class_member'></a></span>An initializer for a static member is in the scope of the member's class<a class='hidden_link' href='#13.sentence-1'>.</a></div> <div id='13.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int a;

struct X {
  static int a;
  static int b;
};

int X::a = 1;
int X::b = a;                   <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;b = X&#x200b;::&#x200b;a</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2715'>#</a></div><div id='14.sentence-1' class='sentence'>If the entity being initialized does not have class type, the
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i> in a
parenthesized initializer shall be a single expression<a class='hidden_link' href='#14.sentence-1'>.</a></div></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2720'>#</a></div><div id='15.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,copy'></a></span><span class='indexparent'><a class='index' id=':initialization,direct'></a></span>The initialization that occurs in the <span class='texttt'>=</span> form of a
<i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i> or
<i ><a href='stmt.stmt#nt:condition'>condition</a></i> (<a href='stmt.select'>[stmt.select]</a>),
as well as in argument passing, function return,
<a href='except.throw'>throwing an exception</a>,
<a href='except.handle'>handling an exception</a>,
and <a href='#aggr'>aggregate member initialization</a>,
is called
<a class='hidden_link' href='#def:copy-initialization' id='def:copy-initialization'><i >copy-initialization</i></a><a class='hidden_link' href='#15.sentence-1'>.</a></div> <div id='15.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='15.sentence-2' class='sentence'>Copy-initialization may invoke a move (<a href='class.copy'>[class.copy]</a>)<a class='hidden_link' href='#15.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2734'>#</a></div><div id='16.sentence-1' class='sentence'>The initialization that occurs
<ul class='itemize'><li id='16.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.1'>(16.1)</a></div><div id='16.1.sentence-1' class='sentence'>for an <i ><a href='dcl.init#nt:initializer'>initializer</a></i> that is a
parenthesized <i ><a href='expr.post#nt:expression-list'>expression-list</a></i> or a <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>,</div></li><li id='16.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.2'>(16.2)</a></div><div id='16.2.sentence-1' class='sentence'>for a <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i>,</div></li><li id='16.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.3'>(16.3)</a></div><div id='16.3.sentence-1' class='sentence'>in a <span class='texttt'>static_&shy;cast</span> expression (<a href='expr.static.cast'>[expr.static.cast]</a>),</div></li><li id='16.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.4'>(16.4)</a></div><div id='16.4.sentence-1' class='sentence'>in a functional notation type conversion (<a href='expr.type.conv'>[expr.type.conv]</a>), and</div></li><li id='16.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.5'>(16.5)</a></div><div id='16.5.sentence-1' class='sentence'>in the <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i> form of a <i ><a href='stmt.stmt#nt:condition'>condition</a></i></div></li></ul>
is called
<a class='hidden_link' href='#def:direct-initialization' id='def:direct-initialization'><i >direct-initialization</i></a><a class='hidden_link' href='#16.sentence-1'>.</a></div></div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2747'>#</a></div><div id='17.sentence-1' class='sentence'>The semantics of initializers are as follows<a class='hidden_link' href='#17.sentence-1'>.</a></div> <div id='17.sentence-2' class='sentence'>The
<span class='indexparent'><a class='index' id=':type,destination'></a></span><a class='hidden_link' href='#def:destination_type' id='def:destination_type'><i>destination type</i></a>
is the type of the object or reference being initialized and the
<a class='hidden_link' href='#def:source_type' id='def:source_type'><i>source type</i></a>
is the type of the initializer expression<a class='hidden_link' href='#17.sentence-2'>.</a></div> <div id='17.sentence-3' class='sentence'>If the initializer is not a single (possibly parenthesized) expression, the
source type is not defined<a class='hidden_link' href='#17.sentence-3'>.</a></div> <div id='17.sentence-4' class='sentence'><ul class='itemize'><li id='17.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.1'>(17.1)</a></div><div id='17.1.sentence-1' class='sentence'>If the initializer is a (non-parenthesized) <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
or is <span class='texttt'>=</span> <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>, the object or reference
is <a href='#list'>list-initialized</a><a class='hidden_link' href='#17.1.sentence-1'>.</a></div></li><li id='17.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.2'>(17.2)</a></div><div id='17.2.sentence-1' class='sentence'>If the destination type is a reference type, see <a href='#ref'>[dcl.init.ref]</a><a class='hidden_link' href='#17.2.sentence-1'>.</a></div></li><li id='17.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.3'>(17.3)</a></div><div id='17.3.sentence-1' class='sentence'>If the destination type is an array of characters,
an array of <span class='texttt'>char16_&shy;t</span>,
an array of <span class='texttt'>char32_&shy;t</span>,
or an array of
<span class='texttt'>wchar_&shy;t</span>,
and the initializer is a string literal, see <a href='#string'>[dcl.init.string]</a><a class='hidden_link' href='#17.3.sentence-1'>.</a></div></li><li id='17.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.4'>(17.4)</a></div><div id='17.4.sentence-1' class='sentence'>If the initializer is <span class='texttt'>()</span>, the object is value-initialized<a class='hidden_link' href='#17.4.sentence-1'>.</a></div></li><li id='17.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.5'>(17.5)</a></div><div id='17.5.sentence-1' class='sentence'>Otherwise, if the destination type is an array, the program is ill-formed<a class='hidden_link' href='#17.5.sentence-1'>.</a></div></li><li id='17.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.6'>(17.6)</a></div><div id='17.6.sentence-1' class='sentence'>If the destination type is a (possibly cv-qualified) class type:</div><div id='17.6.sentence-2' class='sentence'><ul class='itemize'><li id='17.6.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#17.6.1'>(17.6.1)</a></div><div id='17.6.1.sentence-1' class='sentence'>If the initializer expression is a prvalue
and the cv-unqualified version of the source type
is the same class as the class of the destination,
the initializer expression is used to initialize the destination object<a class='hidden_link' href='#17.6.1.sentence-1'>.</a></div> <div id='17.6.1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#17.6.1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='17.6.1.sentence-2' class='sentence'><span class='texttt'>T x = T(T(T()));</span> calls the <span class='texttt'>T</span> default constructor to initialize <span class='texttt'>x</span><a class='hidden_link' href='#17.6.1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='17.6.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#17.6.2'>(17.6.2)</a></div><div id='17.6.2.sentence-1' class='sentence'>Otherwise, if the initialization is direct-initialization,
or if it is copy-initialization where the cv-unqualified version of the source
type is the same class as, or a derived class of, the class of the destination,
constructors are considered<a class='hidden_link' href='#17.6.2.sentence-1'>.</a></div> <div id='17.6.2.sentence-2' class='sentence'>The applicable constructors
are enumerated (<a href='over.match.ctor'>[over.match.ctor]</a>), and the best one is chosen
through <a href='over.match'>overload resolution</a><a class='hidden_link' href='#17.6.2.sentence-2'>.</a></div> <div id='17.6.2.sentence-3' class='sentence'>The constructor so selected
is called to initialize the object, with the initializer
expression or <i ><a href='expr.post#nt:expression-list'>expression-list</a></i> as its argument(s)<a class='hidden_link' href='#17.6.2.sentence-3'>.</a></div> <div id='17.6.2.sentence-4' class='sentence'>If no constructor applies, or the overload resolution is
ambiguous, the initialization is ill-formed<a class='hidden_link' href='#17.6.2.sentence-4'>.</a></div></li><li id='17.6.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#17.6.3'>(17.6.3)</a></div><div id='17.6.3.sentence-1' class='sentence'>Otherwise (i.e., for the remaining copy-initialization cases),
user-defined conversion sequences that can convert from the
source type to the destination type or (when a conversion function
is used) to a derived class thereof are enumerated as described in <a href='over.match.copy'>[over.match.copy]</a>, and the best one is chosen through <a href='over.match'>overload
resolution</a><a class='hidden_link' href='#17.6.3.sentence-1'>.</a></div> <div id='17.6.3.sentence-2' class='sentence'>If the conversion cannot be done or
is ambiguous, the initialization is ill-formed<a class='hidden_link' href='#17.6.3.sentence-2'>.</a></div> <div id='17.6.3.sentence-3' class='sentence'>The function
selected is called with the initializer expression as its
argument; if the function is a constructor, the call is a prvalue
of the cv-unqualified version of the
destination type whose result object is initialized by the constructor<a class='hidden_link' href='#17.6.3.sentence-3'>.</a></div> <div id='17.6.3.sentence-4' class='sentence'>The call is used
to direct-initialize, according to the rules above, the object
that is the destination of the copy-initialization<a class='hidden_link' href='#17.6.3.sentence-4'>.</a></div></li></ul></div></li><li id='17.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.7'>(17.7)</a></div><div id='17.7.sentence-1' class='sentence'>Otherwise, if the source type
is a (possibly cv-qualified) class type, conversion functions are
considered<a class='hidden_link' href='#17.7.sentence-1'>.</a></div> <div id='17.7.sentence-2' class='sentence'>The applicable conversion functions are enumerated (<a href='over.match.conv'>[over.match.conv]</a>),
and the best one is chosen through <a href='over.match'>overload
resolution</a><a class='hidden_link' href='#17.7.sentence-2'>.</a></div> <div id='17.7.sentence-3' class='sentence'>The user-defined conversion so selected
is called to convert the initializer expression into the
object being initialized<a class='hidden_link' href='#17.7.sentence-3'>.</a></div> <div id='17.7.sentence-4' class='sentence'>If the conversion cannot be done or is
ambiguous, the initialization is ill-formed<a class='hidden_link' href='#17.7.sentence-4'>.</a></div></li><li id='17.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.8'>(17.8)</a></div><div id='17.8.sentence-1' class='sentence'>Otherwise, the initial value of the object being initialized is
the (possibly converted) value of the initializer expression<a class='hidden_link' href='#17.8.sentence-1'>.</a></div> <div id='17.8.sentence-2' class='sentence'><a href='conv'>Standard conversions</a> will be used, if necessary,
to convert the initializer expression to the cv-unqualified version of
the destination type;
no user-defined conversions are considered<a class='hidden_link' href='#17.8.sentence-2'>.</a></div> <div id='17.8.sentence-3' class='sentence'>If the conversion cannot
be done, the initialization is ill-formed<a class='hidden_link' href='#17.8.sentence-3'>.</a></div> <div id='17.8.sentence-4' class='sentence'>When initializing a bit-field with a value that it cannot represent, the
resulting value of the bit-field is
<span class='indexparent'><a class='index' id=':value_of_bit-field_that_cannot_represent,initializer'></a></span>implementation-defined<a class='hidden_link' href='#17.8.sentence-4'>.</a></div> <span class='indexparent'><a class='index' id=':initialization,const'></a></span><div id='17.8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#17.8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='17.8.sentence-5' class='sentence'>An expression of type
“<span class='textit'>cv1</span> <span class='texttt'>T</span>”
can initialize an object of type
“<span class='textit'>cv2</span> <span class='texttt'>T</span>”
independently of
the cv-qualifiers
<span class='textit'>cv1</span>
and <span class='textit'>cv2</span><a class='hidden_link' href='#17.8.sentence-5'>.</a></div><pre class='codeblock'>
int a;
const int b = a;
int c = b;</pre> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div></div><div class='para' id='18'><div class='marginalizedparent'><a class='marginalized' href='#18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2858'>#</a></div><div id='18.sentence-1' class='sentence'>An <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i> followed by an ellipsis is a
<a href='temp.variadic#def:pack_expansion'>pack expansion</a><a class='hidden_link' href='#18.sentence-1'>.</a></div></div><div class='para' id='19'><div class='marginalizedparent'><a class='marginalized' href='#19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2862'>#</a></div><div id='19.sentence-1' class='sentence'>If the initializer is a parenthesized <i ><a href='expr.post#nt:expression-list'>expression-list</a></i>,
the expressions are evaluated in the order
specified for <a href='expr.call'>function calls</a><a class='hidden_link' href='#19.sentence-1'>.</a></div></div><div class='para' id='20'><div class='marginalizedparent'><a class='marginalized' href='#20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2867'>#</a></div><div id='20.sentence-1' class='sentence'>The same <i ><a href='lex.name#nt:identifier'>identifier</a></i>
shall not appear in multiple <i ><a href='dcl.init#nt:designator'>designator</a></i><span class='textit'>s</span> of a
<i ><a href='dcl.init#nt:designated-initializer-list'>designated-initializer-list</a></i><a class='hidden_link' href='#20.sentence-1'>.</a></div></div><div class='para' id='21'><div class='marginalizedparent'><a class='marginalized' href='#21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2872'>#</a></div><div id='21.sentence-1' class='sentence'>An object whose initialization has completed
is deemed to be constructed,
even if no constructor of the object's class
is invoked for the initialization<a class='hidden_link' href='#21.sentence-1'>.</a></div> <div id='21.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#21.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='21.sentence-2' class='sentence'>Such an object might have been value-initialized
or initialized by <a href='#aggr'>aggregate initialization</a>
or by an <a href='class.inhctor.init'>inherited constructor</a><a class='hidden_link' href='#21.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='22'><div class='marginalizedparent'><a class='marginalized' href='#22'>22</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2883'>#</a></div><div id='22.sentence-1' class='sentence'>A declaration that specifies the initialization of a variable,
whether from an explicit initializer or by default-initialization,
is called the <a class='hidden_link' href='#def:initializing_declaration' id='def:initializing_declaration'><i >initializing declaration</i></a> of that variable<a class='hidden_link' href='#22.sentence-1'>.</a></div> <div id='22.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#22.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='22.sentence-2' class='sentence'>In most cases
this is the defining declaration (<a href='basic.def'>[basic.def]</a>) of the variable,
but the initializing declaration
of a non-inline static data member (<a href='class.static.data'>[class.static.data]</a>)
might be the declaration within the class definition
and not the definition at namespace scope<a class='hidden_link' href='#22.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-105'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-105'>105)</a></div><div id='footnote-105.sentence-1' class='sentence'>As specified in <a href='conv.ptr'>[conv.ptr]</a>, converting an integer
literal whose value is
<span class='texttt'>0</span>
to a pointer type results in a null pointer value<a class='hidden_link' href='#footnote-105.sentence-1'>.</a></div></div><div id='aggr' class='section'><h3 ><a class='secnum' href='#aggr' style='min-width:103pt'>11.6.1</a> Aggregates <a class='abbr_ref' href='dcl.init.aggr'>[dcl.init.aggr]</a></h3><span class='indexparent'><a class='index' id=':aggregate'></a></span><span class='indexparent'><a class='index' id=':initialization,aggregate'></a></span><span class='indexparent'><a class='index' id=':aggregate_initialization'></a></span><span class='indexparent'><a class='index' id=':initialization,array'></a></span><span class='indexparent'><a class='index' id=':initialization,class_object'></a></span><span class='indexparent'><a class='index' id=':{},initializer_list'></a></span><div class='para' id='aggr-1'><div class='marginalizedparent'><a class='marginalized' href='#aggr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2905'>#</a></div><div id='aggr-1.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:aggregate' id='def:aggregate'><i >aggregate</i></a> is an array or a <a href='class'>class</a> with
<ul class='itemize'><li id='aggr-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-1.1'>(1.1)</a></div><div id='aggr-1.1.sentence-1' class='sentence'>no user-declared or inherited constructors (<a href='class.ctor'>[class.ctor]</a>),</div></li><li id='aggr-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-1.2'>(1.2)</a></div><div id='aggr-1.2.sentence-1' class='sentence'>no private or protected non-static data members (<a href='class.access'>[class.access]</a>),</div></li><li id='aggr-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-1.3'>(1.3)</a></div><div id='aggr-1.3.sentence-1' class='sentence'>no <a href='class.virtual'>virtual functions</a>, and</div></li><li id='aggr-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-1.4'>(1.4)</a></div><div id='aggr-1.4.sentence-1' class='sentence'>no virtual, private, or protected base classes (<a href='class.mi'>[class.mi]</a>)<a class='hidden_link' href='#aggr-1.4.sentence-1'>.</a></div></li></ul></div> <div id='aggr-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#aggr-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-1.sentence-2' class='sentence'>Aggregate initialization does not allow accessing
protected and private base class' members or constructors<a class='hidden_link' href='#aggr-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-2'><div class='marginalizedparent'><a class='marginalized' href='#aggr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2922'>#</a></div><div id='aggr-2.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:aggregate,elements' id='def:aggregate,elements'><i >elements</i></a> of an aggregate are:
<ul class='itemize'><li id='aggr-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-2.1'>(2.1)</a></div><div id='aggr-2.1.sentence-1' class='sentence'>for an array, the array elements in increasing subscript order, or</div></li><li id='aggr-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-2.2'>(2.2)</a></div><div id='aggr-2.2.sentence-1' class='sentence'>for a class, the direct base classes in declaration order,
followed by the direct non-static data members (<a href='class.mem'>[class.mem]</a>)
that are not members of an anonymous union, in declaration order<a class='hidden_link' href='#aggr-2.2.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='aggr-3'><div class='marginalizedparent'><a class='marginalized' href='#aggr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2933'>#</a></div><div id='aggr-3.sentence-1' class='sentence'>When an aggregate is initialized by an initializer list
as specified in <a href='#list'>[dcl.init.list]</a>,
the elements of the initializer list are taken as initializers
for the elements of the aggregate<a class='hidden_link' href='#aggr-3.sentence-1'>.</a></div> <div id='aggr-3.sentence-2' class='sentence'>The <a class='hidden_link' href='#def:explicitly_initialized_elements,aggregate' id='def:explicitly_initialized_elements,aggregate'><i >explicitly initialized elements</i></a>
of the aggregate are determined as follows:
<ul class='itemize'><li id='aggr-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-3.1'>(3.1)</a></div><div id='aggr-3.1.sentence-1' class='sentence'>If the initializer list is a <i ><a href='dcl.init#nt:designated-initializer-list'>designated-initializer-list</a></i>,
the aggregate shall be of class type,
the <i ><a href='lex.name#nt:identifier'>identifier</a></i> in each <i ><a href='dcl.init#nt:designator'>designator</a></i>
shall name a direct non-static data member of the class, and
the explicitly initialized elements of the aggregate
are the elements that are, or contain, those members<a class='hidden_link' href='#aggr-3.1.sentence-1'>.</a></div></li><li id='aggr-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-3.2'>(3.2)</a></div><div id='aggr-3.2.sentence-1' class='sentence'>If the initializer list is an <i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>,
the explicitly initialized elements of the aggregate
are the first <span class='math'><span class='mathalpha'>n</span></span> elements of the aggregate,
where <span class='math'><span class='mathalpha'>n</span></span> is the number of elements in the initializer list<a class='hidden_link' href='#aggr-3.2.sentence-1'>.</a></div></li><li id='aggr-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-3.3'>(3.3)</a></div><div id='aggr-3.3.sentence-1' class='sentence'>Otherwise, the initializer list must be <span class='texttt'>{}</span>,
and there are no explicitly initialized elements<a class='hidden_link' href='#aggr-3.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='aggr-4'><div class='marginalizedparent'><a class='marginalized' href='#aggr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L2958'>#</a></div><div id='aggr-4.sentence-1' class='sentence'>For each explicitly initialized element:
<ul class='itemize'><li id='aggr-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-4.1'>(4.1)</a></div><div id='aggr-4.1.sentence-1' class='sentence'>If the element is an anonymous union object and
the initializer list is a <i ><a href='dcl.init#nt:designated-initializer-list'>designated-initializer-list</a></i>,
the anonymous union object is initialized by the
<i ><a href='dcl.init#nt:designated-initializer-list'>designated-initializer-list</a></i> <span class='texttt'>{ </span><span class='textit'>D</span><span class='texttt'> }</span>,
where <span class='textit'>D</span> is the <i ><a href='dcl.init#nt:designated-initializer-clause'>designated-initializer-clause</a></i>
naming a member of the anonymous union object<a class='hidden_link' href='#aggr-4.1.sentence-1'>.</a></div> <div id='aggr-4.1.sentence-2' class='sentence'>There shall be only one such <i ><a href='dcl.init#nt:designated-initializer-clause'>designated-initializer-clause</a></i><a class='hidden_link' href='#aggr-4.1.sentence-2'>.</a></div></li><li id='aggr-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-4.2'>(4.2)</a></div><div id='aggr-4.2.sentence-1' class='sentence'>Otherwise, the element is copy-initialized
from the corresponding <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i>
or is initialized with the <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i>
of the corresponding <i ><a href='dcl.init#nt:designated-initializer-clause'>designated-initializer-clause</a></i><a class='hidden_link' href='#aggr-4.2.sentence-1'>.</a></div> <div id='aggr-4.2.sentence-2' class='sentence'>If that initializer is of the form
<i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i> or
<span class='texttt'>= </span><i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i>
and
a <a href='#def:narrowing_conversion'>narrowing conversion</a> is required
to convert the expression, the program is ill-formed<a class='hidden_link' href='#aggr-4.2.sentence-2'>.</a></div> <div id='aggr-4.2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#aggr-4.2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-4.2.sentence-3' class='sentence'>If an initializer is itself an initializer list,
the element is list-initialized, which will result in a recursive application
of the rules in this subclause if the element is an aggregate<a class='hidden_link' href='#aggr-4.2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul>
<div id='aggr-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  int x;
  struct B {
    int i;
    int j;
  } b;
} a = { 1, { 2, 3 } };</pre> <div id='aggr-4.sentence-2' class='sentence'>
initializes
<span class='texttt'>a.x</span>
with 1,
<span class='texttt'>a.b.i</span>
with 2,
<span class='texttt'>a.b.j</span>
with 3<a class='hidden_link' href='#aggr-4.sentence-2'>.</a></div><pre class='codeblock'>
struct base1 { int b1, b2 = 42; };
struct base2 {
  base2() {
    b3 = 42;
  }
  int b3;
};
struct derived : base1, base2 {
  int d;
};

derived d1{{1, 2}, {}, 4};
derived d2{{}, {}, 4};</pre> <div id='aggr-4.sentence-3' class='sentence'>
initializes
<span class='texttt'>d1.b1</span> with 1,
<span class='texttt'>d1.b2</span> with 2,
<span class='texttt'>d1.b3</span> with 42,
<span class='texttt'>d1.d</span> with 4, and
<span class='texttt'>d2.b1</span> with 0,
<span class='texttt'>d2.b2</span> with 42,
<span class='texttt'>d2.b3</span> with 42,
<span class='texttt'>d2.d</span> with 4<a class='hidden_link' href='#aggr-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='aggr-5'><div class='marginalizedparent'><a class='marginalized' href='#aggr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3028'>#</a></div><div id='aggr-5.sentence-1' class='sentence'>For a non-union aggregate,
each element that is not an explicitly initialized element
is initialized as follows:
<ul class='itemize'><li id='aggr-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.1'>(5.1)</a></div><div id='aggr-5.1.sentence-1' class='sentence'>If the element has a <a href='class.mem#def:default_member_initializer'>default member initializer</a>,
the element is initialized from that initializer<a class='hidden_link' href='#aggr-5.1.sentence-1'>.</a></div></li><li id='aggr-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.2'>(5.2)</a></div><div id='aggr-5.2.sentence-1' class='sentence'>Otherwise, if the element is not a reference, the element
is copy-initialized from an empty initializer list (<a href='#list'>[dcl.init.list]</a>)<a class='hidden_link' href='#aggr-5.2.sentence-1'>.</a></div></li><li id='aggr-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.3'>(5.3)</a></div><div id='aggr-5.3.sentence-1' class='sentence'>Otherwise, the program is ill-formed<a class='hidden_link' href='#aggr-5.3.sentence-1'>.</a></div></li></ul></div> <div id='aggr-5.sentence-2' class='sentence'>
If the aggregate is a union and the initializer list is empty, then
<ul class='itemize'><li id='aggr-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.4'>(5.4)</a></div><div id='aggr-5.4.sentence-1' class='sentence'>if any variant member has a default member initializer,
that member is initialized from its default member initializer;</div></li><li id='aggr-5.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.5'>(5.5)</a></div><div id='aggr-5.5.sentence-1' class='sentence'>otherwise, the first member of the union (if any)
is copy-initialized from an empty initializer list<a class='hidden_link' href='#aggr-5.5.sentence-1'>.</a></div></li></ul></div> <div id='aggr-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S { int a; const char* b; int c; int d = b[a]; };
S ss = { 1, "asdf" };</pre><div id='aggr-5.sentence-3' class='sentence'>initializes
<span class='texttt'>ss.a</span>
with 1,
<span class='texttt'>ss.b</span>
with <span class='texttt'>"asdf"</span>,
<span class='texttt'>ss.c</span>
with the value of an expression of the form
<span class='texttt'>int{}</span>
(that is, <span class='texttt'>0</span>), and <span class='texttt'>ss.d</span> with the value of <span class='texttt'>ss.b[ss.a]</span>
(that is, <span class='texttt'>'s'</span>), and in</div><pre class='codeblock'>
struct X { int i, j, k = 42; };
X a[] = { 1, 2, 3, 4, 5, 6 };
X b[2] = { { 1, 2, 3 }, { 4, 5, 6 } };</pre><div id='aggr-5.sentence-4' class='sentence'><span class='texttt'>a</span> and <span class='texttt'>b</span> have the same value</div><pre class='codeblock'>
struct A {
  string a;
  int b = 42;
  int c = -1;
};</pre><div id='aggr-5.sentence-5' class='sentence'><span class='texttt'>A{.c=21}</span> has the following steps:
<ul class='itemize'><li ><div id='aggr-5.sentence-1' class='sentence'>Initialize <span class='texttt'>a</span> with <span class='texttt'>{}</span></div></li><li ><div id='aggr-5.sentence-1' class='sentence'>Initialize <span class='texttt'>b</span> with <span class='texttt'>= 42</span></div></li><li ><div id='aggr-5.sentence-1' class='sentence'>Initialize <span class='texttt'>c</span> with <span class='texttt'>= 21</span></div></li></ul></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-6'><div class='marginalizedparent'><a class='marginalized' href='#aggr-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3093'>#</a></div><div id='aggr-6.sentence-1' class='sentence'>The initializations of the elements of the aggregate
are evaluated in the element order<a class='hidden_link' href='#aggr-6.sentence-1'>.</a></div> <div id='aggr-6.sentence-2' class='sentence'>That is,
all value computations and side effects associated with a given element
are sequenced before
those of any element that follows it in order<a class='hidden_link' href='#aggr-6.sentence-2'>.</a></div></div><div class='para' id='aggr-7'><div class='marginalizedparent'><a class='marginalized' href='#aggr-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3101'>#</a></div><div id='aggr-7.sentence-1' class='sentence'>An aggregate that is a class can also be initialized with a single
expression not enclosed in braces, as described in <a href='#dcl.init'>[dcl.init]</a><a class='hidden_link' href='#aggr-7.sentence-1'>.</a></div></div><div class='para' id='aggr-8'><div class='marginalizedparent'><a class='marginalized' href='#aggr-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3105'>#</a></div><div id='aggr-8.sentence-1' class='sentence'>The destructor for each element of class type
is potentially invoked (<a href='class.dtor'>[class.dtor]</a>)
from the context where the aggregate initialization occurs<a class='hidden_link' href='#aggr-8.sentence-1'>.</a></div> <div id='aggr-8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#aggr-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-8.sentence-2' class='sentence'>This provision ensures that destructors can be called
for fully-constructed subobjects
in case an exception is thrown (<a href='except.ctor'>[except.ctor]</a>)<a class='hidden_link' href='#aggr-8.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-9'><div class='marginalizedparent'><a class='marginalized' href='#aggr-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3115'>#</a></div><div id='aggr-9.sentence-1' class='sentence'>An array of unknown bound initialized with a
brace-enclosed
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
containing
<span class='texttt'>n</span>
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>,
where
<span class='texttt'>n</span>
shall be greater than zero, is defined as having
<span class='texttt'>n</span>
elements (<a href='dcl.array'>[dcl.array]</a>)<a class='hidden_link' href='#aggr-9.sentence-1'>.</a></div> <div id='aggr-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int x[] = { 1, 3, 5 };</pre><div id='aggr-9.sentence-3' class='sentence'>declares and initializes
<span class='texttt'>x</span>
as a one-dimensional array that has three elements
since no size was specified and there are three initializers<a class='hidden_link' href='#aggr-9.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='aggr-9.sentence-2' class='sentence'>
An empty initializer list
<span class='texttt'>{}</span>
shall not be used as the <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i>
for an array of unknown bound<a class='hidden_link' href='#aggr-9.sentence-2'>.</a><a class='footnotenum' href='#footnote-106'>106</a></div> <div id='aggr-9.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#aggr-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-9.sentence-4' class='sentence'>A default member initializer does not determine the bound for a member
array of unknown bound<a class='hidden_link' href='#aggr-9.sentence-4'>.</a></div> <div id='aggr-9.sentence-5' class='sentence'>Since the default member initializer is
ignored if a suitable <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> is present (<a href='class.base.init'>[class.base.init]</a>),
the default member initializer is not
considered to initialize the array of unknown bound<a class='hidden_link' href='#aggr-9.sentence-5'>.</a></div> <div id='aggr-9.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-9.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  int y[] = { 0 };          <span class='comment'>// error: non-static data member of incomplete type
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-10'><div class='marginalizedparent'><a class='marginalized' href='#aggr-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3159'>#</a></div><div id='aggr-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#aggr-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-10.sentence-1' class='sentence'>Static data members,
non-static data members of anonymous union members,
and
unnamed bit-fields
are not considered elements of the aggregate<a class='hidden_link' href='#aggr-10.sentence-1'>.</a></div> <div id='aggr-10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  int i;
  static int s;
  int j;
  int :17;
  int k;
} a = { 1, 2, 3 };</pre><div id='aggr-10.sentence-2' class='sentence'>Here, the second initializer 2 initializes
<span class='texttt'>a.j</span>
and not the static data member
<span class='texttt'>A&#x200b;::&#x200b;s</span>, and the third initializer 3 initializes <span class='texttt'>a.k</span>
and not the unnamed bit-field before it<a class='hidden_link' href='#aggr-10.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-11'><div class='marginalizedparent'><a class='marginalized' href='#aggr-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3186'>#</a></div><div id='aggr-11.sentence-1' class='sentence'>An
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
is ill-formed if the number of
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>
exceeds the number of elements of the aggregate<a class='hidden_link' href='#aggr-11.sentence-1'>.</a></div> <div id='aggr-11.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
char cv[4] = { 'a', 's', 'd', 'f', 0 };     <span class='comment'>// error
</span></pre> <div id='aggr-11.sentence-2' class='sentence'>
is ill-formed<a class='hidden_link' href='#aggr-11.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-12'><div class='marginalizedparent'><a class='marginalized' href='#aggr-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3200'>#</a></div><div id='aggr-12.sentence-1' class='sentence'>If a reference member is initialized from its default member initializer
and a potentially-evaluated subexpression thereof is an aggregate
initialization that would use that default member initializer,
the program is ill-formed<a class='hidden_link' href='#aggr-12.sentence-1'>.</a></div> <div id='aggr-12.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
  struct A;
  extern A a;
  struct A {
    const A&amp; a1 { A{a,a} };     <span class='comment'>// OK
</span>    const A&amp; a2 { A{} };        <span class='comment'>// error
</span>  };
  A a{a,a};                     <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-13'><div class='marginalizedparent'><a class='marginalized' href='#aggr-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3217'>#</a></div><div id='aggr-13.sentence-1' class='sentence'>If an aggregate class <span class='texttt'>C</span> contains a subaggregate element
<span class='texttt'>e</span> with no elements,
the <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i> for <span class='texttt'>e</span> shall not be
omitted from an <i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i> for an object of type
<span class='texttt'>C</span> unless the <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span> for all
elements of <span class='texttt'>C</span> following <span class='texttt'>e</span> are also omitted<a class='hidden_link' href='#aggr-13.sentence-1'>.</a></div> <div id='aggr-13.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S { } s;
struct A {
  S s1;
  int i1;
  S s2;
  int i2;
  S s3;
  int i3;
} a = {
  { },              <span class='comment'>// Required initialization
</span>  0,
  s,                <span class='comment'>// Required initialization
</span>  0
};                  <span class='comment'>// Initialization not required for <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;s3</span> because <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i3</span> is also not initialized
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-14'><div class='marginalizedparent'><a class='marginalized' href='#aggr-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3243'>#</a></div><div id='aggr-14.sentence-1' class='sentence'>When initializing a multi-dimensional array,
the
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>
initialize the elements with the last (rightmost) index of the array
varying the fastest (<a href='dcl.array'>[dcl.array]</a>)<a class='hidden_link' href='#aggr-14.sentence-1'>.</a></div> <div id='aggr-14.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int x[2][2] = { 3, 1, 4, 2 };</pre> <div id='aggr-14.sentence-2' class='sentence'>
initializes
<span class='texttt'>x[0][0]</span>
to
<span class='texttt'>3</span>,
<span class='texttt'>x[0][1]</span>
to
<span class='texttt'>1</span>,
<span class='texttt'>x[1][0]</span>
to
<span class='texttt'>4</span>,
and
<span class='texttt'>x[1][1]</span>
to
<span class='texttt'>2</span><a class='hidden_link' href='#aggr-14.sentence-2'>.</a></div> <div id='aggr-14.sentence-3' class='sentence'>On the other hand,
<pre class='codeblock'>
float y[4][3] = {
  { 1 }, { 2 }, { 3 }, { 4 }
};</pre>
initializes the first column of
<span class='texttt'>y</span>
(regarded as a two-dimensional array)
and leaves the rest zero<a class='hidden_link' href='#aggr-14.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-15'><div class='marginalizedparent'><a class='marginalized' href='#aggr-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3279'>#</a></div><div id='aggr-15.sentence-1' class='sentence'>Braces can be elided in an
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
as follows<a class='hidden_link' href='#aggr-15.sentence-1'>.</a></div> <div id='aggr-15.sentence-2' class='sentence'>If the
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
begins with a left brace,
then the succeeding comma-separated list of
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>
initializes the elements of a subaggregate;
it is erroneous for there to be more
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>
than elements<a class='hidden_link' href='#aggr-15.sentence-2'>.</a></div> <div id='aggr-15.sentence-3' class='sentence'>If, however, the
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
for a subaggregate does not begin with a left brace,
then only enough
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>
from the list are taken to initialize the elements of the subaggregate;
any remaining
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>
are left to initialize the next element of the aggregate
of which the current subaggregate is an element<a class='hidden_link' href='#aggr-15.sentence-3'>.</a></div> <div id='aggr-15.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
float y[4][3] = {
  { 1, 3, 5 },
  { 2, 4, 6 },
  { 3, 5, 7 },
};</pre><div id='aggr-15.sentence-4' class='sentence'>is a completely-braced initialization:
1, 3, and 5 initialize the first row of the array
<span class='texttt'>y[0]</span>,
namely
<span class='texttt'>y[0][0]</span>,
<span class='texttt'>y[0][1]</span>,
and
<span class='texttt'>y[0][2]</span><a class='hidden_link' href='#aggr-15.sentence-4'>.</a></div> <div id='aggr-15.sentence-5' class='sentence'>Likewise the next two lines initialize
<span class='texttt'>y[1]</span>
and
<span class='texttt'>y[2]</span><a class='hidden_link' href='#aggr-15.sentence-5'>.</a></div> <div id='aggr-15.sentence-6' class='sentence'>The initializer ends early and therefore
<span class='texttt'>y[3]</span>s
elements are initialized as if explicitly initialized with an
expression of the form
<span class='texttt'>float()</span>,
that is, are initialized with
<span class='texttt'>0.0</span><a class='hidden_link' href='#aggr-15.sentence-6'>.</a></div> <div id='aggr-15.sentence-7' class='sentence'>In the following example, braces in the
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
are elided;
however the
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
has the same effect as the completely-braced
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
of the above example,</div><pre class='codeblock'>
float y[4][3] = {
  1, 3, 5, 2, 4, 6, 3, 5, 7
};</pre><div id='aggr-15.sentence-8' class='sentence'>The initializer for
<span class='texttt'>y</span>
begins with a left brace, but the one for
<span class='texttt'>y[0]</span>
does not,
therefore three elements from the list are used<a class='hidden_link' href='#aggr-15.sentence-8'>.</a></div> <div id='aggr-15.sentence-9' class='sentence'>Likewise the next three are taken successively for
<span class='texttt'>y[1]</span>
and
<span class='texttt'>y[2]</span><a class='hidden_link' href='#aggr-15.sentence-9'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-16'><div class='marginalizedparent'><a class='marginalized' href='#aggr-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3358'>#</a></div><div id='aggr-16.sentence-1' class='sentence'>All implicit type conversions (<a href='conv'>[conv]</a>) are considered when
initializing the element with an <i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i><a class='hidden_link' href='#aggr-16.sentence-1'>.</a></div> <div id='aggr-16.sentence-2' class='sentence'>If the
<i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i>
can initialize an element, the element is initialized<a class='hidden_link' href='#aggr-16.sentence-2'>.</a></div> <div id='aggr-16.sentence-3' class='sentence'>Otherwise, if the element is itself a subaggregate,
brace elision is assumed and the
<i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i>
is considered for the initialization of the first element of the subaggregate<a class='hidden_link' href='#aggr-16.sentence-3'>.</a></div> <div id='aggr-16.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#aggr-16.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-16.sentence-4' class='sentence'>As specified above, brace elision cannot apply to
subaggregates with no elements; an
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i> for the entire subobject is
required<a class='hidden_link' href='#aggr-16.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <div id='aggr-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  int i;
  operator int();
};
struct B {
  A a1, a2;
  int z;
};
A a;
B b = { 4, a, a };</pre><div id='aggr-16.sentence-5' class='sentence'>Braces are elided around the
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i>
for
<span class='texttt'>b.a1.i</span><a class='hidden_link' href='#aggr-16.sentence-5'>.</a></div> <div id='aggr-16.sentence-6' class='sentence'><span class='texttt'>b.a1.i</span>
is initialized with 4,
<span class='texttt'>b.a2</span>
is initialized with
<span class='texttt'>a</span>,
<span class='texttt'>b.z</span>
is initialized with whatever
<span class='texttt'>a.operator int()</span>
returns<a class='hidden_link' href='#aggr-16.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-17'><div class='marginalizedparent'><a class='marginalized' href='#aggr-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3403'>#</a></div><span class='indexparent'><a class='index' id=':initialization,array_of_class_objects'></a></span><div id='aggr-17.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#aggr-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-17.sentence-1' class='sentence'>An aggregate array or an aggregate class may contain elements of a
class type with a user-declared constructor (<a href='class.ctor'>[class.ctor]</a>)<a class='hidden_link' href='#aggr-17.sentence-1'>.</a></div> <div id='aggr-17.sentence-2' class='sentence'>Initialization of these aggregate objects is described in <a href='class.expl.init'>[class.expl.init]</a><a class='hidden_link' href='#aggr-17.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-18'><div class='marginalizedparent'><a class='marginalized' href='#aggr-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3411'>#</a></div><div id='aggr-18.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#aggr-18.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-18.sentence-1' class='sentence'>Whether the initialization of aggregates with static storage duration
is static or dynamic is specified
in <a href='basic.start.static'>[basic.start.static]</a>, <a href='basic.start.dynamic'>[basic.start.dynamic]</a>, and <a href='stmt.dcl'>[stmt.dcl]</a><a class='hidden_link' href='#aggr-18.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-19'><div class='marginalizedparent'><a class='marginalized' href='#aggr-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3418'>#</a></div><div id='aggr-19.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,union'></a></span>When a union is initialized with an initializer list,
there shall not be more than one
explicitly initialized element<a class='hidden_link' href='#aggr-19.sentence-1'>.</a></div> <div id='aggr-19.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#aggr-19.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
union u { int a; const char* b; };
u a = { 1 };
u b = a;
u c = 1;                        <span class='comment'>// error
</span>u d = { 0, "asdf" };            <span class='comment'>// error
</span>u e = { "asdf" };               <span class='comment'>// error
</span>u f = { .b = "asdf" };
u g = { .a = 1, .b = "asdf" };  <span class='comment'>// error
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='aggr-20'><div class='marginalizedparent'><a class='marginalized' href='#aggr-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3436'>#</a></div><div id='aggr-20.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#aggr-20.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-20.sentence-1' class='sentence'>As described above,
the braces around the
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i>
for a union member can be omitted if the
union is a member of another aggregate<a class='hidden_link' href='#aggr-20.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-106'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-106'>106)</a></div><div id='footnote-106.sentence-1' class='sentence'>The syntax provides for empty
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i><span class='textit'>s</span>,
but nonetheless C++ does not have zero length arrays<a class='hidden_link' href='#footnote-106.sentence-1'>.</a></div></div></div><div id='string' class='section'><h3 ><a class='secnum' href='#string' style='min-width:103pt'>11.6.2</a> Character arrays <a class='abbr_ref' href='dcl.init.string'>[dcl.init.string]</a></h3><span class='indexparent'><a class='index' id=':initialization,character_array'></a></span><div class='para' id='string-1'><div class='marginalizedparent'><a class='marginalized' href='#string-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3448'>#</a></div><div id='string-1.sentence-1' class='sentence'>An array of <a href='basic.fundamental#def:type,narrow_character'>narrow character type</a>,
<span class='texttt'>char16_&shy;t</span> array,
<span class='texttt'>char32_&shy;t</span> array,
or <span class='texttt'>wchar_&shy;t</span> array
can be initialized by a
narrow string literal, <span class='texttt'>char16_&shy;t</span> string literal, <span class='texttt'>char32_&shy;t</span> string
literal, or wide string literal,
respectively, or by an appropriately-typed string literal enclosed in
braces (<a href='lex.string'>[lex.string]</a>)<a class='hidden_link' href='#string-1.sentence-1'>.</a></div> <div id='string-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':initialization,character_array_'></a></span>Successive
characters of the
value of the string literal
initialize the elements of the array<a class='hidden_link' href='#string-1.sentence-2'>.</a></div> <div id='string-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#string-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
char msg[] = "Syntax error on line %s\n";</pre><div id='string-1.sentence-3' class='sentence'>shows a character array whose members are initialized
with a
<i ><a href='lex.string#nt:string-literal'>string-literal</a></i><a class='hidden_link' href='#string-1.sentence-3'>.</a></div> <div id='string-1.sentence-4' class='sentence'>Note that because
<span class='texttt'>'\n'</span>
is a single character and
because a trailing
<span class='texttt'>'\0'</span>
is appended,
<span class='texttt'>sizeof(msg)</span>
is
<span class='texttt'>25</span><a class='hidden_link' href='#string-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='string-2'><div class='marginalizedparent'><a class='marginalized' href='#string-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3483'>#</a></div><div id='string-2.sentence-1' class='sentence'>There shall not be more initializers than there are array elements<a class='hidden_link' href='#string-2.sentence-1'>.</a></div> <div id='string-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#string-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
char cv[4] = "asdf";            <span class='comment'>// error
</span></pre><div id='string-2.sentence-2' class='sentence'>is ill-formed since there is no space for the implied trailing
<span class='texttt'>'\0'</span><a class='hidden_link' href='#string-2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='string-3'><div class='marginalizedparent'><a class='marginalized' href='#string-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3495'>#</a></div><div id='string-3.sentence-1' class='sentence'>If there are fewer initializers than there are array elements, each element not
explicitly initialized shall be <a href='#def:zero-initialization'>zero-initialized</a><a class='hidden_link' href='#string-3.sentence-1'>.</a></div></div></div><div id='ref' class='section'><h3 ><a class='secnum' href='#ref' style='min-width:103pt'>11.6.3</a> References <a class='abbr_ref' href='dcl.init.ref'>[dcl.init.ref]</a></h3><span class='indexparent'><a class='index' id=':initialization,reference'></a></span><div class='para' id='ref-1'><div class='marginalizedparent'><a class='marginalized' href='#ref-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3502'>#</a></div><div id='ref-1.sentence-1' class='sentence'>A variable whose declared type is
<a href='dcl.ref'>“reference to type <span class='texttt'>T</span>”</a>
shall be initialized<a class='hidden_link' href='#ref-1.sentence-1'>.</a></div> <div id='ref-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ref-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int g(int) noexcept;
void f() {
  int i;
  int&amp; r = i;                   <span class='comment'>// <span class='tcode_in_codeblock'>r</span> refers to <span class='tcode_in_codeblock'>i</span>
</span>  r = 1;                        <span class='comment'>// the value of <span class='tcode_in_codeblock'>i</span> becomes <span class='tcode_in_codeblock'>1</span>
</span>  int* p = &amp;r;                  <span class='comment'>// <span class='tcode_in_codeblock'>p</span> points to <span class='tcode_in_codeblock'>i</span>
</span>  int&amp; rr = r;                  <span class='comment'>// <span class='tcode_in_codeblock'>rr</span> refers to what <span class='tcode_in_codeblock'>r</span> refers to, that is, to <span class='tcode_in_codeblock'>i</span>
</span>  int (&amp;rg)(int) = g;           <span class='comment'>// <span class='tcode_in_codeblock'>rg</span> refers to the function <span class='tcode_in_codeblock'>g</span>
</span>  rg(i);                        <span class='comment'>// calls function <span class='tcode_in_codeblock'>g</span>
</span>  int a[3];
  int (&amp;ra)[3] = a;             <span class='comment'>// <span class='tcode_in_codeblock'>ra</span> refers to the array <span class='tcode_in_codeblock'>a</span>
</span>  ra[1] = i;                    <span class='comment'>// modifies <span class='tcode_in_codeblock'>a[1]</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='ref-2'><div class='marginalizedparent'><a class='marginalized' href='#ref-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3525'>#</a></div><div id='ref-2.sentence-1' class='sentence'>A reference cannot be changed to refer to another object after initialization<a class='hidden_link' href='#ref-2.sentence-1'>.</a></div> <div id='ref-2.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':assignment,reference'></a></span><div id='ref-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ref-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref-2.sentence-3' class='sentence'>Assignment to a reference assigns to the object referred to by the reference (<a href='expr.ass'>[expr.ass]</a>)<a class='hidden_link' href='#ref-2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> 
<span class='indexparent'><a class='index' id=':argument_passing,reference_and'></a></span><a href='expr.call'>Argument passing</a>
<span class='indexparent'><a class='index' id=':return,reference_and'></a></span>and <a href='stmt.return'>function value return</a> are initializations<a class='hidden_link' href='#ref-2.sentence-2'>.</a></div></div><div class='para' id='ref-3'><div class='marginalizedparent'><a class='marginalized' href='#ref-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3536'>#</a></div><div id='ref-3.sentence-1' class='sentence'>The initializer can be omitted for a reference only in a parameter declaration (<a href='dcl.fct'>[dcl.fct]</a>),
in the declaration of a function return type, in the declaration of
a class member within its class definition (<a href='class.mem'>[class.mem]</a>), and where the
<span class='texttt'>extern</span>
specifier is explicitly used<a class='hidden_link' href='#ref-3.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id=':declaration,extern_reference'></a></span><div id='ref-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ref-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int&amp; r1;                        <span class='comment'>// error: initializer missing
</span>extern int&amp; r2;                 <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='ref-4'><div class='marginalizedparent'><a class='marginalized' href='#ref-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3551'>#</a></div><div id='ref-4.sentence-1' class='sentence'>Given types “<span class='textit'>cv1</span> <span class='texttt'>T1</span>” and “<span class='textit'>cv2</span> <span class='texttt'>T2</span>”,
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is <a class='hidden_link' href='#def:reference-related' id='def:reference-related'><i >reference-related</i></a> to
“<span class='textit'>cv2</span> <span class='texttt'>T2</span>” if
<span class='texttt'>T1</span> is the same type as <span class='texttt'>T2</span>, or
<span class='texttt'>T1</span> is a base class of <span class='texttt'>T2</span><a class='hidden_link' href='#ref-4.sentence-1'>.</a></div> <div id='ref-4.sentence-2' class='sentence'>“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is <a class='hidden_link' href='#def:reference-compatible' id='def:reference-compatible'><i >reference-compatible</i></a>
with “<span class='textit'>cv2</span> <span class='texttt'>T2</span>” if
<ul class='itemize'><li id='ref-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-4.1'>(4.1)</a></div><div id='ref-4.1.sentence-1' class='sentence'><span class='texttt'>T1</span> is reference-related to <span class='texttt'>T2</span>, or</div></li><li id='ref-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-4.2'>(4.2)</a></div><div id='ref-4.2.sentence-1' class='sentence'><span class='texttt'>T2</span> is “<span class='texttt'>noexcept</span> function” and <span class='texttt'>T1</span> is “function”,
where the function types are otherwise the same,</div></li></ul>
and
<span class='textit'>cv1</span>
is the same cv-qualification as, or greater cv-qualification than,
<span class='textit'>cv2</span><a class='hidden_link' href='#ref-4.sentence-2'>.</a></div> <div id='ref-4.sentence-3' class='sentence'>In all cases where the reference-related or reference-compatible relationship
of two types is used to establish the validity of a reference binding, and
<span class='texttt'>T1</span>
is a base class of
<span class='texttt'>T2</span>,
a program that necessitates such a binding is ill-formed if
<span class='texttt'>T1</span>
is an <a href='class.access'>inaccessible</a> or ambiguous (<a href='class.member.lookup'>[class.member.lookup]</a>)
base class of
<span class='texttt'>T2</span><a class='hidden_link' href='#ref-4.sentence-3'>.</a></div></div><div class='para' id='ref-5'><div class='marginalizedparent'><a class='marginalized' href='#ref-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3579'>#</a></div><div id='ref-5.sentence-1' class='sentence'>A reference to type “<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is initialized by
an expression of type “<span class='textit'>cv2</span> <span class='texttt'>T2</span>” as follows:<span class='indexparent'><a class='index' id=':binding,reference'></a></span></div><div id='ref-5.sentence-2' class='sentence'><ul class='itemize'><li id='ref-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-5.1'>(5.1)</a></div><div id='ref-5.1.sentence-1' class='sentence'>If the reference is an lvalue reference and the initializer expression</div><div id='ref-5.1.sentence-2' class='sentence'><ul class='itemize'><li id='ref-5.1.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.1.1'>(5.1.1)</a></div><div id='ref-5.1.1.sentence-1' class='sentence'>is an lvalue (but is not a
bit-field), and
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is reference-compatible with
“<span class='textit'>cv2</span> <span class='texttt'>T2</span>”, or</div></li><li id='ref-5.1.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.1.2'>(5.1.2)</a></div><div id='ref-5.1.2.sentence-1' class='sentence'>has a class type (i.e.,
<span class='texttt'>T2</span>
is a class type), where <span class='texttt'>T1</span> is not reference-related to <span class='texttt'>T2</span>, and can be converted
to an lvalue of type “<span class='textit'>cv3</span> <span class='texttt'>T3</span>”, where
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is reference-compatible with
“<span class='textit'>cv3</span> <span class='texttt'>T3</span>”<a class='footnotenum' href='#footnote-107'>107</a>
(this conversion is selected by enumerating the applicable conversion
functions (<a href='over.match.ref'>[over.match.ref]</a>) and choosing the best one through <a href='over.match'>overload
resolution</a>),</div></li></ul>
then the reference is bound to the initializer expression lvalue in the
first case and to the lvalue result of the conversion
in the second case (or, in either case, to the appropriate base class subobject of the object)<a class='hidden_link' href='#ref-5.1.sentence-2'>.</a></div> <div id='ref-5.1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ref-5.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref-5.1.sentence-3' class='sentence'>The usual <a href='conv.lval'>lvalue-to-rvalue</a>, <a href='conv.array'>array-to-pointer</a>,
and <a href='conv.func'>function-to-pointer</a> standard
conversions are not needed, and therefore are suppressed, when such
direct bindings to lvalues are done<a class='hidden_link' href='#ref-5.1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <div id='ref-5.1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ref-5.1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
double d = 2.0;
double&amp; rd = d;                 <span class='comment'>// <span class='tcode_in_codeblock'>rd</span> refers to <span class='tcode_in_codeblock'>d</span>
</span>const double&amp; rcd = d;          <span class='comment'>// <span class='tcode_in_codeblock'>rcd</span> refers to <span class='tcode_in_codeblock'>d</span>
</span>
struct A { };
struct B : A { operator int&amp;(); } b;
A&amp; ra = b;                      <span class='comment'>// <span class='tcode_in_codeblock'>ra</span> refers to <span class='tcode_in_codeblock'>A</span> subobject in <span class='tcode_in_codeblock'>b</span>
</span>const A&amp; rca = b;               <span class='comment'>// <span class='tcode_in_codeblock'>rca</span> refers to <span class='tcode_in_codeblock'>A</span> subobject in <span class='tcode_in_codeblock'>b</span>
</span>int&amp; ir = B();                  <span class='comment'>// <span class='tcode_in_codeblock'>ir</span> refers to the result of <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;operator int&amp;</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='ref-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-5.2'>(5.2)</a></div><div id='ref-5.2.sentence-1' class='sentence'>Otherwise,
if the reference is an lvalue reference to a
type that is not const-qualified or is volatile-qualified,
the program is ill-formed<a class='hidden_link' href='#ref-5.2.sentence-1'>.</a></div> <div id='ref-5.2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ref-5.2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
double&amp; rd2 = 2.0;              <span class='comment'>// error: not an lvalue and reference not <span class='tcode_in_codeblock'>const</span>
</span>int  i = 2;
double&amp; rd3 = i;                <span class='comment'>// error: type mismatch and reference not <span class='tcode_in_codeblock'>const</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='ref-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-5.3'>(5.3)</a></div><div id='ref-5.3.sentence-1' class='sentence'>Otherwise, if the initializer expression
<ul class='itemize'><li id='ref-5.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.3.1'>(5.3.1)</a></div><div id='ref-5.3.1.sentence-1' class='sentence'>is an rvalue (but not a bit-field) or function lvalue and
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is
reference-compatible with “<span class='textit'>cv2</span> <span class='texttt'>T2</span>”, or</div></li><li id='ref-5.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.3.2'>(5.3.2)</a></div><div id='ref-5.3.2.sentence-1' class='sentence'>has a class type (i.e., <span class='texttt'>T2</span> is a class type), where <span class='texttt'>T1</span>
is not reference-related to <span class='texttt'>T2</span>, and can be converted to
an rvalue or function lvalue of type “<span class='textit'>cv3</span> <span class='texttt'>T3</span>”,
where “<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is
reference-compatible with “<span class='textit'>cv3</span> <span class='texttt'>T3</span>” (see <a href='over.match.ref'>[over.match.ref]</a>),</div></li></ul>
then
the value of the initializer expression in the first case and
the result of the conversion in the second case
is called the converted initializer<a class='hidden_link' href='#ref-5.3.sentence-1'>.</a></div> <div id='ref-5.3.sentence-2' class='sentence'>If the converted initializer is a prvalue,
its type <span class='texttt'>T4</span> is adjusted to type “<span class='textit'>cv1</span> <span class='texttt'>T4</span>” (<a href='conv.qual'>[conv.qual]</a>)
and the <a href='conv.rval'>temporary materialization conversion</a> is applied<a class='hidden_link' href='#ref-5.3.sentence-2'>.</a></div> <div id='ref-5.3.sentence-3' class='sentence'>In any case,
the reference is bound to the resulting glvalue
(or to an appropriate base class subobject)<a class='hidden_link' href='#ref-5.3.sentence-3'>.</a></div><div style='height:0.6em;display:block'></div><div id='ref-5.3.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ref-5.3.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { };
struct B : A { } b;
extern B f();
const A&amp; rca2 = f();                <span class='comment'>// bound to the <span class='tcode_in_codeblock'>A</span> subobject of the <span class='tcode_in_codeblock'>B</span> rvalue.
</span>A&amp;&amp; rra = f();                      <span class='comment'>// same as above
</span>struct X {
  operator B();
  operator int&amp;();
} x;
const A&amp; r = x;                     <span class='comment'>// bound to the <span class='tcode_in_codeblock'>A</span> subobject of the result of the conversion
</span>int i2 = 42;
int&amp;&amp; rri = static_cast&lt;int&amp;&amp;&gt;(i2); <span class='comment'>// bound directly to <span class='tcode_in_codeblock'>i2</span>
</span>B&amp;&amp; rrb = x;                        <span class='comment'>// bound directly to the result of <span class='tcode_in_codeblock'>operator B</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='ref-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-5.4'>(5.4)</a></div><div id='ref-5.4.sentence-1' class='sentence'>Otherwise:
<ul class='itemize'><li id='ref-5.4.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.4.1'>(5.4.1)</a></div><div id='ref-5.4.1.sentence-1' class='sentence'>If <span class='texttt'>T1</span> or <span class='texttt'>T2</span> is a class type and
<span class='texttt'>T1</span> is not reference-related to <span class='texttt'>T2</span>,
user-defined conversions are considered
using the rules for copy-initialization of an object of type
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” by
user-defined conversion
(<a href='#dcl.init'>[dcl.init]</a>, <a href='over.match.copy'>[over.match.copy]</a>, <a href='over.match.conv'>[over.match.conv]</a>);
the program is ill-formed if the corresponding non-reference
copy-initialization would be ill-formed<a class='hidden_link' href='#ref-5.4.1.sentence-1'>.</a></div> <div id='ref-5.4.1.sentence-2' class='sentence'>The result of the call to the
conversion function, as described for the non-reference
copy-initialization, is then used to direct-initialize the reference<a class='hidden_link' href='#ref-5.4.1.sentence-2'>.</a></div> <div id='ref-5.4.1.sentence-3' class='sentence'>For this direct-initialization, user-defined conversions are not considered<a class='hidden_link' href='#ref-5.4.1.sentence-3'>.</a></div></li><li id='ref-5.4.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.4.2'>(5.4.2)</a></div><div id='ref-5.4.2.sentence-1' class='sentence'>Otherwise,
the initializer expression is implicitly converted to a prvalue
of type “<span class='textit'>cv1</span> <span class='texttt'>T1</span>”<a class='hidden_link' href='#ref-5.4.2.sentence-1'>.</a></div> <div id='ref-5.4.2.sentence-2' class='sentence'>The temporary materialization conversion is applied and the reference is
bound to the result<a class='hidden_link' href='#ref-5.4.2.sentence-2'>.</a></div></li></ul></div><div id='ref-5.4.sentence-2' class='sentence'>If
<span class='texttt'>T1</span>
is reference-related to
<span class='texttt'>T2</span>:
<ul class='itemize'><li id='ref-5.4.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.4.3'>(5.4.3)</a></div><div id='ref-5.4.3.sentence-1' class='sentence'><span class='textit'>cv1</span>
shall be the same cv-qualification as, or greater cv-qualification than,
<span class='textit'>cv2</span>; and</div></li><li id='ref-5.4.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.4.4'>(5.4.4)</a></div><div id='ref-5.4.4.sentence-1' class='sentence'>if the reference is an rvalue reference,
the initializer expression shall not be an lvalue<a class='hidden_link' href='#ref-5.4.4.sentence-1'>.</a></div></li></ul></div><div id='ref-5.4.example-4' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ref-5.4.example-4'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct Banana { };
struct Enigma { operator const Banana(); };
struct Alaska { operator Banana&amp;(); };
void enigmatic() {
  typedef const Banana ConstBanana;
  Banana &amp;&amp;banana1 = ConstBanana(); <span class='comment'>// ill-formed
</span>  Banana &amp;&amp;banana2 = Enigma();      <span class='comment'>// ill-formed
</span>  Banana &amp;&amp;banana3 = Alaska();      <span class='comment'>// ill-formed
</span>}

const double&amp; rcd2 = 2;             <span class='comment'>// <span class='tcode_in_codeblock'>rcd2</span> refers to temporary with value <span class='tcode_in_codeblock'>2.0</span>
</span>double&amp;&amp; rrd = 2;                   <span class='comment'>// <span class='tcode_in_codeblock'>rrd</span> refers to temporary with value <span class='tcode_in_codeblock'>2.0</span>
</span>const volatile int cvi = 1;
const int&amp; r2 = cvi;                <span class='comment'>// error: cv-qualifier dropped
</span>struct A { operator volatile int&amp;(); } a;
const int&amp; r3 = a;                  <span class='comment'>// error: cv-qualifier dropped
</span>                                    <span class='comment'>// from result of conversion function
</span>double d2 = 1.0;
double&amp;&amp; rrd2 = d2;                 <span class='comment'>// error: initializer is lvalue of related type
</span>struct X { operator int&amp;(); };
int&amp;&amp; rri2 = X();                   <span class='comment'>// error: result of conversion function is lvalue of related type
</span>int i3 = 2;
double&amp;&amp; rrd3 = i3;                 <span class='comment'>// <span class='tcode_in_codeblock'>rrd3</span> refers to temporary with value <span class='tcode_in_codeblock'>2.0</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div><div id='ref-5.sentence-3' class='sentence'>In all cases except the last
(i.e., implicitly converting the initializer expression
to the referenced type),
the reference is said to <a class='hidden_link' href='#def:bind_directly' id='def:bind_directly'><i >bind directly</i></a> to the
initializer expression<a class='hidden_link' href='#ref-5.sentence-3'>.</a></div></div><div class='para' id='ref-6'><div class='marginalizedparent'><a class='marginalized' href='#ref-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3759'>#</a></div><div id='ref-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ref-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref-6.sentence-1' class='sentence'><a href='class.temporary'>[class.temporary]</a> describes the lifetime of temporaries bound to references<a class='hidden_link' href='#ref-6.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-107'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-107'>107)</a></div><div id='footnote-107.sentence-1' class='sentence'>This requires a <a href='class.conv.fct'>conversion
function</a> returning a reference type<a class='hidden_link' href='#footnote-107.sentence-1'>.</a></div></div></div><div id='list' class='section'><h3 ><a class='secnum' href='#list' style='min-width:103pt'>11.6.4</a> List-initialization <a class='abbr_ref' href='dcl.init.list'>[dcl.init.list]</a></h3><span class='indexparent'><a class='index' id=':initialization,list-initialization'></a></span><div class='para' id='list-1'><div class='marginalizedparent'><a class='marginalized' href='#list-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3767'>#</a></div><div id='list-1.sentence-1' class='sentence'><a class='hidden_link' href='#def:list-initialization' id='def:list-initialization'><i >List-initialization</i></a> is initialization of an object or reference from a
<i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i><a class='hidden_link' href='#list-1.sentence-1'>.</a></div> <div id='list-1.sentence-2' class='sentence'>Such an initializer is called an <a class='hidden_link' href='#def:initializer_list' id='def:initializer_list'><i>initializer list</i></a>, and
the comma-separated
<i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>
of the <i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i>
or
<i ><a href='dcl.init#nt:designated-initializer-clause'>designated-initializer-clause</a></i><span class='textit'>s</span>
of the <i ><a href='dcl.init#nt:designated-initializer-list'>designated-initializer-list</a></i>
are called the <a class='hidden_link' href='#def:elements' id='def:elements'><i>elements</i></a> of the initializer list<a class='hidden_link' href='#list-1.sentence-2'>.</a></div> <div id='list-1.sentence-3' class='sentence'>An initializer list may be empty<a class='hidden_link' href='#list-1.sentence-3'>.</a></div> <div id='list-1.sentence-4' class='sentence'>List-initialization can occur in direct-initialization or copy-initialization contexts;
list-initialization in a direct-initialization context is called
<a class='hidden_link' href='#def:direct-list-initialization' id='def:direct-list-initialization'><i >direct-list-initialization</i></a> and list-initialization in a
copy-initialization context is called <a class='hidden_link' href='#def:copy-list-initialization' id='def:copy-list-initialization'><i >copy-list-initialization</i></a><a class='hidden_link' href='#list-1.sentence-4'>.</a></div> <div id='list-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#list-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-1.sentence-5' class='sentence'>List-initialization can be used</div><div id='list-1.sentence-6' class='sentence'><ul class='itemize'><li id='list-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.1'>(1.1)</a></div><div id='list-1.1.sentence-1' class='sentence'>as the initializer in a variable definition (<a href='#dcl.init'>[dcl.init]</a>)</div></li><li id='list-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.2'>(1.2)</a></div><div id='list-1.2.sentence-1' class='sentence'>as the initializer in a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i></div></li><li id='list-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.3'>(1.3)</a></div><div id='list-1.3.sentence-1' class='sentence'>in a <a href='stmt.return'><span class='texttt'>return</span> statement</a></div></li><li id='list-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.4'>(1.4)</a></div><div id='list-1.4.sentence-1' class='sentence'>as a <i ><a href='stmt.iter#nt:for-range-initializer'>for-range-initializer</a></i></div></li><li id='list-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.5'>(1.5)</a></div><div id='list-1.5.sentence-1' class='sentence'>as a function argument (<a href='expr.call'>[expr.call]</a>)</div></li><li id='list-1.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.6'>(1.6)</a></div><div id='list-1.6.sentence-1' class='sentence'>as a <a href='expr.sub'>subscript</a></div></li><li id='list-1.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.7'>(1.7)</a></div><div id='list-1.7.sentence-1' class='sentence'>as an argument to a constructor invocation (<a href='#dcl.init'>[dcl.init]</a>, <a href='expr.type.conv'>[expr.type.conv]</a>)</div></li><li id='list-1.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.8'>(1.8)</a></div><div id='list-1.8.sentence-1' class='sentence'>as an initializer for a <a href='class.mem#def:non-static_data_member'>non-static data member</a></div></li><li id='list-1.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.9'>(1.9)</a></div><div id='list-1.9.sentence-1' class='sentence'>in a <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i></div></li><li id='list-1.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.10'>(1.10)</a></div><div id='list-1.10.sentence-1' class='sentence'>on the right-hand side of an <a href='expr.ass'>assignment</a></div></li></ul></div><div id='list-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int a = {1};
std::complex&lt;double&gt; z{1,2};
new std::vector&lt;std::string&gt;{"once", "upon", "a", "time"};  <span class='comment'>// 4 string elements
</span>f( {"Nicholas","Annemarie"} );  <span class='comment'>// pass list of two elements
</span>return { "Norah" };             <span class='comment'>// return list of one element
</span>int* e {};                      <span class='comment'>// initialization to zero / null pointer
</span>x = double{1};                  <span class='comment'>// explicitly construct a <span class='tcode_in_codeblock'>double</span>
</span>std::map&lt;std::string,int&gt; anim = { {"bear",4}, {"cassowary",2}, {"tiger",7} };</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='list-2'><div class='marginalizedparent'><a class='marginalized' href='#list-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3810'>#</a></div><div id='list-2.sentence-1' class='sentence'>A constructor is an <a class='hidden_link' href='#def:initializer-list_constructor' id='def:initializer-list_constructor'><i >initializer-list constructor</i></a> if its first parameter is
of type <span class='texttt'>std&#x200b;::&#x200b;initializer_&shy;list&lt;E&gt;</span> or reference to possibly cv-qualified
<span class='texttt'>std&#x200b;::&#x200b;initializer_&shy;list&lt;E&gt;</span> for some type <span class='texttt'>E</span>, and either there are no other
parameters or else all other parameters have <a href='dcl.fct.default'>default arguments</a><a class='hidden_link' href='#list-2.sentence-1'>.</a></div> <div id='list-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#list-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-2.sentence-3' class='sentence'>Initializer-list constructors are favored over other constructors in
list-initialization (<a href='over.match.list'>[over.match.list]</a>)<a class='hidden_link' href='#list-2.sentence-3'>.</a></div> <div id='list-2.sentence-4' class='sentence'>Passing an initializer list as the argument
to the constructor template <span class='texttt'>template&lt;class T&gt; C(T)</span> of a class <span class='texttt'>C</span> does not
create an initializer-list constructor, because an initializer list argument causes the
corresponding parameter to be a non-deduced context (<a href='temp.deduct.call'>[temp.deduct.call]</a>)<a class='hidden_link' href='#list-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='list-2.sentence-2' class='sentence'>
The template
<span class='texttt'>std&#x200b;::&#x200b;initializer_&shy;list</span> is not predefined; if the header
<span class='texttt'>&lt;initializer_&shy;list&gt;</span> is not included prior to a use of
<span class='texttt'>std&#x200b;::&#x200b;initializer_&shy;list</span> — even an implicit use in which the type is <a href='dcl.spec.auto'>not
named</a> — the program is ill-formed<a class='hidden_link' href='#list-2.sentence-2'>.</a></div></div><div class='para' id='list-3'><div class='marginalizedparent'><a class='marginalized' href='#list-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L3826'>#</a></div><div id='list-3.sentence-1' class='sentence'>List-initialization of an object or reference of type <span class='texttt'>T</span> is defined as follows:
<ul class='itemize'><li id='list-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.1'>(3.1)</a></div><div id='list-3.1.sentence-1' class='sentence'>If the <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>
contains a <i ><a href='dcl.init#nt:designated-initializer-list'>designated-initializer-list</a></i>,
<span class='texttt'>T</span> shall be an aggregate class<a class='hidden_link' href='#list-3.1.sentence-1'>.</a></div> <div id='list-3.1.sentence-2' class='sentence'>The ordered <i ><a href='lex.name#nt:identifier'>identifier</a></i><span class='textit'>s</span>
in the <i ><a href='dcl.init#nt:designator'>designator</a></i><span class='textit'>s</span>
of the <i ><a href='dcl.init#nt:designated-initializer-list'>designated-initializer-list</a></i>
shall form a subsequence
of the ordered <i ><a href='lex.name#nt:identifier'>identifier</a></i><span class='textit'>s</span>
in the direct non-static data members of <span class='texttt'>T</span><a class='hidden_link' href='#list-3.1.sentence-2'>.</a></div> <div id='list-3.1.sentence-3' class='sentence'>Aggregate initialization is performed (<a href='#aggr'>[dcl.init.aggr]</a>)<a class='hidden_link' href='#list-3.1.sentence-3'>.</a></div> <div id='list-3.1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { int x; int y; int z; };
A a{.y = 2, .x = 1};                <span class='comment'>// error: designator order does not match declaration order
</span>A b{.x = 1, .z = 2};                <span class='comment'>// OK, <span class='tcode_in_codeblock'>b.y</span> initialized to <span class='tcode_in_codeblock'>0</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='list-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.2'>(3.2)</a></div><div id='list-3.2.sentence-1' class='sentence'>If <span class='texttt'>T</span> is an aggregate class and the initializer list has a single element
of type <span class='textit'>cv</span> <span class='texttt'>U</span>,
where <span class='texttt'>U</span> is <span class='texttt'>T</span> or a class derived from <span class='texttt'>T</span>,
the object is initialized from that element (by copy-initialization for
copy-list-initialization, or by direct-initialization for
direct-list-initialization)<a class='hidden_link' href='#list-3.2.sentence-1'>.</a></div></li><li id='list-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.3'>(3.3)</a></div><div id='list-3.3.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is a character array and the initializer list has a
single element that is an appropriately-typed string literal (<a href='#string'>[dcl.init.string]</a>),
initialization is performed as described in that subclause<a class='hidden_link' href='#list-3.3.sentence-1'>.</a></div></li><li id='list-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.4'>(3.4)</a></div><div id='list-3.4.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is an aggregate,
<a href='#aggr'>aggregate initialization</a> is performed<a class='hidden_link' href='#list-3.4.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='list-3.4.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.4.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
double ad[] = { 1, 2.0 };           <span class='comment'>// OK
</span>int ai[] = { 1, 2.0 };              <span class='comment'>// error: narrowing
</span>
struct S2 {
  int m1;
  double m2, m3;
};
S2 s21 = { 1, 2, 3.0 };             <span class='comment'>// OK
</span>S2 s22 { 1.0, 2, 3 };               <span class='comment'>// error: narrowing
</span>S2 s23 { };                         <span class='comment'>// OK: default to 0,0,0
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='list-3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.5'>(3.5)</a></div><div id='list-3.5.sentence-1' class='sentence'>Otherwise, if the initializer list has no elements and <span class='texttt'>T</span> is a class type with a
default constructor, the object is value-initialized<a class='hidden_link' href='#list-3.5.sentence-1'>.</a></div></li><li id='list-3.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.6'>(3.6)</a></div><div id='list-3.6.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is a specialization of <span class='texttt'>std&#x200b;::&#x200b;initializer_&shy;list&lt;E&gt;</span>,
the object is constructed as described below<a class='hidden_link' href='#list-3.6.sentence-1'>.</a></div></li><li id='list-3.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.7'>(3.7)</a></div><div id='list-3.7.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is a class type, constructors are considered<a class='hidden_link' href='#list-3.7.sentence-1'>.</a></div> <div id='list-3.7.sentence-2' class='sentence'>The applicable constructors are enumerated and
the best one is chosen through overload resolution (<a href='over.match'>[over.match]</a>, <a href='over.match.list'>[over.match.list]</a>)<a class='hidden_link' href='#list-3.7.sentence-2'>.</a></div> <div id='list-3.7.sentence-3' class='sentence'>If a narrowing
conversion (see below) is required to convert any of the arguments, the program is
ill-formed<a class='hidden_link' href='#list-3.7.sentence-3'>.</a></div><div style='height:0.6em;display:block'></div><div id='list-3.7.example-3' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.7.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  S(std::initializer_list&lt;double&gt;); <span class='comment'>// #1
</span>  S(std::initializer_list&lt;int&gt;);    <span class='comment'>// #2
</span>  S();                              <span class='comment'>// #3
</span>  <span class='comment'>// ...
</span>};
S s1 = { 1.0, 2.0, 3.0 };           <span class='comment'>// invoke #1
</span>S s2 = { 1, 2, 3 };                 <span class='comment'>// invoke #2
</span>S s3 = { };                         <span class='comment'>// invoke #3
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='list-3.7.example-4' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.7.example-4'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct Map {
  Map(std::initializer_list&lt;std::pair&lt;std::string,int&gt;&gt;);
};
Map ship = {{"Sophie",14}, {"Surprise",28}};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='list-3.7.example-5' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.7.example-5'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  <span class='comment'>// no initializer-list constructors
</span>  S(int, double, double);           <span class='comment'>// #1
</span>  S();                              <span class='comment'>// #2
</span>  <span class='comment'>// ...
</span>};
S s1 = { 1, 2, 3.0 };               <span class='comment'>// OK: invoke #1
</span>S s2 { 1.0, 2, 3 };                 <span class='comment'>// error: narrowing
</span>S s3 { };                           <span class='comment'>// OK: invoke #2
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='list-3.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.8'>(3.8)</a></div><div id='list-3.8.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is an enumeration
with a fixed underlying type (<a href='dcl.enum'>[dcl.enum]</a>),
the <i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i> has a single element <span class='texttt'>v</span>, and
the initialization is direct-list-initialization,
the object is initialized with the value <span class='texttt'>T(v)</span> (<a href='expr.type.conv'>[expr.type.conv]</a>);
if a narrowing conversion is required to convert <span class='texttt'>v</span>
to the underlying type of <span class='texttt'>T</span>, the program is ill-formed<a class='hidden_link' href='#list-3.8.sentence-1'>.</a></div> <div id='list-3.8.example-6' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.8.example-6'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
enum byte : unsigned char { };
byte b { 42 };                      <span class='comment'>// OK
</span>byte c = { 42 };                    <span class='comment'>// error
</span>byte d = byte{ 42 };                <span class='comment'>// OK; same value as <span class='tcode_in_codeblock'>b</span>
</span>byte e { -1 };                      <span class='comment'>// error
</span>
struct A { byte b; };
A a1 = { { 42 } };                  <span class='comment'>// error
</span>A a2 = { byte{ 42 } };              <span class='comment'>// OK
</span>
void f(byte);
f({ 42 });                          <span class='comment'>// error
</span>
enum class Handle : uint32_t { Invalid = 0 };
Handle h { 42 };                    <span class='comment'>// OK
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='list-3.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.9'>(3.9)</a></div><div id='list-3.9.sentence-1' class='sentence'>Otherwise, if
the initializer list has a single element of type <span class='texttt'>E</span> and either
<span class='texttt'>T</span> is not a reference type or its referenced type is
reference-related to <span class='texttt'>E</span>, the object or reference is initialized
from that element (by copy-initialization for copy-list-initialization,
or by direct-initialization for direct-list-initialization);
if a narrowing conversion (see below) is required
to convert the element to <span class='texttt'>T</span>, the program is ill-formed<a class='hidden_link' href='#list-3.9.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='list-3.9.example-7' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.9.example-7'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int x1 {2};                         <span class='comment'>// OK
</span>int x2 {2.0};                       <span class='comment'>// error: narrowing
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='list-3.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.10'>(3.10)</a></div><div id='list-3.10.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is a reference type, a prvalue of the type
referenced by <span class='texttt'>T</span> is generated<a class='hidden_link' href='#list-3.10.sentence-1'>.</a></div> <div id='list-3.10.sentence-2' class='sentence'>The prvalue initializes its result object by
copy-list-initialization or direct-list-initialization,
depending on the kind of initialization for the reference<a class='hidden_link' href='#list-3.10.sentence-2'>.</a></div> <div id='list-3.10.sentence-3' class='sentence'>The prvalue is then used to direct-initialize the reference<a class='hidden_link' href='#list-3.10.sentence-3'>.</a></div> <div id='list-3.10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#list-3.10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-3.10.sentence-4' class='sentence'>As usual, the binding will fail and the program is ill-formed if
the reference type is an lvalue reference to a non-const type<a class='hidden_link' href='#list-3.10.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <div id='list-3.10.example-8' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.10.example-8'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  S(std::initializer_list&lt;double&gt;); <span class='comment'>// #1
</span>  S(const std::string&amp;);            <span class='comment'>// #2
</span>  <span class='comment'>// ...
</span>};
const S&amp; r1 = { 1, 2, 3.0 };        <span class='comment'>// OK: invoke #1
</span>const S&amp; r2 { "Spinach" };          <span class='comment'>// OK: invoke #2
</span>S&amp; r3 = { 1, 2, 3 };                <span class='comment'>// error: initializer is not an lvalue
</span>const int&amp; i1 = { 1 };              <span class='comment'>// OK
</span>const int&amp; i2 = { 1.1 };            <span class='comment'>// error: narrowing
</span>const int (&amp;iar)[2] = { 1, 2 };     <span class='comment'>// OK: <span class='tcode_in_codeblock'>iar</span> is bound to temporary array
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='list-3.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.11'>(3.11)</a></div><div id='list-3.11.sentence-1' class='sentence'>Otherwise, if the initializer list has no elements, the object is
value-initialized<a class='hidden_link' href='#list-3.11.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='list-3.11.example-9' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.11.example-9'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int** pp {};                        <span class='comment'>// initialized to null pointer
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='list-3.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.12'>(3.12)</a></div><div id='list-3.12.sentence-1' class='sentence'>Otherwise, the program is ill-formed<a class='hidden_link' href='#list-3.12.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='list-3.12.example-10' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-3.12.example-10'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { int i; int j; };
A a1 { 1, 2 };                      <span class='comment'>// aggregate initialization
</span>A a2 { 1.2 };                       <span class='comment'>// error: narrowing
</span>struct B {
  B(std::initializer_list&lt;int&gt;);
};
B b1 { 1, 2 };                      <span class='comment'>// creates <span class='tcode_in_codeblock'>initializer_&shy;list&lt;int&gt;</span> and calls constructor
</span>B b2 { 1, 2.0 };                    <span class='comment'>// error: narrowing
</span>struct C {
  C(int i, double j);
};
C c1 = { 1, 2.2 };                  <span class='comment'>// calls constructor with arguments (1, 2.2)
</span>C c2 = { 1.1, 2 };                  <span class='comment'>// error: narrowing
</span>
int j { 1 };                        <span class='comment'>// initialize to 1
</span>int k { };                          <span class='comment'>// initialize to 0
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div></div><div class='para' id='list-4'><div class='marginalizedparent'><a class='marginalized' href='#list-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L4028'>#</a></div><div id='list-4.sentence-1' class='sentence'>Within the <i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i> of a <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i>,
the <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i><span class='textit'>s</span>, including any that result from
<a href='temp.variadic#def:pack_expansion'>pack expansions</a>,
are evaluated in the order in which they
appear<a class='hidden_link' href='#list-4.sentence-1'>.</a></div> <div id='list-4.sentence-2' class='sentence'>That is, every value computation and side effect associated with a
given <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i> is sequenced before every value
computation and side effect associated with any <i ><a href='dcl.init#nt:initializer-clause'>initializer-clause</a></i>
that follows it in the comma-separated list of the <i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i><a class='hidden_link' href='#list-4.sentence-2'>.</a></div> <div id='list-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#list-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-4.sentence-3' class='sentence'>This evaluation ordering holds regardless of the semantics of the
initialization; for example, it applies when the elements of the
<i ><a href='dcl.init#nt:initializer-list'>initializer-list</a></i> are interpreted as arguments of a constructor
call, even though ordinarily there are no sequencing constraints on the
arguments of a call<a class='hidden_link' href='#list-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='list-5'><div class='marginalizedparent'><a class='marginalized' href='#list-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L4043'>#</a></div><div id='list-5.sentence-1' class='sentence'>An object of type <span class='texttt'>std&#x200b;::&#x200b;initializer_&shy;list&lt;E&gt;</span> is constructed from
an initializer list as if
the implementation generated and <a href='conv.rval'>materialized</a>
a prvalue of type “array of <span class='math'><span class='mathalpha'>N</span></span> <span class='texttt'>const E</span>”,
where <span class='math'><span class='mathalpha'>N</span></span> is the number of elements in the
initializer list<a class='hidden_link' href='#list-5.sentence-1'>.</a></div> <div id='list-5.sentence-2' class='sentence'>Each element of that array is copy-initialized with the
corresponding element of the initializer list, and the
<span class='texttt'>std&#x200b;::&#x200b;initializer_&shy;list&lt;E&gt;</span> object is constructed to refer to that array<a class='hidden_link' href='#list-5.sentence-2'>.</a></div> <div id='list-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#list-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-5.sentence-4' class='sentence'>A constructor or conversion function selected for the copy shall be
<a href='class.access'>accessible</a> in the context of the initializer list<a class='hidden_link' href='#list-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='list-5.sentence-3' class='sentence'>
If a narrowing conversion is required to initialize any of the elements, the program is ill-formed<a class='hidden_link' href='#list-5.sentence-3'>.</a></div> <div id='list-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  X(std::initializer_list&lt;double&gt; v);
};
X x{ 1,2,3 };</pre><div id='list-5.sentence-5' class='sentence'>The initialization will be implemented in a way roughly equivalent to this:
<pre class='codeblock'>
const double __a[3] = {double{1}, double{2}, double{3}};
X x(std::initializer_list&lt;double&gt;(__a, __a+3));</pre>
assuming that the implementation can construct an <span class='texttt'>initializer_&shy;list</span> object with a pair of pointers<a class='hidden_link' href='#list-5.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='list-6'><div class='marginalizedparent'><a class='marginalized' href='#list-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L4070'>#</a></div><div id='list-6.sentence-1' class='sentence'>The array has the same lifetime as any other <a href='class.temporary'>temporary
object</a>, except that initializing an
<span class='texttt'>initializer_&shy;list</span> object from the array extends the lifetime of
the array exactly like binding a reference to a temporary<a class='hidden_link' href='#list-6.sentence-1'>.</a></div> <div id='list-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
typedef std::complex&lt;double&gt; cmplx;
std::vector&lt;cmplx&gt; v1 = { 1, 2, 3 };

void f() {
  std::vector&lt;cmplx&gt; v2{ 1, 2, 3 };
  std::initializer_list&lt;int&gt; i3 = { 1, 2, 3 };
}

struct A {
  std::initializer_list&lt;int&gt; i4;
  A() : i4{ 1, 2, 3 } {}            <span class='comment'>// ill-formed, would create a dangling reference
</span>};</pre><div id='list-6.sentence-2' class='sentence'>For <span class='texttt'>v1</span> and <span class='texttt'>v2</span>, the <span class='texttt'>initializer_&shy;list</span> object
is a parameter in a function call, so the array created for
<span class='texttt'>{ 1, 2, 3 }</span> has full-expression lifetime<a class='hidden_link' href='#list-6.sentence-2'>.</a></div> <div id='list-6.sentence-3' class='sentence'>For <span class='texttt'>i3</span>, the <span class='texttt'>initializer_&shy;list</span> object is a variable,
so the array persists for the lifetime of the variable<a class='hidden_link' href='#list-6.sentence-3'>.</a></div> <div id='list-6.sentence-4' class='sentence'>For <span class='texttt'>i4</span>, the <span class='texttt'>initializer_&shy;list</span> object is initialized in
the constructor's <i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i> as if by binding
a temporary array to a reference member, so the program is
ill-formed (<a href='class.base.init'>[class.base.init]</a>)<a class='hidden_link' href='#list-6.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='list-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#list-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-6.sentence-5' class='sentence'>The implementation is free to allocate the array in read-only memory if an explicit array with the same initializer could be so allocated<a class='hidden_link' href='#list-6.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='list-7'><div class='marginalizedparent'><a class='marginalized' href='#list-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/declarators.tex#L4105'>#</a></div><div id='list-7.sentence-1' class='sentence'>A
<span class='indexparent'><a class='index' id=':conversion,narrowing'></a></span><a class='hidden_link' href='#def:narrowing_conversion' id='def:narrowing_conversion'><i >narrowing conversion</i></a> is an implicit conversion</div><div id='list-7.sentence-2' class='sentence'><ul class='itemize'><li id='list-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-7.1'>(7.1)</a></div><div id='list-7.1.sentence-1' class='sentence'>from a floating-point type to an integer type, or</div></li><li id='list-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-7.2'>(7.2)</a></div><div id='list-7.2.sentence-1' class='sentence'>from <span class='texttt'>long double</span> to <span class='texttt'>double</span> or <span class='texttt'>float</span>, or from
<span class='texttt'>double</span> to <span class='texttt'>float</span>, except where the source is a constant expression and
the actual value after conversion
is within the range of values that can be represented (even if it cannot be represented exactly),
or</div></li><li id='list-7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-7.3'>(7.3)</a></div><div id='list-7.3.sentence-1' class='sentence'>from an integer type or unscoped enumeration type to a floating-point type, except
where the source is a constant expression and the actual value after conversion will fit
into the target type and will produce the original value when converted back to the
original type, or</div></li><li id='list-7.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-7.4'>(7.4)</a></div><div id='list-7.4.sentence-1' class='sentence'>from an integer type or unscoped enumeration type to an integer type that cannot
represent all the values of the original type, except where the source is a constant
expression whose value after integral promotions will fit into the target type<a class='hidden_link' href='#list-7.4.sentence-1'>.</a></div></li></ul></div><div id='list-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#list-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-7.sentence-3' class='sentence'>As indicated above, such conversions are not allowed at the top level in
list-initializations<a class='hidden_link' href='#list-7.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>   <div id='list-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#list-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int x = 999;                    <span class='comment'>// <span class='tcode_in_codeblock'>x</span> is not a constant expression
</span>const int y = 999;
const int z = 99;
char c1 = x;                    <span class='comment'>// OK, though it might narrow (in this case, it does narrow)
</span>char c2{x};                     <span class='comment'>// error: might narrow
</span>char c3{y};                     <span class='comment'>// error: narrows (assuming <span class='tcode_in_codeblock'>char</span> is 8 bits)
</span>char c4{z};                     <span class='comment'>// OK: no narrowing needed
</span>unsigned char uc1 = {5};        <span class='comment'>// OK: no narrowing needed
</span>unsigned char uc2 = {-1};       <span class='comment'>// error: narrows
</span>unsigned int ui1 = {-1};        <span class='comment'>// error: narrows
</span>signed int si1 =
  { (unsigned int)-1 };         <span class='comment'>// error: narrows
</span>int ii = {2.0};                 <span class='comment'>// error: narrows
</span>float f1 { x };                 <span class='comment'>// error: might narrow
</span>float f2 { 7 };                 <span class='comment'>// OK: 7 can be exactly represented as a <span class='tcode_in_codeblock'>float</span>
</span>int f(int);
int a[] = { 2, f(2), f(2.0) };  <span class='comment'>// OK: the <span class='tcode_in_codeblock'>double</span>-to-<span class='tcode_in_codeblock'>int</span> conversion is not at the top level
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div></body></html>