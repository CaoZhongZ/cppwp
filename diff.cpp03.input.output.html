<!DOCTYPE html><html lang='en'><head><title>[diff.cpp03.input.output]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:73pt'>Annex C&emsp;(informative)</a> Compatibility <a class='abbr_ref' href='./#diff'>[diff]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>C.2</a> C++ and ISO C++ 2003 <a class='abbr_ref' href='diff.cpp03#input.output'>[diff.cpp03]</a></h2><div id='diff.cpp03.input.output'><h3 ><a class='secnum' style='min-width:103pt'>C.2.16</a> Clause <a href='input.output'>[input.output]</a>: input/output library <a class='abbr_ref'>[diff.cpp03.input.output]</a></h3><p ><a href='./istream::sentry'>[istream::sentry]</a>,
<a href='./ostream::sentry'>[ostream::sentry]</a>,
<a href='iostate.flags'>[iostate.flags]</a>
<br/><b>Change:</b> Specify use of <span class='texttt'>explicit</span> in existing boolean conversion functions.
<br/><b>Rationale:</b> Clarify intentions, avoid workarounds.
<br/><b>Effect on original feature:</b>
Valid C++ 2003 code that relies on implicit boolean conversions will fail to
compile with this International Standard. Such conversions occur in the
following conditions:</p><ul class='itemize'><li ><p >passing a value to a function that takes an argument of type <span class='texttt'>bool</span>;
</p></li><li ><p >using <span class='texttt'>operator==</span> to compare to <span class='texttt'>false</span> or <span class='texttt'>true</span>;
</p></li><li ><p >returning a value from a function with a return type of <span class='texttt'>bool</span>;
</p></li><li ><p >initializing members of type <span class='texttt'>bool</span> via aggregate initialization;
</p></li><li ><p >initializing a <span class='texttt'>const bool&amp;</span> which would bind to a temporary.
</p></li></ul><p ><a href='./ios::failure'>[ios::failure]</a>
<br/><b>Change:</b> Change base class of <span class='texttt'>std::ios_base::failure</span>.
<br/><b>Rationale:</b> More detailed error messages.
<br/><b>Effect on original feature:</b>
<span class='texttt'>std::ios_base::failure</span> is no longer derived directly from
<span class='texttt'>std::exception</span>, but is now derived from <span class='texttt'>std::system_error</span>,
which in turn is derived from <span class='texttt'>std::runtime_error</span>. Valid C++ 2003 code
that assumes that <span class='texttt'>std::ios_base::failure</span> is derived directly from
<span class='texttt'>std::exception</span> may execute differently in this International Standard.</p><p ><a href='ios.base'>[ios.base]</a>
<br/><b>Change:</b> Flag types in <span class='texttt'>std::ios_base</span> are now bitmasks with values
defined as constexpr static members.
<br/><b>Rationale:</b> Required for new features.
<br/><b>Effect on original feature:</b>
Valid C++ 2003 code that relies on <span class='texttt'>std::ios_base</span> flag types being
represented as <span class='texttt'>std::bitset</span> or as an integer type may fail to compile
with this International Standard. For example:</p><pre class='codeblock'>
#include &lt;iostream&gt;

int main() {
  int flag = std::ios_base::hex;
  std::cout.setf(flag);         <span class='comment'>// error: <span class='texttt'>setf</span> does not take argument of type <span class='texttt'>int</span>
</span>  return 0;
}
</pre></div></div></body></html>