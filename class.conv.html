<!DOCTYPE html><html lang='en'><head><title>[class.conv]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>15</a> Special member functions <a class='abbr_ref' href='./#special'>[special]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>15.3</a> Conversions <a class='abbr_ref'>[class.conv]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L725'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,class'></a></span><span class='indexparent'><a class='index' id=':conversion,implicit'></a></span>Type conversions of class objects can be specified by constructors and
by conversion functions<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>These conversions are called
<a class='hidden_link' href='#def:conversion,user-defined' id='def:conversion,user-defined'><i >user-defined conversions</i></a>
and are used for implicit type conversions (<a href='conv'>[conv]</a>),
for <a href='dcl.init'>initialization</a>,
and for explicit type conversions (<a href='expr.cast'>[expr.cast]</a>, <a href='expr.static.cast'>[expr.static.cast]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L738'>#</a></div><div id='2.sentence-1' class='sentence'>User-defined conversions are applied only where they are unambiguous (<a href='class.member.lookup'>[class.member.lookup]</a>, <a href='class.conv.fct'>[class.conv.fct]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Conversions obey the <a href='class.access'>access control rules</a><a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Access control is applied after ambiguity resolution (<a href='basic.lookup'>[basic.lookup]</a>)<a class='hidden_link' href='#2.sentence-3'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L743'>#</a></div><div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-1' class='sentence'>See <a href='over.match'>[over.match]</a> for a discussion of the use of conversions in function calls
as well as examples below<a class='hidden_link' href='#3.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L749'>#</a></div><div id='4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,implicit_user-defined'></a></span>At most one user-defined conversion (constructor or conversion function)
is implicitly applied to a single value<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  operator int();
};

struct Y {
  operator X();
};

Y a;
int b = a;          <span class='comment'>// error, <span class='tcode_in_codeblock'>a.operator X().operator int()</span> not tried
</span>int c = X(a);       <span class='comment'>// OK: <span class='tcode_in_codeblock'>a.operator X().operator int()</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L769'>#</a></div><div id='5.sentence-1' class='sentence'>User-defined conversions are used implicitly only if they are unambiguous<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':name_hiding,user-defined_conversion_and'></a></span>A conversion function in a derived class does not hide a conversion function
in a base class unless the two functions convert to the same type<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>Function <a href='over.match.best'>overload resolution</a> selects the best
conversion function to perform the conversion<a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  operator int();
};

struct Y : X {
    operator char();
};

void f(Y&amp; a) {
  if (a) {          <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;operator int()</span> or <span class='tcode_in_codeblock'>Y&#x200b;::&#x200b;operator char()</span>
</span>  }
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='ctor' class='section'><h3 ><a class='secnum' href='#ctor' style='min-width:103pt'>15.3.1</a> Conversion by constructor <a class='abbr_ref' href='class.conv.ctor'>[class.conv.ctor]</a></h3><span class='indexparent'><a class='index' id=':conversion,user-defined'></a></span><div class='para' id='ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#ctor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L796'>#</a></div><div id='ctor-1.sentence-1' class='sentence'>A constructor declared without the
<i ><a href='dcl.fct.spec#nt:function-specifier'>function-specifier</a></i>
<span class='texttt'>explicit</span>
specifies a conversion from
the types of its parameters (if any)
to the type of its class<a class='hidden_link' href='#ctor-1.sentence-1'>.</a></div> <div id='ctor-1.sentence-2' class='sentence'>Such a constructor is called a
<a class='hidden_link' href='#def:constructor,converting' id='def:constructor,converting'><i >converting constructor</i></a><a class='hidden_link' href='#ctor-1.sentence-2'>.</a></div> <div id='ctor-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ctor-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <span class='indexparent'><a class='index' id=':Jessie'></a></span><pre class='codeblock'>
struct X {
    X(int);
    X(const char*, int =0);
    X(int, int);
};

void f(X arg) {
  X a = 1;          <span class='comment'>// <span class='tcode_in_codeblock'>a = X(1)</span>
</span>  X b = "Jessie";   <span class='comment'>// <span class='tcode_in_codeblock'>b = X("Jessie",0)</span>
</span>  a = 2;            <span class='comment'>// <span class='tcode_in_codeblock'>a = X(2)</span>
</span>  f(3);             <span class='comment'>// <span class='tcode_in_codeblock'>f(X(3))</span>
</span>  f({1, 2});        <span class='comment'>// <span class='tcode_in_codeblock'>f(X(1,2))</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#ctor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L825'>#</a></div><div id='ctor-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ctor-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ctor-2.sentence-1' class='sentence'>An explicit constructor constructs objects just like non-explicit
constructors, but does so only where the <a href='dcl.init#def:direct-initialization'>direct-initialization</a> syntax
or where casts (<a href='expr.static.cast'>[expr.static.cast]</a>, <a href='expr.cast'>[expr.cast]</a>) are explicitly
used; see also <a href='over.match.copy'>[over.match.copy]</a><a class='hidden_link' href='#ctor-2.sentence-1'>.</a></div> <div id='ctor-2.sentence-2' class='sentence'>A default constructor may be an explicit constructor; such a constructor
will be used to perform default-initialization
or <a href='dcl.init#def:value-initialize'>value-initialization</a><a class='hidden_link' href='#ctor-2.sentence-2'>.</a></div> <div id='ctor-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#ctor-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct Z {
  explicit Z();
  explicit Z(int);
  explicit Z(int, int);
};

Z a;                            <span class='comment'>// OK: default-initialization performed
</span>Z b{};                          <span class='comment'>// OK: direct initialization syntax used
</span>Z c = {};                       <span class='comment'>// error: copy-list-initialization
</span>Z a1 = 1;                       <span class='comment'>// error: no implicit conversion
</span>Z a3 = Z(1);                    <span class='comment'>// OK: direct initialization syntax used
</span>Z a2(1);                        <span class='comment'>// OK: direct initialization syntax used
</span>Z* p = new Z(1);                <span class='comment'>// OK: direct initialization syntax used
</span>Z a4 = (Z)1;                    <span class='comment'>// OK: explicit cast used
</span>Z a5 = static_cast&lt;Z&gt;(1);       <span class='comment'>// OK: explicit cast used
</span>Z a6 = { 3, 4 };                <span class='comment'>// error: no implicit conversion
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#ctor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L856'>#</a></div><div id='ctor-3.sentence-1' class='sentence'>A
non-explicit
copy/move constructor (<a href='class.copy'>[class.copy]</a>) is a converting constructor<a class='hidden_link' href='#ctor-3.sentence-1'>.</a></div> <div id='ctor-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#ctor-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ctor-3.sentence-2' class='sentence'>An implicitly-declared copy/move constructor is not an explicit constructor;
it may be called for implicit type conversions<a class='hidden_link' href='#ctor-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='fct' class='section'><h3 ><a class='secnum' href='#fct' style='min-width:103pt'>15.3.2</a> Conversion functions <a class='abbr_ref' href='class.conv.fct'>[class.conv.fct]</a></h3><span class='indexparent'><a class='index' id=':function,conversion'></a></span><span class='indexparent'><a class='index' id=':conversion,user-defined_'></a></span><div class='para' id='fct-1'><div class='marginalizedparent'><a class='marginalized' href='#fct-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L870'>#</a></div><div id='fct-1.sentence-1' class='sentence'>A member function of a class <span class='texttt'>X</span> having no parameters with a name of the form
<pre class='bnf'><a class='nontermdef' href='#nt:conversion-function-id' id='nt:conversion-function-id'>conversion-function-id:</a>
&#9;<span class='terminal'><i ><a href='over.oper#nt:operator'>operator</a></i></span> <i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i>
</pre>
<pre class='bnf'><a class='nontermdef' href='#nt:conversion-type-id' id='nt:conversion-type-id'>conversion-type-id:</a>
&#9;<i ><a href='dcl.type#nt:type-specifier-seq'>type-specifier-seq</a></i> <i ><a href='class.conv.fct#nt:conversion-declarator'>conversion-declarator</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre>
<pre class='bnf'><a class='nontermdef' href='#nt:conversion-declarator' id='nt:conversion-declarator'>conversion-declarator:</a>
&#9;<i ><a href='dcl.decl#nt:ptr-operator'>ptr-operator</a></i> <i ><a href='class.conv.fct#nt:conversion-declarator'>conversion-declarator</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre>
specifies a conversion from
<span class='texttt'>X</span>
to the type specified by the
<i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i><a class='hidden_link' href='#fct-1.sentence-1'>.</a></div> <div id='fct-1.sentence-2' class='sentence'>Such functions are called <a class='hidden_link' href='#def:conversion_function' id='def:conversion_function'><i >conversion functions</i></a><a class='hidden_link' href='#fct-1.sentence-2'>.</a></div> <div id='fct-1.sentence-3' class='sentence'>A <i ><a href='dcl.spec#nt:decl-specifier'>decl-specifier</a></i> in the <i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i>
of a conversion function (if any) shall be neither
a <i ><a href='dcl.type#nt:defining-type-specifier'>defining-type-specifier</a></i> nor <span class='texttt'>static</span><a class='hidden_link' href='#fct-1.sentence-3'>.</a></div> <div id='fct-1.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':conversion,type_of'></a></span>The type of the conversion function (<a href='dcl.fct'>[dcl.fct]</a>) is
“function taking no parameter returning
<i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i>”<a class='hidden_link' href='#fct-1.sentence-4'>.</a></div> <div id='fct-1.sentence-5' class='sentence'>A conversion function is never used to convert a (possibly cv-qualified) object
to the (possibly cv-qualified) same object type (or a reference to it),
to a (possibly cv-qualified) base class of that type (or a reference to it),
or to (possibly cv-qualified) void<a class='hidden_link' href='#fct-1.sentence-5'>.</a><a class='footnotenum' href='#footnote-117'>117</a></div> <div id='fct-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#fct-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X {
  operator int();
  operator auto() -&gt; short;     <span class='comment'>// error: trailing return type
</span>};

void f(X a) {
  int i = int(a);
  i = (int)a;
  i = a;
}</pre> <div id='fct-1.sentence-6' class='sentence'>
In all three cases the value assigned will be converted by
<span class='texttt'>X&#x200b;::&#x200b;operator int()</span><a class='hidden_link' href='#fct-1.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='fct-2'><div class='marginalizedparent'><a class='marginalized' href='#fct-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L921'>#</a></div><div id='fct-2.sentence-1' class='sentence'>A conversion function may be <a href='dcl.fct.spec#:specifier,explicit'>explicit</a>, in which case it is only considered as a user-defined conversion for <a href='dcl.init#def:direct-initialization'>direct-initialization</a><a class='hidden_link' href='#fct-2.sentence-1'>.</a></div> <div id='fct-2.sentence-2' class='sentence'>Otherwise, user-defined conversions are not restricted to use in assignments and initializations<a class='hidden_link' href='#fct-2.sentence-2'>.</a></div> <div id='fct-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#fct-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class Y { };
struct Z {
  explicit operator Y() const;
};

void h(Z z) {
  Y y1(z);          <span class='comment'>// OK: direct-initialization
</span>  Y y2 = z;         <span class='comment'>// ill-formed: copy-initialization
</span>  Y y3 = (Y)z;      <span class='comment'>// OK: cast notation
</span>}

void g(X a, X b) {
  int i = (a) ? 1+a : 0;
  int j = (a&amp;&amp;b) ? a+b : i;
  if (a) {
  }
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='fct-3'><div class='marginalizedparent'><a class='marginalized' href='#fct-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L945'>#</a></div><div id='fct-3.sentence-1' class='sentence'>The
<i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i>
shall not represent a function type nor an array type<a class='hidden_link' href='#fct-3.sentence-1'>.</a></div> <div id='fct-3.sentence-2' class='sentence'>The
<i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i>
in a
<i ><a href='class.conv.fct#nt:conversion-function-id'>conversion-function-id</a></i>
is the longest sequence of
tokens that could possibly form a <i ><a href='class.conv.fct#nt:conversion-type-id'>conversion-type-id</a></i><a class='hidden_link' href='#fct-3.sentence-2'>.</a></div> <div id='fct-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#fct-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='fct-3.sentence-3' class='sentence'>This prevents ambiguities between the declarator operator <span class='texttt'>*</span> and its expression
counterparts<a class='hidden_link' href='#fct-3.sentence-3'>.</a></div> <div id='fct-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#fct-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
&amp;ac.operator int*i; <span class='comment'>// syntax error:
</span>                    <span class='comment'>// parsed as: <span class='tcode_in_codeblock'>&amp;(ac.operator int *)i</span>
</span>                    <span class='comment'>// not as: <span class='tcode_in_codeblock'>&amp;(ac.operator int)*i</span>
</span></pre> <div id='fct-3.sentence-5' class='sentence'>
The <span class='texttt'>*</span> is the pointer declarator and not the multiplication operator<a class='hidden_link' href='#fct-3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='fct-3.sentence-4' class='sentence'>
This rule also prevents ambiguities for attributes<a class='hidden_link' href='#fct-3.sentence-4'>.</a></div> <div id='fct-3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#fct-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
operator int [[noreturn]] ();   <span class='comment'>// error: <span class='tcode_in_codeblock'>noreturn</span> attribute applied to a type
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='fct-4'><div class='marginalizedparent'><a class='marginalized' href='#fct-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L974'>#</a></div><div id='fct-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,inheritance_of_user-defined'></a></span>Conversion functions are inherited<a class='hidden_link' href='#fct-4.sentence-1'>.</a></div></div><div class='para' id='fct-5'><div class='marginalizedparent'><a class='marginalized' href='#fct-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L978'>#</a></div><div id='fct-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,virtual_user-defined'></a></span>Conversion functions can be virtual<a class='hidden_link' href='#fct-5.sentence-1'>.</a></div></div><div class='para' id='fct-6'><div class='marginalizedparent'><a class='marginalized' href='#fct-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/special.tex#L982'>#</a></div><div id='fct-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,deduced_return_type_of_user-defined'></a></span>A conversion function template shall not have a
<a href='dcl.spec.auto'>deduced return type</a><a class='hidden_link' href='#fct-6.sentence-1'>.</a></div> <div id='fct-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#fct-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct S {
  operator auto() const { return 10; }      <span class='comment'>// OK
</span>  template&lt;class T&gt;
  operator auto() const { return 1.2; }     <span class='comment'>// error: conversion function template
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-117'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-117'>117)</a></div><div id='footnote-117.sentence-1' class='sentence'>These conversions are considered
as standard conversions for the purposes of overload resolution (<a href='over.best.ics'>[over.best.ics]</a>, <a href='over.ics.ref'>[over.ics.ref]</a>) and therefore initialization (<a href='dcl.init'>[dcl.init]</a>) and <a href='expr.static.cast'>explicit casts</a><a class='hidden_link' href='#footnote-117.sentence-1'>.</a></div> <div id='footnote-117.sentence-2' class='sentence'>A conversion to <span class='texttt'>void</span> does not invoke any conversion function (<a href='expr.static.cast'>[expr.static.cast]</a>)<a class='hidden_link' href='#footnote-117.sentence-2'>.</a></div> <div id='footnote-117.sentence-3' class='sentence'>Even though never directly called to perform a conversion,
such conversion functions can be declared and can potentially
be reached through a call to a virtual conversion function in a base class<a class='hidden_link' href='#footnote-117.sentence-3'>.</a></div></div></div></div></body></html>