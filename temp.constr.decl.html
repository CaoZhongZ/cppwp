<!DOCTYPE html><html lang='en'><head><title>[temp.constr.decl]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>17.4</a> Template constraints <a class='abbr_ref' href='temp.constr#decl'>[temp.constr]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>17.4.2</a> Constrained declarations <a class='abbr_ref'>[temp.constr.decl]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9d8d06a6601794478075b01009c82d61e7d47445/source/templates.tex#L1678'>#</a></div><div id='1.sentence-1' class='sentence'>A <a href='temp'>template declaration</a>
or <a href='dcl.fct'>function declaration</a>
can be constrained by the use of a <i ><a href='temp#nt:requires-clause'>requires-clause</a></i><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>This allows the specification of constraints for that declaration as
an expression:</div><pre class='bnf'><a class='nontermdef' id='nt:constraint-expression'>constraint-expression:</a>
&#9;<i ><a href='expr.log.or#nt:logical-or-expression'>logical-or-expression</a></i>
</pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9d8d06a6601794478075b01009c82d61e7d47445/source/templates.tex#L1690'>#</a></div><div id='2.sentence-1' class='sentence'>Constraints can also be associated with a declaration through the use of
<i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i><span class='textit'>s</span> in a
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Each of these forms introduces additional <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><span class='textit'>s</span>
that are used to constrain the declaration<a class='hidden_link' href='#2.sentence-2'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9d8d06a6601794478075b01009c82d61e7d47445/source/templates.tex#L1697'>#</a></div><div id='3.sentence-1' class='sentence'>A template's <a class='hidden_link' href='#def:associated_constraints' id='def:associated_constraints'><i >associated constraints</i></a> are defined as follows:</div><div id='3.sentence-2' class='sentence'><ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div><div id='3.1.sentence-1' class='sentence'>If there are no introduced <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><span class='textit'>s</span>,
the declaration has no associated constraints<a class='hidden_link' href='#3.1.sentence-1'>.</a></div></li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div><div id='3.2.sentence-1' class='sentence'>Otherwise, if there is a single introduced <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i>,
the associated constraints are the <a href='temp.constr.normal#def:normal_form'>normal form</a>
of that expression<a class='hidden_link' href='#3.2.sentence-1'>.</a></div></li><li id='3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.3'>(3.3)</a></div><div id='3.3.sentence-1' class='sentence'>Otherwise, the associated constraints are the normal form of a <a href='expr.log.and'>logical
AND expression</a> whose operands are in the
following order:</div><div id='3.3.sentence-2' class='sentence'><ul class='itemize'><li id='3.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#3.3.1'>(3.3.1)</a></div><div id='3.3.1.sentence-1' class='sentence'>the <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> introduced by each
<i ><a href='temp.param#nt:constrained-parameter'>constrained-parameter</a></i> in the
declaration's <i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i>, in
order of appearance, and</div></li><li id='3.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#3.3.2'>(3.3.2)</a></div><div id='3.3.2.sentence-1' class='sentence'>the <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> introduced
by a <i ><a href='temp#nt:requires-clause'>requires-clause</a></i> following a
<i ><a href='temp#nt:template-parameter-list'>template-parameter-list</a></i>, and</div></li><li id='3.3.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#3.3.3'>(3.3.3)</a></div><div id='3.3.3.sentence-1' class='sentence'>the <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> introduced by a trailing
<i ><a href='temp#nt:requires-clause'>requires-clause</a></i> (<a href='dcl.decl'>[dcl.decl]</a>)
of a <a href='dcl.fct'>function declaration</a><a class='hidden_link' href='#3.3.3.sentence-1'>.</a></div></li></ul></div></li></ul></div><div id='3.sentence-3' class='sentence'>The formation of the associated constraints
establishes the order in which constraints are instantiated when checking
for satisfaction (<a href='temp.constr.constr'>[temp.constr.constr]</a>)<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C = true;

template&lt;C T&gt; void f1(T);
template&lt;typename T&gt; requires C&lt;T&gt; void f2(T);
template&lt;typename T&gt; void f3(T) requires C&lt;T&gt;;</pre> <div id='3.sentence-4' class='sentence'>
The functions <span class='texttt'>f1</span>, <span class='texttt'>f2</span>, and <span class='texttt'>f3</span> have the associated
constraint <span class='texttt'>C&lt;T&gt;</span><a class='hidden_link' href='#3.sentence-4'>.</a></div><pre class='codeblock'>
template&lt;typename T&gt; concept C1 = true;
template&lt;typename T&gt; concept C2 = sizeof(T) &gt; 0;

template&lt;C1 T&gt; void f4(T) requires C2&lt;T&gt;;
template&lt;typename T&gt; requires C1&lt;T&gt; &amp;&amp; C2&lt;T&gt; void f5(T);</pre> <div id='3.sentence-5' class='sentence'>
The associated constraints of <span class='texttt'>f4</span> and <span class='texttt'>f5</span>
are <span class='texttt'>C1&lt;T&gt; <span class='math'>∧</span> C2&lt;T&gt;</span><a class='hidden_link' href='#3.sentence-5'>.</a></div><pre class='codeblock'>
template&lt;C1 T&gt; requires C2&lt;T&gt; void f6();
template&lt;C2 T&gt; requires C1&lt;T&gt; void f7();</pre> <div id='3.sentence-6' class='sentence'>
The associated constraints of
<span class='texttt'>f6</span> are <span class='texttt'>C1&lt;T&gt; <span class='math'>∧</span> C2&lt;T&gt;</span>,
and those of
<span class='texttt'>f7</span> are <span class='texttt'>C2&lt;T&gt; <span class='math'>∧</span> C1&lt;T&gt;</span><a class='hidden_link' href='#3.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></body></html>