<!DOCTYPE html><html lang='en'><head><title>[category.monetary]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>22</a> Localization library <a class='abbr_ref' href='./#localization'>[localization]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>22.4</a> Standard <span class='texttt'>locale</span> categories <a class='abbr_ref' href='locale.categories#category.monetary'>[locale.categories]</a></h2><div id='category.monetary'><h3 ><a class='secnum' style='min-width:103pt'>22.4.6</a> The monetary category <a class='abbr_ref'>[category.monetary]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4531'>#</a></div><p >These templates handle monetary formats.
A template parameter indicates whether
local or international monetary formats are to be used.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4536'>#</a></div><p >All specifications of member functions for
<span class='texttt'>money_&shy;put</span>
and
<span class='texttt'>money_&shy;get</span>
in the subclauses of <a href='category.monetary'>[category.monetary]</a> only apply to the
specializations required in Tables <a href='locale.category#tab:localization.category.facets'>69</a>
and <a href='locale.category#tab:localization.required.specializations'>70</a> (<a href='locale.category'>[locale.category]</a>).
Their members use their
<span class='texttt'>ios_&shy;base&amp;</span>,
<span class='texttt'>ios_&shy;base&#x200b;::&#x200b;iostate&amp;</span>,
and
<span class='texttt'>fill</span>
arguments as described in <a href='locale.categories'>[locale.categories]</a>, and the
<span class='texttt'>moneypunct&lt;&gt;</span>
and
<span class='texttt'>ctype&lt;&gt;</span>
facets, to determine formatting details.</p></div><div id='locale.money.get'><h4 ><a class='secnum' href='#locale.money.get' style='min-width:118pt'>22.4.6.1</a> Class template <span class='texttt'>money_&shy;get</span> <a class='abbr_ref' href='locale.money.get'>[locale.money.get]</a></h4><p ><span class='indexparent'><a class='index' id='money_get'></a></span></p><p ><pre class='codeblock'>
namespace std {
  template &lt;class charT, class InputIterator = istreambuf_iterator&lt;charT&gt;&gt;
    class money_get : public locale::facet {
    public:
      using char_type   = charT;
      using iter_type   = InputIterator;
      using string_type = basic_string&lt;charT&gt;;

      explicit money_get(size_t refs = 0);

      iter_type get(iter_type s, iter_type end, bool intl,
                    ios_base&amp; f, ios_base::iostate&amp; err,
                    long double&amp; units) const;
      iter_type get(iter_type s, iter_type end, bool intl,
                    ios_base&amp; f, ios_base::iostate&amp; err,
                    string_type&amp; digits) const;

      static locale::id id;

    protected:
      ~money_get();
      virtual iter_type do_get(iter_type, iter_type, bool, ios_base&amp;,
                               ios_base::iostate&amp; err, long double&amp; units) const;
      virtual iter_type do_get(iter_type, iter_type, bool, ios_base&amp;,
                               ios_base::iostate&amp; err, string_type&amp; digits) const;
    };
}</pre></p><div id='locale.money.get.members'><h4 ><a class='secnum' href='#locale.money.get.members' style='min-width:133pt'>22.4.6.1.1</a> <span class='texttt'>money_&shy;get</span> members <a class='abbr_ref' href='locale.money.get.members'>[locale.money.get.members]</a></h4><p ><span class='indexparent'><a class='index' id='money_get,get'></a></span><span class='indexparent'><a class='index' id='get,money_get'></a></span></p><p ><code class='itemdecl'>iter_type get(iter_type s, iter_type end, bool intl,
              ios_base&amp; f, ios_base::iostate&amp; err,
              long double&amp; quant) const;
iter_type get(s, iter_type end, bool intl, ios_base&amp;f,
              ios_base::iostate&amp; err, string_type&amp; quant) const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.money.get.members-1'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.get.members-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4600'>#</a></div><p ><span class='textit'>Returns:</span> 
<span class='texttt'>do_&shy;get(s, end, intl, f, err, quant)</span>.
</p></div></div></div><div id='locale.money.get.virtuals'><h4 ><a class='secnum' href='#locale.money.get.virtuals' style='min-width:133pt'>22.4.6.1.2</a> <span class='texttt'>money_&shy;get</span> virtual functions <a class='abbr_ref' href='locale.money.get.virtuals'>[locale.money.get.virtuals]</a></h4><p ><span class='indexparent'><a class='index' id='money_get,do_get'></a></span><span class='indexparent'><a class='index' id='do_get,money_get'></a></span></p><p ><code class='itemdecl'>iter_type do_get(iter_type s, iter_type end, bool intl,
                 ios_base&amp; str, ios_base::iostate&amp; err,
                 long double&amp; units) const;
iter_type do_get(iter_type s, iter_type end, bool intl,
                 ios_base&amp; str, ios_base::iostate&amp; err,
                 string_type&amp; digits) const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.money.get.virtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.get.virtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4618'>#</a></div><p ><span class='textit'>Effects:</span> 
Reads characters from
<span class='texttt'>s</span>
to parse and construct a monetary value according to the
format specified by a
<span class='texttt'>moneypunct&lt;charT, Intl&gt;</span>
facet reference
<span class='texttt'>mp</span>
and the character mapping specified by a
<span class='texttt'>ctype&lt;charT&gt;</span>
facet reference
<span class='texttt'>ct</span>
obtained from the locale returned by
<span class='texttt'>str.getloc()</span>,
and
<span class='texttt'>str.flags()</span>.
If a valid sequence is recognized,
does not change <span class='texttt'>err</span>;
otherwise, sets <span class='texttt'>err</span> to
<span class='texttt'>(err|str.failbit)</span>,
or
<span class='texttt'>(err|str.failbit|str.eofbit)</span>
if no more characters are available,
and does not change <span class='texttt'>units</span> or <span class='texttt'>digits</span>.
Uses the pattern returned by
<span class='texttt'>mp.neg_&shy;format()</span>
to parse all values.
The result is returned as an integral value stored in
<span class='texttt'>units</span>
or as a sequence of digits possibly preceded by a minus sign
(as produced by
<span class='texttt'>ct.widen(c)</span>
where
<span class='texttt'>c</span>
is
<span class='texttt'>'-'</span>
or in the range from
<span class='texttt'>'0'</span>
through
<span class='texttt'>'9'</span>,
inclusive)
stored in
<span class='texttt'>digits</span>.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> 
The sequence
<span class='texttt'>&#36;1,056.23</span>
in a common United States locale would yield, for
<span class='texttt'>units</span>,
<span class='texttt'>105623</span>,
or, for
<span class='texttt'>digits</span>,
<span class='texttt'>"105623"</span>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>â€”<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] 
If
<span class='texttt'>mp.grouping()</span>
indicates that no thousands separators are permitted,
any such characters are not read, and parsing is terminated at the point
where they first appear.
Otherwise, thousands separators are optional;
if present, they are checked for correct placement only after
all format components have been read.</p></div></div><div class='para' id='locale.money.get.virtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.get.virtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4681'>#</a></div><p >Where
<span class='texttt'>money_&shy;base&#x200b;::&#x200b;space</span>
or
<span class='texttt'>money_&shy;base&#x200b;::&#x200b;none</span>
appears as the last element in the format pattern,
no white space is consumed. Otherwise, where <span class='texttt'>money_&shy;base&#x200b;::&#x200b;space</span> appears in any of the
initial elements of the format pattern, at least one white space character is required. Where
<span class='texttt'>money_&shy;base&#x200b;::&#x200b;none</span> appears in any of the initial elements of the format pattern, white
space is allowed but not required.
If
<span class='texttt'>(str.flags() &amp; str.showbase)</span>
is false, the currency symbol is optional and is consumed only if
other characters are needed to complete the format;
otherwise, the currency symbol is required.</p></div></div><div class='para' id='locale.money.get.virtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.get.virtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4697'>#</a></div><p >If the first character (if any) in the string
<span class='texttt'>pos</span>
returned by
<span class='texttt'>mp.positive_&shy;sign()</span>
or the string
<span class='texttt'>neg</span>
returned by
<span class='texttt'>mp.negative_&shy;sign()</span>
is recognized in the position indicated by
<span class='texttt'>sign</span>
in the format pattern, it is consumed and any remaining characters
in the string are required after all the other format components.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> 
If
<span class='texttt'>showbase</span>
is off, then for a
<span class='texttt'>neg</span>
value of <span class='texttt'>"()"</span> and a currency symbol of <span class='texttt'>"L"</span>,
in <span class='texttt'>"(100 L)"</span> the <span class='texttt'>"L"</span> is consumed;
but if
<span class='texttt'>neg</span>
is <span class='texttt'>"-"</span>, the <span class='texttt'>"L"</span> in <span class='texttt'>"-100 L"</span> is not consumed.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>â€”<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] 
If
<span class='texttt'>pos</span>
or
<span class='texttt'>neg</span>
is empty, the sign component is optional, and if no sign is
detected, the result is given the sign that corresponds to the source
of the empty string.
Otherwise, the character in the indicated position must
match the first character of
<span class='texttt'>pos</span>
or
<span class='texttt'>neg</span>,
and the result is given the corresponding sign.
If the first character of
<span class='texttt'>pos</span>
is equal to the first character of
<span class='texttt'>neg</span>,
or if both strings are empty, the result is given a positive sign.</p></div></div><div class='para' id='locale.money.get.virtuals-4'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.get.virtuals-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4740'>#</a></div><p >Digits in the numeric monetary component are extracted and placed in
<span class='texttt'>digits</span>,
or into a character buffer
<span class='texttt'>buf1</span>
for conversion to produce a value for
<span class='texttt'>units</span>,
in the order in which they appear,
preceded by a minus sign if and only if the result is negative.
The value
<span class='texttt'>units</span>
is produced as if by<a class='footnotenum' href='#footnote-248'>248</a></p><p ><pre class='codeblock'>
for (int i = 0; i &lt; n; ++i)
  buf2[i] = src[find(atoms, atoms+sizeof(src), buf1[i]) - atoms];
buf2[n] = 0;
sscanf(buf2, "%Lf", &amp;units);</pre></p><p >where
<span class='texttt'>n</span>
is the number of characters placed in
<span class='texttt'>buf1</span>,
<span class='texttt'>buf2</span>
is a character buffer, and the values
<span class='texttt'>src</span>
and
<span class='texttt'>atoms</span>
are defined as if by</p><p ><pre class='codeblock'>
static const char src[] = "0123456789-";
charT atoms[sizeof(src)];
ct.widen(src, src + sizeof(src) - 1, atoms);</pre></p></div></div><div class='para' id='locale.money.get.virtuals-5'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.get.virtuals-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4778'>#</a></div><p ><span class='textit'>Returns:</span> 
An iterator pointing immediately beyond the last character recognized
as part of a valid monetary quantity.
</p></div></div><div class='footnote' id='footnote-248'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-248'>248)</a></div><p >The semantics here are different from
<span class='texttt'>ct.narrow</span>.</p></div></div></div><div id='locale.money.put'><h4 ><a class='secnum' href='#locale.money.put' style='min-width:118pt'>22.4.6.2</a> Class template <span class='texttt'>money_&shy;put</span> <a class='abbr_ref' href='locale.money.put'>[locale.money.put]</a></h4><p ><span class='indexparent'><a class='index' id='money_put'></a></span></p><p ><pre class='codeblock'>
namespace std {
  template &lt;class charT, class OutputIterator = ostreambuf_iterator&lt;charT&gt;&gt;
    class money_put : public locale::facet {
    public:
      using char_type   = charT;
      using iter_type   = OutputIterator;
      using string_type = basic_string&lt;charT&gt;;

      explicit money_put(size_t refs = 0);

      iter_type put(iter_type s, bool intl, ios_base&amp; f,
                    char_type fill, long double units) const;
      iter_type put(iter_type s, bool intl, ios_base&amp; f,
                    char_type fill, const string_type&amp; digits) const;

      static locale::id id;

    protected:
      ~money_put();
      virtual iter_type do_put(iter_type, bool, ios_base&amp;, char_type fill,
                               long double units) const;
      virtual iter_type do_put(iter_type, bool, ios_base&amp;, char_type fill,
                               const string_type&amp; digits) const;
    };
}</pre></p><div id='locale.money.put.members'><h4 ><a class='secnum' href='#locale.money.put.members' style='min-width:133pt'>22.4.6.2.1</a> <span class='texttt'>money_&shy;put</span> members <a class='abbr_ref' href='locale.money.put.members'>[locale.money.put.members]</a></h4><p ><span class='indexparent'><a class='index' id='money_put,put'></a></span><span class='indexparent'><a class='index' id='put,money_put'></a></span></p><p ><code class='itemdecl'>iter_type put(iter_type s, bool intl, ios_base&amp; f, char_type fill,
              long double quant) const;
iter_type put(iter_type s, bool intl, ios_base&amp; f, char_type fill,
              const string_type&amp; quant) const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.money.put.members-1'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.put.members-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4826'>#</a></div><p ><span class='textit'>Returns:</span> 
<span class='texttt'>do_&shy;put(s, intl, f, loc, quant)</span>.
</p></div></div></div><div id='locale.money.put.virtuals'><h4 ><a class='secnum' href='#locale.money.put.virtuals' style='min-width:133pt'>22.4.6.2.2</a> <span class='texttt'>money_&shy;put</span> virtual functions <a class='abbr_ref' href='locale.money.put.virtuals'>[locale.money.put.virtuals]</a></h4><p ><span class='indexparent'><a class='index' id='money_put,do_put'></a></span><span class='indexparent'><a class='index' id='do_put,money_put'></a></span></p><p ><code class='itemdecl'>iter_type do_put(iter_type s, bool intl, ios_base&amp; str,
                 char_type fill, long double units) const;
iter_type do_put(iter_type s, bool intl, ios_base&amp; str,
                 char_type fill, const string_type&amp; digits) const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.money.put.virtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.put.virtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4842'>#</a></div><p ><span class='textit'>Effects:</span> 
Writes characters to
<span class='texttt'>s</span>
according to the format specified by a
<span class='texttt'>moneypunct&lt;charT, Intl&gt;</span>
facet reference
<span class='texttt'>mp</span>
and the character mapping specified by a
<span class='texttt'>ctype&lt;charT&gt;</span>
facet reference
<span class='texttt'>ct</span>
obtained from the locale returned by
<span class='texttt'>str.getloc()</span>,
and
<span class='texttt'>str.flags()</span>.
The argument
<span class='texttt'>units</span>
is transformed into a sequence of wide characters as if by</p><p ><pre class='codeblock'>
ct.widen(buf1, buf1 + sprintf(buf1, "%.0Lf", units), buf2)</pre></p><p >for character buffers
<span class='texttt'>buf1</span>
and
<span class='texttt'>buf2</span>.
If the first character in
<span class='texttt'>digits</span>
or
<span class='texttt'>buf2</span>
is equal to
<span class='texttt'>ct.widen('-')</span>,
then the pattern used for formatting is the result of
<span class='texttt'>mp.neg_&shy;format()</span>;
otherwise the pattern is the result of
<span class='texttt'>mp.pos_&shy;format()</span>.
Digit characters are written, interspersed with any thousands separators
and decimal point specified by the format, in the order they appear
(after the optional leading minus sign)
in
<span class='texttt'>digits</span>
or
<span class='texttt'>buf2</span>.
In
<span class='texttt'>digits</span>,
only the optional leading minus sign and the immediately subsequent
digit characters (as classified according to
<span class='texttt'>ct</span>)
are used; any trailing characters (including digits appearing
after a non-digit character) are ignored.
Calls
<span class='texttt'>str.width(0)</span>.</p></div></div><div class='para' id='locale.money.put.virtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.put.virtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4897'>#</a></div><p ><span class='textit'>Remarks:</span> 
The currency symbol is generated if and only if
<span class='texttt'>(str.flags() &amp; str.showbase)</span>
is nonzero.
If the number of characters generated for the specified format is less than the value
returned by
<span class='texttt'>str.width()</span>
on entry to the function, then copies of
<span class='texttt'>fill</span>
are inserted as necessary to pad to the specified width.
For the value
<span class='texttt'>af</span>
equal to
<span class='texttt'>(str.flags() &amp; str.adjustfield)</span>,
if
<span class='texttt'>(af == str.internal)</span>
is <span class='texttt'>true</span>, the fill characters are placed where
<span class='texttt'>none</span>
or
<span class='texttt'>space</span>
appears in the formatting pattern; otherwise if
<span class='texttt'>(af == str.left)</span>
is <span class='texttt'>true</span>, they are placed after the other characters;
otherwise, they are placed before the other characters.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
It is possible, with some combinations of format patterns and flag values,
to produce output that cannot be parsed using
<span class='texttt'>num_&shy;get&lt;&gt;&#x200b;::&#x200b;get</span>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>â€”<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div><div class='para' id='locale.money.put.virtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#locale.money.put.virtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4929'>#</a></div><p ><span class='textit'>Returns:</span> 
An iterator pointing immediately after the last character produced.
</p></div></div></div></div><div id='locale.moneypunct'><h4 ><a class='secnum' href='#locale.moneypunct' style='min-width:118pt'>22.4.6.3</a> Class template <span class='texttt'>moneypunct</span> <a class='abbr_ref' href='locale.moneypunct'>[locale.moneypunct]</a></h4><p ><span class='indexparent'><a class='index' id='moneypunct'></a></span></p><p ><pre class='codeblock'>
namespace std {
  class money_base {
  public:
    enum part { none, space, symbol, sign, value };
    struct pattern { char field[4]; };
  };

  template &lt;class charT, bool International = false&gt;
    class moneypunct : public locale::facet, public money_base {
    public:
      using char_type   = charT;
      using string_type = basic_string&lt;charT&gt;;

      explicit moneypunct(size_t refs = 0);

      charT        decimal_point() const;
      charT        thousands_sep() const;
      string       grouping()      const;
      string_type  curr_symbol()   const;
      string_type  positive_sign() const;
      string_type  negative_sign() const;
      int          frac_digits()   const;
      pattern      pos_format()    const;
      pattern      neg_format()    const;

      static locale::id id;
      static const bool intl = International;

    protected:
      ~moneypunct();
      virtual charT        do_decimal_point() const;
      virtual charT        do_thousands_sep() const;
      virtual string       do_grouping()      const;
      virtual string_type  do_curr_symbol()   const;
      virtual string_type  do_positive_sign() const;
      virtual string_type  do_negative_sign() const;
      virtual int          do_frac_digits()   const;
      virtual pattern      do_pos_format()    const;
      virtual pattern      do_neg_format()    const;
    };
}</pre></p><div class='para' id='locale.moneypunct-1'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L4981'>#</a></div><p >The
<span class='texttt'>moneypunct&lt;&gt;</span>
facet defines monetary formatting parameters used by
<span class='texttt'>money_&shy;get&lt;&gt;</span>
and
<span class='texttt'>money_&shy;put&lt;&gt;</span>.
A monetary format is a sequence of four components,
specified by a
<span class='texttt'>pattern</span>
value
<span class='texttt'>p</span>,
such that the
<span class='texttt'>part</span>
value
<span class='texttt'>static_&shy;cast&lt;part&gt;(p.field[i])</span>
determines the
<span class='texttt'>i</span>th
component of the format<a class='footnotenum' href='#footnote-249'>249</a>
In the
<span class='texttt'>field</span>
member of a
<span class='texttt'>pattern</span>
object, each value
<span class='texttt'>symbol</span>,
<span class='texttt'>sign</span>,
<span class='texttt'>value</span>,
and either
<span class='texttt'>space</span>
or
<span class='texttt'>none</span>
appears exactly once.
The value
<span class='texttt'>none</span>,
if present, is not first;
the value
<span class='texttt'>space</span>,
if present, is neither first nor last.</p></div><div class='para' id='locale.moneypunct-2'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5026'>#</a></div><p >Where
<span class='texttt'>none</span>
or
<span class='texttt'>space</span>
appears, white space is permitted in the format,
except where
<span class='texttt'>none</span>
appears at the end, in which case no white space is permitted.
The value
<span class='texttt'>space</span>
indicates that at least one space is required at that position.
Where
<span class='texttt'>symbol</span>
appears, the sequence of characters returned by
<span class='texttt'>curr_&shy;symbol()</span>
is permitted, and can be required.
Where
<span class='texttt'>sign</span>
appears, the first (if any) of the sequence of characters returned by
<span class='texttt'>positive_&shy;sign()</span>
or
<span class='texttt'>negative_&shy;sign()</span>
(respectively as the monetary value is non-negative or negative) is required.
Any remaining characters of the sign sequence are required after all
other format components.
Where
<span class='texttt'>value</span>
appears, the absolute numeric monetary value is required.</p></div><div class='para' id='locale.moneypunct-3'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5056'>#</a></div><p >The format of the numeric monetary value is a decimal number:</p><p ><pre class='codeblock'>
value ::= units [ decimal-point [ digits ]] |
  decimal-point digits</pre></p><p >if
<span class='texttt'>frac_&shy;digits()</span>
returns a positive value, or</p><p ><pre class='codeblock'>
value ::= units</pre></p><p >otherwise.
The symbol
<span class='texttt'>decimal-point</span>
indicates the character returned by
<span class='texttt'>decimal_&shy;point()</span>.
The other symbols are defined as follows:</p><p ><pre class='codeblock'>
units ::= digits [ thousands-sep units ]
digits ::= adigit [ digits ]</pre></p><p >In the syntax specification, the symbol
<span class='texttt'>adigit</span>
is any of the values
<span class='texttt'>ct.widen(c)</span>
for
<span class='texttt'>c</span>
in the range
<span class='texttt'>'0'</span>
through
<span class='texttt'>'9'</span>,
inclusive, and
<span class='texttt'>ct</span>
is a reference of type
<span class='texttt'>const ctype&lt;charT&gt;&amp;</span>
obtained as described in the definitions of
<span class='texttt'>money_&shy;get&lt;&gt;</span>
and
<span class='texttt'>money_&shy;put&lt;&gt;</span>.
The symbol
<span class='texttt'>thousands-sep</span>
is the character returned by
<span class='texttt'>thousands_&shy;sep()</span>.
The space character used is the value
<span class='texttt'>ct.widen(' ')</span>.
White space characters are those characters
<span class='texttt'>c</span>
for which
<span class='texttt'>ci.is(space, c)</span>
returns
<span class='texttt'>true</span>.
The number of digits required after the decimal point (if any)
is exactly the value returned by
<span class='texttt'>frac_&shy;digits()</span>.</p></div><div class='para' id='locale.moneypunct-4'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5118'>#</a></div><p >The placement of thousands-separator characters (if any)
is determined by the value returned by
<span class='texttt'>grouping()</span>,
defined identically as the member
<span class='texttt'>numpunct&lt;&gt;&#x200b;::&#x200b;do_&shy;grouping()</span>.</p></div><div class='footnote' id='footnote-249'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-249'>249)</a></div><p >An array of
<span class='texttt'>char</span>,
rather than an array of
<span class='texttt'>part</span>,
is specified for
<span class='texttt'>pattern&#x200b;::&#x200b;field</span>
purely for efficiency.</p></div><div id='locale.moneypunct.members'><h4 ><a class='secnum' href='#locale.moneypunct.members' style='min-width:133pt'>22.4.6.3.1</a> <span class='texttt'>moneypunct</span> members <a class='abbr_ref' href='locale.moneypunct.members'>[locale.moneypunct.members]</a></h4><p ><span class='indexparent'><a class='index' id='moneypunct,decimal_point'></a></span><span class='indexparent'><a class='index' id='decimal_point,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,thousands_sep'></a></span><span class='indexparent'><a class='index' id='thousands_sep,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,grouping'></a></span><span class='indexparent'><a class='index' id='grouping,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,curr_symbol'></a></span><span class='indexparent'><a class='index' id='curr_symbol,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,positive_sign'></a></span><span class='indexparent'><a class='index' id='positive_sign,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,negative_sign'></a></span><span class='indexparent'><a class='index' id='negative_sign,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,frac_digits'></a></span><span class='indexparent'><a class='index' id='frac_digits,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,positive_sign'></a></span><span class='indexparent'><a class='index' id='positive_sign,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,negative_sign'></a></span><span class='indexparent'><a class='index' id='negative_sign,moneypunct'></a></span></p><p ><pre class='codeblock'>
charT        decimal_point() const;
charT        thousands_sep() const;
string       grouping()      const;
string_type  curr_symbol()   const;
string_type  positive_sign() const;
string_type  negative_sign() const;
int          frac_digits()   const;
pattern      pos_format()    const;
pattern      neg_format()    const;</pre></p><div class='para' id='locale.moneypunct.members-1'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct.members-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5148'>#</a></div><p >Each of these functions <span class='texttt'><span class='textit'>F</span></span>
returns the result of calling the corresponding
virtual member function
<span class='texttt'>do_&shy;<span class='textit'>F</span>()</span>.</p></div></div><div id='locale.moneypunct.virtuals'><h4 ><a class='secnum' href='#locale.moneypunct.virtuals' style='min-width:133pt'>22.4.6.3.2</a> <span class='texttt'>moneypunct</span> virtual functions <a class='abbr_ref' href='locale.moneypunct.virtuals'>[locale.moneypunct.virtuals]</a></h4><p ><span class='indexparent'><a class='index' id='moneypunct,do_decimal_point'></a></span><span class='indexparent'><a class='index' id='do_decimal_point,moneypunct'></a></span></p><p ><code class='itemdecl'>charT do_decimal_point() const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.moneypunct.virtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct.virtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5162'>#</a></div><p ><span class='textit'>Returns:</span> 
The radix separator to use in case
<span class='texttt'>do_&shy;frac_&shy;digits()</span>
is greater than zero.<a class='footnotenum' href='#footnote-250'>250</a>
</p></div></div><p ><span class='indexparent'><a class='index' id='moneypunct,do_thousands_sep'></a></span><span class='indexparent'><a class='index' id='do_thousands_sep,moneypunct'></a></span></p><p ><code class='itemdecl'>charT do_thousands_sep() const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.moneypunct.virtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct.virtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5176'>#</a></div><p ><span class='textit'>Returns:</span> 
The digit group separator to use in case
<span class='texttt'>do_&shy;grouping()</span>
specifies a digit grouping pattern.<a class='footnotenum' href='#footnote-251'>251</a>
</p></div></div><p ><span class='indexparent'><a class='index' id='moneypunct,do_grouping'></a></span><span class='indexparent'><a class='index' id='do_grouping,moneypunct'></a></span></p><p ><code class='itemdecl'>string do_grouping() const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.moneypunct.virtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct.virtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5190'>#</a></div><p ><span class='textit'>Returns:</span> 
A pattern defined identically as, but not necessarily equal to, the result of
<span class='texttt'>numpunct&lt;charT&gt;&#x200b;::&#x200b;&#x200b;do_&shy;grouping()</span>.<a class='footnotenum' href='#footnote-252'>252</a>
</p></div></div><p ><span class='indexparent'><a class='index' id='moneypunct,do_curr_symbol'></a></span><span class='indexparent'><a class='index' id='do_curr_symbol,moneypunct'></a></span></p><p ><code class='itemdecl'>string_type do_curr_symbol() const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.moneypunct.virtuals-4'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct.virtuals-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5205'>#</a></div><p ><span class='textit'>Returns:</span> 
A string to use as the currency identifier symbol.<a class='footnotenum' href='#footnote-253'>253</a>
</p></div></div><p ><span class='indexparent'><a class='index' id='moneypunct,do_positive_sign'></a></span><span class='indexparent'><a class='index' id='do_positive_sign,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,do_negative_sign'></a></span><span class='indexparent'><a class='index' id='do_negative_sign,moneypunct'></a></span></p><p ><code class='itemdecl'>string_type do_positive_sign() const;
string_type do_negative_sign() const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.moneypunct.virtuals-5'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct.virtuals-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5221'>#</a></div><p ><span class='textit'>Returns:</span> 
<span class='texttt'>do_&shy;positive_&shy;sign()</span>
returns the string to use to indicate a
positive monetary value;<a class='footnotenum' href='#footnote-254'>254</a>
<span class='texttt'>do_&shy;negative_&shy;sign()</span>
returns the string to use to indicate a negative value.
</p></div></div><p ><span class='indexparent'><a class='index' id='moneypunct,do_frac_digits'></a></span><span class='indexparent'><a class='index' id='do_frac_digits,moneypunct'></a></span></p><p ><code class='itemdecl'>int do_frac_digits() const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.moneypunct.virtuals-6'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct.virtuals-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5236'>#</a></div><p ><span class='textit'>Returns:</span> 
The number of digits after the decimal radix separator, if any.<a class='footnotenum' href='#footnote-255'>255</a>
</p></div></div><p ><span class='indexparent'><a class='index' id='moneypunct,do_pos_format'></a></span><span class='indexparent'><a class='index' id='do_pos_format,moneypunct'></a></span><span class='indexparent'><a class='index' id='moneypunct,do_neg_format'></a></span><span class='indexparent'><a class='index' id='do_neg_format,moneypunct'></a></span></p><p ><code class='itemdecl'>pattern do_pos_format() const;
pattern do_neg_format() const;
</code></p><div class='itemdescr'></div><div class='para' id='locale.moneypunct.virtuals-7'><div class='marginalizedparent'><a class='marginalized' href='#locale.moneypunct.virtuals-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/5bc5cbae28d9e741ebc7df996f1f0d230ac4087e/source/locales.tex#L5250'>#</a></div><p ><span class='textit'>Returns:</span> 
The specializations required in Table <a href='locale.category#tab:localization.required.specializations'>70</a> (<a href='locale.category'>[locale.category]</a>), namely
<span class='texttt'>moneypunct&lt;char&gt;</span>,
<span class='texttt'>moneypunct&lt;&#x200b;wchar_&shy;t&gt;</span>,
<span class='texttt'>moneypunct&lt;char, true&gt;</span>,
and
<span class='texttt'>moneypunct&lt;wchar_&shy;t, true&gt;</span>,
return an object of type
<span class='texttt'>pattern</span>
initialized to
<span class='texttt'>{ symbol, sign, none, value }</span>.<a class='footnotenum' href='#footnote-256'>256</a>
</p></div></div><div class='footnote' id='footnote-250'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-250'>250)</a></div><p >In common U.S. locales this is
<span class='texttt'>'.'</span>.</p></div><div class='footnote' id='footnote-251'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-251'>251)</a></div><p >In common U.S. locales this is
<span class='texttt'>','</span>.</p></div><div class='footnote' id='footnote-252'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-252'>252)</a></div><p >To specify grouping by 3s,
the value is <span class='texttt'>"\003"</span>
<span class='textit'>not</span>
<span class='texttt'>"3"</span>.</p></div><div class='footnote' id='footnote-253'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-253'>253)</a></div><p >For international
specializations (second template parameter
<span class='texttt'>true</span>)
this is typically four characters long, usually three letters and a space.</p></div><div class='footnote' id='footnote-254'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-254'>254)</a></div><p >This is usually the empty string.</p></div><div class='footnote' id='footnote-255'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-255'>255)</a></div><p >In
common U.S.&nbsp;locales, this is 2.</p></div><div class='footnote' id='footnote-256'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-256'>256)</a></div><p >Note that the international
symbol returned by
<span class='texttt'>do_&shy;curr_&shy;sym()</span>
usually contains a space, itself;
for example, <span class='texttt'>"USD "</span>.</p></div></div></div><div id='locale.moneypunct.byname'><h4 ><a class='secnum' href='#locale.moneypunct.byname' style='min-width:118pt'>22.4.6.4</a> Class template <span class='texttt'>moneypunct_&shy;byname</span> <a class='abbr_ref' href='locale.moneypunct.byname'>[locale.moneypunct.byname]</a></h4><p ><span class='indexparent'><a class='index' id='moneypunct_byname'></a></span></p><p ><pre class='codeblock'>
namespace std {
  template &lt;class charT, bool Intl = false&gt;
  class moneypunct_byname : public moneypunct&lt;charT, Intl&gt; {
  public:
    using pattern     = money_base::pattern;
    using string_type = basic_string&lt;charT&gt;;

    explicit moneypunct_byname(const char*, size_t refs = 0);
    explicit moneypunct_byname(const string&amp;, size_t refs = 0);
  protected:
    ~moneypunct_byname();
  };
}</pre></p></div></div></div></body></html>